<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"a913481180.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="https://a913481180.github.io/page/2/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://a913481180.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2022/06/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/11/20-22-22/" class="post-title-link" itemprop="url">前端包管理工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-11 20:22:22" itemprop="dateCreated datePublished" datetime="2022-06-11T20:22:22+08:00">2022-06-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><blockquote>
<p>主要的 npm 版本更新日程：<br><a href="mailto:&#x6e;&#112;&#x6d;&#64;&#118;&#49;&#46;&#x30;&#46;&#48;">&#x6e;&#112;&#x6d;&#64;&#118;&#49;&#46;&#x30;&#46;&#48;</a> 首次发布–2010 年<br><a href="mailto:&#110;&#112;&#109;&#64;&#x76;&#51;&#x2e;&#x30;&#x2e;&#48;">&#110;&#112;&#109;&#64;&#x76;&#51;&#x2e;&#x30;&#x2e;&#48;</a> node_modules 目录结构扁平化 –2015 年 06 月<br><a href="mailto:&#x6e;&#112;&#x6d;&#64;&#x34;&#x2e;&#48;&#x2e;&#48;">&#x6e;&#112;&#x6d;&#64;&#x34;&#x2e;&#48;&#x2e;&#48;</a> package-lock.json 前身 npm-shrinkwrap.json 用于依赖锁定–2016 年 10 月<br><a href="mailto:&#110;&#112;&#x6d;&#64;&#118;&#x35;&#x2e;&#x30;&#46;&#x30;">&#110;&#112;&#x6d;&#64;&#118;&#x35;&#x2e;&#x30;&#46;&#x30;</a> package-lock.json 默认生成，并兼容 npm-shrinkwrap.json，重构 npm-cache，大大提升下载速度 –2017 年 05 月<br><a href="mailto:&#x6e;&#112;&#109;&#64;&#x76;&#x35;&#x2e;&#50;&#46;&#48;">&#x6e;&#112;&#109;&#64;&#x76;&#x35;&#x2e;&#50;&#46;&#48;</a> npx 命令发布 –2017 年 07 月<br><a href="mailto:&#x6e;&#112;&#x6d;&#x40;&#118;&#x36;&#46;&#x30;&#46;&#48;">&#x6e;&#112;&#x6d;&#x40;&#118;&#x36;&#46;&#x30;&#46;&#48;</a> 增加 npm init –2018 年 05 月</p>
</blockquote>
<h3 id="一，包的安装-更新-卸载"><a href="#一，包的安装-更新-卸载" class="headerlink" title="一，包的安装/更新/卸载"></a>一，包的安装/更新/卸载</h3><p><code>npm i</code> 或者<code>npm install</code>装包,默认安装最新版本，直接<code>npm i</code>会安装<code>package.json</code>中 dependencies 的所有包</p>
<p><code>npm i xx@1.0</code>安装指定版本</p>
<p><code>npm i -S</code> 或者 <code>npm i --save</code>装包到生产环境（也就是上线后需要的依赖），在<code>package.json</code>的 dependencies 中生成版本信息</p>
<p><code>npm i -D</code> 或者 <code>npm i --save-dev</code>装包到开发环境（也就是开发时需要的依赖），在<code>package.json</code>的 devDependencies 中生成版本信息</p>
<p><code>npm i xx@1.0 --save-exact</code>精确安装指定版本的包到生产环境。精确的意思就是，什么版本就是什么版本，版本号前面的<code>^</code>会消失掉。有<code>^</code> 代表是补丁版本</p>
<p><code>npm uninstall xx</code>卸载包</p>
<p><code>npm update xx@1.0</code>更新包，默认更新到最新</p>
<p><code>npm outdated</code>检查包是否过时，默认列出所有过时的包</p>
<p><code>npm i xx1@npm:xx@1</code><br><code>npm i xx2@npm:xx@2</code><br>安装同一个包的不同版本，如要引入 1 版本，则<code>import ‘xx1’</code>。<code>npm 6.9</code>及以后的版本可用</p>
<h3 id="二，信息查看"><a href="#二，信息查看" class="headerlink" title="二，信息查看"></a>二，信息查看</h3><p><code>npm ls</code>查看安装过的包，加<code>-g</code>就是查看全局安装过的包， <code>--depth 0</code>就是查看第一层，不再深入递归查询出子文件夹</p>
<p><code>npm ls 包名 -g</code>查看某个包，有则显示版本，没有则是 empty</p>
<p><code>npm root xx</code>查看包的安装路径</p>
<p><code>npm view xx versions</code>查看某个包在线上的所有版本</p>
<p>三，配置向<br><code>npm config set proxy=&quot;http://xx.com:8080&quot;</code>因为公司的防火墙原因，无法完成任何模块的安装，这个时候设置代理可以解决</p>
<p><code>npm config set registry=&quot;https://registry.npm.taobao.org&quot;</code>设置安装源，如上就是设置源为国内的淘宝镜像</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://npm.taobao.org/">https://npm.taobao.org</a> 和 <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a> 将在 2022.06.30 号正式下线和停止 DNS 解析。<br>新域名：<a target="_blank" rel="noopener" href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p>
</blockquote>
<p>注意 npm 更换国内镜像源之后，将无法再使用 npm search 命令，需要恢复为官方源才可以使用，如果恢复官方源后还不可使用，运行删除注册表命令后重试即可。</p>
<p><code>npm config delete registry</code>// 删除注册表</p>
<p><code>npm config list -l</code>查看所有配置</p>
<h3 id="三-其它"><a href="#三-其它" class="headerlink" title="三, 其它"></a>三, 其它</h3><p><code>npm cache clean</code>清除 npm 本地缓存</p>
<p><code>npm init</code>初始化 package.json</p>
<p><code>npm start</code>启动指令,npm start 指令会匹配到 package 的 scripts 里的配置，然后启动对应脚本。start 此类的支持自定义，常见的自定义为 dev</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;xxx&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四，发布自己的包"><a href="#四，发布自己的包" class="headerlink" title="四，发布自己的包"></a>四，发布自己的包</h3><h4 id="第一步：进入要发布的项目根目录，初始化为-npm-包"><a href="#第一步：进入要发布的项目根目录，初始化为-npm-包" class="headerlink" title="第一步：进入要发布的项目根目录，初始化为 npm 包"></a>第一步：进入要发布的项目根目录，初始化为 npm 包</h4><p><code>npm init</code></p>
<p>依次按提示填入包名、版本、描述、github 地址、关键字、license 等<br>这步完成之后会生成一个 package.json 文件，上面输入的这些信息可以在该文件中修改<br>name 是名字，不能和别人的一样，否则发布失败<br>version 是版本号，每次发布自己手动修改，版本号需递增，否则发布失败<br>main 设置入口文件，入口文件需和 package 同级，如不同级，则应该写/xx/yy 这样的相对路径，</p>
<p>注意：如果你的包引用了第三方包，则需要在 package.json 文件种增加 dependencies 节点，写入依赖的包及版本</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;colors&quot;</span>: <span class="string">&quot;^1.3.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;on-finished&quot;</span>: <span class="string">&quot;^2.3.0&quot;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="第二步、注册-npm-用户，有两种方法-注册-npm-用户，有两种方法"><a href="#第二步、注册-npm-用户，有两种方法-注册-npm-用户，有两种方法" class="headerlink" title="第二步、注册 npm 用户，有两种方法 注册 npm 用户，有两种方法"></a>第二步、注册 npm 用户，有两种方法 注册 npm 用户，有两种方法</h4><p>方法一、npm 官网注册：npm</p>
<p>方法二、使用 npm 命令注册：npm adduser</p>
<h4 id="第三步、账号登录"><a href="#第三步、账号登录" class="headerlink" title="第三步、账号登录"></a>第三步、账号登录</h4><p><code>npm login</code></p>
<p>依次输入第二步中第一种方法注册的用户名、密码和邮箱</p>
<h4 id="第四步、发布包，上传到-npm-包服务器"><a href="#第四步、发布包，上传到-npm-包服务器" class="headerlink" title="第四步、发布包，上传到 npm 包服务器"></a>第四步、发布包，上传到 npm 包服务器</h4><p><code>npm publish</code></p>
<p>注意：如果报错：<code>&#39;You do not have permission to publish &quot;mypackage1&quot;. Are you logged in as the correct user?&#39;</code></p>
<p>表示包<code>mypackage1</code>已经在包管理器已经存在被别人用了，需要更该包名称</p>
<h3 id="五，更新一个已经发布的包"><a href="#五，更新一个已经发布的包" class="headerlink" title="五，更新一个已经发布的包"></a>五，更新一个已经发布的包</h3><h4 id="第一步、修改包的版本"><a href="#第一步、修改包的版本" class="headerlink" title="第一步、修改包的版本"></a>第一步、修改包的版本</h4><p>这次我在包根目录下新加了一个 index.js 文件</p>
<p><code>npm version patch</code> 该命令在原来的版本上自动加 1,实际上是将 package.json 文件中的 version 值修改了。</p>
<h4 id="第二步、重新发布包"><a href="#第二步、重新发布包" class="headerlink" title="第二步、重新发布包"></a>第二步、重新发布包</h4><p><code>npm publish</code></p>
<h3 id="六、删除包"><a href="#六、删除包" class="headerlink" title="六、删除包"></a>六、删除包</h3><p>1、删除指定的版本</p>
<p><code>npm unpublish 包名@版本号</code></p>
<p>2、删除整个包</p>
<p><code>npm unpublish 包名 --force</code></p>
<h3 id="npx"><a href="#npx" class="headerlink" title="npx"></a>npx</h3><p>npx 是 npm5.2 版本新增的一个命令，如果 npm 版本没到 v5.2，请运行<code>npm install -g npx</code></p>
<h4 id="可以运行本地的模块"><a href="#可以运行本地的模块" class="headerlink" title="可以运行本地的模块"></a>可以运行本地的模块</h4><p>例如在 vue 项目中，想运行本地的 <code>vue-cli-service serve</code> 如果直接在命令行运行会报错：<code>找不到命令</code><br>所以我们通常这样：<br>在 package.json 中：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//....其它配置</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;vue-cli-service serve&quot;</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">//....其它配置</span></span><br></pre></td></tr></table></figure>

<p>然后：<code>npm run dev</code></p>
<p>然而现在，通过 npx 可以这样：<code>npx cli-service serve</code>,运行成功</p>
<h4 id="npx-方便使用一次就丢弃的情况，不会全局安装"><a href="#npx-方便使用一次就丢弃的情况，不会全局安装" class="headerlink" title="npx 方便使用一次就丢弃的情况，不会全局安装"></a>npx 方便使用一次就丢弃的情况，不会全局安装</h4><p>例如 create-react-app，以往我们需要安装全局的包。但是使用一次后面几乎就不怎么使用了，非常浪费磁盘空间。现在我们可以用<code>npx create-react-app myapp</code>，用完就删，真香！<br>如果第一次使用这个命令，npx 会下载 create-react-app 放在临时文件中，过一段时间会自动清除，注意不会立即清除，我测试发现第二次运行<code>npx create-react-app myapp</code>不会重新下载，它会从缓存中获取。</p>
<h4 id="npm-init-和-npx-相似"><a href="#npm-init-和-npx-相似" class="headerlink" title="npm init 和 npx 相似"></a>npm init 和 npx 相似</h4><p>在 npm@6 版本中，增加了一个新命令<code>npm init &lt;pkg&gt;</code><br>这两个命令是等价的：<br><code>npm init react-app myapp</code><br><code>npx create-react-app myapp</code><br><code>npm init &lt;pkg&gt;</code>对与 create 开头的脚手架制定了一个特殊命令，例如 create-react-app、create-esm。<code>npm init</code> 下载时会默认对安装的 pkg 包添加 create 前缀，同时像 npx 一样不会全局安装，只是运行一次，后面会删除。</p>
<p>但<code>npm init &lt;pkg&gt;</code>不能完全取代 npx，例如运行<code>npm init http-server</code> 本意是想一次性启动一个本地服务 结果报错.途中可以看到 http-server 被变成了 create-http-server，所以就找不到该模块，推荐用 npx 就好，至少使用起来更可控。</p>
<h2 id="YARN"><a href="#YARN" class="headerlink" title="YARN"></a>YARN</h2><blockquote>
<p>Yarn 是由 Facebook、Google、Exponent 和 Tilde 联合推出了一个新的 JS 包管理工具 。<br>yarn 相当于 npm 优势（早期）：<br>这里列出一些早期的 yarn 相对于 npm 比较大的优势：<br>支持离线安装（npm@5 已支持）<br>依赖扁平化结构（npm@3 已支持）<br>依赖安装确定性 yarn.lock（npm@5 增加了 package-lock.json）<br>安装速度快并行下载<br>安装失败自动重试<br>等等…因为 npm 新版本基本上已经解决了自身的老毛病，两者没有想象中那么大的区别。</p>
</blockquote>
<p>安装：<code>npm install -g yarn</code></p>
<p>执行 <code>yarn xxx</code> 命令报以下错误时：</p>
<p>操作以下步骤进行策略更改：</p>
<blockquote>
<p>1.使用管理员身份运行 <code>cmd</code> 或 <code>Power shell</code> 2.输入：<code>set-executionpolicy remotesigned</code> 3.输入<code>Y</code>，回车保存</p>
</blockquote>
<p>yarn 配置源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询源</span></span><br><span class="line">yarn config get registry</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更换国内源</span></span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复官方源</span></span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.yarnpkg.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除注册表</span></span><br><span class="line">yarn config delete registry</span><br></pre></td></tr></table></figure>

<p>npm 与 yarn 命令对比：</p>
<table>
<thead>
<tr>
<th>npm 命令</th>
<th>yarn 命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>npm install</td>
<td>yarn install</td>
<td>如果 node_modules 中有相应的包则不会重新下载 可以–force 强制</td>
</tr>
<tr>
<td>npm install [package@版本号]</td>
<td>yarn add [package@版本号]</td>
<td>指定版本安装一个包</td>
</tr>
<tr>
<td>npm install [package] –save</td>
<td>yarn add [package]</td>
<td>安装一个包,–save 是 yarn 默认的</td>
</tr>
<tr>
<td>npm install -g [package]</td>
<td>yarn global add [package@版本号]</td>
<td>指定版本安装一个包</td>
</tr>
<tr>
<td>npm install –save-dev [package]</td>
<td>yarn add –dev [package]</td>
<td>安装包作为开发依赖项，简写<code>-D</code></td>
</tr>
<tr>
<td>npm uninstall [package]</td>
<td>yarn remove [package]</td>
<td>卸载一个包</td>
</tr>
<tr>
<td>npm uninstall –save-dev [package]</td>
<td>yarn remove [package]</td>
<td>卸载开发依赖包</td>
</tr>
<tr>
<td>npm update</td>
<td>yarn upgrade</td>
<td>更新的依赖关系</td>
</tr>
<tr>
<td>npm update [package]</td>
<td>yarn upgrade [package]</td>
<td>更新包，npm 可以通过 <code>--save| --save-dev</code> 指定升级哪类依赖</td>
</tr>
</tbody></table>
<h2 id="PNPM"><a href="#PNPM" class="headerlink" title="PNPM"></a>PNPM</h2><blockquote>
<p>pnpm(Performance npm，简称高性能 npm)的作者 Zoltan Kochan 发现 yarn 并没有打算去解决上述的这些问题，于是另起炉灶，写了全新的包管理器。<br>pnpm 继承了 yarn 和新版 npm 的所有优点，包括离线模式和确定性安装。<br>但是链接在一些场景下会存在兼容的问题，例如 Electron 应用无法使用 pnpm、部署在 lambda 上的应用无法使用 pnpm</p>
</blockquote>
<p>pnpm 复刻了 npm 所有的命令，所以使用方法和 npm 一样，并且在安装目录结构上做了优化，特点是善用链接，且由于链接的优势，大多数情况下 pnpm 的安装速度比 yarn 和 npm 更快。</p>
<p>安装：<code>npm i pnpm -g</code></p>
<p>升级版本<code>pnpm add -g pnpm to update</code></p>
<p>设置源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm config get registry //查看源</span><br><span class="line">pnpm config <span class="built_in">set</span> registry https://registry.npmmirror.com //切换淘宝源</span><br></pre></td></tr></table></figure>

<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>在项目根目录安装依赖包 bar，而 bar 依赖了 foo。点开项目根目录的 node_modules，可以看到我们在项目中安装的 bar，以及.pnpm 文件夹。<br>那么 pnpm 是如何维护依赖的嵌套关系的呢？</p>
<p>首先在<code>.pnpm</code>文件夹以平铺的方式存储了项目中所有的依赖包，建立硬链接。命名的方式如下：</p>
<p><code>.pnpm/&lt;organization-name&gt;+&lt;package-name&gt;@&lt;version&gt;/node_modules/&lt;name&gt;// 组织名(若无会省略)+包名@版本号/node_modules/名称(项目名称)</code><br>其中.pnpm 中的包中的 node_modules 下面的包中的每个文件都是内容可寻址存储的硬链接。将 foo 和 bar 都放到 node_modules 文件夹，可以保证包能自行导入自己。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">└── .pnpm</span><br><span class="line"> ├── foo@1.0.0</span><br><span class="line"> │   └── node_modules</span><br><span class="line"> │       └── foo -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line"> │           ├── index.js</span><br><span class="line"> │           └── package.json</span><br><span class="line"> └── bar@1.0.0</span><br><span class="line">     └── node_modules</span><br><span class="line">         └── bar -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line">             ├── index.js</span><br><span class="line">             └── package.json</span><br></pre></td></tr></table></figure>

<p>建立符号链接，由于 bar 依赖了 foo，因此 foo 被符号链接到<a href="mailto:&#x62;&#97;&#x72;&#x40;&#x31;&#x2e;&#x30;&#46;&#x30;">&#x62;&#97;&#x72;&#x40;&#x31;&#x2e;&#x30;&#46;&#x30;</a>/node_modules 文件夹下，</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">└── .pnpm</span><br><span class="line"> ├── foo@1.0.0</span><br><span class="line"> │   └── node_modules</span><br><span class="line"> │       └── foo -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line"> │           ├── index.js</span><br><span class="line"> │           └── package.json</span><br><span class="line"> └── bar@1.0.0</span><br><span class="line">     └── node_modules</span><br><span class="line">         └── bar -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line">         │    ├── index.js</span><br><span class="line">         │    └── package.json</span><br><span class="line">         └── foo -&gt; ../../bar@1.0.0/node_modules/bar 符号链接</span><br></pre></td></tr></table></figure>

<p>处理直接依赖，bar 被符号链接到根目录的 node_modules 文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">├── bar -&gt; ./.pnpm/bar@1.0.0/node_modules/bar 符号链接</span><br><span class="line">└── .pnpm</span><br><span class="line"> ├── foo@1.0.0</span><br><span class="line"> │   └── node_modules</span><br><span class="line"> │       └── foo -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line"> │           ├── index.js</span><br><span class="line"> │           └── package.json</span><br><span class="line"> └── bar@1.0.0</span><br><span class="line">     └── node_modules</span><br><span class="line">         └── bar -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line">         │    ├── index.js</span><br><span class="line">         │    └── package.json</span><br><span class="line">         └── foo -&gt; ../../bar@1.0.0/node_modules/bar 符号链接</span><br></pre></td></tr></table></figure>

<p>在项目中我们引入 bar 的时候，会在当前项目根目录的 node_modules 找 bar，从 projectRoot/node_modules/bar 这个符号链接找到 bar 的真实文件 projectRoot/node_modules/.pnpm/<a href="mailto:&#98;&#97;&#114;&#x40;&#x31;&#46;&#x30;&#x2e;&#48;">&#98;&#97;&#114;&#x40;&#x31;&#46;&#x30;&#x2e;&#48;</a>/node_modules/bar（硬链接即可看做真实存在的文件）。<br>接着 bar 依赖了 foo，根据 node 的寻址机制，会从里到外找 foo，最后在这个路径 projectRoot/node_modules/.pnpm/<a href="mailto:&#98;&#97;&#114;&#x40;&#x31;&#x2e;&#48;&#x2e;&#48;">&#98;&#97;&#114;&#x40;&#x31;&#x2e;&#48;&#x2e;&#48;</a>/node_modules/foo 找到了，这个是一个符号链接，会定位到 projectRoot/node_modules/.pnpm/<a href="mailto:&#102;&#x6f;&#111;&#x40;&#x31;&#x2e;&#48;&#46;&#x30;">&#102;&#x6f;&#111;&#x40;&#x31;&#x2e;&#48;&#46;&#x30;</a></p>
<h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><ul>
<li><p>解决了幽灵依赖的问题<br>yarn 和 npm 中的幽灵依赖：由于在 yarn 或 npm 中采用扁平化的安装包的方式，即所有的包（包 ffff 依赖）都被提升到了项目根目录中的 node_modules 中，那么项目中可以直接引用到不在 package.json 中声明的包，那么在包更新的时候，可能会导致问题。<br>而 pnmp 中的项目根目录的 node_modules 中只有项目直接依赖的包，所以不会有这个问题。</p>
</li>
<li><p>路径过长的问题<br>在 npm@3 之前，npm 采用的嵌套结构管理包，node_modules 结构是干净、可预测的，因为 node_modules 中的每个依赖项都有自己的 node_modules 文件夹。但是这样的管理方式会导致路径过程超出 window 的限制。<br>在 npm@3 和 yarn 中，采用了扁平化结构管理包（解决了路径过长的问题，导致了幽灵依赖的问题）。<br>pnpm 利用符号链接解决了这个问题。<br>继续上面的<br>添加<a href="mailto:&#113;&#97;&#x72;&#64;&#x32;&#46;&#48;&#x2e;&#x30;">&#113;&#97;&#x72;&#64;&#x32;&#46;&#48;&#x2e;&#x30;</a>作为 foo 和 bar 的依赖项,可以看到我们目录深度没有改变，但却表达了嵌套的包依赖关系。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">├── bar -&gt; ./.pnpm/bar@1.0.0/node_modules/bar 符号链接</span><br><span class="line">└── .pnpm</span><br><span class="line">    ├── foo@1.0.0</span><br><span class="line">    │   └── node_modules</span><br><span class="line">    │       └── foo -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line">    │           ├── index.js</span><br><span class="line">    │           └── package.json</span><br><span class="line">    │       └── qar -&gt; ../../qar@2.0.0/node_modules/qar 符号链接</span><br><span class="line">    └── bar@1.0.0</span><br><span class="line">    │   └── node_modules</span><br><span class="line">    │       └── bar -&gt; &lt;store&gt;/bar 硬链接</span><br><span class="line">    │       │    ├── index.js</span><br><span class="line">    │       │    └── package.json</span><br><span class="line">    │        └── foo -&gt; ../../bar@1.0.0/node_modules/bar 符号链接</span><br><span class="line">    │       └── qar -&gt; ../../qar@2.0.0/node_modules/qar 符号链接</span><br><span class="line">    └── qar@2.0.0</span><br><span class="line">            └── node_modules</span><br><span class="line">                └── qar -&gt; &lt;store&gt;/qar</span><br></pre></td></tr></table></figure>

<ul>
<li>占用更小的内存，下载速度更快<br>使用 npm 时，依赖每次被不同的项目使用，都会重复安装一次。 而在使用 pnpm 时，依赖会被存储在内容可寻址的存储中，所以：</li>
</ul>
<p>如果你用到了某依赖项的不同版本，只会将不同版本间有差异的文件添加到仓库。 例如，如果某个包有 100 个文件，而它的新版本只改变了其中 1 个文件。那么 pnpm update 时只会向存储中心额外添加 1 个新文件，而不会因为仅仅一个文件的改变复制整新版本包的内容。<br>所有文件都会存储在硬盘上的某一位置。 当软件包被被安装时，包里的文件会硬链接到这一位置，而不会占用额外的磁盘空间。 这允许你跨项目地共享同一版本的依赖。<br>因此，您在磁盘上节省了大量空间，这与项目和依赖项的数量成正比，并且安装速度要快得多！</p>
<h2 id="CNPM"><a href="#CNPM" class="headerlink" title="CNPM"></a>CNPM</h2><p>cnpm 是个中国版的 npm，是淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm</p>
<h2 id="npm-vs-yarn-vs-pnpm"><a href="#npm-vs-yarn-vs-pnpm" class="headerlink" title="npm vs yarn vs pnpm"></a>npm vs yarn vs pnpm</h2><h3 id="npm-v1-v2"><a href="#npm-v1-v2" class="headerlink" title="npm v1-v2"></a>npm v1-v2</h3><p>初代 npm(Node.js Package Manager)随着 Node.js 的发布出现了。</p>
<p>它的文件结构是嵌套的,这会导致 3 个问题：</p>
<p>1、node_modules 体积过大(大量重复的包被安装)</p>
<p>2、node_modules 嵌套层级过深(会导致文件路径过长的问题)</p>
<p>3、模块实例不能共享</p>
<h3 id="yarn-amp-npm-v3"><a href="#yarn-amp-npm-v3" class="headerlink" title="yarn &amp; npm v3"></a>yarn &amp; npm v3</h3><p>这个版本 yarn 和 npm v3 带来了扁平化依赖管理：<br>扁平化处理时，比如安装 A，A 依赖 B 和 C，C 依赖 D 和 E，就把 A~E 全部放到 node_modules 目录下，从而解决上个版本中 node_modules 嵌套层级过深的问题。</p>
<p>在 install 安装时，会不停的往上级 node_modules 中寻找，如果找到同样的包，就不再重复安装，从而解决了大量包被重复安装的问题。但是扁平化带来了新的问题：</p>
<ol>
<li>依赖结构的不确定性</li>
<li>扁平化算法本身复杂性很高，耗时较长</li>
<li>项目中仍然可以非法访问没有声明过依赖的包</li>
</ol>
<p>对于问题 1，比如 B 和 C 都依赖了 F，但是依赖的 F 版本不一样,依赖结构的不确定性表现是扁平化的结果不确定，以下 2 种情况都有可能，取决于 package.json 中 B 和 C 的位置。于是出现 yarn.lock(npm5 才有 package-lock.json)，来保证 install 后产生确定的依赖结构。但这并不能完全解决问题，node_modules 中依然存在各种不同版本的 F，而这可能导致各种情况的编译报错，以及安装满，占磁盘空间。</p>
<p>对于问题 3，package.json 中我们只声明了 A，B<del>F 都是因为扁平化处理才放到和 A 同级的 node_modules 下，理论上在项目中写代码时只可以使用 A，但实际上 B</del>F 也可以使用，由于扁平化将没有直接依赖的包提升到 node_modules 一级目录，Node.js 没有校验是否有直接依赖，所以项目中可以非法访问没有声明过依赖的包。这会产生两个问题：B~F 中的包升级后，项目可能出问题和额外的管理成本(比如协作时别人运行一次 npm install 后项目依旧跑不起来)</p>
<h3 id="pnpm"><a href="#pnpm" class="headerlink" title="pnpm"></a>pnpm</h3><p>pnpm 复刻了 npm 所有的命令，所以使用方法和 npm 一样，并且在安装目录结构上做了优化，特点是善用链接，且由于链接的优势，大多数情况下 pnpm 的安装速度比 yarn 和 npm 更快。</p>
<p>比如安装 A，A 依赖了 B：</p>
<ol>
<li><p>安装依赖<br>A 和 B 一起放到.pnpm 中(和上面相比，这里没有耗时的扁平化算法)。<br>另外<a href="mailto:&#65;&#x40;&#49;&#x2e;&#48;&#x2e;&#x30;">&#65;&#x40;&#49;&#x2e;&#48;&#x2e;&#x30;</a>下面是 node_modules，然后才是 A，这样做有两点好处：</p>
<ul>
<li>允许包引用自身</li>
<li>把包和它的依赖摊平，避免循环结构</li>
</ul>
</li>
<li><p>处理间接依赖<br>A 平级目录创建 B，B 指向<a href="mailto:&#66;&#x40;&#x31;&#46;&#x30;&#x2e;&#48;">&#66;&#x40;&#x31;&#46;&#x30;&#x2e;&#48;</a>下面的 B。</p>
</li>
<li><p>处理直接依赖<br>顶层 node_modules 目录下创建 A，指向<a href="mailto:&#x41;&#64;&#49;&#x2e;&#x30;&#x2e;&#x30;">&#x41;&#64;&#49;&#x2e;&#x30;&#x2e;&#x30;</a>下的 A。</p>
</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li><p>如果你想更快的速度，更小的空间，你应该选择 pnpm;</p>
</li>
<li><p>如果你要用 Monorepo(monolithic repository)是一种项目架构,简单的来说:一个仓库内包含多个开发项目(模块,包)，你可以用 yarn 或 pnpm;</p>
</li>
<li><p>如果是 node 项目，你应该用 npm，因为这是 node 官方推荐的，而且 yarn 不支持 node5+;</p>
</li>
<li><p>对于 npm 项目，如果你担心项目的安全性，你可以考虑用 yarn 替换 npm。</p>
</li>
</ul>
<h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><ul>
<li><p>下载 node-gyp 依赖包报错：gyp ERR! find VS msvs_version not set from command line or npm config<br>你需要下载最新的 Visual Studio,下载 Vistual Studio 链接：<a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=BuildTools">https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=BuildTools</a><br>选择 c++桌面开发 , 一定要勾选一个 windows sdk</p>
</li>
<li><p>下载 node-gyp 依赖包报错：/bin/sh: python: not found 的解决方法<br>主要原因是 python 这里命令没有映射到 已经安装的 python 版本上。<br>查看所有的 python 映射</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /usr/bin/python*</span><br></pre></td></tr></table></figure>

<p>增加对于 /usr/bin/python 的映射，这里把它映射到 /usr/bin/python3<br>建立软连接，添加映射</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure>

<ul>
<li>node-canvas 安装报错内容一般如下</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">npm ERR! <span class="built_in">command</span> C:\Windows\system32\cmd.exe /d /s /c node-pre-gyp install --fallback-to-build --update-binary</span><br><span class="line">npm ERR! Warning: Missing input files:</span><br><span class="line">npm ERR! C:\GTK\bin\libgmodule-2.0-0.dll</span><br><span class="line">npm ERR! C:\GTK\bin\libpangocairo-1.0-0.dll</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR!   Backend.cc</span><br><span class="line">npm ERR! C:\Users\lrsgz\scratch\scratch-paint-develop\node_modules\canvas\src\backend\Backend.h(3,10): fatal  error C1083: �޷��򿪰����ļ�: ��cairo.h��: No such file or directory [C:\Users\lrsgz\scratch\scratch-paint-develop\node_modules\canvas\build\canvas.vcxproj]</span><br><span class="line">npm ERR! Failed to execute <span class="string">&#x27;C:\Program Files\nodejs\node.exe C:\Users\lrsgz\AppData\Roaming\npm\node_modules\npm\node_modules\node-gyp\bin\node-gyp.js build --fallback-to-build --update-binary --module=C:\Users\lrsgz\scratch\scratch-paint-develop\node_modules\canvas\build\Release\canvas.node --module_name=canvas --module_path=C:\Users\lrsgz\scratch\scratch-paint-develop\node_modules\canvas\build\Release --napi_version=9 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v108&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这时，只需下载官方给的 windows 版 GTK 2（不是 GTK 3）压缩包,然后解压到 C:\GTK 里（不存在 GTK 文件夹则新建一个再解压进去），就解决了.<br><a target="_blank" rel="noopener" href="https://github.com/Automattic/node-canvas/wiki/Installation:-Windows">https://github.com/Automattic/node-canvas/wiki/Installation:-Windows</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2022/06/01/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/01/20-00-00/" class="post-title-link" itemprop="url">TypeScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-01 20:00:00" itemprop="dateCreated datePublished" datetime="2022-06-01T20:00:00+08:00">2022-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><blockquote>
<p>TypeScript 是一种由微软开发的开源、跨平台的编程语言。它是 JavaScript 的超集，主要提供了类型系统和对 ES6+ 的支持,最终会被编译为 JavaScript 代码。</p>
</blockquote>
<h2 id="安装-TypeScript-npm-包"><a href="#安装-TypeScript-npm-包" class="headerlink" title="安装 TypeScript npm 包"></a>安装 TypeScript npm 包</h2><ul>
<li>安装<br><code>npm install -g typescript</code><br>安装完成后我们就可以使用 TypeScript 编译器，名称叫 tsc，可将编译结果生成 js 文件。</li>
<li>使用<br><code>tsc hello.ts</code></li>
</ul>
<h2 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h2><blockquote>
<p>在 TS 中，某些没有明确指定类型的情况下，TS 的类型推论机制会自动提供类型,有些情况下的类型注解可以省略不写<br>ts 的常用基础类型分为两种：</p>
</blockquote>
<p>基本类型：number/string/boolean/null/undefined/symbol/bigint<br>引用类型：array、 Tuple(元组)、 object(包含 Object 和{})、function<br>特殊类型：any、unknow、void、never、Enum(枚举)<br>其他类型：类型推理、字面量类型、交叉类型</p>
<h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><blockquote>
<p>和 JavaScript 一样，TypeScript 里的所有数字都是浮点数。 这些浮点数的类型是 number。 除了支持十进制和十六进制字面量，TypeScript 还支持 ECMAScript 2015 中引入的二进制和八进制字面量。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decLiteral: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> hexLiteral: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</span><br><span class="line"><span class="keyword">let</span> binaryLiteral: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"><span class="keyword">let</span> octalLiteral: <span class="built_in">number</span> = <span class="number">0o744</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h3><blockquote>
<p>TypeScript 里，undefined 和 null 两者各自有自己的类型分别叫做 undefined 和 null。 和 void 相似，它们的本身的类型用处不是很大：</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p>默认情况下 null 和 undefined 是所有类型的子类型。 就是说你可以把 null 和 undefined 赋值给 number 类型的变量。然而，当你指定了–strictNullChecks 标记，null 和 undefined 只能赋值给 void 和它们各自。</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> list: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;3&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">//使用数组泛型Array&lt;元素类型&gt;</span></span><br><span class="line"><span class="keyword">let</span> arr3: <span class="built_in">Array</span>&lt;<span class="built_in">number</span> | <span class="built_in">string</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;3&quot;</span>]; <span class="comment">//ok</span></span><br></pre></td></tr></table></figure>

<h3 id="元组-Tuple"><a href="#元组-Tuple" class="headerlink" title="元组 Tuple"></a>元组 Tuple</h3><blockquote>
<p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为 string 和 number 类型的元组。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line">x = [<span class="string">&quot;hello&quot;</span>, <span class="number">10</span>]; <span class="comment">// OK</span></span><br><span class="line">x = [<span class="number">10</span>, <span class="string">&quot;hello&quot;</span>]; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>当访问一个越界的元素，会使用联合类型替代：</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">3</span>] = <span class="string">&quot;world&quot;</span>; <span class="comment">// OK, 字符串可以赋值给(string | number)类型</span></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">5</span>].toString()); <span class="comment">// OK, &#x27;string&#x27; 和 &#x27;number&#x27; 都有 toString</span></span><br><span class="line">x[<span class="number">6</span>] = <span class="literal">true</span>; <span class="comment">// Error, 布尔不是(string | number)类型</span></span><br></pre></td></tr></table></figure>

<h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>enum 类型是对 JavaScript 标准数据类型的一个补充。 像 C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字。<br>枚举的类型只能是 string 或 number<br>定义的名称不能为关键字</p>
<ul>
<li>数字枚举</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Color &#123;</span><br><span class="line">  Red,</span><br><span class="line">  Green,</span><br><span class="line">  Blue,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br><span class="line"><span class="comment">//默认情况下，从0开始为元素编号。 你也可以手动的指定成员的数值。 例如，我们将上面的例子改成从 1开始编号：</span></span><br><span class="line"><span class="built_in">enum</span> Color &#123;</span><br><span class="line">  Red = <span class="number">1</span>,</span><br><span class="line">  Green,</span><br><span class="line">  Blue,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br><span class="line"><span class="comment">//或者，全部都采用手动赋值：</span></span><br><span class="line"><span class="built_in">enum</span> Color &#123;</span><br><span class="line">  Red = <span class="number">1</span>,</span><br><span class="line">  Green = <span class="number">2</span>,</span><br><span class="line">  Blue = <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br><span class="line"><span class="comment">// 字枚举除了支持 从成员名称到成员值 的普通映射之外，它还支持 从成员值到成员名称 的反向映射</span></span><br><span class="line"><span class="comment">//枚举类型提供的一个便利是你可以由枚举的值得到它的名字。 例如，我们知道数值为2，但是不确定它映射到Color里的哪个名字，我们可以查找相应的名字：</span></span><br><span class="line"><span class="built_in">enum</span> Color &#123;</span><br><span class="line">  Red = <span class="number">1</span>,</span><br><span class="line">  Green,</span><br><span class="line">  Blue,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> colorName: <span class="built_in">string</span> = Color[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> colorValue: Color = Color.Green;</span><br><span class="line"><span class="built_in">console</span>.log(colorName); <span class="comment">// 显示&#x27;Green&#x27;因为上面代码里它的值是2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>字符串枚举</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Direction &#123;</span><br><span class="line">  NORTH = <span class="string">&quot;NORTH&quot;</span>,</span><br><span class="line">  SOUTH = <span class="string">&quot;SOUTH&quot;</span>,</span><br><span class="line">  EAST = <span class="string">&quot;EAST&quot;</span>,</span><br><span class="line">  WEST = <span class="string">&quot;WEST&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line">(<span class="string">&quot;use strict&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> Direction;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Direction</span>) </span>&#123;</span><br><span class="line">  Direction[<span class="string">&quot;NORTH&quot;</span>] = <span class="string">&quot;NORTH&quot;</span>;</span><br><span class="line">  Direction[<span class="string">&quot;SOUTH&quot;</span>] = <span class="string">&quot;SOUTH&quot;</span>;</span><br><span class="line">  Direction[<span class="string">&quot;EAST&quot;</span>] = <span class="string">&quot;EAST&quot;</span>;</span><br><span class="line">  Direction[<span class="string">&quot;WEST&quot;</span>] = <span class="string">&quot;WEST&quot;</span>;</span><br><span class="line">&#125;)(Direction || (Direction = &#123;&#125;));</span><br></pre></td></tr></table></figure>

<ul>
<li>异构枚举<br>异构枚举的成员值是数字和字符串的混合：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Enum &#123;</span><br><span class="line">  A,</span><br><span class="line">  B,</span><br><span class="line">  C = <span class="string">&quot;C&quot;</span>,</span><br><span class="line">  D = <span class="string">&quot;D&quot;</span>,</span><br><span class="line">  E = <span class="number">8</span>,</span><br><span class="line">  F,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>常量枚举<br>它是使用 const 关键字修饰的枚举，常量枚举会使用内联语法，不会为枚举类型编译生成任何 JavaScript。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">enum</span> Direction &#123;</span><br><span class="line">  NORTH,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dir: Direction = Direction.NORTH;</span><br><span class="line"></span><br><span class="line"><span class="comment">//es5</span></span><br><span class="line"><span class="keyword">var</span> dir = <span class="number">0</span>; <span class="comment">/* NORTH */</span></span><br></pre></td></tr></table></figure>

<h3 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h3><p>不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用 any 类型来标记这些变量：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> notSure: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">&quot;maybe a string instead&quot;</span>;</span><br><span class="line">notSure = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">any</span>[] = [<span class="number">1</span>, <span class="literal">true</span>, <span class="string">&quot;free&quot;</span>];</span><br><span class="line">list[<span class="number">1</span>] = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<h3 id="unknow"><a href="#unknow" class="headerlink" title="unknow"></a>unknow</h3><p>与 any 一样，都可以作为所有类型的顶级类型，但 unknow 更加严格，那么可以说除了 any 之下的第二大类型，接下来对比下 any,主要严格于一下两点：</p>
<ul>
<li>unknow 会对值进行检测，而类型 any 不会做检测操作，说白了，any 类型可以赋值给任何类型，但 unknow 只能赋值给 unknow 类型和 any 类型</li>
<li>unknow 不允许定义的值有任何操作（如 方法，new 等），但 any 可以</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: unknown;</span><br><span class="line"><span class="keyword">let</span> a: <span class="built_in">any</span>;</span><br><span class="line">u = <span class="string">&quot;1&quot;</span>; <span class="comment">//ok</span></span><br><span class="line">u = <span class="number">2</span>; <span class="comment">//ok</span></span><br><span class="line">u = <span class="literal">true</span>; <span class="comment">//ok</span></span><br><span class="line">u = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">//ok</span></span><br><span class="line">u = &#123;&#125;; <span class="comment">//ok</span></span><br><span class="line">u.set(); <span class="comment">// error</span></span><br><span class="line">a.set(); <span class="comment">//ok</span></span><br><span class="line">u(); <span class="comment">// error</span></span><br><span class="line">a(); <span class="comment">//ok</span></span><br><span class="line"><span class="keyword">new</span> u(); <span class="comment">// error</span></span><br><span class="line"><span class="keyword">new</span> a(); <span class="comment">//ok</span></span><br></pre></td></tr></table></figure>

<h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h3><p>某种程度上来说，void 类型像是与 any 类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 void：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">warnUser</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;This is my warning message&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//声明一个void类型的变量没有什么大用，因为你只能为它赋予undefined和null：</span></span><br><span class="line"><span class="keyword">let</span> unusable: <span class="built_in">void</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h3><p>表示一个函数永远不存在返回值，TS 会认为类型为 never，那么与 void 相比, never 应该是 void 子集， 因为 void 实际上的返回值为 undefined，而 never 连 undefined 也不行<br>符合 never 的情况有：当抛出异常的情况和无限死循环<br>变量也可能是 never 类型，当它们被永不为真的类型保护所约束时。never 类型是任何类型的子类型，也可以赋值给任何类型；然而，没有类型是 never 的子类型或可以赋值给 never 类型（除了 never 本身之外）。 即使 any 也不可以赋值给 never。</p>
<p>下面是一些返回 never 类型的函数：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 推断的返回值类型为never</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> error(<span class="string">&quot;Something failed&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回never的函数必须存在无法达到的终点</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infiniteLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> error = (): <span class="function"><span class="params">never</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 等价约 let error = () =&gt; &#123;&#125;</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> error1 = (): <span class="function"><span class="params">never</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><ul>
<li>object 表示非原始类型，也就是除 number，string，boolean，symbol，null 或 undefined 之外的类型。<br>在定义上直接使用 object 是可以的，但你要更改对象的属性就会报错，原因是并没有使对象的内部具体的属性做限制，所以需要使用 <code>&#123;&#125;</code> 来定义内部类型</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1: <span class="built_in">object</span> = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line">obj1.a = <span class="number">3</span>; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2: &#123; <span class="attr">a</span>: <span class="built_in">number</span>; b: <span class="built_in">number</span> &#125; = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line">obj2.a = <span class="number">3</span>; <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Object(大写的 O),代表所有的原始类型或非原始类型都可以进行赋值,除了 null 和`undefined</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj: <span class="built_in">Object</span>;</span><br><span class="line">obj = <span class="number">1</span>; <span class="comment">// ok</span></span><br><span class="line">obj = <span class="string">&quot;a&quot;</span>; <span class="comment">// ok</span></span><br><span class="line">obj = <span class="literal">true</span>; <span class="comment">// ok</span></span><br><span class="line">obj = &#123;&#125;; <span class="comment">// ok</span></span><br><span class="line">obj = <span class="built_in">Symbol</span>(); <span class="comment">//ok</span></span><br><span class="line">obj = <span class="number">10n</span>; <span class="comment">//ok</span></span><br><span class="line"></span><br><span class="line">obj = <span class="literal">null</span>; <span class="comment">// error</span></span><br><span class="line">obj = <span class="literal">undefined</span>; <span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="字面量类型"><a href="#字面量类型" class="headerlink" title="字面量类型"></a>字面量类型</h3><p>在 TS 中，我们可以指定参数的类型是什么，目前支持字符串、数字、布尔三种类型。比如说我定义了 str 的类型是 ‘小杜杜’ 那么 str 的值只能是小杜杜</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: <span class="string">&quot;小杜杜&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> num: <span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> flag: <span class="literal">true</span>;</span><br><span class="line">str = <span class="string">&quot;小杜杜&quot;</span>; <span class="comment">//ok</span></span><br><span class="line">str = <span class="string">&quot;Donmesy&quot;</span>; <span class="comment">// error</span></span><br><span class="line">num = <span class="number">2</span>; <span class="comment">//ok</span></span><br><span class="line">num = <span class="number">7</span>; <span class="comment">// error</span></span><br><span class="line">flag = <span class="literal">true</span>; <span class="comment">// ok</span></span><br><span class="line">flag = <span class="literal">false</span>; <span class="comment">// error`</span></span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可选参数</span></span><br><span class="line"><span class="comment">//在实际使用时，需要注意的是可选参数要放在普通参数的后面，不然会导致编译错误。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params">name: <span class="built_in">string</span>, id: <span class="built_in">number</span>, age?: <span class="built_in">number</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  name: <span class="built_in">string</span> = <span class="string">&quot;semlinker&quot;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  id: <span class="built_in">number</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  age?: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//剩余参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  items.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    array.push(item);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数重载</span></span><br><span class="line"><span class="comment">//函数重载或方法重载是使用相同名称和不同参数数量或类型创建多个方法的一种能力。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">number</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: Combinable, b: Combinable</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// type Combinable = string | number;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&quot;string&quot;</span> || <span class="keyword">typeof</span> b === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.toString() + b.toString();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="交叉类型（-amp-）"><a href="#交叉类型（-amp-）" class="headerlink" title="交叉类型（&amp;）"></a>交叉类型（&amp;）</h3><p>将多个类型合并为一个类型，使用&amp;符号连<br>如果是相同的类型，合并后的类型也是此类型，那如果是不同的类型,会是 never</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AProps = &#123; <span class="attr">a</span>: <span class="built_in">string</span>; c: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> BProps = &#123; <span class="attr">b</span>: <span class="built_in">number</span>; c: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> allProps = AProps &amp; BProps;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Info: allProps = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">7</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="number">1</span>, <span class="comment">// error (property) c: never</span></span><br><span class="line">  <span class="attr">c</span>: <span class="string">&quot;Domesy&quot;</span>, <span class="comment">// error (property) c: never</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><p>类型断言好比其它语言里的类型转换，但是不进行特殊的数据检查和解构。 它没有运行时的影响，只是在编译阶段起作用。 TypeScript 会假设你，程序员，已经进行了必须的检查。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类型断言有两种形式。 其一是“尖括号”语法：</span></span><br><span class="line"><span class="keyword">let</span> someValue: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).length;</span><br><span class="line"></span><br><span class="line"><span class="comment">//另一个为as语法：</span></span><br><span class="line"><span class="keyword">let</span> someValue: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).length;</span><br><span class="line"><span class="comment">//两种形式是等价的。 至于使用哪个大多数情况下是凭个人喜好；然而，当你在TypeScript里使用JSX时，只有 as语法断言是被允许的。</span></span><br></pre></td></tr></table></figure>

<h3 id="非空断言"><a href="#非空断言" class="headerlink" title="非空断言"></a>非空断言</h3><p>后缀表达式操作符 ! 可以用于断言操作对象是非 null 和非 undefined 类型。具体而言，x! 将从 x 值域中排除 null 和 undefined 。! 非空断言操作符会从编译生成的 JavaScript 代码中移除</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 忽略 undefined 和 null 类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params">maybeString: <span class="built_in">string</span> | <span class="literal">undefined</span> | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Type &#x27;string | null | undefined&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line">  <span class="comment">// Type &#x27;undefined&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line">  <span class="keyword">const</span> onlyString: <span class="built_in">string</span> = maybeString; <span class="comment">// Error</span></span><br><span class="line">  <span class="keyword">const</span> ignoreUndefinedAndNull: <span class="built_in">string</span> = maybeString!; <span class="comment">// Ok</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用函数时忽略 undefined 类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> NumGenerator = <span class="function">() =&gt;</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params">numGenerator: NumGenerator | <span class="literal">undefined</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Object is possibly &#x27;undefined&#x27;.(2532)</span></span><br><span class="line">  <span class="comment">// Cannot invoke an object which is possibly &#x27;undefined&#x27;.(2722)</span></span><br><span class="line">  <span class="keyword">const</span> num1 = numGenerator(); <span class="comment">// Error</span></span><br><span class="line">  <span class="keyword">const</span> num2 = numGenerator!(); <span class="comment">//OK</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="确定赋值断言"><a href="#确定赋值断言" class="headerlink" title="确定赋值断言"></a>确定赋值断言</h3><p>在 TS 2.7 版本中引入了确定赋值断言，即允许在实例属性和变量声明后面放置一个 ! 号，以告诉 TS 该属性会被明确赋值,是非 null 和非 undefined 类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num: <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">let</span> num1!: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setNumber = <span class="function">() =&gt;</span> (num = <span class="number">7</span>);</span><br><span class="line"><span class="keyword">const</span> setNumber1 = <span class="function">() =&gt;</span> (num1 = <span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">setNumber();</span><br><span class="line">setNumber1();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// error</span></span><br><span class="line"><span class="built_in">console</span>.log(num1); <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<h3 id="双重断言"><a href="#双重断言" class="headerlink" title="双重断言"></a>双重断言</h3><p>断言失效后，可能会用到,如基础类型不能断言为接口</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Info &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;小杜杜&quot;</span> <span class="keyword">as</span> Info; <span class="comment">// error, 原因是不能把 string 类型断言为 一个接口</span></span><br><span class="line"><span class="keyword">const</span> name1 = <span class="string">&quot;小杜杜&quot;</span> <span class="keyword">as</span> <span class="built_in">any</span> <span class="keyword">as</span> Info; <span class="comment">//ok</span></span><br></pre></td></tr></table></figure>

<ul>
<li>解构<br>解构数组</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> [first, second] = input;</span><br><span class="line">[first, second] = [second, first];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[first, second]: [<span class="built_in">number</span>, <span class="built_in">number</span>]</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(first);</span><br><span class="line">  <span class="built_in">console</span>.log(second);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//你可以在数组里使用...语法创建剩余变量</span></span><br><span class="line"><span class="keyword">let</span> [first, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(first); <span class="comment">// outputs 1</span></span><br><span class="line"><span class="built_in">console</span>.log(rest); <span class="comment">// outputs [ 2, 3, 4 ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [first] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="built_in">console</span>.log(first); <span class="comment">// outputs 1</span></span><br><span class="line"><span class="keyword">let</span> [, second, , fourth] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br></pre></td></tr></table></figure>

<p>对象解构</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">12</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; a, b &#125; = o;</span><br><span class="line"><span class="comment">//可以用没有声明的赋值,注意，我们需要用括号将它括起来，因为Javascript通常会将以 &#123; 起始的语句解析为一个块。</span></span><br><span class="line">(&#123; a, b &#125; = &#123; <span class="attr">a</span>: <span class="string">&quot;baz&quot;</span>, <span class="attr">b</span>: <span class="number">101</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以在对象里使用...语法创建剩余变量：</span></span><br><span class="line"><span class="keyword">let</span> &#123; a, ...passthrough &#125; = o;</span><br><span class="line"><span class="keyword">let</span> total = passthrough.b + passthrough.c.length;</span><br></pre></td></tr></table></figure>

<p>属性重命名</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: newName1, <span class="attr">b</span>: newName2 &#125; = o;</span><br><span class="line"><span class="comment">//好像你写成了以下样子：</span></span><br><span class="line"><span class="keyword">let</span> newName1 = o.a;</span><br><span class="line"><span class="keyword">let</span> newName2 = o.b;</span><br><span class="line"><span class="comment">//这里的冒号不是指示类型的。 如果你想指定它的类型， 仍然需要在其后写上完整的模式。</span></span><br><span class="line"><span class="keyword">let</span> &#123; a, b &#125;: &#123; <span class="attr">a</span>: <span class="built_in">string</span>; b: <span class="built_in">number</span> &#125; = o;</span><br></pre></td></tr></table></figure>

<p>默认值</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">默认值可以让你在属性为 <span class="literal">undefined</span> 时使用缺省值：</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keepWholeObject</span>(<span class="params">wholeObject: &#123; a: <span class="built_in">string</span>, b?: <span class="built_in">number</span> &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; a, b = <span class="number">1001</span> &#125; = wholeObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数声明<br>解构也能用于函数声明。 看以下简单的情况：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> C = &#123; <span class="attr">a</span>: <span class="built_in">string</span>; b?: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123; a, b &#125;: C</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 但是，通常情况下更多的是指定默认值，解构默认值有些棘手。 首先，你需要在默认值之前设置其格式。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123; a = <span class="string">&quot;&quot;</span>, b = <span class="number">0</span> &#125; = &#123;&#125;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">f();</span><br><span class="line"><span class="comment">// 上面的代码是一个类型推断的例子，将在本手册后文介绍。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其次，你需要知道在解构属性上给予一个默认或可选的属性用来替换主初始化列表。 要知道 C 的定义有一个 b 可选属性：</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123; a, b = <span class="number">0</span> &#125; = &#123; a: <span class="string">&quot;&quot;</span> &#125;</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">f(&#123; <span class="attr">a</span>: <span class="string">&quot;yes&quot;</span> &#125;); <span class="comment">// ok, default b = 0</span></span><br><span class="line">f(); <span class="comment">// ok, default to &#123;a: &quot;&quot;&#125;, which then defaults b = 0</span></span><br><span class="line">f(&#123;&#125;); <span class="comment">// error, &#x27;a&#x27; is required if you supply an argument</span></span><br><span class="line"><span class="comment">// 要小心使用解构。 从前面的例子可以看出，就算是最简单的解构表达式也是难以理解的。</span></span><br></pre></td></tr></table></figure>

<ul>
<li>展开<blockquote>
<p>展开操作符正与解构相反。 它允许你将一个数组展开为另一个数组，或将一个对象展开为另一个对象。 例如：</p>
</blockquote>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> first = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> second = [<span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> bothPlus = [<span class="number">0</span>, ...first, ...second, <span class="number">5</span>];<span class="comment">//[0, 1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment">//展开操作创建了 first和second的一份浅拷贝。 它们不会被展开操作所改变。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//你还可以展开对象：</span></span><br><span class="line"><span class="keyword">let</span> defaults = &#123; <span class="attr">food</span>: <span class="string">&quot;spicy&quot;</span>, <span class="attr">price</span>: <span class="string">&quot;$$&quot;</span>, <span class="attr">ambiance</span>: <span class="string">&quot;noisy&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> search = &#123; ...defaults, <span class="attr">food</span>: <span class="string">&quot;rich&quot;</span> &#125;;</span><br><span class="line">search的值为&#123; <span class="attr">food</span>: <span class="string">&quot;rich&quot;</span>, <span class="attr">price</span>: <span class="string">&quot;$$&quot;</span>, <span class="attr">ambiance</span>: <span class="string">&quot;noisy&quot;</span> &#125;。</span><br><span class="line"><span class="comment">// 对象的展开比数组的展开要复杂的多。 像数组展开一样，它是从左至右进行处理，但结果仍为对象。 这就意味着出现在展开对象后面的属性会覆盖前面的属性。 因此，如果我们修改上面的例子，在结尾处进行展开的话：</span></span><br><span class="line"><span class="keyword">let</span> defaults = &#123; <span class="attr">food</span>: <span class="string">&quot;spicy&quot;</span>, <span class="attr">price</span>: <span class="string">&quot;$$&quot;</span>, <span class="attr">ambiance</span>: <span class="string">&quot;noisy&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> search = &#123; <span class="attr">food</span>: <span class="string">&quot;rich&quot;</span>, ...defaults &#125;;</span><br><span class="line"><span class="comment">//那么，defaults里的food属性会重写food: &quot;rich&quot;</span></span><br></pre></td></tr></table></figure>

<p>对象展开还有其它一些意想不到的限制。 首先，它仅包含对象 自身的可枚举属性。 大体上是说当你展开一个对象实例时，你会丢失其方法：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  p = <span class="number">12</span>;</span><br><span class="line">  <span class="function"><span class="title">m</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> C();</span><br><span class="line"><span class="keyword">let</span> clone = &#123; ...c &#125;;</span><br><span class="line">clone.p; <span class="comment">// ok</span></span><br><span class="line">clone.m(); <span class="comment">// error!</span></span><br></pre></td></tr></table></figure>

<p>其次，TypeScript 编译器不允许展开泛型函数上的类型参数。 这个特性会在 TypeScript 的未来版本中考虑实现。</p>
<h3 id="in-映射类型"><a href="#in-映射类型" class="headerlink" title="in 映射类型"></a>in 映射类型</h3><p>用来映射遍历枚举类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> p = <span class="built_in">string</span> | <span class="built_in">number</span> | symbol; <span class="comment">//支持这三种</span></span><br><span class="line"><span class="keyword">type</span> Props = &#123;</span><br><span class="line">  [i <span class="keyword">in</span> p]: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="别名-type"><a href="#别名-type" class="headerlink" title="别名 type"></a>别名 type</h2><p>用来给一个类型起个新名字</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> InfoProps = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">const</span> setInfo = <span class="function">(<span class="params">data: InfoProps</span>) =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="接口-interface"><a href="#接口-interface" class="headerlink" title="接口 interface"></a>接口 interface</h2><p>使用 interface 关键字来定义接口,接口可以用来描述对象</p>
<ul>
<li>可读属性：当我们定义一个接口时，我们的属性可能不需要全都要，这是就需要 ? 来解决</li>
<li>只读属性：用 readonly 修饰的属性为只读属性，意思是指允许定义，不允许之后进行更改</li>
<li>任意属性：这个属性极为重要，它是可以用作就算没有定义，也可以使用，比如 [data: string]: any。比如说我们对组件进行封装，而封装的那个组件并没有导出对应的类型，然而又想让他不报错，这时就可以使用任意属性</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">       <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">       b: <span class="built_in">number</span>;</span><br><span class="line">       c: <span class="built_in">boolean</span>;</span><br><span class="line">       d?: <span class="built_in">number</span>; <span class="comment">// 可选属性</span></span><br><span class="line">       <span class="keyword">readonly</span> e: <span class="built_in">string</span>; <span class="comment">//只读属性</span></span><br><span class="line">       [f: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">//任意属性</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">let</span> res: Props = &#123;</span><br><span class="line">       <span class="attr">a</span>: <span class="string">&#x27;小杜杜&#x27;</span>,</span><br><span class="line">       <span class="attr">b</span>: <span class="number">7</span>,</span><br><span class="line">       <span class="attr">c</span>: <span class="literal">true</span>,</span><br><span class="line">       <span class="attr">e</span>: <span class="string">&#x27;Domesy&#x27;</span>,</span><br><span class="line">       <span class="attr">d</span>: <span class="number">1</span>, <span class="comment">// 有没有d都可以</span></span><br><span class="line">       <span class="attr">h</span>: <span class="number">2</span> <span class="comment">// 任意属性，之前为定义过h</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> res.e = <span class="string">&#x27;hi&#x27;</span> <span class="comment">// error, 原因是可读属性不允许更改</span></span><br></pre></td></tr></table></figure>

<h3 id="接口继承-extends"><a href="#接口继承-extends" class="headerlink" title="接口继承 extends"></a>接口继承 extends</h3><p>与类一样，接口也存在继承属性，也是使用 extends 字段</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> nameProps &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Props <span class="keyword">extends</span> nameProps &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res: Props = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">7</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="函数类型接口"><a href="#函数类型接口" class="headerlink" title="函数类型接口"></a>函数类型接口</h3><p>可以定义函数和类，</p>
<ul>
<li>加 new 修饰的是类，</li>
<li>不加 new 的是函数</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  (data: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info: Props = <span class="function">(<span class="params"><span class="built_in">number</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span>; <span class="comment">//可定义函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> PropsClass &#123;</span><br><span class="line">  <span class="keyword">new</span> (name: <span class="built_in">string</span>): A;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info1 = <span class="function">(<span class="params">fun: PropsClass, name: <span class="built_in">string</span></span>) =&gt;</span> <span class="keyword">new</span> fun(name);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = info1(A, <span class="string">&quot;小杜杜&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res.name); <span class="comment">// &quot;小杜杜&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="keyof-关键字"><a href="#keyof-关键字" class="headerlink" title="keyof 关键字"></a>keyof 关键字</h3><p>获取一个对象接口的所有 key 值,可以检查对象上的键是否存在</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">  sex: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PropsKey = keyof Props; <span class="comment">//包含 name， age， sex</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res: PropsKey = <span class="string">&quot;name&quot;</span>; <span class="comment">// ok</span></span><br><span class="line"><span class="keyword">const</span> res1: PropsKey = <span class="string">&quot;tel&quot;</span>; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型中的应用</span></span><br><span class="line"><span class="keyword">const</span> getInfo = <span class="xml">&lt;T, K extends keyof T&gt;(data: T, key: K): T[K] =&gt; &#123;</span></span><br><span class="line"><span class="xml">  return data[key];</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">const info = &#123;</span></span><br><span class="line"><span class="xml">  name: &quot;小杜杜&quot;,</span></span><br><span class="line"><span class="xml">  age: 7,</span></span><br><span class="line"><span class="xml">  sex: true,</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">getInfo(info, &quot;name&quot;); //ok</span></span><br><span class="line"><span class="xml">getInfo(info, &quot;tel&quot;); //error</span></span><br></pre></td></tr></table></figure>

<h3 id="索引访问操作符"><a href="#索引访问操作符" class="headerlink" title="索引访问操作符"></a>索引访问操作符</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">  sex: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> age = Props[<span class="string">&quot;age&quot;</span>]; <span class="comment">//包含 name， age， sex</span></span><br></pre></td></tr></table></figure>

<h3 id="别名和接口的区别"><a href="#别名和接口的区别" class="headerlink" title="别名和接口的区别"></a>别名和接口的区别</h3><ul>
<li>type 和 interface 都可以定义 对象 和 函数</li>
<li>type 可以定义其他数据类型，如字符串、数字、元祖、联合类型等，而 interface 不行</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A = <span class="built_in">string</span>; <span class="comment">// 基本类型</span></span><br><span class="line"><span class="keyword">type</span> B = <span class="built_in">string</span> | <span class="built_in">number</span>; <span class="comment">// 联合类型</span></span><br><span class="line"><span class="keyword">type</span> C = [<span class="built_in">number</span>, <span class="built_in">string</span>]; <span class="comment">// 元祖</span></span><br><span class="line"><span class="keyword">const</span> dom = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>); <span class="comment">// dom元素</span></span><br><span class="line"><span class="keyword">type</span> D = <span class="keyword">typeof</span> dom;</span><br></pre></td></tr></table></figure>

<ul>
<li>interface 是通过 extends 来实现</li>
<li>type 是通过 &amp; 来实现</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// interface 扩展 interface</span></span><br><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;</span><br><span class="line">  <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj: B = &#123; <span class="attr">a</span>: <span class="string">`小杜杜`</span>, <span class="attr">b</span>: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// type 扩展 type</span></span><br><span class="line"><span class="keyword">type</span> C = &#123; <span class="attr">a</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> D = C &amp; &#123; <span class="attr">b</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj1: D = &#123; <span class="attr">a</span>: <span class="string">`小杜杜`</span>, <span class="attr">b</span>: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// interface 扩展为 Type</span></span><br><span class="line"><span class="keyword">type</span> E = &#123; <span class="attr">a</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">interface</span> F <span class="keyword">extends</span> E &#123;</span><br><span class="line">  <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2: F = &#123; <span class="attr">a</span>: <span class="string">`小杜杜`</span>, <span class="attr">b</span>: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// type 扩展为 interface</span></span><br><span class="line"><span class="keyword">interface</span> G &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> H = G &amp; &#123; <span class="attr">b</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj3: H = &#123; <span class="attr">a</span>: <span class="string">`小杜杜`</span>, <span class="attr">b</span>: <span class="number">7</span> &#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>interface 可以多次被定义，并且会进行合并，但 type 不行</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj: A = &#123; <span class="attr">a</span>: <span class="string">`小杜杜`</span>, <span class="attr">b</span>: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> B = &#123; <span class="attr">a</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> B = &#123; <span class="attr">b</span>: <span class="built_in">number</span> &#125;; <span class="comment">// error</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Implements<br>类可以以相同的方式实现接口或类型别名，但类不能实现使用类型别名定义的联合类型：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomePoint</span> <span class="title">implements</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  x = <span class="number">1</span>;</span><br><span class="line">  y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point2 = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">  y: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomePoint2</span> <span class="title">implements</span> <span class="title">Point2</span> </span>&#123;</span><br><span class="line">  x = <span class="number">1</span>;</span><br><span class="line">  y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PartialPoint = &#123; <span class="attr">x</span>: <span class="built_in">number</span> &#125; | &#123; <span class="attr">y</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A class can only implement an object type or</span></span><br><span class="line"><span class="comment">// intersection of object types with statically known members.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomePartialPoint</span> <span class="title">implements</span> <span class="title">PartialPoint</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Error</span></span><br><span class="line">  x = <span class="number">1</span>;</span><br><span class="line">  y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="联合类型-Union-Types"><a href="#联合类型-Union-Types" class="headerlink" title="联合类型 Union Types"></a>联合类型 Union Types</h2><p>表示取值可以为多种类型中的一种,未赋值时联合类型上只能访问两个类型共有的属性和方法，如：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> setInfo = <span class="function">(<span class="params">name: <span class="built_in">string</span> | <span class="built_in">number</span></span>) =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="可辨识联合"><a href="#可辨识联合" class="headerlink" title="可辨识联合"></a>可辨识联合</h3><p>定义了 A、B、C 三次接口，但这三个接口都包含 type 属性，那么 type 就是可辨识的属性,而其他属性只跟特性的接口相关。</p>
<p>然后通过可辨识属性 type，才能使用其相关的属性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="number">1</span>;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> B &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="number">2</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> C &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="number">3</span>;</span><br><span class="line">  sex: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const setInfo = (data: A | B | C) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   return data.type // ok 原因是 A 、B、C 都有 type属性</span></span><br><span class="line"><span class="comment">//   return data.age // error，  原因是没有判断具体是哪个类型，不能确定是A，还是B，或者是C</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setInfo1 = <span class="function">(<span class="params">data: A | B | C</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.type === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字是<span class="subst">$&#123;data.name&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的年龄是<span class="subst">$&#123;data.age&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.type === <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的性别是<span class="subst">$&#123;data.sex&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">setInfo1(&#123; <span class="attr">type</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span> &#125;); <span class="comment">// &quot;我的名字是小杜杜&quot;</span></span><br><span class="line">setInfo1(&#123; <span class="attr">type</span>: <span class="number">2</span>, <span class="attr">age</span>: <span class="number">7</span> &#125;); <span class="comment">// &quot;我的年龄是7&quot;</span></span><br><span class="line">setInfo1(&#123; <span class="attr">type</span>: <span class="number">3</span>, <span class="attr">sex</span>: <span class="literal">true</span> &#125;); <span class="comment">// &quot;我的性别是true&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> calcArray = (data: <span class="built_in">any</span>): <span class="built_in">any</span>[] =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> list = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    list.push(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>但我们现在想要的效果是：无论我们传什么类型，都能返回对应的类型，针对这种情况怎么办？所以此时泛型就登场了</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> calcArray = &lt;T&gt;(data: T): T[] =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> list: T[] = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    list.push(data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> list;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res: <span class="built_in">string</span>[] = calcArray&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;d&quot;</span>); <span class="comment">// ok</span></span><br><span class="line"><span class="keyword">const</span> res1: <span class="built_in">number</span>[] = calcArray&lt;<span class="built_in">number</span>&gt;(<span class="number">7</span>); <span class="comment">// ok</span></span><br><span class="line"><span class="keyword">type</span> Props = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> res3: Props[] = calcArray&lt;Props&gt;(&#123; <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>, <span class="attr">age</span>: <span class="number">7</span> &#125;); <span class="comment">//ok</span></span><br></pre></td></tr></table></figure>

<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="多类型传参"><a href="#多类型传参" class="headerlink" title="多类型传参"></a>多类型传参</h3><p>我们有多个未知的类型占位，我们可以定义任何的字母来表示不同的参数类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> calcArray = &lt;T, U&gt;(name: T, age: U): &#123; name: T; age: U &#125; =&gt; &#123;</span><br><span class="line">  const res: &#123; name: T; age: U &#125; = &#123; name, age &#125;;</span><br><span class="line">  return res;</span><br><span class="line">&#125;;</span><br><span class="line">const res = calcArray&lt;string, number&gt;(&quot;小杜杜&quot;, 7);</span><br><span class="line">console.log(res); // &#123;&quot;name&quot;: &quot;小杜杜&quot;, &quot;age&quot;: 7&#125;</span><br></pre></td></tr></table></figure>

<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Info: A&lt;<span class="built_in">string</span>&gt; = &#123; <span class="attr">data</span>: <span class="string">&quot;1&quot;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(Info.data); <span class="comment">// &quot;1&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">clacArray</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> arr: T[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">add</span>(<span class="params">value: T</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.arr.push(value);</span><br><span class="line">  &#125;</span><br><span class="line">  getValue(): T &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="built_in">this</span>.arr[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.arr);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">new</span> clacArray();</span><br><span class="line"></span><br><span class="line">res.add(<span class="number">1</span>);</span><br><span class="line">res.add(<span class="number">2</span>);</span><br><span class="line">res.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">res.getValue(); <span class="comment">//[1, 2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(res.getValue); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="泛型类型别名"><a href="#泛型类型别名" class="headerlink" title="泛型类型别名"></a>泛型类型别名</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Info&lt;T&gt; = &#123;</span><br><span class="line">  name?: T;</span><br><span class="line">  age?: T;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res: Info&lt;<span class="built_in">string</span>&gt; = &#123; <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> res1: Info&lt;<span class="built_in">number</span>&gt; = &#123; <span class="attr">age</span>: <span class="number">7</span> &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="泛型默认参数"><a href="#泛型默认参数" class="headerlink" title="泛型默认参数"></a>泛型默认参数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> calcArray = <span class="xml"><span class="tag">&lt;<span class="name">T</span> = <span class="string">string</span>&gt;</span>(data: T): T[] =&gt; &#123;</span></span><br><span class="line"><span class="xml">  let list: T[] = [];</span></span><br><span class="line"><span class="xml">  for (let i = 0; i &lt; 3; i++) &#123;</span></span><br><span class="line"><span class="xml">    list.push(data);</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">  return list;</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br></pre></td></tr></table></figure>

<h3 id="泛型常用字母"><a href="#泛型常用字母" class="headerlink" title="泛型常用字母"></a>泛型常用字母</h3><p>T：代表 Type，定义泛型时通常用作第一个类型变量名称<br>K：代表 Key，表示对象中的键类型；<br>V：代表 Value，表示对象中的值类型；<br>E：代表 Element，表示的元素类型；</p>
<h3 id="泛型工具类型"><a href="#泛型工具类型" class="headerlink" title="泛型工具类型"></a>泛型工具类型</h3><h4 id="infer"><a href="#infer" class="headerlink" title="infer"></a>infer</h4><p>可以用 infer 声明一个类型变量并且对它进行使用。如</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Info&lt;T&gt; = T <span class="keyword">extends</span> &#123; <span class="attr">a</span>: infer U; b: infer U &#125; ? U : <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Props = Info&lt;&#123; <span class="attr">a</span>: <span class="built_in">string</span>; b: <span class="built_in">number</span> &#125;&gt;; <span class="comment">// Props类： string | number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Props1 = Info&lt;<span class="built_in">number</span>&gt;; <span class="comment">// Props类型： never</span></span><br></pre></td></tr></table></figure>

<h4 id="Partial-Required-Readonly"><a href="#Partial-Required-Readonly" class="headerlink" title="Partial|Required|Readonly"></a>Partial|Required|Readonly</h4><p><code>Partial&lt;T&gt;</code> 作用：将所有属性变为可选的 ?<br><code>Required&lt;T&gt;</code> 作用：将所有属性变为必选的，与 Partial 相反<br><code>Readonly&lt;T&gt;</code> 作用：将所有属性都加上 readonly 修饰符来实现。也就是说无法修改</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info: Props = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">7</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info1: Partial&lt;Props&gt; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> info1: Required&lt;Props&gt; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="Record"><a href="#Record" class="headerlink" title="Record"></a>Record</h4><p><code>Record&lt;K extends keyof any, T&gt;</code>将 K 中所有的属性的值转化为 T 类型。<br><code>K extends keyof any</code>其类型可以是:string、number、symbol</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">interface</span> Props &#123;</span><br><span class="line">     <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">     <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">type</span> InfoProps = <span class="string">&#x27;JS&#x27;</span> | <span class="string">&#x27;TS&#x27;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> Info: Record&lt;InfoProps, Props&gt; = &#123;</span><br><span class="line">     <span class="attr">JS</span>: &#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;小杜杜&#x27;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">7</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">TS</span>: &#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;TypeScript&#x27;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">11</span></span><br><span class="line">     &#125;</span><br><span class="line"><span class="comment">//从上述代码上来看, InfoProps的属性分别包含Props的属性</span></span><br></pre></td></tr></table></figure>

<h4 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h4><p><code>Pick&lt;T, K extends keyof T&gt;</code>将某个类型中的子属性挑出来，变成包含这个类型部分属性的子类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Props &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">  sex: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> nameProps = Pick&lt;Props, <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info: nameProps = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">7</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//从上述代码上来看, Props原本属性包括name、age、sex三个属性，通过 Pick我们吧name和age挑了出来，所以不需要sex属性</span></span><br></pre></td></tr></table></figure>

<h4 id="Exclude-Extra-Omit"><a href="#Exclude-Extra-Omit" class="headerlink" title="Exclude|Extra|Omit"></a>Exclude|Extra|Omit</h4><p><code>Exclude&lt;T, U&gt;</code>将 T 类型中的 U 类型剔除<br><code>Extra&lt;T, U&gt;</code>将 T 可分配给的类型中提取 U。与 Exclude 相反<br><code>Omit&lt;T, U&gt;</code>将已经声明的类型进行属性剔除获得新类型,与 Exclude 的区别：Omit 返回的是新的类型，原理上是在 Exclude 之上进行的，Exclude 是根据自类型返回的</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数字类型</span></span><br><span class="line"><span class="keyword">type</span> numProps = Exclude&lt;<span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span>, <span class="number">1</span> | <span class="number">2</span>&gt;; <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">type</span> numProps1 = Exclude&lt;<span class="number">1</span>, <span class="number">1</span> | <span class="number">2</span>&gt;; <span class="comment">// nerver</span></span><br><span class="line"><span class="keyword">type</span> numProps2 = Exclude&lt;<span class="number">1</span>, <span class="number">1</span>&gt;; <span class="comment">// nerver</span></span><br><span class="line"><span class="keyword">type</span> numProps3 = Exclude&lt;<span class="number">1</span> | <span class="number">2</span>, <span class="number">7</span>&gt;; <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串类型</span></span><br><span class="line"><span class="keyword">type</span> info = <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span> | <span class="string">&quot;sex&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> info1 = <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> infoProps = Exclude&lt;info, info1&gt;; <span class="comment">//  &quot;sex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型</span></span><br><span class="line"><span class="keyword">type</span> typeProps = Exclude&lt;<span class="built_in">string</span> | <span class="built_in">number</span> | (<span class="function">() =&gt;</span> <span class="built_in">void</span>), <span class="built_in">Function</span>&gt;; <span class="comment">// string | number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line"><span class="keyword">type</span> obj = &#123; <span class="attr">name</span>: <span class="number">1</span>; sex: <span class="literal">true</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> obj1 = &#123; <span class="attr">name</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> objProps = Exclude&lt;obj, obj1&gt;; <span class="comment">// nerver</span></span><br><span class="line"><span class="comment">//从上述代码上来看,我们比较了下类型上的，当 T 中有 U 就会剔除对应的属性，如果 U 中又的属性 T 中没有，或 T 和 U 刚好一样的情况都会返回 nerver，且对象永远返回nerver</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> numProps = Extract&lt;<span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span>, <span class="number">1</span> | <span class="number">2</span>&gt;; <span class="comment">// 1 | 2</span></span><br></pre></td></tr></table></figure>

<h4 id="NonNullable"><a href="#NonNullable" class="headerlink" title="NonNullable"></a>NonNullable</h4><p><code>NonNullable&lt;T&gt;</code> 作用：从 T 中排除  null  和  undefined</p>
<h4 id="ReturnType-Parameters"><a href="#ReturnType-Parameters" class="headerlink" title="ReturnType|Parameters"></a>ReturnType|Parameters</h4><p><code>ReturnType&lt;T&gt;</code>用于获取 函数 T 的返回类型。<br><code>Parameters&lt;T&gt;</code> 作用：用于获取 获取函数类型的参数类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Props = ReturnType&lt;<span class="function">() =&gt;</span> <span class="built_in">string</span>&gt;; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> Props1 = ReturnType&lt;&lt;T <span class="keyword">extends</span> U, U <span class="keyword">extends</span> <span class="built_in">number</span>&gt;<span class="function">() =&gt;</span> T&gt;; <span class="comment">// number</span></span><br><span class="line"><span class="keyword">type</span> Props2 = ReturnType&lt;<span class="built_in">any</span>&gt;; <span class="comment">// any</span></span><br><span class="line"><span class="keyword">type</span> Props3 = ReturnType&lt;<span class="built_in">never</span>&gt;; <span class="comment">// any</span></span><br><span class="line"><span class="comment">// 从上述代码上来看， ReturnType可以接受 any 和 never 类型，原因是这两个类型属于顶级类型，包含函数</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Props = Parameters&lt;<span class="function">() =&gt;</span> <span class="built_in">string</span>&gt;; <span class="comment">// []</span></span><br><span class="line"><span class="keyword">type</span> Props1 = Parameters&lt;<span class="function">(<span class="params">data: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;; <span class="comment">// [string]</span></span><br><span class="line"><span class="keyword">type</span> Props2 = Parameters&lt;<span class="built_in">any</span>&gt;; <span class="comment">// unknown[]</span></span><br><span class="line"><span class="keyword">type</span> Props3 = Parameters&lt;<span class="built_in">never</span>&gt;; <span class="comment">// never</span></span><br></pre></td></tr></table></figure>

<h2 id="类型守卫"><a href="#类型守卫" class="headerlink" title="类型守卫"></a>类型守卫</h2><p>是可执行运行时检查的一种表达式，用于确保该类型在一定的范围内</p>
<h3 id="in-关键字"><a href="#in-关键字" class="headerlink" title="in 关键字"></a>in 关键字</h3><p>用于判断这个属性是那个里面的</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Info &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Info1 &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  flage: <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setInfo = <span class="function">(<span class="params">data: Info | Info1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;age&quot;</span> <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字是：<span class="subst">$&#123;data.name&#125;</span>，年龄是：<span class="subst">$&#123;data.age&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;flage&quot;</span> <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字是：<span class="subst">$&#123;data.name&#125;</span>，性别是：<span class="subst">$&#123;data.flage&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">setInfo(&#123; <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>, <span class="attr">age</span>: <span class="number">7</span> &#125;); <span class="comment">// &quot;我的名字是：小杜杜，年龄是：7&quot;</span></span><br><span class="line">setInfo(&#123; <span class="attr">name</span>: <span class="string">&quot;小杜杜&quot;</span>, <span class="attr">flage</span>: <span class="literal">true</span> &#125;); <span class="comment">// &quot;我的名字是：小杜杜，性别是：true&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="类型谓词-is"><a href="#类型谓词-is" class="headerlink" title="类型谓词(is)"></a>类型谓词(is)</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span>(<span class="params">x: <span class="built_in">any</span></span>): <span class="title">x</span> <span class="title">is</span> <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="comment">//默认传入的是number类型</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">&quot;number&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isNumber(<span class="number">7</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isNumber(<span class="string">&quot;7&quot;</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(isNumber(<span class="literal">true</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h3 id="typeof-关键字"><a href="#typeof-关键字" class="headerlink" title="typeof 关键字"></a>typeof 关键字</h3><p>用于判断基本类型</p>
<h3 id="instanceof-关键字"><a href="#instanceof-关键字" class="headerlink" title="instanceof 关键字"></a>instanceof 关键字</h3><p>用于判断一个实例是不是构造函数，或使用类的时候</p>
<h2 id="react-ts"><a href="#react-ts" class="headerlink" title="react+ts"></a>react+ts</h2><p>新建项目使用 typescript<br>如果你是要新建一个使用 typescript 的 react 项目，并且你用脚手架 Create React App 去创建，那没就非常的容易，你只需要在创建的时候将命令改为<br><code>yarn create react-app xxx --template typescript</code></p>
<p>已有 react 项目<br>1、安装 ts<br>npm i typescript -g 全局安装<br>npm i typescript -D 当前项目安装</p>
<p>tsc –init<br>修改 tsconfig 配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>, <span class="comment">/**指定ECMAScript目标版本**/</span></span><br><span class="line">     <span class="string">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span>, <span class="comment">/**指定生成哪个模块系统代码**/</span></span><br><span class="line">     <span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,  <span class="comment">/**允许编译js文件**/</span></span><br><span class="line">     <span class="string">&quot;jsx&quot;</span>: <span class="string">&quot;preserve&quot;</span>,  <span class="comment">/**支持JSX**/</span></span><br><span class="line">     <span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;build&quot;</span>,  <span class="comment">/**编译输出目录**/</span></span><br><span class="line">     <span class="string">&quot;strict&quot;</span>: <span class="literal">true</span>, <span class="comment">/**启用所有严格类型检查选项**/</span></span><br><span class="line">     <span class="string">&quot;noImplicitAny&quot;</span>: <span class="literal">false</span>, <span class="comment">/**在表达式和声明上有隐含的any类型时报错**/</span></span><br><span class="line">     <span class="string">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span>,  <span class="comment">/**忽略所有的声明文件的类型检查**/</span></span><br><span class="line">     <span class="string">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span>   <span class="comment">/**禁止对同一个文件的不一致的引用**/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;include&quot;</span>: [<span class="string">&quot;src&quot;</span>] <span class="comment">/**指定编译目录**/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>安装 react 的声明文件<br><code>npm install --save typescript @types/node @types/react @types/react-dom @types/jest</code></p>
<h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><ul>
<li><p>Cannot use JSX unless the ‘–jsx’ flag is provided 报错或 React‘ refers to a UMD global 或者 Cannot use JSX unless the ‘–jsx‘ flag is provided.<br>在 tsconfig.json 中加入：<br>“jsx”: “react-jsx”,</p>
</li>
<li><p>Cannot find module ‘./index.module.less’ or its corresponding type declarations</p>
</li>
</ul>
<p>给 ts 的 CSS 文件加上类型的声明<br>*.d.ts 文件：ts 专用的类型声明文件，只包含类型的声明，不包含逻辑，不会被编译，也不会被 webpack 打包</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;*.css&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> css: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> css;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;*.scss&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> content: &#123; [className: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line">  <span class="keyword">export</span> = content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>“AsyncThunkAction&lt;any，void，&#123;&#125;&gt;”</code>类型的参数不能分配给“AnyAction”类型的参数</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/store.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = configureStore(&#123;</span><br><span class="line">  <span class="attr">reducer</span>: &#123;</span><br><span class="line">    <span class="attr">posts</span>: postsReducer,</span><br><span class="line">    <span class="attr">comments</span>: commentsReducer,</span><br><span class="line">    <span class="attr">users</span>: usersReducer,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Infer the `RootState` and `AppDispatch` types from the store itself</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> RootState = ReturnType&lt;<span class="keyword">typeof</span> store.getState&gt;;</span><br><span class="line"><span class="comment">// Inferred type: &#123;posts: PostsState, comments: CommentsState, users: UsersState&#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> AppDispatch = <span class="keyword">typeof</span> store.dispatch;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app/hooks.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; TypedUseSelectorHook, useDispatch, useSelector &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; RootState, AppDispatch &#125; <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use throughout your app instead of plain `useDispatch` and `useSelector`</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useAppDispatch = <span class="function">() =&gt;</span> useDispatch&lt;AppDispatch&gt;();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useAppSelector: TypedUseSelectorHook&lt;RootState&gt; = useSelector;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2022/01/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/12/20-11-33/" class="post-title-link" itemprop="url">全栈项目</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-12 20:11:33" itemprop="dateCreated datePublished" datetime="2022-01-12T20:11:33+08:00">2022-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="全栈"><a href="#全栈" class="headerlink" title="全栈"></a>全栈</h1><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><h3 id="创建前端项目"><a href="#创建前端项目" class="headerlink" title="创建前端项目"></a>创建前端项目</h3><h4 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h4><h5 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h5><p><code>vue create 项目名称</code></p>
<h5 id="使用-Vue-Styleguidist-编写组件文档"><a href="#使用-Vue-Styleguidist-编写组件文档" class="headerlink" title="使用 Vue Styleguidist 编写组件文档"></a>使用 Vue Styleguidist 编写组件文档</h5><p><a target="_blank" rel="noopener" href="https://vue-styleguidist.github.io/">Vue Styleguidist 官网</a></p>
<p>首先，Vue Styleguidist 只能适用于 Webpack 打包的项目，在此基础上，我们需要安装 vue-styleguidist 这个包</p>
<p><code>npm install vue-styleguidist --save-dev</code><br>然后在 package.json 配置下面两行命令，分别用于开发预览和部署打包</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;styleguide&quot;</span>: <span class="string">&quot;vue-styleguidist server&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;styleguide:build&quot;</span>: <span class="string">&quot;vue-styleguidist build&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是使用 @vue/cli 3 生成的项目，可以直接使用 <code>vue-cli-plugin-styleguidist</code> 这个插件进行更快捷的安装和配置</p>
<ul>
<li><p>Props<br>Props 是组件最基本的 API，用于为组件传递数据,实际上，在配置好 Vue Styleguidist 之后，如果有写 prop，就已经能生成一个这样的文档</p>
</li>
<li><p>Events<br>除了 Props，Event 事件也是 Vue 的一个重要的 API 之一，可以通过 v-on 为组件绑定事件。Vue 的事件使用 vm.$(‘event’, …params) 的方法进行定义，我们只需要在这个方法之前，加上必要的注释就可以了。如果事件名不是字符串，可以使用 @event 进行标注，事件的参数使用 @type 进行标注</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">handleClick</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 单击事件</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@type <span class="type">&#123;Event&#125;</span></span></span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">&quot;click&quot;</span>, e);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>Slots<br>Slot 插槽是 Vue 的自定义元素之一，Slot 向一个组件传递内容，也是封装公共组件常见的 API 之一,与 Props 和 Events 不同的是，Slots 通常是定义在<code>&lt;template&gt;</code>部分，不能使用 JS 注释进行标注，需要使用 HTML 注释，并且在注释里使用 @slot 进行标注</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:type</span>=<span class="string">&quot;htmlType&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:class</span>=<span class="string">&quot;btnClass&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:disabled</span>=<span class="string">&quot;disabled&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- @slot 按钮的内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Methods<br>看到这里可能各位会有个疑问，Methods 和 Events 有什么区别？区别主要有以下两个：定义方式不同：Methods 只要在 methods 里定义函数即可，Events 则需要使用 <code>vm.$(&#39;event&#39;, ...params)</code> 进行定义,调用方式不同：Methods 使用<code>vm.$refs.ref.method()</code>这样的方式进行调用，Events 使用 v-on 指令或者 <code>vm.$on(&#39;event&#39;)</code> 进行监听。实际上，使用 Methods 方法封装组件 API 的情况是比较少的，但是依然不能排除这种情况。对于 Methods 方法，我们只需要像使用 JSDoc 一样为函数进行注释就可以了，最后再附上 @public 进行标识</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单击事件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;Event&#125;</span> <span class="variable">e</span></span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@public</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">click</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// some code</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>组件样例<br>README 方式,在组件的同个目录下，新建一个文件 <code>README.md</code>，比如 <code>src/components/AppButton/README.md</code>然后直接调用组件代码<br>可以直接在组件下方增加一个组件 <code>&lt;docs&gt;&lt;/docs&gt;</code>，并在里面直接使用 Markdown 编写样例，这种方式适用于项目结构比较简单的项目，但是我认为会使组件的代码变得很冗长，在此不再赘述</p>
</li>
<li><p>配置<br>Vue Styleguidist 支持自定义配置，只需要在项目根目录下，创建 styleguide.config.js，就可以参照官方文档进行配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// styleguide.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&quot;Default Style Guide&quot;</span>, <span class="comment">// 文档的标题</span></span><br><span class="line">  <span class="attr">components</span>: <span class="string">&quot;src/components/**/*.vue&quot;</span>, <span class="comment">// 组件的目录</span></span><br><span class="line">  <span class="attr">defaultExample</span>: <span class="literal">false</span>, <span class="comment">// 是否使用默认样例</span></span><br><span class="line">  <span class="attr">usageMode</span>: <span class="string">&quot;expand&quot;</span>, <span class="comment">// 是否展开用法</span></span><br><span class="line">  <span class="attr">exampleMode</span>: <span class="string">&quot;expand&quot;</span>, <span class="comment">// 是否展开示例代码</span></span><br><span class="line">  <span class="attr">styleguideDir</span>: <span class="string">&quot;styleguide&quot;</span>, <span class="comment">// 打包的目录</span></span><br><span class="line">  <span class="attr">codeSplit</span>: <span class="literal">true</span>, <span class="comment">// 打包时是否进行分片</span></span><br><span class="line">  <span class="attr">skipComponentsWithoutExample</span>: <span class="literal">true</span>, <span class="comment">// 是否跳过没有样例的组件</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>注意<br>JSDoc 的标签仍然有效。TypeScript、Flow 和 Class 组件同样可以使用，只是使用方法稍有不同。JSX 也可以使用。实际上 Vue Styleguidist 来源于 React Styleguidist（也依赖于这个项目），使用方法大同小异，不同于 Vue 组件的是，React 组件的 API 只有 Props 一项</p>
</li>
</ul>
<h4 id="react"><a href="#react" class="headerlink" title="react"></a>react</h4><h5 id="安装脚手架"><a href="#安装脚手架" class="headerlink" title="安装脚手架"></a>安装脚手架</h5><p><code>npm i create-react-app -g</code></p>
<h5 id="创建文件夹并初始化"><a href="#创建文件夹并初始化" class="headerlink" title="创建文件夹并初始化"></a>创建文件夹并初始化</h5><p><code>create-react-app test_project</code><br><code>cd test_project</code><br><code>npm run start</code></p>
<p>使用 ts</p>
<p><code>create-react-app demo --template typescript</code><br><code>cd test_project</code><br><code>npm run start</code></p>
<h5 id="安装路由"><a href="#安装路由" class="headerlink" title="安装路由"></a>安装路由</h5><p><code>npm i react-router-dom</code><br>创建 routes/index.js 文件,写入路由表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy, Suspense &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Navigate &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> LoadingPage <span class="keyword">from</span> <span class="string">&quot;../pages/LoadingPage&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> Home = lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/Home&quot;</span>));</span><br><span class="line"><span class="keyword">const</span> ErrorBlock = lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/ErrorBlock&quot;</span>));</span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/Home&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">LoadingPage</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/ErrorBlock&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">LoadingPage</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ErrorBlock</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line">    ),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/Home&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Navigate</span>&gt;</span></span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> routes;</span><br></pre></td></tr></table></figure>

<p>入口文件 index.js 中加入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<pre><code>App.js 中引入路由表
</code></pre>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&quot;./routes/&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRoutes &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> element = useRoutes(routes);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span>&#123;element&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>

<h5 id="安装-redux"><a href="#安装-redux" class="headerlink" title="安装 redux"></a>安装 redux</h5><p><code>npm i redux react-redux</code><br>新建 store/index.js、store/actions/test/index.js、store/reducers/test/index.js,<br>在 store/index.js 中写入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">&quot;./reducers/test/index.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(test);</span><br></pre></td></tr></table></figure>

<p>在 store/actions/test/index.js 中写入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;../../index.js&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> test1 = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;test1&quot;</span>, data &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在 store/reducers/test/index.js 中写入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initState = &#123;&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">userInfo</span>(<span class="params">preState = initState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;xxxinfo&quot;</span>, preState, action);</span><br><span class="line">  <span class="keyword">return</span> preState;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 入口文件 src/index.js 中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> root = ReactDOM.createRoot(<span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br><span class="line">root.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h5><p>在 src 中创建 setupProxy.js,在 react18 中使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&quot;http-proxy-middleware&quot;</span>).createProxyMiddleware;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    proxy(<span class="string">&quot;/apis&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&quot;http://xxx:xxx&quot;</span>,</span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">//控制服务器收到的响应头中的 Host 字段值</span></span><br><span class="line">      <span class="comment">//apis 前缀置空</span></span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123; <span class="string">&quot;^/apis&quot;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    proxy(<span class="string">&quot;/api2&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&quot;http://xxx:xxx&quot;</span>,</span><br><span class="line">      <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">//控制服务器收到的响应头中的 Host 字段值,true 时为代理服务 ip,false 为当前 ip，默认为 false</span></span><br><span class="line">      <span class="attr">pathRewrite</span>: &#123; <span class="string">&quot;^/api2&quot;</span>: <span class="string">&quot;&quot;</span> &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="使用-sass"><a href="#使用-sass" class="headerlink" title="使用 sass"></a>使用 sass</h5><p>安装：<code>npm install node-sass --save-dev</code></p>
<h5 id="使用-less"><a href="#使用-less" class="headerlink" title="使用 less"></a>使用 less</h5><p>安装：<code>npm install less less-loader -D</code><br>提交代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -am <span class="string">&#x27;xxxx&#x27;</span></span><br></pre></td></tr></table></figure>

<p>暴露 webpack 配置文件<code>npm run  eject</code></p>
<p>修改 webpack.config.js，拷贝 sass 的配置改写为 less</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//....</span></span><br><span class="line"><span class="keyword">const</span> lessRegex = <span class="regexp">/\.(less)$/</span>;</span><br><span class="line"><span class="keyword">const</span> lessModuleRegex = <span class="regexp">/\.module\.(less)$/</span>;</span><br><span class="line"><span class="comment">//....</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">        &#123;</span><br><span class="line">              <span class="attr">test</span>: lessRegex,</span><br><span class="line">              <span class="attr">exclude</span>: lessModuleRegex,</span><br><span class="line">              <span class="attr">use</span>: getStyleLoaders(</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">                  <span class="attr">sourceMap</span>: isEnvProduction</span><br><span class="line">                    ? shouldUseSourceMap</span><br><span class="line">                    : isEnvDevelopment,</span><br><span class="line">                  <span class="attr">modules</span>: &#123;</span><br><span class="line">                    <span class="attr">mode</span>: <span class="string">&quot;icss&quot;</span>,</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">              ),</span><br><span class="line">              <span class="comment">// Don&#x27;t consider CSS imports dead code even if the</span></span><br><span class="line">              <span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line">              <span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line">              <span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">              <span class="attr">sideEffects</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// Adds support for CSS Modules, but using SASS</span></span><br><span class="line">            <span class="comment">// using the extension .module.less</span></span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">test</span>: lessModuleRegex,</span><br><span class="line">              <span class="attr">use</span>: getStyleLoaders(</span><br><span class="line">                &#123;</span><br><span class="line">                  <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">                  <span class="attr">sourceMap</span>: isEnvProduction</span><br><span class="line">                    ? shouldUseSourceMap</span><br><span class="line">                    : isEnvDevelopment,</span><br><span class="line">                  <span class="attr">modules</span>: &#123;</span><br><span class="line">                    <span class="attr">mode</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">                    <span class="attr">getLocalIdent</span>: getCSSModuleLocalIdent,</span><br><span class="line">                  &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;less-loader&quot;</span></span><br><span class="line">              ),</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>修改 react-app-env-d.ts 文件，加入</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;*.module.less&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> classes: &#123; <span class="keyword">readonly</span> [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改本地调试启动端口"><a href="#修改本地调试启动端口" class="headerlink" title="修改本地调试启动端口"></a>修改本地调试启动端口</h5><ol>
<li>依次打开“node_modules”- “react-scripts”-“scripts”文件夹，找到并打开 start.js 文件；在 start.js 文件中查找并修改“DEFAULT_PORT”项的值即可</li>
<li>修改 package.json 文件中</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;start&quot;</span>: <span class="string">&quot;set PORT=9000 &amp;&amp; react-scripts start&quot;</span>,</span><br><span class="line"><span class="attr">&quot;build&quot;</span>: <span class="string">&quot;react-scripts build&quot;</span>,</span><br><span class="line"><span class="attr">&quot;test&quot;</span>: <span class="string">&quot;react-scripts test --env=jsdom&quot;</span>,</span><br><span class="line"><span class="attr">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改-elint-语法检测"><a href="#修改-elint-语法检测" class="headerlink" title="修改 elint 语法检测"></a>修改 elint 语法检测</h5><p>修改 package.json 文件中</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line"><span class="string">&quot;react-app&quot;</span>,</span><br><span class="line"><span class="string">&quot;react-app/jest&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line"><span class="attr">&quot;no-undef&quot;</span>: <span class="string">&quot;off&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="安装-antd"><a href="#安装-antd" class="headerlink" title="安装 antd"></a>安装 antd</h5><p><code>npm i antd --save</code><br>/src/index.js 入口文件中引入样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;antd/dist/antd.min.css&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h5><p>安装执行<code>yarn add -D eslint</code></p>
<p>项目目录添加.eslintignore，忽略一些不需要 eslint 检测的目录和文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.eslintrc.js</span><br><span class="line">node_modules</span><br><span class="line">dist</span><br><span class="line">.DS_Store</span><br><span class="line">*.local</span><br></pre></td></tr></table></figure>

<p>至此，我们可以在 package.json 添加命令</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;script&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;lint:js&quot;</span>: <span class="string">&quot;eslint --ext .js,.jsx,.ts,.tsx ./src&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="安装-prettier"><a href="#安装-prettier" class="headerlink" title="安装 prettier"></a>安装 prettier</h4><p><code>yarn add -D prettier</code></p>
<p>项目目录添加.prettierrc.js 文件，我们添加常用的格式风格</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">80</span>, <span class="comment">//一行的字符数，如果超过会进行换行，默认为80</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">//一个tab代表几个空格数，默认为80</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">//是否使用tab进行缩进，默认为false，表示用空格进行缩减</span></span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">false</span>, <span class="comment">//字符串是否使用单引号，默认为false，使用双引号</span></span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">true</span>, <span class="comment">//行位是否使用分号，默认为true</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&quot;none&quot;</span>, <span class="comment">//是否使用尾逗号，有三个可选值&quot;&lt;none|es5|all&gt;&quot;</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>, <span class="comment">//对象大括号直接是否有空格，默认为true，效果：&#123; foo: bar &#125;</span></span><br><span class="line">  <span class="comment">//&quot;parser&quot;: &quot;babylon&quot; //代码的解析引擎，默认为babylon，与babel相同。</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>项目目录添加.prettierignore，忽略一些不需要 prettierg 格式化的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">**/*.png</span><br><span class="line">**/*.svg</span><br><span class="line">package.json</span><br><span class="line">dist</span><br><span class="line">.DS_Store</span><br><span class="line">node_modules</span><br></pre></td></tr></table></figure>

<p>至此，我们可以在 package.json 添加命令</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;script&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;lint:prettier&quot;</span>: <span class="string">&quot;prettier -c --write \&quot;src/**/*\&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>避免 eslint 和 prettier 冲突，我们需要再安装两个包<br><code>yarn add -D eslint-config-prettier eslint-plugin-prettier</code><br>安装后我们只需要在.eslintrc.js 文件添加一行即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改规则,修改 .eslintrc.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rules: &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="string">&#x27;prettier/prettier&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">singleAttributePerLine</span>: <span class="literal">false</span>, <span class="comment">// 不强制要求一个属性占一行</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">  <span class="comment">//....</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>eslint-config-prettier</code>的作用是关闭 eslint 中所有不必要的或可能与 prettier 冲突的规则，让 eslint 检测代码时不会对这些规则报错或告警。<br><code>eslint-plugin-prettier</code>的作用是将 prettier 作为 ESLint 的规则来使用，相当于代码不符合 Prettier 的标准时，会报一个 ESLint 错误，同时也可以通过 eslint –fix 来进行格式化。</p>
<h4 id="安装-stylelint"><a href="#安装-stylelint" class="headerlink" title="安装 stylelint"></a>安装 stylelint</h4><p>检测 css 样式代码质量，其实很多项目都是不检测的，如果不做这步可以忽略。<br><code>yarn add -D stylelint stylelint-config-standard</code><br>项目目录中添加.stylelintrc.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;stylelint-config-standard&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们使用了官方推荐的 stylelint-config-standard 配置就好</p>
<p>至此，我们可以在 package.json 添加命令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;script&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;lint:style&quot;</span>: <span class="string">&quot;stylelint \&quot;**/*.css\&quot;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样的，我们统一用 prettier 来格式化 css 代码。 需要安装 stylelint 插件来避免与 prettier 冲突。<br><code>stylelint-config-prettier</code>，作用是关闭 stylelint 所有不必要的或可能与 prettier 冲突的规则。但是在 Stylelint v15 版本之后，Stylelint 默认关闭了所有与 prettier 相冲突的风格规则，所以不需要安装<code>stylelint-config-prettier</code>了。<br><code>stylelint-prettier</code>，开启了以 prettier 为准的规则，并将报告错误给 stylelint<br>修改.stylelintrc.js 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;stylelint-config-standard&quot;</span>, <span class="string">&quot;stylelint-prettier/recommended&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们如果使用 vscode 开发，一定要安装 ESlint、Stylelint、Prettier 这三个插件，只要项目安装了 ESlint 和 Stylelint 包，那么 Vscode 可以实时把代码质量问题报红提示，对于强迫症的人，肯定想及时把报红消灭</p>
<h3 id="创建后端项目"><a href="#创建后端项目" class="headerlink" title="创建后端项目"></a>创建后端项目</h3><p><code>npm install express-generator -g</code><br><code>express --view=ejs 项目名称</code></p>
<ul>
<li>启动项目</li>
</ul>
<p>`<a target="_blank" rel="noopener" href="http://dd/">http://dd</a></p>
<h4 id="node-实例"><a href="#node-实例" class="headerlink" title="node 实例"></a>node 实例</h4><p><strong>使用 nodejs 将 base64 文件转成图片和将图片转成 base64</strong></p>
<ul>
<li>将 base64 转成 png 图片格式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line">const path = &#x27;你想要填写的路径/&#x27;+ Date.now() +&#x27;.png&#x27;;</span><br><span class="line">const base64 = data.replace(/^data:image\/\w+;base64,/, &quot;&quot;);//去掉图片base64码前面部分data:image/png;base64</span><br><span class="line">const dataBuffer = new Buffer(base64, &#x27;base64&#x27;); //把base64码转成buffer对象，</span><br><span class="line">fs.writeFile(path, dataBuffer, function(err)&#123;//用fs写入文件</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(&#x27;写入成功！&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>将图片转成 base64</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">const util = require(&quot;util&quot;);</span><br><span class="line">const imageData = await util.promisify(fs.readFileSync(fileUrl)); // 例：xxx/xx/xx.png</span><br><span class="line">const imageBase64 = imageData.toString(&quot;base64&quot;);</span><br><span class="line">const imagePrefix = &quot;data:image/png;base64,&quot;;</span><br><span class="line">console.log(imagePrefix + imageBase64);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h3><ul>
<li>引入 antd 样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Failed to parse source map: &#x27;webpack://antd/./components/icon/style/index.less&#x27; URL is not supported</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解决方法: antd-mobile 导入组件样式时加这个 min<br><code>import &#39;antd/dist/antd.min.css&#39;;</code></p>
<ul>
<li>用 create-react-app 安装了 react 18 版本，加载官网示例的时候报错，不再支持 render 绑定根元素节点，否则降版本到 react 17<br>之前版本</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./index.css&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hellow<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Test</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>react 18（改动的地方有两处，一个是 createRoot，另一个是 ReactDOM 的引入路径）</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./index.css&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hellow<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.createRoot(<span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)).render(<span class="xml"><span class="tag">&lt;<span class="name">Test</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2022/01/10/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/10/20-22-22/" class="post-title-link" itemprop="url">Centos7安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-10 20:22:22" itemprop="dateCreated datePublished" datetime="2022-01-10T20:22:22+08:00">2022-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="could-not-retrieve-mirrorlist-解决"><a href="#could-not-retrieve-mirrorlist-解决" class="headerlink" title="could not retrieve mirrorlist 解决"></a>could not retrieve mirrorlist 解决</h3><p>在执行 yum 指令的时候出现这个问题,先尝试一下 ping 指令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping 127.0.0.1</span><br><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure>

<p>如果第一个正常,第二个错误,那就可能是你没有 IP 或者你没有启用联网功能;<br>没有 IP 就查查怎么配静态或者动态 IP;<br><code>sudo vi /etc/sysconfig/network-scripts/ifcfg-ens33</code><br>修改配置<code>ONBOOT=no</code>—–&gt;<code>ONBOOT=yes</code><br>wq 保存退出<br><code>service network restart</code>重启网络服务</p>
<p>如果你能 ping 通百度,还是报这个问题,这个就可能是你的 DNS 解析不了你的请求,修改 DNS 啊</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/resolv.conf</span><br><span class="line">nameserver 改成 8.8.8.8</span><br></pre></td></tr></table></figure>

<h3 id="启用-ifconfig-命令"><a href="#启用-ifconfig-命令" class="headerlink" title="启用 ifconfig 命令"></a>启用 ifconfig 命令</h3><p>依赖于 net-tools 软件</p>
<p><code> yum install -y net-tools</code></p>
<p>CentOS7 最小化安装后没有 wget 软件，但是以后我们会经常用到这个组件，所以我们安装一下</p>
<p><code>yum install -y wget</code></p>
<h3 id="CentOS-自带的国外源有时候会很慢，替换成国内的阿里源"><a href="#CentOS-自带的国外源有时候会很慢，替换成国内的阿里源" class="headerlink" title="CentOS 自带的国外源有时候会很慢，替换成国内的阿里源"></a>CentOS 自带的国外源有时候会很慢，替换成国内的阿里源</h3><p>先进入源的目录<br><code>cd /etc/yum.repos.d </code><br>备份一下官方源<br><code>mv CentOS-Base.repo CentOS-Base.repo.bak </code><br>将阿里源文件下载下来<br><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo </code><br>重建源数据缓存<br><code>yum clean all</code> # 清除系统所有的 yum 缓存<br><code>yum makecache </code># 生成 yum 缓存<br>ok,换源完成</p>
<h3 id="在某些特定的情况下，执行-configure-的时候会报错："><a href="#在某些特定的情况下，执行-configure-的时候会报错：" class="headerlink" title="在某些特定的情况下，执行./configure 的时候会报错："></a>在某些特定的情况下，执行./configure 的时候会报错：</h3><p>error:newly created file is older than distributed files!<br>这是由于 configure 文件时间大于当前系统时间。</p>
<p>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法一：</span></span><br><span class="line">cp configure configure_bak</span><br><span class="line">rm -f configure</span><br><span class="line">cp configure_bak configure</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二：修改当前系统时间</span></span><br><span class="line">hwclock --<span class="built_in">set</span> --date=<span class="string">&quot;月/日/年 小时：分钟：秒钟&quot;</span></span><br><span class="line">hwclock --hctosys</span><br></pre></td></tr></table></figure>

<h3 id="一、正常的编译安装-卸载"><a href="#一、正常的编译安装-卸载" class="headerlink" title="一、正常的编译安装/卸载"></a>一、正常的编译安装/卸载</h3><p>源码的安装一般由 3 个步骤组成：配置(configure)、编译(make)、安装(make install)。<br>configure 文件是一个可执行的脚本文件，它有很多选项，在待安装的源码目录下使用命令<code>./configure –help</code>可以输出详细的选项列表。</p>
<p>其中<code>--prefix</code>选项是配置安装目录，如果不配置该选项，安装后可执行文件默认放在<code>/usr/local/bin</code>，库文件默认放在<code>/usr/local/lib</code>，</p>
<p>配置文件默认放在<code>/usr/local/etc</code>，其它的资源文件放在<code>/usr/local/share</code>，比较凌乱。</p>
<p>如果配置了<code>--prefix</code>，如：</p>
<p><code>./configure --prefix=/usr/local/test</code><br>安装后的所有资源文件都会被放在<code>/usr/local/test</code>目录中，不会分散到其他目录。</p>
<p>使用<code>--prefix</code>选项的另一个好处是方便卸载软件或移植软件</p>
<p>当某个安装的软件不再需要时，只须简单的删除该安装目录，就可以把软件卸载干净；<br>移植软件只需拷贝整个目录到另外一个机器即可（相同的操作系统下）<br>当然要卸载程序，也可以在原来的<code>make</code>目录下用一次<code>make uninstall</code>，但前提是<code>Makefile</code>文件有<code>uninstall</code>命令。</p>
<h3 id="二、关于卸载"><a href="#二、关于卸载" class="headerlink" title="二、关于卸载"></a>二、关于卸载</h3><p>如果没有配置<code>--prefix</code>选项，源码包也没有提供<code>make uninstall</code>，则可以通过以下方式可以完整卸载：</p>
<p>一个临时目录重新安装一遍，如：</p>
<p><code>./configure --prefix=/tmp/to_remove &amp;&amp; make install</code><br>然后遍历<code>/tmp/to_remove</code>的文件，如 vim 的<code>/bin/vimdiff =&gt;find /usr/ -name vimdiff</code></p>
<p>删除对应安装位置的文件即可（因为<code>/tmp/to_remove</code>里的目录结构就是没有配置<code>--prefix</code>选项时的目录结构）。</p>
<h3 id="安装桌面"><a href="#安装桌面" class="headerlink" title="安装桌面"></a>安装桌面</h3><ol>
<li>yum 的 group 指令</li>
</ol>
<p>yum 可以以程序组的模式来安装成套的软件包。支持的软件包可以通过，对于 CentOS 6，Desktop、Desktop Platform、KDE Desktop、X Window System 是主要的桌面环境。对于 CentOS 7，有 KDE Plasma Workspaces 和 Gnome Desktop 两大桌面环境。</p>
<ol start="2">
<li>安装图形桌面环境</li>
</ol>
<p>CENTOS 7<br>CentOS 7 上的桌面环境安装包组合进行了调整，比以前要简单了。主要有两大阵营，KDE 和 GNOME。</p>
<p>因为没时间测试，只是预估着下面的指令应该能完成任务，请注意！</p>
<p>要安装 KDE 桌面环境（使用的是 Plasma 作为默认的桌面管理器了，很漂亮，看这里），</p>
<p>复制代码代码如下:<br><code>yum groupinstall &quot;KDE Plasma Workspaces&quot;</code></p>
<p>要安装 GNOME 环境，</p>
<p>复制代码代码如下:<br><code>yum groupinstall &quot;GNOME Desktop&quot;</code></p>
<p>安装程序会自动解决安装包和组件的依赖关系。</p>
<p>CENTOS 6<br>要安装 KDE 桌面环境，执行指令，</p>
<p>复制代码代码如下:<br><code>yum groupinstall &quot;X Window System&quot; &quot;KDE Desktop&quot; Desktop</code></p>
<p>即可，同时安装了 3 个软件包。注意，因为 KDE Desktop 和 X Window System 两个软件包名称中间都包含空格，需要用引号引起来才行。</p>
<p>要安装 Gnome 桌面环境，执行指令，</p>
<p>复制代码代码如下:<br><code> yum groupinstall &quot;X Window System&quot; &quot;Desktop Platform&quot; Desktop</code></p>
<p>即可，也是同时安装了 3 个软件包，其中 X Window System 是必须的，不管是 Gnome 还是 KDE。</p>
<p>既然是桌面环境，可能还需要诸如字体、管理工具之类的，如，</p>
<p>复制代码代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum -y groupinstall &quot;Graphical Administration Tools&quot;</span><br><span class="line">yum -y groupinstall &quot;Internet Browser&quot;</span><br><span class="line">yum -y groupinstall &quot;General Purpose Desktop&quot;</span><br><span class="line">yum -y groupinstall &quot;Office Suite and Productivity&quot;</span><br><span class="line">yum -y groupinstall &quot;Graphics Creation Tools&quot;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>启用</li>
</ol>
<p>从命令行直接启动图形桌面环境，</p>
<p><code>startx</code><br>这样就会启动默认的 Gnome 或者 KDE 桌面环境。如果有人喜欢同时安装 GNOME 和 KDE，切换方法可以参考 CentOS 文档。</p>
<p>如果希望启动时自动启动到图形桌面，需要修改启动配置。因为 CentOS 7 开始使用 systemd 管理器，其操作方式与之前版本有所不同。</p>
<p>CENTOS 7：<br>CentOS 7 中直接使用 systemd 指令修改启动目的状态即可。</p>
<p>使用，</p>
<p>复制代码代码如下:<br><code>systemctl get-default</code></p>
<p>可以查询到当前所设定的状态。multi-user.target 相当于以前的 level 3，也就是命令行终端；而 graphical.target 相当于以前的 level 5，也就是图形界面。</p>
<p>所以如果要设置默认启动到图形界面，则执行，</p>
<p>复制代码代码如下:<br><code>systemctl set-default graphical.target </code></p>
<p>CENTOS 6 等：<br>编辑 /etc/inittab，将 id:3:initdefault: 改为 id:5:initdefault:。（请注意这里的英文半角冒号。）参考这里。</p>
<p>直接用 sed 会很方便，</p>
<p>复制代码代码如下:<br><code>sed -i &#39;s/id:3:initdefault:/id:5:initdefault:/&#39; /etc/inittab</code></p>
<p>启动图形界面后，如果希望从图形界面切换到命令行界面，可以用 Ctrl + Alt + F6（实际上 F1 到 F6 都行，不过它们代表 Linux 中不同的控制台），或者反过来 Ctrl + Alt + F7 回到刚才的图形界面。</p>
<p>4.开机跳过图形化界面</p>
<p>复制代码代码如下:<br><code>vi /etc/inittab--编辑/etc/inittab文件</code></p>
<p>找到下面语句：</p>
<p>复制代码代码如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Default runlevel. The runlevels used by RHS are:</span><br><span class="line"># 0 - halt (Do NOT set initdefault to this)--停机</span><br><span class="line"># 1 - Single user mode --单用户模式</span><br><span class="line"># 2 - Multiuser, without NFS (The same as 3, if you do not havenetworking) --多用户模式，不支持NFS</span><br><span class="line"># 3 - Full multiuser mode--多用户模式</span><br><span class="line"># 4 - unused--没有使用</span><br><span class="line"># 5 - X11--图形界面方式</span><br><span class="line"># 6 - reboot (Do NOT set initdefault to this)--重新启动</span><br><span class="line">#</span><br><span class="line">id:5:initdefault:--默认运行等级是5，只要将此处改成 id:3:initdefault:即可</span><br></pre></td></tr></table></figure>

<p>在文本模式想启动图形界面，可以打如下命令：</p>
<p>复制代码代码如下:<br><code>#startx</code></p>
<h2 id="CentOS-离线状态下安装-Python3-7-0"><a href="#CentOS-离线状态下安装-Python3-7-0" class="headerlink" title="CentOS 离线状态下安装 Python3.7.0"></a>CentOS 离线状态下安装 Python3.7.0</h2><ul>
<li><p>python 安装包：Python-3.7.0</p>
</li>
<li><p>依赖安装包<br>zlib-devel 　　　　　 krb5-devel 　　　　 ibselinux-devel<br>bzip2-devel 　　　　 openssl-devel 　　　　 ncurses-devel 　　　<br>sqlite-devel 　　　 readline-devel 　　　 tk-devel<br>gdbm-devel 　　 db4-devel 　　　　　 libpcap-devel 　　　　 xz-devel</p>
</li>
<li><p>解压 python 安装包: tar -xvJf Python-3.7.0.tar.xz</p>
</li>
<li><p>编译安装</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/<span class="built_in">local</span>/python3 <span class="comment"># 创建编译安装目录</span></span><br><span class="line"><span class="built_in">cd</span> Python-3.7.0　　　　　　<span class="comment"># 进入python的解压目录</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/python3</span><br><span class="line">make &amp;&amp; make install　　　<span class="comment"># 编译$安装</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建软连接</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/python3/bin/python3 /usr/<span class="built_in">local</span>/bin/python3</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/python3/bin/pip3 /usr/<span class="built_in">local</span>/bin/pip3</span><br></pre></td></tr></table></figure>

<ul>
<li>验证是否安装成功<br>python3 -V<br>pip3 -V</li>
</ul>
<h2 id="CentOS7-离线安装-Nginx"><a href="#CentOS7-离线安装-Nginx" class="headerlink" title="CentOS7 离线安装 Nginx"></a>CentOS7 离线安装 Nginx</h2><ul>
<li>准备准备离线安装包</li>
</ul>
<p><code>openssl</code></p>
<p><code>zlib</code></p>
<p><code>pcre</code></p>
<p><code>nginx</code></p>
<ul>
<li><p>rpm -ivh *.rpm –nodeps –force</p>
</li>
<li><p>安装 nginx</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载解压</span></span><br><span class="line"></span><br><span class="line">tar -xzvf  nginx-1.8.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span>  nginx-1.8.1</span><br><span class="line"></span><br><span class="line">./configure --prefix=/home/work/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#编译并安装</span></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行nginx</span></span><br><span class="line"><span class="built_in">cd</span> //home/work/nginx/sbin</span><br><span class="line">./nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>防火墙</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Nginx 相关命令</p>
<p>4.1 版本查看</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx  -v</span><br><span class="line"><span class="comment">#nginx version: nginx/1.12.2</span></span><br></pre></td></tr></table></figure>

<p>4.2 查看加载的模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> nginx -V</span><br><span class="line"><span class="comment">#nginx version: nginx/1.12.2</span></span><br><span class="line"><span class="comment"># built by gcc 4.8.5 20150623 (Red Hat 4.8.5-28) (GCC)</span></span><br><span class="line"><span class="comment"># configure arguments: --add-module=/root/nginx-sticky-1.2.5/</span></span><br></pre></td></tr></table></figure>

<p>4.3 启停命令</p>
<p>4.3.1 启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure>

<p>4.3.2 停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop</span><br><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure>

<p>4.3.3 动态加载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p>4.3.4 测试配置文件 nginx.conf 正确性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx  -t</span><br><span class="line"><span class="comment"># nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok</span></span><br><span class="line"><span class="comment"># nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful</span></span><br></pre></td></tr></table></figure>

<p><code>nginx -s stop</code>:此方式相当于先查出 nginx 进程 id 再使用 kill 命令强制杀掉进程。</p>
<p><code>nginx -s reload</code>:动态加载，当配置文件 nginx.conf 有变化时执行该命令动态加载。</p>
<p>4.4 开机自启动</p>
<p>编辑/etc/rc.d/rc.local 文件，新增一行/usr/local/nginx/sbin/nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/rc.d</span><br><span class="line">sed -i <span class="string">&#x27;13a /usr/local/nginx/sbin/nginx&#x27;</span> /etc/rc.d/rc.local</span><br><span class="line">chmod u+x rc.local</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/12/01/10-12-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/10-12-33/" class="post-title-link" itemprop="url">MySql</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:12:33" itemprop="dateCreated datePublished" datetime="2021-12-01T10:12:33+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h1><blockquote>
<p>关系型数据库：建立在关系模型上，由多张相互连接的二维表组成的数据库</p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>MySQL 官网下载最新版<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/installer/">https://dev.mysql.com/downloads/installer/</a></li>
<li>然后在 cmd 里面 cd 到<code>D:\mysql-8.0.11</code>安装目录</li>
<li>在该文件夹下创建 my.ini 配置文件编辑 my.ini 配置以下基本信息</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=C:\\web\\mysql-<span class="number">8.0</span>.<span class="number">11</span></span><br><span class="line"><span class="comment"># 设置 mysql数据库的数据的存放目录MySQL 8+ 不需要以下配置，系统自己生成即可否则有可能报错</span></span><br><span class="line"><span class="comment"># datadir=C:\\web\\sqldata</span></span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">20</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为8比特编码的latin1字符集</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br></pre></td></tr></table></figure>

<blockquote>
<p>MySQL 数据库进行初始化命令操作时提示 my.ini 配置文件错误的解决方法<br>通过修改 MySQL 数据库中 my.ini 配置文件编码格式的方法解决此问题。<br>步骤：用记事本打开 my.ini 文件——》点击“文件”选择“另存为”——》将编码选为 ANSI——》保存覆盖——》重启 MySQL 。</p>
</blockquote>
<ol>
<li>以管理员身份打开 cmd 命令行工具切换目录<code>cd D:\mysql-8.0.11\bin</code></li>
<li>初始化数据库<code>mysqld --initialize --console</code>执行完成后会输出 root 用户的初始默认密码!!!!</li>
<li>安装<code>mysqld install</code></li>
<li>启动输入以下命令<code>net start mysql</code></li>
<li>停止<code>net stop mysql</code></li>
<li>登录 MySQL<code>mysql -u root -p</code></li>
<li>修改初始密码<code>ALTER USER USER() IDENTIFIED BY &#39;123456&#39;;</code></li>
</ol>
<h2 id="mysql-数据类型"><a href="#mysql-数据类型" class="headerlink" title="mysql 数据类型"></a>mysql 数据类型</h2><table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
</tr>
</thead>
<tbody><tr>
<td>整数类型</td>
<td>tinyint\smallint\mediumint\int\bigint</td>
</tr>
<tr>
<td>浮点小数类型</td>
<td>float\double</td>
</tr>
<tr>
<td>定点小数类型</td>
<td>decimal</td>
</tr>
<tr>
<td>时间、日期类型</td>
<td>year\time\date\datetime\timestamp</td>
</tr>
<tr>
<td>文本字符串</td>
<td>char\varchar\tinytext\text\mediumtext\longtext\enum\set</td>
</tr>
<tr>
<td>二进制字符串</td>
<td>bit\binary\varbinary\tinyblob\blog\mediumblob\longblob</td>
</tr>
</tbody></table>
<blockquote>
<p>char(n)和 varchar(n)中括号中 n 代表字符的个数并不代表字节个数比如 CHAR(30)就可以存储 30 个字符。</p>
</blockquote>
<h2 id="sql-语句"><a href="#sql-语句" class="headerlink" title="sql 语句"></a>sql 语句</h2><p>语法:</p>
<ul>
<li>单行或多行书写，已分号结尾</li>
<li>可使用空格缩进</li>
<li>不区分大小写，关键词推荐大写</li>
<li>注释：两横杆加空格<code>-- 注释...</code>或<code>/* ... */</code>或 mysql 特有的<code>#</code></li>
</ul>
<p>分类：</p>
<ul>
<li>DDL（data definition language）数据定义语句，建表、字段、数据库</li>
<li>DML（data manipulation language）数据操作语句，增删改</li>
<li>DQL（data query language）数据查询语句</li>
<li>DCL（data control language）数据控制语句，创建数据库用户，权限访问控制</li>
</ul>
<h2 id="sql-常用语句"><a href="#sql-常用语句" class="headerlink" title="sql 常用语句"></a>sql 常用语句</h2><ul>
<li><p>DDL</p>
<table>
<thead>
<tr>
<th>语句</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>show databases;</td>
<td>显示数据库</td>
</tr>
<tr>
<td>show create database 数据库名;</td>
<td>查看数据库信息</td>
</tr>
<tr>
<td>select databases();</td>
<td>查询当前数据库</td>
</tr>
<tr>
<td>use 数据库名;</td>
<td>选择数据库</td>
</tr>
<tr>
<td>create database [ IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集] [COLLATE 排序规则];</td>
<td>创建数据库</td>
</tr>
<tr>
<td>drop database [ IF EXISTS] 数据库名;</td>
<td>删除数据库</td>
</tr>
<tr>
<td>alter database 库名 选项信息;</td>
<td>修改库信息</td>
</tr>
<tr>
<td>show tables;</td>
<td>查看所有表</td>
</tr>
<tr>
<td>show tables from 数据库名;</td>
<td>查看所有表</td>
</tr>
<tr>
<td>show create table 表名;</td>
<td>查询指定表建表语句</td>
</tr>
<tr>
<td>desc 表名;</td>
<td>表结构</td>
</tr>
<tr>
<td>show 列 from 表名;</td>
<td>获取表的一个列</td>
</tr>
<tr>
<td>create table 表名(字段名 字段类型[COMMENT 注释],….)[COMMENT 注释];</td>
<td>创建表，最后一个字段后面没有逗号</td>
</tr>
<tr>
<td>RENAME TABLE 原表名 TO 新表名</td>
<td>对表进行重命名</td>
</tr>
<tr>
<td>RENAME TABLE 原表名 TO 库名.表名</td>
<td>可将表移动到另一个数据库</td>
</tr>
<tr>
<td>DROP TABLE[ IF EXISTS] 表名</td>
<td>删除表</td>
</tr>
<tr>
<td>TRUNCATE [TABLE] 表名</td>
<td>清空表</td>
</tr>
<tr>
<td>ALTER TABLE 表名 操作名</td>
<td>修改表信息，操作如下</td>
</tr>
<tr>
<td>操作名</td>
<td></td>
</tr>
<tr>
<td><code>ADD[ COLUMN] 字段名</code>– 增加字段;</td>
<td></td>
</tr>
<tr>
<td><code>AFTER 字段名</code>– 表示增加在该字段名后面;</td>
<td></td>
</tr>
<tr>
<td><code>FIRST</code>– 表示增加在第一个;</td>
<td></td>
</tr>
<tr>
<td><code>ADD PRIMARY KEY(字段名)</code>– 创建主键;</td>
<td></td>
</tr>
<tr>
<td><code>ADD UNIQUE [索引名] (字段名)</code>– 创建唯一索引;</td>
<td></td>
</tr>
<tr>
<td><code>ADD INDEX [索引名] (字段名)</code>– 创建普通索引;</td>
<td></td>
</tr>
<tr>
<td><code>DROP[ COLUMN] 字段名</code>– 删除字段;</td>
<td></td>
</tr>
<tr>
<td><code>MODIFY[ COLUMN] 字段名 字段属性</code>– 支持对字段属性进行修改不能修改字段名(所有原有属性也需写上);</td>
<td></td>
</tr>
<tr>
<td><code>CHANGE[ COLUMN] 原字段名 新字段名 字段属性</code>– 支持对字段名修改;</td>
<td></td>
</tr>
<tr>
<td><code>DROP PRIMARY KEY</code>– 删除主键(删除主键前需删除其 AUTO_INCREMENT 属性);</td>
<td></td>
</tr>
<tr>
<td><code>DROP INDEX 索引名</code>– 删除索引;</td>
<td></td>
</tr>
<tr>
<td><code>DROP FOREIGN KEY 外键</code> – 删除外键;</td>
<td></td>
</tr>
</tbody></table>
<p>数据类型</p>
<ul>
<li>整型<table>
<thead>
<tr>
<th>整型</th>
<th>占用字节</th>
<th>范围</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>1</td>
<td>-2^7^~2^7-1^</td>
<td>-128~127</td>
</tr>
<tr>
<td>smallint</td>
<td>2</td>
<td>-2^15^~2^15-1^</td>
<td>-32768~32767</td>
</tr>
<tr>
<td>mediumint</td>
<td>3</td>
<td>-2^23^~2^23-1^</td>
<td>-8388608~8388607</td>
</tr>
<tr>
<td>int</td>
<td>4</td>
<td>-2^31^~2^31-1^</td>
<td>-2147483648~2147483647</td>
</tr>
<tr>
<td>bigint</td>
<td>8</td>
<td>-2^63^~2^63-1^</td>
<td></td>
</tr>
<tr>
<td>一个字节=8 位</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>无符号数（unsigned）:就是没有负数，无符号数的正数的范围是有符号数正数范围的 2 倍。</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>浮点数<table>
<thead>
<tr>
<th>浮点数</th>
<th>占用字节</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>float(单精度)</td>
<td>4</td>
<td>-3.4E+38~3.4E+38</td>
</tr>
<tr>
<td>double(双精度)</td>
<td>8</td>
<td>-1.8E+308~1.8E+308</td>
</tr>
<tr>
<td>浮点数的声明：float(M,D)，double(M,D)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>M：总位数 D：小数位数</td>
<td></td>
<td></td>
</tr>
<tr>
<td>没有指定小数位数，默认小数位数是 0 位</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MySQL 浮点数支持科学计数法</td>
<td></td>
<td></td>
</tr>
<tr>
<td>浮点数的精度会丢失</td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>定点数<br>语法：decimal(M,D)<br>M 的最大值是 65，D 的最大值是 30，默认是(10,0)<br>decimal 是变长的，大致每 9 个数字用 4 个字节存储，整数和小数分开存储。定点数占用的资源可能会比浮点数大很多。</li>
<li>字符型<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>char(L)</td>
<td>定长字符</td>
</tr>
<tr>
<td>varchar(L)</td>
<td>可变长度字符</td>
</tr>
<tr>
<td>tinytext</td>
<td>大段文本（大块数据） 28-1=255 个字符</td>
</tr>
<tr>
<td>text</td>
<td>大段文本（大块数据） 216-1=65535 个字符</td>
</tr>
<tr>
<td>mediumtext</td>
<td>2^24^-1</td>
</tr>
<tr>
<td>longtext</td>
<td>2^32^-1</td>
</tr>
<tr>
<td>char</td>
<td></td>
</tr>
<tr>
<td>1、 char(L)：MySQL 不回收多余的空间</td>
<td></td>
</tr>
<tr>
<td>2、 L 的最大长度是 255</td>
<td></td>
</tr>
<tr>
<td>varchar</td>
<td></td>
</tr>
<tr>
<td>1、 varchar(L):MySQL 回收多余的空间</td>
<td></td>
</tr>
<tr>
<td>2、 L 的理论最大长度是 65535，但事实上达不到，因为有的字符是多字节字符，比如一个 utf8 的字符占用 3 个字节，65535/3 大约保存 2 万多字符；如果是 gbk,一个字符占两个字节，65535/2 大约保存 3 万多个字符。</td>
<td></td>
</tr>
<tr>
<td>一个记录的所有字段（不包含大数据）的总长度不能超过 65535 个字节</td>
<td></td>
</tr>
</tbody></table>
</li>
<li>枚举（enum）<br>从集合中选择一个值作为数据（单选）,MySQL 管理枚举值是通过整型的数字来管理的，第一个值是 1，第二个值是 2，以此类推。枚举优点<br>1、 限制值<br>2、 节省空间<br>3、 运行速度快（整数比字符串运行速度快）<br>思考题：已知枚举占用 2 个字节，请问最多可以有多个枚举值。<br>答：2 个字节 16 位，可以保存 216 方个值（65536，0-65535），因为枚举值从 1 开始，所以最多可以有 65535 个枚举值</li>
<li>集合（set）<br>从集合中选择一些值作为数据（多选）,集合和枚举一样，在 MySQL 内部也是通过数字来管理的。MySQL 为每个集合元素分配一个固定的值。分配方式从前往后依次是 20,21,22，…。如果有多个选项，值是单个选项的和<br>集合是一个按位或的关系<blockquote>
<p>按位或和按位与</p>
<blockquote>
<p>按位与：所有的位都是 1 结果才是 1<br>按位或：只要有一位是 1 结果就是 1<br>思考题：一直集合占用 8 个字节，可以表示多少个选项？<br>答：8 个字节是 64 个位，可以表示 64 个选项</p>
</blockquote>
</blockquote>
</li>
<li>日期时间型<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>datetime</td>
<td>日期时间 占 8 个字节</td>
</tr>
<tr>
<td>date</td>
<td>日期 占四个字节</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>year</td>
<td>年份，占用 1 个字节</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳，占用 4 个字节</td>
</tr>
<tr>
<td>datetime (日期时间)</td>
<td></td>
</tr>
<tr>
<td>格式：年-月-日 小时:分钟:秒</td>
<td></td>
</tr>
<tr>
<td>timestamp （时间戳）</td>
<td></td>
</tr>
<tr>
<td>datetime 和 timestamp 在表现上是一样的，他们的区别在于：Datetime 从 1 到 9999，而 timestamp 从 1970 年到 2038 年（原因是 timestamp 只占用了 4 个字节），2038 年 01 月 19 日 11:14:07 秒后就超过了 4 个字节的长度。</td>
<td></td>
</tr>
<tr>
<td>year</td>
<td></td>
</tr>
<tr>
<td>因为 year 占用 1 个字节，所以只能保存 255 个年份，范围是 1901~2155</td>
<td></td>
</tr>
<tr>
<td>time</td>
<td></td>
</tr>
<tr>
<td>可以表示时间，还可以表示时间间隔，范围是-838:59:59~838:59:59，time 也支持以天的方式表示时间间隔</td>
<td></td>
</tr>
</tbody></table>
</li>
<li>boolean<br>MySQL 不支持 boolean 型，true 和 false 在数据库中对应的是 1 和 0</li>
</ul>
</li>
</ul>
<h3 id="对于字段的定义"><a href="#对于字段的定义" class="headerlink" title="对于字段的定义"></a>对于字段的定义</h3><p>字段名 数据类型 <code>[NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT &#39;string&#39;]</code></p>
<h3 id="表选项"><a href="#表选项" class="headerlink" title="表选项"></a>表选项</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 字符集</span></span><br><span class="line">    CHARSET <span class="operator">=</span> charset_name</span><br><span class="line">    如果表没有设定则使用数据库字符集</span><br><span class="line"><span class="comment">-- 存储引擎</span></span><br><span class="line">    ENGINE <span class="operator">=</span> engine_name</span><br><span class="line">    表在管理数据时采用的不同的数据结构结构不同会导致处理方式、提供的特性操作等不同</span><br><span class="line">    常见的引擎InnoDB MyISAM Memory<span class="operator">/</span>Heap BDB <span class="keyword">Merge</span> Example CSV MaxDB Archive</span><br><span class="line">    不同的引擎在保存表的结构和数据时采用不同的方式</span><br><span class="line">    MyISAM表文件含义.frm表定义.MYD表数据.MYI表索引</span><br><span class="line">    InnoDB表文件含义.frm表定义表空间数据和日志文件</span><br><span class="line">    <span class="keyword">SHOW</span> ENGINES <span class="comment">-- 显示存储引擎的状态信息</span></span><br><span class="line">    <span class="keyword">SHOW</span> ENGINE 引擎名 &#123;LOGS<span class="operator">|</span>STATUS&#125; <span class="comment">-- 显示存储引擎的日志或状态信息</span></span><br><span class="line"><span class="comment">-- 数据文件目录</span></span><br><span class="line">    DATA DIRECTORY <span class="operator">=</span> <span class="string">&#x27;目录&#x27;</span></span><br><span class="line"><span class="comment">-- 索引文件目录</span></span><br><span class="line">    INDEX DIRECTORY <span class="operator">=</span> <span class="string">&#x27;目录&#x27;</span></span><br><span class="line"><span class="comment">-- 表注释</span></span><br><span class="line">    COMMENT <span class="operator">=</span> <span class="string">&#x27;string&#x27;</span></span><br><span class="line"><span class="comment">-- 分区选项</span></span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> ... (详细见手册)</span><br></pre></td></tr></table></figure>

<h3 id="列属性列约束"><a href="#列属性列约束" class="headerlink" title="列属性列约束"></a>列属性列约束</h3><ol>
<li>主键约束<ul>
<li>主键的作用 1、 保证数据完整性 2、 加快查询速度</li>
<li>能唯一标识记录的字段可以作为主键。</li>
<li>一个表只能有一个主键。</li>
<li>主键具有唯一性。</li>
<li>声明字段时用 primary key 标识。<br>也可以在字段列表之后声明，例 <code>create table tab ( id int, stu varchar(10), primary key (id));</code></li>
<li>主键字段的值不能为 null。</li>
<li>选择主键的原则 1、 最少性：尽量选择单个键做主键 2、 稳定性：尽量选择更新少的列做主键。3、 能用数字做主键的就不要用字符串</li>
<li>主键可以由多个字段共同组成。此时需要在字段列表后声明的方法。<br>例 create table tab ( id int, stu varchar(10), age int, primary key (stu, age));</li>
</ul>
</li>
<li>unique 唯一约束<ul>
<li>不能重复可以为空</li>
<li>一个表可以有多个唯一键</li>
</ul>
</li>
<li>null 约束<ul>
<li>null 不是数据类型是列的一个属性。<br>表示当前列是否可以为 null 表示什么都没有。</li>
<li>null, 允许为空。默认。</li>
<li>not null, 不允许为空。<br>例如： <code>insert into tab values (null, &#39;val&#39;);</code><br>此时表示将第一个字段的值设为 null, 取决于该字段是否允许为 null</li>
</ul>
</li>
<li>default 默认值属性<ul>
<li>当前字段的默认值。</li>
<li><code>insert into tab values (default, &#39;val&#39;);</code> – 此时表示强制使用默认值。</li>
<li><code>create table tab ( add_time timestamp default current_timestamp );</code>– 表示将当前时间的时间戳设为默认值。<code>current_date, current_time</code></li>
</ul>
</li>
<li>auto_increment 自动增长约束<ul>
<li>自动增长必须为<code>索引主键</code>或<code>unique</code></li>
<li>只能存在一个字段为自动增长。</li>
<li>默认为 1 开始自动增长。可以通过表属性<code>auto_increment = x</code> 进行设置或 <code>alter table tbl auto_increment = x;</code>，一般和 unsigned 一起使用（使用无符号整数）</li>
<li>自动增长列上的数据被删除，默认不再重复使用。</li>
<li>delete from 清空数据后编号继续增长，truncate table 清空表后编号从 1 开始增长.因为 truncate table 是删除原来的表创建一个新表。</li>
</ul>
</li>
<li>comment 注释<ul>
<li>例：<code>create table tab ( id int ) comment &#39;注释内容&#39;;</code></li>
</ul>
</li>
<li>foreign key 外键约束<ul>
<li>用于限制主表与从表数据完整性。</li>
<li><code>create table 表名(字段名 类型)[constraint] [外键名称] foreign key(外键字段名) references 主表(主表列名)</code></li>
<li><code>alter table 表名 add constraint 外键名称 foreign key (外键字段名) references 主表(主表列名);</code>将表的外键关联到主表的字段。每个外键都有一个名字可以通过 constraint 指定</li>
<li>存在外键的表称之为从表子表外键指向的表称之为主表父表。</li>
<li>作用保持数据一致性完整性主要目的是控制存储在外键表从表中的数据。</li>
<li><code>alter table 表名 drop foreign key 外键名称</code>删除外键<br>删除、更新外键行为<table>
<thead>
<tr>
<th>行为</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>no action/restrict</td>
<td>父表操作时，检查是否有对应外键，若有则不允许删除、更新</td>
</tr>
<tr>
<td>cascade</td>
<td>级联，若有，则也删除、更新外键在子表中的记录</td>
</tr>
<tr>
<td>set null</td>
<td>若有，则设置子表中该外键值为 null，外键值必须允许取 null</td>
</tr>
<tr>
<td>set default</td>
<td>若有，则设置子表中该外键值为默认值，innodb 不支持</td>
</tr>
<tr>
<td><code>create table 表名(字段名 类型)[constraint] [外键名称] foreign key(外键字段名) references 主表(主表列名) on update cascade on delete cascade</code></td>
<td></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ol>
<h3 id="MySQL-中可以对-InnoDB-引擎使用外键约束"><a href="#MySQL-中可以对-InnoDB-引擎使用外键约束" class="headerlink" title="MySQL 中可以对 InnoDB 引擎使用外键约束"></a>MySQL 中可以对 InnoDB 引擎使用外键约束</h3><p>语法：<br><code>foreign key (外键字段 references 主表名 (关联字段) [主表记录删除时的动作] [主表记录更新时的动作]</code></p>
<p>此时需要检测一个从表的外键需要约束为主表的已存在的值。外键在没有关联的情况下可以设置为 <code>null</code>，前提是该外键列没有 <code>not null</code>。</p>
<p>可以不指定主表记录更改或更新时的动作那么此时主表的操作被拒绝。</p>
<p>如果指定了 <code>on update</code> 或 <code>on delete</code> 在删除或更新时有如下几个操作可以选择</p>
<ol>
<li><p>cascade 级联操作。主表数据被更新主键值更新从表也被更新外键值更新。主表记录被删除从表相关记录也被删除。</p>
</li>
<li><p>set null 设置为 null。主表数据被更新主键值更新从表的外键被设置为 null。主表记录被删除从表相关记录外键被设置成 null。但注意要求该外键列没有 not null 属性约束。</p>
</li>
<li><p>restrict 拒绝父表删除和更新。</p>
</li>
</ol>
<p>注意外键只被 InnoDB 存储引擎所支持。其他引擎是不支持的。</p>
<h3 id="DML（增删改）"><a href="#DML（增删改）" class="headerlink" title="DML（增删改）"></a>DML（增删改）</h3><ul>
<li>增</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] 表名 [(字段列表)] <span class="keyword">VALUES</span> (值列表)[, (值列表), ...]</span><br><span class="line">        <span class="comment">-- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。</span></span><br><span class="line">        <span class="comment">-- 可同时插入多条数据记录！</span></span><br><span class="line">        <span class="comment">-- 字符串和日期数据应包含在引号中</span></span><br><span class="line">        REPLACE 与 <span class="keyword">INSERT</span> 完全一样，可互换。</span><br><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] 表名 <span class="keyword">SET</span> 字段名<span class="operator">=</span>值[, 字段名<span class="operator">=</span>值, ...]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>删</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名[ 删除条件子句]</span><br><span class="line"></span><br><span class="line">没有条件子句则会删除全部</span><br></pre></td></tr></table></figure>

<ul>
<li>改</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name <span class="keyword">SET</span> field1<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value1, field2<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> runoob_tbl <span class="keyword">WHERE</span> runoob_id<span class="operator">=</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><blockquote>
<p>执行顺序<code>form</code>&gt;<code>where</code>&gt;<code>group by</code>&gt;<code>having</code>&gt;<code>select</code>&gt;<code>order by</code>&gt;<code>limit</code></p>
</blockquote>
<h4 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line">[LIMIT N][ <span class="keyword">OFFSET</span> M]</span><br><span class="line">        <span class="comment">-- 可来自多个表的多个字段</span></span><br><span class="line">        <span class="comment">-- 其他子句可以不使用</span></span><br><span class="line">        <span class="comment">-- 字段列表可以用*代替表示所有字段</span></span><br><span class="line">        你可以使用 LIMIT 属性来设定返回的记录数。</span><br><span class="line">你可以通过<span class="keyword">OFFSET</span>指定<span class="keyword">SELECT</span>语句开始查询的数据偏移量。默认情况下偏移量为<span class="number">0</span>。</span><br></pre></td></tr></table></figure>

<ul>
<li><p>去除重复记录<br><code>select distinct 字段列表 from 表名</code></p>
</li>
<li><p>设置别名 AS</p>
</li>
</ul>
<p><code>SELECT 字段1[AS 别名], 字段2[AS 别名] FROM 表名;-- AS可省略</code></p>
<ul>
<li>WHERE 子句</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">SELECT</span> field1, field2,...fieldN <span class="keyword">FROM</span> table_name1, table_name2...</span><br><span class="line">[<span class="keyword">WHERE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] condition2.....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>MySQL 的 WHERE 子句的字符串比较是不区分大小写的。 你可以使用 BINARY 关键字来设定 WHERE 子句的字符串比较是区分大小写的。<br>字符串用单引号</p>
</blockquote>
<p>条件判断：<code>列 操作符 值</code></p>
<p>操作符：<br><code>= &lt; &gt; &lt;= &gt;=  !=</code><br><code>BETWEEN...AND...</code> 在某个范围（含最小最大值）<br><code>IN(...)</code>在 in 之后的列表中的值，多选一<br><code>IS NULL</code> 是 null</p>
<p>逻辑运算符<br><code>AND</code>或<code>&amp;&amp;</code> 多个条件同时成立<br><code>OR</code>或<code>||</code> 多个条件成立一个<br><code>NOT</code>或<code>!</code> 非</p>
<p>LIKE 子句</p>
<p>LIKE 子句中使用百分号 <code>%</code>字符来表示任意个字符，类似于 <code>UNIX</code> 或<code>正则表达式中</code>的星号<code>*</code>。如果没有使用百分号 <code>%</code>, LIKE 子句与等号<code>=</code>的效果是一样的。<code>_</code>下划线匹配单个字符</p>
<p><code>mysql&gt; SELECT * from runoob_tbl WHERE runoob_author LIKE &#39;%COM&#39;;</code></p>
<ul>
<li>分组聚合<br><code>select 列,聚合函数 from 表 [where条件] group by 列 [having 分组后的过滤条件]</code></li>
</ul>
<p>聚合函数（将一列数据作为一个整体进行纵向计算）:</p>
<blockquote>
<p>null 值不参与聚合函数计算</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sum(列)-- 求和</span><br><span class="line">avg(列)--平均</span><br><span class="line">min(列)</span><br><span class="line">max(列)</span><br><span class="line">count(列|*)-- 数量</span><br></pre></td></tr></table></figure>

<p>where 与 having:<br>where 是分组前过滤，不满足 where 条件不参与分组。having 是分组后对结果进行过滤。where 不能对聚合函数进行判断，而 having 可以</p>
<p>分组后，查询字段一般为聚合函数和分组的字段，查询其他字段只会显示第一个值</p>
<ul>
<li>排序</li>
</ul>
<p><code>select 字段, from 表  order by 关键字 [asc|desc],关键词2 [asc|desc]</code></p>
<p>如果是多字段排序，当第一个字段值相同的时候，才会根据第二个字段进行排序</p>
<ul>
<li>分页（mysql)</li>
</ul>
<p><code>select * from table limit n[,m]</code><br>n：起始索引,跳过前 n 条，m：取出 m 条</p>
<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><blockquote>
<p>多表关系</p>
<blockquote>
<p>一对一(用户和用户详情)：多用于单表拆分，将用户和用户详情拆分成两个表，提升操作效率。任意一方加入外键，并设置外键为唯一<br>一对多(一个部门对于多个员工，一个员工对应一个部门)：多的一方建立外键，指向一的一方<br>多对多(一个学生对于多个课程，一个课程对应多个学生)：只能建立第三张表，包含两个外键，分别关联两方主键</p>
</blockquote>
</blockquote>
<ul>
<li><p>多表查询语法(它会让参与的表先产生笛卡尔积【如两个集合 a，b 的所有组合情况】，然后在 where 过滤，性能差)</p>
<p><code>select  字段1,字段2... from 表1,表2... [where 条件]</code></p>
</li>
</ul>
<p>as 别名<br><code>select  字段1,字段2... from 表1 as 别名,表2 as 别名... [where 条件]</code></p>
<ul>
<li>多表链接查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>  [,<span class="keyword">INNER</span>]<span class="operator">|</span>[<span class="keyword">LEFT</span><span class="operator">|</span><span class="keyword">RIGHT</span>,[<span class="keyword">OUTER</span>]] <span class="keyword">JOIN</span>  表<span class="number">2</span> <span class="keyword">ON</span> 表<span class="number">1.</span>字段 <span class="operator">=</span> 表<span class="number">2.</span>字段;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>内关联是求交集，必须双向匹配才能查出</p>
</li>
<li><p>外关联：左外连接查询 (左边表中的数据优先全部显示，不用匹配右边),右外连接查询 (右边表中的数据优先全部显示，不用匹配左边)</p>
</li>
<li><p>全连接查询(联合查询)，联合查询不会使索引失效，而 or 会</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 全连接查询：是在内连接的基础上增加 左右两边没有显示的数据</span></span><br><span class="line"><span class="comment">-- 注意: mysql并不支持全连接 full JOIN 关键字</span></span><br><span class="line"><span class="comment">-- 注意: 但是mysql 提供了 UNION 关键字.使用 UNION 可以间接实现 full JOIN 功能</span></span><br><span class="line"><span class="comment">-- 联合查询多张表的列数，类型必须保持一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">left</span> <span class="keyword">join</span> sc <span class="keyword">on</span> student.sid <span class="operator">=</span> sc.sid</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">right</span> <span class="keyword">join</span> sc <span class="keyword">on</span> student.sid <span class="operator">=</span> sc.sid;</span><br><span class="line"><span class="comment">-- 注意: UNION 和 UNION ALL 的区别:UNION 会去掉重复的数据,而 UNION ALL 则直接显示结果/</span></span><br></pre></td></tr></table></figure></li>
<li><p>自连接，必须起别名，可以内联也可以外联<br><code>select 字段 from 表1 别名1 join 表1 别名2 on 条件...</code></p>
</li>
</ol>
<ul>
<li>三表查询</li>
</ul>
<p><code>select 表1.字段,表2.字段,表3.字段 from 表1 join 表2 on 表1.关联字段 = 表2.关联字段 join 表3 on 表2.关联字段 = 表3.关联字段 where....;</code></p>
<ul>
<li>子查询（嵌套查询）<ul>
<li>标量子查询（子查询结果返回的结果为单个值）</li>
<li>列子查询（返回的一列）<br>常用操作：<code>in</code>在集合范围内多选一,<code>not in</code>不在集合范围,<code>any</code>任意一个满足即可,<code>some</code>等同 any,<code>all</code>必须全部满足</li>
<li>行子查询（返回的一行）<br>常用操作：<code>in</code>在集合范围内多选一,<code>not in</code>不在集合范围,<code>=</code>等于,<code>!=</code>不等于</li>
<li>表子查询(多行多列)<br>常用操作：<code>in</code>在集合范围内多选一,</li>
</ul>
</li>
</ul>
<h3 id="DCL-管理用户管理权限"><a href="#DCL-管理用户管理权限" class="headerlink" title="DCL 管理用户管理权限"></a>DCL 管理用户管理权限</h3><ul>
<li><p>查询用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>创建用户<br><code>create user &#39;用户名&#39;@&#39;主机名&#39; identified by &#39;密码&#39;</code><br>主机名指在哪个主机上才能登陆访问数据库，可改为<code>%</code>，即可在任何主机登陆</p>
</li>
<li><p>修改用户密码<br><code>alter user &#39;用户名&#39;@&#39;主机名&#39; identified width mysql_nativev_password by &#39;密码&#39;</code></p>
</li>
<li><p>删除用户<br><code>drop user &#39;用户名&#39;@&#39;主机名&#39;</code></p>
</li>
<li><p>权限控制<br>常用权限：</p>
<table>
<thead>
<tr>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL,ALLPRIVILEGES</td>
<td>所有权限</td>
</tr>
<tr>
<td>SELECT</td>
<td>查询</td>
</tr>
<tr>
<td>INSERT</td>
<td>插入数据</td>
</tr>
<tr>
<td>UPDATE</td>
<td>修改数据</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除数据</td>
</tr>
<tr>
<td>ALTER</td>
<td>修改表</td>
</tr>
<tr>
<td>DROP</td>
<td>删除表，数据库，视图</td>
</tr>
<tr>
<td>CREATE</td>
<td>创建表，数据库</td>
</tr>
<tr>
<td>INDEX</td>
<td>授予用户可以在表上定义索引的权限</td>
</tr>
<tr>
<td>super</td>
<td>允许执行一系列数据库管理命令</td>
</tr>
<tr>
<td>file</td>
<td>file 权限指的是对服务器主机上文件的访问，数据库用户拥有 file 权限才可以执行 select ..into outfile，load data infile…操作.</td>
</tr>
<tr>
<td>但是不要把 file, process, super 权限授予管理员以外的账号，这样存在严重的安全隐患。</td>
<td></td>
</tr>
</tbody></table>
<p>查询权限<br><code>show grants for &#39;用户名&#39;@&#39;主机名&#39;</code></p>
<p>授权<br><code>grant 权限,权限2 on 数据库.表名 to&#39;用户名&#39;@&#39;主机名&#39;</code><br>数据库名和表名可以通配符<code>*</code>代表所有</p>
<p>撤销权限<br><code>revoke 权限,权限2 on 数据库.表名 from  &#39;用户名&#39;@&#39;主机名&#39;</code></p>
</li>
</ul>
<h2 id="mysql-函数"><a href="#mysql-函数" class="headerlink" title="mysql 函数"></a>mysql 函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>concat(s1,s2…)</td>
<td>字符串拼接</td>
</tr>
<tr>
<td>lower(str)</td>
<td>转小写</td>
</tr>
<tr>
<td>upper(str)</td>
<td>转大写</td>
</tr>
<tr>
<td>trim(str)</td>
<td>去除首尾空格</td>
</tr>
<tr>
<td>substring(str,strart,len)</td>
<td>返回 start 起 len 个字符串</td>
</tr>
</tbody></table>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>ceil(x)</td>
<td>向上取整</td>
</tr>
<tr>
<td>floor(x)</td>
<td>向下取整</td>
</tr>
<tr>
<td>mod(x,y)</td>
<td>返回 x/y 的模</td>
</tr>
<tr>
<td>rand()</td>
<td>0-1 随机数</td>
</tr>
<tr>
<td>round(x,y)</td>
<td>x 的四舍五入，暴露 y 位小数</td>
</tr>
</tbody></table>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>curdate()</td>
<td>当前日期</td>
</tr>
<tr>
<td>curtime()</td>
<td>当前时间</td>
</tr>
<tr>
<td>now()</td>
<td>当前日期时间</td>
</tr>
<tr>
<td>year(date)</td>
<td>获取指定 date 的年</td>
</tr>
<tr>
<td>month(date)</td>
<td>获取指定 date 的月</td>
</tr>
<tr>
<td>day(date)</td>
<td>获取指定 date 的日</td>
</tr>
<tr>
<td>date_add(date,interval expr type)</td>
<td>返回 date 加上时间间隔 expr 后的时间值 ,type 为单位(day,month,year…)</td>
</tr>
<tr>
<td>date_sub(date,interval expr type)</td>
<td>返回 date 减去时间间隔 expr 后的时间值 ,type 为单位(day,month,year…)</td>
</tr>
<tr>
<td>datediff(date1,date2)</td>
<td>返回 date1 和 date2 之间的天数</td>
</tr>
</tbody></table>
<h3 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>if(value,t,f)</td>
<td>如果 value 为真返回 t，否则返回 f</td>
</tr>
<tr>
<td>ifnull(val1,val2)</td>
<td>如果 val1 为不为空，返回 val1，否则返回 val2</td>
</tr>
<tr>
<td>case when [val1] then [res1]when [val2] then [res2]…else [default] end</td>
<td>如果 val1 为真，返回 res1，…否则返回 default 值</td>
</tr>
<tr>
<td>case [expr] when [val1] then [res1]…else [default] end</td>
<td>如果 expr 等于 val1 ，返回 res1，…否则返回 default 值</td>
</tr>
</tbody></table>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul>
<li>原子性：事务是不可分割的最小操作单元，要么全部成功，要么去全部失败；</li>
<li>一致性：事务完成时，必须使所有的数据都保持一致状态。</li>
<li>隔离性：数据库系统提供的隔离机制，保证事务在不受外部并发操作的独立环境下运行</li>
<li>持久性：事务一旦提交或回滚，它对数据库的数据的改变是永久的</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul>
<li>查看设置事务提交方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="keyword">Set</span> @<span class="variable">@autocommit</span><span class="operator">=</span><span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>开启事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>提交事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>回滚事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><ul>
<li><p>脏读：一个事务读到另一个事务还没有提交的数据</p>
</li>
<li><p>不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同</p>
</li>
<li><p>幻读：一个事务按照条件查询数据时，没有对应的数据行，但是插入数据时，又提示该行数据已经存在。</p>
</li>
<li><p>事务隔离级别</p>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>Read uncommitted</td>
<td>出现</td>
<td>出现</td>
<td>出现</td>
</tr>
<tr>
<td>Read committed</td>
<td>不出现</td>
<td>出现</td>
<td>出现</td>
</tr>
<tr>
<td>Repeatable Read(mysql 默认)</td>
<td>不出现</td>
<td>不出现</td>
<td>出现</td>
</tr>
<tr>
<td>Serializable</td>
<td>不出现</td>
<td>不出现</td>
<td>不出现</td>
</tr>
</tbody></table>
</li>
<li><p>查看事务隔离级别</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="variable">@TRANSACTION</span>_ISOLATION;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置事务隔离级别</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [SEEESION<span class="operator">|</span><span class="keyword">GLOBAL</span>] TRANSACTION ISOLATION LEVEL&#123;READ UNCOMMITTED<span class="operator">|</span>READ COMMITTED<span class="operator">|</span>REPEATABLE READ<span class="operator">|</span>SERIALIZABLE&#125;</span><br></pre></td></tr></table></figure>

<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><blockquote>
<p>就是存储数据、建立索引、更新查找数据等技术的实现方式。存储引擎是基于表的，而不是基于库的，所以存储引擎也可以被称为表类型</p>
</blockquote>
<ul>
<li><p>innoDB</p>
<blockquote>
<p>兼顾高可靠性和高性能的通用存储引擎，在 mysql5.5 之后为默认引擎<br>特点：DM 操作遵循 ACID 模型，支持<code>事务</code>支持<code>级锁</code>提高并发访问性能；支持<code>外键</code>，保证数据的完整性和正确性;最大 64TB，空间和内存使用高，批量插入慢，适用除读操作和插入操作外，还有大量的更新、删除操作的应用。<br>文件：xxx.idb:存储该表的表结构和数据和索引</p>
</blockquote>
</li>
<li><p>MyISAM</p>
<blockquote>
<p>早期 mysql 默认引擎<br>特点：不支持事务、外键、行锁；支持表锁，访问速度快;空间和内存使用低，批量插入快，适用于读操作和插入操作为主的应用。</p>
</blockquote>
</li>
<li><p>Memory</p>
<blockquote>
<p>表数据存在内存中，常用于临时表、缓存使用<br>特点：内存存放、hash 索引<br>文件：xxx.sdi:存储表结构信息</p>
</blockquote>
</li>
<li><p>创建表时，指定存储引擎</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(字段<span class="number">1</span> 类型 [comment 注释],...)engine<span class="operator">=</span>innoDB [comment 表注释];</span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前数据库支持的存储引擎</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> engines;</span><br></pre></td></tr></table></figure>

<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><blockquote>
<p>帮助 mysql 高效获取数据的数据结构（有序）。在数据之外，数据库还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用数据，这样就可以在这些数据结构上实现高级的查找算法，这种数据结构就是索引<br>优势：提高数据检索效率，降低数据库的 io 成本。对数据进行排序时，降低 cpu 消耗。<br>缺点：索引需要额外的磁盘空间。降低表的更新速度，效率降低。</p>
</blockquote>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><table>
<thead>
<tr>
<th>索引结构</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>B+Tree 索引</td>
<td>最常见的索引，大部分引擎都支持</td>
</tr>
<tr>
<td>Hash 索引</td>
<td>利用哈希表实现，只有精确匹配索引的查询才有效，不支持范围查找</td>
</tr>
<tr>
<td>R-tree 空间索引</td>
<td>MyISAM 引擎的一个特殊索引类型，常用于地理空间数据类型</td>
</tr>
<tr>
<td>Full-text 全文索引</td>
<td>通过建立到排索引，快速匹配文档的方式，类似 ES</td>
</tr>
</tbody></table>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><table>
<thead>
<tr>
<th>分类</th>
<th>说明</th>
<th>特点</th>
<th>关键词</th>
</tr>
</thead>
<tbody><tr>
<td>主键索引</td>
<td>针对表中的主键创建的索引</td>
<td>默认自动创建，只能有一个</td>
<td>primary</td>
</tr>
<tr>
<td>唯一索引</td>
<td>避免同一个表中数据列的值重复</td>
<td>可以多个</td>
<td>unique</td>
</tr>
<tr>
<td>常规索引</td>
<td>快速定位特定数据</td>
<td>可以多个</td>
<td></td>
</tr>
<tr>
<td>全文索引</td>
<td>全文索引查找的是文本中的关键词，而不是比较索引中的值</td>
<td>可以多个</td>
<td>fulltext</td>
</tr>
</tbody></table>
<p>innoDB 根据索引的存储类型又可以分为下面两种</p>
<ul>
<li>聚集索引 clustered Index：将数据存储和索引放到一块，索引结构的叶子节点保存了行数据（必须有，且只有一个）<ul>
<li>如果主键存在，主键索引就是聚集索引</li>
<li>若无主键，将使用第一个唯一索引作为聚集索引</li>
<li>若表既无主键也无唯一索引，innoDB 将自动生成 rowid 作为隐藏的聚集索引</li>
</ul>
</li>
<li>二级索引 Secondary Index：将数据和索引分开存储，索引结构的叶子节点关联的是对应的主键（可以存在多个）</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><ul>
<li>创建索引<br><code>create [unique|fulltext] INDEX 索引名 ON 表名(字段名,...)</code></li>
<li>查看索引<br><code>show index from 表名</code></li>
<li>删除索引<br><code>drop idnex 索引名 on 表名</code></li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li><p>最左前缀法则：如果索引了多列，查询从索引的最左列开始，并且不跳过索引中列，若跳过某一列，索引将部分失效即后面的字段索引失效</p>
</li>
<li><p>范围查询：如果索引了多列，出现范围查询（<code>&gt;</code>，<code>&lt;</code>），范围查询右侧的列索引失效。可使用<code>&gt;-</code>，<code>&lt;=</code>避免出现这种情况</p>
</li>
<li><p>索引列运算：索引列进行运算操作，索引将失效</p>
</li>
<li><p>字符串不加引号：字符串不加引号，索引将失效</p>
</li>
<li><p>模糊查询：尾部模糊匹配，索引不失效，头部模糊索引失效。</p>
</li>
<li><p>or 连接：or 前后都有索引，索引才不会失效</p>
</li>
<li><p>数据分布影响：若 mysql 评估索引查询比全表查询慢，将不会使用索引</p>
</li>
<li><p>覆盖索引：尽量使用覆盖索引（查询使用了索引，兵器需要返回的列，在该索引中已经全部能够找到），减少 select *</p>
</li>
<li><p>单列索引与联合索引：若存在多个查询条件，建议建立联合索引。使用单列索引时，mysql 会根据评估，自动选择，并不会全用上索引</p>
</li>
<li><p>sql 提示：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 use index(索引名) where...</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 ignore index(索引名) where...</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 force index(索引名) where...</span><br></pre></td></tr></table></figure></li>
<li><p>前缀索引：字段类型为 varchar 或 text，建立的索引会变得非常大。通过截取字符串前一部分建立索引提交索引效率</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#n为截取的个数</span><br><span class="line"><span class="keyword">create</span> index 索引名 <span class="keyword">on</span> 表(列名(n));</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><ul>
<li>查看操作次数<br><code>show [global|session] status link &#39;com_______&#39;;</code>七个下划线</li>
</ul>
<h3 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h3><blockquote>
<p>记录所有执行超过指定参数（long_query_time,单位：秒，默认 10s）的所有 sql 语句日志，默认没有开启</p>
</blockquote>
<ul>
<li>查看是否开启：<code>show variables like &#39;slow_query_log&#39;;</code></li>
<li>开启：编辑/etc/my.cng</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show_query_log=1</span><br><span class="line">long_query_time=2</span><br></pre></td></tr></table></figure>

<ul>
<li>日志文件：<code>/var/lib/mysql/localhost-slow.log</code></li>
</ul>
<h3 id="profile-详情"><a href="#profile-详情" class="headerlink" title="profile 详情"></a>profile 详情</h3><blockquote>
<p>查看 sql 语句具体详情</p>
</blockquote>
<ul>
<li>查看是否支持：<code>select @@have_profiling;</code></li>
<li>启动：<code>set profiling=1;</code></li>
<li>查看：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看全部</span><br><span class="line"><span class="keyword">show</span> profiles;</span><br><span class="line">#指定id</span><br><span class="line"><span class="keyword">show</span> profile <span class="keyword">for</span> query <span class="keyword">sql</span>语句id;</span><br><span class="line">#查看cup情况</span><br><span class="line"><span class="keyword">show</span> profile cpu <span class="keyword">for</span> query <span class="keyword">sql</span>语句id;</span><br></pre></td></tr></table></figure>

<h3 id="explain-执行计划"><a href="#explain-执行计划" class="headerlink" title="explain 执行计划"></a>explain 执行计划</h3><blockquote>
<p>获取 mysql 如何执行 select 语句信息。</p>
</blockquote>
<ul>
<li>使用</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表</span><br><span class="line">或</span><br><span class="line"><span class="keyword">desc</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表</span><br></pre></td></tr></table></figure>

<ul>
<li>结果字段说明:<ul>
<li>id：操作顺序，id 相同，从上到下，否则值也大，越先执行</li>
<li>select_type：查询类型</li>
<li>type：连接类型，由好到差-&gt;null、system、cons、eq_ref、ref、range、index、all</li>
<li>prossible_key：显示可能应用在这张表上的索引</li>
<li>key：实际使用的索引</li>
<li>key_len：索引中使用的字节数，该值为最大可能长达，并非实际使用长度</li>
<li>rows：必须要执行查询的行数，是个估值</li>
<li>filterd：表示返回结果的行数占需读取行数的百分百，越大越好</li>
</ul>
</li>
</ul>
<h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><ul>
<li><p>主键顺序插入</p>
</li>
<li><p>多条插入尽可以使用批量插入<code>insert into 表 values(1,&#39;1&#39;),(2,&#39;2&#39;)</code></p>
</li>
<li><p>手动提交事务</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>大批量插入数据：使用 mysql 的 load 指令进行插入操作</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql --local-infile -u root -p</span><br><span class="line"><span class="built_in">set</span> global local_infile=1;</span><br><span class="line">load data <span class="built_in">local</span> infile <span class="string">&#x27;/home/sql.log&#x27;</span> into table <span class="string">&#x27;表名&#x27;</span> fields terminated by <span class="string">&#x27;字段间的分割符&#x27;</span> lines teminated by <span class="string">&#x27;每一行的分隔符&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="主键优化"><a href="#主键优化" class="headerlink" title="主键优化"></a>主键优化</h3><ul>
<li>尽量降低主键长度–减少 b+tree 空间</li>
<li>插入数据时尽量顺序插入–避免页分裂</li>
<li>尽量不要使用 uuid 做主键–避免页分裂</li>
<li>避免对主键修改–重新构建 b+tree</li>
</ul>
<h2 id="MySQL-分页查询的-5-种方法"><a href="#MySQL-分页查询的-5-种方法" class="headerlink" title="MySQL 分页查询的 5 种方法"></a>MySQL 分页查询的 5 种方法</h2><p>方式 1：直接使用数据库提供的 SQL 语句</p>
<p>适应场景: 适用于数据量较少的情况(元组百/千级)。很简单，该语句的意思就是查询 m+n 条记录，去掉前 m 条，返回后 n 条。无疑该查询能够实现分页，但 m 越大，查询性能就越低，因为 MySQL 需要扫描全部 m+n 条记录。</p>
<p>方式 2：基于索引再排序</p>
<p><code>select \* from table order by id limit m, n;</code></p>
<p>很简单，该语句的意思就是查询 m+n 条记录，去掉前 m 条，返回后 n 条。无疑该查询能够实现分页，但 m 越大，查询性能就越低，因为 MySQL 需要扫描全部 m+n 条记录。</p>
<p>方式 2：</p>
<p><code>select \* from table where id &gt; #max_id# order by id limit n;</code></p>
<p>该查询同样会返回后 n 条记录，却无需像方式 1 扫描前 m 条记录，但必须在每次查询时拿到上一次查询（上一页）的最大 id（或最小 id），是比较常用的方式。</p>
<p>当然该查询的问题也在于我们不一定能拿到这个 id，比如当前在第 3 页，需要查询第 5 页的数据，就不行了。</p>
<p>方式 3：</p>
<p>方式 3：基于索引再排序<br>为了避免方式 2 不能实现的跨页查询，就需要结合方式 1。</p>
<p>性能需要，m 得尽量小。比如当前在第 3 页，需要查询第 5 页，每页 10 条数据，且当前第 3 页的最大 id 为#max_id#，则：</p>
<p><code>select \* from table where id &gt; #max_id# order by id limit 10, 10;</code></p>
<p>该方式就部分解决了方式 2 的问题，但如果当前在第 2 页，要查第 1000 页，性能仍然较差。</p>
<p>方式 4：</p>
<p><code>select \* from table as a inner join (select id from table order by id limit m, n) as b on a.id = b.id order by a.id;</code></p>
<p>该查询同方式 1 一样，m 的值可能很大，但由于内部的子查询只扫描了 id 字段，而非全表，所以性能要强于方式 1，并且能够解决跨页查询问题。</p>
<p>方式 5：</p>
<p><code>select \* from table where id &gt; (select id from table order by id limit m, 1) limit n;</code></p>
<p>该查询同样是通过子查询扫描字段 id，效果同方式 4。但方式 5 的性能会略好于方式 4，因为它不需要进行表的关联，而是一个简单的比较，在不知道上一页最大 id 的情况下，是比较推荐的用法。</p>
<p>方法 6: 基于索引使用 prepare,<br>语句样式: MySQL 中,可用如下方法:<br>代码如下:<br><code>PREPARE stmt*name FROM SELECT * FROM 表名称 WHERE id*pk &gt; (？* ？) ORDER BY id_pk ASC LIMIT M</code><br>（第一个问号表示 pageNum，第二个？表示每页元组数）<br>适应场景: 大数据量。<br>原因: 索引扫描,速度会很快. prepare 语句又比一般的查询语句快一点。</p>
<p>方法 7:利用 MySQL 支持 ORDER 操作可以利用索引快速定位部分元组,避免全表扫描<br>比如: 读第 1000 到 1019 行元组(pk 是主键/唯一键)。<br>代码如下:<br><code>SELECT \* FROM your_table WHERE pk&gt;=1000 ORDER BY pk ASC LIMIT 0,20</code></p>
<h2 id="插入表情"><a href="#插入表情" class="headerlink" title="插入表情"></a>插入表情</h2><ol>
<li>MySQL 的版本<br><code>utf8mb4</code> 的最低 mysql 版本支持版本为 <code>5.5.3+</code>，若不是，请升级到较新版本。</li>
<li>MySQL 驱动<br><code>5.1.34</code> 可用,最低不能低于 <code>5.1.13</code></li>
<li>修改 MySQL 配置文件<br>修改 mysql 配置文件 <code>my.cnf</code>，<code>my.cnf</code> 一般在 <code>etc/mysql/my.cnf</code> 位置。找到后请在以下三部分里添加如下内容：</li>
</ol>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="attr">default-character-set</span> = utf8mb4</span><br><span class="line"></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span> = utf8mb4</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-client-handshake</span> = <span class="literal">FALSE</span></span><br><span class="line"><span class="attr">character-set-server</span> = utf8mb4</span><br><span class="line"><span class="attr">collation-server</span> = utf8mb4_unicode_ci</span><br><span class="line"><span class="attr">init_connect</span>=<span class="string">&#x27;SET NAMES utf8mb4&#x27;</span></span><br></pre></td></tr></table></figure>

<p>重启 mysql:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">一、MySQL启动方式</span><br><span class="line">1、使用 service 启动：service mysqld start</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld start</span><br><span class="line">3、使用 safe_mysqld 启动：safe_mysqld&amp;</span><br><span class="line">二、MySQL停止</span><br><span class="line">1、使用 service 启动： service mysqld stop</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld stop</span><br><span class="line">3、mysqladmin shutdown</span><br><span class="line">三、MySQL重启</span><br><span class="line">1、使用 service 启动：service mysqld restart</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld restart</span><br><span class="line">四、强制关闭</span><br><span class="line">以上方法都无效的时候，可以通过强行命令：“killall mysql”来关闭MySQL，但是不建议用这样的方式，</span><br><span class="line">据库服务，有可能导致表损坏……所以自己掂量着用。</span><br><span class="line">Windows下重启MySQL服务,对于没装mysql图形管理端的用户来说启动和停止mysql服务：</span><br><span class="line">…\…\bin&gt;net stop mysql</span><br><span class="line">…\…\bin&gt;net start mysql</span><br></pre></td></tr></table></figure>

<p>当数据库中涉及编码类型改变的时候，需要统一数据库，表，字段的编码类型，少一个都不行。<br>修改数据库字符集：<br><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;</code><br>修改表的字符集：<br><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code><br>修改字段的字符集：<br><code>ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code> 4. 查看是否成功修改<br>使用<code>SHOW VARIABLES WHERE Variable_name LIKE &#39;character_set_%&#39; OR Variable_name LIKE &#39;collation%&#39;;</code>查看当前编码,结果中的 <code>collation_connection</code> 、<code>collation_database</code> 、<code>collation_server</code> 是什么没关系。但必须保证系统变量 描述</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">character_set_client (客户端来源数据使用的字符集)</span><br><span class="line">character_set_connection (连接层字符集)</span><br><span class="line">character_set_database (当前选中数据库的默认字符集)</span><br><span class="line">character_set_results (查询结果字符集)</span><br><span class="line">character_set_server (默认的内部操作字符集)</span><br></pre></td></tr></table></figure>

<p>这几个变量必须是 utf8mb4,才能插入表情。<br>查看表编码<br><code>mysql&gt; show create table dictionary; # dictionary 是表名</code> 5. 数据库连接的配置<br>数据库连接参数中也要设置为 utf8bm4 格式，否则是无法插入的 <code>charset=utf8mb4</code></p>
<h2 id="数据库备份与还原"><a href="#数据库备份与还原" class="headerlink" title="数据库备份与还原"></a>数据库备份与还原</h2><ol>
<li><p>备份原文件<br>MySQL 中的每一个数据库和数据表分别对应文件系统中的目录和其下的文件。在 Linux 下数据库文件的存放目录一般为/var/lib/mysql。在 Windows 下这个目录视 MySQL 的安装路径而定。备份文件前，需要将 MySQL 服务停止，然后将数据库目录拷贝即可。恢复数据数据库时，需要先创建好一个数据库(不一定同名)，然后将备份出来的文件(注意，不是目录)复制到对应的 MySQL 数据库目录中。使用这一方法备份和恢复数据库时，需要新旧的 MySQL 版本一致，否则可能会出现错误。</p>
</li>
<li><p>使用命令</p>
</li>
</ol>
<p>备份数据库(不需要进入 mysql)：<br><code>mysqldump –user=root –password=root密码 –lock-all-tables 数据库名 &gt; 备份文件.sql</code><br>恢复数据库：<br><code>mysql -u root –password=root密码 数据库名 &lt; 备份文件.sql</code></p>
<h2 id="nodejs-连接数据库"><a href="#nodejs-连接数据库" class="headerlink" title="nodejs 连接数据库"></a>nodejs 连接数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">client does <span class="keyword">not</span> support authentication protocol requested <span class="keyword">by</span> server</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>出现连接失败的原因mysql8之前的版本中加密规则是mysql_native_password,而在mysql8之后,加密规则是caching_sha2_password。并提供了两种解决方案</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>把用户密码登录的加密规则还原成mysql_native_password这种加密方式</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span> PASSWORD EXPIRE NEVER;这里的password是你正在使用的密码</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/11/12/20-23-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/12/20-23-33/" class="post-title-link" itemprop="url">element UI</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-12 20:23:33" itemprop="dateCreated datePublished" datetime="2021-11-12T20:23:33+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="element-的表单校验输入框有值但校验未通过"><a href="#element-的表单校验输入框有值但校验未通过" class="headerlink" title="element 的表单校验输入框有值但校验未通过"></a>element 的表单校验输入框有值但校验未通过</h2><ul>
<li><p><code>:model=&quot;ruleForm&quot;</code> 绑定的<code>ruleForm</code>值是否挂载成功并且操作的是否是这个表单。</p>
</li>
<li><p><code>:rules=&quot;rules&quot;</code> 校验的规则格式绑定的<code>rules</code>是否定义并且格式正确为对象数组。</p>
</li>
<li><p><code>el-form-item中的</code>prop=”name”<code>是否和rules中的</code>name: [ { required: true, message: ‘请输入活动名称’, trigger: ‘blur’ }, ], <code>的名称一致，两个</code>name`相同的，element 的校验就是根据这个 prop 找对应的输入框的。</p>
</li>
<li><p><code>&lt;el-input v-model=&quot;ruleForm.name&quot;&gt;&lt;/el-input&gt;</code> 的<code>v-model=&quot;ruleForm.name&quot;</code>确保对象<code>ruleForm</code>中有<code>name</code>这个属性！</p>
</li>
</ul>
<h2 id="el-table-格式化-el-table-column-内容"><a href="#el-table-格式化-el-table-column-内容" class="headerlink" title="el-table 格式化 el-table-column 内容"></a>el-table 格式化 el-table-column 内容</h2><ul>
<li>v-if 判断</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;scope.row.xxxx == 0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用 formatter 属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">  <span class="attr">prop</span>=<span class="string">&quot;xxx&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:formatter</span>=<span class="string">&quot;function(row, column)&#123;xxxx&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ElementUI-的-el-table-默认内容不换行，让-el-table-column-根据占位符-n-换行"><a href="#ElementUI-的-el-table-默认内容不换行，让-el-table-column-根据占位符-n-换行" class="headerlink" title="ElementUI 的 el-table 默认内容不换行，让 el-table-column 根据占位符\n 换行"></a>ElementUI 的 el-table 默认内容不换行，让 el-table-column 根据占位符\n 换行</h2><p>添加 css 样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.el-table</span> &gt;&gt;&gt; <span class="selector-class">.cell</span> &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: pre-line;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="点击时获取列表的值，可通过给节点添加-data-自定义属性，通过点击事件-e-currentTarget-dataset-获取属性值"><a href="#点击时获取列表的值，可通过给节点添加-data-自定义属性，通过点击事件-e-currentTarget-dataset-获取属性值" class="headerlink" title="点击时获取列表的值，可通过给节点添加 data 自定义属性，通过点击事件 e.currentTarget.dataset 获取属性值"></a>点击时获取列表的值，可通过给节点添加 data 自定义属性，通过点击事件 e.currentTarget.dataset 获取属性值</h2><h2 id="element-获取-table-表格行数据，可通过-template-设置-slot-scope-“scope”属性，在传参时使用-scope-row-xxxx-拿到当前行的数据"><a href="#element-获取-table-表格行数据，可通过-template-设置-slot-scope-“scope”属性，在传参时使用-scope-row-xxxx-拿到当前行的数据" class="headerlink" title="element 获取 table 表格行数据，可通过 template 设置 slot-scope=“scope”属性，在传参时使用 scope.row.xxxx 拿到当前行的数据"></a>element 获取 table 表格行数据，可通过 template 设置 slot-scope=“scope”属性，在传参时使用 scope.row.xxxx 拿到当前行的数据</h2><h2 id="当只有⼀个-el-input-的时候，可以⽤-elementUI-的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在-el-form-上添加-submit-native-prevent-来解决"><a href="#当只有⼀个-el-input-的时候，可以⽤-elementUI-的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在-el-form-上添加-submit-native-prevent-来解决" class="headerlink" title="当只有⼀个 el-input 的时候，可以⽤ elementUI 的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在 el-form 上添加@submit.native.prevent 来解决"></a>当只有⼀个 el-input 的时候，可以⽤ elementUI 的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在 el-form 上添加@submit.native.prevent 来解决</h2><h2 id="element-el-input-的-autofocus-失效问题解决"><a href="#element-el-input-的-autofocus-失效问题解决" class="headerlink" title="element el-input 的 autofocus 失效问题解决"></a>element el-input 的 autofocus 失效问题解决</h2><blockquote>
<p>autofocus 是 input 的原生属性,饿了么组件也支持这种方法, 但是 input 外面还有其他组件, 导致 autofocus 失效, 只能手动调用 focus 方法:组件上绑定 ref，手动调用 focus()</p>
</blockquote>
<h2 id="elementUI-选择器-select-获取选中对象"><a href="#elementUI-选择器-select-获取选中对象" class="headerlink" title="elementUI 选择器 select 获取选中对象"></a>elementUI 选择器 select 获取选中对象</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 有些情况下需要获取选中对象的全部数据，添加 value-key=&quot;id&quot; ，value-key 为唯一性标识, 将 value 绑定为item --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;area&quot;</span> <span class="attr">value-key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择区域&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">&quot;item in areaLsit&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:label</span>=<span class="string">&quot;item.areaName&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue-css-gt-gt-gt-deep-穿透，深度查询样式在-chrome89-edge-新版本中无效问题"><a href="#vue-css-gt-gt-gt-deep-穿透，深度查询样式在-chrome89-edge-新版本中无效问题" class="headerlink" title="vue css &gt;&gt;&gt; /deep/穿透，深度查询样式在 chrome89 edge 新版本中无效问题"></a>vue css &gt;&gt;&gt; /deep/穿透，深度查询样式在 chrome89 edge 新版本中无效问题</h2><p>大概理解应该是<code>/deep/</code>基本上无效了，直接替换成“”空格，或者<code>&gt;&gt;&gt;</code>代替处理；</p>
<p>于是，在项目中全局替换<code>/deep/</code>为空格，但是部分页面会有错乱问题，于是将替换为空格后，仍然无效的样式部分，添加<code>&gt;&gt;&gt;</code>,居然可以了，但是对于 Sass Less 之类的预处理器是无法正确解析 <code>&gt;&gt;&gt;</code>的，所以要保证样式是 css 文件；</p>
<p>还有一点要强调，<code>&gt;&gt;&gt;</code>在 html 单页面下貌似无效，在 vue 项目中有效；</p>
<p>项目问题基本解决后，做一下汇总的情况下，上网查看关于样式穿透，发现除了<code>&gt;&gt;&gt;</code>、<code>/deep/</code>外，还有一个<code>::v-deep</code>，写法如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  /用法<span class="number">1</span>/ <span class="selector-class">.a</span> &#123;</span></span><br><span class="line"><span class="css">    ::v-deep .b &#123;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  /用法<span class="number">2</span>/ <span class="selector-class">.a</span> ::v-deep .b &#123;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/08/22/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/22/20-22-11/" class="post-title-link" itemprop="url">VScode</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-22 20:22:11" itemprop="dateCreated datePublished" datetime="2021-08-22T20:22:11+08:00">2021-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index"><span itemprop="name">tool</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h1><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><h3 id="VScode-关闭右侧预览功能"><a href="#VScode-关闭右侧预览功能" class="headerlink" title="VScode 关闭右侧预览功能"></a>VScode 关闭右侧预览功能</h3><p>在设置中搜索”editor.minimap.enabled”把勾去掉</p>
<h3 id="修改-vscode-配置文件改字体大小"><a href="#修改-vscode-配置文件改字体大小" class="headerlink" title="修改 vscode 配置文件改字体大小"></a>修改 vscode 配置文件改字体大小</h3><p>打开 VSCode 安装目录下的如下文件<code>VSCode\resources\app\out\vs\workbench\workbench.desktop.main.css</code> 查找 <code>.part&gt;.content</code> 修改字体大小即可</p>
<h3 id="vim-插件设置"><a href="#vim-插件设置" class="headerlink" title="vim 插件设置"></a>vim 插件设置</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">//vim 前导键</span></span><br><span class="line">  <span class="attr">&quot;vim.leader&quot;</span>: <span class="string">&quot;&lt;space&gt;&quot;</span>,</span><br><span class="line">  <span class="comment">//启用系统剪切板作为vim寄存器</span></span><br><span class="line">  <span class="attr">&quot;vim.useSystemClipboard&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//将按钮交给vscode处理</span></span><br><span class="line">  <span class="attr">&quot;vim.handleKeys&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;&lt;C-f&gt;&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自动保存"><a href="#自动保存" class="headerlink" title="自动保存"></a>自动保存</h3><p>打开 vscode 窗口，单击左下角的设置(齿轮状)图标<br>在设定按钮显示的菜单中，选择【Settings】选项。 这里是整个 vs 代码的设置入口<br>打开【settings】画面时，默认的【Auto Save】=【off】表示不自动保存，每次都需要用户自己手动保存</p>
<h4 id="【后延迟】"><a href="#【后延迟】" class="headerlink" title="【后延迟】"></a>【后延迟】</h4><ol>
<li>这是以一定的间隔自动保存的</li>
<li>该【自动保存】选项需要指定间隔时间，以匹配下一个【自动保存延迟】配置项目，单位为毫秒<br>【onFocusChange】</li>
<li>当焦点偏离编辑器当前窗口时自动保存</li>
<li>即，即使在编辑器内部切换标签，也会触发自动保存</li>
<li>本项目不需要【自动保存延迟】的设定值，此值也会被忽略</li>
</ol>
<h4 id="【onWindowChange】"><a href="#【onWindowChange】" class="headerlink" title="【onWindowChange】"></a>【onWindowChange】</h4><ol>
<li>编辑器窗口失去焦点时，自动保存</li>
<li>只有在焦点偏离整个编辑器时才会触发保存，在编辑器内部切换标签时不会自动保存</li>
<li>本项目不需要【自动保存延迟】的设定值，此值也会被忽略<br>在【Settings】画面中修正值后，不点击追加保存按钮，自动保存设定的内容。</li>
</ol>
<h2 id="vscode-好用的插件系列"><a href="#vscode-好用的插件系列" class="headerlink" title="vscode 好用的插件系列"></a>vscode 好用的插件系列</h2><h3 id="汉化插件"><a href="#汉化插件" class="headerlink" title="汉化插件"></a>汉化插件</h3><ul>
<li><code>Chinese (Simplified)</code></li>
</ul>
<h3 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h3><ul>
<li><code>Vim</code></li>
</ul>
<h3 id="git-相关插件"><a href="#git-相关插件" class="headerlink" title="git 相关插件"></a>git 相关插件</h3><ul>
<li><code>gitLens</code></li>
<li><code>Git History</code></li>
<li><code>Git History Diff</code></li>
<li><code>Git Blanme</code></li>
</ul>
<h3 id="格式化类插件"><a href="#格式化类插件" class="headerlink" title="格式化类插件"></a>格式化类插件</h3><ul>
<li><code>Prettier - Code formatter</code></li>
<li><code>Vetur</code>、</li>
</ul>
<h3 id="规范检查"><a href="#规范检查" class="headerlink" title="规范检查"></a>规范检查</h3><ul>
<li><code>ESLint</code></li>
<li><code>Stylelint</code></li>
<li><code>TSLint（已废弃）</code></li>
</ul>
<h3 id="标签自动化三剑客"><a href="#标签自动化三剑客" class="headerlink" title="标签自动化三剑客"></a>标签自动化三剑客</h3><ul>
<li><code>Auto Rename Tag</code></li>
<li><code>Auto Import</code></li>
<li><code>Auto Close Tag</code>：最新 vscode 已支持</li>
</ul>
<h3 id="css-模块跳转"><a href="#css-模块跳转" class="headerlink" title="css 模块跳转"></a>css 模块跳转</h3><ul>
<li><code>CSS Modules</code></li>
</ul>
<h3 id="语言支持"><a href="#语言支持" class="headerlink" title="语言支持"></a>语言支持</h3><ul>
<li><code>HTML CSS Support</code></li>
</ul>
<h3 id="代码片段提示"><a href="#代码片段提示" class="headerlink" title="代码片段提示"></a>代码片段提示</h3><ul>
<li><code>ES7+ React/Redux/React-Native snippets</code></li>
<li><code>JavaScript (ES6) code snippets</code></li>
<li><code>Simple React Snippets</code></li>
<li><code>Vue 3 Snippets for Visual Studio Code</code></li>
<li><code>node-snippets</code></li>
</ul>
<h3 id="Markdown-插件"><a href="#Markdown-插件" class="headerlink" title="Markdown 插件"></a>Markdown 插件</h3><ul>
<li><code>Markdown Preview Enhanced</code></li>
<li><code>Markdown All in One</code></li>
<li><code>markdownlint</code></li>
</ul>
<h3 id="单词拼写"><a href="#单词拼写" class="headerlink" title="单词拼写"></a>单词拼写</h3><ul>
<li><code>Code Spell Checker</code></li>
</ul>
<h3 id="浏览器打开"><a href="#浏览器打开" class="headerlink" title="浏览器打开"></a>浏览器打开</h3><ul>
<li><code>open in browser</code></li>
<li><code>live Server</code></li>
</ul>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><ul>
<li><code>GitHub Theme</code></li>
</ul>
<h3 id="图片预览"><a href="#图片预览" class="headerlink" title="图片预览"></a>图片预览</h3><ul>
<li><code>Image Preview</code></li>
</ul>
<h3 id="快速生成注释"><a href="#快速生成注释" class="headerlink" title="快速生成注释"></a>快速生成注释</h3><ul>
<li><code>koroFileHeader</code></li>
</ul>
<h3 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h3><ul>
<li><code>code-translate</code></li>
</ul>
<h3 id="路径提示"><a href="#路径提示" class="headerlink" title="路径提示"></a>路径提示</h3><ul>
<li><code>Path Intellisense</code>：最新 vscode 已支持</li>
</ul>
<h3 id="npm-模块导入智能提示"><a href="#npm-模块导入智能提示" class="headerlink" title="npm 模块导入智能提示"></a>npm 模块导入智能提示</h3><ul>
<li><code>npm Intellisense</code></li>
</ul>
<h3 id="接口请求"><a href="#接口请求" class="headerlink" title="接口请求"></a>接口请求</h3><ul>
<li><code>REST Client</code></li>
</ul>
<h3 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h3><ul>
<li><code>Remote-SSH</code></li>
<li><code>Visual Studio Code Remote - SSH: Editing Configuration Files</code></li>
<li><code>Remote Explorer</code></li>
</ul>
<h3 id="错误显示"><a href="#错误显示" class="headerlink" title="错误显示"></a>错误显示</h3><ul>
<li><code>Error Lens</code></li>
</ul>
<h2 id="自定义代码片段"><a href="#自定义代码片段" class="headerlink" title="自定义代码片段"></a>自定义代码片段</h2><p>文件-&gt;首选项-&gt;配置用户代码片段</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// Place your 全局 snippets here. Each snippet is defined under a snippet name and has a scope, prefix, body and</span></span><br><span class="line">  <span class="comment">// description. Add comma separated ids of the languages where the snippet is applicable in the scope field. If scope</span></span><br><span class="line">  <span class="comment">// is left empty or omitted, the snippet gets applied to all languages. The prefix is what is</span></span><br><span class="line">  <span class="comment">// used to trigger the snippet and the body will be expanded and inserted. Possible variables are:</span></span><br><span class="line">  <span class="comment">// $1, $2 for tab stops, $0 for the final cursor position, and $&#123;1:label&#125;, $&#123;2:another&#125; for placeholders.</span></span><br><span class="line">  <span class="comment">// Placeholders with the same ids are connected.</span></span><br><span class="line">  <span class="comment">// Example:</span></span><br><span class="line">  <span class="comment">// &quot;Print to console&quot;: &#123;</span></span><br><span class="line">  <span class="comment">// 	&quot;scope&quot;: &quot;javascript,typescript&quot;,</span></span><br><span class="line">  <span class="comment">// 	&quot;prefix&quot;: &quot;log&quot;,</span></span><br><span class="line">  <span class="comment">// 	&quot;body&quot;: [</span></span><br><span class="line">  <span class="comment">// 		&quot;console.log(&#x27;$1&#x27;);&quot;,</span></span><br><span class="line">  <span class="comment">// 		&quot;$2&quot;</span></span><br><span class="line">  <span class="comment">// 	],</span></span><br><span class="line">  <span class="comment">// 	&quot;description&quot;: &quot;Log output to console&quot;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">//js</span></span><br><span class="line">  <span class="attr">&quot;Print to console&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;clg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;console.log(&#x27;kkk===$2==&gt;&#x27;,$1);&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Log output to console&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;set interval&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;sti&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;const t=setInterval(() =&gt; &#123;$2 clearInterval(t);&#125;,$1);&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;set interval&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;set timeout&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;sto&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;const t=setTimeout(() =&gt; &#123;$2 clearTimeout(t);&#125;,$1);&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;set timeout&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;commentBigBlock&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;cmmb&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;/** $&#123;1:first&#125; */&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;typescript,typescriptreact,javascript,javascriptreact,css,less,sass,vue,html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//import .....</span></span><br><span class="line">  <span class="attr">&quot;import&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;imp&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;import $&#123;2:second&#125; from &#x27;$&#123;1:first&#125;&#x27;;&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;importDestructing&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;imd&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;import &#123; $&#123;2:second&#125; &#125; from &#x27;$&#123;1:first&#125;&#x27;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;importEverything&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;ime&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;import * as $&#123;2:second&#125; from &#x27;$&#123;1:first&#125;&#x27;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;importNoModuleName&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;imn&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;import &#x27;$&#123;1:first&#125;&#x27;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;require package&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;javascript,typescript,typescriptreact,javascriptreact,vue,html&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;req&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;const $&#123;2:second&#125; = require(&#x27;$&#123;1:first&#125;&#x27;);&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//react</span></span><br><span class="line">  <span class="attr">&quot;reactFunctionalComponent&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;rfc&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;import React,&#123;useEffect,useState,useRef&#125; from &#x27;react&#x27;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="string">&quot; const $&#123;1:$&#123;TM_FILENAME_BASE&#125;&#125;: React.FC = () =&gt; &#123;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  return (&quot;</span>,</span><br><span class="line">      <span class="string">&quot;    &lt;&gt;$&#123;1:first&#125;&lt;/&gt;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;  )&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&#125;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;export default $&#123;1:$&#123;TM_FILENAME_BASE&#125;&#125;;&quot;</span>,</span><br><span class="line">      <span class="string">&quot;&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Creates a React Functional Component with ES7 module system&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;typescript,typescriptreact,javascript,javascriptreact&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;useEffect Hook&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;uef&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;&quot;</span>, <span class="string">&quot;useEffect(() =&gt; &#123;&quot;</span>, <span class="string">&quot;  $&#123;1:first&#125;&quot;</span>, <span class="string">&quot;&#125;, []);&quot;</span>, <span class="string">&quot;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;typescript,typescriptreact,javascript,javascriptreact&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;useCallback Hook&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;ucb&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;&quot;</span>, <span class="string">&quot;useCallback(() =&gt; &#123;&quot;</span>, <span class="string">&quot;  $&#123;1:first&#125;&quot;</span>, <span class="string">&quot;&#125;, []);&quot;</span>, <span class="string">&quot;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;typescript,typescriptreact,javascript,javascriptreact&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;State Hook&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prefix&quot;</span>: <span class="string">&quot;ust&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: [<span class="string">&quot;const [$&#123;2:second&#125;,set$&#123;2:second&#125;] = useState($&#123;1:first&#125;);&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;typescript,typescriptreact,javascript,javascriptreact&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/06/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/12/20-11-33/" class="post-title-link" itemprop="url">NodeJs</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-06-12T20:11:33+08:00">2021-06-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NodeJs"><a href="#NodeJs" class="headerlink" title="NodeJs"></a>NodeJs</h1><h2 id="Node-js-模块化开发"><a href="#Node-js-模块化开发" class="headerlink" title="Node.js 模块化开发"></a>Node.js 模块化开发</h2><p>Node.js 规定一个 Javascript 文件就是一个模块，模块内部定义的变量和函数默认情况下外部无法得到。<br>模块内部可以使用 exports 对象进行成员导出，使用 require 方法导入其他模块。</p>
<h3 id="模块成员导出"><a href="#模块成员导出" class="headerlink" title="模块成员导出"></a>模块成员导出</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="comment">//在模块中定义变量</span></span><br><span class="line"><span class="keyword">let</span> version = <span class="number">1.0</span>;</span><br><span class="line"><span class="comment">//模块中定义方法</span></span><br><span class="line"><span class="keyword">const</span> sayHi = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`hello！<span class="subst">$&#123;name&#125;</span>`</span>; <span class="comment">//es6新语法</span></span><br><span class="line"><span class="comment">//向模块外部导出数据</span></span><br><span class="line"><span class="built_in">exports</span>.version = version;</span><br><span class="line"><span class="built_in">exports</span>.sayHi = sayHi;</span><br></pre></td></tr></table></figure>

<h3 id="模块成员的导入"><a href="#模块成员的导入" class="headerlink" title="模块成员的导入"></a>模块成员的导入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="comment">//在b.js模块中导入模块a</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">require</span>(<span class="string">&quot;./b.js&quot;</span>);</span><br><span class="line"><span class="comment">//输出b模块中的version变量</span></span><br><span class="line"><span class="built_in">console</span>.log(a.version);</span><br><span class="line"><span class="comment">//调用b模块中的sayHi方法</span></span><br><span class="line"><span class="built_in">console</span>.log(a.sayHi(<span class="string">&quot;XiaoMing&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>模块成员导出的另一种方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.version = version;</span><br><span class="line"><span class="built_in">module</span>.exports.sayHi = sayHi;</span><br></pre></td></tr></table></figure>

<p>exports 是 module.exports 的别名，导出对象最终以 module.exports 为准；</p>
<h2 id="package-json-文件的作用"><a href="#package-json-文件的作用" class="headerlink" title="package.json 文件的作用"></a>package.json 文件的作用</h2><p>项目描述文件，记录了当前项目信息。如：项目版本、作者、依赖的模块等等；使用<code>npm init -y</code>生成。其作用为（一）锁定包的版本，确保再次下载时不会因为包版本不同而产生问题。（二）加快下载速度，其记录着依赖的下载地址。</p>
<ul>
<li>开发依赖</li>
</ul>
<p>在项目开发阶段所需要的依赖，线上运营阶段不需要依赖的第三方包,称为开发依赖；可使用<code>npm install 包名 --save-dev</code>将包添加到 package.json 文件的 devDependencies 字段中</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span>: <span class="string">&quot;^3.9.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Node-js-中模块的加载机制"><a href="#Node-js-中模块的加载机制" class="headerlink" title="Node.js 中模块的加载机制"></a>Node.js 中模块的加载机制</h2><p>模块查找规则</p>
<ul>
<li>当模块有路径没后缀时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;./find.js);</span><br><span class="line">require(&#x27;./find&#x27;);</span><br></pre></td></tr></table></figure>

<ol>
<li>require 方法根据路径查找模块</li>
<li>如果模块后缀省略，则先找同名 JS 文件再找同名 JS 文件夹</li>
<li>如果找到同名文件夹，则继续寻找其中的 index.js 文件</li>
<li>如果没有 index.js 文件，就会去当前文件夹中的 package.js 文件中查找 main 选项中的入口文件</li>
<li>如果入口文件不存在或没有指定入口文件，则报错：模块未找到</li>
</ol>
<ul>
<li>当模块即没路径也没后缀时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&quot;find&quot;);</span><br></pre></td></tr></table></figure>

<ol>
<li>Node.js 会假设它是系统模块，会去 node_modules 文件中寻找</li>
<li>先查看是否有同名 js 文件</li>
<li>在看有没有同名文件夹</li>
<li>若有，则继续寻找其中的 index.js 文件</li>
<li>如没有，则查看该文件夹中的 package.json 中的 main 选项确定模块的入口文件</li>
<li>若都没有，则报错</li>
</ol>
<h2 id="系统模块-Node-运行环境提供的-API"><a href="#系统模块-Node-运行环境提供的-API" class="headerlink" title="系统模块:Node 运行环境提供的 API"></a>系统模块:Node 运行环境提供的 API</h2><h3 id="fs-文件操作"><a href="#fs-文件操作" class="headerlink" title="fs 文件操作"></a>fs 文件操作</h3><p><code>const fs=require(&#39;fs&#39;);</code></p>
<p>读取文件内容:<code>fs.readFile(&#39;文件路径/文件名&#39;[,&#39;文件编码&#39;],callback);</code>(括号内为可选项)</p>
<p>实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取上一级css目录下的base.css</span></span><br><span class="line">fs.readFile(<span class="string">&quot;../css/base.css&quot;</span>, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, doc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//如果读取错误参数err的值为错误对象，否则err的值为null</span></span><br><span class="line">  <span class="comment">//doc参数为文件内容</span></span><br><span class="line">  <span class="keyword">if</span> (err == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">//控制台中输出文件内容</span></span><br><span class="line">    <span class="built_in">console</span>.log(doc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>写入文件内容：`fs.writeFile(‘文件路径/文件名称’,’数据’,callback);</p>
<p>实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> conetent = <span class="string">&quot;&lt;h3&gt;!!!!!!!!!!&lt;/h3&gt;&quot;</span>;</span><br><span class="line">fs.writeFile(<span class="string">&quot;../index.html&quot;</span>, content, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;文件写入成功&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fs.stat(file, <span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;&#125;) <span class="comment">//查询文件状态（data.isFile()–判断是否是文件，isDirectory()–判断是否是文件夹）</span></span><br><span class="line">fs.mkdir(fileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">// 创建文件夹 （fileName–文件夹名称，重复会报错，例如：’./test‘），注意：此方法不能连续创建文件夹，例如：/test/one/two</span></span><br><span class="line">fs.readdir(fileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">//读取文件夹，返回文件夹的所有直系子文件名称，移动文件位置等</span></span><br><span class="line">fs.rename(newFileName,oldFileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">//修改文件夹、文件的名称</span></span><br><span class="line">fs.writeFile(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 创建文件 （file—应路径下的文件,包括文件名，例如：’./test/test.txt‘ ，如文件已存在，会覆盖原文件内容）</span></span><br><span class="line">fs.appendFile(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 追加文件内容，会在文件内容末尾追加（若文件不存在，回先自动创建，类似于writeFile）</span></span><br><span class="line">fs.readFile(file,’utf-<span class="number">8</span>‘，(err,data)=&gt;&#123;&#125;)<span class="comment">// 读取文件内容，不设置格式，会返回Buffer数据，需要设置格式，例如utf-8，或者通过data.toString()进行转化</span></span><br><span class="line">fs.unlink(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 删除文件</span></span><br><span class="line">fs.rmdir(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;) <span class="comment">//删除文件夹，若文件夹下有文件，会报错，只能删除空文件夹</span></span><br><span class="line"><span class="comment">//注：若要连续创建文件夹，可以下载mkdirp模块包，mkdirp(&#x27;./one/two/three&#x27;) 既可以创建连续目录。（目前测试不支持创建文件，写入内容，npm地址:https://www.npmjs.com/package/mkdirp）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="fs-流操作"><a href="#fs-流操作" class="headerlink" title="fs 流操作"></a>fs 流操作</h3><ul>
<li>写入流 createWriteStream</li>
<li>读取流 createReadStream</li>
<li>管道流 pipe</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">writeStr: <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 需要先创建流</span></span><br><span class="line">  <span class="keyword">const</span> writeStream = fs.createWriteStream(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line">  writeStream.write(str); <span class="comment">// str为写入内容</span></span><br><span class="line">  writeStream.end(); <span class="comment">// 此句必须写，不然无法触发下面的finish事件</span></span><br><span class="line">  writeStream.on(<span class="string">&quot;finish&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;写入完成&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------------------------------------/-------/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> readStream = fs.createReadStream(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(readStream);</span><br><span class="line">readStream.on(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  str += data;</span><br><span class="line">  count++;</span><br><span class="line">&#125;);</span><br><span class="line">readStream.on(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(str, <span class="string">&quot;str----&quot;</span>, count);</span><br><span class="line">&#125;);</span><br><span class="line">readStream.on(<span class="string">&quot;err&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err, <span class="string">&quot;err----&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------------------------------------/-------/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> readStream = fs.createReadStream(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> writeStream = fs.createWriteStream(<span class="string">&quot;./one.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 将读取的test文件内容，写入到one，one如有内容，会被覆盖</span></span><br><span class="line">readStream.pipe(writeStream);</span><br></pre></td></tr></table></figure>

<h3 id="路径拼接"><a href="#路径拼接" class="headerlink" title="路径拼接"></a>路径拼接</h3><p><code>path.join(&#39;路径&#39;,&#39;路径&#39;,..);</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入path模块</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//路径拼接</span></span><br><span class="line"><span class="keyword">let</span> finialPath=path.join(<span class="string">&#x27;itcast&#x27;</span>,<span class="string">&#x27;a,&#x27;</span>css<span class="string">&#x27;,&#x27;</span>test.css<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">//输出</span></span><br><span class="line"><span class="string">console.log(finialPath);</span></span><br><span class="line"><span class="string">//用__dirname获取当前文件的绝对路径</span></span><br><span class="line"><span class="string">const fs=require(&#x27;</span>fs<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">fs.readFile(path.join(__dirname,&#x27;</span>test.css<span class="string">&#x27;),&#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;,(err,doc)=&gt;&#123;</span></span><br><span class="line"><span class="string">console.log(err);</span></span><br><span class="line"><span class="string">console.log(doc);</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure>

<h2 id="第三方模块"><a href="#第三方模块" class="headerlink" title="第三方模块"></a>第三方模块</h2><p>npm(node package manager):node 的第三方模块管理工具</p>
<ul>
<li>下载：<code>npm install 模块名</code></li>
<li>卸载：<code>npm uninstall package 模块名</code></li>
</ul>
<p>全局安装和本地安装：一般命令行工具全局安装，库文件本地安装</p>
<h3 id="第三方模块-mine"><a href="#第三方模块-mine" class="headerlink" title="第三方模块 mine"></a>第三方模块 mine</h3><p>其中 mine.getType(路径);可根据路径返回请求的文件类型;可用于 res.writeHead(200,{‘content-type’:’text/css;charset=utf8’})</p>
<h3 id="第三方模块-art-template-模板引擎"><a href="#第三方模块-art-template-模板引擎" class="headerlink" title="第三方模块 art-template 模板引擎"></a>第三方模块 art-template 模板引擎</h3><ol>
<li><p>下载：<code>npm install art-template</code></p>
</li>
<li><p>引入：<code>const template = require(&#39;art-template&#39;);</code></p>
</li>
<li><p>告诉模板引擎要拼接的数据和模板地址:<code>const html=template(&#39;模板数据&#39;,数据);</code></p>
</li>
</ol>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入模块</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"><span class="comment">//拼接</span></span><br><span class="line"><span class="keyword">const</span> html=template(<span class="string">&#x27;./index.art&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;xioaming&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>: <span class="number">29</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.art</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;data.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;data.age&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>模板语法</p>
<ul>
<li><p>数据输出<br>标准语法：<code>&#123;&#123;数据&#125;&#125;</code><br>原始语法：<code>&lt;%=数据%&gt;</code></p>
</li>
<li><p>原文输出：数据中带有 HTML 标签，默认情况下模板引擎不会解析标签,会转义后输出,若要解析则<br>标准语法：<code>&#123;&#123;@数据&#125;&#125;</code><br>原始语法：<code>&lt;%-数据%&gt;</code></p>
</li>
<li><p>条件判断<br>标准语法：<code>&#123;&#123;if 条件&#125;&#125;....&#123;&#123;else if 条件&#125;&#125;....&#123;&#123;/if&#125;&#125;</code><br>原始语法：<code>&lt;%if (条件) &#123;%>....<%&#125; else if(条件) &#123;%>....<%&#125;  %&gt;</code></p>
</li>
<li><p>循环<br>标准语法：<code>&#123;&#123;each 数据&#125;&#125; &#123;&#123;$index&#125;&#125; &#123;&#123;$value&#125;&#125;  &#123;&#123;/each&#125;&#125;</code><br>原始语法：<code>&lt;% for() &#123;%> ....<%&#125; %&gt;</code></p>
</li>
</ul>
</li>
<li><p>子模板</p>
</li>
</ul>
<p>将网站的公共区域（头部、页脚）抽离到单独文件中<br>标准语法：<code>&#123;include &#39;模板路径/footer.art&#39;&#125;</code><br>原始语法：<code>&lt;%include(&#39;模板路径&#39;)%&gt;</code></p>
<ul>
<li>模板继承</li>
</ul>
<p>将网站 HTML 骨架抽离到单独文件中，其他页面模板可以继承</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">!&lt;DOCTYPE HTML&gt;</span><br><span class="line">  &lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">      &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">      &lt;title&gt;骨架模板&lt;/title&gt;</span><br><span class="line">      &#123;&#123;block &#x27;head&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">      &#123;&#123;block &#x27;content&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">      &lt;!--预留位置--&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">  &lt;/html&gt;&lt;/DOCTYPE</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>模板继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;extend <span class="string">&#x27;./test.art&#x27;</span>&#125;&#125;</span><br><span class="line">&#123;&#123;block <span class="string">&#x27;head&#x27;</span>&#125;&#125; &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;test.css&quot;</span>&gt; &#123;&#123;/block&#125;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>模板配置</p>
<ol>
<li>向模板中导入变量<code>template.default.imports.变量名=变量值(第三方模板的方法);</code> 在模板 test.art 中使用<code>&#123;&#123;dateFormat(time,'yyyy-mm-dd')&#125;&#125;</code></li>
<li>设置模板根目录<code>template.defaults.root=模板目录</code></li>
<li>设置模板默认后缀<code>template.defaults.extname=&#39;.art&#39;</code></li>
</ol>
</li>
</ul>
<h3 id="第三方模块-router"><a href="#第三方模块-router" class="headerlink" title="第三方模块 router"></a>第三方模块 router</h3><p>功能：实现路由<br>使用步骤：获取路由对象；调用路由对象提供的方法创建路由；启用路由；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getRouter = <span class="built_in">require</span>(<span class="string">&quot;router&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> router = getRounter();</span><br><span class="line">router.get(<span class="string">&quot;/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.end(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">server.on(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  router(req, res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-serve-static"><a href="#第三方模块-serve-static" class="headerlink" title="第三方模块 serve-static"></a>第三方模块 serve-static</h3><p>功能：静态资源访问服务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> serverStatic = <span class="built_in">require</span>(<span class="string">&quot;serve-static&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> serve = serverStatic(<span class="string">&quot;./pulic&quot;</span>);</span><br><span class="line">serve.on(<span class="string">&quot;request&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  serve(req, res);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-Express-框架"><a href="#第三方模块-Express-框架" class="headerlink" title="第三方模块 Express 框架"></a>第三方模块 Express 框架</h3><p>基于 node 平台的 web 应用开发框架，可使用<code>npm install express</code>下载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用框架</span></span><br><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建网站服务器</span></span><br><span class="line"><span class="keyword">const</span> app=express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//当客户端以get方式访问/时</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req.res</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//获取get参数</span></span><br><span class="line"><span class="built_in">console</span>.log(req.query);</span><br><span class="line"><span class="comment">//响应:sen方法会自动设置http状态码，响应头部,类型</span></span><br><span class="line">res.send(<span class="string">&#x27;hello!!!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//当客户端以post方式访问/add时</span></span><br><span class="line">app.post(<span class="string">&#x27;/add&#x27;</span>,<span class="function">(<span class="params">req.res</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//获取post参数：需要第三方模块body-parser</span></span><br><span class="line"><span class="built_in">console</span>.log(req.body);</span><br><span class="line">res.send(<span class="string">&#x27;hello!!!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;server is runningn ...&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>第三方模块 body-parser</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&quot;body-parser&quot;</span>);</span><br><span class="line"><span class="comment">//配置body-parser模块</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extender</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"><span class="comment">//接收请求</span></span><br><span class="line">app.post(<span class="string">&quot;/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>构建模块化路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="comment">//创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> home = express.Router();</span><br><span class="line"><span class="comment">//将路由和请求路径进行匹配</span></span><br><span class="line">app.use(<span class="string">&quot;/home&quot;</span>, home);</span><br><span class="line"><span class="comment">//在home路由下继续创建路由</span></span><br><span class="line">home.get(<span class="string">&quot;/index&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 响应/home/index</span></span><br><span class="line">  res.send(<span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>参数路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务端</span></span><br><span class="line">app.get(<span class="string">&quot;/find/:id&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.params); <span class="comment">//&#123;id:124&#125;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端</span></span><br><span class="line">localhost: <span class="number">3000</span> / find / <span class="number">124</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>中间件:将客户端发来的请求进行拦截处理</li>
</ul>
<p>如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&quot;请求地址&quot;</span>, <span class="string">&quot;处理函数&quot;</span>);</span><br><span class="line">app.post(<span class="string">&quot;请求地址&quot;</span>, <span class="string">&quot;处理函数&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>针对一个请求可设置多个中间件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//next方法：该中间件处理后会将请求的控制权交给下一个中间件</span></span><br><span class="line">  req.name = <span class="string">&quot;xiaoming&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.name);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>app.use 中间件用法</li>
</ul>
<p>会匹配所有的请求方法,直接传入请求处理函数代表接收所有请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.url);</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>用于错误处理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&#x27;/index&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;程序发生未知错误&#x27;</span>); <span class="comment">//易出现错误的地方</span></span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> res.status(<span class="number">500</span>).send(err.message); <span class="comment">//只能用于处理同步代码错误</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//异步代码错误需要手动触发错误</span></span><br><span class="line">app.get(<span class="string">&#x27;/index&#x27;</span>,<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> fs.readFile(<span class="string">&#x27;./test.c&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(err)&#123;</span><br><span class="line"> next(err); <span class="comment">//易出现错误的地方</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;&#125;);</span><br><span class="line">app.use(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> res.status(<span class="number">500</span>).send(err.message); <span class="comment">//只能用于处理同步代码错误</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>静态资源的处理</li>
</ul>
<p>通过 express 内置的 express.static 托管静态文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">&quot;./pulic&quot;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>express 模板引擎</li>
</ul>
<p>在原 art-template 模板引擎的基础上进行封装:<code>npm install art-template express-art-template</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当渲染后缀为art的模板时，使用express-art-template</span></span><br><span class="line">app.engine(<span class="string">&quot;art&quot;</span>, <span class="built_in">require</span>(<span class="string">&quot;express-art-template&quot;</span>));</span><br><span class="line"><span class="comment">//设置模板存放目录</span></span><br><span class="line">app.set(<span class="string">&quot;views&quot;</span>, path.jon(__dirname, <span class="string">&quot;views&quot;</span>));</span><br><span class="line"><span class="comment">//渲染模板时不写后缀，默认拼接art后缀</span></span><br><span class="line">app.set(<span class="string">&quot;view engine&quot;</span>, <span class="string">&quot;art&quot;</span>);</span><br><span class="line"><span class="comment">//渲染模板</span></span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.render(<span class="string">&quot;index&quot;</span>, &#123; <span class="attr">mes</span>: <span class="string">&quot;模板数据&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>将变量设置到 app.locals 对象下，则所有的模板都可以获取到</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.locals.users = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//users是自定义的</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xiaomei&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-Gulp"><a href="#第三方模块-Gulp" class="headerlink" title="第三方模块 Gulp"></a>第三方模块 Gulp</h3><p>功能：项目上线，HTML、CSS、JS 文件压缩合并，语法转换（es6、less）</p>
<p>使用：</p>
<ul>
<li>使用<code>npm install gulp</code>下载 gulp 库文件</li>
<li>在项目根目录下建立 gulpfile.js 文件</li>
<li>重构项目的文件夹结构 src 目录放置源代码文件，dist 目录放置构建后文件</li>
<li>在 gulpfile.js 文件中编写任务</li>
<li>在命令行工具中执行 gulp 任务</li>
</ul>
<p>gulp 提供的方法：</p>
<ul>
<li>gulp.src():获取任务要处理的文件</li>
<li>gulp.dest():输出文件</li>
<li>gulp.task():建立 gulp 任务</li>
<li>gulp.watch():监控文件的变化</li>
</ul>
<p>gulp 插件：</p>
<ul>
<li>gulp-htmlminn: html 文件压缩</li>
<li>gulp-csso: css 文件压缩</li>
<li>gulp-babel: javascript 语法转化</li>
<li>gulp-less: less 语法转化</li>
<li>gulp-uglify: 压缩混淆 JavaScript</li>
<li>gulp-file-include:公共文件包含</li>
<li>browsersync:浏览器实时同步</li>
</ul>
<h2 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h2><p>超文本传输协议。规定了客户端（浏览器）与服务器（网站服务器）之间请求和应答的标准</p>
<ul>
<li>静态资源：服务器不需要处理，可以直接响应给客户端的资源，如：css，JavaScript，image 文件</li>
<li>动态资源：相同的请求地址，不同的响应资源</li>
</ul>
<h3 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h3><p>在 HTTP 请求和响应的过程中传递的数据块叫做报文</p>
<ul>
<li><p>请求报文</p>
<ol>
<li>请求方式：GET、POST</li>
<li>请求地址</li>
<li>请求参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.on(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  req.headers; <span class="comment">//请求报文</span></span><br><span class="line">  req.url; <span class="comment">//请求地址</span></span><br><span class="line">  req.method; <span class="comment">//请求方法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li><p>响应报文</p>
<ol>
<li>HTTP 状态码： 200(请求成功)、400(客户端请求语法有误)、404(请求的资源未找到)、500(服务器错误)、</li>
<li>内容类型：<ul>
<li>text/html</li>
<li>text/css</li>
<li>application/javascript</li>
<li>image/jpeg</li>
<li>application/json</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>指客户端请求地址,如：<code>http://localhost:8080/index</code>与服务端程序代码的对应关系，即请求什么响应什么；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.on(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//获取客户端的请求路径</span></span><br><span class="line">  <span class="keyword">let</span> &#123; pathname &#125; = url.parse(req.url);</span><br><span class="line">  <span class="comment">//或写成</span></span><br><span class="line">  <span class="comment">//let pathname=url.parse(req.url).pathname;</span></span><br><span class="line">  <span class="keyword">if</span> (pathname == <span class="string">&quot;/&quot;</span> || pathname == <span class="string">&quot;/index&quot;</span>) &#123;</span><br><span class="line">    res.end(<span class="string">&quot;欢迎来到首页&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.end(<span class="string">&quot;页面不存在&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="创建-web-服务器"><a href="#创建-web-服务器" class="headerlink" title="创建 web 服务器"></a>创建 web 服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用系统模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.createServer();</span><br><span class="line"><span class="comment">//当客户端发送请求的时候</span></span><br><span class="line">app.on(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//响应</span></span><br><span class="line"></span><br><span class="line">  res.end(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//返回状态码和返回资源类型,若无，低级浏览器可能出问题</span></span><br><span class="line"></span><br><span class="line">  res.writeHead(<span class="number">400</span>, &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=utf8&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Server is running....&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>完善：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用系统模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>); <span class="comment">//处理url地址模块</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&quot;querystring&quot;</span>); <span class="comment">//处理参数模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.createServer();</span><br><span class="line"></span><br><span class="line"><span class="comment">//当客户端发送请求的时候</span></span><br><span class="line">app.on(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//post参数是通过事件的方式接受的</span></span><br><span class="line">  <span class="comment">//data当请求参数传递的时候发出data事件</span></span><br><span class="line">  <span class="comment">//end当参数传递完成的时候时发出end事件</span></span><br><span class="line">  <span class="comment">//获取POST参数需要使用data事件和end事件；</span></span><br><span class="line">  <span class="keyword">let</span> postParams = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  req.on(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">    postParams += params; <span class="comment">//接收的数据不是一次性发完的</span></span><br><span class="line">  &#125;);</span><br><span class="line">  req.on(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(postParams);</span><br><span class="line">    <span class="built_in">console</span>.log(querystring.parse(postParams)); <span class="comment">//将参数转换为对象格式</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//响应</span></span><br><span class="line">  res.end(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//返回状态码和相关信息</span></span><br><span class="line"></span><br><span class="line">  res.writeHead(<span class="number">400</span>, &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=utf8&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//调用url模块方法parse();第一个参数为要处理的地址，第二个参数为是否处理为对象格式，true为是；</span></span><br><span class="line">  <span class="built_in">console</span>.log(url.parse(res.url, <span class="literal">true</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Server is running....&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Node-js-异步编程"><a href="#Node-js-异步编程" class="headerlink" title="Node.js 异步编程"></a>Node.js 异步编程</h2><ul>
<li>同步 api:当前 api 执行完成后，才能继续执行下一个 api;同步代码执行完后才开始执行异步代码，再执行回调函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步api可以从返回值中拿到api执行结果，而异步api不行</span></span><br><span class="line"></span><br><span class="line">funciotn <span class="function"><span class="title">sum</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> re=sum(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//异步</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMsg</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">msg</span>:<span class="string">&#x27;hello&#x27;</span>&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> res=getMsg(); <span class="comment">//undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>异步 api:当前 api 的执行，不会阻塞后续代码的执行;异步 api 通过回调函数获取返回值</li>
</ul>
<blockquote>
<p>回调函数：自己定义函数让别人去调用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  callback(<span class="string">&quot;XiaoMing&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getData(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;hello&quot;</span> + n);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>promise 解决回调地狱问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ler promise=<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">resolve(&#123;<span class="attr">name</span>:<span class="string">&#x27;xiaoming&#x27;</span>&#125;);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">reject(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,<span class="number">2000</span>);</span><br><span class="line">&#125;):</span><br><span class="line">promise.then(<span class="function"><span class="params">result</span>=&gt;</span><span class="built_in">console</span>.log(result);<span class="comment">//&#123;name:&#x27;xioaming&#x27;&#125;).catch(error=&gt;console.log(error);//error);</span></span><br></pre></td></tr></table></figure>

<ul>
<li>异步函数：终极方案，让异步代码写成同步代码形式，让代码不再有回调函数嵌套</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在普通函数定义前加上async关键字</span></span><br><span class="line"><span class="comment">//异步函数默认返回的时promise对象</span></span><br><span class="line"><span class="comment">//在异步函数使用throw关键字进行错误抛出，之后的代码将不会执行</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn());</span><br><span class="line">fn().then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//awaite关键字只能出现在异步函数中</span></span><br><span class="line"><span class="comment">//awaite promise对象； 暂停异步函数的执行，等待promise对象返回结果后在向下执行</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> p1();</span><br><span class="line">  <span class="keyword">await</span> p2();</span><br><span class="line">  <span class="keyword">await</span> p3();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回 promise 对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用util模块的promisify方法</span></span><br><span class="line"><span class="keyword">const</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> promisify=<span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>).promisify;</span><br><span class="line"><span class="keyword">const</span> readFile=pronisify(fs.readFile);</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r1=awaite readFile(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> r2=awaite readFile(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(r1,r2);</span><br><span class="line">&#125;</span><br><span class="line">run();</span><br></pre></td></tr></table></figure>

<p>捕获错误:</p>
<p><code>try catch</code>可以捕获异步函数以及其他同步代码在执行过程中发生的错误，但不能捕获其他类型 api 发生的错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> User.fid(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (er) &#123;</span><br><span class="line">    next(er);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="全局对象-global"><a href="#全局对象-global" class="headerlink" title="全局对象 global"></a>全局对象 global</h2><p>在浏览器中全局对象时 window,在 node 中全局对象是 global</p>
<p>Node 中的全局对象有以下方法，可省略 global：<code>console.log()</code>,<code>setTimeout()</code>,clearEimeout()<code>,</code>setInternal()<code>,</code>clearInterval`</p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>存储数据的仓库：mysql、MongoDB、Oracle</p>
<p>相关概念：</p>
<table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>database</td>
<td>数据仓库,可建立多个数据库</td>
</tr>
<tr>
<td>collection</td>
<td>集合，一组数据的集合</td>
</tr>
<tr>
<td>document</td>
<td>文档，一条具体的数据</td>
</tr>
<tr>
<td>field</td>
<td>字段,文档中的属性名称</td>
</tr>
</tbody></table>
<h3 id="第三方包-Mongoose"><a href="#第三方包-Mongoose" class="headerlink" title="第三方包 Mongoose"></a>第三方包 Mongoose</h3><p>使用 node.js 操作 MongoDB 数据库,下载<code>npm install mongoose</code></p>
<ul>
<li>数据库的连接</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line">mongoose</span><br><span class="line">  .connect(<span class="string">&quot;mongodb://localhost/test&quot;</span>)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;数据库连接成功&quot;</span>))</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;fail!&quot;</span>, err));</span><br></pre></td></tr></table></figure>

<ul>
<li>创建数据库</li>
</ul>
<p>在 MongoDB 中不需要显示创建数据库，如果使用的数据库不存在，MongoDB 会自动创建。</p>
<h4 id="MongoDB-增删查改操作"><a href="#MongoDB-增删查改操作" class="headerlink" title="MongoDB 增删查改操作"></a>MongoDB 增删查改操作</h4><ul>
<li>创建集合</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对集合设定规则</span></span><br><span class="line"><span class="keyword">const</span> courseSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">isPublished</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建集合并合并规则</span></span><br><span class="line"><span class="keyword">const</span> Course = mongoose.model(<span class="string">&quot;Course&quot;</span>, courseSchema); <span class="comment">//返回构造函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文档</li>
</ul>
<p>即向集合中插入元素</p>
<p>第一种方法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建集合实例</span></span><br><span class="line"><span class="keyword">const</span> course=<span class="keyword">new</span> Course(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//保存数据</span></span><br><span class="line">course.save();</span><br></pre></td></tr></table></figure>

<p>第二种方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Course.create(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function">(<span class="params">err,doc</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//错误对象</span></span><br><span class="line"><span class="built_in">console</span>.log(err);</span><br><span class="line"><span class="comment">//当前文档</span></span><br><span class="line"><span class="built_in">console</span>.log(doc);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create返回的也是promise对象</span></span><br><span class="line">Course.create(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">doc</span>=&gt;</span><span class="built_in">console</span>.log(doc)).catch(<span class="function"><span class="params">err</span>=&gt;</span><span class="built_in">console</span>.log(err));</span><br></pre></td></tr></table></figure>

<ul>
<li>mongoose 验证</li>
</ul>
<p>在创建集合规则时，可以设置当前字段的验证规则，验证失败则输入插入失败</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postSchema=<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line"> <span class="attr">title</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">String</span>,  <span class="comment">//字段类型</span></span><br><span class="line">  <span class="attr">required</span>: <span class="literal">true</span>  <span class="comment">//true时代表该字段必填,不能为空</span></span><br><span class="line">  <span class="attr">default</span>: <span class="string">&#x27;默认title&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">  <span class="attr">validate</span>:&#123;  <span class="comment">//自定义验证器</span></span><br><span class="line">  <span class="attr">validator</span>: <span class="function"><span class="params">v</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="comment">//返回布尔值，true代表验证成功</span></span><br><span class="line">   <span class="comment">//v要验证的值</span></span><br><span class="line">   <span class="keyword">return</span> v.length&gt;<span class="number">4</span></span><br><span class="line">  &#125;</span><br><span class="line">   <span class="attr">masseage</span>: <span class="string">&#x27;error!!!!!&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">authod</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">String</span>,  <span class="comment">//字段类型</span></span><br><span class="line">  <span class="attr">trim</span>:<span class="literal">true</span> <span class="comment">//自动去除字符串两边的空格</span></span><br><span class="line">  <span class="attr">required</span>: [<span class="literal">true</span>,<span class="string">&#x27;错误信息&#x27;</span>], <span class="comment">//自定义错误信息</span></span><br><span class="line">  <span class="attr">minlength</span>: <span class="number">2</span>,  <span class="comment">//字符串最小长度</span></span><br><span class="line">  <span class="attr">maxlength</span>: [<span class="number">10</span>,<span class="string">&#x27;长度错误&#x27;</span>],  <span class="comment">//字符串最大长度</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">age</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">Number</span>,</span><br><span class="line">  <span class="attr">min</span>: <span class="number">2</span>,  <span class="comment">//数值的最小值</span></span><br><span class="line">  <span class="attr">max</span>: <span class="number">100</span> <span class="comment">//数值的最大值</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">category</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">enum</span>:[<span class="string">&#x27;html&#x27;</span>,<span class="string">&#x27;css&#x27;</span>,<span class="string">&#x27;js&#x27;</span>]  <span class="comment">//枚举,输入的值必须在其中,否则报错</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  enum:&#123;</span></span><br><span class="line"><span class="comment">   values: [&#x27;html&#x27;,&#x27;css&#x27;,&#x27;js&#x27;],</span></span><br><span class="line"><span class="comment">   message: &#x27;error message&#x27;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Post=mongoose.model(<span class="string">&#x27;Post&#x27;</span>,postSchema);</span><br><span class="line">post.create(&#123;&#125;).then(<span class="function"><span class="params">re</span>=&gt;</span><span class="built_in">console</span>.log(re)).catch(<span class="function"><span class="params">err</span>=&gt;</span><span class="built_in">console</span>.log(err));</span><br></pre></td></tr></table></figure>

<ul>
<li><p>集合关联</p>
<ol>
<li>使用 id 对集合进行关联</li>
<li>使用 populate 方法进行关联集合查询</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户集合</span></span><br><span class="line"><span class="keyword">const</span> User=mongoose.model(<span class="string">&#x27;User&#x27;</span>,<span class="keyword">new</span> mongoose.Schema(&#123;<span class="attr">name</span>:&#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;&#125;));</span><br><span class="line"><span class="comment">//文章集合</span></span><br><span class="line"><span class="keyword">const</span> Post=mongoose.model(<span class="string">&#x27;Post&#x27;</span>,<span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line"> <span class="attr">title</span>:&#123;<span class="attr">type</span>: <span class="built_in">String</span>&#125;,</span><br><span class="line"><span class="comment">//使用id将文章集合和作者集合进行关联</span></span><br><span class="line"> <span class="attr">author</span>:&#123;<span class="attr">type</span>: mongoose.Schema.Types.ObjectId, <span class="attr">ref</span>: <span class="string">&#x27;User&#x27;</span>&#125;</span><br><span class="line">&#125;)):</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合查询</span></span><br><span class="line">Post.find().populate(<span class="string">&#x27;author&#x27;</span>).then(<span class="function">(<span class="params">err,result</span>)=&gt;</span><span class="built_in">console</span>.log(result));</span><br></pre></td></tr></table></figure>

<ul>
<li>导入数据</li>
</ul>
<p>shell 命令：<code>mongoimport -d 数据库名称 -c 集合名称 -file 要导入的数据文件（josn格式）</code></p>
<ul>
<li>查询文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据条件查询文档，若为空则查询所有文档</span></span><br><span class="line">Course.find().then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result)); <span class="comment">//返回的是文档的集合数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//实例</span></span><br><span class="line">Course.find(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result));</span><br><span class="line">User.find(&#123; <span class="attr">age</span>: &#123; <span class="attr">$gt</span>: <span class="number">20</span>, <span class="attr">$lt</span>: <span class="number">50</span> &#125; &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result)); <span class="comment">//查询大于20小于50</span></span><br><span class="line">User.find(&#123; <span class="attr">hobbies</span>: &#123; <span class="attr">$in</span>: [<span class="string">&quot;运动&quot;</span>] &#125; &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result)); <span class="comment">//查询包含运动的</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只查询一条数据</span></span><br><span class="line">Course.findOne(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//选择要查询的字段</span></span><br><span class="line">User.find()</span><br><span class="line">  .select(<span class="string">&quot;name age -_id&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result))</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="built_in">console</span>.log(err)); <span class="comment">//只返回查询的字段，不查询的字段前加-</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将查询出来的数据进行升序排序(从小到大）</span></span><br><span class="line">User.find()</span><br><span class="line">  .sort(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result));</span><br><span class="line"></span><br><span class="line"><span class="comment">//将查询出来的数据进行降序排序(从大到小）</span></span><br><span class="line">User.find()</span><br><span class="line">  .sort(<span class="string">&quot;-age&quot;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//skip跳过多条数据，limit限制查询数量</span></span><br><span class="line">User.find()</span><br><span class="line">  .skip(<span class="number">2</span>)</span><br><span class="line">  .limit(<span class="number">2</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result)); <span class="comment">//分页查询时常用</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除第一个文档</span></span><br><span class="line">Course.findOndeAndDelete(&#123;&#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result)); <span class="comment">//返回删除的文档</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除多个文档</span></span><br><span class="line">User.deleteMany(&#123;&#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="built_in">console</span>.log(result));</span><br></pre></td></tr></table></figure>

<ul>
<li>更新文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新单个</span></span><br><span class="line">User.updateOne(&#123; 查询条件 &#125;, &#123; 要修改的值 &#125;).then(<span class="function">(<span class="params">re</span>) =&gt;</span> <span class="built_in">console</span>.log(re));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新多个</span></span><br><span class="line">User.updateMany(&#123; 查询条件 &#125;, &#123; 要修改的值 &#125;).then(<span class="function">(<span class="params">re</span>) =&gt;</span> <span class="built_in">console</span>.log(re));</span><br></pre></td></tr></table></figure>

<h4 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h4><h5 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//301代表重定向</span></span><br><span class="line"><span class="comment">//location 跳转地址</span></span><br><span class="line">req.on(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  res.writeHead(<span class="number">301</span>, &#123;</span><br><span class="line">    <span class="attr">Location</span>: <span class="string">&quot;/list&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  res.end();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>npm i nodemon -g</code><br><code>nodemon test.js</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/06/07/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/07/20-00-00/" class="post-title-link" itemprop="url">Vue2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-07 20:00:00" itemprop="dateCreated datePublished" datetime="2021-06-07T20:00:00+08:00">2021-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>一套用于构建用户界面的渐进式 javascrip 框架</p>
</blockquote>
<h2 id="原生使用"><a href="#原生使用" class="headerlink" title="原生使用"></a>原生使用</h2><ul>
<li>引入 vue</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="javascript"> <span class="comment">//引入 Vue</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue后，会出现全局属性Vue&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>容器</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span>&#123;&#123;msg&#125;&#125; &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &#123;&#123;&#125;&#125;中可写js表达式--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用 vue</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> Vue.config.productionTip=<span class="literal">false</span>;<span class="comment">//阻止vue启动时的生成的提醒</span></span><br><span class="line"><span class="comment">//创建vue实例</span></span><br><span class="line"><span class="keyword">const</span> vu= <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, <span class="comment">//挂载点，指定容器,可写类名，不能用在html和body上；第二种写法可用vu.$mount(&#x27;#root&#x27;);代替,el的优先级更高</span></span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">msg</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiaomi&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">test</span>(<span class="params"></span>)</span>&#123;&#125; <span class="comment">//不建议在data中写函数，因为会data中的属性会进行数据代理，而方法并不需要进行数据代理</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="MVVM-模型"><a href="#MVVM-模型" class="headerlink" title="MVVM 模型"></a>MVVM 模型</h2><blockquote>
<p>一种软件架构</p>
</blockquote>
<ul>
<li>M:模型 model,代表数据模型</li>
<li>V：视图 view,代表 UI 组件</li>
<li>VM：视图模型 view model-&gt;vue 实例</li>
</ul>
<p>model 和 view 分别通过和 viewmodel 双向数据绑定进行交互，开发者只需关注业务逻辑，不用手动操作 dom,复杂数据同步交给 vm 来管理</p>
<ul>
<li>数据代理</li>
</ul>
<p><code>Object.defineproperty()</code>第一个参数为对象，第二个为对象的属性，第三个为配置项</p>
<p>如添加属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiaomei&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineproperty(person,<span class="string">&#x27;age&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">value</span>:<span class="number">18</span>,</span><br><span class="line"><span class="comment">//默认情况下添加的属性不可枚举，即无法遍历出来</span></span><br><span class="line"><span class="attr">enumerable</span>:<span class="literal">true</span>  <span class="comment">//true表示可以枚举</span></span><br><span class="line"><span class="comment">//默认情况下添加的属性的值无法更改</span></span><br><span class="line"><span class="attr">writable</span>:<span class="literal">true</span> <span class="comment">//控制属性是否可修改</span></span><br><span class="line"><span class="comment">//默认情况下添加的属性无法删除</span></span><br><span class="line"><span class="attr">configurable</span>: <span class="literal">true</span> <span class="comment">////控制属性是否可删除</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//当读取person的age属性时，get函数会被调用，且返回age的值</span></span><br><span class="line"><span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当修改person的age属性时，set函数会被调用</span></span><br><span class="line"><span class="attr">set</span>:<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">age=value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过一个对象对另一个对象中的属性的操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">  <span class="comment">//原数据</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;xiaomei&quot;</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&quot;female&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> test = &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">hobby</span>: <span class="string">&quot;swing&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(object, <span class="string">&quot;age&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">//默认情况下添加的属性不可枚举，即无法遍历出来</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;getter&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> test.age; <span class="comment">//通过object中的age控制test中的age,即数据代理</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">n</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;set&quot;</span>, n);</span><br><span class="line">    test.age = n;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>vue 中的数据代理：通过 vm 对象来代理 data 对象中属性的操作</p>
<p>通过 Object.defineProperty()把 data 对象中所有属性添加到 vm 上，为每一个添加到 vm 上的属性，都指定一个 getter/setter 方法,在它们内部去对 data 中的数据进行操作</p>
<h3 id="数据监听"><a href="#数据监听" class="headerlink" title="数据监听"></a>数据监听</h3><p>通过<code>vm._data</code>也可以访问到 data 中的数据,但其是经过加工的,即形成 getter、setter 形式</p>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//###只能监测一层</span></span><br><span class="line"><span class="keyword">let</span> data = &#123; <span class="attr">name</span>: <span class="string">&quot;xiaomei&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//创建一个监视的实例对象，用于监视data中的属性变化</span></span><br><span class="line"><span class="keyword">const</span> obs = <span class="keyword">new</span> Observer(data);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Observer</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//汇总对象中所有的属性形成一个数组</span></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="comment">//遍历</span></span><br><span class="line">  keys.forEach(<span class="function">(<span class="params">k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="built_in">this</span>, k, &#123;</span><br><span class="line">      <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> obj[k];</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">set</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;数据被修改了&quot;</span>);</span><br><span class="line">        obj[k] = val;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：通过 setter 实现监测，且要在 new Vue 时就传入要监测的数据;</p>
<ul>
<li>对象中后追加的属性，vue 默认不做响应式处理；如要给后添加的属性做响应式处理，需要用<code>Vue.set(对象,&#39;添加的属性&#39;,&#39;属性值&#39;)或vm.$set(对象,&#39;添加的属性&#39;,&#39;属性值&#39;)</code></li>
<li>删除属性也会做响应式更新，可使用<code>this.$delete(&#39;属性&#39;)</code>删除</li>
<li>数组更新检测<br>vue 将被侦听的数组的变更方法进行了包裹，所以会触发视图的更新，即先调用原生方法对数组进行修改，接着重新解模板，进行更新页面。被包裹的方法有<code>push()</code>,<code>pop()</code>,<code>shift()</code>,<code>unshift()</code>,<code>splice()</code>,<code>sort()</code>,<code>reverse()</code>.或使用<code>Vue.set(数组,下标,&#39;修改的值&#39;)或vm.$set(数组,下标,&#39;修改的值&#39;)</code></li>
</ul>
<blockquote>
<p>!注意：Vue.set();和 vm.$set()不能给 vm 或 vm 的根数据对象添加属性</p>
</blockquote>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ul>
<li><p>插值语法：用于解析标签体内容<br><code>&#123;&#123;xxx&#125;&#125;</code>xxx 为 js 表达式，可以直接读取到 data 中的属性</p>
</li>
<li><p>指令语法：用于解析标签<br><code>v-bind:href=&quot;xxx&quot;</code>或简写为<code>:href=&quot;xxx&quot;</code></p>
</li>
</ul>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="数据绑定v-model-v-bind"><a href="#数据绑定v-model-v-bind" class="headerlink" title="数据绑定v-model|v-bind"></a>数据绑定<code>v-model</code>|<code>v-bind</code></h3><h4 id="单向数据绑定"><a href="#单向数据绑定" class="headerlink" title="单向数据绑定"></a>单向数据绑定</h4><blockquote>
<p>数据只能从 data 流向页面;</p>
</blockquote>
<p><code>v-bind:href=&quot;xxx&quot;</code>或简写为<code>:href=&quot;xxx&quot;</code></p>
<h4 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h4><blockquote>
<p>数据能从 data 流向页面,也能从页面流向 data</p>
</blockquote>
<ul>
<li><p><code>v-model:value=&quot;xxx&quot;</code>或简写<code>v-model=&quot;xxx&quot;</code>。</p>
</li>
<li><p><code>v-model</code>的三个修饰符：</p>
<ul>
<li><code>lazy</code>会将绑定的事件切换为 change 事件，只有在提交时（比如回车）才会触发，</li>
<li><code>number</code>输入的字符串转为有效数字，</li>
<li><code>trim</code>去除首尾的空格</li>
</ul>
</li>
<li><p><code>v-model</code>指令只能用在表单类（输入类 input、select）元素上或自定义组件上</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--输入框--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;keyWords/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag"></span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;!--单选框，要加上value属性--&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;input type=&quot;</span><span class="attr">radio</span>&quot; <span class="attr">v-model</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;radio1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;radio2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--多选框--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若没有配置value，则当v-model初始值为数组时，勾选时收集的是null，为字符串时，收集的是布尔值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;reading&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sports&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>v-model 双向绑定原理：</p>
<ul>
<li><code>v-bind绑定value属性的值；</code></li>
<li><code>v-on绑定input事件监听到函数中，函数会获取最新的值，赋值给绑定的属性中；</code><ul>
<li>原生 input 元素的类型是 text/textarea，那么是使用它的 value 属性和 input 事件来实现双向数据绑定。</li>
<li>原生 input 元 u 素的类型是 radio/checkbox，那么是使用它的 checked 属性和 change 事件来实现双向数据绑定。</li>
<li>原生 select 元素，是使用它的 value 属性和 change 事件来实现双向数据绑定。</li>
</ul>
</li>
</ul>
</li>
<li><p>如果 <code>v-model</code> 绑定的是响应式对象上某个不存在的属性，那么 vue 会悄悄地增加这个属性，并让它响应式。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// template中：</span></span><br><span class="line">&lt;el-input v-model=<span class="string">&quot;user.tel&quot;</span>&gt;&lt;/el-input&gt;;</span><br><span class="line"><span class="comment">// script中：</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">user</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">        <span class="comment">//user 上会新增 tel 属性，并且 tel 这个属性还是响应式的</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>组件上的双向绑定</li>
</ul>
<blockquote>
<p><code>v-model</code>默认绑定的值是 value 和 input 事件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;子组件库存:&#123;&#123; value &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;addFun&quot;&gt;增加1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 0,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  /*</span><br><span class="line">  model: &#123; // 自定义v-model的格式</span><br><span class="line">    prop: &#x27;ame&#x27;, // 代表 v-model 绑定的prop名</span><br><span class="line">    event: &#x27;zard&#x27; // 代码 v-model 通知父组件更新属性的事件名</span><br><span class="line">  &#125;,</span><br><span class="line">  */</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addFun() &#123;</span><br><span class="line">      this.$emit(&quot;input&quot;, this.value + 1);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="事件绑定v-on"><a href="#事件绑定v-on" class="headerlink" title="事件绑定v-on"></a>事件绑定<code>v-on</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:cllick</span>=<span class="string">&quot;showhello&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--或简写成--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">cllick</span>=<span class="string">&quot;showhello($event,22)&quot;</span>&gt;</span>$event占位<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">el</span>:<span class="string">&#x27;.button1&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="javascript">     <span class="attr">name</span>:<span class="string">&#x27;xiaomei&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">showhello</span>(<span class="params">e,n</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          alert(<span class="string">&#x27;hello&#x27;</span>);</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(e.target,n);</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h4><blockquote>
<p>修饰符可以连续写，按写的顺序依次执行</p>
</blockquote>
<ul>
<li><code>prevent</code>:阻止默认事件</li>
<li><code>stop</code>:阻止事件冒泡</li>
<li><code>once</code>：事件只触发一次</li>
<li><code>capture</code>:使用事件的捕获模式</li>
<li><code>sefl</code>:只有 event.target 是当前操作的元素时才触发事件</li>
<li><code>passive</code>:事件的默认行为立即执行，无需等待事件回调执行完毕，</li>
</ul>
<h4 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h4><ul>
<li><p>vue 中的按键别名：<code>回车enter</code>，<code>删除delete</code>，<code>退出esc</code>，<code>空格space</code>， <code>换行tap(必须配合keydown使用)</code>， <code>上up</code>，<code>下down</code>，<code>左left</code>，<code>右right</code></p>
</li>
<li><p>系统修饰键：<code>ctrl</code>，<code>alt</code>，<code>shift</code>，<code>meta</code></p>
<ul>
<li>配合 keyup 使用时：需再按下其他键，随后释放其他键才能触发</li>
<li>配合 keydown 使用时：正常触发</li>
</ul>
</li>
<li><p>Vue.config.keyCodes.自定义键名=键码</p>
</li>
<li><p>vue 中未提供的按键别名，可使用按键原始名去绑定，注意要转换为 kebab-case（短横线命名）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;tips&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;showhello&quot;</span> /&gt;</span>`</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;tips&quot;</span> @<span class="attr">keyup.ctrl.y</span>=<span class="string">&quot;showhello&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="条件渲染v-if-v-show"><a href="#条件渲染v-if-v-show" class="headerlink" title="条件渲染v-if|v-show"></a>条件渲染<code>v-if</code>|<code>v-show</code></h3><p>v-if 与 v-show 的区别：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;false&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--元素还存在--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;false&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--元素直接消失,中间不能被打断--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--template不影响结构，但必须和v-if配合使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="列表渲染v-for"><a href="#列表渲染v-for" class="headerlink" title="列表渲染v-for"></a>列表渲染<code>v-for</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;#root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--遍历数组(item,index)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;n in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;n.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;index&#125;&#125;</span><br><span class="line">      <span class="comment">&lt;!--索引值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--遍历对象(val,key,index)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(val,k,index2) of persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index2&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;index2&#125;&#125;</span><br><span class="line">      <span class="comment">&lt;!--索引值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 除此之外还可以遍历字符串，数字--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">persons</span>: [</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">id</span>: <span class="number">001</span>, <span class="attr">name</span>: <span class="string">&quot;xiaoMei&quot;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">id</span>: <span class="number">002</span>, <span class="attr">name</span>: <span class="string">&quot;xiaoHong&quot;</span>, <span class="attr">age</span>: <span class="number">22</span> &#125;,</span></span><br><span class="line"><span class="javascript">        &#123; <span class="attr">id</span>: <span class="number">003</span>, <span class="attr">name</span>: <span class="string">&quot;xiaoLan&quot;</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;,</span></span><br><span class="line"><span class="javascript">      ],</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="key-给节点提供唯一标识"><a href="#key-给节点提供唯一标识" class="headerlink" title="key 给节点提供唯一标识"></a>key 给节点提供唯一标识</h4><ul>
<li>不写 key，则默认用 index，index 作为 key 可能发生的问题：对数据进行逆序添加、删除时，会产生没有必要的真实 dom，界面虽然没问题，但效率低。当结构中存在输入类的 DOM 时，界面会出现问题。</li>
<li>虚拟 DOM 中的 key 的作用：key 是虚拟 DOM 对象的标识，当数据发送变化时，vue 会根据新数据生成新的虚拟 DOM，随后 vue 将新的虚拟 DOM 与旧的虚拟 DOM 进行差异比较</li>
</ul>
<p>对比规则为：</p>
<ul>
<li>旧虚拟 DOM 中找到与新虚拟 DOM 相同的 key：<ul>
<li>若虚拟 DOM 中的内容没有改变，则直接使用之前的真实 DOM</li>
<li>若虚拟 DOM 中的内容改变了，则生成新的真实 DOM，随后替换掉页面中之前的真实 DOM</li>
</ul>
</li>
<li>旧虚拟 DOM 中未找到与新虚拟 DOM 相同的 key：创建新的真实 DOM，随后渲染到页面。</li>
</ul>
<h3 id="渲染文本v-text-v-html"><a href="#渲染文本v-text-v-html" class="headerlink" title="渲染文本v-text|v-html"></a>渲染文本<code>v-text</code>|<code>v-html</code></h3><ul>
<li><p><code>v-text</code> 指令,向其所在的节点中渲染文本内容,其会替换掉节点中的内容，<code>&#123;&#123;xxx&#125;&#125;</code>插值语法则不会,可以替换指定内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-text</span>=<span class="string">&quot;keyword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>v-html</code> 指令,向其所在的节点中渲染文本内容,其会替换掉节点中的内容,且会解析 html 标签，<code>v-text</code>则不会。其具有安全性问题，在网页上动态渲染 html 标签是非常危险的，易导致 XSS 攻击。</p>
</li>
</ul>
<h3 id="其他指令v-cloak-v-once-v-pre"><a href="#其他指令v-cloak-v-once-v-pre" class="headerlink" title="其他指令v-cloak|v-once|v-pre"></a>其他指令<code>v-cloak</code>|<code>v-once</code>|<code>v-pre</code></h3><h4 id="v-cloak指令"><a href="#v-cloak指令" class="headerlink" title="v-cloak指令"></a><code>v-cloak</code>指令</h4><p>Vue 实例创建完毕并接管容器后，会删除所有 v-cloak 属性，常用于配合属性选择器,解决网速不好加载 vue 慢而显示<code>&#123;&#123;xxx&#125;&#125;</code>问题</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-attr">[v-cloak]</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="v-once指令"><a href="#v-once指令" class="headerlink" title="v-once指令"></a><code>v-once</code>指令</h4><p>其所在的节点在初次渲染后，就视为静态内容了，以后即使数据变化了，其也不再变化</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="v-pre指令"><a href="#v-pre指令" class="headerlink" title="v-pre指令"></a><code>v-pre</code>指令</h4><p>跳过其所在节点的编译过程，可用于跳过没有指令语法、插值语法的节点，加快编译速度。</p>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;&#125;,</span><br><span class="line">  <span class="attr">directives</span>:&#123;</span><br><span class="line">  <span class="comment">//局部指令</span></span><br><span class="line">  <span class="comment">//指令与元素成功绑定时即一开始就被调用，当指令所在模板被重新解析时会被调用。</span></span><br><span class="line">  <span class="comment">//简写</span></span><br><span class="line">  <span class="function"><span class="title">test</span>(<span class="params">element,binding</span>)</span>&#123; <span class="comment">//element,binding为规定写法</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">//这里的this为window</span></span><br><span class="line">    element.innerText=bindding.value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//标准写法</span></span><br><span class="line">  <span class="attr">test2</span>:&#123; <span class="comment">//命名：多个单词用-分割，使用时不用-,后一个首字母改为大写</span></span><br><span class="line">    <span class="function"><span class="title">bind</span>(<span class="params">element,binding</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//指令与元素成功绑定时调用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">inserted</span>(<span class="params">element,binding</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//指令所在元素插入页面时调用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">update</span>(<span class="params">element,binding</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//指令所在模板被重新解析时被调用</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局指令</span></span><br><span class="line">Vue.directive(指令名，回调函数);</span><br></pre></td></tr></table></figure>

<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>要用的属性不存在，利用已有属性计算而得来</p>
<p>内部有缓存机制，多次调用时只运行一次，效率更高,但不能开启异步任务如:<code>setTimeout()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;.box&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xiaomei&quot;</span>,</span><br><span class="line">    <span class="attr">hoby</span>: <span class="string">&quot;reading&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">fullName</span>: &#123;</span><br><span class="line">      <span class="comment">//初次读取fullName时，get会被调用;所依赖的数据改变时会调用,即data中的属性被改变时。</span></span><br><span class="line">      <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name + <span class="string">&quot;-&quot;</span> + <span class="built_in">this</span>.hoby;</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//当fullname被修改时，会被调用。使用v-model绑定时必须添加set，不然报错</span></span><br><span class="line">      <span class="function"><span class="title">set</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = val; <span class="comment">//不能修改fullName自己,会报错</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//当数据只读不修改时，可采用简写</span></span><br><span class="line">    <span class="function"><span class="title">fullName2</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.name + <span class="string">&quot;-&quot;</span> + <span class="built_in">this</span>.hoby;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="监听属性"><a href="#监听属性" class="headerlink" title="监听属性"></a>监听属性</h2><p>能开启异步操作如:<code>setTimeout(()=&gt;&#123;&#125;,1000)</code>;所有不被 vue 所管理的函数最好写成箭头函数，这样 this 的指向才是 vm</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">el</span>:<span class="string">&#x27;#test&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">istrue</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">number</span>:&#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">a</span>:<span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">b</span>:<span class="number">2</span>&#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    wantch&#123;</span></span><br><span class="line"><span class="javascript">     <span class="string">&#x27;istrue&#x27;</span>:&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">immediate</span>:<span class="literal">true</span>, <span class="comment">///初始化时调用一下handler</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//当istrue发生改变时调用</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">handler</span>(<span class="params">newValue,oldValue</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(newValue,oldValue);</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//简写，当只有handler()时</span></span></span><br><span class="line"><span class="javascript">     <span class="function"><span class="title">istrue2</span>(<span class="params">newValue,oldValue</span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;test&#x27;</span>);&#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="string">&#x27;number&#x27;</span>:&#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">deep</span>:<span class="literal">true</span>, <span class="comment">//深度监视，当对象内的属性发生变化时,能检测到多层级内容的改变</span></span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">handler</span>(<span class="params">newValue,oldValue</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(newValue,oldValue);</span></span><br><span class="line"><span class="javascript">      &#125;&#125;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*//第二种写法</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  vm.$watch(&#x27;istrue&#x27;,&#123; handler()&#123;&#125; &#125; );</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  //简写</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  vm.$watch(&#x27;istrue&#x27;,function()&#123; console.log(&#x27;test&#x27;);&#125;);</span></span></span><br><span class="line"><span class="comment"><span class="javascript">  */</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>对要显示的数据进行特定格式化后在显示（常用于一些简单逻辑的处理）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用过滤器--&gt;</span></span><br><span class="line">    &#123;&#123;time|timeFormater1()|timeFormater2&#125;&#125;</span><br><span class="line">    <span class="comment">&lt;!--或者v-bind:属性=&quot;xxx|过滤器名&quot;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--过滤器可额外接收参数，多个过滤器可串联，原始数据未改变，产生的是新的数据--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">time</span>:<span class="number">24356765432</span>,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="attr">filters</span>:&#123;</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">timeFormater1</span>(<span class="params">value</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(value);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> value; <span class="comment">//返回数据</span></span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">timeFormater2</span>(<span class="params">value</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(value);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> value; <span class="comment">//返回数据</span></span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">//注册全局过滤器</span></span></span><br><span class="line"><span class="javascript">      Vue.filter(<span class="string">&#x27;myName&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;<span class="keyword">return</span> value;&#125;);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="mixins-混入-配置项"><a href="#mixins-混入-配置项" class="headerlink" title="mixins(混入)配置项"></a>mixins(混入)配置项</h2><blockquote>
<p>mixins 属性和组件的属性相同时，组件的优先级更高，生命周期函数会一起执行(mixins 中的先执行)<br>可以把多个组件共用的配置提取成一个混入对象<br>school 组件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 @click=&quot;showName&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//引用一个test</span><br><span class="line">import &#123; test &#125; from &quot;../mixin&quot;;</span><br><span class="line">//import&#123;test,test2&#125; from &#x27;../mixn&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;School&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; name: &quot;daxue&quot; &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mixins: [test],</span><br><span class="line">  //mixins:[test,test2]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//全局混入</span><br><span class="line">//Vue.mixin(xxx)</span><br><span class="line">//Vue.mixin(xxx2)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>mixin.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义混合</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">showNamw</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      alert(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> test2 = &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">x</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>用于增强 Vue</p>
<ul>
<li>plugins.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义插件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue, x, y</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x, y);</span><br><span class="line">    <span class="comment">//添加全局过滤器</span></span><br><span class="line">    Vue.filter();</span><br><span class="line">    <span class="comment">//添加实例方法</span></span><br><span class="line">    Vue.prototype.$myMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>main.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">//引入APP</span></span><br><span class="line"><span class="keyword">import</span> APP <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="comment">//引入插件</span></span><br><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&quot;./plugins&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用插件</span></span><br><span class="line">Vue.use(plugins, <span class="number">33</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建VM</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="scoped-样式"><a href="#scoped-样式" class="headerlink" title="scoped 样式"></a>scoped 样式</h2><p>让样式只在本组件内有效，即局部生效，防止冲突。写法：<code>&lt;style scoped&gt;&lt;/style&gt;</code><br>其在标签上加上属性<code>data-v-xxxxx</code>，配合标签属性选择器<code>demo[data-v-xxxxx]</code></p>
<blockquote>
<p>组件化编码流程：1.拆分成静态组件。2.实现动态组件。3.实现交互绑定事件</p>
</blockquote>
<h2 id="vue-封装的动画与过渡"><a href="#vue-封装的动画与过渡" class="headerlink" title="vue 封装的动画与过渡"></a>vue 封装的动画与过渡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;transition name=&quot;hello&quot; appear&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">/*动画*/</span><br><span class="line">.hello-enter-active&#123;</span><br><span class="line"> animation: test 0.5s linear;</span><br><span class="line">&#125;</span><br><span class="line">.hello-leave-active&#123;</span><br><span class="line"> animation: test 0.3s linear reverse;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes test&#123;&#125;</span><br><span class="line"></span><br><span class="line">/*详细写法</span><br><span class="line">/*进入的起点*/</span><br><span class="line">.hello-enter&#123;</span><br><span class="line"> transform:translateX(-100x);</span><br><span class="line">&#125;</span><br><span class="line">/*进入的终点*/</span><br><span class="line">.hello-enter-to&#123;</span><br><span class="line"> transform:translateX(0px);</span><br><span class="line">&#125;</span><br><span class="line">/**/</span><br><span class="line">.hello-leave&#123;</span><br><span class="line"> transform:translateX(0px);</span><br><span class="line">&#125;</span><br><span class="line">/**/</span><br><span class="line">.hello-leave-to&#123;</span><br><span class="line"> transform:translateX(-100px);</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="绑定样式"><a href="#绑定样式" class="headerlink" title="绑定样式"></a>绑定样式</h2><ul>
<li><p>动态指定类名<br><code>&lt;div class=&#39;box&#39; :class=&#39;xxx&#39; &gt;test&lt;/div&gt;</code><br>xxx 可为<code>字符串</code>、数组<code>[&#39;box1&#39;,&#39;box2&#39;]</code>、对象<code>&#123;box1:false,box2:true&#125;</code>。</p>
</li>
<li><p>动态指定内联样式<br><code>&lt;div class=&#39;box&#39;  :style=&quot;xxx&quot; &gt;test&lt;/div&gt;</code><br>xxx 可为<code>字符串</code>、数组<code>[&#123;color:&#39;red&#39;&#125;,&#123;background:&#39;red&#39;&#125;]</code>、对象<code>&#123;color:&#39;red&#39;&#125;</code>。</p>
</li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>又名生命周期回调函数、生命周期函数、生命周期钩子，是 vue 在关键时刻帮我们调用的一些特殊名称的函数，其名字不可更改，其中的 this 指向 vm 或组件实例对象。</p>
<table>
<thead>
<tr>
<th>生命周期</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>初始化：生命周期、事件</td>
<td>但数据代理还未开始</td>
</tr>
<tr>
<td>beforeCreate</td>
<td>无法通过 vm 访问到 data 中的数据、 methods 中的方法</td>
</tr>
<tr>
<td>初始化</td>
<td>数据检测、数据代理</td>
</tr>
<tr>
<td>created</td>
<td>可以通过 vm 可访问到 data 中的数据、methods 中的方法</td>
</tr>
<tr>
<td>解析模板，生成虚拟 DOM，（内存中）</td>
<td>此时页面还不能显示解析好的内容</td>
</tr>
<tr>
<td>beforeMount</td>
<td>页面呈现的是未经 Vue 编译的 DOM 结构，此时所有对 DOM 的操作，最终都不奏效</td>
</tr>
<tr>
<td>创建 vm $el</td>
<td>将内存中的虚拟 DOM 转为真实 DOM 插入页面</td>
</tr>
<tr>
<td>mounted</td>
<td>页面中呈现的是经过 Vue 编译的 DOM，对 DOM 的操作均有效，到此初始化过程结束。一般在此进行开启定时器、发送网络请求、订阅消息、绑定自定义事件等操作</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>此时数据是新的，但页面是旧的，即页面未与数据保持同步</td>
</tr>
<tr>
<td>根据新的数据，生成新的虚拟 DOM，</td>
<td>随后与旧的虚拟 DOM 进行比较，最终完成页面的更新</td>
</tr>
<tr>
<td>updated</td>
<td>此时数据和页面保持同步</td>
</tr>
<tr>
<td>beforeDestroy</td>
<td>此时 vm 中所有的 data、methods、指令等都处于可用状态，马上要执行销毁过程，一般在此进行关闭定时器、取消订阅消息、解绑自定义事件等操作</td>
</tr>
<tr>
<td>destroyed</td>
<td>销毁 vue 实例后自定义事件会失效，但原生 DOM 事件依然有效</td>
</tr>
</tbody></table>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>实现应用中局部功能代码和资源的集合</p>
<blockquote>
<p>模块：向外提供特定功能的 js 程序</p>
</blockquote>
<h3 id="非单文件组件"><a href="#非单文件组件" class="headerlink" title="非单文件组件"></a>非单文件组件</h3><blockquote>
<p>一个文件中包含有 n 个组件</p>
</blockquote>
<h4 id="创建-school-组件"><a href="#创建-school-组件" class="headerlink" title="创建 school 组件"></a>创建 school 组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="keyword">const</span> school = &#123;&#125;;</span><br><span class="line"><span class="comment">//标准写法</span></span><br><span class="line"><span class="keyword">const</span> school = Vue.extend(&#123;</span><br><span class="line">  <span class="comment">//组件定义时，不要写el配置项,最终所有的组件都要进过一个vm的管理</span></span><br><span class="line">  <span class="comment">//名字</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;xuexiao&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//使用template可以配置组件结果。</span></span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;h3&gt;test&lt;/h3&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//data必须写成函数，为避免组件被复用时，数据存在引用关系</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">schoolName</span>: <span class="string">&quot;BST&quot;</span>,</span><br><span class="line">      <span class="attr">address</span>: <span class="string">&quot;beijing&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="定义-app-组件"><a href="#定义-app-组件" class="headerlink" title="定义 app 组件"></a>定义 app 组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = Vue.extend(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="创建-vm"><a href="#创建-vm" class="headerlink" title="创建 vm"></a>创建 vm</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&quot;&lt;app&gt;&lt;/app&gt;&quot;</span>,</span><br><span class="line">  <span class="comment">//局部注册组件</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="attr">xuexioa</span>: school, <span class="comment">//组件名：一个单词通常首字母大小，多个单词通常用-分隔，或首字母大写（需要Vue脚手架支持）</span></span><br><span class="line">    app,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局注册组件</span></span><br><span class="line">Vue.component(<span class="string">&quot;xuexiao&quot;</span>, school);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./compoents/App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">components</span>: &#123; App &#125;,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(<span class="string">&quot;App&quot;</span>),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./compoents/App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="使用组件"><a href="#使用组件" class="headerlink" title="使用组件"></a>使用组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xuexiao</span>&gt;</span><span class="tag">&lt;/<span class="name">xuexiao</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xuexiao</span> /&gt;</span><span class="comment">&lt;!--需要脚手架支持，否则多个组件时，后续组件将不能渲染--&gt;</span></span><br></pre></td></tr></table></figure>

<p>关于 VueComponent，组件本质是一个名为 VueComponent 的构造函数，是由 Vue.extend 生成的。当我们写<code>&lt;xuexiao&gt;&lt;/xuexiao&gt;</code>，Vue 解析时会帮我们创建 school 组件的实例对象，即 vue 帮我们执行<code>new VueComponent();</code>。当我们每次调用 Vue.extend()时,返回的都是一个全新的 VueComponent。在组件配置中，data 函数、methods 中的函数、watch 中的函数等，它们的 this 都指向 VueComponent 实例对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.a = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">this</span>.b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建一个Demo实例对象</span></span><br><span class="line"><span class="keyword">const</span> d = <span class="keyword">new</span> Demo();</span><br><span class="line"><span class="built_in">console</span>.log(Demo.prototype); <span class="comment">//显示原型属性</span></span><br><span class="line"><span class="built_in">console</span>.log(d.__proto__); <span class="comment">//隐式原型属性</span></span><br><span class="line"><span class="comment">//显示原型属性与隐式原型属性都指向原型对象</span></span><br><span class="line"><span class="comment">//通过显示原型属性操作原型对象</span></span><br><span class="line">Demo.prototype.e = <span class="number">21</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>!!重要内置关系：<code>VueComponent.prototype.__proto__===Vue.prototype</code>;其可以让组件实例对象访问到 Vue 原型上的属性和方法。</p>
</blockquote>
<h3 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h3><blockquote>
<p>一个文件中只包含有一个组件</p>
</blockquote>
<h4 id="school-vue-组件"><a href="#school-vue-组件" class="headerlink" title="school.vue 组件"></a>school.vue 组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--组件的结构--&gt;</span><br><span class="line">  &lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; schoolName &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; address &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//组件交互的代码</span><br><span class="line"> export default&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line">   schoolName:&#x27;daxue&#x27;</span><br><span class="line">   address:&#x27;beijing&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line">    showName()&#123;</span><br><span class="line">  alert(this.schoolName);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">/*样式*/</span><br><span class="line">.demoo &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="App-vue-组件"><a href="#App-vue-组件" class="headerlink" title="App.vue 组件"></a>App.vue 组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;School /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//引入组件</span><br><span class="line">import School from &quot;./School&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  components: &#123; School &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>main.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123; App &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&#x27;utf-8&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag"> &lt;title&gt;test&lt;/title&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/head&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;body&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;div id=&quot;root&quot;&gt;&lt;div&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;script type=&quot;text/javascript&quot; src=&quot;./vue.js&quot;&gt;&lt;/script&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;script type=&quot;text/javascript&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/body&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/html&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="脚手架-vue-cli-command-line-interface"><a href="#脚手架-vue-cli-command-line-interface" class="headerlink" title="脚手架 vue.cli(command line interface)"></a>脚手架 vue.cli(command line interface)</h2><ol>
<li>全局安装@vue/cli:<code>npm install -g @vue/cli</code></li>
<li>切换到要创建项目的目录，然后创建项目：<code>vue create xxxx</code></li>
<li>启动项目：<code>npm run serve</code></li>
</ol>
<blockquote>
<ol>
<li>配置 npm 淘宝镜像：<code>npm config set registry https://....</code></li>
<li>Vue 脚手架隐藏了所有 webpack 相关的配置，若想查看具体 webpack 配置，执行：<code>vue inspect &gt; output.js</code></li>
</ol>
</blockquote>
<h3 id="main-js-项目的入口文件"><a href="#main-js-项目的入口文件" class="headerlink" title="main.js 项目的入口文件"></a>main.js 项目的入口文件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入vue.runtime.xxx.js，其是运行版的vue,只包含核心功能，没有模板解析器,而完整版的Vue才有。</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">//引入App组件</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="comment">//关闭生产提示</span></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建VUe实例对象</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">  <span class="comment">//将App组件放入容器中</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(app), <span class="comment">//没有模板解析器，不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容</span></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">createElement</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(<span class="string">&quot;h1&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="vue-config-js-配置"><a href="#vue-config-js-配置" class="headerlink" title="vue.config.js 配置"></a>vue.config.js 配置</h3><p>使用 vue.config.js 可以对脚手架进行个性化定制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"> <span class="attr">pages</span>:&#123;</span><br><span class="line">   <span class="attr">index</span>:&#123;</span><br><span class="line">  <span class="comment">//入口</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;src/main.js&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">lintOnSave</span>:<span class="literal">false</span>, <span class="comment">//关闭语法检查</span></span><br><span class="line"> <span class="comment">//代理</span></span><br><span class="line"> <span class="attr">devServer</span>:&#123;</span><br><span class="line">  <span class="attr">proxy</span>:&#123;</span><br><span class="line">   <span class="string">&#x27;/api&#x27;</span>::&#123;</span><br><span class="line">    <span class="attr">target</span>:<span class="string">&#x27;http://xxxx&#x27;</span></span><br><span class="line">    <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">pathRewrite</span>:&#123;</span><br><span class="line">     <span class="string">&#x27;^/api&#x27;</span>:<span class="string">&#x27;/api&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="attr">configureWebpack</span>:<span class="function">(<span class="params">config</span>)=&gt;</span>&#123;<span class="comment">//地址</span></span><br><span class="line">  config.resolve=&#123;</span><br><span class="line">   <span class="attr">extensions</span>:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.json&#x27;</span>,<span class="string">&#x27;.vue&#x27;</span>],</span><br><span class="line">   <span class="attr">alias</span>:&#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>:path.resolve(__dirname,<span class="string">&#x27;./src&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="脚手架文件结构"><a href="#脚手架文件结构" class="headerlink" title="脚手架文件结构"></a>脚手架文件结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|--node_modules</span><br><span class="line">|--public</span><br><span class="line">|--src</span><br><span class="line">    |--assets:静态资源文件夹</span><br><span class="line">    |--component:存放组件文件夹</span><br><span class="line">    |--App.vue：汇总所有组件</span><br><span class="line">    |--mian.js：入口文件</span><br><span class="line">|--.gitignore: git版本管制忽略的配置</span><br><span class="line">|--babel.config.js</span><br><span class="line">|--package.json: 应用包配置文件</span><br><span class="line">|--package-lock.json: 包版本控制文件</span><br></pre></td></tr></table></figure>

<h2 id="ref-属性"><a href="#ref-属性" class="headerlink" title="ref 属性"></a>ref 属性</h2><p>id 的替代者,用来给元素或组件注册引用信息,应用在 html 标签上获取的是真实 DOM 元素，应用组件标签上获取的是组件的实例对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1 v-text=&quot;msg&quot; ref=&quot;title&quot;&gt;&lt;/h1&gt;</span><br><span class="line">    &lt;button ref=&quot;btn&quot; @click=&quot;showDOM&quot;&gt;outPut_DOM&lt;/button&gt;</span><br><span class="line">    &lt;School ref=&quot;sch&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import School from &#x27;./component/school&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line"> name:&#x27;App&#x27;,</span><br><span class="line"> components:&#123;School&#125;</span><br><span class="line"> data()&#123;</span><br><span class="line">  return&#123;</span><br><span class="line">   msg:&#x27;hello&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line">  showDOM()&#123;</span><br><span class="line">    console.log(this.$ref.title); //真实DOM元素</span><br><span class="line">    console.log(this.$ref.sch); //School组件的实例对象</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="props-配置项"><a href="#props-配置项" class="headerlink" title="props 配置项"></a>props 配置项</h2><p>让组件接收外部传来的数据,props 是只读的，Vue 底层会监测(非深度监测)props，若发生修改会发出警告。若要修改数据，请复制一份到 data 中,再修改。</p>
<blockquote>
<p>Vue 使用 props 时父组件给子组件传值后，子组件可用 props 配置项接收，但不要忘了加引号！！！！！！！否则使用它会出现 undefined！<br>v-modle 绑定的值不应是 props 传过来的值，当其为对象类型时，修改对象中的属性时，vue 无法发现<br>props 和 data 的属性重复时，props 的优先级更高</p>
</blockquote>
<h3 id="子组件"><a href="#子组件" class="headerlink" title="子组件"></a>子组件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line"><span class="attr">data</span>:&#123;&#125;,</span><br><span class="line"><span class="comment">//简单声明接收</span></span><br><span class="line"><span class="attr">props</span>:[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>]</span><br><span class="line"><span class="comment">//接收的同时对数据进行类型限制</span></span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">Number</span>,</span><br><span class="line">  <span class="attr">sex</span>:<span class="built_in">String</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//接收的同时对数据进行类型限制和默认值的指定</span></span><br><span class="line">props:&#123;</span><br><span class="line"><span class="attr">name</span>:&#123;</span><br><span class="line"> <span class="attr">type</span>:<span class="built_in">String</span>,</span><br><span class="line">   <span class="attr">required</span>:<span class="literal">true</span>, <span class="comment">//name必填</span></span><br><span class="line">  &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="父组件"><a href="#父组件" class="headerlink" title="父组件"></a>父组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!--传递数据--&gt;</span><br><span class="line">    &lt;Student name=&quot;xiaoMei&quot; sex=&quot;female&quot; :age=&quot;12&quot;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Student from &#x27;./components/Student&#x27;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;App&quot;,</span><br><span class="line"> components:&#123;Student&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>props 适用于父组件和子组件的通信，子组件与父组件的通信要求父先给子一个函数，子再通过形参的形式传递数据</p>
</blockquote>
<h2 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h2><p>子组件跟父组件通信可使用 Vue 的自定义事件，父组件通过@xxx=“function(){}”给子组件绑定自定义事件，然后子组件通过$emit 触发事件，第一个参数为触发的事件，第二个为要传递的数据，便可实现子与父的通信。组件中使用原生事件需要<code>native</code>修饰符(<code>native</code>只对组件生效)<br>适用于子组件与父组件通信<br>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 通过父组件给子组件绑定一个自定义事件：用于子给父传递数据 --&gt;</span><br><span class="line">  &lt;Student v-on:test=&quot;getStudentName&quot; /&gt;</span><br><span class="line">  &lt;!-- 第二种写法,使用ref--&gt;</span><br><span class="line">  &lt;!-- &lt;student ref=&quot;student&quot;/&gt;  --&gt;</span><br><span class="line">  &lt;!-- &lt;student ref=&quot;student&quot;  @click.native=&quot;show&quot;/&gt;  组件绑定原生DOM事件，需要使用native修饰符 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import School from &#x27;./components/School.vue&#x27;</span><br><span class="line">import Student from &#x27;./components/Student&#x27;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">name:&#x27;App&#x27;, components:&#123;School,Student&#125;</span><br><span class="line">data()&#123;</span><br><span class="line"> return &#123;</span><br><span class="line">    msg: &#x27;test1!!!!!!!!&#x27;</span><br><span class="line"> &#125;&#125;</span><br><span class="line">methods:&#123;</span><br><span class="line"> getStudentName(name)&#123;</span><br><span class="line">  console.log(name);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> // 第二种写法,使用ref--&gt;</span><br><span class="line"> /*</span><br><span class="line"> mounted()&#123;</span><br><span class="line"> this.$refs.student.$on(&#x27;test&#x27;,this.getStudentName);</span><br><span class="line"> //this.$refs.student.$on(&#x27;test&#x27;,(name,...params)=&gt;&#123;...//要用箭头函数，否则this指向出错&#125;);</span><br><span class="line"> &#125;</span><br><span class="line"> */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>Student.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; sex &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;sendStudentName&quot;&gt;test&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;Student&#x27;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">name:&#x27;xiaoHu&#x27;,</span><br><span class="line">sex:&#x27;man&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">sendStudentName()&#123;</span><br><span class="line">//触发student组件实例身上的test(getStudentName)事件;即this.$emit(&#x27;传过来的事件名&#x27;,参数数据）；</span><br><span class="line">this.$emit(&#x27;test&#x27;,this.name,xx,32);</span><br><span class="line">&#125;</span><br><span class="line">unbind()&#123;</span><br><span class="line">//this.$off(&#x27;demo1&#x27;); //解绑一个自定义事件</span><br><span class="line">//this.$off(&#123;&#x27;xx&#x27;,&#x27;xx&#x27;,&#x27;xx&#x27;&#125;); //解绑多个自定义事件</span><br><span class="line">this.$off(); //解绑所有自定义事件</span><br><span class="line">&#125;,</span><br><span class="line">death()&#123;</span><br><span class="line">this.$destroy(); //销毁当前student组件的实例，销毁后所有student实例的自定义事件全部失效</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="全局事件总线"><a href="#全局事件总线" class="headerlink" title="全局事件总线"></a>全局事件总线</h2><p>适用与任意组件间的通信</p>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#root&quot;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">  <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    Vue.prototype.$bus = <span class="built_in">this</span>; <span class="comment">//安装全局事件总线</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;school&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;xuexiao&quot;,</span><br><span class="line">      address: &quot;biejing&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    //接受数据</span><br><span class="line">    this.$bus.$on(&quot;hello&quot;, (data) =&gt; &#123;</span><br><span class="line">      console.log(&quot;recieve data&quot;, data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy() &#123;</span><br><span class="line">    //解绑事件</span><br><span class="line">    this.$bus.$off(&quot;hello&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;temlate&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default(&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> name:&#x27;小米&#x27;,</span><br><span class="line"> sex:&#x27;woman&#x27;,</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line"> sendStudentName()&#123;</span><br><span class="line"> //提供数据</span><br><span class="line"> this.$bus.$emit(&#x27;hello&#x27;,32)</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="消息发布和订阅"><a href="#消息发布和订阅" class="headerlink" title="消息发布和订阅"></a>消息发布和订阅</h2><p>适用于任意组件间通信，需要信息的组件订阅消息，提供信息的组件的发布消息</p>
<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//安装pubsub: npm i pubsub-js</span><br><span class="line">import pubsub from &quot;pubsub-js&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;School&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;xuexiao&quot;,</span><br><span class="line">      address: &quot;beijing&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    //订阅消息，接收数据</span><br><span class="line">    this.pubId = pubsub.subscribe(&quot;hello&quot;, function (msgName, data) &#123;</span><br><span class="line">      console.log(&quot;有人发布hello消息&quot;, msgName, data);</span><br><span class="line">      console.log(this);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy() &#123;</span><br><span class="line">    pubsub.unsubscribe(this.pubId);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>student.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import pubsub from &quot;pubsub-js&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Student&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;xiaomei&quot;,</span><br><span class="line">      sex: &quot;woman&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ///提供数据</span><br><span class="line">    sendData() &#123;</span><br><span class="line">      pubsub.publish(&quot;hello&quot;, 2222);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>nextTick</li>
</ul>
<p>语法：<code>this.$nextTick(回调函数)</code><br>作用：在下一次 DOM 更新结束后执行其指定的回调,用于当改变数据后，要基于更新后的新 DOM 进行某些操作时，要在 nextTick 所指定的回调函数中执行</p>
<h2 id="vue-脚手架配置代理服务"><a href="#vue-脚手架配置代理服务" class="headerlink" title="vue 脚手架配置代理服务"></a>vue 脚手架配置代理服务</h2><p>vue.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"></span><br><span class="line"> <span class="attr">pages</span>:&#123;</span><br><span class="line">  <span class="attr">index</span>:&#123;</span><br><span class="line">   <span class="comment">//入口</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;src/main.js&#x27;</span></span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line"><span class="attr">lintOnSave</span>:<span class="literal">false</span>, <span class="comment">//关闭语法检测</span></span><br><span class="line"><span class="comment">//开启代理服务器（一）:配置简单，但不能配置多个代理</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">devServer:&#123;</span></span><br><span class="line"><span class="comment"> proxy:&#x27;http://localhost:3333&#x27;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="comment">//开启代理服务器（二）:可以配置多个代理</span></span><br><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line"><span class="attr">proxy</span>:&#123;</span><br><span class="line"><span class="string">&#x27;/api&#x27;</span>:&#123; <span class="comment">//匹配所有以&#x27;/api&#x27;开头的请求路径</span></span><br><span class="line"><span class="attr">target</span>:<span class="string">&#x27;&lt;url&gt;&#x27;</span>,</span><br><span class="line"><span class="attr">ws</span>:<span class="literal">true</span>, <span class="comment">//用于支持websocket</span></span><br><span class="line"><span class="attr">changeOrigin</span>:<span class="literal">true</span> <span class="comment">//用于控制请求头中的host值,true时，服务器请求头伪装成localhost：5050，false时为localhost:8080</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;/test&#x27;</span>:&#123;</span><br><span class="line"><span class="attr">target</span>:<span class="string">&#x27;&lt;other_url&gt;&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;/test2&#x27;</span>&#123;</span><br><span class="line"><span class="attr">target</span>:<span class="string">&#x27;http://localhost:5000&#x27;</span>,</span><br><span class="line"><span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/test2&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;, <span class="comment">//清除地址前面的协议域名端口http://localhost:8080</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getStudents() &#123;</span><br><span class="line">      aixos.get(&quot;http://localhost:8081/students&quot;).then(</span><br><span class="line">        (response) =&gt; &#123;</span><br><span class="line">          console.log(&quot;请求成功&quot;, data);</span><br><span class="line">        &#125;,</span><br><span class="line">        (error) =&gt; &#123;</span><br><span class="line">          console.log(&quot;请求fail&quot;, message);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">      //aioxs.post(地址,&#123;key:value,key2:value2&#125;).then(function(response)&#123;&#125;,function(error)&#123;&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><p>用于父组件与子组件的通信</p>
<p>Category.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;category&quot;&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123;title&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;!--定义插槽--&gt;</span><br><span class="line">&lt;!-- 默认插槽 --&gt;</span><br><span class="line">&lt;slot &gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 具名插槽 --&gt;</span><br><span class="line">&lt;slot name=&quot;center&quot;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;footer&quot;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 作用域插槽:数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定 --&gt;</span><br><span class="line">&lt;slot :games=&quot;test&quot;  :games2:&#x27;list&#x27;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;Category&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return &#123;</span><br><span class="line"> test:[&#x27;xxx&#x27;,&#x27;0989&#x27;,&#x27;33&#x27;],</span><br><span class="line"> list:[&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;]</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> props:[&#x27;listData&#x27;,&#x27;title&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Category&gt;</span><br><span class="line">    &lt;img slot=&quot;center&quot; src=&quot;xxx&quot; /&gt;</span><br><span class="line">    &lt;a slot=&quot;footer&quot; href=&quot;xxxx&quot;&gt;&lt;/a&gt;</span><br><span class="line">  &lt;/Category&gt;</span><br><span class="line">  &lt;Category&gt;</span><br><span class="line">    &lt;template scope=&quot;test1&quot;&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123; test1.games &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123; test1.games2 &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Category&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><p>专门在 vue 中实现集中式状态（数据）管理的一个 vue 插件,对 vue 应用中多个组件的共享状态进行集中式的管理（读与写），也是一种组件间通信的方式，适用于任意组件间的通信。</p>
<p>使用时机：多个组件需要共享数据时</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/fJo8ZF"><img src="https://z3.ax1x.com/2021/08/10/fJo8ZF.png" alt="fJo8ZF.png"></a></p>
<h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p>创建文件：src/store/index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//使用vuex插件</span></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="comment">//action--用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions=&#123;&#125;</span><br><span class="line"><span class="comment">//mutations--用于操作数据state</span></span><br><span class="line"><span class="keyword">const</span> mutations=&#123;&#125;</span><br><span class="line"><span class="comment">//state--用于储存数据</span></span><br><span class="line"><span class="keyword">const</span> state=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建store</span></span><br><span class="line"><span class="keyword">const</span> store =<span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutatuons,</span><br><span class="line">state,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露store</span></span><br><span class="line">expore <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>在 main.js 中创建 vm 时传入 store 配置项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue form <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;/App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引用插件</span></span><br><span class="line"><span class="keyword">import</span> vueResource <span class="keyword">from</span> <span class="string">&#x27;vue-resource&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex form <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store form  <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用插件</span></span><br><span class="line">Vue.use(vueResource);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line"><span class="attr">render</span>:<span class="function"><span class="params">h</span>=&gt;</span>h(App),</span><br><span class="line">store,</span><br><span class="line"><span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">Vue.prototype.$bus=<span class="built_in">this</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>初始化数据、配置 actions、mutations，操作文件 store.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex form <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line">Vue.use (Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions=&#123;</span><br><span class="line"><span class="comment">//响应组件中的动组</span></span><br><span class="line"><span class="attr">jia</span>:<span class="function"><span class="keyword">function</span>(<span class="params">context,value</span>)</span>&#123;</span><br><span class="line"> <span class="comment">//context里中存放着一些方法</span></span><br><span class="line">context.commit(<span class="string">&#x27;JIA&#x27;</span>,value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations=&#123;</span><br><span class="line"><span class="comment">//执行jia</span></span><br><span class="line"><span class="attr">JIA</span>:<span class="function"><span class="keyword">function</span>(<span class="params">state,value</span>)</span>&#123;</span><br><span class="line">state.sum+=value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> state=&#123;sum=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.store(&#123;</span><br><span class="line"><span class="attr">actions</span>:actions,</span><br><span class="line">mutations,</span><br><span class="line">state,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>组件中读取 vuex 中的数据：<code>$store.state.sum</code><br>组件中修改 vuex 中的数据：<code>$store.dispatch(&#39;actions中的方法名&#39;,数据)</code>或<code>$store.commit(&#39;mutatuins中的方法名&#39;,数据)</code></p>
<blockquote>
<p>若没有网络请求或其他业务逻辑，组件中也可以越过 actions，即不写 dispatch,直接编写 commit</p>
</blockquote>
<h4 id="四个-map-方法的使用"><a href="#四个-map-方法的使用" class="headerlink" title="四个 map 方法的使用"></a>四个 map 方法的使用</h4><ul>
<li>mapState:用于帮助我们映射 state 中的数据为计算属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line"><span class="comment">//借助mapState生成计算属性，对象写法</span></span><br><span class="line">...mapState(&#123;<span class="attr">sum</span>:<span class="string">&#x27;sum&#x27;</span>,<span class="attr">school</span>:<span class="string">&#x27;shchool&#x27;</span>,<span class="attr">subject</span>:<span class="string">&#x27;subject&#x27;</span>&#125;);</span><br><span class="line"><span class="comment">//借助mapState生成计算属性，对象写法</span></span><br><span class="line">...mapState([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;shchool&#x27;</span>,<span class="string">&#x27;subject&#x27;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>mapGetters: 帮助我们映射 getters 中的数据为计算属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line">...mapGetters(&#123;<span class="attr">b</span>:<span class="string">&#x27;b&#x27;</span>&#125;);</span><br><span class="line">...mapGetters([<span class="string">&#x27;b&#x27;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>mapActions 方法：帮助我们生成与 action 对法的方法，即包含<code>$store.dispatch(xxx)</code>的函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">...mapActions(&#123;<span class="attr">inicrementOdd</span>:<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;jiaWait&#x27;</span>&#125;)</span><br><span class="line">...mapActions([<span class="string">&#x27;jiaOdd&#x27;</span>,<span class="string">&#x27;jiaWait&#x27;</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>mapMutations 方法：用于帮助我们生成与 mutations 对话的方法，即：包含$store.commit(xxx)的函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">...mapMutations(&#123;<span class="attr">increment</span>:<span class="string">&#x27;JIA&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;JIAN&#x27;</span>&#125;)</span><br><span class="line">...mapMutations([<span class="string">&#x27;JIA&#x27;</span>,<span class="string">&#x27;JIAN&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mapActions 与 mapMutations 使用时，若需要传递参数需要在模板中绑定事件时传递好参数，否则参数是事件对象</p>
</blockquote>
<h4 id="store-1"><a href="#store-1" class="headerlink" title="store"></a>store</h4><p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建store</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//应用vuex插件</span></span><br><span class="line">Vue.use(vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test=&#123;</span><br><span class="line"><span class="comment">//namespaced:true,</span></span><br><span class="line"><span class="attr">action</span>:&#123;&#125;,</span><br><span class="line"><span class="attr">mutations</span>:&#123;&#125;,</span><br><span class="line"><span class="attr">state</span>:&#123;&#125;,</span><br><span class="line"><span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//store：actions、mutations、state、getters</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.store&#123;</span><br><span class="line"> <span class="attr">modules</span>:&#123;</span><br><span class="line"> <span class="attr">a</span>:test,</span><br><span class="line"> <span class="attr">b</span>:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState,mapGetters,mapMutations,mapActions &#125; form &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;test&#x27;</span><br><span class="line">data()&#123;&#125;,</span><br><span class="line">computed:&#123;</span><br><span class="line">personList()&#123;</span><br><span class="line"> return this.$store.state.personAbout</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="模块化-命名空间"><a href="#模块化-命名空间" class="headerlink" title="模块化+命名空间"></a>模块化+命名空间</h3><p>为了让代码更好维护，让多种数据分类更加明确</p>
<p>修改 store.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAbout=&#123;</span><br><span class="line"><span class="attr">namespaced</span>:<span class="literal">true</span>, <span class="comment">//开启命名空间</span></span><br><span class="line"><span class="attr">state</span>:&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,</span><br><span class="line"><span class="attr">mutatuions</span>:&#123;.........&#125;,</span><br><span class="line"><span class="attr">actions</span>:&#123;..&#125;,</span><br><span class="line"><span class="attr">getters</span>:&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">bigSum</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">return</span> state.sum+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> personAbout=&#123;</span><br><span class="line"><span class="attr">namespaced</span>:<span class="literal">true</span>,</span><br><span class="line"><span class="attr">state</span>:&#123;..&#125;,</span><br><span class="line"><span class="attr">mutations</span>:&#123;&#125;,</span><br><span class="line"><span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store=<span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line"><span class="attr">modules</span>:&#123;</span><br><span class="line">countAbout,</span><br><span class="line">personAbout</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 state 数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.state.personAbout.list</span><br><span class="line"><span class="comment">//借助mapState读取</span></span><br><span class="line">...mapState(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum,&#x27;</span>school<span class="string">&#x27;,&#x27;</span>subject<span class="string">&#x27;]);</span></span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 getters 数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.getters(<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>)</span><br><span class="line"><span class="comment">//借助mapGetters读取</span></span><br><span class="line">...mapGetters(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 dispatch 数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;personAbout/addPersonWang&#x27;</span>person<span class="string">`)</span></span><br><span class="line"><span class="string">//借助mapActions读取</span></span><br><span class="line"><span class="string">...mapActions(&#x27;countAbout&#x27;,&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;);</span></span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 commit 数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$store.commit(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)</span><br><span class="line">...mapMutations(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&quot;JIA&quot;</span>,<span class="attr">decrement</span>:<span class="string">&quot;JIAN&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由就是一组映射（key-value）的对应关系,key 为路径，value 是 function 或 Component</p>
<ul>
<li>后端路由:value 是 function,用于处理客户端提交的请求，即服务端根据请求路径找到匹配的函数处理数据后，返回响应数据</li>
</ul>
<blockquote>
<p>路由组件一般放在 pages 文件夹，一般组件则放在 Component 文件夹；通过切换，隐藏了的路由组件，默认是被销毁的，需要的时候在去挂载；每个组件都有$route属性，里面存储着自己的路由信息<br>；整个应用只有一个route，可通过组件的$router 属性获取到。</p>
</blockquote>
<h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><p>vue 的一个插件库，用来实现 SPA 应用（单个 web 应用，整个页面只有一个完整页面，只会做页面的局部更新，数据需要通过 ajax 请求获取）</p>
<p>src/router/index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入路由</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入组件</span></span><br><span class="line"><span class="keyword">import</span> About form <span class="string">&#x27;../components/About.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Home form <span class="string">&#x27;../components/Home.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露一个路由器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;<span class="attr">path</span>:<span class="string">&quot;/about&quot;</span>,</span><br><span class="line"><span class="attr">component</span>:About</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&quot;/home&quot;</span></span><br><span class="line"><span class="attr">component</span>:Home</span><br><span class="line"><span class="attr">children</span>:[ <span class="comment">//多级路由</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>, <span class="comment">//不能写‘/news’</span></span><br><span class="line"><span class="attr">component</span>:News,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入APP</span></span><br><span class="line"><span class="keyword">import</span> App form <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router form <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用插件</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line"><span class="attr">render</span>:<span class="function"><span class="params">h</span>=&gt;</span>h(App),</span><br><span class="line"><span class="attr">router</span>:router</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.js 跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!--用route-link代替a标签去跳转--&gt;</span><br><span class="line">&lt;!--active-class属性：该元素激活时触发样式，可配置高亮样式--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home/news&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带query参数（字符串写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home/news?id=xxx&amp;titel=xxx&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带query参数（对象写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;</span><br><span class="line">&#123;path:&#x27;/home/news&#x27;,</span><br><span class="line">query:&#123;id:xxx,titel:xxx&#125;</span><br><span class="line">&#125;&quot;&gt;&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;router-view&gt;&lt;/route-view&gt; &lt;!--指定组件呈现的位置--&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>接收 query 参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.query.id;</span><br></pre></td></tr></table></figure>

<h4 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h4><p>简化路由跳转</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/demo&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:Demo,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"> <span class="attr">path</span>:<span class="string">&#x27;test&#x27;</span></span><br><span class="line"> <span class="attr">component</span>:Test,</span><br><span class="line"> <span class="attr">chilren</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;hello&#x27;</span> <span class="comment">//给路由命名</span></span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;welcome&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>:Hello</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:weather</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;weather/:id/:title&#x27;</span>, <span class="comment">//使用占位符声明接收params参数</span></span><br><span class="line"><span class="attr">component</span>:Weather</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跳转</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;name:hello&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">name:hello,</span></span></span><br><span class="line"><span class="string"><span class="tag">query:&#123;id:xxx,title:xxx&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#125;&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--跳转路由并携带params参数（字符串写法）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home/news/id/title&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--跳转路由并携带params参数（对象写法）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span>  <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">to</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#123;name:&#x27;weather&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">params:&#123;id:xxx,titel:xxx&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>携带 params 参数时，若使用 to 的对象写法，则不能使用 path 配置项，必须用 name 配置下</p>
</blockquote>
<p>接收 params 参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id;</span><br></pre></td></tr></table></figure>

<h4 id="路由的-props-配置"><a href="#路由的-props-配置" class="headerlink" title="路由的 props 配置"></a>路由的 props 配置</h4><p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line"></span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:Home,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line"><span class="attr">compomemt</span>:Detail,</span><br><span class="line"><span class="comment">//props的第一种写法，值为对象，该对象中的所有key-value都会以props的形式传给Detail组件</span></span><br><span class="line"><span class="attr">props</span>:&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="string">&#x27;hello&#x27;</span>&#125;</span><br><span class="line"><span class="comment">//props的第二种写法，值为布尔值，若布尔值为真，就会把该路由组件收到的所有params参数，以props的形式传给detail组件。只能传params参数</span></span><br><span class="line">props：<span class="literal">true</span></span><br><span class="line"><span class="comment">//props的第三种写法，值为函数,该函数返回的对象中每一组key-value都会通过props传给Detail组件</span></span><br><span class="line"><span class="function"><span class="title">props</span>(<span class="params">$route</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">id</span>:$route.query.id,<span class="attr">title</span>:$route.query.title&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Detail.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Detail&quot;,</span><br><span class="line">  props: [&quot;id&quot;, &quot;title&quot;],</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  mounted() &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>&lt;router-link&gt;</code>的 replace 属性<ul>
<li>作用：控制路由跳转时操作的浏览器历史记录的模式</li>
<li>历史记录的写入方式：<code>push</code>追加历史记录，<code>replace</code>替换当前记录；路由跳转时默认为<code>push</code></li>
<li><code>&lt;router-link replace &gt;test&lt;/router-link&gt;</code></li>
</ul>
</li>
</ul>
<p>message.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">name:&#x27;massage&#x27;,</span><br><span class="line">data()&#123;&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">pushShow(m)&#123;</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line"></span><br><span class="line"> name:&#x27;test&#x27;,</span><br><span class="line"> query:&#123;</span><br><span class="line">  id:m.id,</span><br><span class="line">  title:m.title</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Banner.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name:&#x27;Banner&#x27;</span><br><span class="line"> methods:&#123;</span><br><span class="line"> back()&#123;this.$router.back()&#125;,</span><br><span class="line"> forward()&#123;this.$router.forward()&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123; <span class="attr">id</span>: xxx, <span class="attr">title</span>: xxx &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.$router.replace(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123; <span class="attr">id</span>: xxx, <span class="attr">title</span>: xxx &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="缓存路由组件"><a href="#缓存路由组件" class="headerlink" title="缓存路由组件"></a>缓存路由组件</h3><p>让不展示的路由组件保持挂载，不被销毁</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;News&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>home.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;router-link to=&quot;/home/new&quot;&gt;news&lt;/router-link&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;router-link to=&quot;/home/message&quot;&gt;message&lt;/router-link&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!--缓存多个路由组件--&gt;</span><br><span class="line">    &lt;!-- &lt;keep-alive :include=&quot;[&#x27;&#x27;,&#x27;&#x27;]&quot;&gt;--&gt;</span><br><span class="line">    &lt;!--缓存一个路由组价--&gt;</span><br><span class="line">    &lt;keep-alive include=&quot;News&quot;&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Home&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>New.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> export default&#123;</span><br><span class="line"> name:&#x27;News&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line">  return&#123;</span><br><span class="line">  opacity:1</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> //路由组件所独有的两个钩子，用于捕获路由组件的激活状态</span><br><span class="line"> activated()&#123;console.log(&#x27;News组件被激活了&#x27;)&#125;</span><br><span class="line"> deactivated()&#123;console.log(&#x27;News组件失活了&#x27;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><p>对路由进行权限控制</p>
<ul>
<li>全局守卫</li>
</ul>
<p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> router=<span class="keyword">new</span> VueRounter(&#123;</span><br><span class="line"> <span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>:About</span><br><span class="line">  <span class="attr">meta</span>:&#123;<span class="attr">isAuth</span>:<span class="literal">true</span>,<span class="attr">title</span>:<span class="string">&#x27;新闻&#x27;</span>&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ]</span><br><span class="line"><span class="comment">//全局前置路由守卫---初始化时被调用，每次路由切换之前被调用</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(to.meta.isAuth)&#123;<span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line"> <span class="keyword">if</span>(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;shool&#x27;</span>)===<span class="string">&#x27;test&#x27;</span>)&#123;next();&#125;</span><br><span class="line"> <span class="keyword">else</span>&#123;alert(<span class="string">&#x27;学校名不对&#x27;</span>)&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">next(); <span class="comment">//放行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局前置路由守卫---初始化时被调用，每次路由切换之后被调用</span></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;后置路由守卫&#x27;</span>);</span><br><span class="line">dovument.title=to.meta.title||<span class="string">&#x27;testTitle&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<ul>
<li>独享守卫</li>
</ul>
<p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ......</span></span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:News,</span><br><span class="line"><span class="attr">meta</span>:&#123;<span class="attr">isAuth</span>:<span class="literal">true</span>,<span class="attr">title</span>:<span class="string">&#x27;新闻&#x27;</span>&#125;,</span><br><span class="line"><span class="attr">beforeEnter</span>:<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(to.meta.isAuth)&#123;<span class="comment">//判断当前路由是否需要进行权限控制</span></span><br><span class="line"> <span class="keyword">if</span>(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;shool&#x27;</span>)===<span class="string">&#x27;test&#x27;</span>)&#123;next();&#125;</span><br><span class="line"> <span class="keyword">else</span>&#123;alert(<span class="string">&#x27;学校名不对&#x27;</span>)&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">next(); <span class="comment">//放行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组件内守卫</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//进入守卫：进入该组件时被调用</span></span><br><span class="line"><span class="function"><span class="title">beforeRouteEnter</span>(<span class="params">to,<span class="keyword">from</span>,next</span>)</span>&#123;&#125;,</span><br><span class="line"><span class="comment">//离开守卫：离开该组件时被调用</span></span><br><span class="line"><span class="function"><span class="title">beforeRouteLeave</span>(<span class="params">to,<span class="keyword">from</span>,next</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由器工作模式"><a href="#路由器工作模式" class="headerlink" title="路由器工作模式"></a>路由器工作模式</h3><p>对于一个 url 来说<code>#</code>及其后的内容就是 hash 值;hash 值不会包含在 http 请求中，即 hash 值不会带给服务器。</p>
<ul>
<li>hash 模式:</li>
</ul>
<p>地址中永远带着#号，不美观；通过第三方手机 app 分享时可能会标记为不合法；但其兼容性好；</p>
<ul>
<li>history 模式:</li>
</ul>
<p>地址干净，兼容比 hash 略差，应用部署上线时需要后端人员支持，解决刷新页面服务端 404 的问题；</p>
<h2 id="Vue-UI-组件库"><a href="#Vue-UI-组件库" class="headerlink" title="Vue UI 组件库"></a>Vue UI 组件库</h2><p>移动端：<code>Vant</code>,<code>Cube UI</code>,<code>Mint UI</code></p>
<p>PC 端：<code>Element UI</code>, <code>IView UI</code></p>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入ElementUI组件库</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">//引入ElementUI全部样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.ues(ElementUI);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line"> <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span></span><br><span class="line"> <span class="attr">render</span>:<span class="function"><span class="params">h</span>=&gt;</span>h(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>balel.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&quot;@vue/cli-plugin-babel/preset&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;@babel/present-env&quot;</span>, &#123; <span class="attr">modules</span>: <span class="literal">false</span> &#125;],</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;component&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&quot;element-ui&quot;</span>,</span><br><span class="line">        <span class="attr">styleLibraryName</span>: <span class="string">&quot;theme-chalk&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="vue-刷新当前页面"><a href="#vue-刷新当前页面" class="headerlink" title="vue 刷新当前页面"></a>vue 刷新当前页面</h3><p>用 vue-router 重新路由到当前页面，页面是不进行刷新的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//###ctrl+F5刷新</span></span><br><span class="line">location.reload()；</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="built_in">this</span>.router.go(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//局部刷新</span></span><br><span class="line"><span class="number">1.</span> 跳转到一个空白页，再跳转回来</span><br><span class="line"><span class="number">2.</span> v-<span class="keyword">if</span>控制router-view的存亡来实现刷新</span><br></pre></td></tr></table></figure>

<h3 id="VUE-实现-checkbox-的勾选"><a href="#VUE-实现-checkbox-的勾选" class="headerlink" title="VUE 实现 checkbox 的勾选"></a>VUE 实现 checkbox 的勾选</h3><p>给选择按钮绑定 v-mode 变量，值为 true 时就是选中状态，绑定点击事件，执行勾选操作</p>
<h3 id="自定义-checkbox-样式"><a href="#自定义-checkbox-样式" class="headerlink" title="自定义 checkbox 样式"></a>自定义 checkbox 样式</h3><p>通过 label 标签将 input 包裹住，通过 label for 绑定 input id，<br>将 input 设置 <code>opacity: 0</code>;不可见，再通过给设置 lable 标签或其中 div 来设置 checkbox 的默认样式及选中状态样式</p>
<h3 id="特殊符号（Unicode）"><a href="#特殊符号（Unicode）" class="headerlink" title="特殊符号（Unicode）"></a>特殊符号（Unicode）</h3><p><code>https://www.cnblogs.com/Whikiey/archive/2011/01/05/1926220.html</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/05/22/21-23-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/22/21-23-11/" class="post-title-link" itemprop="url">JavaScript语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-22 21:23:11" itemprop="dateCreated datePublished" datetime="2021-05-22T21:23:11+08:00">2021-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p>运行在客户端的脚本语言；不需要编译，运行过程中由 js 引擎逐行解释并执行,也可以用于后端 node.js 技术<br>浏览器引擎：<br>渲染引擎：内核<br>js 引擎：js 解释器</p>
<ul>
<li>面向对象编程</li>
</ul>
<p>类：一类具有相同特征事物的抽象概念;<br>对象：具体的某一个个体，具有唯一性的实例；</p>
<p>编程思想：</p>
<ol>
<li> 分析有哪些实体</li>
<li> 设计实体的属性和功能</li>
<li> 实体间的相互作用</li>
</ol>
<ul>
<li>书写位置<ol>
<li>行内式：<code>&lt;input type=&quot;botton&quot; onclick=&quot;alert(&#39;hello!!&#39;) /&gt;</code>Html 推荐双引号，js 推荐单引号</li>
</ol>
</li>
</ul>
<blockquote>
<p>注释：外部脚本不能包含 <code>&lt;script&gt;</code> 标签。<br>优势：分离了 HTML 和代码,使 HTML 和 JavaScript 更易于阅读和维护,已缓存的 JavaScript 文件可加速页面加载<br>可通过完整的 URL 或相对于当前网页的路径引用外部脚本：<code>&lt;script src=&quot;www.xxx.com/..&quot;&gt;&lt;script&gt;</code></p>
</blockquote>
<ol start="2">
<li>外部链接：<code>&lt;script src=&quot;xxx.js&quot;&gt;&lt;/script&gt;</code>,标签中间不能写代码，会忽略</li>
<li>内联式：<code>&lt;script&gt;alert(&#39;hello&#39;)&lt;/script&gt;</code></li>
</ol>
<blockquote>
<p>js 脚本可被放置与 HTML 页面的 <code>&lt;body&gt;</code> 或<code>&lt;head&gt;</code> 部分中，或兼而有之。<br>提示：把脚本置于<code>&lt;body&gt;</code> 元素的底部，可改善显示速度，因为脚本编译会拖慢显示。<br>注释：旧的 JavaScript 例子也许会使用 type 属性：<code>&lt;script type=&quot;text/javascript&quot;&gt;</code>。<br>注释：type 属性不是必需的。JavaScript 是 HTML 中的默认脚本语言。</p>
</blockquote>
<h3 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h3><h4 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h4><p>由编译器自动分配释放 ，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。<br>基本数据类型变量保存在栈内存中，因为基本数据类型占用空间小、大小固定，通过值来访问，属于被频繁使用的数据。</p>
<blockquote>
<p>闭包中的基本数据类型变量是保存在堆内存里的，当函数执行完弹出调用栈后，返回一个内部函数的一个引用，这时候函数的变量就会转移到堆上，因此内部函数依然能访问到上一层函数的变量。</p>
</blockquote>
<h4 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h4><p>一般由程序员分配释放， 若程序员不释放，程序结束时可能由 OS 回收 。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表<br>引用数据类型存储在堆内存中，引用数据类型占据空间大、大小不固定，如果存储在栈中，将影响程序的运行性能。<br>引用数据类型会在栈中存储一个指针，这个指针指向堆内存空间中该实体的起始地址。<br>当解释器寻找引用值时，会先检索其在栈中的地址，取得地址后，从堆中获得实体。</p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量是弱类型的,重复声明 JavaScript 变量，将不会丢它的值。</p>
<table>
<thead>
<tr>
<th>情况</th>
<th>说明</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>var age;console.log(age)</td>
<td>只声明不负值</td>
<td>undefined</td>
</tr>
<tr>
<td>console.log(age)</td>
<td>不声明，不负值</td>
<td>报错</td>
</tr>
<tr>
<td>age=10;console.log(age)</td>
<td>不声明，只赋值</td>
<td>10(如果您为尚未声明的变量赋值，此变量会自动成为全局变量。)</td>
</tr>
</tbody></table>
<p>可以在字符串添加转义字符来使用引号：</p>
<p>如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量。</p>
<h4 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h4><ul>
<li>区分大小写</li>
<li>不能数字开头</li>
<li>可使用的符号作开头：下划线<code>_</code>，美元符<code>$</code></li>
</ul>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>动态数据类型。同一变量可做不同数据类型使用</p>
<p>基本数据类型：<code>number</code> <code>boolean</code> <code>string</code> <code>undefined</code> <code>null</code>,<code>BigInt</code>,<code>Symbol</code><br>复杂(引用)数据类型:<code>object</code></p>
<h4 id="查看数据类型"><a href="#查看数据类型" class="headerlink" title="查看数据类型"></a>查看数据类型</h4><ul>
<li>typeof</li>
</ul>
<p>typeof 运算符不是变量。它属于运算符。运算符（比如 + - * /）没有数据类型。<br>但是，typeof 始终会返回字符串（包含运算数的类型）。</p>
<p><code>console.log(typeof age);</code><br><code>console.log(typeof(age));</code></p>
<ul>
<li>instanceof 运算符<br>instanceof 用于判断某个对象是否被另一个函数构造。</li>
</ul>
<blockquote>
<p>只能判断复杂类型<br>instanceof，用于检测某个对象的原型链是否包含某个构造函数的 prototype 属性。<br>instanceof 适用于检测对象，它是基于原型链运作的。<br>instanceof 除了适用于任何 object 的类型检查之外，也可以用来检测内置对象，比如：Array、RegExp、Object、Function<br>instanceof 对基本数据类型检测不起作用，主要是因为基本数据类型没有原型链。</p>
</blockquote>
<ul>
<li>constructor 属性</li>
</ul>
<blockquote>
<p>每个原型对象上都有个 constructor 属性,指向该原型对象的构造函数<br>constructor 属性返回所有 JavaScript 变量的构造器函数。<br><code>undefined</code>,<code>null</code>没有 constructor</p>
</blockquote>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Bill&quot;</span>.constructor                 <span class="comment">// 返回 &quot;function String()  &#123; [native code] &#125;&quot;</span></span><br><span class="line">(<span class="number">3.14</span>).constructor                 <span class="comment">// 返回 &quot;function Number()  &#123; [native code] &#125;&quot;</span></span><br><span class="line"><span class="literal">false</span>.constructor                  <span class="comment">// 返回 &quot;function Boolean() &#123; [native code] &#125;&quot;</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].constructor              <span class="comment">// 返回 &quot;function Array()   &#123; [native code] &#125;&quot;</span></span><br><span class="line">&#123;<span class="attr">name</span>:<span class="string">&#x27;Bill&#x27;</span>, <span class="attr">age</span>:<span class="number">62</span>&#125;.constructor  <span class="comment">// 返回&quot; function Object()  &#123; [native code] &#125;&quot;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().constructor             <span class="comment">// 返回 &quot;function Date()    &#123; [native code] &#125;&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;.constructor         <span class="comment">// 返回 &quot;function Function()&#123; [native code] &#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h4><p><code>var flag=true;</code><br>true 参加数学加法时当做 1，false 为 0；</p>
<p>true:<code>-15</code> <code>&quot;false&quot;</code><br>false:<code>0</code> <code>-0</code> <code>&quot;&quot;</code> <code>undefined</code> <code>null</code> <code>false</code> <code>NaN</code></p>
<h4 id="undefined与null"><a href="#undefined与null" class="headerlink" title="undefined与null"></a><code>undefined</code>与<code>null</code></h4><p>undefined 表示尚未初始化的变量的值,这个变量从根本上就没有定义，而 null 表示该变量有意缺少对象指向,这个值虽然定义了，但它并未指向任何内存中的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>; <span class="comment">// true</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span>; <span class="comment">// false</span></span><br><span class="line">!!<span class="literal">null</span> === !!<span class="literal">undefined</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="literal">undefined</span> &#125;); <span class="comment">// &#x27;&#123;&#125;&#x27;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">b</span>: <span class="literal">null</span> &#125;); <span class="comment">// &#x27;&#123;b: null&#125;&#x27;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="literal">undefined</span>, <span class="attr">b</span>: <span class="literal">null</span> &#125;); <span class="comment">// &#x27;&#123;b: null&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123; <span class="attr">a</span>: <span class="literal">undefined</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj1.a); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.a); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p><code>undefined</code>与数字相加后结果为<code>NaN</code>;而<code>null</code>会隐式转换为 0<br><code>undefined</code>其类型也将是<code>undefined</code>。而<code>null</code>的类型为对象。</p>
<blockquote>
<p>ypeof null 输出为 ‘object’ 其实是一个底层的错误，但直到现阶段都无法被修复。<br>原因是，在 JavaScript 初始版本中，值以 32 位 存储。前 3 位 表示数据类型的标记，其余位则是值。<br>对于所有的对象，它的前 3 位 都以 000 作为类型标记位。在 JavaScript 早期版本中， null 被认为是一个特殊的值，用来对应 C 中的 空指针 。但 JavaScript 中没有 C 中的指针，所以 null 意味着什么都没有或者 void 并以 全 0(32 个) 表示。<br>因此每当 JavaScript 读取 null 时，它前端的 3 位 将它视为 对象类型 ，这也是为什么 typeof null 返回 ‘object’ 的原因。<br>任何变量均可通过设置值等于 <code>undefined</code> （<code>void 0</code>） 或<code>null</code>进行清空。</p>
</blockquote>
<h4 id="数字型"><a href="#数字型" class="headerlink" title="数字型"></a>数字型</h4><p>绝不要用前导零写数字（比如 07）。<br><code>Infinity</code>:无穷大；<br><code>-Infinity</code>:无穷小；<br>除以 0（零）也会生成 Infinity</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">2</span> / <span class="number">0</span>; <span class="comment">// x 将是 Infinity</span></span><br><span class="line"><span class="keyword">var</span> y = -<span class="number">2</span> / <span class="number">0</span>; <span class="comment">// y 将是 -Infinity</span></span><br></pre></td></tr></table></figure>

<h5 id="NaN-非数字"><a href="#NaN-非数字" class="headerlink" title="NaN:非数字"></a><code>NaN</code>:非数字</h5><blockquote>
<p>NaN 是数，typeof NaN 返回 number<br>尝试用一个非数字字符串进行除法会得到 NaN<br>可使用全局 JavaScript 函数 <code>isNaN()</code> 来确定某个值是否是数：</p>
</blockquote>
<p>JavaScript 数值始终是 <code>64 位</code>的浮点数,其中 0 到 51 存储数字（片段），52 到 62 存储指数，63 位存储符号</p>
<h5 id="精度"><a href="#精度" class="headerlink" title="精度"></a>精度</h5><p>整数（不使用指数或科学计数法）会被精确到 <code>15 位</code>。<br>小数的最大数是 <code>17 位</code>，但是浮点的算数并不总是 100% 精准</p>
<h5 id="数字字符串"><a href="#数字字符串" class="headerlink" title="数字字符串"></a>数字字符串</h5><p>JavaScript 字符串可以拥有数字内容：</p>
<p>在所有数字运算中，JavaScript 会尝试将字符串转换为数字：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">&quot;100&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="string">&quot;10&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> z = x / y; <span class="comment">// z 将是 10</span></span><br><span class="line"><span class="keyword">var</span> z = x * y; <span class="comment">// z 将是 1000</span></span><br><span class="line"><span class="keyword">var</span> z = x - y; <span class="comment">// z 将是 90</span></span><br><span class="line"><span class="comment">//警告！！</span></span><br><span class="line"><span class="comment">//JavaScript 的加法和级联（concatenation）都使用 + 运算符。</span></span><br><span class="line"><span class="comment">//如果您对一个数和一个字符串相加，结果也是字符串级联：</span></span><br><span class="line"><span class="keyword">var</span> z = x + y; <span class="comment">// z 不会是 110（而是 10010）</span></span><br></pre></td></tr></table></figure>

<h5 id="数值属性"><a href="#数值属性" class="headerlink" title="数值属性"></a>数值属性</h5><table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>MAX_VALUE</td>
<td>返回 JavaScript 中可能的最大数。</td>
</tr>
<tr>
<td>MIN_VALUE</td>
<td>返回 JavaScript 中可能的最小数。</td>
</tr>
<tr>
<td>NEGATIVE_INFINITY</td>
<td>表示负的无穷大（溢出返回）。</td>
</tr>
<tr>
<td>NaN</td>
<td>表示非数字值（”Not-a-Number”）。</td>
</tr>
<tr>
<td>POSITIVE_INFINITY</td>
<td>表示无穷大（溢出返回）。</td>
</tr>
</tbody></table>
<blockquote>
<p>数字属性不可用于变量<br>数字属性属于名为 number 的 JavaScript 数字对象包装器。<br>这些属性只能作为 Number.MAX_VALUE 访问。<br>使用 myNumber.MAX_VALUE，其中 myNumber 是变量、表达式或值，将返回 undefined：</p>
</blockquote>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">var</span> y = x.MAX_VALUE; <span class="comment">// y 成为 undefined</span></span><br><span class="line"><span class="comment">//只能如下使用</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="built_in">Number</span>.MIN_VALUE; <span class="comment">//返回 JavaScript 中可能的最小数字。</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>使用单引号或双引号，推荐单引号。在 js 中字符串既是基本数据类型，又是复合数据类型.</p>
<h5 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h5><ol>
<li><p>new 运算符声明(对象）</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;100&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>省略 new</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="built_in">String</span>(<span class="string">&quot;jjj&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>字符串常量声明</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;jjj&quot;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>嵌套：<code>var str=&#39;啥&quot;嘎&quot;嘎和&#39;; var str=&quot;航空&#39;港行&#39;供货商&quot;;</code>也可以加转义符<code>\</code><br>字符串长度：<code>var str=&#39;画口红管工行&#39;;  alert(str.length);</code></p>
<blockquote>
<p>注：中文 UTF-8（三个字符代表一个汉字），gbk（两个字符表示一个汉字）但计数时都当成一个字来计数。</p>
</blockquote>
<p>字符串拼接：<code>字符串+任何类型=拼接后的字符串</code></p>
<h4 id="js-判断字符串中是否包含某个字符串"><a href="#js-判断字符串中是否包含某个字符串" class="headerlink" title="js 判断字符串中是否包含某个字符串"></a>js 判断字符串中是否包含某个字符串</h4><ul>
<li><p><code>indexOf()</code> 与<code>lastIndexOf</code><br><code>indexOf()</code> 方法可返回某个指定的字符串值在字符串中首次出现的位置。（从 0 开始，未找到返回-1）<br><code>lastIndexOf()</code> 方法返回指定文本在字符串中最后一次出现的索引,其为从后向前进行检索<br>两种方法都接受作为检索起始位置的第二个参数。如<code>str.indexOf(&quot;China&quot;, 18);</code></p>
<pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">&quot;3&quot;</span>,<span class="number">0</span>) != -<span class="number">1</span> );  <span class="comment">// 未找到文本将返回-1</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p><code>include(str,position)</code><br>是否可以在另一个字符串中找到一个字符串，并根据情况返回 true 或 false<br>方法接受作为检索起始位置的第二个参数。如<code>str.include(&quot;China&quot;, 18);</code></p>
<pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">&quot;3&quot;</span>,<span class="number">0</span>) != -<span class="number">1</span> );  <span class="comment">// 未找到文本将返回-1</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p><code>search()</code><br>search() 方法用于检索字符串中指定的子字符串，或与正则表达式相匹配的子字符串，首次出现的位置。如果没有找到任何匹配的子串，则返回 -1。</p>
</li>
</ul>
<blockquote>
<p>传入的不是正则会隐式转换为正则</p>
</blockquote>
<pre><code>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.search(<span class="string">&quot;3&quot;</span>) != -<span class="number">1</span> );  <span class="comment">//并返回匹配位置的下标</span></span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li><code>match()</code></li>
</ul>
<p>用于检索字符串中指定的子字符串，或正则表达式相匹配的子串数组,否则返回 null</p>
<pre><code>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="keyword">if</span>(str.match(reg))&#123;</span><br><span class="line">    <span class="comment">// 包含</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li><p><code>test()</code><br><code>test()</code> 方法用于检索字符串中匹配的正则是否存在。若有则返回 true 否则 false。</p>
<pre><code>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(str)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p><code>exec()</code><br>exec() 方法用于检索字符串中的正则表达式的匹配。返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。</p>
<pre><code>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="built_in">RegExp</span>(<span class="regexp">/3/</span>);</span><br><span class="line"><span class="keyword">if</span>(reg.exec(str))&#123;</span><br><span class="line">    <span class="comment">// 包含</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h4 id="提取部分字符串"><a href="#提取部分字符串" class="headerlink" title="提取部分字符串"></a>提取部分字符串</h4><ul>
<li><code>slice(start, end)</code><br>提取<code>[start,end)</code>这部分字符串，返回新的字符串<br>如果某个参数为负，则从字符串的结尾开始计数。<br>如果省略第二个参数，则该 <code>slice()</code> 将删除前面的部分，保留后面的部分。<br>提示：负值位置不适用 Internet Explorer 8 及其更早版本。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Apple, Banana, Mango&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> res = str.slice(<span class="number">7</span>, <span class="number">13</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>substring(start, end)</code></li>
</ul>
<p><code>substring()</code> 类似于 <code>slice()</code>。提取<code>[start,end)</code>这部分字符串，返回新的字符串<br>不同之处在于 <code>substring()</code>无法接受负的索引，后一个值大于前一个时会调换参数。<br>如果省略第二个参数，则该<code>substring()</code> 将删除前面的部分，保留后面的部分。</p>
<ul>
<li><code>substr(start, length)</code>(废弃)<br>不同之处在于第二个参数规定被提取部分的长度。<br>如果首个参数为负，则从字符串的结尾计算位置。第二个参数不能为负，因为它定义的是长度。<br>如果省略第二个参数，则该 substring() 将删除前面的部分，保留后面的部分。</li>
</ul>
<h4 id="替换文本"><a href="#替换文本" class="headerlink" title="替换文本"></a>替换文本</h4><ul>
<li><code>replace()</code></li>
</ul>
<p><code>str.replace(oldstr,newstr);</code>该方法用另一个值替换在字符串中指定的值,会返回替换成功的新字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;Please visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.replace(<span class="string">&quot;Microsoft&quot;</span>, <span class="string">&quot;W3School&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>默认地，<code>replace()</code> 只替换首个匹配：如需替换所有匹配，请使用正则表达式的 <code>g</code> 标志（用于全局搜索)<br><code>replace()</code> 对大小写敏感。如需执行大小写不敏感的替换，请使用正则表达式 <code>i</code>（大小写不敏感）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;Please visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.replace(<span class="regexp">/MICROSOFT/gi</span>, <span class="string">&quot;W3School&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="转换为大写和小写"><a href="#转换为大写和小写" class="headerlink" title="转换为大写和小写"></a>转换为大写和小写</h4><p>通过 <code>toUpperCase()</code> 把字符串转换为大写：<br>通过 <code>toLowerCase()</code> 把字符串转换为小写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text1 = <span class="string">&quot;Hello World!&quot;</span>; <span class="comment">// 字符串</span></span><br><span class="line"><span class="keyword">var</span> text2 = text1.toUpperCase(); <span class="comment">// text2 是被转换为大写的 text1</span></span><br></pre></td></tr></table></figure>

<h4 id="concat-连接两个或多个字符串"><a href="#concat-连接两个或多个字符串" class="headerlink" title="concat() 连接两个或多个字符串"></a>concat() 连接两个或多个字符串</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text1 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> text2 = <span class="string">&quot;World&quot;</span>;</span><br><span class="line">text3 = text1.concat(text2);</span><br><span class="line">text4 = text1.concat(<span class="string">&quot;jjjjjj&quot;</span>, text2, <span class="string">&quot;jj&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="删除字符串两端的空白符"><a href="#删除字符串两端的空白符" class="headerlink" title="删除字符串两端的空白符"></a>删除字符串两端的空白符</h4><p><code>trim()</code> 方法删除字符串两端的空白符<br><code>trimEnd()</code> 方法删除字符串末尾的空白符<br><code>trimStart()</code> 方法删除字符串开头的空白符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;       Hello World!        &quot;</span>;</span><br><span class="line">alert(str.trim());</span><br><span class="line"><span class="comment">//Internet Explorer 8 或更低版本不支持 trim() 方法。</span></span><br><span class="line"><span class="comment">//如需支持 IE 8，您可搭配正则表达式使用 replace() 方法代替：</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;       Hello World!        &quot;</span>;</span><br><span class="line">alert(str.replace(<span class="regexp">/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g</span>, <span class="string">&quot;&quot;</span>));</span><br></pre></td></tr></table></figure>

<h4 id="提取字符串中的一个字符"><a href="#提取字符串中的一个字符" class="headerlink" title="提取字符串中的一个字符"></a>提取字符串中的一个字符</h4><p>这是两个提取字符串字符的安全方法：</p>
<ul>
<li>charAt(position)<br>charAt() 方法返回字符串中指定下标（位置）的字符串：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str.charAt(<span class="number">0</span>); <span class="comment">// 返回 H</span></span><br></pre></td></tr></table></figure>

<ul>
<li>charCodeAt(position)</li>
</ul>
<p>charCodeAt() 方法返回字符串中指定索引的字符 unicode 编码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str.charCodeAt(<span class="number">0</span>); <span class="comment">// 返回 72</span></span><br></pre></td></tr></table></figure>

<ul>
<li>String.fromCharCode(码值 1，码值 2…）<br>用于将 ASCII 码转换为对应字符,返回值为组合的字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="built_in">String</span>.fromCharCode(<span class="number">99</span>, <span class="number">93</span>, <span class="number">83</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>属性访问（Property Access）</li>
</ul>
<p>使用属性访问有点不太靠谱：</p>
<p>不适用 Internet Explorer 7 或更早的版本<br>它让字符串看起来像是数组（其实并不是）<br>如果找不到字符，[ ] 返回 undefined，而 charAt() 返回空字符串。<br>字符串是只读的，无法像数组一样通过索引下标去修改单个字符，除非整个修改。str[0] = “A” 不会产生错误（但也不会工作！）</p>
<blockquote>
<p>提示：如果您希望按照数组的方式处理字符串，可以先把它转换为数组。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line">str[<span class="number">0</span>]; <span class="comment">// 返回 H</span></span><br></pre></td></tr></table></figure>

<ul>
<li>把字符串转换为数组</li>
</ul>
<p>可以通过 split(分割符/正则,限制返回的数量)分割字符串，返回分割的子串组成的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> txt = <span class="string">&quot;a,b,c,d,e&quot;</span>; <span class="comment">// 字符串</span></span><br><span class="line">txt.split(<span class="string">&quot;,&quot;</span>); <span class="comment">// 用逗号分隔</span></span><br><span class="line">txt.split(<span class="string">&quot; &quot;</span>); <span class="comment">// 用空格分隔</span></span><br><span class="line">txt.split(<span class="string">&quot;|&quot;</span>); <span class="comment">// 用竖线分隔</span></span><br><span class="line"><span class="comment">//如果省略分隔符，被返回的数组将是整个字符串即[&quot;string&quot;]。</span></span><br><span class="line"><span class="comment">//若没有匹配，被返回的数组也是整个字符串即[&quot;string&quot;]</span></span><br><span class="line"><span class="comment">//如果分隔符是 &quot;&quot;，被返回的数组将是间隔单个字符的数组</span></span><br></pre></td></tr></table></figure>

<h5 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h5><p>正则表达式是构成搜索模式（search pattern）的字符序列。<br>语法：<code>/pattern/modifiers;</code>如：<code>var patt = /hello/i;</code></p>
<h6 id="声明-1"><a href="#声明-1" class="headerlink" title="声明"></a>声明</h6><ol>
<li>new 声明</li>
</ol>
<p>参数：第一个为字符串，第二个为修饰符(修饰符无顺序）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;ig&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> box1 = <span class="built_in">RegExp</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;ig&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>省略 new 声明</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box1 = <span class="regexp">/hello/gi</span>;</span><br></pre></td></tr></table></figure>

<p>正则表达式修饰符<br>修饰符可用于大小写不敏感的更全局的搜素：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>执行对大小写不敏感的匹配。</td>
</tr>
<tr>
<td>g</td>
<td>执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。</td>
</tr>
<tr>
<td>m</td>
<td>执行多行匹配。</td>
</tr>
</tbody></table>
<blockquote>
<p>字符串中，遇到换行，重新开始计算行首；</p>
</blockquote>
<p>正则表达式模式<br>括号用于查找一定范围的字符串：</p>
<p>| 表达式  | 描述                             |<br>| ——- | ——————————– | ——– | —————— |<br>| <code>[]</code>    | 查找方括号之间的任何符合的字符。 |<br>| <code>[^]</code>   | 匹配除括号内的字符               |<br>| <code>[0-9]</code> | 查找任何从 0 至 9 的数字。       |<br>| <code>(x     | y)</code>                              | 查找由 <code>|</code> 分隔的任何选项。 |</p>
<p>元字符（Metacharacter）是拥有特殊含义的字符：</p>
<table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配单个任意字符</td>
</tr>
<tr>
<td>\d</td>
<td>查找数字。</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字</td>
</tr>
<tr>
<td>\s</td>
<td>查找空白符、空格、制表符、换行符。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白字符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配空格字符。</td>
</tr>
<tr>
<td>\n</td>
<td>查找换行符。</td>
</tr>
<tr>
<td>\r</td>
<td>查找回车符。</td>
</tr>
<tr>
<td>\t</td>
<td>查找制表符。</td>
</tr>
<tr>
<td>\0</td>
<td>查找 null 符。</td>
</tr>
</tbody></table>
<p>锚字符<br>|||<br>|-|-|<br>|^|行首匹配|<br>|$|行尾匹配|</p>
<p>重复字符：(n 为任意的单个字符）</p>
<table>
<thead>
<tr>
<th>量词</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>n?</td>
<td>匹配任何包含零个或一个 n 的字符。</td>
</tr>
<tr>
<td>n+</td>
<td>匹配任何包含至少一个 n 的字符。</td>
</tr>
<tr>
<td>n*</td>
<td>匹配任何包含零个或多个 n 的字符。</td>
</tr>
<tr>
<td>n{m,n}</td>
<td>匹配至少 m 个，至多 n 个</td>
</tr>
<tr>
<td>n{m}</td>
<td>必须匹配 m 个</td>
</tr>
<tr>
<td>(abd)+</td>
<td>小括号中的部分代表一个字符串处理</td>
</tr>
</tbody></table>
<h4 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h4><h5 id="数字转为字符串"><a href="#数字转为字符串" class="headerlink" title="数字转为字符串"></a>数字转为字符串</h5><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>toString()</td>
<td><code>var num=1;alert(num.toString());</code></td>
</tr>
<tr>
<td>String()强制转换</td>
<td><code>var num=1; alert(String(num));</code></td>
</tr>
<tr>
<td><code>+</code>拼接，只要有一边是字符串，另一半也会转为字符串</td>
<td><code>var num=1; alert(num+&quot;&quot;);</code></td>
</tr>
</tbody></table>
<ul>
<li>能够使用 toString() 方法把数输出为十六进制、八进制或二进制。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myNumber = <span class="number">128</span>;</span><br><span class="line">myNumber.toString(<span class="number">16</span>); <span class="comment">// 返回 80</span></span><br><span class="line">myNumber.toString(<span class="number">8</span>); <span class="comment">// 返回 200</span></span><br><span class="line">myNumber.toString(<span class="number">2</span>); <span class="comment">// 返回 10000000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>toExponential() 返回字符串值，它包含已被四舍五入并使用指数计数法的数字。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">9.656</span>;</span><br><span class="line">x.toExponential(<span class="number">2</span>); <span class="comment">// 返回 9.66e+0</span></span><br><span class="line">x.toExponential(<span class="number">4</span>); <span class="comment">// 返回 9.6560e+0</span></span><br><span class="line">x.toExponential(<span class="number">6</span>); <span class="comment">// 返回 9.656000e+0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>toFixed() 返回字符串值，它包含了指定位数小数的数字：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">9.656</span>;</span><br><span class="line">x.toFixed(<span class="number">0</span>); <span class="comment">// 返回 10</span></span><br><span class="line">x.toFixed(<span class="number">2</span>); <span class="comment">// 返回 9.66</span></span><br><span class="line">x.toFixed(<span class="number">4</span>); <span class="comment">// 返回 9.6560</span></span><br><span class="line">x.toFixed(<span class="number">6</span>); <span class="comment">// 返回 9.656000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>toPrecision() 返回字符串值，它包含了指定长度的数字：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">9.656</span>;</span><br><span class="line">x.toPrecision(); <span class="comment">// 返回 9.656</span></span><br><span class="line">x.toPrecision(<span class="number">2</span>); <span class="comment">// 返回 9.7</span></span><br><span class="line">x.toPrecision(<span class="number">4</span>); <span class="comment">// 返回 9.656</span></span><br><span class="line">x.toPrecision(<span class="number">6</span>); <span class="comment">// 返回 9.65600</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>在 JavaScript 中，数字可以是原始值（typeof = number）或对象（typeof = object）。<br>在 JavaScript 内部使用 valueOf() 方法可将 Number 对象转换为原始值。<br>所有 JavaScript 数据类型都有 valueOf() 和 toString() 方法。</p>
</blockquote>
<h5 id="字符串转数字"><a href="#字符串转数字" class="headerlink" title="字符串转数字"></a>字符串转数字</h5><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>parseInt(string)</code>保留整数,去掉单位;只返回首个数字;如果无法转换为数值，则返回 NaN</td>
<td><code>parseInt(&#39;11&#39;);</code></td>
</tr>
<tr>
<td><code>parseFloat(string)</code>只返回首个数字,包括小数部分</td>
<td><code>parseFloat(&#39;222&#39;);</code></td>
</tr>
<tr>
<td><code>Number()</code>强制转换</td>
<td><code>Number(&#39;22&#39;);</code></td>
</tr>
<tr>
<td>js 隐式转换（减，乘，除)</td>
<td><code>&#39;11&#39;-0</code></td>
</tr>
</tbody></table>
<blockquote>
<p>Number() 还可以把日期转换为数字：<code>Number(new Date(&quot;2019-04-15&quot;));    // 返回 1506729600000</code>方法返回 1970 年 1 月 1 日至今的毫秒数。</p>
</blockquote>
<p><code>==</code>符号会把字符串的数据类型转换为数字型再比较。<br><code>===</code>两侧的值和数据类型一样才相等。</p>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><h4 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h4><ul>
<li>自增和自减操作符<code>--</code>,<code>++</code><br><code>++i,i++</code>单独使用没有区别</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先加再用</span></span><br><span class="line"><span class="keyword">let</span> i=<span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(++i + <span class="number">2</span>)<span class="comment">//4</span></span><br><span class="line"><span class="comment">//先用再加</span></span><br><span class="line"><span class="keyword">let</span> a=<span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(a++ + <span class="number">2</span>)<span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b=<span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(b++ + <span class="number">3</span> ++b)<span class="comment">//7</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一元加减操作符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="built_in">BigInt</span>;</span><br><span class="line"><span class="built_in">console</span>.log(+a); <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(+b); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(+c); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(-a); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(-b); <span class="comment">// -2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>void</code>操作符</li>
</ul>
<p>由于 <code>void</code> 运算符的优先级比较高，高于普通运算符的优先级，所以在使用时应该使用小括号明确 <code>void</code> 运算符操作的操作数，避免引发错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = (b = c = <span class="number">2</span>); <span class="comment">// 定义并初始化变量的值</span></span><br><span class="line">d = <span class="keyword">void</span> (a -= b *= c += <span class="number">5</span>); <span class="comment">// 执行void运算符，并把返回值赋予变量d</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// -12</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 14</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 7</span></span><br><span class="line"><span class="built_in">console</span>.log(d); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="加减乘除操作符"><a href="#加减乘除操作符" class="headerlink" title="加减乘除操作符"></a>加减乘除操作符</h4><ul>
<li>加</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span>; <span class="comment">// 3</span></span><br><span class="line"><span class="string">&quot;1&quot;</span> + <span class="string">&quot;2&quot;</span>; <span class="comment">// &quot;12&quot;</span></span><br><span class="line"><span class="string">&quot;1&quot;</span> + <span class="number">2</span>; <span class="comment">// &quot;12&quot;</span></span><br><span class="line"><span class="number">1</span> + &#123;&#125;; <span class="comment">// &quot;1[object Object]&quot;</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">false</span>; <span class="comment">// 1  布尔值会先转为数字，再进行运算</span></span><br><span class="line"><span class="number">1</span> + <span class="literal">null</span>; <span class="comment">// 1 null会转化为0，再进行计算</span></span><br><span class="line"><span class="number">1</span> + <span class="literal">undefined</span>; <span class="comment">// NaN undefined转化为数字是NaN</span></span><br></pre></td></tr></table></figure>

<p>如果有一个操作数是 NaN，则结果是 NaN；<br>如果是 Infinity 加 Infinity，则结果是 Infinity；<br>如果是-Infinity 加-Infinity，则结果是-Infinity；<br>如果是 Infinity 加-Infinity，则结果是 NaN；<br>如果是+0 加+0，则结果是+0；<br>如果是-0 加-0，则结果是-0；<br>如果是+0 加-0，则结果是+0。</p>
<ul>
<li>减<br>减法操作和加法操作符类似， 但是减法操作符只能用于数值的计算，不能用于字符串的拼接</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> - <span class="number">1</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="number">3</span> - <span class="literal">true</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="number">3</span> - <span class="string">&quot;&quot;</span>; <span class="comment">// 3</span></span><br><span class="line"><span class="number">3</span> - <span class="literal">null</span>; <span class="comment">// 3</span></span><br><span class="line"><span class="literal">NaN</span> - <span class="number">1</span>; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<p>如果是 Infinity 减 Infinity，则结果是 NaN；<br>如果是-Infinity 减-Infinity，则结果是 NaN；<br>如果是 Infinity 减-Infinity，则结果是 Infinity；<br>如果是-Infinity 减 Infinity，则结果是-Infinity；<br>如果是+0 减+0，则结果是+0；<br>如果是-0 减+0，则结果是-0；<br>如果是-0 减-0，则结果是+0。</p>
<ul>
<li><p>乘<br>如果有一个操作数是 NaN，则结果是 NaN；<br>如果 Infinity 与 0 相乘，则结果是 NaN；<br>如果 Infinity 与非 0 数值相乘，则结果是 Infinity 或-Infinity，取决于有符号操作数的符号；<br>如果 Infinity 与 Infinity 相乘，则结果是 Infinity。</p>
</li>
<li><p>除法<code>/</code><br>如果有一个操作数是 NaN，则结果是 NaN；<br>如果 0 除以 0，则结果是 NaN；<br>如果 Infinity 除以 Infinity，则结果是 Infinity。<br>如果是非零的有限数被零除，则结果是 Infinity 或-Infinity，取决于有符号操作数的符号；<br>如果是 Infinity 被任何非零数值除，则结果是 Infinity 或-Infinity，取决于有符号操作数的符号。</p>
</li>
<li><p>取余<code>%</code><br>如果被除数是无穷大值而除数是有限大的数值，则结果是 NaN；<br>如果被除数是有限大的数值而除数是零，则结果是 NaN；<br>如果是 Infinity 被 Infinity 除，则结果是 NaN；<br>如果被除数是有限大的数值而除数是无穷大的数值，则结果是被除数；<br>如果被除数是零，则结果是零。</p>
</li>
<li><p>幂运算<code>**</code></p>
</li>
</ul>
<p><code>Math.pow(2, 10);    // 1024</code></p>
<h4 id="关系操作符"><a href="#关系操作符" class="headerlink" title="关系操作符"></a>关系操作符</h4><p>小于（&lt;）<br>大于（&gt;）<br>小于等于（&lt;=）<br>大于等于（&gt;=）</p>
<p>如果这两个操作数都是数值，则执行数值比较；<br>如果两个操作数都是字符串，则比较两个字符串对应的字符编码值；<br>如果一个操作数是数值，则将另一个操作数转换为一个数值，然后执行数值比较；<br>如果一个操作数是对象，则调用这个对象的 valueOf()方法，并用得到的结果根据前面的规则执行比较；<br>如果一个操作数是布尔值，则先将其转换为数值，然后再执行比较。</p>
<h4 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h4><ul>
<li>等于（<code>==</code>）不等于（<code>!=</code>）</li>
</ul>
<p>首先会判断两者类型是否相同，相同的话就比较两者的大小；<br>类型不相同的话，就会进行类型转换；<br>判断两者类型是否为 string 和 number，是的话就会根据 ASCII 将字符串转换为 number<br>判断两者类型是否为 string 和 string，是的话就会根据 ASCII 将字符串转换为 number,从左到右比较，第一位相等就比较下一位，由此类推<br>判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断<br>判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断</p>
<ul>
<li>全等（<code>===</code>）不全等（<code>!==</code>）<br>只有当两个操作数的数据类型和值都相等时，才会返回 true。它并不会进行数据类型的转化。​</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//NaN不等于任何值，包括它本身</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span>; <span class="comment">//false</span></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">//false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>; <span class="comment">//true</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span>; <span class="comment">//false</span></span><br><span class="line"><span class="number">1</span> == <span class="string">&quot;1&quot;</span>; <span class="comment">//true</span></span><br><span class="line"><span class="number">1</span> === <span class="string">&quot;1&quot;</span>; <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//浏览器自己隐式创建的包装对象和我们显式创建的包装对象不严格相等，我们举个例子说明下：</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;神奇的程序员&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> info = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;神奇的程序员&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(name == info); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(name === info); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>浮点数相等比较</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> / <span class="number">3</span> === <span class="number">1</span> - <span class="number">2</span> / <span class="number">3</span>; <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 浮点数在运算过程中会产生误差，因为计算机无法精确表示无限循环小数。要比较两个浮点数是否相等，只能计算它们之差的绝对值，看是否小于某个阈值</span></span><br><span class="line"><span class="built_in">Math</span>.abs(<span class="number">1</span> / <span class="number">3</span> - (<span class="number">1</span> - <span class="number">2</span> / <span class="number">3</span>)) &lt; <span class="number">0.0000001</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><ul>
<li>逻辑非</li>
</ul>
<p>如果操作数是非 0 数值（包括 Infinity)，则返回 false；<br>如果操作数是 null，则返回 true；<br>如果操作数是 NaN，则返回 true；<br>如果操作数是 undefined， 则返回 true.</p>
<p>逻辑非操作符也可以用于将任何值转化为布尔值，同时使用两个!，相当于调用了 Boolean()方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">!!<span class="string">&quot;blue&quot;</span>; <span class="comment">// true</span></span><br><span class="line">!!<span class="number">0</span>; <span class="comment">// false</span></span><br><span class="line">!!<span class="literal">NaN</span>; <span class="comment">// false</span></span><br><span class="line">!!<span class="string">&quot;&quot;</span>; <span class="comment">// false</span></span><br><span class="line">!!<span class="number">12345</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>逻辑与<br><code>表达式1&amp;&amp;表达式2</code>如果第一个表达式为真，则返回表达式 2，否则返回表达式 1</li>
</ul>
<blockquote>
<p><code>0</code> <code>&#39;&#39;</code> <code>null</code> <code>undefind</code> <code>NaN</code>为假</p>
</blockquote>
<ul>
<li>逻辑或<br><code>表达式1||表达式2</code>如果表达式 1 为真则返回表达式 1，否则返回表达式 2</li>
</ul>
<h4 id="空值合并操作符（-）"><a href="#空值合并操作符（-）" class="headerlink" title="空值合并操作符（??）"></a>空值合并操作符（<code>??</code>）</h4><p>只有 ?? 左边为 null 或 undefined 时才返回右边的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dogName = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> name = dogName ?? <span class="string">&quot;default&quot;</span>; <span class="comment">// name = false;</span></span><br></pre></td></tr></table></figure>

<h4 id="可选链操作符（-）"><a href="#可选链操作符（-）" class="headerlink" title="可选链操作符（?.）"></a>可选链操作符（<code>?.</code>）</h4><p>在引用为 null 或 undefined 的情况下不会引起错误，该表达式短路返回值是 undefined。与函数调用一起使用时，如果给定的函数不存在，则返回 undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = system?.user?.addr?.province?.name || <span class="string">&quot;default&quot;</span>;</span><br><span class="line">a?.[x];</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a[x];</span><br><span class="line"></span><br><span class="line">a?.b();</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a.b();</span><br><span class="line"></span><br><span class="line">a?.();</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">a == <span class="literal">null</span> ? <span class="literal">undefined</span> : a();</span><br></pre></td></tr></table></figure>

<h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><p>1）原码</p>
<p>原码就是一个数的二进制数。例如：10 的原码为 0000 1010</p>
<p>2）反码</p>
<p>正数的反码与原码相同，如：10 反码为 0000 1010<br>负数的反码为除符号位，按位取反，即 0 变 1，1 变 0。</p>
<p>3）补码</p>
<p>正数的补码与原码相同，如：10 补码为 0000 1010<br>负数的补码是原码除符号位外的所有位取反即 0 变 1，1 变 0，然后加 1，也就是反码加 1。</p>
<p>位运算符处理 32 位数。</p>
<p>该运算中的任何数值运算数都会被转换为 32 位的数。结果会被转换回 JavaScript 数。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>例子</th>
<th>等同于</th>
<th>结果</th>
<th>十进制</th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;</code></td>
<td>与</td>
<td>5 &amp; 1</td>
<td>0101 &amp; 0001</td>
<td>0001</td>
<td>1</td>
</tr>
<tr>
<td>|</td>
<td>或</td>
<td>5 | 1</td>
<td>0101 | 0001</td>
<td>0101</td>
<td>5</td>
</tr>
<tr>
<td><code>~</code></td>
<td>非</td>
<td>~ 5</td>
<td>~0101</td>
<td>1010</td>
<td>10</td>
</tr>
<tr>
<td><code>^</code></td>
<td>异或</td>
<td>5 ^ 1</td>
<td>0101 ^ 0001</td>
<td>0100</td>
<td>4</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>各二进制位全部左移若干位,高位丢弃，低位补 0</td>
<td>5 &lt;&lt; 1</td>
<td>0101 &lt;&lt; 1</td>
<td>1010</td>
<td>10</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>各二进制位全部右移若干位，正数左补 0，负数左补 1，右边丢弃</td>
<td>5 &gt;&gt; 1</td>
<td>0101 &gt;&gt; 1</td>
<td>0010</td>
<td>2</td>
</tr>
<tr>
<td><code>&gt;&gt;&gt;</code></td>
<td>零填充右位移</td>
<td>5 &gt;&gt;&gt; 1</td>
<td>0101 &gt;&gt;&gt; 1</td>
<td>0010</td>
<td>2</td>
</tr>
</tbody></table>
<blockquote>
<p>无符号右移操作符（&gt;&gt;&gt;）会将数值的 32 位全部右移。对于正数，有符号右移操作符和无符号右移操作符的结果是一样的。对于负数的操作，两者就会有较大的差异。<br>无符号右移操作符将负数的二进制表示当成正数的二进制表示来处理。所以，对负数进行无符号右移操作之后就会变的特别大。</p>
</blockquote>
<blockquote>
<p>上例使用 4 位无符号的例子。但是 JavaScript 使用 32 位有符号数。</p>
</blockquote>
<blockquote>
<p>因此，在 JavaScript 中，~ 5 不会返回 10，而是返回 -6。</p>
</blockquote>
<blockquote>
<p>~00000000000000000000000000000101 将返回 11111111111111111111111111111010。</p>
</blockquote>
<p>幂运算符为<code>**</code>而不是<code>^</code>,也可以用<code>Math.pow(x,y)</code>实现</p>
<h4 id="运算符号优先级"><a href="#运算符号优先级" class="headerlink" title="运算符号优先级"></a>运算符号优先级</h4><p>|            |                               |<br>| ———- | —————————– | — | — |<br>| 小括号     | <code>()</code>                          |<br>| 一元运算符 | <code>++</code>,<code>--</code>,<code>!</code>                 |<br>| 算数运算符 | 先<code>*</code>,<code>/</code>,<code>%</code>,<code>**</code>,后<code>+</code>,<code>-</code>, |<br>| 关系运算符 | <code>&gt;</code>,<code>&gt;=</code>,<code>&lt;=</code>,<code>&lt;</code>,            |<br>| 相等运算符 | <code>==</code>,<code>===</code>,<code>!==</code>,<code>!=</code>,        |<br>| 逻辑运算符 | 先<code>&amp;&amp;</code>后<code>                    |     |</code>   |<br>| 赋值       | <code>=</code>                           |<br>| 逗号       | <code>,</code>                           |</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h4><p>数组是对象</p>
<ul>
<li>利用 new 创建数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//注意大写</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>); <span class="comment">//只有一个数字时，为直接创建长度为2的空数组</span></span><br><span class="line"><span class="keyword">var</span> cars = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&quot;Saab&quot;</span>, <span class="string">&quot;Volvo&quot;</span>, <span class="string">&quot;BMW&quot;</span>); <span class="comment">//也可以直接赋值</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组字面量方式创建</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;xxx&quot;</span>, <span class="number">77</span>, <span class="literal">true</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li>获取数组元素：<code>数组名[索引号]</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//二位数组,只对字符串有用</span></span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="number">0</span>][<span class="number">0</span>]); <span class="comment">//结果为第二个x</span></span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="number">2</span>][<span class="number">0</span>]); <span class="comment">//结果为undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组长度：<code>数组名.length</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a.length); <span class="comment">//新增数组元素</span></span><br><span class="line"><span class="comment">//修改数组索引追加数组元素</span></span><br><span class="line"><span class="comment">//不能直接给数组名赋值，否则会覆盖以前的数据</span></span><br></pre></td></tr></table></figure>

<ul>
<li>变量里存放的是数组的地址</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;jjj&quot;</span>, <span class="string">&quot;222&quot;</span>, <span class="literal">true</span>, <span class="number">222</span>];</span><br><span class="line"><span class="keyword">var</span> arr1 = arr;</span><br><span class="line"><span class="built_in">console</span>.log(arr1);</span><br><span class="line">arr1.push(<span class="string">&quot;end&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;push:&quot;</span>, arr1);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//arr也会一起变化</span></span><br></pre></td></tr></table></figure>

<h4 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// for循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(array[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for ..in</span></span><br><span class="line"><span class="comment">//遍历数组时也会遍历非数字键名,所以不推荐 for..in 遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> array) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i, array[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forEach</span></span><br><span class="line"><span class="comment">//用来遍历数组中的每一项，不影响原数组，性能差</span></span><br><span class="line"><span class="comment">//不支持break和continue，return只会跳过本次循环，可用throw抛出异常配合try...catch来结束循环</span></span><br><span class="line">array.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, array</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item, index, array);</span><br><span class="line">  <span class="comment">// 不能通过item改变数组原来的值</span></span><br><span class="line">  <span class="comment">//array参数是浅拷贝</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// for....of</span></span><br><span class="line"><span class="comment">//语句支持return和 break</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> array) &#123;</span><br><span class="line">  <span class="comment">//item为当前遍历到的元素</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// while 循环</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; array.length) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(array[i]);</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//map()</span></span><br><span class="line">array.map(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="数组的操作方法"><a href="#数组的操作方法" class="headerlink" title="数组的操作方法"></a>数组的操作方法</h4><p>11 种：push,pop,shift,unshift,splice,slice,concat,join,sort,reverse,toString</p>
<ul>
<li><p>JS 数组添加元素</p>
<ol>
<li><p>在末尾追加<code>push()</code>；</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向arr数组的末尾追加元素，</span></span><br><span class="line">arr.push(<span class="string">&quot;lemon&quot;</span>, <span class="string">&quot;cucumber&quot;</span>);</span><br><span class="line">alert(arr);</span><br><span class="line"><span class="comment">//push()方法会返回新数组的长度</span></span><br></pre></td></tr></table></figure>

<p> 也可以使用 <code>length</code> 属性向数组添加新元素：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits[fruits.length] = <span class="string">&quot;Lemon&quot;</span>; <span class="comment">// 向 fruits 添加一个新元素 (Lemon)</span></span><br><span class="line"><span class="comment">//添加具有高索引的元素会在数组中创建未定义的undefined</span></span><br><span class="line">fruits[<span class="number">10</span>] = <span class="string">&quot;Lemon&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>在第一位添加<code>unshift()</code>；</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向arr数组的第一位添加元素，</span></span><br><span class="line">arr.unshift(<span class="string">&quot;peach&quot;</span>, <span class="string">&quot;pear&quot;</span>); <span class="comment">//返回新数组的长度。</span></span><br><span class="line">alert(arr);</span><br></pre></td></tr></table></figure></li>
<li><p>在指定位置添加<code>splice()</code>;</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///从数组中添加/删除项目，然后返回被删除的项目,如果有的话。</span></span><br><span class="line">arr.splice(<span class="number">3</span>, <span class="number">0</span>, <span class="string">&quot;元素1&quot;</span>, <span class="string">&quot;元素2&quot;</span>);</span><br><span class="line">alert(arr);</span><br><span class="line"><span class="comment">//arrayObject.splice(index,howmany,item1,.....,itemX)</span></span><br><span class="line"><span class="comment">//index 必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置。</span></span><br><span class="line"><span class="comment">//howmany 必需。要删除的项目数量。如果设置为 0，则不会删除项目。</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>删除元素</p>
<ol>
<li><p><code>pop()</code> 方法从数组中删除最后一个元素：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.pop(); <span class="comment">// 从 fruits 删除最后一个元素（&quot;Mango&quot;）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits2 = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="comment">// pop() 方法返回被删除的值：</span></span><br><span class="line"><span class="keyword">var</span> x = fruits2.pop(); <span class="comment">// x 的值是 &quot;Mango&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>shift()</code> 方法会删除首个数组元素，</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.shift(); <span class="comment">// 从 fruits 删除第一个元素 &quot;Banana&quot;</span></span><br><span class="line"><span class="comment">//shift() 方法返回被删除的字符串即 返回 &quot;Banana&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>delete</code> 运算符来删除：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">delete</span> fruits[<span class="number">0</span>]; <span class="comment">// 把 fruits 中的首个元素改为 undefined</span></span><br><span class="line"><span class="comment">//用 delete 会在数组留下未定义的空洞。请使用 pop() 或 shift() 取而代之。</span></span><br><span class="line"><span class="comment">//原型中声明的属性和对象自带的属性无法被删除；</span></span><br><span class="line"><span class="comment">//通过var声明的变量和通过function声明的函数拥有dontdelete特性，是不能被删除。</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用 <code>splice()</code> 来删除元素</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过聪明的参数设定，您能够使用 splice() 在数组中不留“空洞”的情况下移除元素：</span></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.splice(<span class="number">0</span>, <span class="number">1</span>); <span class="comment">// 删除 fruits 中的第一个元素</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><code>concat()</code> 方法通过合并现有数组来创建一个新数组（浅拷贝,第一层有效）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myGirls = [<span class="string">&quot;Cecilie&quot;</span>, <span class="string">&quot;Lone&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> myBoys = [<span class="string">&quot;Emil&quot;</span>, <span class="string">&quot;Tobias&quot;</span>, <span class="string">&quot;Linus&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> myChildren = myGirls.concat(myBoys, <span class="string">&quot;jjjj&quot;</span>, <span class="number">11</span>); <span class="comment">// 连接 myGirls 和 myBoys,&quot;jjj&quot;等</span></span><br><span class="line"><span class="comment">//concat() 方法不会更改现有数组。它总是返回一个新数组。</span></span><br><span class="line"><span class="comment">//concat() 方法可以使用任意数量的数组参数：</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>join()</code> 方法</p>
</li>
</ul>
<p>会将数组内的所有元素结合为一个字符串。当然您还可以规定分隔符(默认以逗号分割)：<code>array.join(&quot;,&quot;)</code></p>
<ul>
<li><code>toString()</code>方法</li>
</ul>
<p>把数组转换为数组值（逗号分隔）的字符串。</p>
<ul>
<li><code>slice(start,end)</code>裁剪数组<br>方法用数组的某个片段切出新数组。<strong>原数组不会发生改变</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Lemon&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> citrus = fruits.slice(<span class="number">1</span>); <span class="comment">//默认到结尾</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>sort()</code> 方法以字母顺序对数组进行排序：</li>
</ul>
<p>该函数很适合字符串（”Apple” 会排在 “Banana” 之前）。不过，如果数字按照字符串来排序，则 “25” 大于 “100”，因为 “2” 大于 “1”。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.sort(); <span class="comment">// 对 fruits 中的元素进行排序</span></span><br></pre></td></tr></table></figure>

<p><code>sort()</code> 方法在对数值排序时会产生不正确的结果。我们通过一个比值函数来修正此问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;); <span class="comment">//升序，从小到大</span></span><br><span class="line"><span class="comment">//比值函数</span></span><br><span class="line"><span class="comment">//比较函数的目的是定义另一种排序顺序。</span></span><br><span class="line"><span class="comment">//比较函数应该返回一个负，零或正值，这取决于参数：</span></span><br><span class="line"><span class="comment">//function(a, b)&#123;return a-b&#125;</span></span><br><span class="line"><span class="comment">//当 sort() 函数比较两个值时，会将值发送到比较函数，并根据所返回的值（负、零或正值）对这些值进行排序。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>reverse()</code> 方法反转数组</li>
</ul>
<p>您可以使用它以降序对数组进行排序：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.sort(); <span class="comment">// 对 fruits 中的元素进行排序</span></span><br><span class="line">fruits.reverse(); <span class="comment">// 反转元素顺序</span></span><br></pre></td></tr></table></figure>

<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><ul>
<li>利用对象字面量创建对象{}</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">//创建了一个空的对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&quot;张山&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>,</span><br><span class="line">  <span class="attr">hi</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;hello!!!!!!!!!!!!!!&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>利用 new Object 创建对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = <span class="keyword">new</span> <span class="built_in">Object</span>(); <span class="comment">//创建一个空对象,可省略new</span></span><br><span class="line">obj1.username = <span class="string">&quot;张山&quot;</span>;</span><br><span class="line">obj1.age = <span class="number">18</span>;</span><br><span class="line">obj1.sex = <span class="string">&quot;男&quot;</span>;</span><br><span class="line">obj1.hi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;hello!!!!!!!!!!!!!!&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>利用构造函数创建对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function 构造函数名()&#123;</span></span><br><span class="line"><span class="comment">//this.属性名=值;</span></span><br><span class="line"><span class="comment">//this.方法名=function()&#123;&#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">// new 构造函数名();</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Star</span>(<span class="params">username, age, sex</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = username;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  <span class="built_in">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> Star(<span class="string">&quot;刘德华&quot;</span>, <span class="number">58</span>, <span class="string">&quot;男&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>当通过 new 关键字调用时会创建一个空的对象实例，并将其作为 this 传递给构造函数。 new 操作内部主要执行了以下几个步骤：</p>
<p>1.创建一个新的空对象。</p>
<p>2.将新对象的 <code>__proto__</code> 指向构造函数的 propertyper。</p>
<p>3.该对象作为 this 参数传递给构造函数，从而成为构造函数的函数上下文，并执行构造函数中的语句。</p>
<p>4.新构造的对象作为 new 运算符的返回值，分以下两种情况讨论</p>
<p>如果构造函数返回一个对象，则该对象将作为整个表达式的值返回，而传入构造函数的 this 将被丢弃。<br>但是，如果构造函数返回的是非对象类型，则忽略返回值，返回新创建的对象。</p>
<ul>
<li>访问属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//里面的属性或方法，采用键值对的形式-&gt;  属性名： 属性值</span></span><br><span class="line"><span class="comment">//多个属性或方法中间用逗号隔开</span></span><br><span class="line"><span class="comment">//方法冒号后面跟的是一个匿名函数</span></span><br><span class="line"><span class="comment">//调用对象的属性，采用 对象名.属性名</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.uname);</span><br><span class="line"><span class="comment">//或者 对象名[&#x27;属性名&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1[<span class="string">&quot;age&quot;</span>]);</span><br><span class="line"><span class="comment">//调用对象的方法-&gt; 对象名.方法名</span></span><br><span class="line">obj1.hi();</span><br><span class="line"><span class="comment">//如果您不使用 () 访问 fullName 方法，则将返回函数的具体内容</span></span><br></pre></td></tr></table></figure>

<ul>
<li>遍历对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for(变量 in 对象)&#123;&#125;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, obj[k]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除属性<br><code>delete</code>只能删除对象自己的属性，不能删除其原型链上的属性<br>全局作用域中的函数不能被 delete, 不论是使用关键字声明还是使用函数表达式的<br>使用 delete 操作符并不会直接释放内存</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123; <span class="attr">b</span>: <span class="number">1</span>, <span class="attr">c</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="comment">//成功返回true,如果删除对象不存在的属性，delete 无效，但是返回值仍然为 true</span></span><br><span class="line"><span class="keyword">delete</span> a.b;</span><br><span class="line"></span><br><span class="line"><span class="comment">//delete删除属性时只是解除了属性与对象的绑定，故当属性值为一个对象时，删除时会造成内存泄露 （其实还未删除）</span></span><br><span class="line"><span class="comment">//解决方法，用递归！！</span></span><br><span class="line"><span class="comment">// 将不需要的属性设置为 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="attr">firstname</span>: <span class="string">&quot;bob&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p = person.name;</span><br><span class="line"><span class="keyword">delete</span> person.name;</span><br><span class="line"><span class="built_in">console</span>.log(p.firstname); <span class="comment">//bob</span></span><br></pre></td></tr></table></figure>

<h4 id="prototype-原型对象"><a href="#prototype-原型对象" class="headerlink" title="prototype 原型对象"></a>prototype 原型对象</h4><p>JS 的每个函数在创建的时候，都会生成一个属性<code>prototype</code>，这个属性指向一个对象，这个对象就是此函数的<code>原型对象</code>。该原型对象中有个属性为<code>constructor</code>，指向该函数。这样原型对象和它的函数之间就产生了联系。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(show.prototype);</span><br></pre></td></tr></table></figure>

<p>用在构造函数上，我们可以给构造函数的原型 prototype，添加方法。如果我们将方法添加到构造函数的原型 prototype 对象上，构造函数构造出来的对象共享原型上所有的方法</p>
<p>每个通过构造函数创建出来的实例对象，其本身有个属性<code>__proto__</code>，这个属性会指向该实例对象的<code>构造函数的原型对象</code><br>当访问一个对象的某个属性时，会先在这个对象本身属性上查找，如果没有找到，则会通过它的<code>__proto__</code>隐式属性，找到它的<code>构造函数的原型对象</code>，如果还没有找到就会再在其构造函数的 prototype 的<code>__proto__</code>中查找，这样一层一层向上查找就会形成一个链式结构，我们称为原型链。原型链的尽头是 null</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Preson</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 所有实例共享的公共方法</span></span><br><span class="line">Preson.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params">word</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>说：<span class="subst">$&#123;word&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Preson(<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>); <span class="comment">// 创建一个Person实例对象</span></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Preson(<span class="string">&quot;李四&quot;</span>, <span class="number">20</span>); <span class="comment">// 新创建一个Proson实例对象</span></span><br><span class="line">p1.say(<span class="string">&quot;hello world&quot;</span>); <span class="comment">// 调用公共方法</span></span><br><span class="line">p1.hasOwnProperty(<span class="string">&quot;say&quot;</span>); <span class="comment">// false 说明不是定义在其本身上的</span></span><br><span class="line">p1.__proto__.do = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;往原型对象中添加方法&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">p2.do(); <span class="comment">// 打印出了-往原型对象中添加方法</span></span><br></pre></td></tr></table></figure>

<p>instanceof 关键字，判断某一个对象是否是这个构造函数构造出来的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">3</span>, <span class="number">32</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">45</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> res = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length; i++) &#123;</span><br><span class="line">    res += <span class="built_in">this</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(arr1.sum());</span><br><span class="line"><span class="built_in">console</span>.log(arr2.sum());</span><br><span class="line"><span class="built_in">console</span>.log(arr1.sum == arr2.sum);</span><br></pre></td></tr></table></figure>

<p>在子一级构造函数重写方法，只会在子一级生效，并不会影响父一级构造函数的方法。</p>
<p>继承和多态：<br>继承侧重是从父一级构造函数，继承到属性和方法；<br>多态侧重的是子一级自己重写和新增的属性和方法;</p>
<h4 id="内置对象（如同内置函数-如-Math、-Date、-Array、-String、）"><a href="#内置对象（如同内置函数-如-Math、-Date、-Array、-String、）" class="headerlink" title="内置对象（如同内置函数,如:Math、 Date、 Array、 String、）"></a>内置对象（如同内置函数,如:Math、 Date、 Array、 String、）</h4><p>Math 对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.PI; <span class="comment">//圆周率</span></span><br><span class="line"><span class="built_in">Math</span>.abs(); <span class="comment">//求绝对值</span></span><br><span class="line"><span class="built_in">Math</span>.max(); <span class="comment">//求最大</span></span><br><span class="line"><span class="built_in">Math</span>.min(); <span class="comment">//求最小值</span></span><br><span class="line"><span class="built_in">Math</span>.pow(x, y); <span class="comment">//x的y次幂</span></span><br><span class="line"><span class="built_in">Math</span>.round(); <span class="comment">//四舍五入</span></span><br><span class="line"><span class="built_in">Math</span>.random(); <span class="comment">//获取随机数</span></span><br><span class="line"><span class="built_in">Math</span>.ceil(); <span class="comment">// 向上取整,有小数就整数部分加1</span></span><br><span class="line"><span class="built_in">Math</span>.floor(); <span class="comment">// 向下取整,丢弃小数部分</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Date 时间对象方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//时间对象是静态的</span></span><br><span class="line"><span class="comment">//必须实例化</span></span><br><span class="line"><span class="keyword">var</span> nowdate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(nowdate);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Date()构造函数的参数</span></span><br><span class="line"><span class="comment">//自定义日期格式</span></span><br><span class="line"><span class="keyword">var</span> nowdate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;2020-2-22&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>时间对象方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//日期格式化</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getFUllYear(); <span class="comment">//年</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getMonth(); <span class="comment">//月(0-11)</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getDate(); <span class="comment">//天</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getDay(); <span class="comment">//星期（周日0到周六6）</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getHours(); <span class="comment">//时</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getMinutes(); <span class="comment">//分</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().getSeconds(); <span class="comment">//秒</span></span><br><span class="line"><span class="comment">//获取Date总毫秒数，距离1970.1.1的总毫秒数</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(date.valueOf());</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="built_in">console</span>.log(date.getTime());</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="keyword">var</span> date1 = +<span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">//常用</span></span><br><span class="line"><span class="built_in">console</span>.log(date1);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.now()); <span class="comment">//H5新增</span></span><br></pre></td></tr></table></figure>

<ul>
<li>设置日期对象的日期值</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>setDate()</td>
<td>以数值（1-31）设置日</td>
</tr>
<tr>
<td>setFullYear(年,月,日)</td>
<td>设置年（可选月和日）</td>
</tr>
<tr>
<td>setHours()</td>
<td>设置小时（0-23）</td>
</tr>
<tr>
<td>setMilliseconds()</td>
<td>设置毫秒（0-999）</td>
</tr>
<tr>
<td>setMinutes()</td>
<td>设置分（0-59）</td>
</tr>
<tr>
<td>setMonth()</td>
<td>设置月（0-11）</td>
</tr>
<tr>
<td>setSeconds()</td>
<td>设置秒（0-59）</td>
</tr>
<tr>
<td>setTime()</td>
<td>设置时间（从 1970 年 1 月 1 日至今的毫秒数）</td>
</tr>
</tbody></table>
<ul>
<li>比较日期</li>
</ul>
<p>日期可以很容易地进行比较。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> today, someday, text;</span><br><span class="line">today = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">someday = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">someday.setFullYear(<span class="number">2049</span>, <span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line"><span class="keyword">if</span> (someday &gt; today) &#123;</span><br><span class="line">  text = <span class="string">&quot;今天在 2049 年 1 月 16 日之前&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  text = <span class="string">&quot;今天在 2049 年 1 月 16 日之后&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JS-this"><a href="#JS-this" class="headerlink" title="JS this"></a>JS this</h3><p>它拥有不同的值，具体取决于它的使用位置：</p>
<ul>
<li>作为函数直接被调用</li>
</ul>
<p>如果一个函数没有作为方法、构造函数或者通过 apply 和 call 调用的话，我们就称之为作为 直接函数调用。 非严格模式下，this 指向全局对象 window（浏览器执行环境），但是在严格模式下，this 指向为 undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">test(); <span class="comment">//window</span></span><br></pre></td></tr></table></figure>

<ul>
<li>作为方法，关联在对象上被调用或作为构造函数，实例化一个新对象时候被调用<br>在对象方法中，this 指的是此方法的“拥有者”。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;Bill&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Gates&quot;</span>,</span><br><span class="line">  <span class="attr">id</span>: <span class="number">678</span>,</span><br><span class="line">  <span class="attr">test</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">person.test()<span class="comment">//person</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = name</span><br><span class="line">   <span class="attr">test</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> personins = <span class="keyword">new</span> Person(<span class="string">&#x27;xx&#x27;</span>)</span><br><span class="line">persoins.test()<span class="comment">//persoins</span></span><br></pre></td></tr></table></figure>

<ul>
<li>单独的情况下，this 指的是全局对象。</li>
</ul>
<p>在单独使用时，拥有者是全局对象，因此 this 指的是全局对象。在浏览器窗口中，全局对象是 Window：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="built_in">this</span>;</span><br></pre></td></tr></table></figure>

<p>在严格模式中，如果单独使用，那么 this 指的是全局对象 Window</p>
<ul>
<li>在函数中，this 指的是全局对象。</li>
</ul>
<p>在 JavaScript 函数中，函数的拥有者默认绑定 this。因此，在函数中，this 指的是全局对象 Window。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>箭头函数没有自己的 this，其中的 this 指的是 window 全局对象,在函数中使用时，在严格模式下，this 是未定义的（undefined）</p>
<ul>
<li>在事件中，this 指的是接收事件的元素。</li>
</ul>
<p>在 HTML 事件处理程序中，this 指的是接收此事件的 HTML 元素：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;this.style.display=&#x27;none&#x27;&quot;</span>&gt;</span>点击来删除我！<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>像 call() 和 apply() 这样的方法可以将 this 引用到任何对象。</p>
<ul>
<li><p>call<br>格式：函数名.call();<br>参数：第一个参数：传入该函数 this 指向的对象，传入什么强制指向什么。<br>第二参数开始：将原函数的参数往后顺延一位。<br>会立即调用函数,返回值就是函数的返回值</p>
</li>
<li><p>apply<br>格式：函数名.apply()<br>参数：第一个参数：传入该函数 this 指向的对象，传入什么强制指向什么。<br>第二个参数：数组 其放入我们所有原来的参数。<br>会立即调用函数,返回值就是函数的返回值</p>
</li>
<li><p>bind 预设 this 指向<br>参数：第一个参数：传入该函数 this 指向的对象，传入什么强制指向什么。<br>第二参数开始：将原函数的参数往后顺延一位。<br>不会调用函数，返回值是改变 this 指向后的新函数</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res = show.bind(<span class="string">&quot;bind&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure>

<p>call() 和 apply() 方法是预定义的 JavaScript 方法。<br>它们都可以用于将另一个对象作为参数调用对象方法。<br>在下面的例子中，当使用 person2 作为参数调用 person1.fullName 时，this 将引用 person2，即使它是 person1 的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  <span class="attr">fullName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot; &quot;</span> + <span class="built_in">this</span>.lastName;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;Bill&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Gates&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line">person1.fullName.call(person2); <span class="comment">// 会返回 &quot;Bill Gates&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ul>
<li>声明<br>在函数中，声明的参数是局部变量。只能在函数内访问。局部变量在函数开始时创建，在函数完成时被删除。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数关键字声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//具名函数</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;xxxxxxxxx&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数表达式声明</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//匿名函数</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function 函数名（形参1，形参2...）&#123;//形参即形式上的参数&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br><span class="line">b(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line"><span class="comment">//实参与形参个数一致时，正常输出</span></span><br><span class="line"><span class="comment">//实参小于形参时，多余的形参可看作不用声明的变量，结果为undefined</span></span><br><span class="line"><span class="comment">//实参多于形参时，只取到形参的个数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">34</span>, <span class="number">9</span>);</span><br><span class="line"><span class="comment">//arguments里储存了所有传过来的实参，它是一个伪数组，具有length属性，可用索引的方式遍历，但不具有数组的push，pop等方法</span></span><br></pre></td></tr></table></figure>

<ul>
<li>函数的返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> 返回的内容；</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> n=c();</span><br><span class="line"><span class="comment">//return 之后的代码不会执行；</span></span><br><span class="line"><span class="comment">//return只返回一个值，且只返回最后一个值。</span></span><br><span class="line"><span class="comment">//return可返回数组，字符串，</span></span><br><span class="line"><span class="comment">//如果没有return则返回undefind</span></span><br></pre></td></tr></table></figure>

<ul>
<li>递归</li>
</ul>
<p>函数自己调用自己，一般情况下有参数，有 return</p>
<ol>
<li> 首先找到临界值，即无需计算获得的值；</li>
<li> 找到这一次和上一次的关系</li>
<li> 假设当前函数已经可以使用，调用自身计算上一次。</li>
</ol>
<h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><p>这种通过 new 调用函数，叫做构造函数(首字母一般大写)，其可构造对象，</p>
<ol>
<li> 当前函数中的 this 指向新创建的对象</li>
<li> 自动完成原料和出厂操作</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name,sex</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> obj=<span class="keyword">new</span> <span class="built_in">Object</span>(); <span class="comment">//原料</span></span><br><span class="line">   <span class="comment">//加工</span></span><br><span class="line">   obj.name=name;</span><br><span class="line">   obj.sex=sex;</span><br><span class="line">   obj.showName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">   &#125;</span><br><span class="line">   obj.showSex=<span class="function"><span class="title">functin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">this</span>.sex);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">return</span> obj; <span class="comment">//出厂</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1=createPerson(<span class="string">&quot;Tom&quot;</span>,<span class="string">&quot;man&quot;</span>);</span><br><span class="line">p1.showName();</span><br><span class="line">p1.showSex();</span><br></pre></td></tr></table></figure>

<ul>
<li>首字母大写</li>
<li>内部 return 返回值无效,无需写</li>
<li>构造函数中的 this 指向新的对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pig</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Pig(<span class="string">&quot;xxx&quot;</span>); <span class="comment">//实例化</span></span><br></pre></td></tr></table></figure>

<ul>
<li>静态成员（静态属性，静态方法）</li>
</ul>
<blockquote>
<p>只能通过构造函数访问，<br>静态方法中的 this 指向构造函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">//静态属性</span></span><br><span class="line">Person.eyes = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//静态方法</span></span><br><span class="line">Person.walk = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><ul>
<li>JavaScript 变量的有效期</li>
</ul>
<p>JavaScript 变量的有效期始于其被创建时。<br>局部变量会在函数完成时被删除，其又分为函数作用域和块作用域。<br>全局变量会在您关闭页面是被删除。</p>
<p>函数参数也是函数内的局部变量。<br>在 HTML 中，全局作用域是 window。所有全局变量均属于 window 对象。script 标签和 js 文件的最外层都是全局作用域<br>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> carName = <span class="string">&quot;porsche&quot;</span>;</span><br><span class="line"><span class="comment">// 此处的代码能够使用 window.carName</span></span><br></pre></td></tr></table></figure>

<ul>
<li>变量提升</li>
</ul>
<blockquote>
<p>let/const 不会变量提升<br>在 JavaScript 中，可以在使用变量之后对其进行声明。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//作用域链：内部函数访问外部函数变量，采用的是链式查找方式来取值的，其采取就近原则</span></span><br><span class="line"><span class="comment">//优先在当前函数作用域中查找，若不存在，则逐级查找父级作用域直到全局作用域</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">20</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num); <span class="comment">//结果为20</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fun();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js引擎运行分两步</span></span><br><span class="line"><span class="comment">//预解析:js引擎会把js里的所有var， function提升到当前作用域的最前面，但不提升赋值操作</span></span><br><span class="line"><span class="comment">//代码执行：顺序从上往下执行</span></span><br><span class="line">fun();</span><br><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  xxx;</span><br><span class="line">&#125;; <span class="comment">//会报错</span></span><br><span class="line"><span class="comment">//-------------</span></span><br><span class="line">fun();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  xxx;</span><br><span class="line">&#125; <span class="comment">//正常运行</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//预编译:创建AO对象;找已声明的变量,值都是undefined;实参形参值相等;找函数声明，会覆盖形参的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, c</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(c); <span class="comment">//2</span></span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">//function a()</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">12</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">//12</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(b); <span class="comment">//undefined</span></span><br><span class="line">  <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="built_in">console</span>.log(b); <span class="comment">//function b()</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>JavaScript 初始化不会被提升<br>JavaScript 只提升声明，而非初始化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>; <span class="comment">// 初始化 x</span></span><br><span class="line">elem = <span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>); <span class="comment">// 查找元素</span></span><br><span class="line">elem.innerHTML = x + <span class="string">&quot; &quot;</span> + y; <span class="comment">// 显示 x 和 y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">7</span>; <span class="comment">// 初始化 y</span></span><br></pre></td></tr></table></figure>

<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><ul>
<li><p>setInterval(“函数”，毫秒数);<br>每隔对应的毫秒执行一次传入的函数;<br>返回值为：系统给启动定时器分配的编号；</p>
</li>
<li><p>clearInterval(定时器编号);<br>取消定时器</p>
</li>
</ul>
<h3 id="延时器"><a href="#延时器" class="headerlink" title="延时器"></a>延时器</h3><ul>
<li>创建延时器<code>window.setTimeout(函数，延迟时间)</code></li>
</ul>
<p>返回值 timeoutID 是一个正整数，表示定时器的编号需要注意的是 setTimeout()和 setInterval()共用一个编号池，技术上，clearTimeout()和 clearInterval() 可以互换。但是，为了避免混淆，不要混用取消定时函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timer1 = <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  onsole.log(<span class="string">&quot;你好啊！！！&quot;</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>清除延时器<code>window.clearTimeout(延时器名称)</code></li>
</ul>
<h3 id="JS-捕获错误"><a href="#JS-捕获错误" class="headerlink" title="JS 捕获错误"></a>JS 捕获错误</h3><ul>
<li><p>try 语句使您能够测试代码块中的错误。</p>
</li>
<li><p>catch 语句允许您处理错误。</p>
</li>
<li><p>throw 语句允许您创建自定义错误。</p>
</li>
<li><p>finally 使您能够执行代码，在 try 和 catch 之后，无论结果如何。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">     供测试的代码块</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;直接允许&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">catch</span>(err) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(err);</span><br><span class="line">     处理错误的代码块</span><br><span class="line"><span class="comment">//如果try中的代码无异常则不执行catch中的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line">     无论 <span class="keyword">try</span> / <span class="keyword">catch</span> 结果如何都执行的代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JS-闭包"><a href="#JS-闭包" class="headerlink" title="JS 闭包"></a>JS 闭包</h3><ul>
<li><p>闭包特点：</p>
<ol>
<li> 函数嵌套函数</li>
<li> 内部函数使用外部函数的形参和变量</li>
<li> 被引用的形参和变量不会被内存回收</li>
</ol>
</li>
<li><p>好处：</p>
<ol>
<li> 变量能常驻内存当中</li>
<li> 避免全局变量污染</li>
<li> 可以声明私有成员</li>
</ol>
</li>
</ul>
<p>JavaScript 变量属于本地或全局作用域。</p>
<p>全局变量能够通过闭包实现局部（私有）。<br>闭包指的是有权访问父作用域的函数，即使在父函数关闭之后</p>
<blockquote>
<p>拥有相同名称的全局变量和局部变量是不同的变量。修改一个，不会改变其他。不通过关键词 var 创建的变量总是全局的，即使它们在函数中创建。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (counter += <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line">add();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计数器目前是 3</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一次调用add()，相当于执行了function()&#123;return (++counter)&#125;一次；第二次调用add()，相当于又执行了function()&#123;return (++counter)&#125;一次；又由于function()&#123;return (++counter)&#125;是闭包，引用了其父函数的变量counter，所以在函数调用完毕counter依然存在，没有清零。</span></span><br><span class="line"><span class="comment">    而且只在第一次给add赋值时，将counter设置为0。以后每次调用add()，counter都自增一次，没有重置。也就是前文说的，父函数只执行一次，每次调用都只执行了子函数。</span></span><br><span class="line"><span class="comment">    这是为什么呢？因为只有执行下面这个函数，counter才重置。而这个函数只在第一次给add赋值时执行过一次。以后每次调用add()，都相当于调用function()&#123;return(++counter)&#125;。</span></span><br><span class="line"><span class="comment">    function()&#123;</span></span><br><span class="line"><span class="comment">       var counter = 0;</span></span><br><span class="line"><span class="comment">       return function()&#123;</span></span><br><span class="line"><span class="comment">          return (++counter);</span></span><br><span class="line"><span class="comment">       &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> moduleA = (<span class="function"><span class="keyword">function</span> (<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> conut = <span class="number">10</span>; <span class="comment">//私有变量</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showA</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//私有函数</span></span><br><span class="line">    count += <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(count);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count *= <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(count);</span><br><span class="line">  &#125;</span><br><span class="line">  mod.outA = showA;</span><br><span class="line">  mod.outB = showB;</span><br><span class="line">  <span class="comment">//对外暴露</span></span><br><span class="line">  <span class="keyword">return</span> mod;</span><br><span class="line">&#125;)(moduleA || &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> moduleA = (<span class="function"><span class="keyword">function</span> (<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showC</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;jjjj&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  mod.outC = showC;</span><br><span class="line">  <span class="keyword">return</span> mod;</span><br><span class="line">&#125;)(moduleA || &#123;&#125;);</span><br><span class="line"></span><br><span class="line">mouleA.outA();</span><br><span class="line">mouleA.outB();</span><br><span class="line">mouleA.outC();</span><br></pre></td></tr></table></figure>

<ul>
<li>立即执行函数写法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> m1 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    xxxx;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> m2 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    xxxx;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">m1</span>: m1,</span><br><span class="line">    <span class="attr">m2</span>: m2,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h3 id="ES6-新特性"><a href="#ES6-新特性" class="headerlink" title="ES6 新特性"></a>ES6 新特性</h3><h4 id="let-和-const-关键字-es6"><a href="#let-和-const-关键字-es6" class="headerlink" title="let 和 const 关键字(es6)"></a>let 和 const 关键字(es6)</h4><p>用 let 或 const 声明的变量和常量不会被提升！遇到大括号就形成作用域。</p>
<blockquote>
<p>全局（在函数之外）声明的变量拥有全局作用域。<br>局部（函数内）声明的变量拥有函数作用域。</p>
</blockquote>
<p>通过 var 关键词声明的变量没有块作用域。将变量或者形参所在函数的大括号作为作用域处理。<br>在块 {} 内声明的变量可以从块之外进行访问。</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 此处可以使用 x</span></span><br></pre></td></tr></table></figure>

<p>在 ES2015 之前，JavaScript 是没有块作用域的。</p>
<p>可以使用 let 关键词声明拥有块作用域的变量。</p>
<p>在块 {} 内声明的变量无法从块外访问：</p>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 此处不可以使用 x</span></span><br></pre></td></tr></table></figure>

<ul>
<li>重新声明变量</li>
</ul>
<p>使用 var 关键字重新声明变量会带来问题。</p>
<p>在块中重新声明变量也将重新声明块外的变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 此处 x 为 10</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">6</span>;</span><br><span class="line">  <span class="comment">// 此处 x 为 6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 此处 x 为 6</span></span><br></pre></td></tr></table></figure>

<p>使用 let 关键字重新声明变量可以解决这个问题。</p>
<p>在块中重新声明变量不会重新声明块外的变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 此处 x 为 10</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">6</span>;</span><br><span class="line">  <span class="comment">// 此处 x 为 6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 此处 x 为 10</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Internet Explorer 11 或更早的版本不完全支持 let 关键词。</p>
</blockquote>
<ul>
<li>var 与 let 区别</li>
</ul>
<p>通过 var 关键词定义的全局变量属于 window 对象<br>通过 let 关键词定义的全局变量不属于 window 对象<br>允许在程序的任何位置使用 var 重新声明 JavaScript 变量<br>在相同的作用域，或在相同的块中，通过 let 重新声明一个 var 变量是不允许的<br>在相同的作用域，或在相同的块中，通过 let 重新声明一个 let 变量是不允许的<br>在相同的作用域，或在相同的块中，通过 var 重新声明一个 let 变量是不允许的<br>在不同的作用域或块中，通过 let 重新声明变量是允许的<br>通过 var 声明的变量会提升到顶端<br>通过 let 定义的变量不会被提升到顶端</p>
<ul>
<li>const 常量</li>
</ul>
<p>通过 const 定义的变量与 let 变量类似，但不能重新赋值;<br>const 变量必须在声明时赋值,<br>const 变量不能在声明之前使用,不能重复声明</p>
<ul>
<li>但常量对象是可以更改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 您可以创建 const 对象：</span></span><br><span class="line"><span class="keyword">const</span> car = &#123; <span class="attr">type</span>: <span class="string">&quot;porsche&quot;</span>, <span class="attr">model</span>: <span class="string">&quot;911&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;Black&quot;</span> &#125;;</span><br><span class="line"><span class="comment">// 您可以更改属性：</span></span><br><span class="line">car.color = <span class="string">&quot;White&quot;</span>;</span><br><span class="line"><span class="comment">// 您可以添加属性：</span></span><br><span class="line">car.owner = <span class="string">&quot;Bill&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>但是您无法重新为常量对象赋值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> car = &#123; <span class="attr">type</span>: <span class="string">&quot;porsche&quot;</span>, <span class="attr">model</span>: <span class="string">&quot;911&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;Black&quot;</span> &#125;;</span><br><span class="line">car = &#123; <span class="attr">type</span>: <span class="string">&quot;Volvo&quot;</span>, <span class="attr">model</span>: <span class="string">&quot;XC60&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;White&quot;</span> &#125;; <span class="comment">// ERROR</span></span><br></pre></td></tr></table></figure>

<p>同理常量数组可以更改；但是您无法重新为常量数组赋值<br>在同一作用域或块中，不允许将已有的 var 或 let 变量重新声明或重新赋值给 const;<br>在同一作用域或块中，为已有的 const 变量重新声明声明或赋值是不允许的;<br>在另外的作用域或块中重新声明 const 是允许的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">2</span>; <span class="comment">// 允许</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">3</span>; <span class="comment">// 允许</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">4</span>; <span class="comment">// 允许</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Internet Explorer 10 或更早版本不支持 const 关键词。</p>
</blockquote>
<ul>
<li>声明严格模式</li>
</ul>
<p>通过在脚本或函数的开头添加 “use strict”; 来声明严格模式。(浏览器低版本不兼容)<br>在脚本开头进行声明，拥有全局作用域（脚本中的所有代码均以严格模式来执行）：<br>在函数中声明严格模式，拥有局部作用域（只有函数中的代码以严格模式执行）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line">x = <span class="number">3.14</span>; <span class="comment">// 这会引发错误，因为 x 尚未声明</span></span><br></pre></td></tr></table></figure>

<ul>
<li>严格模式中不允许的事项：<br>在不声明变量的情况下使用变量，是不允许的;<br>在不声明对象的情况下使用对象也是不允许的：<br>删除变量（或对象）是不允许的<code>delete:x;</code><br>删除函数是不允许的,重复参数名是不允许的,八进制数值文本是不允许的,转义字符是不允许的写入只读属性是不允许的,写入只能获取的属性是不允许的,删除不可删除的属性是不允许的,字符串 “eval” 不可用作变量,字符串 “arguments” 不可用作变量,with 语句是不允许的,处于安全考虑，不允许 eval() 在其被调用的作用域中创建变量,在类似 f() 的函数调用中，this 的值是全局对象。在严格模式中，现在它成为了 undefined。</li>
</ul>
<h4 id="箭头函数（Arrow-Function）"><a href="#箭头函数（Arrow-Function）" class="headerlink" title="箭头函数（Arrow Function）"></a>箭头函数（Arrow Function）</h4><p>箭头函数允许使用简短的语法来编写函数表达式。不需要 function 关键字、return 关键字以及花括号。</p>
<blockquote>
<p>注意:箭头函数没有自己的 this，它内部的 this 是作用域链的上一层的 this；<br>箭头功能未被提升。它们必须在使用前进行定义。<br>内部没有 arguments<br>不能使用 new 关键词实例化对象<br>function 是对象，箭头函数不是对象，是表达式,</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多个参数，有返回值</span></span><br><span class="line"><span class="keyword">var</span>  x = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x* y;</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="keyword">var</span> x=<span class="function">(<span class="params">x,Y</span>)=&gt;</span>&#123;reruen x*y;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个参数，有返回值</span></span><br><span class="line"><span class="keyword">var</span> add=<span class="function"><span class="params">x</span>=&gt;</span>x+<span class="number">10</span>;</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="keyword">var</span> add=<span class="function"><span class="params">x</span>=&gt;</span>&#123;<span class="keyword">return</span> x+<span class="number">10</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//无参数，无返回值</span></span><br><span class="line"><span class="keyword">var</span> show=<span class="function">()=&gt;</span>&#123;alert(<span class="string">&quot;hello&quot;</span>);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//有一个参数，无返回值</span></span><br><span class="line"><span class="keyword">var</span> xxx=<span class="function"><span class="params">num</span>=&gt;</span>&#123;alert(num);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回对象</span></span><br><span class="line"><span class="keyword">var</span> show=<span class="function">()=&gt;</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="函数默认值"><a href="#函数默认值" class="headerlink" title="函数默认值"></a>函数默认值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  a = a || <span class="number">10</span>;</span><br><span class="line">  b = b || <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a = <span class="number">10</span>, b = <span class="number">10</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(args); <span class="comment">//剩余参数</span></span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<h4 id="扩展运算符号"><a href="#扩展运算符号" class="headerlink" title="扩展运算符号"></a>扩展运算符号</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">10</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(...arr);</span><br><span class="line"><span class="built_in">console</span>.log(...obj);</span><br></pre></td></tr></table></figure>

<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [x, y, z] = [<span class="number">1</span>, <span class="string">&quot;dd&quot;</span>, <span class="literal">false</span>];</span><br><span class="line"><span class="comment">//相当与</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>,</span><br><span class="line">  y = <span class="string">&quot;dd&quot;</span>,</span><br><span class="line">  z = fase;</span><br><span class="line"></span><br><span class="line"><span class="comment">//还可以</span></span><br><span class="line"><span class="keyword">const</span> [x, [a, b], y] = [<span class="number">10</span>, [<span class="number">10</span>, <span class="string">&quot;dd&quot;</span>], <span class="string">&quot;a&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//交换两数方便</span></span><br><span class="line"><span class="keyword">const</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">[x, y] = [y, x];</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数可一次性返回多个数据</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xxx</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="string">&quot;jj&quot;</span>, <span class="number">3</span>, <span class="literal">true</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [a, b, c] = xxx();</span><br><span class="line"></span><br><span class="line"><span class="comment">//不用按循序赋值</span></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  name,</span><br><span class="line">  age,</span><br><span class="line">  <span class="attr">sex</span>: x,</span><br><span class="line">  ...res</span><br><span class="line">&#125; = &#123;</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&quot;男&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;xiaomi&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">11</span>,</span><br><span class="line">  <span class="attr">school</span>: <span class="string">&quot;xx&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(name, age, x);</span><br></pre></td></tr></table></figure>

<h4 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h4><ul>
<li>可用反引号代替单双引号括起字符串。其中的换行、代码缩进都会保留。</li>
<li>拼接字符串时可用<code>$&#123;变量/表达式/函数&#125;</code>代替<code>+&#39;&#39;+</code></li>
</ul>
<h4 id="新增数组方法"><a href="#新增数组方法" class="headerlink" title="新增数组方法"></a>新增数组方法</h4><h5 id="Array-every"><a href="#Array-every" class="headerlink" title="Array.every()"></a>Array.every()</h5><p>该方法测试一个数组内的所有元素是否都能通过某个指定函数的测试。它返回一个布尔值。如果所有元素都通过检测返回 true，否则返回 false。参数和 forEach()一致，也不能使用 break 和 continue，但可以实现他们的功能，在方法体内 return false 等同于 break， return true 等同于 continue， 如果不写 return 语句， 默认是 return false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">let</span> a = arr.every(<span class="function">(<span class="params">value, index, arr2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//if (index == 2) continue //报错：SyntaxError: Illegal continue statement: no surrounding iteration statement</span></span><br><span class="line">  <span class="comment">//if (index == 5) break    报错：SyntaxError: Illegal break statement</span></span><br><span class="line">  <span class="keyword">if</span> (index == <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//实现continue功能</span></span><br><span class="line">  <span class="keyword">if</span> (index == <span class="number">5</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//实现实现break功能</span></span><br><span class="line">  value++;</span><br><span class="line">  arr2[index] += <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//不可省略，否则默认为return false，相当于break</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="Array-some"><a href="#Array-some" class="headerlink" title="Array.some()"></a>Array.some()</h5><p>只要数组中存在某一个符合条件的就返回 true，全部不符合条件则返回 false 由于功能上的不同，有不一样的规则，在方法体内 return false 等同于 continue， return true 等同于 break， 如果不写 return 语句, 默认是 return true。完全和 every()相反，因为当 some()没有找到符合的元素时需要继续往下面找，而 every()遇到不符合的元素就直接停止了，some()遇到符合的元素直接停止</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">let</span> a = arr.every(<span class="function">(<span class="params">value</span>) =&gt;</span> value &gt; <span class="number">6</span>); <span class="comment">//判断数组是否存在一个元素大于6</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h5 id="Array-includes"><a href="#Array-includes" class="headerlink" title="Array.includes()"></a>Array.includes()</h5><p>检查数组中是否包含某个特定的值，如果数组包含该值，则返回 true，否则返回 false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">a.includes(<span class="number">5</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h5 id="Array-find"><a href="#Array-find" class="headerlink" title="Array.find()"></a>Array.find()</h5><p>在数组中查找符合条件的元素，只要找到一个符合条件的元素，就终止遍历，返回值为找到的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> res = arr.find(<span class="function"><span class="keyword">function</span> (<span class="params">item, idex, array</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//查找条件</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">5</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure>

<h5 id="Array-findIndex"><a href="#Array-findIndex" class="headerlink" title="Array.findIndex()"></a>Array.findIndex()</h5><p>只要找到一个符合条件的元素，就终止遍历，返回值为找到元素的索引。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.findIndex(<span class="function">(<span class="params">item</span>) =&gt;</span> item &gt; <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h6 id="Array-filter"><a href="#Array-filter" class="headerlink" title="Array.filter()"></a>Array.filter()</h6><p>找到符合条件的元素，返回新的数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">let</span> newArr = arr.filter(<span class="function">(<span class="params">value</span>) =&gt;</span> value &gt; <span class="number">3</span>); <span class="comment">//判断数组元素是否大于3</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr); <span class="comment">//[ 4, 5, 6, 7 ]</span></span><br></pre></td></tr></table></figure>

<h5 id="Array-reduce"><a href="#Array-reduce" class="headerlink" title="Array.reduce()"></a>Array.reduce()</h5><p>遍历数组全部元素，将函数处返回的数字累加到一起，并返回这个累加结果，可初始化一个值,不传初始值，则从第二项开始</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">let</span> sum = arr.reduce(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//accumulator为每次迭代后的累计值，currentValue为每次迭代时从arr传来的元素值</span></span><br><span class="line">  <span class="keyword">return</span> currentValue * <span class="number">2</span> + accumulator;</span><br><span class="line">&#125;, <span class="number">100</span>); <span class="comment">//将数组中每一个元素都乘以2累加并加上初始值100</span></span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">//156</span></span><br></pre></td></tr></table></figure>

<h5 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h5><p>将伪数组（没有真数组身上的方法）转换为真数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aLid = <span class="built_in">document</span>.getElementById(<span class="string">&quot;li1&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> aLis = <span class="built_in">Array</span>.from(aLis);</span><br><span class="line">aLis.push(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二个参数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> aLis = <span class="built_in">Array</span>.from(aLis, <span class="function">(<span class="params">item</span>) =&gt;</span> item);</span><br><span class="line"></span><br><span class="line"><span class="comment">//可使用扩展运算符，转为真数组</span></span><br><span class="line"><span class="keyword">let</span> list = [...aLid];</span><br></pre></td></tr></table></figure>

<h5 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h5><p>将一组的值，转换为数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="string">&quot;xx&quot;</span>, &#123; <span class="attr">name</span>: <span class="string">&quot;xx&quot;</span> &#125;, [<span class="number">1</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure>

<h5 id="Array-copyWithin"><a href="#Array-copyWithin" class="headerlink" title="Array.copyWithin()"></a>Array.copyWithin()</h5><p>第一个参数：从哪个下标开始<br>第二第三个参数：开始与结束的范围<code>[start,end)</code><br>把范围里的元素从第一个参数开始覆盖。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">3</span>];</span><br><span class="line">arr.copyWithin(<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>);</span><br></pre></td></tr></table></figure>

<h4 id="新增对象方法"><a href="#新增对象方法" class="headerlink" title="新增对象方法"></a>新增对象方法</h4><h5 id="Object-assign-合并对象"><a href="#Object-assign-合并对象" class="headerlink" title="Object.assign();合并对象"></a>Object.assign();合并对象</h5><p>浅拷贝对象，相同的值会被覆盖为新值<br>参数 1 为接受拷贝的对象，参数 2 为传递拷贝的对象<br>结果会改变第一个参数对象，同时会返回这个参数对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">b</span>: <span class="number">3</span>, <span class="attr">c</span>: <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="built_in">Object</span>.assign(target, source);</span><br><span class="line"><span class="built_in">console</span>.log(target); <span class="comment">//  &#123; a: 1, b: 3, c: 4 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// &#123; a: 1, b: 3, c: 4 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(target === result); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h5><p>用于获取给定对象的自身可枚举属性的属性名（键）</p>
<h5 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h5><p>用于获取给定对象的自身可枚举属性的属性值（值）</p>
<h5 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h5><p>遍历键值对。</p>
<h5 id="obj-hasOwnerProperty-属性名"><a href="#obj-hasOwnerProperty-属性名" class="headerlink" title="obj.hasOwnerProperty(属性名)"></a>obj.hasOwnerProperty(属性名)</h5><p>判断某属性在对象中是否存在：</p>
<h5 id="Object-freeze"><a href="#Object-freeze" class="headerlink" title="Object.freeze()"></a>Object.freeze()</h5><blockquote>
<p>冻结之后最外层对象不可修改，内层可以<br>冻结对象：其他代码不能删除或更改,添加任何属性<br>冻结一个对象后该对象的原型也不能被修改<br>。freeze() 返回和传入的参数相同的对象。</p>
</blockquote>
<h5 id="Object-isFrozen-方法"><a href="#Object-isFrozen-方法" class="headerlink" title="Object.isFrozen()方法"></a>Object.isFrozen()方法</h5><p>判断一个对象是否被冻结</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用Object.freeze是冻结一个对象最方便的方法.</span></span><br><span class="line"><span class="keyword">var</span> frozen = &#123; <span class="number">1</span>: <span class="number">81</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.isFrozen(frozen); <span class="comment">//=== false</span></span><br><span class="line"><span class="built_in">Object</span>.freeze(frozen);</span><br><span class="line"><span class="built_in">Object</span>.isFrozen(frozen); <span class="comment">//=== true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个冻结对象也是一个密封对象.</span></span><br><span class="line"><span class="built_in">Object</span>.isSealed(frozen); <span class="comment">//=== true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当然,更是一个不可扩展的对象.</span></span><br><span class="line"><span class="built_in">Object</span>.isExtensible(frozen); <span class="comment">//=== false</span></span><br><span class="line"><span class="comment">//在 ES5 中，如果参数不是一个对象类型，将抛出一个TypeError异常。在 ES2015 中，非对象参数将被视为一个冻结的普通对象，因此会返回true。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.isFrozen(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// TypeError: 1 is not an object (ES5 code)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.isFrozen(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// true                          (ES2015 cod</span></span><br></pre></td></tr></table></figure>

<h5 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h5><p>比较两个值是否相同。所有 NaN 值都相等（这与==和===不同）。<br>方法判断两个值是否为同一个值。如果满足以下条件则两个值相等；<br>都是 undefined<br>都是 null<br>都是 true 或 false<br>都是相同长度的字符串且相同字符按相同顺序排列<br>都是相同对象（意味着每个对象有同一个引用）<br>都是数字且<br>都是 +0<br>都是 -0<br>都是 NaN<br>或都是非零而且非 NaN 且为同一个值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;foo&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="built_in">window</span>, <span class="built_in">window</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is([], []); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> bar = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.is(foo, foo); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(foo, bar); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="literal">null</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特例</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, -<span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(-<span class="number">0</span>, -<span class="number">0</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty()"></a>Object.defineProperty()</h5><p>给对象添加一个属性并指定该属性的配置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *value； 给对象属性设置值</span></span><br><span class="line"><span class="comment">writable； 属性是否可写，默认 false 不可写</span></span><br><span class="line"><span class="comment">configurable；该属性是否是否可配置，可删除；默认 false 不可写</span></span><br><span class="line"><span class="comment">enumerable；该属性是否可枚举；默认 false 不可枚举</span></span><br><span class="line"><span class="comment"> * /</span></span><br><span class="line"><span class="comment">Object.defineProperty(obj, &#x27;name&#x27;, &#123;</span></span><br><span class="line"><span class="comment">    get: function() &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        console.log(&#x27;get方法被调用了&#x27;);</span></span><br><span class="line"><span class="comment">        return this._myname + &#x27;1111&#x27;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    set: function(value) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        console.log(&#x27;set方法被调用了&#x27;);</span></span><br><span class="line"><span class="comment">        this._myname = value;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    configurable: true,</span></span><br><span class="line"><span class="comment">    enumerable: true</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br></pre></td></tr></table></figure>

<h5 id="Object-defineProperties"><a href="#Object-defineProperties" class="headerlink" title="Object.defineProperties()"></a>Object.defineProperties()</h5><p>给对象添加多个属性并分别指定它们的配置<br><code>object.defineProperties(obj，&#123;  属性名：&#123; &#125;，属性名： &#123; &#125; &#125;)</code></p>
<h5 id="Object-getOwnProperty-obj，属性名"><a href="#Object-getOwnProperty-obj，属性名" class="headerlink" title="Object.getOwnProperty(obj，属性名)"></a>Object.getOwnProperty(obj，属性名)</h5><p>获取单个属性： 返回一个对象，包含该属性所有配置</p>
<h5 id="Object-getOwnPropertyDescriptor-obj"><a href="#Object-getOwnPropertyDescriptor-obj" class="headerlink" title="Object.getOwnPropertyDescriptor(obj)"></a>Object.getOwnPropertyDescriptor(obj)</h5><p>获取全部属性： 返回一个对象，包含 obj 中各个属性所具有得配置</p>
<h4 id="基本数据类型-BigInt"><a href="#基本数据类型-BigInt" class="headerlink" title="基本数据类型 BigInt"></a>基本数据类型 BigInt</h4><p>是一种特殊的数字类型，它支持任意长度的整数。<br>要创建一个 bigint，可以在一个整数的末尾添加字符 n，或者调用函数 BigInt()。BigInt 函数使用字符串、数字等来创建一个 BigInt。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bigint = <span class="number">1234567890123456789012345678901234567890n</span>;</span><br><span class="line"><span class="keyword">const</span> sameBigint = <span class="built_in">BigInt</span>(<span class="string">&quot;1234567890123456789012345678901234567890&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bigintFromNumber = <span class="built_in">BigInt</span>(<span class="number">10</span>); <span class="comment">// same as 10n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//BigInt可以像常规数字一样使用，例如:</span></span><br><span class="line">alert(<span class="number">1n</span> + <span class="number">2n</span>); <span class="comment">// 3</span></span><br><span class="line">alert(<span class="number">5n</span> / <span class="number">2n</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对 bigint 的所有操作都返回 bigint。我们不能混用 bigint 和常规数字：</span></span><br><span class="line">alert(<span class="number">1n</span> + <span class="number">2</span>); <span class="comment">// Error: Cannot mix BigInt and other types</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果需要，我们应该显式转换它们：使用BigInt()或Number()，如下所示：</span></span><br><span class="line"><span class="keyword">let</span> bigint = <span class="number">1n</span>;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">2</span>; <span class="comment">// number to bigint</span></span><br><span class="line">alert(bigint + <span class="built_in">BigInt</span>(number)); <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// bigint to number</span></span><br><span class="line">alert(<span class="built_in">Number</span>(bigint) + number); <span class="comment">// 3</span></span><br><span class="line"><span class="comment">//但是如果bigint太大，不适合数字类型，那么会进行截取操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bigint 不支持前置加号+</span></span><br><span class="line"><span class="comment">//请注意，由于 number 和 bitint 属于不同的数据类型，它们可以相等==，但不能严格相等===</span></span><br><span class="line"><span class="comment">//在 if 或其他布尔运算中时，bigint 的行为类似于数字。</span></span><br></pre></td></tr></table></figure>

<h4 id="基本数据类型-Symbol"><a href="#基本数据类型-Symbol" class="headerlink" title="基本数据类型 Symbol"></a>基本数据类型 Symbol</h4><blockquote>
<p>原始数据类型，表示独一无二的值(内存地址不同)<br>用于定义对象的私有变量</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="built_in">Symbol</span>(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> name2 = <span class="built_in">Symbol</span>(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(name === name2); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">obj[name] = name;</span><br><span class="line"><span class="comment">//必须使用中括号</span></span><br><span class="line"><span class="comment">//无法遍历,不可枚举</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[name]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//可通过以下获取key</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="built_in">Object</span>.getOwnPropertySysmbols(obj);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="keyword">let</span> m = <span class="built_in">Reflect</span>.ownKeys(obj);</span><br><span class="line"><span class="built_in">console</span>.log(m);</span><br></pre></td></tr></table></figure>

<h4 id="复杂数据类型-Set-集合-无重复值的有序列表"><a href="#复杂数据类型-Set-集合-无重复值的有序列表" class="headerlink" title="复杂数据类型 Set 集合(无重复值的有序列表)"></a>复杂数据类型 Set 集合(无重复值的有序列表)</h4><ul>
<li>增删查改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> imgs = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"><span class="comment">//添加元素</span></span><br><span class="line">imgs.add(<span class="number">100</span>);</span><br><span class="line">imgs.add(<span class="number">100</span>);</span><br><span class="line">imgs.add(<span class="string">&quot;ddd&quot;</span>);</span><br><span class="line">imgs.delete(<span class="number">100</span>);</span><br><span class="line">imgs.has(<span class="number">100</span>); <span class="comment">//false</span></span><br><span class="line">imgs.add(<span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;ddd&quot;</span>));</span><br><span class="line">imgs.forEach(<span class="function">(<span class="params">val, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//键值是相等的</span></span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(imgs, imgs.size);</span><br><span class="line"></span><br><span class="line"><span class="comment">//set中的对象引用无法被释放</span></span><br><span class="line"><span class="keyword">let</span> set3 = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;xx&quot;</span> &#125;;</span><br><span class="line">set3.add(obj);</span><br><span class="line">obj = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用WeakSet代替</span></span><br><span class="line"><span class="keyword">let</span> set3 = <span class="keyword">new</span> <span class="built_in">WeakSet</span>();</span><br><span class="line">set3.add(obj);</span><br><span class="line">obj = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//它不能传入非对象类型的参数</span></span><br><span class="line"><span class="comment">//不能遍历</span></span><br><span class="line"><span class="comment">//没有size属性</span></span><br></pre></td></tr></table></figure>

<ul>
<li>遍历集合<code>for....of</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> imgs.keys()) &#123;</span><br><span class="line">  <span class="comment">//遍历键</span></span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> imgs.values()) &#123;</span><br><span class="line">  <span class="comment">//只遍历值</span></span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> imgs.entries()) &#123;</span><br><span class="line">  <span class="comment">//遍历键与值</span></span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组与集合互转</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组变集合</span></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(set);</span><br><span class="line"><span class="comment">//集合变数组，将数据结构展开为数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [...set];</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>

<h4 id="复杂数据类型-Map-映射-键值对的有序列表，键值可以是任意类型"><a href="#复杂数据类型-Map-映射-键值对的有序列表，键值可以是任意类型" class="headerlink" title="复杂数据类型 Map 映射(键值对的有序列表，键值可以是任意类型)"></a>复杂数据类型 Map 映射(键值对的有序列表，键值可以是任意类型)</h4><blockquote>
<p>同等内存下 map 比 object 多存储更多的数据<br>插入性能更好，查找性能相当，删除性能更好（delete 仅仅解绑数据，内存还未释放）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="comment">//添加数据</span></span><br><span class="line">map.set(<span class="string">&quot;Tom&quot;</span>, <span class="string">&quot;fishman&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;Jack&quot;</span>, <span class="string">&quot;woker&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;Sim&quot;</span>, <span class="string">&quot;teacher&quot;</span>);</span><br><span class="line">map.set(<span class="string">&quot;Jack&quot;</span>, <span class="string">&quot;bussnessman&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">map.delete(<span class="string">&quot;Sim&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断是否存在</span></span><br><span class="line">map.has(<span class="string">&quot;Sim&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map);</span><br><span class="line"></span><br><span class="line"><span class="comment">//取值</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//map遍历：for   of</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类-class"><a href="#类-class" class="headerlink" title="类 class"></a>类 class</h4><blockquote>
<p>是构造函数的语法糖</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, sex, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.sex = sex;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;xiaomi&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es6</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">preson</span></span>&#123;</span><br><span class="line"><span class="comment">//class属性添加。</span></span><br><span class="line"><span class="comment">// constructor()是类的默认方法，通过new命令生成对象实例时，自动调用该方法</span></span><br><span class="line"><span class="comment">// 一个类必须有constructor()方法，如果没有显式定义，一个空的constructor()方法会被默认添加</span></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">name,sex,age</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name=xxx;</span><br><span class="line">   <span class="built_in">this</span>.sex=sex;</span><br><span class="line">   <span class="built_in">this</span>.age=age;</span><br><span class="line">   <span class="function"><span class="title">showself</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>,<span class="subst">$&#123;<span class="built_in">this</span>.age&#125;</span>`</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1=<span class="keyword">new</span> person(<span class="string">&quot;Tony&quot;</span>,<span class="string">&quot;man&quot;</span>,<span class="number">33</span>);</span><br><span class="line">p1.showself();</span><br><span class="line"></span><br><span class="line"><span class="comment">//extends继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">worker</span> <span class="keyword">extends</span> <span class="title">person</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">name,sex,age,job</span>)</span>&#123;</span><br><span class="line">   <span class="comment">//继承到父一级的属性</span></span><br><span class="line">   <span class="built_in">super</span>(name,sex,age);<span class="comment">//要写在最前面</span></span><br><span class="line">   <span class="built_in">this</span>.job=job;</span><br><span class="line">   <span class="comment">//子类自己的方法</span></span><br><span class="line">   <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//重写父类方法</span></span><br><span class="line">   <span class="function"><span class="title">showself</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;xx&#x27;</span>)</span><br><span class="line">      <span class="built_in">super</span>.showself()</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name, sex, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.sex = sex;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person.prototype.showself = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">woker</span>(<span class="params">name, sex, age, job</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//1.构造函数的伪装，继承父级的属性</span></span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, sex, age);</span><br><span class="line">  <span class="built_in">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.原型链  继承父一级的方法</span></span><br><span class="line"><span class="comment">//&lt;1&gt;通过for ...in 遍历继承</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> funcName <span class="keyword">in</span> person.prototype) &#123;</span><br><span class="line">  worker.prototype[funcName] = person.prototype[funcName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&lt;2&gt;Object.create()</span></span><br><span class="line">worker.prototype = <span class="built_in">Object</span>.create(person.prototype);</span><br><span class="line"><span class="comment">//&lt;3&gt;调用构造函数继承</span></span><br><span class="line">worker.prototype = <span class="keyword">new</span> person();</span><br><span class="line"></span><br><span class="line">worker.prototype.showjob = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.job);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> w1 = <span class="keyword">new</span> worker(<span class="string">&quot;Tom&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="number">22</span>, <span class="string">&quot;driver&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="迭代器-Iterator"><a href="#迭代器-Iterator" class="headerlink" title="迭代器 Iterator"></a>迭代器 Iterator</h4><blockquote>
<p>新的遍历机制</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>];</span><br><span class="line"><span class="comment">//创建迭代器</span></span><br><span class="line"><span class="keyword">const</span> ite = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"><span class="built_in">console</span>.log(ite.next()); <span class="comment">//&#123;value:&#x27;1&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()); <span class="comment">//&#123;value:&#x27;2&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()); <span class="comment">//&#123;value:&#x27;3&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(ite.next()); <span class="comment">//&#123;value:undefined,done:true&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="生成器-generator"><a href="#生成器-generator" class="headerlink" title="生成器 generator"></a>生成器 generator</h4><blockquote>
<p>只有在 generator 函数中才能使用 yield<br>通过 yield 关键字，将函数挂起,暂停执行<br>只能在函数内部使用 yield 表达式，将函数挂起</p>
</blockquote>
<p>恢复执行：next 方法执行后会返回一个对象，对象中有 value 和 done 两个属性<br>value：暂停点后面接的值，也就是 yield 后面接的值<br>done：是否 generator 函数已走完，没走完为 false，走完为 true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;one&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;two&quot;</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fn = test();</span><br><span class="line"><span class="built_in">console</span>.log(fn.next()); <span class="comment">//one \n &#123;value:&#x27;1&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.next()); <span class="comment">//two \n &#123;value:&#x27;2&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.next()); <span class="comment">//end \n &#123;value:undefined,done:true&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//赋值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">test</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;one&quot;</span>, x);</span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;two&quot;</span>, a);</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;end&quot;</span>, b);</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fn = test(<span class="number">999</span>);</span><br><span class="line"><span class="built_in">console</span>.log(fn.next()); <span class="comment">//one 999 \n &#123;value:&#x27;1&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.next(<span class="number">10</span>)); <span class="comment">//two 10 \n &#123;value:&#x27;2&#x27;,done:false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.next(<span class="number">20</span>)); <span class="comment">//end 20 \n &#123;value:30,done:true&#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>用于给不具备 interator 接口的对象提供遍历操作<br>用于解决回调地域</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//for...of.. foreach 不能遍历对象</span></span><br><span class="line"><span class="comment">//for...of..只能遍历带有iterator迭代器接口的,for...of底层利用iterator迭代器实现，遍历时会调用自身的next方法，让yield向下执行</span></span><br><span class="line"><span class="comment">//使用生成器，遍历对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">aobjectEntries</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> keys) &#123;</span><br><span class="line">    <span class="keyword">yield</span> [i, obj[i]];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;xx&quot;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;;</span><br><span class="line">obj[<span class="built_in">Symbol</span>.iterator] = objectEntries;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> objectEntries(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h4><blockquote>
<p>通过 Promise 的链式调用可以解决回调地狱<br>回调函数：当一个函数当作参数传递给另一个函数的时候，这个函数就是回调函数<br>首先我们在调用 Promise 时，会返回一个 Promise 对象。<br>构建 Promise 对象时，需要传入一个 executor 函数，Promise 的主要业务流程都在 executor 函数中执行。<br>如果运行在 excutor 函数中的业务执行成功了，会调用 resolve 函数；如果执行失败了，则调用 reject 函数。<br>Promise 的状态不可逆，同时调用 resolve 函数和 reject 函数，默认会采取第一次调用的结果<br>Promise 是没有中断方法的,可以使用 race 来自己封装中断方法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p=<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123; <span class="comment">//异步操作&#125;)</span></span><br><span class="line">p.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;&#125;)</span><br><span class="line"><span class="comment">//then()，第一个参数是resolve回调函数，第二个是reject回调函数，可选．</span></span><br><span class="line"><span class="comment">//catch(err=&gt;&#123;&#125;)等价于then(null,err=&gt;&#123;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//resolve()方法,将现有的任何对象转化为promise对象</span></span><br><span class="line"><span class="comment">//reject()方法,将现有的任何对象转化为promise对象</span></span><br><span class="line"><span class="keyword">let</span> p1=<span class="built_in">Promise</span>.resolve(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> p2=<span class="built_in">Promise</span>.reject(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">p1.then(<span class="function"><span class="params">val</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="comment">//val==123</span></span><br><span class="line"><span class="comment">//等价于new Promise(resolve=&gt;resolve(&#x27;123&#x27;))</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//all(),所有异步操作都成功才成功，只要有一个失败就都失败</span></span><br><span class="line"><span class="keyword">let</span> p3=<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">let</span> p4=<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;&#125;)</span><br><span class="line"><span class="keyword">let</span> p5=<span class="built_in">Promise</span>.all([p3,p4])</span><br><span class="line">p5.then()</span><br><span class="line"></span><br><span class="line"><span class="comment">//race(),返回多个promise中最先执行完成的那个promise，无论成功还是失败</span></span><br><span class="line"><span class="keyword">let</span> p6=<span class="built_in">Promise</span>.race([p3,p4])</span><br><span class="line">p6.then()</span><br><span class="line"></span><br><span class="line"><span class="comment">//finally()，不管成功失败都会执行</span></span><br><span class="line"><span class="comment">//done()</span></span><br><span class="line">p1.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;&#125;).finally(<span class="function">()=&gt;</span>&#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>手写 promise<br>promise 有三个状态：<code>pending</code>，<code>fulfilled</code>， <code>rejected</code>，promise 的默认状态是 pending<br>执行了 resolve()，Promise 状态会变成 resolved/fulfilled，即 已完成状态<br>执行了 reject()，Promise 状态会变成 rejected，即 被拒绝状态<br>promise 的状态只可能从“等待”转到“完成”态或者“拒绝”态，不能逆向转换<br>且状态只能改变一次，即改变之后无论变为成功还是失败, 都不会再改变<br>Promise 中有 throw 的话，就相当于执行了 reject()</p>
</li>
<li><p>基础(then 本身未进行异步处理,链式调用)</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 三个状态：PENDING、FULFILLED、REJECTED</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;PENDING&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">&#x27;FULFILLED&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;REJECTED&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">   <span class="comment">// 默认状态为 PENDING</span></span><br><span class="line">    <span class="built_in">this</span>.status = PENDING;</span><br><span class="line">    <span class="comment">// 存放成功状态的值，默认为 undefined</span></span><br><span class="line">    <span class="built_in">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">// 存放失败状态的值，默认为 undefined</span></span><br><span class="line">    <span class="built_in">this</span>.reason = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 存放成功的回调</span></span><br><span class="line">    <span class="built_in">this</span>.onResolvedCallbacks = [];</span><br><span class="line">    <span class="comment">// 存放失败的回调</span></span><br><span class="line">    <span class="built_in">this</span>.onRejectedCallbacks= [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用此方法就是成功</span></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 状态为 PENDING 时才可以更新状态，防止 executor 中调用了两次 resovle/reject 方法</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = FULFILLED;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">         <span class="comment">// 依次将对应的函数执行</span></span><br><span class="line">        <span class="built_in">this</span>.onResolvedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用此方法就是失败</span></span><br><span class="line">    <span class="keyword">let</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 状态为 PENDING 时才可以更新状态，防止 executor 中调用了两次 resovle/reject 方法</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = REJECTED;</span><br><span class="line">        <span class="built_in">this</span>.reason = reason;</span><br><span class="line">        <span class="comment">// 依次将对应的函数执行</span></span><br><span class="line">        <span class="built_in">this</span>.onRejectedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="comment">// 立即执行，将 resolve 和 reject 函数传给使用者</span></span><br><span class="line">      executor(resolve,reject)</span><br><span class="line">      <span class="comment">//((resolve,reject)=&gt;&#123;resolve(&#x27;xx&#x27;)&#125;)(resolve,reject)</span></span><br><span class="line">      &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">      <span class="comment">// 发生异常时执行失败逻辑</span></span><br><span class="line">      reject(error)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">// 包含一个 then 方法，并接收两个参数 onFulfilled、onRejected</span></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === FULFILLED) &#123;</span><br><span class="line">      onFulfilled(<span class="built_in">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === REJECTED) &#123;</span><br><span class="line">      onRejected(<span class="built_in">this</span>.reason)</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">// 如果promise的状态是 pending，需要将 onFulfilled 和 onRejected 函数存放起来，等待状 态确定后，再依次将对应的函数执行</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.status === PENDING) &#123;</span><br><span class="line">       <span class="built_in">this</span>.onResolvedCallbacks.push(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         onFulfilled(<span class="built_in">this</span>.value)</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="built_in">this</span>.onRejectedCallbacks.push(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">         onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>then 链式调用和异步<br>结合 Promise/A+ 规范梳理一下思路：</li>
</ul>
<p>then 的参数 onFulfilled 和 onRejected 可以缺省，如果 onFulfilled 或者 onRejected 不是函数，将其忽略，且依旧可以在下面的 then 中获取到之前返回的值；「规范 Promise/A+ 2.2.1、2.2.1.1、2.2.1.2」<br>promise 可以 then 多次，每次执行完 promise.then 方法后返回的都是一个“新的 promise”；「规范 Promise/A+ 2.2.7」<br>如果 then 的返回值 x 是一个普通值，那么就会把这个结果作为参数，传递给下一个 then 的成功的回调中；<br>如果 then 中抛出了异常，那么就会把这个异常作为参数，传递给下一个 then 的失败的回调中；「规范 Promise/A+ 2.2.7.2」<br>如果 then 的返回值 x 是一个 promise，那么会等这个 promise 执行完，promise 如果成功，就走下一个 then 的成功；如果失败，就走下一个 then 的失败；如果抛出异常，就走下一个 then 的失败；「规范 Promise/A+ 2.2.7.3、2.2.7.4」<br>如果 then 的返回值 x 和 promise 是同一个引用对象，造成循环引用，则抛出异常，把异常传递给下一个 then 的失败的回调中；「规范 Promise/A+ 2.3.1」<br>如果 then 的返回值 x 是一个 promise，且 x 同时调用 resolve 函数和 reject 函数，则第一次调用优先，其他所有调用被忽略；「规范 Promise/A+ 2.3.3.3.3」</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolvePromise = <span class="function">(<span class="params">promise2, x, resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 自己等待自己完成是错误的实现，用一个类型错误，结束掉 promise</span></span><br><span class="line">  <span class="keyword">if</span> (promise2 === x) &#123;</span><br><span class="line">    <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Chaining cycle detected for promise #&lt;Promise&gt;&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 只能调用一次</span></span><br><span class="line">  <span class="keyword">let</span> called;</span><br><span class="line">  <span class="comment">// 后续的条件要严格判断 保证代码能和别的库一起使用</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">typeof</span> x === <span class="string">&#x27;object&#x27;</span> &amp;&amp; x != <span class="literal">null</span>) || <span class="keyword">typeof</span> x === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 为了判断 resolve 过的就不用再 reject 了（比如 reject 和 resolve 同时调用的时候）</span></span><br><span class="line">      <span class="keyword">let</span> then = x.then;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 不要写成 x.then，直接 then.call 就可以了 因为 x.then 会再次取值，Object.defineProperty</span></span><br><span class="line">        then.call(x, <span class="function"><span class="params">y</span> =&gt;</span> &#123; <span class="comment">// 根据 promise 的状态决定是成功还是失败</span></span><br><span class="line">          <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          <span class="comment">// 递归解析的过程（因为可能 promise 中还有 promise）</span></span><br><span class="line">          resolvePromise(promise2, y, resolve, reject);</span><br><span class="line">        &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 只要失败就失败</span></span><br><span class="line">          <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          reject(r);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果 x.then 是个普通值就直接返回 resolve 作为结果</span></span><br><span class="line">        resolve(x);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">      called = <span class="literal">true</span>;</span><br><span class="line">      reject(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果 x 是个普通值就直接返回 resolve 作为结果  Promise/A+ 2.3.4</span></span><br><span class="line">    resolve(x)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Promise类中的then方法*/</span></span><br><span class="line"><span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//解决 onFufilled，onRejected 没有传值的问题</span></span><br><span class="line">    onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br><span class="line">    <span class="comment">//因为错误的值要让后面访问到，所以这里也要跑出个错误，不然会在之后 then 的 resolve 中捕获</span></span><br><span class="line">    onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="params">err</span> =&gt;</span> &#123; <span class="keyword">throw</span> err &#125;;</span><br><span class="line">    <span class="comment">// 每次调用 then 都返回一个新的 promise</span></span><br><span class="line">    <span class="keyword">let</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === FULFILLED) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> x = onFulfilled(<span class="built_in">this</span>.value);</span><br><span class="line">            <span class="comment">// x可能是一个proimise</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === REJECTED) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> x = onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.onResolvedCallbacks.push(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">let</span> x = onFulfilled(<span class="built_in">this</span>.value);</span><br><span class="line">              resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              reject(e)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.onRejectedCallbacks.push(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">let</span> x = onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">              resolvePromise(promise2, x, resolve, reject)</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              reject(e)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="async-await"><a href="#async-await" class="headerlink" title="async / await"></a>async / await</h4><blockquote>
<p>是 generator 生成器的语法糖<br>将异步操作转为同步化操作<br>async 返回一个 promise 对象<br>当执行到 await 时，函数暂停执行，直到 await 等待的 Promise 状态改变</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">msg</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> jackson = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> jackson = <span class="keyword">async</span> () =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line">  <span class="comment">//throw new Error(&#x27;err&#x27;)</span></span><br><span class="line">&#125;</span><br><span class="line">test().then(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//val==&#x27;123&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="模块化规范"><a href="#模块化规范" class="headerlink" title="模块化规范"></a>模块化规范</h3><ul>
<li><p>CommonJs 规范(nodejs)</p>
</li>
<li><p>AMD 规范：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    声明：</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//代码</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">outA</span>: showA,</span><br><span class="line">    <span class="attr">outB</span>: showB,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用：（异步执行）</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;moduleA.js&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">moduleA</span>) </span>&#123;</span><br><span class="line">  moduleA.putA();</span><br><span class="line">  moduleA.putB();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>ECMA6</li>
</ul>
<p>moduleB.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导出</span></span><br><span class="line"><span class="keyword">export</span>=&#123;</span><br><span class="line">   <span class="attr">outA</span>:showA</span><br><span class="line">   <span class="attr">outB</span>:showB</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age=<span class="string">&#x27;xx&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name=<span class="string">&#x27;xx&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//导入</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; age, sayName, name &#125; <span class="keyword">from</span> <span class="string">&quot;./moduleA.js&quot;</span>;</span></span><br><span class="line"><span class="javascript">  sayName();</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>moduleA.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认导出</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;xx&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//只能使用一次</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> obj;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//导入</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> moduleA <span class="keyword">from</span> <span class="string">&quot;./moduleB.js&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="comment">//或</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> * <span class="keyword">as</span> a <span class="keyword">from</span> <span class="string">&quot;./moduleB.js&quot;</span>;</span></span><br><span class="line"><span class="javascript">  moduleA.outA();</span></span><br><span class="line"><span class="javascript">  moduleA.outB();</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript-性能"><a href="#JavaScript-性能" class="headerlink" title="JavaScript 性能"></a>JavaScript 性能</h3><ol>
<li> 减少循环中的活动</li>
<li>减少 DOM 访问<br> 与其他 JavaScript 相比，访问 HTML DOM 非常缓慢</li>
<li>缩减 DOM 规模<br> 请尽量保持 HTML DOM 中较少的元素数量。</li>
<li> 避免不必要的变量</li>
<li>延迟 JavaScript 加载<br> 请把脚本放在页面底部，使浏览器首先加载页面。</li>
<li>避免使用 with<br> 请避免使用 with 关键词。它对速度有负面影响。它也将混淆 JavaScript 作用域。</li>
</ol>
<h3 id="JavaScript-JSON"><a href="#JavaScript-JSON" class="headerlink" title="JavaScript JSON"></a>JavaScript JSON</h3><p>JSON 是存储和传输数据的格式。<br>JSON 格式仅仅是文本，它能够轻松地在服务器浏览器之间传输，并用作任何编程语言的数据格式。<br>JSON 语法衍生于 JavaScript 对象标记法语法:</p>
<ul>
<li>数据在名称/值对中</li>
<li>数据由逗号分隔</li>
<li>花括号容纳对象</li>
<li>方括号容纳数组</li>
</ul>
<p>JSON 的值不可以是以下数据类型之一：函数;日期;undefined.</p>
<p>把 JSON 文本转换为 JavaScript 对象<br>首先，创建包含 JSON 语法的 JavaScript 字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> text =</span><br><span class="line">  <span class="string">&#x27;&#123; &quot;employees&quot; : [&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&#123; &quot;firstName&quot;:&quot;Bill&quot; , &quot;lastName&quot;:&quot;Gates&quot; &#125;,&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&#123; &quot;firstName&quot;:&quot;Steve&quot; , &quot;lastName&quot;:&quot;Jobs&quot; &#125;,&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&#123; &quot;firstName&quot;:&quot;Alan&quot; , &quot;lastName&quot;:&quot;Turing&quot; &#125; ]&#125;&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>然后，使用 JavaScript 的内建函数 JSON.parse() 来把这个字符串转换为 JavaScript 对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(text);</span><br></pre></td></tr></table></figure>

<p>最后，请在您的页面中使用这个新的 JavaScript 对象：</p>
<p>实例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>\<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>).innerHTML =</span></span><br><span class="line"><span class="javascript">obj.employees[<span class="number">1</span>].firstName + <span class="string">&quot; &quot;</span> + obj.employees[<span class="number">1</span>].lastName;</span></span><br><span class="line"><span class="javascript">&lt;/&gt;</span></span><br></pre></td></tr></table></figure>

<p>JSON 与 XML 的差异在于：</p>
<ul>
<li>JSON 不使用标签</li>
<li>JSON 更短</li>
<li>JSON 的读写速度更快</li>
<li>JSON 可使用数组</li>
</ul>
<p>最大的不同在于：</p>
<p>XML 必须使用 XML 解析器进行解析。而 JSON 可通过标准的 JavaScript 函数进行解析。</p>
<ul>
<li>JavaScript 表单验证</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validateForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="built_in">document</span>.forms[<span class="string">&quot;myForm&quot;</span>][<span class="string">&quot;fname&quot;</span>].value;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    alert(<span class="string">&quot;必须填写姓名&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">&quot;myForm&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">action</span>=<span class="string">&quot;action\_page\_post.php&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">onsubmit</span>=<span class="string">&quot;return validateForm()&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">method</span>=<span class="string">&quot;post&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fname&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="js-执行机制（event-loop-事件循环）"><a href="#js-执行机制（event-loop-事件循环）" class="headerlink" title="js 执行机制（event loop 事件循环）"></a>js 执行机制（event loop 事件循环）</h3><blockquote>
<p>javascript 是一门单线程语言，在最新的 HTML5 中提出了 Web-Worker，但 javascript 是单线程这一核心仍未改变。所以一切 javascript 版的”多线程”都是用单线程模拟出来的</p>
</blockquote>
<ol>
<li>判断是同步任务还是异步任务</li>
<li>同步的进入主线程，异步的进入 Event Table 并注册回调函数。</li>
<li>当指定的事情完成时，Event Table 会将这个回调函数移入 Event Queue。</li>
<li>主线程内的同步任务执行完毕为空，会去 Event Queue 读取对应的函数，进入主线程执行。<br>上述过程会不断重复，也就是常说的 Event Loop(事件循环)。<br>那怎么知道主线程执行栈为空啊？js 引擎存在 monitoring process 进程，会持续不断的检查主线程执行栈是否为空，一旦为空，就会去 Event Queue 那里检查是否有等待被调用的函数。</li>
</ol>
<h4 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout"></a>setTimeout</h4><p>setTimeout(fn,0)的含义是，指定某个任务在主线程最早可得的空闲时间执行，关于 setTimeout 要补充的是，即便主线程为空，0 毫秒实际上也是达不到的。根据 HTML 的标准，最低是 4 毫秒。</p>
<h4 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h4><p>对于执行顺序来说，setInterval 会每隔指定的时间将注册的函数置入 Event Queue，如果前面的任务耗时太久，那么同样需要等待。<br>唯一需要注意的一点是，对于 setInterval(fn,ms)来说，我们已经知道不是每过 ms 秒会执行一次 fn，而是每过 ms 秒，会有 fn 进入 Event Queue。一旦 setInterval 的回调函数 fn 执行时间超过了延迟时间 ms，那么就完全看不出来有时间间隔了。</p>
<h4 id="Promise-与-process-nextTick-callback"><a href="#Promise-与-process-nextTick-callback" class="headerlink" title="Promise 与 process.nextTick(callback)"></a>Promise 与 process.nextTick(callback)</h4><blockquote>
<p>process.nextTick(callback)类似 node.js 版的”setTimeout”，在事件循环的下一次循环中调用 callback 回调函数。</p>
</blockquote>
<p>我们进入正题，除了广义的同步任务和异步任务，我们对任务有更精细的定义：</p>
<p>macro-task(宏任务)：包括整体代码<code>script主代码块</code>，<code>setTimeout</code>，<code>setInterval</code>,<code>Ajax</code>、<code>DOM事件</code>。<code>setImmediate(Node.js 环境)</code> ,<code>postMessage</code>,<code>IO操作</code>,<code>MessageChannel</code><br>micro-task(微任务)：<code>Promise</code>，<code>process.nextTick(Node.js 环境)</code>,<code>async</code>、<code>await</code>,<code>MutaionOberver（浏览器环境）</code>,<code>Object.observe</code>。</p>
<p>JS 的执行/运行机制，具体如下所示：<br>1、在执行栈中执行一个宏任务；<br>2、执行过程中遇到微任务，将微任务添加到微任务队列中；<br>3、当前宏任务执行完毕，立即执行微任务队列中的任务；<br>4、当前微任务队列中的任务执行完毕，检查渲染，GUI 线程接管渲染；<br>5、渲染完毕后，js 线程接管，开启下一次事件循环，执行下一次宏任务（事件队列中取）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise&#x27;</span>);</span><br><span class="line">    resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;then&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;console&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * setTimeout回调函数放入宏任务事件队列event queue</span></span><br><span class="line"><span class="comment"> * 立即执行new Promise,输出-&gt;promise ,将then()回调函数放入微任务事件队列</span></span><br><span class="line"><span class="comment"> * 执行console.log输出-&gt;console</span></span><br><span class="line"><span class="comment"> * 查看微任务</span></span><br><span class="line"><span class="comment"> * 执行then中的回调函数输出then</span></span><br><span class="line"><span class="comment"> * 第一轮事件循环结束</span></span><br><span class="line"><span class="comment"> * 从宏任务事件队列中取出任务</span></span><br><span class="line"><span class="comment"> * 执行setTimeout回调函数输出-&gt;setTimeout</span></span><br><span class="line"><span class="comment"> * /</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure>

<h3 id="内存回收机制"><a href="#内存回收机制" class="headerlink" title="内存回收机制"></a>内存回收机制</h3><p>栈内存中的基本数据类型，可以直接通过操作系统进行处理，而堆内存中的引用数据类型的值大小不确定，因此需要 JS 的引擎通过垃圾回收机制进行处理。</p>
<h4 id="引用计数"><a href="#引用计数" class="headerlink" title="引用计数"></a>引用计数</h4><ul>
<li>当变量进行声明并赋值后，值的引用数为 1。</li>
<li>当同一个值被赋值给另一个变量时，引用数+1</li>
<li>当保存该值引用的变量被其它值覆盖时，引用数-1</li>
<li>当该值的引用数为 0 时，表示无法再访问该值了，此时就可以放心地将其清除并回收内存。</li>
</ul>
<p>这种回收策略看起来很方便，但是当其进行循环引用时就会出现问题，会造成大量的内存不会被释放。当函数结束后，两个对象都不在作用域中，A 和 B 都会被当作非活动对象来清除掉,相比之下，引用计数则不会释放，也就会造成大量无用内存占用，这也是后来放弃引用计数，使用标记清除的原因之一。</p>
<h4 id="标记清除"><a href="#标记清除" class="headerlink" title="标记清除"></a>标记清除</h4><ul>
<li>垃圾收集器在运行时会给内存中的所有变量都加上一个标记</li>
<li>然后从各个根对象开始遍历，把还在被上下文变量引用的变量标记去掉标记</li>
<li>清理所有带有标牌机的变量，销毁并回收它们所占用的内存空间</li>
<li>最后垃圾回收程序做一次内存清理<br>使用标记清除策略的最重要的优点在于简单，无非是标记和不标记的差异。通过标记清除之后，剩余的对象内存位置是不变的，也会导致空闲内存空间是不连续的，这就造成出现内存碎片的问题。内存碎片多了后，如果要存储一个新的需要占据较大内存空间的对象，就会造成影响。对于通过标记清除产生的内存碎片，还是需要通过标记整理策略进行解决。</li>
</ul>
<h4 id="V8-对于垃圾回收机制的优化"><a href="#V8-对于垃圾回收机制的优化" class="headerlink" title="V8 对于垃圾回收机制的优化"></a>V8 对于垃圾回收机制的优化</h4><p>V8 的垃圾回收策略主要基于<strong>分代式</strong>垃圾回收机制，V8 中将堆内存分为新生代和老生代两区域，采用不同的垃圾回收器也就是不同的策略管理垃圾回收。<br>新生代的对象为存活时间较短的对象，简单来说就是新产生的对象，通常只支持 1 ～ 8M 的容量，而老生代的对象为存活事件较长或常驻内存的对象，简单来说就是经历过新生代垃圾回收后还存活下来的对象，容量通常比较大。V8 整个堆内存的大小就等于新生代加上老生代的内存，对于新老两块内存区域的垃圾回收，V8 采用了两个垃圾回收器来管控</p>
<h5 id="新生代内存回收"><a href="#新生代内存回收" class="headerlink" title="新生代内存回收"></a>新生代内存回收</h5><p>在 64 操作系统下分配为 32MB，32 位系统 16M 内存,因为新生代中的变量存活时间短，不太容易产生太大的内存压力，因此不够大也是能够理解。<br>对于新生代内存的回收，通常是通过 Scavenge 的算法进行垃圾回收，就是将新生代内存进行一分为二，正在被使用的内存空间称为使用区，而限制状态的内存空间称为空闲区。</p>
<ul>
<li>新加入的对象都会存放在使用区，当使用区快写满时就进行一次垃圾清理操作。</li>
<li>在开始进行垃圾回收时，新生代回收器会对使用区内的对象进行标记</li>
<li>标记完成后，需要对使用区内的活动对象拷贝到空闲区进行排序</li>
<li>而后进入垃圾清理阶段，将非活动对象占用的内存空间进行清理</li>
<li>最后对使用区和空闲区进行交换，使用区-&gt;空闲区，空闲区-&gt;使用区<br>新生代中的变量如果经过回收之后依然一直存在，那么会放入到老生代内存中，只要是已经经历过一次 Scavenge 算法回收的，就可以晋升为老生代内存的对象。<br>新生代存放的是新分配的小量内存，如果达到以下条件中的一个，将被分配至老生代<br>内存大小达到 From space 的 25%<br>经历了 From space &lt;-&gt; To space 的一个轮回</li>
</ul>
<h5 id="老生代内存回收"><a href="#老生代内存回收" class="headerlink" title="老生代内存回收"></a>老生代内存回收</h5><p>32 位系统 700M 左右<br>64 位系统 1.4G 左右<br>标记清除,标记整理进行老生代内存中的垃圾回收。<br>首先是标记阶段，从一组根元素开始，递归遍历这组根元素，遍历过程中能到达的元素称为活动对象，没有到达的元素就可以判断为非活动对象。清除阶段老生代垃圾回收器会直接将非活动对象，也就是数据清理掉。<br>同样的标记清除策略会产生内存碎片，因此还需要进行标记整理策略进行优化。</p>
<h4 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h4><p>指在 JS 中已经分配内存地址的对象由于长时间未进行内存释放或无法清除</p>
<ul>
<li>滥用闭包 -定时器或回调太多。与节点或数据相关联的计时器不再需要时，DOM 节点对象可以清除，整个回调函数也不再需要。可是，计时器回调函数仍然没有被回收（计时器停止才会被回收）。当不需要 setTimeout 或 setInterval 时，定时器没有被清除，定时器的糊掉函数以及其内部依赖的变量都不能被回收，会造成内存泄漏。解决方法：在定时器完成工作时，需要手动清除定时器。</li>
<li>太多无效的 DOM 引用。DOM 删除了，但是节点的引用还在，导致 GC 无法实现对其所占内存的回收。解决方法：给删除的 DOM 节点引用设置为 null。</li>
<li>滥用全局变量,全局变量是根据定义无法被垃圾回收机制进行收集的，因此需要特别注意临时存储和处理大量信息的全局变量。如果必须使用全局变量来存储数据，请确保将其指定为 null 或在完成后重新分配它。解决方法：使用严格模式。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
