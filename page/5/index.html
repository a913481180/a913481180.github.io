<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"a913481180.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="https://a913481180.github.io/page/5/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://a913481180.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/10/11/22-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/11/22-11-33/" class="post-title-link" itemprop="url">dwm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-11 22:11:33" itemprop="dateCreated datePublished" datetime="2020-10-11T22:11:33+08:00">2020-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="补丁"><a href="#补丁" class="headerlink" title="补丁"></a>补丁</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> dwm</span><br><span class="line">patch &lt; xxxx.diff</span><br><span class="line">patch -R &lt; xxx.diff</span><br></pre></td></tr></table></figure>

<ul>
<li>dwm-alpha-xxx.diff：窗口透明，需配合picom</li>
<li>dwm-awesomebar-xxx.diff：tabar隐藏窗口</li>
<li>dwm-gaps-6.0.diff：窗口之间的缝隙</li>
<li>dwm-focusonclick.xxx.diff：鼠标点击才窗口聚焦</li>
<li>dwm-moveresize-xxx.diff：浮动模式，调整窗口位置大小</li>
<li>dwm-autostart-xxxx.diff：自动运行脚本，这个补丁将在dwm进入主循环运行之前运行<del>/.dwm/autostart_blocking.sh和</del>/.dwm/autostart.sh &amp;，然后才启动dwm。可以省略其中一个或两个文件。 上面列出的文件分别在目录$XDG_DATA_HOME/DWM、$HOME/.local/Share/DWM和$HOME/.dwm中查找。将会在最先找到的目录中运行脚本，即使该目录下没有脚本。直接使用，将脚本文件放入<del>/.dwm下，同时确保没有上面提到的另两个目录。同时注意若</del>/.dwm/autostart_blocking.sh无法执行完毕，则将卡死。</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> dwm</span><br><span class="line">sudo make clean install</span><br></pre></td></tr></table></figure>

<h2 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h2><h3 id="config-h"><a href="#config-h" class="headerlink" title="config.h"></a>config.h</h3><ul>
<li>字体</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> *fonts[]          = &#123; <span class="string">&quot;DejaVu Sans Mono:size=18&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//static char *font = &quot;Droid Sans Mono:pixelsize=18:antialias=true:autohint=true&quot;;</span></span><br><span class="line"><span class="comment">//static char *font = &quot;Monaco:pixelsize=18:antialias=true:autohint=true&quot;;</span></span><br><span class="line"><span class="comment">//static char *font = &quot;Inconsolata:pixelsize=18:antialias=true:autohint=true&quot;;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>颜色</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> col_gray1[]       = <span class="string">&quot;#222222&quot;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> col_gray2[]       = <span class="string">&quot;#444444&quot;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> col_gray3[]       = <span class="string">&quot;#bbbbbb&quot;</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> col_gray4[]       = <span class="string">&quot;#eeeeee&quot;</span>;</span><br><span class="line"><span class="comment">//static const char col_cyan[]        = &quot;#005577&quot;;</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> col_cyan[]        = <span class="string">&quot;#00d997&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>自定义快捷键</li>
</ul>
<p>我们以flamshot为例，为flameshot设置截图快捷键</p>
<p>首先在/<em>commands</em>/下添加你要设置快捷键的命令</p>
<ul>
<li>flameshot的截图命令是：flameshot gui，后面没有参数所以设为NULL，这条命令的名字我们设为flameshot</li>
</ul>
<p><code>static const char *flameshot[]  = &#123; &quot;flameshot&quot;,&quot;gui&quot;, NULL &#125;;</code></p>
<p>进行快捷键和命令的绑定</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="number">0</span>,           XK_Print,      spawn,          &#123;.v = flameshot &#125; &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>重新编译</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make clean install</span><br></pre></td></tr></table></figure>

<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><ul>
<li>启动脚本</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#~/.dwm/autostart.sh</span></span><br><span class="line">feh   --bg-fill ~/Downloads/bg.jpg</span><br><span class="line">picom &amp;</span><br><span class="line">albert &amp;</span><br><span class="line">nm-applet &amp;</span><br><span class="line">fcitx5 -d</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    bash ~/.dwm/dwm_status.sh</span><br><span class="line">    sleep 1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>状态脚本</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ~/.dwm/dwm_status.sh</span></span><br><span class="line"><span class="comment"># This function parses /proc/net/dev file searching for a line containing $interface data.</span></span><br><span class="line"><span class="comment"># Within that line, the first and ninth numbers after &#x27;:&#x27; are respectively the received and transmited bytes.</span></span><br><span class="line"><span class="keyword">function</span> get_bytes &#123;</span><br><span class="line"> <span class="comment"># Find active network interface</span></span><br><span class="line"> interface=$(ip route get 8.8.8.8 2&gt;/dev/null| awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span>)</span><br><span class="line"> line=$(grep <span class="variable">$interface</span> /proc/net/dev | cut -d <span class="string">&#x27;:&#x27;</span> -f 2 | awk <span class="string">&#x27;&#123;print &quot;received_bytes=&quot;$1, &quot;transmitted_bytes=&quot;$9&#125;&#x27;</span>)</span><br><span class="line"> <span class="built_in">eval</span> <span class="variable">$line</span></span><br><span class="line"> now=$(date +%s%N)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Function which calculates the speed using actual and old byte number.</span></span><br><span class="line"><span class="comment"># Speed is shown in KByte per second when greater or equal than 1 KByte per second.</span></span><br><span class="line"><span class="comment"># This function should be called each second.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> get_velocity &#123;</span><br><span class="line"> value=<span class="variable">$1</span></span><br><span class="line"> old_value=<span class="variable">$2</span></span><br><span class="line"> now=<span class="variable">$3</span></span><br><span class="line"></span><br><span class="line"> timediff=$((<span class="variable">$now</span> - <span class="variable">$old_time</span>))</span><br><span class="line"> velKB=$(<span class="built_in">echo</span> <span class="string">&quot;1000000000*(<span class="variable">$value</span>-<span class="variable">$old_value</span>)/1024/<span class="variable">$timediff</span>&quot;</span> | bc)</span><br><span class="line"> <span class="keyword">if</span> <span class="built_in">test</span> <span class="string">&quot;<span class="variable">$velKB</span>&quot;</span> -gt 1024</span><br><span class="line"> <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> $(<span class="built_in">echo</span> <span class="string">&quot;scale=2; <span class="variable">$velKB</span>/1024&quot;</span> | bc)MB/s</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$&#123;velKB&#125;</span>KB/s</span><br><span class="line"> <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get initial values</span></span><br><span class="line">get_bytes</span><br><span class="line">old_received_bytes=<span class="variable">$received_bytes</span></span><br><span class="line">old_transmitted_bytes=<span class="variable">$transmitted_bytes</span></span><br><span class="line">old_time=<span class="variable">$now</span></span><br><span class="line"></span><br><span class="line">get_bytes</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculates speeds</span></span><br><span class="line">vel_recv=$(get_velocity <span class="variable">$received_bytes</span> <span class="variable">$old_received_bytes</span> <span class="variable">$now</span>)</span><br><span class="line">vel_trans=$(get_velocity <span class="variable">$transmitted_bytes</span> <span class="variable">$old_transmitted_bytes</span> <span class="variable">$now</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print_date</span></span>()&#123;</span><br><span class="line"> <span class="comment">#date &#x27;+Y-%m-%d %H:%M:%S&#x27;</span></span><br><span class="line"> date <span class="string">&#x27;+%m-%d %H:%M:%S&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">is_charging</span></span>()&#123;</span><br><span class="line"> charging=$(acpi -b | grep -Eo  <span class="string">&quot;Charging&quot;</span>)</span><br><span class="line"> <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$charging</span>&quot;</span> == <span class="string">&quot;Charging&quot;</span> ];</span><br><span class="line"> <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;🔌&quot;</span>;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;🔋&quot;</span>;</span><br><span class="line"> <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">print_bat</span></span>()&#123;</span><br><span class="line"> remain=$(acpi -b |awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>| grep -Eo <span class="string">&quot;[0-9]+&quot;</span> |paste -sd+ |bc)</span><br><span class="line"> <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$remain</span>%&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print_volume</span></span>()&#123;</span><br><span class="line"> volume=<span class="string">&quot;<span class="subst">$(amixer get Master | tail -n1 |sed -r &#x27;s/.*\[(.*)</span>%\].*/\1/&#x27;)&quot;</span></span><br><span class="line"> <span class="keyword">if</span> <span class="built_in">test</span> <span class="string">&quot;<span class="variable">$volume</span>&quot;</span> -gt 0</span><br><span class="line"> <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;V<span class="variable">$volume</span>%&quot;</span></span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;MM&quot;</span></span><br><span class="line"> <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">print_mem</span></span>()&#123;</span><br><span class="line"> memFree=$(($(grep -m1 &#x27;MemAvailable:&#x27; /proc/meminfo | awk &#x27;&#123;print <span class="variable">$2</span>&#125;&#x27;)/<span class="number">1024</span>))</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$memFree</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LOC=$(readlink -f <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">DIR=$(dirname <span class="string">&quot;<span class="variable">$LOC</span>&quot;</span>)</span><br><span class="line"><span class="built_in">export</span> IDENTIFIER=<span class="string">&quot;unicode&quot;</span></span><br><span class="line"></span><br><span class="line">. <span class="string">&quot;<span class="variable">$DIR</span>/dwm_resources.sh&quot;</span></span><br><span class="line">. <span class="string">&quot;<span class="variable">$DIR</span>/dwm_alsa.sh&quot;</span></span><br><span class="line"><span class="comment">#. &quot;$DIR/dwm_weather.sh&quot;</span></span><br><span class="line"><span class="comment">#. &quot;$DIR/dwm_network.sh&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xsetroot -name <span class="string">&quot;|<span class="subst">$(dwm_resources)</span>|⬇️ <span class="variable">$vel_recv</span> ⬆️ <span class="variable">$vel_trans</span>| <span class="subst">$(print_date)</span> |<span class="subst">$(dwm_alsa)</span> <span class="subst">$(is_charging)</span><span class="subst">$(print_bat)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Update old values to perform new calculations</span></span><br><span class="line">old_received_bytes=<span class="variable">$received_bytes</span></span><br><span class="line">old_transmitted_bytes=<span class="variable">$transmitted_bytes</span></span><br><span class="line">old_time=<span class="variable">$now</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>触摸板滑动反转</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get id of touchpad and the id of the field corresponding to</span></span><br><span class="line"><span class="comment"># natural scrolling</span></span><br><span class="line">id=`xinput list | grep <span class="string">&quot;Touchpad&quot;</span> | cut -d<span class="string">&#x27;=&#x27;</span> -f2 | cut -d<span class="string">&#x27;[&#x27;</span> -f1`</span><br><span class="line">natural_scrolling_id=`xinput list-props <span class="variable">$id</span> | \</span><br><span class="line">                      grep <span class="string">&quot;Natural Scrolling Enabled (&quot;</span> \</span><br><span class="line">                      | cut -d<span class="string">&#x27;(&#x27;</span> -f2 | cut -d<span class="string">&#x27;)&#x27;</span> -f1`</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the property to true</span></span><br><span class="line">xinput --set-prop <span class="variable">$id</span> <span class="variable">$natural_scrolling_id</span> 1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>声音</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A dwm_bar function to show the master volume of ALSA</span></span><br><span class="line"><span class="comment"># Joe Standring &lt;git@joestandring.com&gt;</span></span><br><span class="line"><span class="comment"># GNU GPLv3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dependencies: alsa-utils</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">dwm_alsa</span></span> () &#123;</span><br><span class="line">    VOL=$(amixer get Master | tail -n1 | sed -r <span class="string">&quot;s/.*\[(.*)%\].*/\1/&quot;</span>)</span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$SEP1</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$IDENTIFIER</span>&quot;</span> = <span class="string">&quot;unicode&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;🔇&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -gt 0 ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -le 33 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;🔈 %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -gt 33 ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -le 66 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;🔉 %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;🔊 %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;MUTE&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -gt 0 ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -le 33 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;VOL %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -gt 33 ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span> -le 66 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;VOL %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> <span class="string">&quot;VOL %s%%&quot;</span> <span class="string">&quot;<span class="variable">$VOL</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s\n&quot;</span> <span class="string">&quot;<span class="variable">$SEP2</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>天气</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A dwm_bar function to print the weather from wttr.in</span></span><br><span class="line"><span class="comment"># Joe Standring &lt;git@joestandring.com&gt;</span></span><br><span class="line"><span class="comment"># GNU GPLv3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dependencies: curl</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change the value of LOCATION to match your city</span></span><br><span class="line"><span class="function"><span class="title">dwm_weather</span></span>() &#123;</span><br><span class="line">    LOCATION=<span class="string">&quot;chuangzhou&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$SEP1</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$IDENTIFIER</span>&quot;</span> = <span class="string">&quot;unicode&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="subst">$(curl -s wttr.in/$LOCATION?format=1)</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;WEA %s&quot;</span> <span class="string">&quot;<span class="subst">$(curl -s wttr.in/$LOCATION?format=1 | grep -o <span class="string">&quot;[0-9].*&quot;</span>)</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s\n&quot;</span> <span class="string">&quot;<span class="variable">$SEP2</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dwm_weather</span><br></pre></td></tr></table></figure>

<ul>
<li>内存</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">dwm_resources</span></span> () &#123;</span><br><span class="line">    <span class="comment"># Used and total memory</span></span><br><span class="line">    MEMUSED=$(free -h | awk <span class="string">&#x27;(NR == 2) &#123;print $3&#125;&#x27;</span>)</span><br><span class="line">    MEMTOT=$(free -h |awk <span class="string">&#x27;(NR == 2) &#123;print $2&#125;&#x27;</span>)</span><br><span class="line">    <span class="comment"># CPU temperature</span></span><br><span class="line">    <span class="comment">#CPU=$(sysctl -n hw.sensors.cpu0.temp0 | cut -d. -f1)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Used and total storage in /home (rounded to 1024B)</span></span><br><span class="line">    <span class="comment">#STOUSED=$(df -h | grep &#x27;/home$&#x27; | awk &#x27;&#123;print $3&#125;&#x27;)</span></span><br><span class="line">    <span class="comment">##STOTOT=$(df -h | grep &#x27;/home$&#x27; | awk &#x27;&#123;print $2&#125;&#x27;)</span></span><br><span class="line">    <span class="comment">#STOPER=$(df -h | grep &#x27;/home$&#x27; | awk &#x27;&#123;print $5&#125;&#x27;)</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$SEP1</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$IDENTIFIER</span>&quot;</span> = <span class="string">&quot;unicode&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment">#printf &quot;💻 MEM %s/%s CPU %s STO %s/%s: %s&quot; &quot;$MEMUSED&quot; &quot;$MEMTOT&quot; &quot;$CPU&quot; &quot;$STOUSED&quot; &quot;$STOTOT&quot; &quot;$STOPER&quot;</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;%s/%s&quot;</span> <span class="string">&quot;<span class="variable">$MEMUSED</span>&quot;</span> <span class="string">&quot;<span class="variable">$MEMTOT</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">#printf &quot;STA | MEM %s/%s CPU %s STO %s/%s: %s&quot; &quot;$MEMUSED&quot; &quot;$MEMTOT&quot; &quot;$CPU&quot; &quot;$STOUSED&quot; &quot;$STOTOT&quot; &quot;$STOPER&quot;</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;%s/%s &quot;</span> <span class="string">&quot;<span class="variable">$MEMUSED</span>&quot;</span> <span class="string">&quot;<span class="variable">$MEMTOT</span>&quot;</span> </span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s\n&quot;</span> <span class="string">&quot;<span class="variable">$SEP2</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dwm_resources</span><br></pre></td></tr></table></figure>

<ul>
<li>网速</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A dwm_bar function to show the current network connection/SSID, private IP, and public IP</span></span><br><span class="line"><span class="comment"># Joe Standring &lt;git@joestandring.com&gt;</span></span><br><span class="line"><span class="comment"># GNU GPLv3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dependencies: NetworkManager, curl</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">dwm_network</span></span> () &#123;</span><br><span class="line">    CONNAME=$(nmcli -a | grep <span class="string">&#x27;Wired connection&#x27;</span> | awk <span class="string">&#x27;NR==1&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$CONNAME</span>&quot;</span> = <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        CONNAME=$(nmcli -t -f active,ssid dev wifi | grep <span class="string">&#x27;^yes&#x27;</span> | cut -c 5-)</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    PRIVATE=$(nmcli -a | grep <span class="string">&#x27;inet4 192&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line">    PUBLIC=$(curl -s https://ipinfo.io/ip)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s&quot;</span> <span class="string">&quot;<span class="variable">$SEP1</span>&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$IDENTIFIER</span>&quot;</span> = <span class="string">&quot;unicode&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;🌐 %s %s | %s&quot;</span> <span class="string">&quot;<span class="variable">$CONNAME</span>&quot;</span> <span class="string">&quot;<span class="variable">$PRIVATE</span>&quot;</span> <span class="string">&quot;<span class="variable">$PUBLIC</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span> <span class="string">&quot;NET %s %s | %s&quot;</span> <span class="string">&quot;<span class="variable">$CONNAME</span>&quot;</span> <span class="string">&quot;<span class="variable">$PRIVATE</span>&quot;</span> <span class="string">&quot;<span class="variable">$PUBLIC</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&quot;%s\n&quot;</span> <span class="string">&quot;<span class="variable">$SEP2</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dwm_network</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>系统托盘</li>
</ul>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S trayer</span><br><span class="line">yay -S trayer-srg</span><br></pre></td></tr></table></figure>

<p>编写脚本</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ~/.dwm/showTrayer.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">result=$(ps ax |grep -v grep|grep trayer)</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$result</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"> <span class="built_in">eval</span> <span class="string">&quot;trayer --transparent false --edge top --align right --width 21 --tint 0x88888888 --SetDockType true --margin 10 &amp;&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> <span class="built_in">eval</span> <span class="string">&quot;killall trayer&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>绑定快捷键</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> *showTrayercmd[]  = &#123; <span class="string">&quot;/home/kk/.dwm/showTrayer.sh&quot;</span>, <span class="literal">NULL</span> &#125;;</span><br><span class="line"> &#123; MODKEY|ShiftMask,             XK_t, spawn,          &#123;.v = showTrayercmd &#125; &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make clean uninstall</span><br></pre></td></tr></table></figure>

<h2 id="基础快捷键"><a href="#基础快捷键" class="headerlink" title="基础快捷键"></a>基础快捷键</h2><ul>
<li><p>打开新终端<br><code>Alt + shift + Enter</code></p>
</li>
<li><p>关闭一个窗口<br><code>Alt + shift + C</code></p>
</li>
<li><p>窗口横向排列<br><code>Alt + D</code></p>
</li>
<li><p>窗口竖向排列<br><code>Alt + I</code></p>
</li>
<li><p>窗口位置互换<br><code>Alt + Enter</code></p>
</li>
<li><p>在窗口间切换<br><code>Alt + J</code><br><code>Alt + k</code></p>
</li>
<li><p>改变窗口的长度/比例<br><code>Alt + H</code><br><code>Alt + L</code></p>
</li>
<li><p>平铺模式（tiling)<br><code>Alt + T</code></p>
</li>
<li><p>单窗口模式<br><code>Alt + M</code></p>
</li>
<li><p>浮动模式（float)<br><code>Alt + F</code></p>
</li>
<li><p>窗口模式切换<br><code>Alt + 空格</code><br><code>Alt + shift + 空格</code></p>
</li>
</ul>
<h3 id="多屏幕问题"><a href="#多屏幕问题" class="headerlink" title="多屏幕问题"></a>多屏幕问题</h3><p>在主副屏之间移动焦点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 移动焦点至左边屏幕</span><br><span class="line">Mod + &lt; </span><br><span class="line"># 移动焦点至右边屏幕</span><br><span class="line">Mod + &gt;</span><br></pre></td></tr></table></figure>

<p>在主副屏之间移动窗口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 移动窗口至左边屏幕</span><br><span class="line">Mod + shift + &lt;</span><br></pre></td></tr></table></figure>

<ul>
<li>切换标签页</li>
</ul>
<p><code>Mod + num</code></p>
<ul>
<li>移动窗口至某标签页</li>
</ul>
<p><code>Mod + shift + num</code></p>
<hr>
<h2 id="st"><a href="#st" class="headerlink" title="st"></a>st</h2><h2 id="补丁-1"><a href="#补丁-1" class="headerlink" title="补丁"></a>补丁</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> st</span><br><span class="line">patch &lt; xxxx.diff</span><br><span class="line">patch -R &lt; xxx.diff</span><br></pre></td></tr></table></figure>

<ul>
<li><p>st-alpha-x.x.diff：窗口透明</p>
</li>
<li><p>st-dracula-0.8.5.diff：主题</p>
</li>
<li><p>st-desktopentry-0.8.2.diff：启动程序</p>
</li>
<li><p>st-anysize-xxx.diff：满屏</p>
</li>
<li><p>st-scrollback-xxx.diff：滚动，config.h绑定案件</p>
  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; MODKEY,            XK_u,     kscrollup,      &#123;.i = <span class="number">2</span>&#125; &#125;,</span><br><span class="line">&#123; MODKEY,            XK_d,     kscrollup,      &#123;.i = <span class="number">2</span>&#125; &#125;,</span><br></pre></td></tr></table></figure></li>
<li><p>st-scrollback-mouse-xxx.diff：支持鼠标滚动，需按shift键</p>
</li>
<li><p>st-scrollback-mouse-altscreen-xxx.diff：不用按shift键滚动</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/02/22/11-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/22/11-22-11/" class="post-title-link" itemprop="url">vim插件管理Vundle安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-22 11:22:11" itemprop="dateCreated datePublished" datetime="2020-02-22T11:22:11+08:00">2020-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装Vundle插件管理器"><a href="#安装Vundle插件管理器" class="headerlink" title="安装Vundle插件管理器"></a>安装Vundle插件管理器</h2><p>github搜索Vundle，直接克隆</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.vim/bundle</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure>

<h2 id="编辑-vimrc配置文件"><a href="#编辑-vimrc配置文件" class="headerlink" title="编辑.vimrc配置文件"></a>编辑.vimrc配置文件</h2><p>若没有则创建<br>在.vimrc中输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">set nocompatible   &quot;去除vi一致性</span><br><span class="line">filetype off </span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;Vundle插件位置</span><br><span class="line">set rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">&quot;&quot;初始化</span><br><span class="line">call vundle#begin()</span><br><span class="line"></span><br><span class="line">Plugin &#x27;VundleVim/Vundle.vim&#x27;</span><br><span class="line"></span><br><span class="line">&quot;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;</span><br><span class="line">&quot;其他插件安装位置&quot;</span><br><span class="line">&quot;格式：Plugin &#x27;用户名/插件仓库名&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><br><span class="line">call vundle#end()</span><br><span class="line">filetype plugin indent on &quot;加载vim自带的与插件的语法脚本等</span><br></pre></td></tr></table></figure>

<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:pluginInstall  //安装插件</span><br><span class="line">:PluginClean   //删除插件</span><br><span class="line">:PluginUpdate   //更新</span><br><span class="line">:PluginSearch   //搜索</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/01/22/23-33-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/22/23-33-33/" class="post-title-link" itemprop="url">uni-App</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-22 23:33:33" itemprop="dateCreated datePublished" datetime="2020-01-22T23:33:33+08:00">2020-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:37" itemprop="dateModified" datetime="2023-12-24T22:26:37+08:00">2023-12-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="uniApp"><a href="#uniApp" class="headerlink" title="uniApp"></a>uniApp</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>配置浏览器目录</li>
<li>微信小程序-》设置-》安全设置-》打开多端口服务</li>
</ul>
<h2 id="尺寸单位"><a href="#尺寸单位" class="headerlink" title="尺寸单位"></a>尺寸单位</h2><ul>
<li><p>支持的通用 css 单位包括 px、rpx</p>
</li>
<li><p>px 即屏幕像素<br>rpx 即响应式 px，一种根据屏幕宽度自适应的动态单位。以 750 宽的屏幕为基准，750rpx 恰好为屏幕宽度。屏幕变宽，rpx 实际显示效果会等比放大，但在 App（vue2 不含 nvue） 端和 H5（vue2） 端屏幕宽度达到 960px 时，默认将按照 375px 的屏幕宽度进行计算，具体配置参考</p>
</li>
</ul>
<p>vue 页面支持下面这些普通 H5 单位，但在 nvue 里不支持：</p>
<p>rem 根字体大小可以通过 page-meta 配置<br>vh viewpoint height，视窗高度，1vh 等于视窗高度的 1%<br>vw viewpoint width，视窗宽度，1vw 等于视窗宽度的 1%<br>nvue 还不支持百分比单位。</p>
<p>App 端，在 pages.json 里的 titleNView 或页面里写的 plus api 中涉及的单位，只支持 px。注意此时不支持 rpx<br>nvue 中，uni-app 模式（nvue 不同编译模式介绍）可以使用 px 、rpx，表现与 vue 中基本一致，另外启用 dynamicRpx 后可以适配屏幕大小动态变化。weex 模式目前遵循 weex 的单位，它的单位比较特殊：</p>
<p>px:，以 750 宽的屏幕为基准动态计算的长度单位，与 vue 页面中的 rpx 理念相同。（一定要注意 weex 模式的 px，和 vue 里的 px 逻辑不一样。）<br>wx：与设备屏幕宽度无关的长度单位，与 vue 页面中的 px 理念相同<br>下面对 rpx 详细说明：</p>
<p>设计师在提供设计图时，一般只提供一个分辨率的图。</p>
<p>严格按设计图标注的 px 做开发，在不同宽度的手机上界面很容易变形。</p>
<p>而且主要是宽度变形。高度一般因为有滚动条，不容易出问题。由此，引发了较强的动态宽度单位需求。<br>rpx 是相对于基准宽度的单位，可以根据屏幕宽度进行自适应。uni-app 规定屏幕基准宽度 750rpx。</p>
<p>开发者可以通过设计稿基准宽度计算页面元素 rpx 值，设计稿 1px 与框架样式 1rpx 转换公式如下：</p>
<p>设计稿 1px / 设计稿基准宽度 = 框架样式 1rpx / 750rpx</p>
<p>换言之，页面元素宽度在 uni-app 中的宽度计算公式：</p>
<p>750 * 元素在设计稿中的宽度 / 设计稿基准宽度</p>
<p>举例说明：</p>
<p>若设计稿宽度为 750px，元素 A 在设计稿上的宽度为 100px，那么元素 A 在 uni-app 里面的宽度应该设为：750 _ 100 / 750，结果为：100rpx。<br>若设计稿宽度为 640px，元素 A 在设计稿上的宽度为 100px，那么元素 A 在 uni-app 里面的宽度应该设为：750 _ 100 / 640，结果为：117rpx。<br>若设计稿宽度为 375px，元素 B 在设计稿上的宽度为 200px，那么元素 B 在 uni-app 里面的宽度应该设为：750 * 200 / 375，结果为：400rpx。<br>Tips</p>
<p>注意 rpx 是和宽度相关的单位，屏幕越宽，该值实际像素越大。如不想根据屏幕宽度缩放，则应该使用 px 单位。<br>如果开发者在字体或高度中也使用了 rpx ，那么需注意这样的写法意味着随着屏幕变宽，字体会变大、高度会变大。如果你需要固定高度，则应该使用 px 。<br>rpx 不支持动态横竖屏切换计算，使用 rpx 建议锁定屏幕方向<br>设计师可以用 iPhone6 作为视觉稿的标准。<br>如果设计稿不是 750px，HBuilderX 提供了自动换算的工具，详见：HBuilderX 中自动转换 px 为 upx。<br>App 端，在 pages.json 里的 titleNView 或页面里写的 plus api 中涉及的单位，只支持 px，不支持 rpx。<br>早期 uni-app 提供了 upx ，目前已经推荐统一改为 rpx 了.</p>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><p>目前支持的选择器有：<code>.class</code> <code>#id</code> <code>element</code> (<code>::after</code> <code>::before</code> )仅 vue 页面生效<br>注意：</p>
<p>在 uni-app 中不能使用 * 选择器。</p>
<p>微信小程序自定义组件中仅支持 class 选择器</p>
<p>page 相当于 body 节点，例如：</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>uni-app 页面路由为框架统一管理，开发者需要在 pages.json 里配置每个路由页面的路径及页面样式。类似小程序在 app.json 中配置页面路由一样。所以 uni-app 的路由用法与 Vue Router 不同，如仍希望采用 Vue Router 方式管理路由，可在插件市场搜索 Vue-Router。</p>
<p>#路由跳转<br>uni-app 有两种页面路由跳转方式：使用 navigator 组件跳转、调用 API 跳转</p>
<p>|路由方式| 页面栈表现| 触发时机|<br>|初始化 |新页面入栈 uni-app 打开的第一个页面|<br>|打开新页面 |新页面入栈 |调用 API uni.navigateTo 、使用组件 <code>&lt;navigator open-type=&quot;navigate&quot;/&gt;</code>|<br>|页面重定向 |当前页面出栈，新页面入栈 |调用 API uni.redirectTo 、使用组件 <code>&lt;navigator open-type=&quot;redirectTo&quot;/&gt;</code>|<br>|页面返回 |页面不断出栈，直到目标返回页 |调用 API uni.navigateBack 、使用组件 <code>&lt;navigator open-type=&quot;navigateBack&quot;/&gt;</code> 、用户按左上角返回按钮、安卓用户点击物理 back 按键|<br>|Tab 切换 |页面全部出栈，只留下新的 Tab 页面 |调用 API uni.switchTab 、使用组件 <code>&lt;navigator open-type=&quot;switchTab&quot;/&gt;</code> 、用户切换 Tab|<br>|重加载 |页面全部出栈，只留下新的页面 |调用 API uni.reLaunch 、使用组件 <code>&lt;navigator open-type=&quot;reLaunch&quot;/&gt;</code>|</p>
<h2 id="pages-json-文件"><a href="#pages-json-文件" class="headerlink" title="pages.json 文件"></a>pages.json 文件</h2><p>pages.json 文件用来对 uni-app 进行全局配置，决定页面文件的路径、窗口样式、原生的导航栏、底部的原生tabbar 等。</p>
<p>它类似微信小程序中app.json的页面管理部分。注意定位权限申请等原属于app.json的内容，在uni-app中是在manifest中配置。</p>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>-</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/11/20-22-22/" class="post-title-link" itemprop="url">微信小程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2020-01-11T20:22:22+08:00">2020-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:37" itemprop="dateModified" datetime="2023-12-24T22:26:37+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><ul>
<li>app.json      //配置</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;page&quot;</span>:[</span><br><span class="line">    <span class="string">&quot;page/index/index“，</span></span><br><span class="line"><span class="string">    &quot;</span>page下页面路径“</span><br><span class="line">]&#125;</span><br><span class="line"><span class="string">&quot;window&quot;</span>:&#123;</span><br><span class="line">   <span class="comment">// 导航配置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>app.js  //注册小程序应用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">App(&#123;.....&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>app.wxss    //全局公共样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">page&#123;       //小程序会在所有页面加一个page ，因此应设置页面高度为<span class="number">100%</span></span><br><span class="line">           <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>页面：<br>page<br>\index<br>\-index.js  </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">     page(&#123;</span><br><span class="line">     <span class="comment">//初始化数据</span></span><br><span class="line">         <span class="attr">data</span>: &#123;</span><br><span class="line">             <span class="attr">msg</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">             <span class="attr">userInfo</span>:&#123;</span><br><span class="line">                 <span class="comment">//存放用户信息</span></span><br><span class="line">             &#125;,</span><br><span class="line">         &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">//事件绑定</span></span><br><span class="line">        <span class="function"><span class="title">handleParent</span>(<span class="params"></span>)</span>&#123;            </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;parent&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">handleChild</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;child&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">//跳转至logs页面</span></span><br><span class="line">        <span class="function"><span class="title">toLogs</span>(<span class="params"></span>)</span>&#123;                </span><br><span class="line">            <span class="comment">//需要使用api</span></span><br><span class="line">            wx,navigateTo(&#123;         <span class="comment">//保留当前页面跳转到另一个页面</span></span><br><span class="line">                <span class="attr">url</span>:<span class="string">&#x27;/page/logs/logs&#x27;</span>,   <span class="comment">//相对路径</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">         <span class="comment">//生命周期函数：监听页面加载，最先执行</span></span><br><span class="line">         <span class="attr">onLoad</span>:<span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">             <span class="built_in">console</span>.log(<span class="string">&#x27;onLoad()&#x27;</span>)        <span class="comment">//打印</span></span><br><span class="line"></span><br><span class="line">             <span class="comment">//修改msg数据：this.setData</span></span><br><span class="line">             consile.log(<span class="built_in">this</span>)  <span class="comment">//this表示当前页面的实例对象</span></span><br><span class="line">             consile.log(<span class="built_in">this</span>.data.msg)   </span><br><span class="line">              <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                 <span class="attr">msg</span>:<span class="string">&#x27;after&#x27;</span></span><br><span class="line">             &#125;)</span><br><span class="line"></span><br><span class="line">             <span class="comment">//授权以后获取用户信息</span></span><br><span class="line">             wx.gerUserInfo(&#123;</span><br><span class="line">                 <span class="attr">succes</span>:<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                     condole.log(res);</span><br><span class="line">                     <span class="comment">//成功后更新数据</span></span><br><span class="line">                     <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                         <span class="attr">userInfo</span>: res.userInfo</span><br><span class="line">                     &#125;)</span><br><span class="line">                 &#125;,</span><br><span class="line">                 <span class="attr">fail</span>:<span class="function">() =&gt;</span>&#123;</span><br><span class="line">                     condole.log(err);</span><br><span class="line">                 &#125;,</span><br><span class="line">             &#125;)</span><br><span class="line">       &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取用户信息</span></span><br><span class="line">       <span class="function"><span class="title">handleGetUserInfo</span>(<span class="params">res</span>)</span>&#123;      <span class="comment">//形参用于判断</span></span><br><span class="line">           <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="keyword">if</span>(res.detail.userInfo)&#123;</span><br><span class="line">            <span class="comment">//修改userInfo的状态数据</span></span><br><span class="line">            thsi.setData(&#123;</span><br><span class="line">                <span class="attr">userInfo</span>: res.detail.userInfo</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       &#125;,</span><br><span class="line">.....</span><br><span class="line">                 &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>index.wxml</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;indexcontainer&quot;</span>&gt;</span>   <span class="comment">&lt;!--//样式--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:if</span>=<span class="string">&#x27;&#123;&#123;userInfo.avatarUrl&#125;&#125;&#x27;</span> <span class="attr">class</span>=<span class="string">&quot;avatarUrl&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">image</span>&gt;</span>    <span class="comment">&lt;!--图片路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">botton</span> <span class="attr">wx:else</span> <span class="attr">bindgetuserinfo</span>=<span class="string">&#x27;handleGetUserInfo&#x27;</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span>&gt;</span>获取用户信息<span class="tag">&lt;/<span class="name">botton</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;userName&quot;</span>&gt;</span> 文字文字 <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span>    <span class="comment">&lt;!--//使用数据--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  事件绑定  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;view class=&quot;hello&quot; bindtap=&quot;handleParent&quot;&gt;  &lt;text bindtap=&#x27;handleChild&#x27;&gt;hello&lt;/text&gt;   &lt;/view&gt;  --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;toLogs&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">text</span>&gt;</span>  </span><br><span class="line">   <span class="tag">&lt;/<span class="name">view</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>index.wxss      //样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">             <span class="selector-class">.indexContainer</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f0f</span>;       <span class="comment">/*只有16进制*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.avatarUrl</span>&#123;         <span class="comment">/*头像尺寸样式*/</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;      <span class="comment">/*圆角*/</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.usrName</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hello</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">300</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">10</span>rpx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>index.json  </p>
</li>
<li><p>日志：<br>log/logs.json</p>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;usingComponens&quot;</span>:&#123;&#125;,</span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span>: <span class="string">&quot;日志“    //最顶部栏文字</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h3><p>bind：冒泡事件<br>catch：非冒泡</p>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx:if=&#x27;条件&#x27;</span><br><span class="line">wx:else</span><br><span class="line">wx:elif=&#x27;条件&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="微信小程序-bindtap-传参"><a href="#微信小程序-bindtap-传参" class="headerlink" title="微信小程序 bindtap 传参"></a>微信小程序 bindtap 传参</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//index.wxml</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;changeIndex&quot;</span> <span class="attr">data-src1</span>=<span class="string">&quot;我固定参数1&quot;</span> <span class="attr">data-src2</span>=<span class="string">&quot;我是固定参数2&quot;</span> &gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">//index.js</span><br><span class="line">page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line">  </span><br><span class="line"> &#125;,</span><br><span class="line"> changeIndex(e)&#123;</span><br><span class="line"> console.log(e.currentTarget.dataset.src1); //我是固定参数1</span><br><span class="line"> console.log(e.currentTarget.dataset.src2); //我是固定参数2</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">////如果需要传递动态的参数 例如遍历渲染时 想传递 index 给 changeIndex方法</span><br><span class="line">//index.wxml</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;lists&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span> &gt;</span></span><br><span class="line">&#123;&#123;item.title&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">//index.js</span><br><span class="line">page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line"> lists:[&#123;title:&#x27;参数1&#x27;,id:1&#125;,&#123;title:&#x27;参数2&#x27;,id:2&#125;]</span><br><span class="line"> &#125;,</span><br><span class="line"> changeIndex(e)&#123;</span><br><span class="line"> console.log(e.currentTarget.dataset.index);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><ol>
<li>导航栏</li>
</ol>
<p>在app.json文件内：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;pages&quot;</span>:[</span><br><span class="line">        <span class="string">&quot;路径&quot;</span>,</span><br><span class="line">        <span class="string">&quot;路径&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;window&quot;</span>:&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;tabBar&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;backgroundColor&quot;</span>:<span class="string">&quot;#f6f6f5&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;list&quot;</span>:[&#123;</span><br><span class="line">            <span class="attr">&quot;pagePath&quot;</span>:<span class="string">&quot;路径&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;文字&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;pagePath&quot;</span>:<span class="string">&quot;路径&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;文字&quot;</span></span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>input</li>
</ol>
<p>在index.js文件夹内</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">page(&#123;</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">first</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">second</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">first</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> n=e.detail.value;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">isNaN</span>(n))&#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">first</span>:n</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> <span class="attr">calculate</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> n=<span class="built_in">this</span>.data.first+<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">second</span>:n</span><br><span class="line">    &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;,</span><br><span class="line">....</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在index.wxml文件中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\<span class="tag">&lt;<span class="name">input</span> <span class="attr">bindinput</span>=<span class="string">&quot;first&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;文字&quot;</span>&gt;</span>\<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">\<span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;second&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;文字&quot;</span><span class="attr">disabled</span>&gt;</span>\<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">//placeholder：提示</span><br><span class="line">//bindiniput:输入</span><br><span class="line">//bindconfirm:回车触发事件</span><br><span class="line">//value:输入框内容</span><br><span class="line">\<span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search_input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;text_input&quot;</span> <span class="attr">bindconfirm</span>=<span class="string">&quot;searchtap&quot;</span><span class="attr">value</span>=<span class="string">&quot;&#123;&#123;search_key&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<ul>
<li>textarea</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//auto-focus: 自动聚焦</span><br><span class="line">//maxlength=&quot;-1&quot;:不限长度</span><br><span class="line"> \<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">auto-focus</span> <span class="attr">placeholder</span>=<span class="string">&quot;Text&quot;</span><span class="attr">maxlength</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;text_input&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;record&#125;&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>选择照片</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wx.chooseImage(&#123;</span><br><span class="line">     <span class="attr">count</span>: <span class="number">1</span>, <span class="comment">//数量 默认9</span></span><br><span class="line">     <span class="attr">sizeType</span>: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>], <span class="comment">//图片质量：原图，压缩</span></span><br><span class="line">     <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],      <span class="comment">//拍照，相册</span></span><br><span class="line">     <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="comment">//成功后把地址放入全局变量中,</span></span><br><span class="line">       app.data.picpath = res.tempFilePaths[<span class="number">0</span>];</span><br><span class="line">       <span class="comment">//跳转到图片裁剪界面，文字识别界面</span></span><br><span class="line">       wx.navigateTo(&#123;</span><br><span class="line">         <span class="attr">url</span>: <span class="string">&#x27;/pages/ocr/ocr&#x27;</span>,</span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>跳转界面</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回界面</span></span><br><span class="line">           wx.navigateBack(&#123;</span><br><span class="line">             <span class="attr">delta</span>: <span class="number">0</span>,     <span class="comment">//0表示上一层</span></span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭当前页面跳转到</span></span><br><span class="line"> wx.redirectTo(&#123;</span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取列表index</li>
</ul>
<p>wx:for控制属性绑定一个数组进行列表渲染。</p>
<blockquote>
<p>（当前项的下标变量名默认为 index，数组当前项的变量名默认为 item，改名：使用 wx:for-item=“jjj” 可以指定数组当前元素的变量名，<br>使用 wx:for-index =”aa“可以指定数组当前下标的变量名。<br>这个注意了。wx:key还是要加上的，不然一直报这个提示错误：如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 &lt;input/&gt; 中的输入内容，&lt;switch/&gt; 的选中状态），需要使用 wx:key 来指定列表中项目的唯一的标识符。</p>
</blockquote>
<blockquote>
<p>wx:key 的值以两种形式提供<br>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。<br>保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：<br>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。如不提供 wx:key，会报一个 warning， 如果明确知道该列表是静态，或者不必关注其顺序，可以选择忽略。）</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wxml:</span><br><span class="line"> <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;touch-item &#123;&#123;item.isTouchMove ? &#x27;touch-move-active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span> <span class="attr">bindtouchstart</span>=<span class="string">&quot;touchstart&quot;</span> <span class="attr">bindtouchmove</span>=<span class="string">&quot;touchmove&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;item1&#125;&#125;&quot;</span>   <span class="attr">wx:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;del&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;del&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius:20rpx 0 0 20rpx;&quot;</span>  <span class="attr">data-detail</span>=<span class="string">&quot;&#123;&#123;item.content.text&#125;&#125; &quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">js:</span><br><span class="line"> //列表删除</span><br><span class="line">del(e)&#123;</span><br><span class="line">    this.data.item1.splice(e.currentTarget.dataset.index, 1)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">     item1: this.data.item1</span><br><span class="line">    &#125;)&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>搜索</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;app.data.item2.length;i++)&#123;</span><br><span class="line">   <span class="keyword">if</span>(app.data.item2[i].delete==<span class="number">0</span>)&#123;</span><br><span class="line">     <span class="comment">//模糊搜索</span></span><br><span class="line">  <span class="keyword">if</span>(app.data.item2[i].content.text.indexOf(<span class="built_in">this</span>.data.search_key)!=-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="built_in">this</span>.data.item1[j]=app.data.item2[i];</span><br><span class="line">    j++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>复制</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*#######复制功能########################*/</span></span><br><span class="line"><span class="attr">copy</span>: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">  wx.setClipboardData(&#123;</span><br><span class="line">   <span class="attr">data</span>: e.currentTarget.dataset.detail,</span><br><span class="line">   <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>云数据库</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wx.cloud.init(&#123;         <span class="comment">//初始化</span></span><br><span class="line">  <span class="attr">env</span>:<span class="string">&quot;cloud1-3gerlsz2682ceb37&quot;</span>,</span><br><span class="line">  <span class="attr">traceUser</span>:<span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> db=wx.cloud.database();</span><br><span class="line"></span><br><span class="line">Page(&#123; </span><br><span class="line">    <span class="keyword">var</span> that = <span class="built_in">this</span>;<span class="comment">//定义到这里，让that先获取到外面方法的this</span></span><br><span class="line">    db.collection(<span class="string">&#x27;my_data&#x27;</span>).where(&#123;<span class="attr">_openid</span>:app.data.useropenid&#125;).get(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//    that.setData(&#123;item2:res.data[0].array&#125;)</span></span><br><span class="line">    <span class="comment">//用户数据放入全局变量中</span></span><br><span class="line">    app.data.item2=res.data[<span class="number">0</span>].array; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//更新数据 ，添加新条目</span></span><br><span class="line">  db.collection(<span class="string">&#x27;my_data&#x27;</span>)</span><br><span class="line">  .doc(app.data.useropenid)     <span class="comment">//_id</span></span><br><span class="line">  .update(&#123;</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">     <span class="attr">array</span>: _.unshift([&#123;</span><br><span class="line">      <span class="attr">content</span>:&#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="built_in">this</span>.data.record,</span><br><span class="line">        <span class="attr">time</span>: <span class="built_in">this</span>.data.record_time,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">isTouchMove</span>:<span class="literal">false</span>,</span><br><span class="line">      <span class="attr">delete</span>:<span class="number">0</span></span><br><span class="line">    &#125;])&#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取时间</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">util.js:</span><br><span class="line"><span class="keyword">const</span> formatTime = <span class="function"><span class="params">date</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> year = date.getFullYear()</span><br><span class="line">  <span class="keyword">const</span> month = date.getMonth() + <span class="number">1</span></span><br><span class="line">  <span class="keyword">const</span> day = date.getDate()</span><br><span class="line">  <span class="keyword">const</span> hour = date.getHours()</span><br><span class="line">  <span class="keyword">const</span> minute = date.getMinutes()</span><br><span class="line">  <span class="keyword">const</span> second = date.getSeconds()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [year, month, day].map(formatNumber).join(<span class="string">&#x27;-&#x27;</span>) + <span class="string">&#x27; &#x27;</span> + [hour, minute, second].map(formatNumber).join(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> formatNumber = <span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">  n = n.toString()</span><br><span class="line">  <span class="keyword">return</span> n[<span class="number">1</span>] ? n : <span class="string">&#x27;0&#x27;</span> + n</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">formatTime</span>: formatTime</span><br><span class="line">&#125;</span><br><span class="line"> <span class="attr">js</span>:</span><br><span class="line"> <span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&#x27;../../util/util.js&#x27;</span>);</span><br><span class="line"> Page(&#123;</span><br><span class="line">  <span class="comment">//获取时间</span></span><br><span class="line">  <span class="keyword">const</span> _ = db.command;</span><br><span class="line">  <span class="keyword">var</span> time = util.formatTime(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">  <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    <span class="attr">record_time</span>:time</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>布局</li>
</ol>
<ul>
<li>固定按钮</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wxml:</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;round-click&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;new_goto&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">wxss:</span><br><span class="line">  .round-click&#123;</span><br><span class="line"></span><br><span class="line">    height: 120rpx;</span><br><span class="line"></span><br><span class="line">    width: 120rpx;</span><br><span class="line">    background-color:rgb(246, 246, 246,0.9);</span><br><span class="line">    border-radius: 100%;</span><br><span class="line">    position: fixed;</span><br><span class="line">    bottom: 100rpx;</span><br><span class="line">    right: 20rpx;</span><br><span class="line"></span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line"> font-size:70rpx;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    z-index: 9;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>wx.request发起 HTTPS 网络请求,data请求的参数,success接口调用成功的回调函数 </p>
<p>AudioContext对象用于与audio组件绑定，通过它可以在逻辑层操作视图层的audio组件。可以用wx.createAudioContext(audioId)接口创建并返回audio的上下文对象AudioContext。</p>
<h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><ol>
<li>利用小程序提供的 API 跳转：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保留当前页面，跳转到应用内的某个页面，使用wx.navigateBack可以返回到原页面。</span></span><br><span class="line"><span class="comment">// 注意：调用 navigateTo 跳转时，调用该方法的页面会被加入堆栈，但是 redirectTo </span></span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/home/home?user_id=111&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">// 关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层。</span></span><br><span class="line"></span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/home/home?user_id=111&#x27;</span>　　<span class="comment">// 页面 A</span></span><br><span class="line">&#125;)</span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/detail/detail?product_id=222&#x27;</span>　　<span class="comment">// 页面 B</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 跳转到页面 A</span></span><br><span class="line">wx.navigateBack(&#123;</span><br><span class="line">  <span class="attr">delta</span>: <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">// 关闭当前页面，跳转到应用内的某个页面。</span></span><br><span class="line">wx.redirectTo(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/home/home?user_id=111&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 跳转到tabBar页面（在app.json中注册过的tabBar页面），同时关闭其他非tabBar页面。</span></span><br><span class="line">wx.switchTab(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 关闭所有页面，打开到应用内的某个页面。</span></span><br><span class="line">wx.reLanch(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;page/home/home?user_id=111&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>原理：wxml中不能直接使用较高级的js语法，如‘.toFixed’，‘toString()’，但可以通过引入wxs模块实现效果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>新建<span class="string">`filter.wxs`</span></span><br><span class="line"><span class="keyword">var</span> filters = &#123;    </span><br><span class="line">    <span class="attr">toFix</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;       </span><br><span class="line">        <span class="keyword">return</span> value.toFixed(<span class="number">2</span>) <span class="comment">// 此处2为保留两位小数，保留几位小数，这里写几    </span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">toStr</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;       </span><br><span class="line">        <span class="keyword">return</span> value.toString()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">toNum</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;       </span><br><span class="line">        <span class="keyword">return</span> value.toNumber()</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;   </span><br><span class="line">    <span class="attr">toFix</span>: filters.toFix,</span><br><span class="line">    <span class="attr">toStr</span>: filters.toStr,</span><br><span class="line">    <span class="attr">toNum</span>: filters.toNum,<span class="comment">//暴露接口调用</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="number">2.</span>WXML中引入WXS</span><br><span class="line">&lt;wxs <span class="built_in">module</span>=<span class="string">&quot;filters&quot;</span> src=<span class="string">&quot;../../utils/filters.wxs&quot;</span>&gt;&lt;/wxs&gt;</span><br><span class="line"><span class="number">3.</span>在WXML中使用</span><br><span class="line">&lt;view&gt;</span><br><span class="line">&#123;&#123; filters.toFix(price) &#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">　　其他如toString(),toNumber()也可用此类似方法</span><br></pre></td></tr></table></figure>

<h2 id="虚拟列表"><a href="#虚拟列表" class="headerlink" title="虚拟列表"></a>虚拟列表</h2><ul>
<li>wxml</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">id</span>=<span class="string">&#x27;scrollView&#x27;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:80rpx;height:calc(100% - 180rpx);&quot;</span> <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-with-animation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">enable-back-to-top</span>=<span class="string">&quot;true&quot;</span> <span class="attr">refresher-enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">refresher-background</span>=<span class="string">&quot;#f6f6f6&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">refresher-triggered</span>=<span class="string">&quot;true&quot;</span> <span class="attr">bindscrolltolower</span>=<span class="string">&quot;listScrollBottom&quot;</span> <span class="attr">bindscrolltoupper</span>=<span class="string">&quot;listScrollTop&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">upper-threshold</span>=<span class="string">&quot;&#123;&#123;listEmptyView+100&#125;&#125;&quot;</span> <span class="attr">lower-threshold</span>=<span class="string">&quot;100&quot;</span> <span class="attr">scroll-top</span>=<span class="string">&quot;&#123;&#123;currentListPosition&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;list.length==0&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color:gray;padding:40rpx;&quot;</span>&gt;</span>还没有动态哦，快去发一条吧(。・∀・)ノ<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">&quot;listContainer&#123;&#123;index&#125;&#125;&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.length==undefind&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:&#123;&#123;item.height&#125;&#125;px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">style</span>=<span class="string">&quot;width:100rpx;height:100rpx;border-radius:50%;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.avatar&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_right&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_name&quot;</span>&gt;</span>&#123;&#123;item.userName&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;1font-size:30rpx;font-weight:400;color:#536471;&quot;</span>&gt;</span> • &#123;&#123;item.createTime&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 文字 --&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;padding-left:20rpx;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.content&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 视频 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.hasVideo&amp;&amp;item.url.length!=0&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;videoPreview&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;main_container_video&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">text</span> <span class="attr">style</span>=<span class="string">&quot;font-size:100rpx;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-play&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;!item.hasVideo&amp;&amp;item.url.length==1&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">data-current</span>=<span class="string">&quot;0&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img1&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;item.url.length==2&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img2&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;0&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;item.url.length==3&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;0&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img3_item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;2&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[2]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;item.url.length==4&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img4&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img4_item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;0&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot; border-radius:  16rpx 0 0 0;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot; border-radius:   0 16rpx 0 0;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_img4_item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;2&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot; border-radius:   0 0 0 16rpx ;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[2]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">bindtap</span>=<span class="string">&quot;imgPreview&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;&#123;&#123;item.url&#125;&#125;&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;3&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot; border-radius:   0  0 16rpx 0;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.url[3]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--位置--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:30rpx;&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;item.location&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span></span></span><br><span class="line"><span class="tag">                <span class="attr">style</span>=<span class="string">&quot;font-size:25rpx;color:#536471&quot;</span>&gt;</span>位于：<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;<span class="name">text</span></span></span><br><span class="line"><span class="tag">                <span class="attr">style</span>=<span class="string">&quot;font-size:25rpx;color:#1d9bf0&quot;</span>&gt;</span>&#123;&#123;item.location&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;main_container_bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-comment&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span>&#123;&#123;item.comments?item.comments:&#x27;&#x27;&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-favorite&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;likesUpgrade&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span> <span class="attr">data-likes</span>=<span class="string">&quot;&#123;&#123;item.likes?item.likes:0&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;iconfont icon-fabulous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span>&#123;&#123;item.likes?item.likes:&#x27;&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">data-id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-share&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>-js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    <span class="attr">list</span>: [</span><br><span class="line">      [],</span><br><span class="line">      [],</span><br><span class="line">      []</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">pageNo</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">pageSize</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">listEmptyView</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">currentListPosition</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">scrollContainerHeight</span>: <span class="number">0</span>,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">  <span class="function"><span class="title">listScrollTop</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pageNo = <span class="built_in">this</span>.data.pageNo - <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (pageNo &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">this</span>.getList(pageNo, <span class="built_in">this</span>.data.pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">listScrollBottom</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pageNo = <span class="built_in">this</span>.data.pageNo + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pageNo &lt;= <span class="built_in">Math</span>.ceil(<span class="built_in">this</span>.data.total / <span class="built_in">this</span>.data.pageSize)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.getList(pageNo, <span class="built_in">this</span>.data.pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">getList</span>(<span class="params">pageNo, pageSize</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//获取列表</span></span><br><span class="line">    axios(&#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Authorization&#x27;</span>: wx.getStorageSync(<span class="string">&#x27;Authorization&#x27;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;/updates/public?pageNo=&quot;</span> + pageNo + <span class="string">&quot;&amp;pageSize=&quot;</span> + pageSize + <span class="string">&quot;&amp;keyword=&quot;</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(pageNo, pageSize, res);</span><br><span class="line">      <span class="keyword">if</span> (res.data.code == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="built_in">this</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">          <span class="attr">total</span>: res.data.data.total,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">if</span> (pageNo &gt;= <span class="built_in">this</span>.data.pageNo) &#123; <span class="comment">//向后翻页</span></span><br><span class="line">          <span class="comment">// wx.createSelectorQuery().select(&#x27;#listContainer1&#x27;).boundingClientRect(function (rect) &#123;&#125;).exec(function (re) &#123;</span></span><br><span class="line">          <span class="comment">//   console.log(that.data.scrollContainerHeight);</span></span><br><span class="line">          <span class="comment">//   that.setData(&#123;</span></span><br><span class="line">          <span class="comment">//     currentListPosition: that.data.listEmptyView  + re[0].height-that.data.scrollContainerHeight+50</span></span><br><span class="line">          <span class="comment">//   &#125;)</span></span><br><span class="line">          <span class="comment">// &#125;)</span></span><br><span class="line">          <span class="keyword">if</span> (pageNo &gt; <span class="number">2</span>) &#123; <span class="comment">//大于两页清除前面</span></span><br><span class="line">            wx.createSelectorQuery().select(<span class="string">&#x27;#listContainer&#x27;</span> + (pageNo - <span class="number">1</span>)).boundingClientRect(<span class="function"><span class="keyword">function</span> (<span class="params">rect</span>) </span>&#123;&#125;).exec(<span class="function"><span class="keyword">function</span> (<span class="params">re</span>) </span>&#123; <span class="comment">//空view替代删除的条目</span></span><br><span class="line">              that.setData(&#123;</span><br><span class="line">                <span class="attr">listEmptyView</span>: that.data.listEmptyView + re[<span class="number">0</span>].height,</span><br><span class="line">                <span class="attr">pageNo</span>: pageNo,</span><br><span class="line">                [<span class="string">`list[<span class="subst">$&#123;pageNo-<span class="number">2</span>&#125;</span>]`</span>]: &#123;</span><br><span class="line">                  <span class="attr">height</span>: re[<span class="number">0</span>].height</span><br><span class="line">                &#125;,</span><br><span class="line">                [<span class="string">`list[<span class="subst">$&#123;pageNo&#125;</span>]`</span>]: res.data.data.records,</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">              <span class="attr">pageNo</span>: pageNo,</span><br><span class="line">              [<span class="string">`list[<span class="subst">$&#123;pageNo&#125;</span>]`</span>]: res.data.data.records,</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//向前翻页</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">this</span>.data.list.length &gt; (pageNo + <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">              [<span class="string">`list[<span class="subst">$&#123;pageNo&#125;</span>]`</span>]: res.data.data.records,</span><br><span class="line">              [<span class="string">`list[<span class="subst">$&#123;pageNo+<span class="number">2</span>&#125;</span>]`</span>]: [],</span><br><span class="line">              <span class="attr">pageNo</span>: <span class="built_in">this</span>.data.pageNo - <span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">              [<span class="string">`list[<span class="subst">$&#123;pageNo&#125;</span>]`</span>]: res.data.data.records,</span><br><span class="line">              <span class="attr">pageNo</span>: <span class="built_in">this</span>.data.pageNo - <span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          wx.createSelectorQuery().select(<span class="string">&#x27;#listContainer&#x27;</span> + (pageNo)).boundingClientRect(<span class="function"><span class="keyword">function</span> (<span class="params">rect</span>) </span>&#123;&#125;).exec(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="comment">//缩短占位view高度</span></span><br><span class="line">      </span><br><span class="line">            that.setData(&#123;</span><br><span class="line">              <span class="attr">listEmptyView</span>: that.data.listEmptyView - res[<span class="number">0</span>].height</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">          <span class="attr">title</span>: res.data.message,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err == <span class="number">201</span>) &#123;</span><br><span class="line">        wx.redirectTo(&#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;/pages/login/login&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>微信小程序中局部更新对象或者数组中的某个数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.setData(&#123;</span><br><span class="line">[<span class="string">&#x27;list[0][1].a&#x27;</span>]:<span class="number">0</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/01/11/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/11/20-22-11/" class="post-title-link" itemprop="url">linux常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-11 20:22:11" itemprop="dateCreated datePublished" datetime="2020-01-11T20:22:11+08:00">2020-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Linux文的权限"><a href="#Linux文的权限" class="headerlink" title="Linux文的权限"></a>Linux文的权限</h2><p>r:4 读；w:2 写；x:1  执行(运行)；－：对应数值0；777：第一个7:表示当前文件的拥有者的权限,第二个7:表示当前文件的所属组（同组用户）权限,第三个7:表示当前文件的组外权限,</p>
<h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><ol>
<li>Tab键：一下补全，两下提示</li>
<li>简写：<br>若仅输入<code>alias</code>，则可列出目前所有的别名设置。alias的效力仅及于该次登入的操作。若要每次登入是即自动设好别名，可在.profile或.cshrc中设定指令的别名。</li>
</ol>
<p><code>alias 别名=指令名称</code><br>如<code>alias ll=ls -l</code></p>
<ol start="3">
<li>强制关闭程序：<code>kill -9 进程pid</code></li>
<li>修改hosts：<code>sudo vim /etc/hosts</code></li>
<li>退出用户：<code>tty -&gt; w -&gt; sudo pkill -9 tty1</code></li>
</ol>
<h2 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h2><p><code>apt [options] [command] [package ...]</code></p>
<blockquote>
<p>options：可选，选项包括 -h（帮助），-y（当安装过程提示选择全部为”yes”），-q（不显示安装的过程）等等。<br>command：要进行的操作。<br>package：安装的包名。</p>
</blockquote>
<p>常用命令:<br>列出所有可更新的软件清单命令：<code>sudo apt update</code></p>
<p>升级软件包：<code>sudo apt upgrade</code></p>
<p>列出可更新的软件包及版本信息：<code>apt list --upgradeable</code></p>
<p>升级软件包，升级前先删除需要更新软件包：<code>sudo apt full-upgrade</code></p>
<p>安装指定的软件命令：<code>sudo apt install &lt;package_name&gt;</code></p>
<p>更新指定的软件命令：<code>sudo apt update &lt;package_name&gt;</code></p>
<p>显示软件包具体信息,例如：版本号，安装大小，依赖关系等等：<code>sudo apt show &lt;package_name&gt;</code></p>
<p>删除软件包命令：<code>sudo apt remove &lt;package_name&gt;</code></p>
<p>清理不再使用的依赖和库文件:<code>sudo apt autoremove</code></p>
<p>移除软件包及配置文件:<code>sudo apt purge &lt;package_name&gt;</code></p>
<p>查找软件包命令： <code>sudo apt search &lt;keyword&gt;</code></p>
<p>列出所有已安装的包：<code>apt list --installed</code></p>
<p>列出所有已安装的包的版本信息：<code>apt list --all-versions</code></p>
<h3 id="linux-chmod命令"><a href="#linux-chmod命令" class="headerlink" title="linux chmod命令"></a>linux chmod命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。</span><br><span class="line">+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。</span><br><span class="line">r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。</span><br></pre></td></tr></table></figure>

<p>chmod命令可以使用八进制数来指定权限。文件或目录的权限位是由9个权限位来控制，每三位为一组。例如， 765 将这样解释：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">所有者的权限用数字表达：属主的那三个权限位的数字加起来的总和。如 rwx ，也就是 4+2+1 ，应该是 7。</span><br><span class="line">用户组的权限用数字表达：属组的那个权限位数字的相加的总和。如 rw- ，也就是 4+2+0 ，应该是 6。</span><br><span class="line">其它用户的权限数字表达：其它用户权限位的数字相加的总和。如 r-x ，也就是 4+0+1 ，应该是 5。</span><br></pre></td></tr></table></figure>

<h3 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h3><p>Linux find 命令用来在指定目录下查找文件。任何位于参数之前的字符串都将被视为欲查找的目录名。如果使用该命令时，不设置任何参数，则 find 命令将在当前目录下查找子目录与文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find   path   -option   [   -<span class="built_in">print</span> ]   [ -<span class="built_in">exec</span>   -ok   <span class="built_in">command</span> ]   &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">-<span class="built_in">type</span> c : 文件类型是 c 的文件。</span><br><span class="line"> -name <span class="string">&quot;*.c&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="ln-命令"><a href="#ln-命令" class="headerlink" title="ln 命令"></a>ln 命令</h3><p>Linux ln（英文全拼：link files）命令是一个非常重要命令，它的功能是为某一个文件在另外一个位置建立一个同步的链接。</p>
<p>当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在 其它的目录下用ln命令链接（link）它就可以，不必重复的占用磁盘空间<br><code>ln [参数][源文件或目录][目标文件或目录]</code></p>
<blockquote>
<p>必要参数：<br>-b 删除，覆盖以前建立的链接<br>-d 允许超级用户制作目录的硬链接<br>-f 强制执行<br>-i 交互模式，文件存在则提示用户是否覆盖<br>-n 把符号链接视为一般目录<br>-s 软链接(符号链接)<br>-v 显示详细的处理过程</p>
</blockquote>
<h3 id="mv-命令"><a href="#mv-命令" class="headerlink" title="mv 命令"></a>mv 命令</h3><p>Linux mv（英文全拼：move file）命令用来为文件或目录改名、或将文件或目录移入其它位置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv source_directory(目录) dest_directory(目录) </span><br><span class="line">//目录名 dest_directory 已存在，将 source_directory 移动到目录名 dest_directory 中；目录名 dest_directory 不存在则 source_directory 改名为目录名 dest_directory</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数说明：<br>-b: 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份。<br>-i: 如果指定移动的源目录或文件与目标的目录或文件同名，则会先询问是否覆盖旧文件，输入 y 表示直接覆盖，输入 n 表示取消该操作。<br>-f: 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件。<br>-n: 不要覆盖任何已存在的文件或目录。<br>-u：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。</p>
</blockquote>
<h3 id="rm-命令"><a href="#rm-命令" class="headerlink" title="rm 命令"></a>rm 命令</h3><blockquote>
<p>参数：<br>-i 删除前逐一询问确认。<br>-f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。<br>-r 将目录及以下之档案亦逐一删除。</p>
</blockquote>
<h3 id="cp-命令"><a href="#cp-命令" class="headerlink" title="cp 命令"></a>cp 命令</h3><blockquote>
<p>参数说明：<br>-a：此选项通常在复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpR参数组合。<br>-d：复制时保留链接。这里所说的链接相当于Windows系统中的快捷方式。<br>-f：覆盖已经存在的目标文件而不给出提示。<br>-i：与-f选项相反，在覆盖目标文件之前给出提示，要求用户确认是否覆盖，回答”y”时目标文件将被覆盖。<br>-p：除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。<br>-r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。<br>-l：不复制文件，只是生成链接文件。</p>
</blockquote>
<h3 id="which命令"><a href="#which命令" class="headerlink" title="which命令"></a>which命令</h3><p>Linux which命令用于查找文件。</p>
<p>which指令会在环境变量$PATH设置的目录里查找符合条件的文件。</p>
<h3 id="touch命令"><a href="#touch命令" class="headerlink" title="touch命令"></a>touch命令</h3><p>Linux touch命令用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。</p>
<blockquote>
<p>参数说明：<br>a 改变档案的读取时间记录。<br>m 改变档案的修改时间记录。<br>c 假如目的档案不存在，不会建立新的档案。与 –no-create 的效果一样。<br>f 不使用，是为了与其他 unix 系统的相容性而保留。<br>r 使用参考档的时间记录，与 –file 的效果一样。<br>d 设定时间与日期，可以使用各种不同的格式。<br>t 设定档案的时间记录，格式与 date 指令相同。<br>–no-create 不会建立新档案。<br>–help 列出指令格式。<br>–version 列出版本讯息。</p>
</blockquote>
<h3 id="mount命令"><a href="#mount命令" class="headerlink" title="mount命令"></a>mount命令</h3><p>Linux mount命令是经常会使用到的命令，它用于挂载Linux系统外的文件。</p>
<blockquote>
<p>参数说明：<br>-V：显示程序版本<br>-h：显示辅助讯息<br>-v：显示较讯息，通常和 -f 用来除错。<br>-a：将 /etc/fstab 中定义的所有档案系统挂上。<br>-F：这个命令通常和 -a 一起使用，它会为每一个 mount 的动作产生一个行程负责执行。在系统需要挂上大量 NFS 档案系统时可以加快挂上的动作。<br>-f：通常用在除错的用途。它会使 mount 并不执行实际挂上的动作，而是模拟整个挂上的过程。通常会和 -v 一起使用。<br>-o remount：将一个已经挂下的档案系统重新用不同的方式挂上。例如原先是唯读的系统，现在用可读写的模式重新挂上。<br>-o ro：用唯读模式挂上。<br>-o rw：用可读写模式挂上。<br>-o loop=：使用 loop 模式用来将一个档案当成硬盘分割挂上系统。<br>-t：指定档案系统的型态，通常不必指定。mount 会自动选择正确的型态。<br>-o async：打开非同步模式，所有的档案读写动作都会用非同步模式执行。<br>-o sync：在同步模式下执行。<br>-o atime、-o noatime：当 atime 打开时，系统会在每次读取档案时更新档案的『上一次调用时间』。当我们使用 flash 档案系统时可能会选项把这个选项关闭以减少写入的次数。</p>
</blockquote>
<p>将 /tmp/image.iso 这个光碟的 image 档使用 loop 模式挂在 /mnt/cdrom之下。用这种方法可以将一般网络上可以找到的 Linux 光 碟 ISO 档在不烧录成光碟的情况下检视其内容。<br><code>#mount -o loop /tmp/image.iso /mnt/cdrom</code></p>
<h3 id="df-命令"><a href="#df-命令" class="headerlink" title="df 命令"></a>df 命令</h3><p>Linux df（英文全拼：disk free） 命令用于显示目前在 Linux 系统上的文件系统磁盘使用情况统计。</p>
<h3 id="mkdir-命令"><a href="#mkdir-命令" class="headerlink" title="mkdir 命令"></a>mkdir 命令</h3><p>Linux mkdir（英文全拼：make directory）命令用于创建目录。</p>
<blockquote>
<p>参数说明：<br>-p 确保目录名称存在，不存在的就建一个。</p>
</blockquote>
<h3 id="logout命令"><a href="#logout命令" class="headerlink" title="logout命令"></a>logout命令</h3><p>Linux logout命令用于退出系统。</p>
<h3 id="passwd命令"><a href="#passwd命令" class="headerlink" title="passwd命令"></a>passwd命令</h3><p><code>passwd [-k] [-l] [-u [-f]] [-d] [-S] [username]</code></p>
<blockquote>
<p>必要参数：<br>-d 删除密码<br>-f 强迫用户下次登录时必须修改口令<br>-w 口令要到期提前警告的天数<br>-k 更新只能发送在过期之后<br>-l 停止账号使用<br>-S 显示密码信息<br>-u 启用已被停止的账户<br>-x 指定口令最长存活期<br>-g 修改群组密码<br>指定口令最短存活期<br>-i 口令过期后多少天停用账户</p>
</blockquote>
<h3 id="Linux系统用户账号的管理"><a href="#Linux系统用户账号的管理" class="headerlink" title="Linux系统用户账号的管理"></a>Linux系统用户账号的管理</h3><p>添加新的用户账号使用useradd命令，其语法如下：<br><code>useradd 选项 用户名</code></p>
<p>删除帐号:<br><code>userdel 选项 用户名 //常用的选项是 -r，它的作用是把用户的主目录一起删除。</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2019/12/08/22-23-45/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/08/22-23-45/" class="post-title-link" itemprop="url">Bootloader、Linux内核和文件系统编译</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-08 22:23:45" itemprop="dateCreated datePublished" datetime="2019-12-08T22:23:45+08:00">2019-12-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/experiments/" itemprop="url" rel="index"><span itemprop="name">experiments</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="交叉编译固件及系统测试"><a href="#交叉编译固件及系统测试" class="headerlink" title="交叉编译固件及系统测试"></a>交叉编译固件及系统测试</h1><h2 id="一、目的"><a href="#一、目的" class="headerlink" title="一、目的"></a>一、目的</h2><p>掌握虚拟机软件的安装和配置，掌握Ubuntu系统的安装和配置，掌握交叉编译器的安装，掌握Bootloader、Linux内核和文件系统编译方法，并进行硬件平台系统功能测试。</p>
<h2 id="二、内容"><a href="#二、内容" class="headerlink" title="二、内容"></a>二、内容</h2><p>1、在Windowns环境下安装虚拟机功能软件，在虚拟机环境下安装Ubuntu系统并对系统进行配置。</p>
<p>2、安装ARM交叉编译器，配置环境变量并功能测试。</p>
<p>3、通过对Bootloader、Linux内核和文件系统源码交叉编译，生成系统固件，记录编译结果。</p>
<p>4、调试串口连接硬件平台，对Bootloader和Linux环境下功能命令测试，记录测试结果。</p>
<h2 id="三、设备"><a href="#三、设备" class="headerlink" title="三、设备"></a>三、设备</h2><p>1、主机电脑。2、ARM实验箱3、调试连接配件</p>
<p><strong>四、实验步骤</strong></p>
<p><strong>4.1</strong> Ubuntu系统的安装和配置</p>
<p>下载Ubuntu系统16.04稳定版系统映像，下载地址：</p>
<p><a target="_blank" rel="noopener" href="http://releases.ubuntu.com/16.04.6/?_ga=2.221103960.1120206391.1590239549-144656828.1590239549"><strong>http://releases.ubuntu.com/16.04.6/?_ga=2.221103960.1120206391.1590239549-144656828.1590239549</strong></a></p>
<p>在虚拟机中安装Ubuntu系统，根据自己电脑的配置情况，选择CPU数量和内存大小，硬盘分区大小等配置，安装结果下图所示。(实验室提供华清远见开发环境参考，无需安装系统)</p>
<p>在虚拟机中配置网络适配器模式，理解NAT模式和桥接模式的区别。</p>
<p>开机进入Ubuntu系统，进行网络配置，掌握图形界面和命令行下配置网络方法，理解ifconfig命令的使用方法，</p>
<p>命令行方式下，vmware虚拟机网络方式为桥接模式，为ubuntu系统配置一个静态的IP地址。假设使用的网络地址为192.168.100.X段，默认为ubuntu系统分配的IP地址是192.168.100.192 。</p>
<p>如果想修改ubuntu系统的IP地址，可以执行以下命令，修改文件内容。</p>
<p>linux@ubuntu64-vm:~$ sudo vim /etc/network/interfaces</p>
<p>修改完成后，重新启动网络配置。</p>
<p>linux@ubuntu64-vm:~$ sudo /etc/init.d/networking restart</p>
<p><strong>4. 3 安装交叉编译器并测试</strong></p>
<p>Ubuntu系统中包含四个版本的交叉编译器，位于路径/usr/local/toolchain目录下，不用解压直接使用即可。</p>
<p>修改bash启动文件，执行以下命令：</p>
<p>linux@ubuntu64-vm:~$ sudo vim /etc/bash.bashrc</p>
<p>在bash.bashrc文件最后添加以下内容并保存退出：</p>
<p>export PATH=$PATH:/usr/local/toolchain/toolchain-4.5.1/bin/</p>
<p>再退出bash终端重新打开，执行ARM交叉编译器命令，获取如下信息说明交叉编译器配置完成。</p>
<p>linux@ubuntu64-vm:~$ arm-none-linux-gnueabi-gcc -v</p>
<p><strong>4.4 Linux内核编译</strong></p>
<ol>
<li>首先在虚拟机工作目录下用个人学号建立自己的工作目录。</li>
</ol>
<p>linux@ubuntu64-vm:~$ mkdir /home/linux/2018011222/ -p</p>
<ol>
<li><p>通过U盘或者共享目录将Linux内核源码压缩包拷贝到该目录里面。</p>
</li>
<li><p>拷贝后进入该目录，解压源码。</p>
</li>
</ol>
<p>linux@ubuntu64-vm:~/2018011222$ tar xvf linux-3.4.39.tar.xz</p>
<ol>
<li><p>拷贝ext4文件系统制作工具到/usr/bin目录下。</p>
</li>
<li><p>进入内核源码目录，查看源码结构。</p>
</li>
<li><p>拷贝硬件平台的标准配置文件为.config文件。</p>
</li>
</ol>
<p>$ cp arch/arm/configs/fs6818M4_defconfig_v5 .config</p>
<ol>
<li>执行内核配置命令进入内核配置界面。</li>
</ol>
<p>$ make menuconfig</p>
<p>查看System type和Deviec Driver配置情况，</p>
<ol>
<li>保存退出后，编译内核，编译结果如下图。(比较耗时间，15分钟左右，可以先做4.5小节内容)</li>
</ol>
<p>$ make uImage</p>
<ol>
<li>执行脚本打包内核镜像，内核镜像文件为boot.img，文件格式是ext4格式，其中包括开机LOGO，ramdisk文件系统和uImage内核镜像，生成boot.img文件，</li>
</ol>
<p>$./mkboot.sh</p>
<p><strong>4.5 Linux文件系统镜像制作</strong></p>
<p>1、通过U盘或者共享目录将文件系统源码压缩包拷贝到/source目录下。</p>
<p>解压文件系统源码压缩包，查看文件系统内容。</p>
<p>$tar xvf rootfs.tar.xz</p>
<p>3、将文件系统打包成ext4格式的镜像，生成system_linux.img文件</p>
<p>$make_ext4fs -s system_linux.img -l 300M rootfs</p>
<p><strong>4.6 Bootloader</strong>** 环境测试**</p>
<ol>
<li>连接实验箱5V电源线，连接终</li>
</ol>
<p>端调试串口线和以太网线到电脑主</p>
<p>机，如右图。</p>
<p>(USB OTA调试线烧写镜像用，</p>
<p>可以不连)</p>
<ol>
<li>安装USB转串口驱动程序，确</li>
</ol>
<p>认当前电脑上使用的串口号，设置</p>
<p>电脑上串口调试软件putty。</p>
<ol>
<li>上电启动实验箱，在终端中可以看到启动信息，快速按空格键进入bootloader环境。</li>
<li>通过print、setenv、saveenv等命令测试bootloader，</li>
</ol>
<p><strong>4.7</strong>  <strong>嵌入式</strong>** Linux **<strong>环境测试</strong></p>
<p>按复位键重启硬件系统，等待平台系统进入Linux环境，测试三条Linux命令，</p>
<h1 id="应用程序开发"><a href="#应用程序开发" class="headerlink" title="应用程序开发"></a>应用程序开发</h1><h2 id="一、目的-1"><a href="#一、目的-1" class="headerlink" title="一、目的"></a>一、目的</h2><p>掌握NFS挂载Linux启动方法，掌握Ubuntu 环境下交叉编译应用程序的方法。</p>
<h2 id="二、内容-1"><a href="#二、内容-1" class="headerlink" title="二、内容"></a>二、内容</h2><p>1、使用Vim或者Gedit 文本编译器编写C 语言、汇编语言程序和Makefile文件，分别计算公式3*x2+2*x3 的值和计算4个输入数的平均数。</p>
<p>2、编写Makefile文件，通过make编译得到ARM 可执行程序formula 和average。</p>
<p>3、配置实验箱启动方式为NFS启动，执行并测试程序。</p>
<h2 id="三、设备-1"><a href="#三、设备-1" class="headerlink" title="三、设备"></a>三、设备</h2><p>1、主机电脑。2、ARM实验箱3、调试连接配件</p>
<h2 id="四、原理"><a href="#四、原理" class="headerlink" title="四、原理"></a>四、原理</h2><p>掌握嵌入式Linux 应用开发所用到的一些常用工具，包括编辑工具vim、gedit、编译工具gcc、MakeFile 文件及调试工具gdb。</p>
<p>正确掌握C 语言、汇编语言程序和Makefile编写语法和格式。</p>
<h2 id="五、步骤"><a href="#五、步骤" class="headerlink" title="五、步骤"></a>五、步骤</h2><h3 id="5-1-计算公式3-x-2-2-x3"><a href="#5-1-计算公式3-x-2-2-x3" class="headerlink" title="5.1 计算公式3*x^2+2*x3"></a>5.1 计算公式3*x^2+2*x3</h3><p>1、在Linux 主机上进入自己学号的工作目录，执行如下命令。</p>
<p>$cd /home/linux/2018011222/</p>
<p>$mkdir exam1</p>
<p>$cd exam1</p>
<p>$ gedit formula.c</p>
<ol>
<li>在formula.c 程序里面输入以下内容。</li>
</ol>
<p>#include&amp;lt;stdio.h&amp;gt;</p>
<p>extern int compute(int data);</p>
<p>int main()</p>
<p>{</p>
<p>int x;</p>
<p>printf(&quot;Input x=&quot;);</p>
<p>scanf(&quot;%d&quot;,&amp;x);</p>
<p>printf(&quot;The result is %d\n&quot;,compute(x));</p>
<p>return 0;</p>
<p>}</p>
<p>3、执行命令生成汇编文件</p>
<p>$ gedit compute.S</p>
<p>包含计算3*x^2+2*x^3过程的汇编文件为compute.S内容如下:.text</p>
<p>.align</p>
<p>.global compute</p>
<p>compute:</p>
<p>stmfd sp!,{r4-r11,r14}</p>
<p>mul r1,r0,r0</p>
<p>mov r3,#2</p>
<p>mul r2,r1,r3</p>
<p>mov r3,#3</p>
<p>mul r4,r1,r3</p>
<p>mla r0,r2,r0,r4</p>
<p>ldmfd sp!,{r4-r11,r15}</p>
<p>4、自行编写Makefile 文件，实现对c语言程序和汇编程序的编译得到formula可执行程序。</p>
<p>5、在exam1目录下执行make命令得到可执行文件formula</p>
<p>$make</p>
<p>6、应用strip工具精简可执行程序</p>
<p>$arm-none-linux-gnueabi-strip formula</p>
<p>7、file命令可以查看formula程序属性，截图保存formula程序信息到实验报告中。</p>
<p>$file formula</p>
<h3 id="5-2-计算4-个数的平均值"><a href="#5-2-计算4-个数的平均值" class="headerlink" title="5.2 计算4 个数的平均值"></a>5.2 计算4 个数的平均值</h3><p>1、在Linux 主机上建立工作目录，执行如下命令。</p>
<p>$cd /home/linux/2018011222/</p>
<p>$mkdir exam2</p>
<p>$cd exam2</p>
<p>$gedit avg.c</p>
<ol>
<li>在avg.c程序里面输入以下内容。</li>
</ol>
<p>#include&amp;lt;stdio.h&amp;gt;</p>
<p>extern int average(int i, int j,int k,int l);</p>
<p>int main(void)</p>
<p>{</p>
<p>int a,b,c,d,avr;</p>
<p>printf(&quot;Input 4 number: \n&quot;);</p>
<p>scanf(&quot;%d&quot;,&amp;a);</p>
<p>scanf(&quot;%d&quot;,&amp;b);</p>
<p>scanf(&quot;%d&quot;,&amp;c);</p>
<p>scanf(&quot;%d&quot;,&amp;d);</p>
<p>printf(&quot;a=%d,b=%d,c=%d,d=%d\n&quot;,a,b,c,d);</p>
<p>avr= average(a,b,c,d);</p>
<p>printf(&quot;(%d+,%d+,%d+,%d)/4=,%d\n&quot;,a,b,c,d,avr);</p>
<p>return 0;</p>
<p>}</p>
<p>3、执行命令生成汇编文件</p>
<p>$gedit average.S</p>
<p>自行编写计算平均值的汇编文件average.S程序。</p>
<p>4、自行编写Makefile 文件，实现对c语言程序和汇编程序的编译得到formula可执行程序。</p>
<p>5、在exam2目录下执行make命令得到可执行文件average</p>
<p>$make</p>
<p>6、应用strip工具精简可执行程序</p>
<p>$ arm-none-linux-gnueabi-strip average</p>
<p>7、file命令可以查看average程序属性，</p>
<p>$file average</p>
<h3 id="5-3配置NFS启动方式"><a href="#5-3配置NFS启动方式" class="headerlink" title="5.3配置NFS启动方式"></a>5.3配置NFS启动方式</h3><p>1、设置好电脑主机的IP地址为192.168.100.192 ，配置好主机的NFS服务，默认是启动的。</p>
<p>2、在Bootloader环境下配置启动参数， <strong>注意格式不要出错！！！</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FS6818# setenv serverip 192.168.100.192</span><br><span class="line"></span><br><span class="line">FS6818#setenv ipaddr 192.168.100.100</span><br><span class="line"></span><br><span class="line">FS6818# setenv gatewayip 192.168.100.1</span><br><span class="line"></span><br><span class="line">FS6818# setenv bootcmd ext4load mmc 2:1 0x48000000 uImage\;bootm 0x48000000</span><br><span class="line"></span><br><span class="line">FS6818# setenv bootargs root=/dev/nfs nfsroot=192.168.100.192:/source/rootfs console=ttySAC0,115200 init=/linuxrc ip=192.168.100.100:::::eth0:off</span><br><span class="line"></span><br><span class="line">FS6818# saveenv</span><br></pre></td></tr></table></figure>

<p>保存后复位ARM实验箱，等待进入NFS启动的文件系统，如下图。</p>
<p><img src="RackMultipart20210826-4-1d1i54l_html_ea6ac7d22326c54c.png"></p>
<p>拷贝之前编译好的可执行文件formula和average到主机NFS共享目录下wsn6818bp_test，这样在putty终端中就可以运行测试结果，</p>
<p><img src="RackMultipart20210826-4-1d1i54l_html_458a03b2d32152d4.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2019/11/28/19-22-34/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/28/19-22-34/" class="post-title-link" itemprop="url">调用百度语音识别api</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-28 19:22:34" itemprop="dateCreated datePublished" datetime="2019-11-28T19:22:34+08:00">2019-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">嵌入式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="调用百度语音识别api"><a href="#调用百度语音识别api" class="headerlink" title="调用百度语音识别api"></a>调用百度语音识别api</h2><h3 id="注册账号申请api-key"><a href="#注册账号申请api-key" class="headerlink" title="注册账号申请api key"></a>注册账号申请api key</h3><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><ul>
<li>源码：语音识别、语音合成</li>
</ul>
<p><code>git clone https://github.com/Baidu-AIP/speech-demo</code></p>
<ul>
<li>依赖(curl.h)：</li>
</ul>
<p><code>apt install libcurl4-openssl-dev</code></p>
<h3 id="编辑源文件"><a href="#编辑源文件" class="headerlink" title="编辑源文件"></a>编辑源文件</h3><p>编辑<code>asrmain.c</code> <code>ttsmain.c</code>填入自己的keys，修改相应参数</p>
<p>编译<code>sh build_xxxxxxx</code></p>
<h2 id="语音唤醒"><a href="#语音唤醒" class="headerlink" title="语音唤醒"></a>语音唤醒</h2><h3 id="snowboy下载"><a href="#snowboy下载" class="headerlink" title="snowboy下载"></a>snowboy下载</h3><p><code>git clone https://github.com/Kitt-AI/snowboy.git</code></p>
<h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><p><code>sudo apt-get -y install libasound2-dev</code><br><code>sudo apt-get install python3-pyaudio</code><br><code>sudo apt-get install swig3.0 sox</code><br><code>sudo apt-get install libatlas-base-dev</code>  </p>
<p>通过ffplay工具(安装ffmpeg会带上这个工具)。</p>
<p><code>ffplay -ar 44100 -channels 2 -f s16le -i 123.pcm</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2019/11/22/22-33-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/22/22-33-33/" class="post-title-link" itemprop="url">C语言常见例题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-22 22:33:33" itemprop="dateCreated datePublished" datetime="2019-11-22T22:33:33+08:00">2019-11-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index"><span itemprop="name">study</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h1><hr>
<ul>
<li>求闰年</li>
</ul>
<p>能被4整除且不能被100整除,或能够被400整除的年份就是闰年</p>
<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2019/11/22/22-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/22/22-11-33/" class="post-title-link" itemprop="url">Alsa库移植和安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-22 22:11:33" itemprop="dateCreated datePublished" datetime="2019-11-22T22:11:33+08:00">2019-11-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">嵌入式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="alsa库下载"><a href="#alsa库下载" class="headerlink" title="alsa库下载"></a>alsa库下载</h3><p><code>ftp://ftp.alsa-project.org/pub</code></p>
<h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><p>解压进入文件夹<br><code>./configure  --prefix=/home/mine/alsa //生成文件存放的位置</code><br>开始安装驱动<br><code>make &amp;&amp; sudo make install</code></p>
<h3 id="交叉编译"><a href="#交叉编译" class="headerlink" title="交叉编译"></a>交叉编译</h3><p>使用命令</p>
<p><code>./configure --host=arm-jyxtec-linux-gnueabi --prefix=/usr/share/arm-alsa</code></p>
<blockquote>
<p>–host参数指定了交叉编译器为“arm-jyxtec-linux-gnueabi（根据自己板子上的工具链稳准）”，因此必须确保交叉编译器已成功配置（也就是已经导出为全局环境变量，切记！切记！我就在这浪费了很多时间，我的习惯是添加据对路径），且可以在shell里直接调用；–prefix参数指定了alsa-lib的目标安装目录，之后的alsa-util配置也一样</p>
</blockquote>
<p>使用命令</p>
<p><code>./configure --host=arm-jyxtec-linux-gnueabi --prefix=/usr/share/arm-alsa --with-alsa-inc-prefix=/usr/share/arm-alsa/include --with-alsa-prefix=/usr/share/arm-alsa/lib --disable-alsamixer --disable-xmlto</code></p>
<blockquote>
<p>–with-alsa-inc-prefix和–with-alsa-prefix分别指定了交叉编译util应用所需要的alsa-lib的头文件和库文件；–disable-alsamixer表示不编译生成alsamixer这个应用程序，因为该程序依赖于ncurses这个图形界面库，目前我们对于该库还不能交叉编译，故放弃</p>
</blockquote>
<h3 id="可能出现的错误"><a href="#可能出现的错误" class="headerlink" title="可能出现的错误"></a>可能出现的错误</h3><hr>
<p><code>error: this packages requires a curses library</code>  </p>
<p><strong>解决办法：</strong>  </p>
<p><code>apt-get install libncurses5-dev</code></p>
<hr>
<p><code>error: panelw library not found</code>  </p>
<p><strong>解决办法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s libpanelw.so.5 /usr/lib/libpanelw.so</span><br><span class="line">sudo ln -s libformw.so.5 /usr/lib/libformw.so</span><br><span class="line">sudo ln -s libmenuw.so.5 /usr/lib/libmenuw.so</span><br><span class="line">sudo ln -s libncursesw.so.5 /lib/libncursesw.so</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>解决办法：</strong></p>
<p>根据自己的错误提示来输入命令  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果提示是t-ru.gmo的话，就用命令：touch alsaconf/po/t-ru.gmo</span><br><span class="line">如果提示是t-ja.gmo的话，就用命令：touch alsaconf/po/t-ja.gmo</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2019/11/21/11-22-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/21/11-22-12/" class="post-title-link" itemprop="url">C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-21 11:22:12" itemprop="dateCreated datePublished" datetime="2019-11-21T11:22:12+08:00">2019-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-24 22:26:36" itemprop="dateModified" datetime="2023-12-24T22:26:36+08:00">2023-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index"><span itemprop="name">study</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Helloword"><a href="#Helloword" class="headerlink" title="Helloword"></a>Helloword</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; <span class="comment">//名字空间</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;helo word&quot;</span>&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;helo word\n&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><p>cin、cout是istream类的对象</p>
<h3 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h3><h3 id="复杂的数据类型"><a href="#复杂的数据类型" class="headerlink" title="复杂的数据类型"></a>复杂的数据类型</h3><h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>定义构造器<br>构造器的名字必须与它所在的类的名字一样<br>构造器没有返回值  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="built_in">Car</span>(<span class="keyword">void</span>); <span class="comment">//名称与类名一致</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Car::<span class="built_in">Car</span>(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">调用：</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="built_in">Car</span>(<span class="keyword">void</span>); <span class="comment">//名称与类名一致</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">runing</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Car::<span class="built_in">Car</span>(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">runing</span><span class="params">()</span></span>&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line">Car mycar;</span><br><span class="line">mycar.<span class="built_in">runing</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>数组：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Car mycar[<span class="number">10</span>];</span><br><span class="line">调用：</span><br><span class="line">mycar[x].runing; <span class="comment">//x为给定数组元素的下标</span></span><br></pre></td></tr></table></figure>

<p>副本构造器</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyClass（<span class="keyword">const</span> MyClass &amp;rhs);</span><br></pre></td></tr></table></figure>

<p>析构器：与构造器一样，只是前边多了一个波浪符<code>~</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">Car</span>(<span class="keyword">void</span>);</span><br><span class="line">~<span class="built_in">Car</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Car::<span class="built_in">Car</span>()</span><br><span class="line">&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Car::~<span class="built_in">Car</span>()&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>this指针:让构造器知道哪个是参数哪个是属性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果代码中不存在二义性，则不必使用this指针</span></span><br><span class="line"><span class="keyword">this</span>-&gt;fish=fish;</span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>基类即父类<br>子类即从基类派生出来的类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">class <span class="title">SubCar</span><span class="params">(子类)</span>:public Car(基类) &#123;</span>...&#125;;</span><br><span class="line">子类也可以调用基类的成员</span><br></pre></td></tr></table></figure>

<ul>
<li>继承里的含参数构造器</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">Animal</span>(std::string Name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span>:</span><span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Pig</span>(std::string Name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line">Animal::<span class="built_in">Animal</span>(std::string Name)</span><br><span class="line">&#123;</span><br><span class="line">name=Name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Pig::<span class="built_in">Pig</span>(std::string Name) : <span class="built_in">Animal</span>(Name)</span><br><span class="line">&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><p>保护类里的方法和属性的手段</p>
<blockquote>
<p>public：任何代码<br>protected：这个类本身和它的子类<br>private：只有这个类本身</p>
</blockquote>
<h3 id="覆盖方法"><a href="#覆盖方法" class="headerlink" title="覆盖方法"></a>覆盖方法</h3><p>在类里重新声明这个方法</p>
<h3 id="重载-1"><a href="#重载-1" class="headerlink" title="重载"></a>重载</h3><p>可以定义多个同名的函数，只要它们输入的参数不同</p>
<ul>
<li>运算符的重载</li>
</ul>
<p>重载不能改变运算符的操作个数，优先级，结核性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">函数类型 <span class="keyword">operator</span> 运算符（形参）</span><br><span class="line">&#123;</span><br><span class="line">运算符的重载操作</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如：</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">operator</span> +(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> (a-b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以下五个运算符不允许重载：<br><code>.</code>;<code>*</code>;<code>::</code>;<code>sizeof</code>;<code>?:</code>;</p>
</blockquote>
<h3 id="友元关系"><a href="#友元关系" class="headerlink" title="友元关系"></a>友元关系</h3><p>友元关系是类中的一种特殊关系，允许友元类访问对方pubulic、protected、private中的方法和属性</p>
<p>只要在类的声明里的地方加上<code>friend class **类名字***</code></p>
<h3 id="静态属性和静态方法"><a href="#静态属性和静态方法" class="headerlink" title="静态属性和静态方法"></a>静态属性和静态方法</h3><p>只要在它的声明前加上<code>static</code>即可</p>
<h3 id="虚方法"><a href="#虚方法" class="headerlink" title="虚方法"></a>虚方法</h3><p>只需要在其原型前加上<code>virtual</code>即可</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">每一个<span class="keyword">new</span>操作都要对应一个<span class="keyword">delete</span>操作</span><br><span class="line"><span class="keyword">int</span> *p=<span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">*p=<span class="number">10</span>;</span><br><span class="line">std::cout&lt;&lt;*p;</span><br><span class="line"><span class="keyword">delete</span> p;</span><br></pre></td></tr></table></figure>

<h3 id="抽象方法"><a href="#抽象方法" class="headerlink" title="抽象方法"></a>抽象方法</h3><p>在原型的末尾加上<code>=0</code></p>
<h3 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeachingStudent</span>:</span><span class="keyword">public</span> Student,<span class="keyword">public</span> Teacher</span><br><span class="line">&#123;</span><br><span class="line">xxxx</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="虚继承"><a href="#虚继承" class="headerlink" title="虚继承"></a>虚继承</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span><span class="keyword">virtual</span> <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line">xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="动态内存"><a href="#动态内存" class="headerlink" title="动态内存"></a>动态内存</h3><p>new语句申请内存，delete语句释放内存,再将指针指向NULL</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *i=<span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">delete</span> i;</span><br><span class="line">i=<span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>动态数组</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">x[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">....</span><br><span class="line"><span class="keyword">delete</span> [] x; <span class="comment">//删除动态数组</span></span><br></pre></td></tr></table></figure>

<h3 id="强制类型转换"><a href="#强制类型转换" class="headerlink" title="强制类型转换"></a>强制类型转换</h3><p>静态：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Company *company=<span class="keyword">new</span> <span class="built_in">Company</span>(<span class="string">&quot;APPLE&quot;</span>,<span class="string">&quot;iPhone&quot;</span>);</span><br><span class="line">TechCompany *tecCompany=(TecCompany*)company</span><br><span class="line"><span class="keyword">delete</span> company;</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能两个都删除</span></span><br><span class="line">company=<span class="literal">NULL</span>;</span><br><span class="line">tecCompany=<span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>动态：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const_cast</span>&lt;MyClass*&gt;(value) <span class="comment">//用来改变value的常量性</span></span><br><span class="line"><span class="keyword">dynamic_cast</span>&lt;MyClass*&gt;(value) <span class="comment">//用来把一中类型的对象指针安全地强制转换为另一种类型的对象指针，如果value的类型不是一个MyClass类或其子类的指针，则返回NULL</span></span><br><span class="line"><span class="keyword">reinterpret_cast</span>&lt;T&gt;(value) <span class="comment">//在不进行任何实质性的转换的情况下，把一种类型的指针解释为另一种类型的指针或者把一种整数解释为另一种整数</span></span><br><span class="line"><span class="keyword">static_cast</span>&lt;T&gt;(value)  <span class="comment">//用来进行强制类型转换而不做任何运行时的检查</span></span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">Company *company=<span class="keyword">new</span> <span class="built_in">Company</span>(<span class="string">&quot;APPLE&quot;</span>,iPhone<span class="string">&quot;);</span></span><br><span class="line"><span class="string">TechCompany *techcompany=dynamic_cast&lt;TechCompany *&gt;(company);</span></span><br></pre></td></tr></table></figure>

<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> myNamespace</span><br><span class="line">&#123;</span><br><span class="line">....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用命名空间</span></span><br><span class="line">* <span class="keyword">using</span> <span class="keyword">namespace</span> myNamespace</span><br><span class="line"></span><br><span class="line">* myNamespace::xxxx</span><br><span class="line"></span><br><span class="line">* <span class="keyword">using</span> std::cout;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;,,,,&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p>当使用编译器建立程序时：<br>1.执行预处理器指令<br>2.把.cpp文件编译成.o文件<br>3.把.o文件链接成一个可执行文件  </p>
<h3 id="泛型编程"><a href="#泛型编程" class="headerlink" title="泛型编程"></a>泛型编程</h3><p>函数模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span> <span class="comment">//字母T表示接下来的函数里代表的一种不确定的数据类型</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(T &amp;a,T &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T i=<span class="number">0</span>;</span><br><span class="line">....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="built_in">MyClass</span>();</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(T &amp;a,T &amp;b)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器的实现</span></span><br><span class="line">Myclass&lt;T&gt;::<span class="built_in">MyClass</span>()</span><br><span class="line">&#123;</span><br><span class="line">.....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="内联函数"><a href="#内联函数" class="headerlink" title="内联函数"></a>内联函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">add</span> <span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x+Y+z;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
