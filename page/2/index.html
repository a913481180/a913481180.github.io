<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.baidu.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="http://www.baidu.com/page/2/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.baidu.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/12/22/23-33-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/22/23-33-33/" class="post-title-link" itemprop="url">uni-App</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-22 23:33:33" itemprop="dateCreated datePublished" datetime="2021-12-22T23:33:33+08:00">2021-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="uniApp"><a href="#uniApp" class="headerlink" title="uniApp"></a>uniApp</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>配置浏览器目录</li>
<li>微信小程序-》设置-》安全设置-》打开多端口服务</li>
</ul>
<h2 id="尺寸单位"><a href="#尺寸单位" class="headerlink" title="尺寸单位"></a>尺寸单位</h2><ul>
<li><p>支持的通用 css 单位包括 px、rpx</p>
</li>
<li><p>px 即屏幕像素<br>rpx 即响应式 px，一种根据屏幕宽度自适应的动态单位。以 750 宽的屏幕为基准，750rpx 恰好为屏幕宽度。屏幕变宽，rpx 实际显示效果会等比放大，但在 App（vue2 不含 nvue） 端和 H5（vue2） 端屏幕宽度达到 960px 时，默认将按照 375px 的屏幕宽度进行计算，具体配置参考</p>
</li>
</ul>
<p>vue 页面支持下面这些普通 H5 单位，但在 nvue 里不支持：</p>
<p>rem 根字体大小可以通过 page-meta 配置<br>vh viewpoint height，视窗高度，1vh 等于视窗高度的 1%<br>vw viewpoint width，视窗宽度，1vw 等于视窗宽度的 1%<br>nvue 还不支持百分比单位。</p>
<p>App 端，在 pages.json 里的 titleNView 或页面里写的 plus api 中涉及的单位，只支持 px。注意此时不支持 rpx<br>nvue 中，uni-app 模式（nvue 不同编译模式介绍）可以使用 px 、rpx，表现与 vue 中基本一致，另外启用 dynamicRpx 后可以适配屏幕大小动态变化。weex 模式目前遵循 weex 的单位，它的单位比较特殊：</p>
<p>px:，以 750 宽的屏幕为基准动态计算的长度单位，与 vue 页面中的 rpx 理念相同。（一定要注意 weex 模式的 px，和 vue 里的 px 逻辑不一样。）<br>wx：与设备屏幕宽度无关的长度单位，与 vue 页面中的 px 理念相同<br>下面对 rpx 详细说明：</p>
<p>设计师在提供设计图时，一般只提供一个分辨率的图。</p>
<p>严格按设计图标注的 px 做开发，在不同宽度的手机上界面很容易变形。</p>
<p>而且主要是宽度变形。高度一般因为有滚动条，不容易出问题。由此，引发了较强的动态宽度单位需求。<br>rpx 是相对于基准宽度的单位，可以根据屏幕宽度进行自适应。uni-app 规定屏幕基准宽度 750rpx。</p>
<p>开发者可以通过设计稿基准宽度计算页面元素 rpx 值，设计稿 1px 与框架样式 1rpx 转换公式如下：</p>
<p>设计稿 1px / 设计稿基准宽度 = 框架样式 1rpx / 750rpx</p>
<p>换言之，页面元素宽度在 uni-app 中的宽度计算公式：</p>
<p>750 * 元素在设计稿中的宽度 / 设计稿基准宽度</p>
<p>举例说明：</p>
<p>若设计稿宽度为 750px，元素 A 在设计稿上的宽度为 100px，那么元素 A 在 uni-app 里面的宽度应该设为：750 _ 100 / 750，结果为：100rpx。<br>若设计稿宽度为 640px，元素 A 在设计稿上的宽度为 100px，那么元素 A 在 uni-app 里面的宽度应该设为：750 _ 100 / 640，结果为：117rpx。<br>若设计稿宽度为 375px，元素 B 在设计稿上的宽度为 200px，那么元素 B 在 uni-app 里面的宽度应该设为：750 * 200 / 375，结果为：400rpx。<br>Tips</p>
<p>注意 rpx 是和宽度相关的单位，屏幕越宽，该值实际像素越大。如不想根据屏幕宽度缩放，则应该使用 px 单位。<br>如果开发者在字体或高度中也使用了 rpx ，那么需注意这样的写法意味着随着屏幕变宽，字体会变大、高度会变大。如果你需要固定高度，则应该使用 px 。<br>rpx 不支持动态横竖屏切换计算，使用 rpx 建议锁定屏幕方向<br>设计师可以用 iPhone6 作为视觉稿的标准。<br>如果设计稿不是 750px，HBuilderX 提供了自动换算的工具，详见：HBuilderX 中自动转换 px 为 upx。<br>App 端，在 pages.json 里的 titleNView 或页面里写的 plus api 中涉及的单位，只支持 px，不支持 rpx。<br>早期 uni-app 提供了 upx ，目前已经推荐统一改为 rpx 了.</p>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><p>目前支持的选择器有：<code>.class</code> <code>#id</code> <code>element</code> (<code>::after</code> <code>::before</code> )仅 vue 页面生效<br>注意：</p>
<p>在 uni-app 中不能使用 * 选择器。</p>
<p>微信小程序自定义组件中仅支持 class 选择器</p>
<p>page 相当于 body 节点，例如：</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>uni-app 页面路由为框架统一管理，开发者需要在 pages.json 里配置每个路由页面的路径及页面样式。类似小程序在 app.json 中配置页面路由一样。所以 uni-app 的路由用法与 Vue Router 不同，如仍希望采用 Vue Router 方式管理路由，可在插件市场搜索 Vue-Router。</p>
<p>#路由跳转<br>uni-app 有两种页面路由跳转方式：使用 navigator 组件跳转、调用 API 跳转</p>
<p>|路由方式| 页面栈表现| 触发时机|<br>|初始化 |新页面入栈 uni-app 打开的第一个页面|<br>|打开新页面 |新页面入栈 |调用 API uni.navigateTo 、使用组件 <code>&lt;navigator open-type=&quot;navigate&quot;/&gt;</code>|<br>|页面重定向 |当前页面出栈，新页面入栈 |调用 API uni.redirectTo 、使用组件 <code>&lt;navigator open-type=&quot;redirectTo&quot;/&gt;</code>|<br>|页面返回 |页面不断出栈，直到目标返回页 |调用 API uni.navigateBack 、使用组件 <code>&lt;navigator open-type=&quot;navigateBack&quot;/&gt;</code> 、用户按左上角返回按钮、安卓用户点击物理 back 按键|<br>|Tab 切换 |页面全部出栈，只留下新的 Tab 页面 |调用 API uni.switchTab 、使用组件 <code>&lt;navigator open-type=&quot;switchTab&quot;/&gt;</code> 、用户切换 Tab|<br>|重加载 |页面全部出栈，只留下新的页面 |调用 API uni.reLaunch 、使用组件 <code>&lt;navigator open-type=&quot;reLaunch&quot;/&gt;</code>|</p>
<h2 id="pages-json-文件"><a href="#pages-json-文件" class="headerlink" title="pages.json 文件"></a>pages.json 文件</h2><p>pages.json 文件用来对 uni-app 进行全局配置，决定页面文件的路径、窗口样式、原生的导航栏、底部的原生tabbar 等。</p>
<p>它类似微信小程序中app.json的页面管理部分。注意定位权限申请等原属于app.json的内容，在uni-app中是在manifest中配置。</p>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>-</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/12/01/10-12-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/10-12-33/" class="post-title-link" itemprop="url">MySql</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:12:33" itemprop="dateCreated datePublished" datetime="2021-12-01T10:12:33+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h1><blockquote>
<p>关系型数据库：建立在关系模型上，由多张相互连接的二维表组成的数据库</p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li>MySQL 官网下载最新版<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/installer/">https://dev.mysql.com/downloads/installer/</a></li>
<li>然后在 cmd 里面 cd 到<code>D:\mysql-8.0.11</code>安装目录</li>
<li>在该文件夹下创建 my.ini 配置文件编辑 my.ini 配置以下基本信息</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=C:\\web\\mysql-<span class="number">8.0</span>.<span class="number">11</span></span><br><span class="line"><span class="comment"># 设置 mysql数据库的数据的存放目录MySQL 8+ 不需要以下配置，系统自己生成即可否则有可能报错</span></span><br><span class="line"><span class="comment"># datadir=C:\\web\\sqldata</span></span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">20</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为8比特编码的latin1字符集</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br></pre></td></tr></table></figure>

<blockquote>
<p>MySQL 数据库进行初始化命令操作时提示 my.ini 配置文件错误的解决方法<br>通过修改 MySQL 数据库中 my.ini 配置文件编码格式的方法解决此问题。<br>步骤：用记事本打开 my.ini 文件——》点击“文件”选择“另存为”——》将编码选为 ANSI——》保存覆盖——》重启 MySQL 。</p>
</blockquote>
<ol>
<li>以管理员身份打开 cmd 命令行工具切换目录<code>cd D:\mysql-8.0.11\bin</code></li>
<li>初始化数据库<code>mysqld --initialize --console</code>执行完成后会输出 root 用户的初始默认密码!!!!</li>
<li>安装<code>mysqld install</code></li>
<li>启动输入以下命令<code>net start mysql</code></li>
<li>停止<code>net stop mysql</code></li>
<li>登录 MySQL<code>mysql -u root -p</code></li>
<li>修改初始密码<code>ALTER USER USER() IDENTIFIED BY &#39;123456&#39;;</code></li>
</ol>
<h2 id="mysql-数据类型"><a href="#mysql-数据类型" class="headerlink" title="mysql 数据类型"></a>mysql 数据类型</h2><table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
</tr>
</thead>
<tbody><tr>
<td>整数类型</td>
<td>tinyint\smallint\mediumint\int\bigint</td>
</tr>
<tr>
<td>浮点小数类型</td>
<td>float\double</td>
</tr>
<tr>
<td>定点小数类型</td>
<td>decimal</td>
</tr>
<tr>
<td>时间、日期类型</td>
<td>year\time\date\datetime\timestamp</td>
</tr>
<tr>
<td>文本字符串</td>
<td>char\varchar\tinytext\text\mediumtext\longtext\enum\set</td>
</tr>
<tr>
<td>二进制字符串</td>
<td>bit\binary\varbinary\tinyblob\blog\mediumblob\longblob</td>
</tr>
</tbody></table>
<blockquote>
<p>char(n)和 varchar(n)中括号中 n 代表字符的个数并不代表字节个数比如 CHAR(30)就可以存储 30 个字符。</p>
</blockquote>
<h2 id="sql-语句"><a href="#sql-语句" class="headerlink" title="sql 语句"></a>sql 语句</h2><p>语法:</p>
<ul>
<li>单行或多行书写，已分号结尾</li>
<li>可使用空格缩进</li>
<li>不区分大小写，关键词推荐大写</li>
<li>注释：两横杆加空格<code>-- 注释...</code>或<code>/* ... */</code>或 mysql 特有的<code>#</code></li>
</ul>
<p>分类：</p>
<ul>
<li>DDL（data definition language）数据定义语句，建表、字段、数据库</li>
<li>DML（data manipulation language）数据操作语句，增删改</li>
<li>DQL（data query language）数据查询语句</li>
<li>DCL（data control language）数据控制语句，创建数据库用户，权限访问控制</li>
</ul>
<h2 id="sql-常用语句"><a href="#sql-常用语句" class="headerlink" title="sql 常用语句"></a>sql 常用语句</h2><ul>
<li><p>DDL</p>
<table>
<thead>
<tr>
<th>语句</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>show databases;</td>
<td>显示数据库</td>
</tr>
<tr>
<td>show create database 数据库名;</td>
<td>查看数据库信息</td>
</tr>
<tr>
<td>select databases();</td>
<td>查询当前数据库</td>
</tr>
<tr>
<td>use 数据库名;</td>
<td>选择数据库</td>
</tr>
<tr>
<td>create database [ IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集] [COLLATE 排序规则];</td>
<td>创建数据库</td>
</tr>
<tr>
<td>drop database [ IF EXISTS] 数据库名;</td>
<td>删除数据库</td>
</tr>
<tr>
<td>alter database 库名 选项信息;</td>
<td>修改库信息</td>
</tr>
<tr>
<td>show tables;</td>
<td>查看所有表</td>
</tr>
<tr>
<td>show tables from 数据库名;</td>
<td>查看所有表</td>
</tr>
<tr>
<td>show create table 表名;</td>
<td>查询指定表建表语句</td>
</tr>
<tr>
<td>desc 表名;</td>
<td>表结构</td>
</tr>
<tr>
<td>show 列 from 表名;</td>
<td>获取表的一个列</td>
</tr>
<tr>
<td>create table 表名(字段名 字段类型[COMMENT 注释],….)[COMMENT 注释];</td>
<td>创建表，最后一个字段后面没有逗号</td>
</tr>
<tr>
<td>RENAME TABLE 原表名 TO 新表名</td>
<td>对表进行重命名</td>
</tr>
<tr>
<td>RENAME TABLE 原表名 TO 库名.表名</td>
<td>可将表移动到另一个数据库</td>
</tr>
<tr>
<td>DROP TABLE[ IF EXISTS] 表名</td>
<td>删除表</td>
</tr>
<tr>
<td>TRUNCATE [TABLE] 表名</td>
<td>清空表</td>
</tr>
<tr>
<td>ALTER TABLE 表名 操作名</td>
<td>修改表信息，操作如下</td>
</tr>
<tr>
<td>操作名</td>
<td></td>
</tr>
<tr>
<td><code>ADD[ COLUMN] 字段名</code>– 增加字段;</td>
<td></td>
</tr>
<tr>
<td><code>AFTER 字段名</code>– 表示增加在该字段名后面;</td>
<td></td>
</tr>
<tr>
<td><code>FIRST</code>– 表示增加在第一个;</td>
<td></td>
</tr>
<tr>
<td><code>ADD PRIMARY KEY(字段名)</code>– 创建主键;</td>
<td></td>
</tr>
<tr>
<td><code>ADD UNIQUE [索引名] (字段名)</code>– 创建唯一索引;</td>
<td></td>
</tr>
<tr>
<td><code>ADD INDEX [索引名] (字段名)</code>– 创建普通索引;</td>
<td></td>
</tr>
<tr>
<td><code>DROP[ COLUMN] 字段名</code>– 删除字段;</td>
<td></td>
</tr>
<tr>
<td><code>MODIFY[ COLUMN] 字段名 字段属性</code>– 支持对字段属性进行修改不能修改字段名(所有原有属性也需写上);</td>
<td></td>
</tr>
<tr>
<td><code>CHANGE[ COLUMN] 原字段名 新字段名 字段属性</code>– 支持对字段名修改;</td>
<td></td>
</tr>
<tr>
<td><code>DROP PRIMARY KEY</code>– 删除主键(删除主键前需删除其 AUTO_INCREMENT 属性);</td>
<td></td>
</tr>
<tr>
<td><code>DROP INDEX 索引名</code>– 删除索引;</td>
<td></td>
</tr>
<tr>
<td><code>DROP FOREIGN KEY 外键</code> – 删除外键;</td>
<td></td>
</tr>
</tbody></table>
<p>数据类型</p>
<ul>
<li>整型<table>
<thead>
<tr>
<th>整型</th>
<th>占用字节</th>
<th>范围</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>1</td>
<td>-2^7^~2^7-1^</td>
<td>-128~127</td>
</tr>
<tr>
<td>smallint</td>
<td>2</td>
<td>-2^15^~2^15-1^</td>
<td>-32768~32767</td>
</tr>
<tr>
<td>mediumint</td>
<td>3</td>
<td>-2^23^~2^23-1^</td>
<td>-8388608~8388607</td>
</tr>
<tr>
<td>int</td>
<td>4</td>
<td>-2^31^~2^31-1^</td>
<td>-2147483648~2147483647</td>
</tr>
<tr>
<td>bigint</td>
<td>8</td>
<td>-2^63^~2^63-1^</td>
<td></td>
</tr>
<tr>
<td>一个字节=8 位</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>无符号数（unsigned）:就是没有负数，无符号数的正数的范围是有符号数正数范围的 2 倍。</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>浮点数<table>
<thead>
<tr>
<th>浮点数</th>
<th>占用字节</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>float(单精度)</td>
<td>4</td>
<td>-3.4E+38~3.4E+38</td>
</tr>
<tr>
<td>double(双精度)</td>
<td>8</td>
<td>-1.8E+308~1.8E+308</td>
</tr>
<tr>
<td>浮点数的声明：float(M,D)，double(M,D)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>M：总位数 D：小数位数</td>
<td></td>
<td></td>
</tr>
<tr>
<td>没有指定小数位数，默认小数位数是 0 位</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MySQL 浮点数支持科学计数法</td>
<td></td>
<td></td>
</tr>
<tr>
<td>浮点数的精度会丢失</td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
<li>定点数<br>语法：decimal(M,D)<br>M 的最大值是 65，D 的最大值是 30，默认是(10,0)<br>decimal 是变长的，大致每 9 个数字用 4 个字节存储，整数和小数分开存储。定点数占用的资源可能会比浮点数大很多。</li>
<li>字符型<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>char(L)</td>
<td>定长字符</td>
</tr>
<tr>
<td>varchar(L)</td>
<td>可变长度字符</td>
</tr>
<tr>
<td>tinytext</td>
<td>大段文本（大块数据） 28-1=255 个字符</td>
</tr>
<tr>
<td>text</td>
<td>大段文本（大块数据） 216-1=65535 个字符</td>
</tr>
<tr>
<td>mediumtext</td>
<td>2^24^-1</td>
</tr>
<tr>
<td>longtext</td>
<td>2^32^-1</td>
</tr>
<tr>
<td>char</td>
<td></td>
</tr>
<tr>
<td>1、 char(L)：MySQL 不回收多余的空间</td>
<td></td>
</tr>
<tr>
<td>2、 L 的最大长度是 255</td>
<td></td>
</tr>
<tr>
<td>varchar</td>
<td></td>
</tr>
<tr>
<td>1、 varchar(L):MySQL 回收多余的空间</td>
<td></td>
</tr>
<tr>
<td>2、 L 的理论最大长度是 65535，但事实上达不到，因为有的字符是多字节字符，比如一个 utf8 的字符占用 3 个字节，65535/3 大约保存 2 万多字符；如果是 gbk,一个字符占两个字节，65535/2 大约保存 3 万多个字符。</td>
<td></td>
</tr>
<tr>
<td>一个记录的所有字段（不包含大数据）的总长度不能超过 65535 个字节</td>
<td></td>
</tr>
</tbody></table>
</li>
<li>枚举（enum）<br>从集合中选择一个值作为数据（单选）,MySQL 管理枚举值是通过整型的数字来管理的，第一个值是 1，第二个值是 2，以此类推。枚举优点<br>1、 限制值<br>2、 节省空间<br>3、 运行速度快（整数比字符串运行速度快）<br>思考题：已知枚举占用 2 个字节，请问最多可以有多个枚举值。<br>答：2 个字节 16 位，可以保存 216 方个值（65536，0-65535），因为枚举值从 1 开始，所以最多可以有 65535 个枚举值</li>
<li>集合（set）<br>从集合中选择一些值作为数据（多选）,集合和枚举一样，在 MySQL 内部也是通过数字来管理的。MySQL 为每个集合元素分配一个固定的值。分配方式从前往后依次是 20,21,22，…。如果有多个选项，值是单个选项的和<br>集合是一个按位或的关系<blockquote>
<p>按位或和按位与</p>
<blockquote>
<p>按位与：所有的位都是 1 结果才是 1<br>按位或：只要有一位是 1 结果就是 1<br>思考题：一直集合占用 8 个字节，可以表示多少个选项？<br>答：8 个字节是 64 个位，可以表示 64 个选项</p>
</blockquote>
</blockquote>
</li>
<li>日期时间型<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>datetime</td>
<td>日期时间 占 8 个字节</td>
</tr>
<tr>
<td>date</td>
<td>日期 占四个字节</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>year</td>
<td>年份，占用 1 个字节</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳，占用 4 个字节</td>
</tr>
<tr>
<td>datetime (日期时间)</td>
<td></td>
</tr>
<tr>
<td>格式：年-月-日 小时:分钟:秒</td>
<td></td>
</tr>
<tr>
<td>timestamp （时间戳）</td>
<td></td>
</tr>
<tr>
<td>datetime 和 timestamp 在表现上是一样的，他们的区别在于：Datetime 从 1 到 9999，而 timestamp 从 1970 年到 2038 年（原因是 timestamp 只占用了 4 个字节），2038 年 01 月 19 日 11:14:07 秒后就超过了 4 个字节的长度。</td>
<td></td>
</tr>
<tr>
<td>year</td>
<td></td>
</tr>
<tr>
<td>因为 year 占用 1 个字节，所以只能保存 255 个年份，范围是 1901~2155</td>
<td></td>
</tr>
<tr>
<td>time</td>
<td></td>
</tr>
<tr>
<td>可以表示时间，还可以表示时间间隔，范围是-838:59:59~838:59:59，time 也支持以天的方式表示时间间隔</td>
<td></td>
</tr>
</tbody></table>
</li>
<li>boolean<br>MySQL 不支持 boolean 型，true 和 false 在数据库中对应的是 1 和 0</li>
</ul>
</li>
</ul>
<h3 id="对于字段的定义"><a href="#对于字段的定义" class="headerlink" title="对于字段的定义"></a>对于字段的定义</h3><p>字段名 数据类型 <code>[NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY] [COMMENT &#39;string&#39;]</code></p>
<h3 id="表选项"><a href="#表选项" class="headerlink" title="表选项"></a>表选项</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 字符集</span></span><br><span class="line">    CHARSET <span class="operator">=</span> charset_name</span><br><span class="line">    如果表没有设定则使用数据库字符集</span><br><span class="line"><span class="comment">-- 存储引擎</span></span><br><span class="line">    ENGINE <span class="operator">=</span> engine_name</span><br><span class="line">    表在管理数据时采用的不同的数据结构结构不同会导致处理方式、提供的特性操作等不同</span><br><span class="line">    常见的引擎InnoDB MyISAM Memory<span class="operator">/</span>Heap BDB <span class="keyword">Merge</span> Example CSV MaxDB Archive</span><br><span class="line">    不同的引擎在保存表的结构和数据时采用不同的方式</span><br><span class="line">    MyISAM表文件含义.frm表定义.MYD表数据.MYI表索引</span><br><span class="line">    InnoDB表文件含义.frm表定义表空间数据和日志文件</span><br><span class="line">    <span class="keyword">SHOW</span> ENGINES <span class="comment">-- 显示存储引擎的状态信息</span></span><br><span class="line">    <span class="keyword">SHOW</span> ENGINE 引擎名 &#123;LOGS<span class="operator">|</span>STATUS&#125; <span class="comment">-- 显示存储引擎的日志或状态信息</span></span><br><span class="line"><span class="comment">-- 数据文件目录</span></span><br><span class="line">    DATA DIRECTORY <span class="operator">=</span> <span class="string">&#x27;目录&#x27;</span></span><br><span class="line"><span class="comment">-- 索引文件目录</span></span><br><span class="line">    INDEX DIRECTORY <span class="operator">=</span> <span class="string">&#x27;目录&#x27;</span></span><br><span class="line"><span class="comment">-- 表注释</span></span><br><span class="line">    COMMENT <span class="operator">=</span> <span class="string">&#x27;string&#x27;</span></span><br><span class="line"><span class="comment">-- 分区选项</span></span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> ... (详细见手册)</span><br></pre></td></tr></table></figure>

<h3 id="列属性列约束"><a href="#列属性列约束" class="headerlink" title="列属性列约束"></a>列属性列约束</h3><ol>
<li>主键约束<ul>
<li>主键的作用 1、 保证数据完整性 2、 加快查询速度</li>
<li>能唯一标识记录的字段可以作为主键。</li>
<li>一个表只能有一个主键。</li>
<li>主键具有唯一性。</li>
<li>声明字段时用 primary key 标识。<br>也可以在字段列表之后声明，例 <code>create table tab ( id int, stu varchar(10), primary key (id));</code></li>
<li>主键字段的值不能为 null。</li>
<li>选择主键的原则 1、 最少性：尽量选择单个键做主键 2、 稳定性：尽量选择更新少的列做主键。3、 能用数字做主键的就不要用字符串</li>
<li>主键可以由多个字段共同组成。此时需要在字段列表后声明的方法。<br>例 create table tab ( id int, stu varchar(10), age int, primary key (stu, age));</li>
</ul>
</li>
<li>unique 唯一约束<ul>
<li>不能重复可以为空</li>
<li>一个表可以有多个唯一键</li>
</ul>
</li>
<li>null 约束<ul>
<li>null 不是数据类型是列的一个属性。<br>表示当前列是否可以为 null 表示什么都没有。</li>
<li>null, 允许为空。默认。</li>
<li>not null, 不允许为空。<br>例如： <code>insert into tab values (null, &#39;val&#39;);</code><br>此时表示将第一个字段的值设为 null, 取决于该字段是否允许为 null</li>
</ul>
</li>
<li>default 默认值属性<ul>
<li>当前字段的默认值。</li>
<li><code>insert into tab values (default, &#39;val&#39;);</code> – 此时表示强制使用默认值。</li>
<li><code>create table tab ( add_time timestamp default current_timestamp );</code>– 表示将当前时间的时间戳设为默认值。<code>current_date, current_time</code></li>
</ul>
</li>
<li>auto_increment 自动增长约束<ul>
<li>自动增长必须为<code>索引主键</code>或<code>unique</code></li>
<li>只能存在一个字段为自动增长。</li>
<li>默认为 1 开始自动增长。可以通过表属性<code>auto_increment = x</code> 进行设置或 <code>alter table tbl auto_increment = x;</code>，一般和 unsigned 一起使用（使用无符号整数）</li>
<li>自动增长列上的数据被删除，默认不再重复使用。</li>
<li>delete from 清空数据后编号继续增长，truncate table 清空表后编号从 1 开始增长.因为 truncate table 是删除原来的表创建一个新表。</li>
</ul>
</li>
<li>comment 注释<ul>
<li>例：<code>create table tab ( id int ) comment &#39;注释内容&#39;;</code></li>
</ul>
</li>
<li>foreign key 外键约束<ul>
<li>用于限制主表与从表数据完整性。</li>
<li><code>create table 表名(字段名 类型)[constraint] [外键名称] foreign key(外键字段名) references 主表(主表列名)</code></li>
<li><code>alter table 表名 add constraint 外键名称 foreign key (外键字段名) references 主表(主表列名);</code>将表的外键关联到主表的字段。每个外键都有一个名字可以通过 constraint 指定</li>
<li>存在外键的表称之为从表子表外键指向的表称之为主表父表。</li>
<li>作用保持数据一致性完整性主要目的是控制存储在外键表从表中的数据。</li>
<li><code>alter table 表名 drop foreign key 外键名称</code>删除外键<br>删除、更新外键行为<table>
<thead>
<tr>
<th>行为</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>no action/restrict</td>
<td>父表操作时，检查是否有对应外键，若有则不允许删除、更新</td>
</tr>
<tr>
<td>cascade</td>
<td>级联，若有，则也删除、更新外键在子表中的记录</td>
</tr>
<tr>
<td>set null</td>
<td>若有，则设置子表中该外键值为 null，外键值必须允许取 null</td>
</tr>
<tr>
<td>set default</td>
<td>若有，则设置子表中该外键值为默认值，innodb 不支持</td>
</tr>
<tr>
<td><code>create table 表名(字段名 类型)[constraint] [外键名称] foreign key(外键字段名) references 主表(主表列名) on update cascade on delete cascade</code></td>
<td></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ol>
<h3 id="MySQL-中可以对-InnoDB-引擎使用外键约束"><a href="#MySQL-中可以对-InnoDB-引擎使用外键约束" class="headerlink" title="MySQL 中可以对 InnoDB 引擎使用外键约束"></a>MySQL 中可以对 InnoDB 引擎使用外键约束</h3><p>语法：<br><code>foreign key (外键字段 references 主表名 (关联字段) [主表记录删除时的动作] [主表记录更新时的动作]</code></p>
<p>此时需要检测一个从表的外键需要约束为主表的已存在的值。外键在没有关联的情况下可以设置为 <code>null</code>，前提是该外键列没有 <code>not null</code>。</p>
<p>可以不指定主表记录更改或更新时的动作那么此时主表的操作被拒绝。</p>
<p>如果指定了 <code>on update</code> 或 <code>on delete</code> 在删除或更新时有如下几个操作可以选择</p>
<ol>
<li><p>cascade 级联操作。主表数据被更新主键值更新从表也被更新外键值更新。主表记录被删除从表相关记录也被删除。</p>
</li>
<li><p>set null 设置为 null。主表数据被更新主键值更新从表的外键被设置为 null。主表记录被删除从表相关记录外键被设置成 null。但注意要求该外键列没有 not null 属性约束。</p>
</li>
<li><p>restrict 拒绝父表删除和更新。</p>
</li>
</ol>
<p>注意外键只被 InnoDB 存储引擎所支持。其他引擎是不支持的。</p>
<h3 id="DML（增删改）"><a href="#DML（增删改）" class="headerlink" title="DML（增删改）"></a>DML（增删改）</h3><ul>
<li>增</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] 表名 [(字段列表)] <span class="keyword">VALUES</span> (值列表)[, (值列表), ...]</span><br><span class="line">        <span class="comment">-- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。</span></span><br><span class="line">        <span class="comment">-- 可同时插入多条数据记录！</span></span><br><span class="line">        <span class="comment">-- 字符串和日期数据应包含在引号中</span></span><br><span class="line">        REPLACE 与 <span class="keyword">INSERT</span> 完全一样，可互换。</span><br><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] 表名 <span class="keyword">SET</span> 字段名<span class="operator">=</span>值[, 字段名<span class="operator">=</span>值, ...]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>删</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名[ 删除条件子句]</span><br><span class="line"></span><br><span class="line">没有条件子句则会删除全部</span><br></pre></td></tr></table></figure>

<ul>
<li>改</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value1, field2<span class="operator">=</span><span class="keyword">new</span><span class="operator">-</span>value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> runoob_tbl <span class="keyword">WHERE</span> runoob_id<span class="operator">=</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><blockquote>
<p>执行顺序<code>form</code>&gt;<code>where</code>&gt;<code>group by</code>&gt;<code>having</code>&gt;<code>select</code>&gt;<code>order by</code>&gt;<code>limit</code></p>
</blockquote>
<h4 id="单表查询"><a href="#单表查询" class="headerlink" title="单表查询"></a>单表查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line">[LIMIT N][ <span class="keyword">OFFSET</span> M]</span><br><span class="line">        <span class="comment">-- 可来自多个表的多个字段</span></span><br><span class="line">        <span class="comment">-- 其他子句可以不使用</span></span><br><span class="line">        <span class="comment">-- 字段列表可以用*代替表示所有字段</span></span><br><span class="line">        你可以使用 LIMIT 属性来设定返回的记录数。</span><br><span class="line">你可以通过<span class="keyword">OFFSET</span>指定<span class="keyword">SELECT</span>语句开始查询的数据偏移量。默认情况下偏移量为<span class="number">0</span>。</span><br></pre></td></tr></table></figure>

<ul>
<li><p>去除重复记录<br><code>select distinct 字段列表 from 表名</code></p>
</li>
<li><p>设置别名 AS</p>
</li>
</ul>
<p><code>SELECT 字段1[AS 别名], 字段2[AS 别名] FROM 表名;-- AS可省略</code></p>
<ul>
<li>WHERE 子句</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">SELECT</span> field1, field2,...fieldN <span class="keyword">FROM</span> table_name1, table_name2...</span><br><span class="line">[<span class="keyword">WHERE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] condition2.....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>MySQL 的 WHERE 子句的字符串比较是不区分大小写的。 你可以使用 BINARY 关键字来设定 WHERE 子句的字符串比较是区分大小写的。<br>字符串用单引号</p>
</blockquote>
<p>条件判断：<code>列 操作符 值</code></p>
<p>操作符：<br><code>= &lt; &gt; &lt;= &gt;=  !=</code><br><code>BETWEEN...AND...</code> 在某个范围（含最小最大值）<br><code>IN(...)</code>在 in 之后的列表中的值，多选一<br><code>IS NULL</code> 是 null</p>
<p>逻辑运算符<br><code>AND</code>或<code>&amp;&amp;</code> 多个条件同时成立<br><code>OR</code>或<code>||</code> 多个条件成立一个<br><code>NOT</code>或<code>!</code> 非</p>
<p>LIKE 子句</p>
<p>LIKE 子句中使用百分号 <code>%</code>字符来表示任意个字符，类似于 <code>UNIX</code> 或<code>正则表达式中</code>的星号<code>*</code>。如果没有使用百分号 <code>%</code>, LIKE 子句与等号<code>=</code>的效果是一样的。<code>_</code>下划线匹配单个字符</p>
<p><code>mysql&gt; SELECT * from runoob_tbl WHERE runoob_author LIKE &#39;%COM&#39;;</code></p>
<ul>
<li>分组聚合<br><code>select 列,聚合函数 from 表 [where条件] group by 列 [having 分组后的过滤条件]</code></li>
</ul>
<p>聚合函数（将一列数据作为一个整体进行纵向计算）:</p>
<blockquote>
<p>null 值不参与聚合函数计算</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sum(列)-- 求和</span><br><span class="line">avg(列)--平均</span><br><span class="line">min(列)</span><br><span class="line">max(列)</span><br><span class="line">count(列|*)-- 数量</span><br></pre></td></tr></table></figure>

<p>where 与 having:<br>where 是分组前过滤，不满足 where 条件不参与分组。having 是分组后对结果进行过滤。where 不能对聚合函数进行判断，而 having 可以</p>
<p>分组后，查询字段一般为聚合函数和分组的字段，查询其他字段只会显示第一个值</p>
<ul>
<li>排序</li>
</ul>
<p><code>select 字段, from 表  order by 关键字 [asc|desc],关键词2 [asc|desc]</code></p>
<p>如果是多字段排序，当第一个字段值相同的时候，才会根据第二个字段进行排序</p>
<ul>
<li>分页（mysql)</li>
</ul>
<p><code>select * from table limit n[,m]</code><br>n：起始索引,跳过前 n 条，m：取出 m 条</p>
<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><blockquote>
<p>多表关系</p>
<blockquote>
<p>一对一(用户和用户详情)：多用于单表拆分，将用户和用户详情拆分成两个表，提升操作效率。任意一方加入外键，并设置外键为唯一<br>一对多(一个部门对于多个员工，一个员工对应一个部门)：多的一方建立外键，指向一的一方<br>多对多(一个学生对于多个课程，一个课程对应多个学生)：只能建立第三张表，包含两个外键，分别关联两方主键</p>
</blockquote>
</blockquote>
<ul>
<li><p>多表查询语法(它会让参与的表先产生笛卡尔积【如两个集合 a，b 的所有组合情况】，然后在 where 过滤，性能差)</p>
<p><code>select  字段1,字段2... from 表1,表2... [where 条件]</code></p>
</li>
</ul>
<p>as 别名<br><code>select  字段1,字段2... from 表1 as 别名,表2 as 别名... [where 条件]</code></p>
<ul>
<li>多表链接查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>  [,<span class="keyword">INNER</span>]<span class="operator">|</span>[<span class="keyword">LEFT</span><span class="operator">|</span><span class="keyword">RIGHT</span>,[<span class="keyword">OUTER</span>]] <span class="keyword">JOIN</span>  表<span class="number">2</span> <span class="keyword">ON</span> 表<span class="number">1.</span>字段 <span class="operator">=</span> 表<span class="number">2.</span>字段;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>内关联是求交集，必须双向匹配才能查出</p>
</li>
<li><p>外关联：左外连接查询 (左边表中的数据优先全部显示，不用匹配右边),右外连接查询 (右边表中的数据优先全部显示，不用匹配左边)</p>
</li>
<li><p>全连接查询(联合查询)，联合查询不会使索引失效，而 or 会</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 全连接查询：是在内连接的基础上增加 左右两边没有显示的数据</span></span><br><span class="line"><span class="comment">-- 注意: mysql并不支持全连接 full JOIN 关键字</span></span><br><span class="line"><span class="comment">-- 注意: 但是mysql 提供了 UNION 关键字.使用 UNION 可以间接实现 full JOIN 功能</span></span><br><span class="line"><span class="comment">-- 联合查询多张表的列数，类型必须保持一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">left</span> <span class="keyword">join</span> sc <span class="keyword">on</span> student.sid <span class="operator">=</span> sc.sid</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">right</span> <span class="keyword">join</span> sc <span class="keyword">on</span> student.sid <span class="operator">=</span> sc.sid;</span><br><span class="line"><span class="comment">-- 注意: UNION 和 UNION ALL 的区别:UNION 会去掉重复的数据,而 UNION ALL 则直接显示结果/</span></span><br></pre></td></tr></table></figure></li>
<li><p>自连接，必须起别名，可以内联也可以外联<br><code>select 字段 from 表1 别名1 join 表1 别名2 on 条件...</code></p>
</li>
</ol>
<ul>
<li>三表查询</li>
</ul>
<p><code>select 表1.字段,表2.字段,表3.字段 from 表1 join 表2 on 表1.关联字段 = 表2.关联字段 join 表3 on 表2.关联字段 = 表3.关联字段 where....;</code></p>
<ul>
<li>子查询（嵌套查询）<ul>
<li>标量子查询（子查询结果返回的结果为单个值）</li>
<li>列子查询（返回的一列）<br>常用操作：<code>in</code>在集合范围内多选一,<code>not in</code>不在集合范围,<code>any</code>任意一个满足即可,<code>some</code>等同 any,<code>all</code>必须全部满足</li>
<li>行子查询（返回的一行）<br>常用操作：<code>in</code>在集合范围内多选一,<code>not in</code>不在集合范围,<code>=</code>等于,<code>!=</code>不等于</li>
<li>表子查询(多行多列)<br>常用操作：<code>in</code>在集合范围内多选一,</li>
</ul>
</li>
</ul>
<h3 id="DCL-管理用户管理权限"><a href="#DCL-管理用户管理权限" class="headerlink" title="DCL 管理用户管理权限"></a>DCL 管理用户管理权限</h3><ul>
<li><p>查询用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>创建用户<br><code>create user &#39;用户名&#39;@&#39;主机名&#39; identified by &#39;密码&#39;</code><br>主机名指在哪个主机上才能登陆访问数据库，可改为<code>%</code>，即可在任何主机登陆</p>
</li>
<li><p>修改用户密码<br><code>alter user &#39;用户名&#39;@&#39;主机名&#39; identified width mysql_nativev_password by &#39;密码&#39;</code></p>
</li>
<li><p>删除用户<br><code>drop user &#39;用户名&#39;@&#39;主机名&#39;</code></p>
</li>
<li><p>权限控制<br>常用权限：</p>
<table>
<thead>
<tr>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL,ALLPRIVILEGES</td>
<td>所有权限</td>
</tr>
<tr>
<td>SELECT</td>
<td>查询</td>
</tr>
<tr>
<td>INSERT</td>
<td>插入数据</td>
</tr>
<tr>
<td>UPDATE</td>
<td>修改数据</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除数据</td>
</tr>
<tr>
<td>ALTER</td>
<td>修改表</td>
</tr>
<tr>
<td>DROP</td>
<td>删除表，数据库，视图</td>
</tr>
<tr>
<td>CREATE</td>
<td>创建表，数据库</td>
</tr>
<tr>
<td>INDEX</td>
<td>授予用户可以在表上定义索引的权限</td>
</tr>
<tr>
<td>super</td>
<td>允许执行一系列数据库管理命令</td>
</tr>
<tr>
<td>file</td>
<td>file 权限指的是对服务器主机上文件的访问，数据库用户拥有 file 权限才可以执行 select ..into outfile，load data infile…操作.</td>
</tr>
<tr>
<td>但是不要把 file, process, super 权限授予管理员以外的账号，这样存在严重的安全隐患。</td>
<td></td>
</tr>
</tbody></table>
<p>查询权限<br><code>show grants for &#39;用户名&#39;@&#39;主机名&#39;</code></p>
<p>授权<br><code>grant 权限,权限2 on 数据库.表名 to&#39;用户名&#39;@&#39;主机名&#39;</code><br>数据库名和表名可以通配符<code>*</code>代表所有</p>
<p>撤销权限<br><code>revoke 权限,权限2 on 数据库.表名 from  &#39;用户名&#39;@&#39;主机名&#39;</code></p>
</li>
</ul>
<h2 id="mysql-函数"><a href="#mysql-函数" class="headerlink" title="mysql 函数"></a>mysql 函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>concat(s1,s2…)</td>
<td>字符串拼接</td>
</tr>
<tr>
<td>lower(str)</td>
<td>转小写</td>
</tr>
<tr>
<td>upper(str)</td>
<td>转大写</td>
</tr>
<tr>
<td>trim(str)</td>
<td>去除首尾空格</td>
</tr>
<tr>
<td>substring(str,strart,len)</td>
<td>返回 start 起 len 个字符串</td>
</tr>
</tbody></table>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>ceil(x)</td>
<td>向上取整</td>
</tr>
<tr>
<td>floor(x)</td>
<td>向下取整</td>
</tr>
<tr>
<td>mod(x,y)</td>
<td>返回 x/y 的模</td>
</tr>
<tr>
<td>rand()</td>
<td>0-1 随机数</td>
</tr>
<tr>
<td>round(x,y)</td>
<td>x 的四舍五入，暴露 y 位小数</td>
</tr>
</tbody></table>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>curdate()</td>
<td>当前日期</td>
</tr>
<tr>
<td>curtime()</td>
<td>当前时间</td>
</tr>
<tr>
<td>now()</td>
<td>当前日期时间</td>
</tr>
<tr>
<td>year(date)</td>
<td>获取指定 date 的年</td>
</tr>
<tr>
<td>month(date)</td>
<td>获取指定 date 的月</td>
</tr>
<tr>
<td>day(date)</td>
<td>获取指定 date 的日</td>
</tr>
<tr>
<td>date_add(date,interval expr type)</td>
<td>返回 date 加上时间间隔 expr 后的时间值 ,type 为单位(day,month,year…)</td>
</tr>
<tr>
<td>date_sub(date,interval expr type)</td>
<td>返回 date 减去时间间隔 expr 后的时间值 ,type 为单位(day,month,year…)</td>
</tr>
<tr>
<td>datediff(date1,date2)</td>
<td>返回 date1 和 date2 之间的天数</td>
</tr>
</tbody></table>
<h3 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>if(value,t,f)</td>
<td>如果 value 为真返回 t，否则返回 f</td>
</tr>
<tr>
<td>ifnull(val1,val2)</td>
<td>如果 val1 为不为空，返回 val1，否则返回 val2</td>
</tr>
<tr>
<td>case when [val1] then [res1]when [val2] then [res2]…else [default] end</td>
<td>如果 val1 为真，返回 res1，…否则返回 default 值</td>
</tr>
<tr>
<td>case [expr] when [val1] then [res1]…else [default] end</td>
<td>如果 expr 等于 val1 ，返回 res1，…否则返回 default 值</td>
</tr>
</tbody></table>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul>
<li>原子性：事务是不可分割的最小操作单元，要么全部成功，要么去全部失败；</li>
<li>一致性：事务完成时，必须使所有的数据都保持一致状态。</li>
<li>隔离性：数据库系统提供的隔离机制，保证事务在不受外部并发操作的独立环境下运行</li>
<li>持久性：事务一旦提交或回滚，它对数据库的数据的改变是永久的</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul>
<li>查看设置事务提交方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="keyword">Set</span> @<span class="variable">@autocommit</span><span class="operator">=</span><span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>开启事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>提交事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>回滚事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><ul>
<li><p>脏读：一个事务读到另一个事务还没有提交的数据</p>
</li>
<li><p>不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同</p>
</li>
<li><p>幻读：一个事务按照条件查询数据时，没有对应的数据行，但是插入数据时，又提示该行数据已经存在。</p>
</li>
<li><p>事务隔离级别</p>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>Read uncommitted</td>
<td>出现</td>
<td>出现</td>
<td>出现</td>
</tr>
<tr>
<td>Read committed</td>
<td>不出现</td>
<td>出现</td>
<td>出现</td>
</tr>
<tr>
<td>Repeatable Read(mysql 默认)</td>
<td>不出现</td>
<td>不出现</td>
<td>出现</td>
</tr>
<tr>
<td>Serializable</td>
<td>不出现</td>
<td>不出现</td>
<td>不出现</td>
</tr>
</tbody></table>
</li>
<li><p>查看事务隔离级别</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="variable">@TRANSACTION</span>_ISOLATION;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置事务隔离级别</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [SEEESION<span class="operator">|</span><span class="keyword">GLOBAL</span>] TRANSACTION ISOLATION LEVEL&#123;READ UNCOMMITTED<span class="operator">|</span>READ COMMITTED<span class="operator">|</span>REPEATABLE READ<span class="operator">|</span>SERIALIZABLE&#125;</span><br></pre></td></tr></table></figure>

<h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><blockquote>
<p>就是存储数据、建立索引、更新查找数据等技术的实现方式。存储引擎是基于表的，而不是基于库的，所以存储引擎也可以被称为表类型</p>
</blockquote>
<ul>
<li><p>innoDB</p>
<blockquote>
<p>兼顾高可靠性和高性能的通用存储引擎，在 mysql5.5 之后为默认引擎<br>特点：DM 操作遵循 ACID 模型，支持<code>事务</code>支持<code>级锁</code>提高并发访问性能；支持<code>外键</code>，保证数据的完整性和正确性;最大 64TB，空间和内存使用高，批量插入慢，适用除读操作和插入操作外，还有大量的更新、删除操作的应用。<br>文件：xxx.idb:存储该表的表结构和数据和索引</p>
</blockquote>
</li>
<li><p>MyISAM</p>
<blockquote>
<p>早期 mysql 默认引擎<br>特点：不支持事务、外键、行锁；支持表锁，访问速度快;空间和内存使用低，批量插入快，适用于读操作和插入操作为主的应用。</p>
</blockquote>
</li>
<li><p>Memory</p>
<blockquote>
<p>表数据存在内存中，常用于临时表、缓存使用<br>特点：内存存放、hash 索引<br>文件：xxx.sdi:存储表结构信息</p>
</blockquote>
</li>
<li><p>创建表时，指定存储引擎</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(字段<span class="number">1</span> 类型 [comment 注释],...)engine<span class="operator">=</span>innoDB [comment 表注释];</span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前数据库支持的存储引擎</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> engines;</span><br></pre></td></tr></table></figure>

<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><blockquote>
<p>帮助 mysql 高效获取数据的数据结构（有序）。在数据之外，数据库还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用数据，这样就可以在这些数据结构上实现高级的查找算法，这种数据结构就是索引<br>优势：提高数据检索效率，降低数据库的 io 成本。对数据进行排序时，降低 cpu 消耗。<br>缺点：索引需要额外的磁盘空间。降低表的更新速度，效率降低。</p>
</blockquote>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><table>
<thead>
<tr>
<th>索引结构</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>B+Tree 索引</td>
<td>最常见的索引，大部分引擎都支持</td>
</tr>
<tr>
<td>Hash 索引</td>
<td>利用哈希表实现，只有精确匹配索引的查询才有效，不支持范围查找</td>
</tr>
<tr>
<td>R-tree 空间索引</td>
<td>MyISAM 引擎的一个特殊索引类型，常用于地理空间数据类型</td>
</tr>
<tr>
<td>Full-text 全文索引</td>
<td>通过建立到排索引，快速匹配文档的方式，类似 ES</td>
</tr>
</tbody></table>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><table>
<thead>
<tr>
<th>分类</th>
<th>说明</th>
<th>特点</th>
<th>关键词</th>
</tr>
</thead>
<tbody><tr>
<td>主键索引</td>
<td>针对表中的主键创建的索引</td>
<td>默认自动创建，只能有一个</td>
<td>primary</td>
</tr>
<tr>
<td>唯一索引</td>
<td>避免同一个表中数据列的值重复</td>
<td>可以多个</td>
<td>unique</td>
</tr>
<tr>
<td>常规索引</td>
<td>快速定位特定数据</td>
<td>可以多个</td>
<td></td>
</tr>
<tr>
<td>全文索引</td>
<td>全文索引查找的是文本中的关键词，而不是比较索引中的值</td>
<td>可以多个</td>
<td>fulltext</td>
</tr>
</tbody></table>
<p>innoDB 根据索引的存储类型又可以分为下面两种</p>
<ul>
<li>聚集索引 clustered Index：将数据存储和索引放到一块，索引结构的叶子节点保存了行数据（必须有，且只有一个）<ul>
<li>如果主键存在，主键索引就是聚集索引</li>
<li>若无主键，将使用第一个唯一索引作为聚集索引</li>
<li>若表既无主键也无唯一索引，innoDB 将自动生成 rowid 作为隐藏的聚集索引</li>
</ul>
</li>
<li>二级索引 Secondary Index：将数据和索引分开存储，索引结构的叶子节点关联的是对应的主键（可以存在多个）</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><ul>
<li>创建索引<br><code>create [unique|fulltext] INDEX 索引名 ON 表名(字段名,...)</code></li>
<li>查看索引<br><code>show index from 表名</code></li>
<li>删除索引<br><code>drop idnex 索引名 on 表名</code></li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li><p>最左前缀法则：如果索引了多列，查询从索引的最左列开始，并且不跳过索引中列，若跳过某一列，索引将部分失效即后面的字段索引失效</p>
</li>
<li><p>范围查询：如果索引了多列，出现范围查询（<code>&gt;</code>，<code>&lt;</code>），范围查询右侧的列索引失效。可使用<code>&gt;-</code>，<code>&lt;=</code>避免出现这种情况</p>
</li>
<li><p>索引列运算：索引列进行运算操作，索引将失效</p>
</li>
<li><p>字符串不加引号：字符串不加引号，索引将失效</p>
</li>
<li><p>模糊查询：尾部模糊匹配，索引不失效，头部模糊索引失效。</p>
</li>
<li><p>or 连接：or 前后都有索引，索引才不会失效</p>
</li>
<li><p>数据分布影响：若 mysql 评估索引查询比全表查询慢，将不会使用索引</p>
</li>
<li><p>覆盖索引：尽量使用覆盖索引（查询使用了索引，兵器需要返回的列，在该索引中已经全部能够找到），减少 select *</p>
</li>
<li><p>单列索引与联合索引：若存在多个查询条件，建议建立联合索引。使用单列索引时，mysql 会根据评估，自动选择，并不会全用上索引</p>
</li>
<li><p>sql 提示：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 use index(索引名) where...</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 ignore index(索引名) where...</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表 force index(索引名) where...</span><br></pre></td></tr></table></figure></li>
<li><p>前缀索引：字段类型为 varchar 或 text，建立的索引会变得非常大。通过截取字符串前一部分建立索引提交索引效率</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#n为截取的个数</span><br><span class="line"><span class="keyword">create</span> index 索引名 <span class="keyword">on</span> 表(列名(n));</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><ul>
<li>查看操作次数<br><code>show [global|session] status link &#39;com_______&#39;;</code>七个下划线</li>
</ul>
<h3 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h3><blockquote>
<p>记录所有执行超过指定参数（long_query_time,单位：秒，默认 10s）的所有 sql 语句日志，默认没有开启</p>
</blockquote>
<ul>
<li>查看是否开启：<code>show variables like &#39;slow_query_log&#39;;</code></li>
<li>开启：编辑/etc/my.cng</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show_query_log=1</span><br><span class="line">long_query_time=2</span><br></pre></td></tr></table></figure>

<ul>
<li>日志文件：<code>/var/lib/mysql/localhost-slow.log</code></li>
</ul>
<h3 id="profile-详情"><a href="#profile-详情" class="headerlink" title="profile 详情"></a>profile 详情</h3><blockquote>
<p>查看 sql 语句具体详情</p>
</blockquote>
<ul>
<li>查看是否支持：<code>select @@have_profiling;</code></li>
<li>启动：<code>set profiling=1;</code></li>
<li>查看：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看全部</span><br><span class="line"><span class="keyword">show</span> profiles;</span><br><span class="line">#指定id</span><br><span class="line"><span class="keyword">show</span> profile <span class="keyword">for</span> query <span class="keyword">sql</span>语句id;</span><br><span class="line">#查看cup情况</span><br><span class="line"><span class="keyword">show</span> profile cpu <span class="keyword">for</span> query <span class="keyword">sql</span>语句id;</span><br></pre></td></tr></table></figure>

<h3 id="explain-执行计划"><a href="#explain-执行计划" class="headerlink" title="explain 执行计划"></a>explain 执行计划</h3><blockquote>
<p>获取 mysql 如何执行 select 语句信息。</p>
</blockquote>
<ul>
<li>使用</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表</span><br><span class="line">或</span><br><span class="line"><span class="keyword">desc</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表</span><br></pre></td></tr></table></figure>

<ul>
<li>结果字段说明:<ul>
<li>id：操作顺序，id 相同，从上到下，否则值也大，越先执行</li>
<li>select_type：查询类型</li>
<li>type：连接类型，由好到差-&gt;null、system、cons、eq_ref、ref、range、index、all</li>
<li>prossible_key：显示可能应用在这张表上的索引</li>
<li>key：实际使用的索引</li>
<li>key_len：索引中使用的字节数，该值为最大可能长达，并非实际使用长度</li>
<li>rows：必须要执行查询的行数，是个估值</li>
<li>filterd：表示返回结果的行数占需读取行数的百分百，越大越好</li>
</ul>
</li>
</ul>
<h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><ul>
<li><p>主键顺序插入</p>
</li>
<li><p>多条插入尽可以使用批量插入<code>insert into 表 values(1,&#39;1&#39;),(2,&#39;2&#39;)</code></p>
</li>
<li><p>手动提交事务</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表 <span class="keyword">values</span>(..)</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>大批量插入数据：使用 mysql 的 load 指令进行插入操作</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql --local-infile -u root -p</span><br><span class="line"><span class="built_in">set</span> global local_infile=1;</span><br><span class="line">load data <span class="built_in">local</span> infile <span class="string">&#x27;/home/sql.log&#x27;</span> into table <span class="string">&#x27;表名&#x27;</span> fields terminated by <span class="string">&#x27;字段间的分割符&#x27;</span> lines teminated by <span class="string">&#x27;每一行的分隔符&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="主键优化"><a href="#主键优化" class="headerlink" title="主键优化"></a>主键优化</h3><ul>
<li>尽量降低主键长度–减少 b+tree 空间</li>
<li>插入数据时尽量顺序插入–避免页分裂</li>
<li>尽量不要使用 uuid 做主键–避免页分裂</li>
<li>避免对主键修改–重新构建 b+tree</li>
</ul>
<h2 id="MySQL-分页查询的-5-种方法"><a href="#MySQL-分页查询的-5-种方法" class="headerlink" title="MySQL 分页查询的 5 种方法"></a>MySQL 分页查询的 5 种方法</h2><p>方式 1：直接使用数据库提供的 SQL 语句</p>
<p>适应场景: 适用于数据量较少的情况(元组百/千级)。很简单，该语句的意思就是查询 m+n 条记录，去掉前 m 条，返回后 n 条。无疑该查询能够实现分页，但 m 越大，查询性能就越低，因为 MySQL 需要扫描全部 m+n 条记录。</p>
<p>方式 2：基于索引再排序</p>
<p><code>select \* from table order by id limit m, n;</code></p>
<p>很简单，该语句的意思就是查询 m+n 条记录，去掉前 m 条，返回后 n 条。无疑该查询能够实现分页，但 m 越大，查询性能就越低，因为 MySQL 需要扫描全部 m+n 条记录。</p>
<p>方式 2：</p>
<p><code>select \* from table where id &gt; #max_id# order by id limit n;</code></p>
<p>该查询同样会返回后 n 条记录，却无需像方式 1 扫描前 m 条记录，但必须在每次查询时拿到上一次查询（上一页）的最大 id（或最小 id），是比较常用的方式。</p>
<p>当然该查询的问题也在于我们不一定能拿到这个 id，比如当前在第 3 页，需要查询第 5 页的数据，就不行了。</p>
<p>方式 3：</p>
<p>方式 3：基于索引再排序<br>为了避免方式 2 不能实现的跨页查询，就需要结合方式 1。</p>
<p>性能需要，m 得尽量小。比如当前在第 3 页，需要查询第 5 页，每页 10 条数据，且当前第 3 页的最大 id 为#max_id#，则：</p>
<p><code>select \* from table where id &gt; #max_id# order by id limit 10, 10;</code></p>
<p>该方式就部分解决了方式 2 的问题，但如果当前在第 2 页，要查第 1000 页，性能仍然较差。</p>
<p>方式 4：</p>
<p><code>select \* from table as a inner join (select id from table order by id limit m, n) as b on a.id = b.id order by a.id;</code></p>
<p>该查询同方式 1 一样，m 的值可能很大，但由于内部的子查询只扫描了 id 字段，而非全表，所以性能要强于方式 1，并且能够解决跨页查询问题。</p>
<p>方式 5：</p>
<p><code>select \* from table where id &gt; (select id from table order by id limit m, 1) limit n;</code></p>
<p>该查询同样是通过子查询扫描字段 id，效果同方式 4。但方式 5 的性能会略好于方式 4，因为它不需要进行表的关联，而是一个简单的比较，在不知道上一页最大 id 的情况下，是比较推荐的用法。</p>
<p>方法 6: 基于索引使用 prepare,<br>语句样式: MySQL 中,可用如下方法:<br>代码如下:<br><code>PREPARE stmt*name FROM SELECT * FROM 表名称 WHERE id*pk &gt; (？* ？) ORDER BY id_pk ASC LIMIT M</code><br>（第一个问号表示 pageNum，第二个？表示每页元组数）<br>适应场景: 大数据量。<br>原因: 索引扫描,速度会很快. prepare 语句又比一般的查询语句快一点。</p>
<p>方法 7:利用 MySQL 支持 ORDER 操作可以利用索引快速定位部分元组,避免全表扫描<br>比如: 读第 1000 到 1019 行元组(pk 是主键/唯一键)。<br>代码如下:<br><code>SELECT \* FROM your_table WHERE pk&gt;=1000 ORDER BY pk ASC LIMIT 0,20</code></p>
<h2 id="插入表情"><a href="#插入表情" class="headerlink" title="插入表情"></a>插入表情</h2><ol>
<li>MySQL 的版本<br><code>utf8mb4</code> 的最低 mysql 版本支持版本为 <code>5.5.3+</code>，若不是，请升级到较新版本。</li>
<li>MySQL 驱动<br><code>5.1.34</code> 可用,最低不能低于 <code>5.1.13</code></li>
<li>修改 MySQL 配置文件<br>修改 mysql 配置文件 <code>my.cnf</code>，<code>my.cnf</code> 一般在 <code>etc/mysql/my.cnf</code> 位置。找到后请在以下三部分里添加如下内容：</li>
</ol>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="attr">default-character-set</span> = utf8mb4</span><br><span class="line"></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span> = utf8mb4</span><br><span class="line"></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-client-handshake</span> = <span class="literal">FALSE</span></span><br><span class="line"><span class="attr">character-set-server</span> = utf8mb4</span><br><span class="line"><span class="attr">collation-server</span> = utf8mb4_unicode_ci</span><br><span class="line"><span class="attr">init_connect</span>=<span class="string">&#x27;SET NAMES utf8mb4&#x27;</span></span><br></pre></td></tr></table></figure>

<p>重启 mysql:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">一、MySQL启动方式</span><br><span class="line">1、使用 service 启动：service mysqld start</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld start</span><br><span class="line">3、使用 safe_mysqld 启动：safe_mysqld&amp;</span><br><span class="line">二、MySQL停止</span><br><span class="line">1、使用 service 启动： service mysqld stop</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld stop</span><br><span class="line">3、mysqladmin shutdown</span><br><span class="line">三、MySQL重启</span><br><span class="line">1、使用 service 启动：service mysqld restart</span><br><span class="line">2、使用 mysqld 脚本启动：/etc/init.d/mysqld restart</span><br><span class="line">四、强制关闭</span><br><span class="line">以上方法都无效的时候，可以通过强行命令：“killall mysql”来关闭MySQL，但是不建议用这样的方式，</span><br><span class="line">据库服务，有可能导致表损坏……所以自己掂量着用。</span><br><span class="line">Windows下重启MySQL服务,对于没装mysql图形管理端的用户来说启动和停止mysql服务：</span><br><span class="line">…\…\bin&gt;net stop mysql</span><br><span class="line">…\…\bin&gt;net start mysql</span><br></pre></td></tr></table></figure>

<p>当数据库中涉及编码类型改变的时候，需要统一数据库，表，字段的编码类型，少一个都不行。<br>修改数据库字符集：<br><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;</code><br>修改表的字符集：<br><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code><br>修改字段的字符集：<br><code>ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code> 4. 查看是否成功修改<br>使用<code>SHOW VARIABLES WHERE Variable_name LIKE &#39;character_set_%&#39; OR Variable_name LIKE &#39;collation%&#39;;</code>查看当前编码,结果中的 <code>collation_connection</code> 、<code>collation_database</code> 、<code>collation_server</code> 是什么没关系。但必须保证系统变量 描述</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">character_set_client (客户端来源数据使用的字符集)</span><br><span class="line">character_set_connection (连接层字符集)</span><br><span class="line">character_set_database (当前选中数据库的默认字符集)</span><br><span class="line">character_set_results (查询结果字符集)</span><br><span class="line">character_set_server (默认的内部操作字符集)</span><br></pre></td></tr></table></figure>

<p>这几个变量必须是 utf8mb4,才能插入表情。<br>查看表编码<br><code>mysql&gt; show create table dictionary; # dictionary 是表名</code> 5. 数据库连接的配置<br>数据库连接参数中也要设置为 utf8bm4 格式，否则是无法插入的 <code>charset=utf8mb4</code></p>
<h2 id="数据库备份与还原"><a href="#数据库备份与还原" class="headerlink" title="数据库备份与还原"></a>数据库备份与还原</h2><ol>
<li><p>备份原文件<br>MySQL 中的每一个数据库和数据表分别对应文件系统中的目录和其下的文件。在 Linux 下数据库文件的存放目录一般为/var/lib/mysql。在 Windows 下这个目录视 MySQL 的安装路径而定。备份文件前，需要将 MySQL 服务停止，然后将数据库目录拷贝即可。恢复数据数据库时，需要先创建好一个数据库(不一定同名)，然后将备份出来的文件(注意，不是目录)复制到对应的 MySQL 数据库目录中。使用这一方法备份和恢复数据库时，需要新旧的 MySQL 版本一致，否则可能会出现错误。</p>
</li>
<li><p>使用命令</p>
</li>
</ol>
<p>备份数据库(不需要进入 mysql)：<br><code>mysqldump –user=root –password=root密码 –lock-all-tables 数据库名 &gt; 备份文件.sql</code><br>恢复数据库：<br><code>mysql -u root –password=root密码 数据库名 &lt; 备份文件.sql</code></p>
<h2 id="nodejs-连接数据库"><a href="#nodejs-连接数据库" class="headerlink" title="nodejs 连接数据库"></a>nodejs 连接数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">client does <span class="keyword">not</span> support authentication protocol requested <span class="keyword">by</span> server</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>出现连接失败的原因mysql8之前的版本中加密规则是mysql_native_password,而在mysql8之后,加密规则是caching_sha2_password。并提供了两种解决方案</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>把用户密码登录的加密规则还原成mysql_native_password这种加密方式</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span> PASSWORD EXPIRE NEVER;这里的password是你正在使用的密码</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/12/01/10-12-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/01/10-12-33/" class="post-title-link" itemprop="url">Three.js</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-01 10:12:33" itemprop="dateCreated datePublished" datetime="2021-12-01T10:12:33+08:00">2021-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Threejs"><a href="#Threejs" class="headerlink" title="Threejs"></a>Threejs</h1><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="创建一个场景"><a href="#创建一个场景" class="headerlink" title="创建一个场景"></a>创建一个场景</h3><p>场景、相机和渲染器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const scene = new THREE.Scene();</span><br><span class="line">const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );</span><br><span class="line"></span><br><span class="line">const renderer = new THREE.WebGLRenderer();</span><br><span class="line">renderer.setSize( window.innerWidth, window.innerHeight );</span><br><span class="line">document.body.appendChild( renderer.domElement );</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>相机：<br>three.js里有几种不同的相机，在这里，我们使用的是PerspectiveCamera（透视摄像机）。</li>
</ul>
<p>第一个参数是视野角度（FOV）。视野角度就是无论在什么时候，你所能在显示器上看到的场景的范围，它的单位是角度(与弧度区分开)。</p>
<p>第二个参数是长宽比（aspect ratio）。 也就是你用一个物体的宽除以它的高的值。比如说，当你在一个宽屏电视上播放老电影时，可以看到图像仿佛是被压扁的。</p>
<p>接下来的两个参数是近截面（near）和远截面（far）。 当物体某些部分比摄像机的远截面远或者比近截面近的时候，该这些部分将不会被渲染到场景中。或许现在你不用担心这个值的影响，但未来为了获得更好的渲染性能，你将可以在你的应用程序里去设置它。</p>
<ul>
<li>渲染器：<br>除了创建一个渲染器的实例之外，我们还需要在我们的应用程序里设置一个渲染器的尺寸。比如说，我们可以使用所需要的渲染区域的宽高，来让渲染器渲染出的场景填充满我们的应用程序。因此，我们可以将渲染器宽高设置为浏览器窗口宽高。对于性能比较敏感的应用程序来说，你可以使用setSize传入一个较小的值，例如window.innerWidth/2和window.innerHeight/2，这将使得应用程序在渲染时，以一半的长宽尺寸渲染场景。</li>
</ul>
<p>如果你希望保持你的应用程序的尺寸，但是以较低的分辨率来渲染，你可以在调用setSize时，将updateStyle（第三个参数）设为false。例如，假设你的<canvas> 标签现在已经具有了100%的宽和高，调用setSize(window.innerWidth/2, window.innerHeight/2, false)将使得你的应用程序以一半的分辨率来进行渲染。</p>
<h3 id="创建一个立方体"><a href="#创建一个立方体" class="headerlink" title="创建一个立方体"></a>创建一个立方体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const geometry = new THREE.BoxGeometry();</span><br><span class="line">const material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );</span><br><span class="line">const cube = new THREE.Mesh( geometry, material );</span><br><span class="line">scene.add( cube );</span><br><span class="line"></span><br><span class="line">camera.position.z = 5;</span><br></pre></td></tr></table></figure>
<p>创建一个立方体，我们需要一个BoxGeometry（立方体）对象. 这个对象包含了一个立方体中所有的顶点（vertices）和面（faces）。接下来，对于这个立方体，我们需要给它一个材质，来让它有颜色。第三步，我们需要一个Mesh（网格）。 网格包含一个几何体以及作用在此几何体上的材质，我们可以直接将网格对象放入到我们的场景中，并让它在场景中自由移动。</p>
<h3 id="渲染场景"><a href="#渲染场景" class="headerlink" title="渲染场景"></a>渲染场景</h3><p>现在，如果将之前写好的代码复制到HTML文件中，你不会在页面中看到任何东西。这是因为我们还没有对它进行真正的渲染。为此，我们需要使用一个被叫做“渲染循环”（render loop）或者“动画循环”（animate loop）的东西。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function animate() &#123;</span><br><span class="line">	requestAnimationFrame( animate );</span><br><span class="line">	renderer.render( scene, camera );</span><br><span class="line">&#125;</span><br><span class="line">animate();</span><br></pre></td></tr></table></figure>
<p>在这里我们创建了一个使渲染器能够在每次屏幕刷新时对场景进行绘制的循环（在大多数屏幕上，刷新率一般是60次/秒）。如果你是一个浏览器游戏开发的新手，你或许会说“为什么我们不直接用setInterval来实现刷新的功能呢？”当然啦，我们的确可以用setInterval，但是，requestAnimationFrame有很多的优点。最重要的一点或许就是当用户切换到其它的标签页时，它会暂停，因此不会浪费用户宝贵的处理器资源，也不会损耗电池的使用寿命。</p>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><h3 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h3><ul>
<li><p>摄像机阵列（ArrayCamera）<br>ArrayCamera 用于更加高效地使用一组已经预定义的摄像机来渲染一个场景。这将能够更好地提升VR场景的渲染性能。<br>一个 ArrayCamera 的实例中总是包含着一组子摄像机，应当为每一个子摄像机定义viewport（视口）这个属性，这一属性决定了由该子摄像机所渲染的视口区域的大小。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const cameras = [];</span><br><span class="line">     for (let i = 1; i &lt; 4; i++) &#123;</span><br><span class="line">       const subcamera = new THREE.PerspectiveCamera(40, 1, 0.1, 10);</span><br><span class="line">       subcamera.viewport = new THREE.Vector4(</span><br><span class="line">         Math.floor(i * 200),</span><br><span class="line">         Math.floor(1 * 200), //视口高</span><br><span class="line">         Math.ceil(200), //宽</span><br><span class="line">         Math.ceil(200) //视口高</span><br><span class="line">       );</span><br><span class="line">       subcamera.position.x = i / 3 - 0.5;</span><br><span class="line">       subcamera.position.y = 0.5 + i;</span><br><span class="line">       subcamera.position.z = 1.5;</span><br><span class="line">       subcamera.position.multiplyScalar(2);</span><br><span class="line">       subcamera.lookAt(0, 0, 0);</span><br><span class="line">       subcamera.updateMatrixWorld();</span><br><span class="line">       cameras.push(subcamera);</span><br><span class="line">     &#125;</span><br><span class="line">     let camera = new THREE.ArrayCamera(cameras);</span><br></pre></td></tr></table></figure></li>
<li><p>立方相机（CubeCamera）<br>创建6个渲染到WebGLCubeRenderTarget的摄像机<br>构造器<br>CubeCamera( near : Number, far : Number, renderTarget : WebGLCubeRenderTarget )<br>near – 近剪切面的距离<br>far – 远剪切面的距离<br>renderTarget – The destination cube render target.</p>
</li>
</ul>
<p>构造一个包含6个PerspectiveCameras（透视摄像机）的立方摄像机， 并将其拍摄的场景渲染到一个WebGLCubeRenderTarget上。</p>
<ul>
<li>正交相机（OrthographicCamera）<br>这一摄像机使用orthographic projection（正交投影）来进行投影。</li>
</ul>
<p>在这种投影模式下，无论物体距离相机距离远或者近，在最终渲染的图片中物体的大小都保持不变。</p>
<p>这对于渲染2D场景或者UI元素是非常有用的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const camera = new THREE.OrthographicCamera( width / - 2, width / 2, height / 2, height / - 2, 1, 1000 );</span><br><span class="line">scene.add( camera );</span><br></pre></td></tr></table></figure>
<p>构造器<br>OrthographicCamera( left : Number, right : Number, top : Number, bottom : Number, near : Number, far : Number )<br>left — 摄像机视锥体左侧面。<br>right — 摄像机视锥体右侧面。<br>top — 摄像机视锥体上侧面。<br>bottom — 摄像机视锥体下侧面。<br>near — 摄像机视锥体近端面。<br>far — 摄像机视锥体远端面。</p>
<ul>
<li>透视相机（PerspectiveCamera）<br>这一摄像机使用perspective projection（透视投影）来进行投影。</li>
</ul>
<p>这一投影模式被用来模拟人眼所看到的景象，它是3D场景的渲染中使用得最普遍的投影模式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const camera = new THREE.PerspectiveCamera( 45, width / height, 1, 1000 );</span><br><span class="line">scene.add( camera );</span><br></pre></td></tr></table></figure>
<p>构造器<br>PerspectiveCamera( fov : Number, aspect : Number, near : Number, far : Number )<br>fov — 摄像机视锥体垂直视野角度<br>aspect — 摄像机视锥体长宽比<br>near — 摄像机视锥体近端面<br>far — 摄像机视锥体远端面</p>
<ul>
<li>立体相机（StereoCamera）<br>双透视摄像机（立体相机）常被用于创建3D Anaglyph（3D立体影像） 或者Parallax Barrier（视差屏障）。</li>
</ul>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><h3 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h3><h4 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h4><p>Scene()<br>创建一个新的场景对象。</p>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ul>
<li><p>.autoUpdate : Boolean<br>默认值为true，若设置了这个值，则渲染器会检查每一帧是否需要更新场景及其中物体的矩阵。 当设为false时，你必须亲自手动维护场景中的矩阵。</p>
</li>
<li><p>.background : Object<br>若不为空，在渲染场景的时候将设置背景，且背景总是首先被渲染的。 可以设置一个用于的“clear”的Color（颜色）、一个覆盖canvas的Texture（纹理）， 或是 a cubemap as a CubeTexture or an equirectangular as a Texture。默认值为null。<br><code>scene.background = new THREE.Color( 0xbfe3dd );</code></p>
</li>
<li><p>.environment : Texture<br>若该值不为null，则该纹理贴图将会被设为场景中所有物理材质的环境贴图。 然而，该属性不能够覆盖已存在的、已分配给 MeshStandardMaterial.envMap 的贴图。默认为null。<br><code>scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.04 ).texture;</code></p>
</li>
<li><p>.overrideMaterial : Material<br>如果不为空，它将强制场景中的每个物体使用这里的材质来渲染。默认值为null。</p>
</li>
<li><p>.fog : Fog<br>一个fog实例定义了影响场景中的每个物体的雾的类型。默认值为null。<br><code>scene.fog=new THREE.FogExp2( 0xefd1b5, 0.0025 );</code></p>
</li>
</ul>
<h3 id="雾（Fog）"><a href="#雾（Fog）" class="headerlink" title="雾（Fog）"></a>雾（Fog）</h3><p>这个类中的参数定义了线性雾。也就是说，雾的密度是随着距离线性增大的。</p>
<h4 id="构造器-1"><a href="#构造器-1" class="headerlink" title="构造器"></a>构造器</h4><p>Fog( color : Integer, near : Float, far : Float )<br>颜色参数传入Color构造函数中，来设置颜色属性。颜色可以是一个十六进制的整型数，或者是CSS风格的字符串。</p>
<h4 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h4><ul>
<li><p>.name : String<br>对象的名称，可选、不必唯一。默认值是一个空字符串。</p>
</li>
<li><p>.color : Color<br>雾的颜色。比如说，如果将其设置为黑色，远处的物体将被渲染成黑色。</p>
</li>
<li><p>.near : Float<br>开始应用雾的最小距离。距离小于活动摄像机“near”个单位的物体将不会被雾所影响。<br>默认值是1。</p>
</li>
<li><p>.far : Float<br>结束计算、应用雾的最大距离，距离大于活动摄像机“far”个单位的物体将不会被雾所影响。<br>默认值是1000。</p>
</li>
</ul>
<h3 id="雾-指数（FogExp2）"><a href="#雾-指数（FogExp2）" class="headerlink" title="雾-指数（FogExp2）"></a>雾-指数（FogExp2）</h3><p>该类所包含的参数定义了指数雾，它可以在相机附近提供清晰的视野，且距离相机越远，雾的浓度随着指数增长越快。</p>
<h4 id="构造器-2"><a href="#构造器-2" class="headerlink" title="构造器"></a>构造器</h4><p>FogExp2( color : Integer, density : Float )<br>颜色参数传入Color构造函数中，来设置颜色属性。颜色可以是一个十六进制的整型数，或者是CSS风格的字符串。</p>
<h4 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h4><ul>
<li><p>.name : String<br>对象的名称，可选、不必唯一。默认值是一个空字符串。</p>
</li>
<li><p>.color : Color<br>雾的颜色。比如说，如果将其设置为黑色，远处的物体将被渲染成黑色。</p>
</li>
<li><p>.density : Float<br>定义雾的密度将会增长多块。<br>默认值是0.00025.</p>
</li>
</ul>
<h2 id="全屏"><a href="#全屏" class="headerlink" title="全屏"></a>全屏</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&#x27;dblclick&#x27;,()=&gt;&#123;</span><br><span class="line"></span><br><span class="line">  let isFull=document.fullscreenElement;</span><br><span class="line">  if(!isFull)&#123;</span><br><span class="line">    renderer.domElement.requestFullscreen(); </span><br><span class="line">  &#125;else&#123;</span><br><span class="line"></span><br><span class="line">    document.exitFullscreen(); </span><br><span class="line">  &#125;else&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="自适应屏幕"><a href="#自适应屏幕" class="headerlink" title="自适应屏幕"></a>自适应屏幕</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&#x27;resize&#x27;,()=&gt;&#123;</span><br><span class="line">  //更新摄像头</span><br><span class="line">  camera.aspect=window.innerWidth/window.innerHeight</span><br><span class="line">  //更新摄像机投影矩阵</span><br><span class="line">  camera.updateProjectionMatrix();</span><br><span class="line">  //更新渲染器</span><br><span class="line">  renderer.setSize(window.innerWidth,window.innerHeight)</span><br><span class="line">  //设置渲染器的像素比</span><br><span class="line">  renderer.setPixelRatio(window.devicePixelRatio)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/11/12/22-23-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/12/22-23-33/" class="post-title-link" itemprop="url">echart</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-12 22:23:33" itemprop="dateCreated datePublished" datetime="2021-11-12T22:23:33+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="echart"><a href="#echart" class="headerlink" title="echart"></a>echart</h1><ol>
<li>echarts的图表是画在canvas上的， 可以通过grid设置来调整图表与canvas的间距：grid:{ x:50, y:50,x2:50,  y2:60,}</li>
<li>通过回调函数判断是否是第一个数据（params.dataIndex 的值）来决定是否显示相应的内容：formatter:(n)=&gt;{return n.dataIndex}</li>
<li>echarts3.0已支持多标题的设置</li>
<li>Echarts设置tooltip层级z-index<br>tooltip有一个extraCssText属性。所以可以设置该属性来修改它的样式：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tooltip:&#123;extraCssText:&#x27;z-index:2&#x27;&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/11/12/22-23-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/12/22-23-33/" class="post-title-link" itemprop="url">wifiDog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-12 22:23:33" itemprop="dateCreated datePublished" datetime="2021-11-12T22:23:33+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="wifiDog"><a href="#wifiDog" class="headerlink" title="wifiDog"></a>wifiDog</h1><p>首先简介一下什么是Portal认证。Portal认证。通常也会叫Web认证。未认证用户上网时，设备强制用户登录到特定站点，用户能够免费訪问当中的服务。当用户须要使用互联网中的其他信息时，必须在门户站点进行认证。仅仅有认证通过后才干够使用互联网资源。</p>
<p>现金非常多中国移动CMCC、中国联通、中国电信ChinaNet的WIFI都使用这样的认证接入方式。</p>
<p>在OpenWRT上实现Portal认证，实际上早已有解决方式：</p>
<ol>
<li>chillispot，但原维护作者停止更新。被chillispot.info接管继续开发；</li>
</ol>
<p>2.coova-chilli，它是基于chillispot开发拓展的，功能最为强大；能够去官方看一下Coova-chilli；</p>
<p>3.wifidog</p>
<p>前两个因为原维护作者停止更新。笔者也没有深入研究，重点钻研了wifidog，Wifidog也是OpenWRT和DD-WRT中实现Portal比較出名的。</p>
<p>可是。Wifidog仅仅是实现AP认证网关，须要配合外部的Portalserver才干使用。Portal主要是提供认证所需的WEB页面且实现认证计费等的功能。尽管这也有非常多商用解决方式，比如wiwiz、wifiap等，可是这些商业解决方式的目标都是盈利。即使能够免费使用。免费账号的功能和权限都受到了非常大的限制，比如不能自己定义页面。Web认证页面有广告等等。有条件的人可能打算自己搭建Portalserver。可是看看Wifidog的官方Wiki。对搭建过程实在是难以理解。后来，笔者发现网络上另一个authpuppy方案，官方站点<a target="_blank" rel="noopener" href="http://www.authpuppy.org.是一个已实现好的wifidog认证server,里面包括各种插件供你使用,官方的安装过程也非常easy,假设你懂的html和面向对象编程的相关知识且拥有一个server,能够自行改动认证页面.使用authpuppy也是一个不错的方案./">www.authpuppy.org。是一个已实现好的Wifidog认证server，里面包括各种插件供你使用，官方的安装过程也非常easy，假设你懂的HTML和面向对象编程的相关知识且拥有一个server，能够自行改动认证页面。使用authpuppy也是一个不错的方案。</a></p>
<p>可是。即便如此，这些方案还是不够灵活，经过笔者认真钻研。查阅大量资料并经过多次抓包分析，最终理解了Wifidog的工作原理。</p>
<p>接下来笔者将会跟你介绍怎样自行编写一个轻量级的Web Portal认证server。当然。这须要你具有程序设计基础，HTML、CSS当然是少不得的。后端开发语言能够使用PHP或Python或Java等。</p>
<p>首先，须要简介一下Wifidog的工作原理：</p>
<p>1.client发出初始化请求，比方訪问 <a target="_blank" rel="noopener" href="http://www.baidu.com./">www.baidu.com。</a></p>
<p>2.网关的防火墙规则将这个请求重定向到本地网关的port上。这个port是Wifidog监听的port。</p>
<p>3.Wfidog提供一个HTTP重定向回复，重定向到Web认证页面。重定向的Url的Querystring中包括了Gateway的ID，Gateway的FQDN以及其它的信息。</p>
<p>4.用户向认证server发出认证请求</p>
<p><a href="http://portal_server:port/login_script">http://portal_server:port/login_script</a>?</p>
<p>gw_id=[GatewayID, default: “default”]</p>
<p>gw_address=[GatewayAddress, internal IP of router]</p>
<p>gw_port=[GatewayPort, port that wifidog Gateway is listening on]</p>
<p>url=[user requested url]；</p>
<p>5.网关返回一个（能够是自己定义的）splash（也称作“登录”）页面。</p>
<p>6.用户提供他的凭据信息，比方username和password。</p>
<p>7.成功认证的话，client将会被重定向到网关的自己的web页面上，而且带有一个认证凭据（一个一次性的token），内容比方：</p>
<p><a href="http://GatewayIP:GatewayPort/wifidog/auth?token=[auth">http://GatewayIP:GatewayPort/wifidog/auth?token=[auth</a> token]；</p>
<p>8.用户就是用获取到的凭据訪问网关。</p>
<p>9.网关去认证server询问token的有效性。</p>
<p>10.认证server确认token的有效性。</p>
<p>11.网关发送重定向给client。以从认证服务器上获取 成功提示页面，重定向到 <a href="http://portal_server:port/portal_script">http://portal_server:port/portal_script</a> 这个位置。</p>
<p>12.认证server通知客户请求成功，能够上网了。</p>
<p>图解:</p>
<p>图解Wifidog工作原理</p>
<p>然后考察一下Wifidog的配置文件/etc/wifidog.conf，关键的配置项是：</p>
<p>AuthServer {</p>
<p>Hostname             (Mandatory; Default: NONE)</p>
<p>SSLAvailable           (Optional; Default: no; Possible values: yes, no)</p>
<p>SSLPort               (Optional; Default: 443)</p>
<p>HTTPPort             (Optional; Default: 80)</p>
<p>Path                  (Optional; Default: /wifidog/ Note:  The path must be both prefixed and suffixed by /.  Use a single / for server root.)</p>
<p>LoginScriptPathFragment  (Optional; Default: login/?</p>
<p>Note:  This is the script the user will be sent to for login.)</p>
<p>PortalScriptPathFragment (Optional; Default: portal/? Note:  This is the script the user will be sent to after a successfull login.)</p>
<p>MsgScriptPathFragment    (Optional; Default: gw_message.php? Note:  This is the script the user will be sent to upon error to read a readable message.)</p>
<p>PingScriptPathFragment    (Optional; Default: ping/?</p>
<p>Note:  This is the script the user will be sent to upon error to read a readable message.)</p>
<p>AuthScriptPathFragment    (Optional; Default: auth/?</p>
<p>Note:  This is the script the user will be sent to upon error to read a readable message.)</p>
<p>}</p>
<h1 id="Listen-on-this-port"><a href="#Listen-on-this-port" class="headerlink" title="Listen on this port"></a>Listen on this port</h1><p>GatewayPort 2060</p>
<h1 id="Parameter-CheckInterval"><a href="#Parameter-CheckInterval" class="headerlink" title="Parameter: CheckInterval"></a>Parameter: CheckInterval</h1><h1 id="Default-60"><a href="#Default-60" class="headerlink" title="Default: 60"></a>Default: 60</h1><h1 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="How-many-seconds-should-we-wait-between-timeout-checks-This-is-also"><a href="#How-many-seconds-should-we-wait-between-timeout-checks-This-is-also" class="headerlink" title="How many seconds should we wait between timeout checks.  This is also"></a>How many seconds should we wait between timeout checks.  This is also</h1><h1 id="how-often-the-gateway-will-ping-the-auth-server-and-how-often-it-will"><a href="#how-often-the-gateway-will-ping-the-auth-server-and-how-often-it-will" class="headerlink" title="how often the gateway will ping the auth server and how often it will"></a>how often the gateway will ping the auth server and how often it will</h1><h1 id="update-the-traffic-counters-on-the-auth-server-Setting-this-too-low"><a href="#update-the-traffic-counters-on-the-auth-server-Setting-this-too-low" class="headerlink" title="update the traffic counters on the auth server.  Setting this too low"></a>update the traffic counters on the auth server.  Setting this too low</h1><h1 id="wastes-bandwidth-setting-this-too-high-will-cause-the-gateway-to-take"><a href="#wastes-bandwidth-setting-this-too-high-will-cause-the-gateway-to-take" class="headerlink" title="wastes bandwidth, setting this too high will cause the gateway to take"></a>wastes bandwidth, setting this too high will cause the gateway to take</h1><h1 id="a-long-time-to-switch-to-it’s-backup-auth-server-s"><a href="#a-long-time-to-switch-to-it’s-backup-auth-server-s" class="headerlink" title="a long time to switch to it’s backup auth server(s)."></a>a long time to switch to it’s backup auth server(s).</h1><p>CheckInterval 60</p>
<h1 id="Parameter-ClientTimeout"><a href="#Parameter-ClientTimeout" class="headerlink" title="Parameter: ClientTimeout"></a>Parameter: ClientTimeout</h1><h1 id="Default-5"><a href="#Default-5" class="headerlink" title="Default: 5"></a>Default: 5</h1><h1 id="Optional-1"><a href="#Optional-1" class="headerlink" title="Optional"></a>Optional</h1><h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1><h1 id="Set-this-to-the-desired-of-number-of-CheckInterval-of-inactivity-before-a-client-is-logged-out"><a href="#Set-this-to-the-desired-of-number-of-CheckInterval-of-inactivity-before-a-client-is-logged-out" class="headerlink" title="Set this to the desired of number of CheckInterval of inactivity before a client is logged out"></a>Set this to the desired of number of CheckInterval of inactivity before a client is logged out</h1><h1 id="The-timeout-will-be-INTERVAL-TIMEOUT"><a href="#The-timeout-will-be-INTERVAL-TIMEOUT" class="headerlink" title="The timeout will be INTERVAL * TIMEOUT"></a>The timeout will be INTERVAL * TIMEOUT</h1><p>ClientTimeout 5</p>
<p>AuthServer是Portalserver的配置项。GatewayPort是Wifidog监听的地址。默认是2060。一般保持默认就可以；CheckInterval是心跳时长。单位是秒。什么是心跳呢，client认证成功之后，假设有网络訪问动作，Wifidog getway就会每隔一段时间訪问Portalserver的一个脚本。用于认证计费。当然。假设客户使用超时或超流量，也能够通过心跳强制client下线。ClientTimeout是用户一次认证成功后的网络訪问时长，超过这个时间须要又一次认证，这个时长并不是由ClientTimeout单独决定。取决于INTERVAL * TIMEOUT。</p>
<p>具体的配置信息能够訪问：<a target="_blank" rel="noopener" href="http://dev.wifidog.org/browser/trunk/wifidog/wifidog.conf%E3%80%82">http://dev.wifidog.org/browser/trunk/wifidog/wifidog.conf。</a></p>
<p>我们重点讨论Portalserver的配置项，Hostname是Portalserver的ip或者是域名。SSLAvailable和SSLPort是SSL加密配置，假设你的Portalserver有配置HTTPS加密，则须要配置这两项。Path是指你的脚本路径(举例。<a target="_blank" rel="noopener" href="http://a.com/to/%EF%BC%8C%E5%88%99a.com%E6%98%AF%E5%9F%9F%E5%90%8D%E3%80%82/to/%E6%98%AF%E8%B7%AF%E5%BE%84)%EF%BC%8C%E6%B3%A8%E6%84%8F%E8%B7%AF%E5%BE%84%E5%BF%85%E9%A1%BB%E4%BB%A5%E2%80%9C/%E2%80%9D%E5%BC%80%E5%A4%B4%E5%92%8C%E7%BB%93%E5%B0%BE%EF%BC%8C%E5%81%87%E8%AE%BE%E6%98%AF%E6%A0%B9%E8%B7%AF%E5%BE%84%E3%80%82%E5%88%99%E5%A1%AB%E4%B8%80%E4%B8%AA%E2%80%9C/%E2%80%9D%E5%B0%B1%E5%8F%AF%E4%BB%A5%EF%BC%9B%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9A%845%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%8C%87%E6%98%8E%E4%BD%A0%E7%9A%84%E8%84%9A%E6%9C%AC%E5%90%8D%EF%BC%8C%E8%BF%99%E8%AF%B4%E6%98%8E%E4%BA%86%E6%88%91%E4%BB%AC%E9%A1%BB%E8%A6%81%E5%86%99%E4%BA%94%E4%B8%AA%E8%84%9A%E6%9C%AC%EF%BC%8C%E6%88%91%E4%BC%9A%E5%85%B7%E4%BD%93%E8%AF%B4%E6%98%8E%E3%80%82">http://a.com/to/，则a.com是域名。/to/是路径)，注意路径必须以“/”开头和结尾，假设是根路径。则填一个“/”就可以；接下来的5个配置指明你的脚本名，这说明了我们须要写五个脚本，我会具体说明。</a></p>
<p>(下面文中涉及的“第几步”均是指Wifidog认证过程的步骤)</p>
<p>LoginScriptPathFragment配置项配置的是登陆脚本，它通过GET方式接受传入參数gw_address、gw_port、gw_id、mac和url。gw_address是AP Getway的ip地址；gw_port是Wifidog监听的端口。即上面介绍的wifidog.conf中的GatewayPort配置；gw_id是AP Getway的id。配置文件wifidog.conf中能够配置，默认值是default，这个值的作用是当存在多个AP是，server或管理员能够依据不同的id确定用户的接入点；mac是客户计算机的网卡物理地址。注意不是AP网关的mac。这个mac是用来识别客户计算机的；url是客户初始訪问的Url。这些Querystring都是AP Getway向client发出重定向请求自己主动生成的。</p>
<p>这个脚本同一时候须要提供登陆页面，假设登陆成功，须要向客户。端返回302重定向，重定向到：<a href="http://gw_address:gw_port/wifidog/auth">http://gw_address:gw_port/wifidog/auth</a>?</p>
<p>token=[token]；即实现第7步。当中[token]是你自己自己主动生成的token字符串，随机生成一个字符串就可以，可是长度最好长些，安全性更高，另外，token须要依据不同用户保存，最好保存于数据库中，之后的AP Getway询问token有效性(第9步)还须要用到。这里最好使用cookie或session，使之后的登陆成功页面能够推断用户已经成功，阻止未登录成功的人訪问认证成功页面。</p>
<p>PortalScriptPathFragment配置项配置的是登陆成功后server展示的脚本(第11步)，它通过GET方式接受1个传入參数，gw_id。这个脚本比較简单。告知用户登陆成功就可以，当然，最好重定向到用户之前想要方位的url。即第1步用户输入的URL。</p>
<p>MsgScriptPathFragment配置项配置的是错误信息展示脚本，它通过GET方式接受一个传入參数message，这个脚本也非常easy，展示message的内容就可以。目的是当认证过程出现错误，AP Getway会重定向到这个脚本，URL中含有错误的信息。</p>
<p>PingScriptPathFragment配置项配置的是心跳脚本。这个脚本它通过GET方式接受5个传入參数，gw_id，sys.uptime，sys.memfree，sys.load，wifidog.uptime，当中，sys.uptime指的是AP Getway的启动时间。sys.memfree指的是AP Getway的空暇内存，sys.load指的是AP Getway的CPU负载。wifidog.uptime指的是wifidog的启动时间，这个脚本每隔一段时间(Wifidog.conf里配置的CheckInterval)，Wifidog会自己主动訪问，可是其目的不是用户验证，而是帮助管理员管理AP节点，了解AP节点的负载情况，适时添加节点等，Wifidog訪问这个脚本时，须要这个脚本返回Pong。假设你没有统计AP节点负载数据的需求，能够丢弃这些数据。直接回应Pong，注意，这个回应仅仅包括“Pong”字符串。无需包括其它html标签。</p>
<p>AuthScriptPathFragment是用户认证脚本。实现的是第10步的功能。这个脚本它通过GET方式接受7个传入參数：stage、ip、mac、token、incoming、outcoming和gw_id。当中stage的值是login，ip是client的ip，注意不是AP Getwap的ip；mac是client的网卡物理地址。token就是你在认证脚本生成并返回给client的。incoming和outcoming用于流量控制，默认值为0；gw_id同上。</p>
<p>怎样识别用户登录成功，通过mac和token吧，LoginScriptPathFragment登陆脚本在用户登陆成功后须要记录用户的mac和token。然后在此处验证，假设匹配。回复Auth: 1，否则。回复Auth: 0。</p>
<p>另外，这个脚本也是心跳脚本。每隔一段时间Wifidog会自己主动訪问，假设用户使用时间超过限制或流量超过额度。server能够及时回应Auth: 0结束用户的訪问。</p>
<p>另外须要注意的是。回应相同无需包括html标签，另外，在Auth后的冒号和0/1之间，有一个空格，缺少这个空格也会导致出错。</p>
<p>在配置Wifidog的配置文件wifidog.conf是。配置脚本的配置项都必须以“?</p>
<p>”结尾，否则以GET方式传递的QueryString会因Url缺少问号訪问错误的脚本。</p>
<p>看到了吧。只5个简单脚本。就能够实现利用Wifidog的Portal认证，当然。这过中还能够有非常多应用尚未发掘，比方流量控制、带宽控制、结合Radiusserver实现认证等。你的开发也能够更上一层楼。实现很多其它功能。只是笔者另一个建议。在登录页面除了username和password意外，最好加个验证码，防止不怀好意之人暴力破解。</p>
<p>这样，你仅仅须要一个免费的空间，甚至是简单的百度云、新浪SAE等。就能够实现一个认证server。有的人可能还会问，能不能把这些脚本集成到路由器其中，我的回答是能，仅仅要你的脚本的功能不多。问题应该不大，可是这么做的风险比較大，路由的负载比較高，导致路由的执行会非常不稳定，甚至常常死机，这也是笔者亲身实践的结果，所以笔者不建议这么做。</p>
<p>最后啰嗦提醒的是，WiFidog是使用iptables基于三层协议工作的，所以使用Wifidog的结果是。不仅是Wifi接入须要Portal认证，有线接入相同须要认证。</p>
<p>避免这样的情况最简单的做法是设立mac白名单。可能有的人又会问。能不能做到仅是Wifi接入须要认证，有线接入的无需认证。有的人可能想更上一层楼，能不能开两个Wifi，仅当中一个Wifi须要认证，还有一个Wifi和有线网络不须要Portal认证，我的回答是能。至于详细做法，以后再介绍。</p>
<hr>
<ol>
<li><p>在这个配置文件里面第一格不能是空格，否则就会出错。</p>
</li>
<li><p>GatewayAddress  192.168.1.1 //路由器地址</p>
</li>
<li><p>GatewayID 123456789 //与服务器authpuppy中对应</p>
</li>
<li><p>ExternalInterface eth0.2  //外网接口，这个是wan口，连接到Internet的接口</p>
</li>
<li><p>GatewayInterface  br-lan  //内网接口，这个是lan口，连接到局域网的接口</p>
</li>
<li><p>AuthServer {                        //认证服务器配置项                             </p>
</li>
</ol>
<p>Hostname xx.xx.xx.xx //认证服务器IP地址或者名                                                 </p>
<p>SSLAvailable no //认证服务器有HTTPS加密则配置该项，此处无</p>
<p>SSLPort //认证服务器有HTTPS加密则配置该项，此处无</p>
<p>Path /authpuppy/web/        (认证路径)</p>
<p>/<strong><strong><strong><strong><strong><strong><strong><strong>此处为wifidog认证服务器的五个脚本文件，用于认证</strong></strong></strong></strong></strong></strong></strong></strong>****/</p>
<p>LoginScriptPathFragment //登录展示的脚本，以get的方式传入gw_address、gw_port、gw_id、mac、url(AP的IP地址，wifidog监听端口，AP的ID，客户端mac地址，客户初始访问的url)</p>
<p>PortalScriptPathFragment //客户端登陆成功后展示的脚本，之传入gw_id一个参数，用于告知用户登陆成功</p>
<p>MsgScriptPathFragment //错误信息展示脚本，通过get方式传入一个参数message，用于展示认证中出现错误的页面</p>
<p>PingScriptPathFragment //心跳脚本，通过get方式传入5个参数，gw_id，sys.uptime，sys.memfree，sys.load，wifidog.uptime；wifidog每隔一段时间访问一次这个脚本(时间间隔由CheckInterval决定)。注意，此脚本需要返回“Pong”字符串</p>
<p>AuthScriptPathFragment //用户认证脚本，通过get的方式接受7各参数，stage,ip,mac,token,incoming,outcoming和gw_id；stage的值为login,ip为客户端IP，mac为客户端的mac地址，                  }还有这个Path，一开始我是设置成  /   根目录，结果不行，出现了这个问题：HTTP Response from Server: [HTTP/1.1 404 Not Found后来设置成这个目录才可以。还有一点要注意的是Path的目录两边都要加/，不然也会出错。</p>
<ol start="7">
<li><p>GatewayPort 2060 //wifidog的监听地址，通常保持默认</p>
</li>
<li><p>CheckInterval 60 //心跳时长，单位是秒，</p>
</li>
</ol>
<p>心跳：客户端认证成功，如果有网络访问动作，Wifidog getway就会每隔一段时间访问Portal服务器的一个脚本，用于认证计费，当然，如果客户使用超时或超流量，也可以通过心跳强制客户端下线</p>
<ol start="9">
<li>ClientTimeout 5 //ClientTimeout是用户一次认证成功后的网络访问时长，超过这个时间需要重新认证</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/11/12/20-23-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/12/20-23-33/" class="post-title-link" itemprop="url">element UI</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-12 20:23:33" itemprop="dateCreated datePublished" datetime="2021-11-12T20:23:33+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="element-UI"><a href="#element-UI" class="headerlink" title="element UI"></a>element UI</h1><h2 id="element的表单校验输入框有值但校验未通过："><a href="#element的表单校验输入框有值但校验未通过：" class="headerlink" title="element的表单校验输入框有值但校验未通过："></a>element的表单校验输入框有值但校验未通过：</h2><ul>
<li><p><code>:model=&quot;ruleForm&quot;</code> 绑定的<code>ruleForm</code>值是否挂载成功并且操作的是否是这个表单。</p>
</li>
<li><p><code>:rules=&quot;rules&quot;</code> 校验的规则格式绑定的<code>rules</code>是否定义并且格式正确为对象数组。</p>
</li>
<li><p><code>el-form-item中的</code>prop=”name”<code>是否和rules中的</code>name: [ { required: true, message: ‘请输入活动名称’, trigger: ‘blur’ }, ], <code>的名称一致，两个</code>name`相同的，element的校验就是根据这个prop找对应的输入框的。</p>
</li>
<li><p><code>&lt;el-input v-model=&quot;ruleForm.name&quot;&gt;&lt;/el-input&gt;</code> 的<code>v-model=&quot;ruleForm.name&quot;</code>确保对象<code>ruleForm</code>中有<code>name</code>这个属性！</p>
</li>
</ul>
<h2 id="el-table格式化el-table-column内容："><a href="#el-table格式化el-table-column内容：" class="headerlink" title="el-table格式化el-table-column内容："></a>el-table格式化el-table-column内容：</h2><ul>
<li>v-if判断<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;span v-if=&quot;scope.row.xxxx == 0&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
<li>使用formatter属性<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column prop=&quot;xxx&quot;   :formatter=&quot;function(row, column)&#123;xxxx&#125;&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ElementUI的el-table-默认内容不换行，让el-table-column根据占位符-n换行："><a href="#ElementUI的el-table-默认内容不换行，让el-table-column根据占位符-n换行：" class="headerlink" title="ElementUI的el-table 默认内容不换行，让el-table-column根据占位符\n换行："></a>ElementUI的el-table 默认内容不换行，让el-table-column根据占位符\n换行：</h2></li>
</ul>
<p>添加css样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.el-table &gt;&gt;&gt;.cell &#123;</span><br><span class="line">    white-space: pre-line;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="点击时获取列表的值，可通过给节点添加data自定义属性，通过点击事件e-currentTarget-dataset获取属性值"><a href="#点击时获取列表的值，可通过给节点添加data自定义属性，通过点击事件e-currentTarget-dataset获取属性值" class="headerlink" title="点击时获取列表的值，可通过给节点添加data自定义属性，通过点击事件e.currentTarget.dataset获取属性值"></a>点击时获取列表的值，可通过给节点添加data自定义属性，通过点击事件e.currentTarget.dataset获取属性值</h2><h2 id="element获取table表格行数据，可通过template设置slot-scope-“scope”属性，在传参时使用scope-row-xxxx拿到当前行的数据"><a href="#element获取table表格行数据，可通过template设置slot-scope-“scope”属性，在传参时使用scope-row-xxxx拿到当前行的数据" class="headerlink" title="element获取table表格行数据，可通过template设置slot-scope=“scope”属性，在传参时使用scope.row.xxxx拿到当前行的数据"></a>element获取table表格行数据，可通过template设置slot-scope=“scope”属性，在传参时使用scope.row.xxxx拿到当前行的数据</h2><h2 id="当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加-submit-native-prevent来解决"><a href="#当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加-submit-native-prevent来解决" class="headerlink" title="当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加@submit.native.prevent来解决"></a>当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加@submit.native.prevent来解决</h2><h2 id="element-el-input的autofocus失效问题解决"><a href="#element-el-input的autofocus失效问题解决" class="headerlink" title="element el-input的autofocus失效问题解决"></a>element el-input的autofocus失效问题解决</h2><blockquote>
<p>autofocus是input的原生属性,饿了么组件也支持这种方法, 但是input外面还有其他组件, 导致autofocus失效, 只能手动调用focus方法:组件上绑定ref，手动调用focus()</p>
</blockquote>
<h2 id="elementUI选择器select获取选中对象"><a href="#elementUI选择器select获取选中对象" class="headerlink" title="elementUI选择器select获取选中对象"></a>elementUI选择器select获取选中对象</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">有些情况下需要获取选中对象的全部数据，添加 value-key=&quot;id&quot; ，value-key 为唯一性标识, 将 value 绑定为item</span><br><span class="line">&lt;el-select v-model=&quot;area&quot; value-key=&quot;id&quot; placeholder=&quot;请选择区域&quot;&gt;</span><br><span class="line">    &lt;el-option v-for=&quot;item in areaLsit&quot; :key=&quot;item.id&quot; :label=&quot;item.areaName&quot; :value=&quot;item&quot;&gt;</span><br><span class="line">    &lt;/el-option&gt;</span><br><span class="line">&lt;/el-select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="vue-css-gt-gt-gt-deep-穿透，深度查询样式在chrome89-edge新版本中无效问题"><a href="#vue-css-gt-gt-gt-deep-穿透，深度查询样式在chrome89-edge新版本中无效问题" class="headerlink" title="vue css &gt;&gt;&gt; /deep/穿透，深度查询样式在chrome89 edge新版本中无效问题"></a>vue css &gt;&gt;&gt; /deep/穿透，深度查询样式在chrome89 edge新版本中无效问题</h2><p>大概理解应该是<code>/deep/</code>基本上无效了，直接替换成“”空格，或者<code>&gt;&gt;&gt;</code>代替处理；</p>
<p>于是，在项目中全局替换<code>/deep/</code>为空格，但是部分页面会有错乱问题，于是将替换为空格后，仍然无效的样式部分，添加<code>&gt;&gt;&gt;</code>,居然可以了，但是对于Sass Less之类的预处理器是无法正确解析 <code>&gt;&gt;&gt;</code>的，所以要保证样式是css文件；</p>
<p>还有一点要强调，<code>&gt;&gt;&gt;</code>在html单页面下貌似无效，在vue项目中有效；</p>
<p>项目问题基本解决后，做一下汇总的情况下，上网查看关于样式穿透，发现除了<code>&gt;&gt;&gt;</code>、<code>/deep/</code>外，还有一个<code>::v-deep</code>，写法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">/用法1/</span><br><span class="line">.a&#123;</span><br><span class="line">::v-deep .b &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line">/用法2/</span><br><span class="line">.a ::v-deep .b &#123;&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/11/12/20-21-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/12/20-21-33/" class="post-title-link" itemprop="url">subline text 编辑器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-12 20:21:33" itemprop="dateCreated datePublished" datetime="2021-11-12T20:21:33+08:00">2021-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index"><span itemprop="name">tool</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="subline-text-编辑器使用"><a href="#subline-text-编辑器使用" class="headerlink" title="subline text 编辑器使用"></a>subline text 编辑器使用</h1><h2 id="安装package-control"><a href="#安装package-control" class="headerlink" title="安装package control"></a>安装package control</h2><ol>
<li>首先打开编辑器，然后找到顶部菜单的<code>Tools</code>菜单</li>
<li>然后选择<code>Tools</code>菜单下面的<code>Command Paletter</code>选项</li>
<li>在打开的命令行模式输入框中输入<code>pac</code>,然后回车安装</li>
<li>稍等片刻以后,软件会提示信息,安装完了重新启动软件</li>
<li>重启以后,在菜单栏的<code>preferences</code>菜单下你会看到<code>Package Settings</code>和<code>Package Control</code>两个选项，以后会用到他们</li>
</ol>
<h2 id="设置为中文"><a href="#设置为中文" class="headerlink" title="设置为中文"></a>设置为中文</h2><ol>
<li>点击Package Control选项</li>
<li>选择installPackage</li>
<li>搜索ChineseLocalizations</li>
<li>点击安装</li>
</ol>
<h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h2><ol>
<li>将鼠标移至右下角的按钮区、点击</li>
<li>在弹出的菜单中找到当前文件类型</li>
<li>如果你想每次打开页面都出现语法高亮，可以将鼠标移至顶部“open all with current extension as…”，在弹出选项中选择“html”（按照你常用的文件类型设置），即可再下次打开文件后就出现高亮显示</li>
</ol>
<h2 id="设置自动保存"><a href="#设置自动保存" class="headerlink" title="设置自动保存"></a>设置自动保存</h2><ol>
<li>点击<code>Preferences</code>里的设置-用户</li>
<li><code>ctrl+f</code>找到<code>save_on_focus_lost</code>，把后面的<code>false</code>改成<code>true</code>就好</li>
</ol>
<h2 id="设置vim模式"><a href="#设置vim模式" class="headerlink" title="设置vim模式"></a>设置vim模式</h2><ol>
<li>点击<code>Preferences</code>里的设置-用户</li>
<li>编辑<code>Preferences.sublime-settings--User</code>文件</li>
<li>设置中的ignored_packages对应的列表中去掉Vintage这一项,没有ignored_packages这项就添加</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;ignored_packages&quot;:</span><br><span class="line">[</span><br><span class="line">//&quot;Vintage&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h2 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h2><ol>
<li><p><code>Shift+Alt</code>+<code>1,2,3,4,5</code></p>
</li>
<li><p>文件克隆,拖放到另一个窗口上</p>
</li>
</ol>
<p>##关闭更新</p>
<p><code>Preferencens</code>设置用户, 添加<code>&quot;update_check&quot;: false</code></p>
<h2 id="关闭缩略图"><a href="#关闭缩略图" class="headerlink" title="关闭缩略图"></a>关闭缩略图</h2><p>关闭这个缩略图,需要到菜单视图里面设置，首先点击菜单栏<code>view</code>——<code>hideMiniMap</code></p>
<h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><p>按键绑定-用户-&gt;打开后在最后面添加</p>
<p><code>&#123; &quot;keys&quot;: [&quot;ctrl+shift+q&quot;], &quot;command&quot;: &quot;reindent&quot;&#125;,</code></p>
<h2 id="sublime-中用正则-去除空行、html注释和js注释"><a href="#sublime-中用正则-去除空行、html注释和js注释" class="headerlink" title="sublime 中用正则 去除空行、html注释和js注释"></a>sublime 中用正则 去除空行、html注释和js注释</h2><ol>
<li>去除空行</li>
</ol>
<p><code>CTRL+H</code>打开<code>replace</code>功能，勾选上左侧的<code>regular expression</code>，并填写 </p>
<p><code>find what</code>栏 : <code>\s+$</code>  （正则表达式）<br><code>replace with</code>栏 : （这行留空） </p>
<p>接着点<code>replace all</code>即可</p>
<ol start="2">
<li>去除html注释</li>
</ol>
<p><code>CTRL+H</code>打开<code>replace</code>功能，勾选上左侧的<code>regular expression</code>，并填写 </p>
<p><code>find what</code>栏 :<code> &lt;!--[\s\S]*?--&gt;</code>  （正则表达式）<br><code>replace with</code>栏 : （这行留空） </p>
<p>接着点<code>replace all</code>即可</p>
<ol start="3">
<li>去除js注释</li>
</ol>
<p><code>CTRL+H</code>打开<code>replace</code>功能，勾选上左侧的<code>regular expression</code>，并填写 </p>
<p><code>find what</code>栏 : <code>/\*[\s\S]*?/ </code> （正则表达式）<br><code>replace with</code>栏 : （这行留空） </p>
<p>接着点<code>replace all</code>即可</p>
<h2 id="解决文件名方格乱码"><a href="#解决文件名方格乱码" class="headerlink" title="解决文件名方格乱码"></a>解决文件名方格乱码</h2><p>可以在Sublime的user-settings中，覆盖默认的dpi，让Sublime以一个较小的文字显示</p>
<ol>
<li><p>点击Preferences –&gt; Settings–User</p>
</li>
<li><p>在最后一行加上”dpi_scale”: 1.0 （注意：在加上最后一段的时候，前面的字段要加上逗号“，”这是Sublime自己的命名规范）</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/08/22/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/22/20-22-11/" class="post-title-link" itemprop="url">VScode</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-22 20:22:11" itemprop="dateCreated datePublished" datetime="2021-08-22T20:22:11+08:00">2021-08-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tool/" itemprop="url" rel="index"><span itemprop="name">tool</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h1><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><ul>
<li><p>VScode 关闭右侧预览功能：在设置中搜索”editor.minimap.enabled”把勾去掉</p>
</li>
<li><p>修改 vscode 配置文件改字体大小：打开 VSCode 安装目录下的如下文件 VSCode\resources\app\out\vs\workbench\workbench.desktop.main.css 查找 .part&gt;.content 修改字体大小即可</p>
</li>
<li><p>自动保存：</p>
</li>
</ul>
<p>打开 vscode 窗口，单击左下角的设置(齿轮状)图标<br>在设定按钮显示的菜单中，选择【Settings】选项。 这里是整个 vs 代码的设置入口<br>打开【settings】画面时，默认的【Auto Save】=【off】表示不自动保存，每次都需要用户自己手动保存<br>【后延迟】<br>1 )这是以一定的间隔自动保存的<br>2 )该【自动保存】选项需要指定间隔时间，以匹配下一个【自动保存延迟】配置项目，单位为毫秒<br>【onFocusChange】<br>1 )当焦点偏离编辑器当前窗口时自动保存<br>2 )即，即使在编辑器内部切换标签，也会触发自动保存<br>3 )本项目不需要【自动保存延迟】的设定值，此值也会被忽略<br>【onWindowChange】<br>1 )编辑器窗口失去焦点时，自动保存<br>2 )只有在焦点偏离整个编辑器时才会触发保存，在编辑器内部切换标签时不会自动保存<br>3 )本项目不需要【自动保存延迟】的设定值，此值也会被忽略<br>在【Settings】画面中修正值后，不点击追加保存按钮，自动保存设定的内容。</p>
<h2 id="vscode-好用的插件系列"><a href="#vscode-好用的插件系列" class="headerlink" title="vscode 好用的插件系列"></a>vscode 好用的插件系列</h2><ul>
<li>汉化插件： <code>Chinese (Simplified)</code></li>
<li>VIM:<code>Vim</code></li>
<li>git 相关插件：<code>gitLens</code>、<code>Git History</code>、<code>Git History Diff</code></li>
<li>格式化类插件： <code>Prettier - Code formatter</code>、<code>Vetur</code>、</li>
<li>规范检查：<code>ESLint</code>、<code>Stylelint</code>、<code>TSLint（已废弃）</code></li>
<li>标签自动化三剑客:<code>Auto Rename Tag</code>、<code>Auto Close Tag</code>、<code>Auto Import</code></li>
<li>css:<code>CSS Modules</code></li>
<li>代码片段：<code>ES7+ React/Redux/React-Native snippets</code>、<code>HTML CSS Support</code>、<code>JavaScript (ES6) code snippets</code></li>
<li>Markdown 预览：<code>Markdown Preview Enhanced</code>、<code>Markdown All in One</code>、<code>markdownlint</code></li>
<li>单词拼写：<code>Code Spell Checker</code></li>
<li>log 打印:<code>Turbo Console Log</code></li>
<li>浏览器打开：<code>open in browser</code></li>
<li>主题：<code>GitHub Theme</code></li>
<li>图片预览：<code>Image Preview</code></li>
<li>快速生成注释：<code>koroFileHeader</code></li>
<li>路径提示： <code>Path Intellisense</code>、</li>
<li>npm 模块导入智能提示： <code>npm Intellisense</code></li>
<li>接口请求：<code>REST Client</code></li>
<li>SSH：<code>Remote-SSH</code>、<code>Visual Studio Code Remote - SSH: Editing Configuration Files</code>、<code>Remote Explorer</code></li>
<li>错误显示：<code>Error Lens</code></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/06/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/12/20-11-33/" class="post-title-link" itemprop="url">NodeJs</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-06-12T20:11:33+08:00">2021-06-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NodeJs"><a href="#NodeJs" class="headerlink" title="NodeJs"></a>NodeJs</h1><h2 id="Node-js-模块化开发"><a href="#Node-js-模块化开发" class="headerlink" title="Node.js 模块化开发"></a>Node.js 模块化开发</h2><p>Node.js 规定一个 Javascript 文件就是一个模块，模块内部定义的变量和函数默认情况下外部无法得到。<br>模块内部可以使用 exports 对象进行成员导出，使用 require 方法导入其他模块。</p>
<h3 id="模块成员导出"><a href="#模块成员导出" class="headerlink" title="模块成员导出"></a>模块成员导出</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="comment">//在模块中定义变量</span></span><br><span class="line"><span class="keyword">let</span> version = <span class="number">1.0</span>;</span><br><span class="line"><span class="comment">//模块中定义方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sayHi</span> = (<span class="params">name</span>) =&gt; <span class="string">`hello！<span class="subst">$&#123;name&#125;</span>`</span>; <span class="comment">//es6新语法</span></span><br><span class="line"><span class="comment">//向模块外部导出数据</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">version</span> = version;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">sayHi</span> = sayHi;</span><br></pre></td></tr></table></figure>

<h3 id="模块成员的导入"><a href="#模块成员的导入" class="headerlink" title="模块成员的导入"></a>模块成员的导入</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="comment">//在b.js模块中导入模块a</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">require</span>(<span class="string">&quot;./b.js&quot;</span>);</span><br><span class="line"><span class="comment">//输出b模块中的version变量</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">version</span>);</span><br><span class="line"><span class="comment">//调用b模块中的sayHi方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">sayHi</span>(<span class="string">&quot;XiaoMing&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>模块成员导出的另一种方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">version</span> = version;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">sayHi</span> = sayHi;</span><br></pre></td></tr></table></figure>

<p>exports 是 module.exports 的别名，导出对象最终以 module.exports 为准；</p>
<h2 id="package-json-文件的作用"><a href="#package-json-文件的作用" class="headerlink" title="package.json 文件的作用"></a>package.json 文件的作用</h2><p>项目描述文件，记录了当前项目信息。如：项目版本、作者、依赖的模块等等；使用<code>npm init -y</code>生成。其作用为（一）锁定包的版本，确保再次下载时不会因为包版本不同而产生问题。（二）加快下载速度，其记录着依赖的下载地址。</p>
<ul>
<li>开发依赖</li>
</ul>
<p>在项目开发阶段所需要的依赖，线上运营阶段不需要依赖的第三方包,称为开发依赖；可使用<code>npm install 包名 --save-dev</code>将包添加到 package.json 文件的 devDependencies 字段中</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.9.1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Node-js-中模块的加载机制"><a href="#Node-js-中模块的加载机制" class="headerlink" title="Node.js 中模块的加载机制"></a>Node.js 中模块的加载机制</h2><p>模块查找规则</p>
<ul>
<li>当模块有路径没后缀时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require(&#x27;./find.js);</span><br><span class="line">require(&#x27;./find&#x27;);</span><br></pre></td></tr></table></figure>

<ol>
<li>require 方法根据路径查找模块</li>
<li>如果模块后缀省略，则先找同名 JS 文件再找同名 JS 文件夹</li>
<li>如果找到同名文件夹，则继续寻找其中的 index.js 文件</li>
<li>如果没有 index.js 文件，就会去当前文件夹中的 package.js 文件中查找 main 选项中的入口文件</li>
<li>如果入口文件不存在或没有指定入口文件，则报错：模块未找到</li>
</ol>
<ul>
<li>当模块即没路径也没后缀时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&quot;find&quot;);</span><br></pre></td></tr></table></figure>

<ol>
<li>Node.js 会假设它是系统模块，会去 node_modules 文件中寻找</li>
<li>先查看是否有同名 js 文件</li>
<li>在看有没有同名文件夹</li>
<li>若有，则继续寻找其中的 index.js 文件</li>
<li>如没有，则查看该文件夹中的 package.json 中的 main 选项确定模块的入口文件</li>
<li>若都没有，则报错</li>
</ol>
<h2 id="系统模块-Node-运行环境提供的-API"><a href="#系统模块-Node-运行环境提供的-API" class="headerlink" title="系统模块:Node 运行环境提供的 API"></a>系统模块:Node 运行环境提供的 API</h2><h3 id="fs-文件操作"><a href="#fs-文件操作" class="headerlink" title="fs 文件操作"></a>fs 文件操作</h3><p><code>const fs=require(&#39;fs&#39;);</code></p>
<p>读取文件内容:<code>fs.readFile(&#39;文件路径/文件名&#39;[,&#39;文件编码&#39;],callback);</code>(括号内为可选项)</p>
<p>实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取上一级css目录下的base.css</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&quot;../css/base.css&quot;</span>, <span class="string">&quot;utf-8&quot;</span>, <span class="function">(<span class="params">err, doc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//如果读取错误参数err的值为错误对象，否则err的值为null</span></span><br><span class="line">  <span class="comment">//doc参数为文件内容</span></span><br><span class="line">  <span class="keyword">if</span> (err == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">//控制台中输出文件内容</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(doc);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>写入文件内容：`fs.writeFile(‘文件路径/文件名称’,’数据’,callback);</p>
<p>实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> conetent = <span class="string">&quot;&lt;h3&gt;!!!!!!!!!!&lt;/h3&gt;&quot;</span>;</span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&quot;../index.html&quot;</span>, content, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;文件写入成功&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">stat</span>(file, <span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;&#125;) <span class="comment">//查询文件状态（data.isFile()–判断是否是文件，isDirectory()–判断是否是文件夹）</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(fileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">// 创建文件夹 （fileName–文件夹名称，重复会报错，例如：’./test‘），注意：此方法不能连续创建文件夹，例如：/test/one/two</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(fileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">//读取文件夹，返回文件夹的所有直系子文件名称，移动文件位置等</span></span><br><span class="line">fs.<span class="title function_">rename</span>(newFileName,oldFileName,<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)<span class="comment">//修改文件夹、文件的名称</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 创建文件 （file—应路径下的文件,包括文件名，例如：’./test/test.txt‘ ，如文件已存在，会覆盖原文件内容）</span></span><br><span class="line">fs.<span class="title function_">appendFile</span>(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 追加文件内容，会在文件内容末尾追加（若文件不存在，回先自动创建，类似于writeFile）</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(file,’utf-<span class="number">8</span>‘，(err,data)=&gt;&#123;&#125;)<span class="comment">// 读取文件内容，不设置格式，会返回Buffer数据，需要设置格式，例如utf-8，或者通过data.toString()进行转化</span></span><br><span class="line">fs.<span class="title function_">unlink</span>(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;)<span class="comment">// 删除文件</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(file,<span class="function"><span class="params">err</span>=&gt;</span> &#123;&#125;) <span class="comment">//删除文件夹，若文件夹下有文件，会报错，只能删除空文件夹</span></span><br><span class="line"><span class="comment">//注：若要连续创建文件夹，可以下载mkdirp模块包，mkdirp(&#x27;./one/two/three&#x27;) 既可以创建连续目录。（目前测试不支持创建文件，写入内容，npm地址:https://www.npmjs.com/package/mkdirp）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="fs-流操作"><a href="#fs-流操作" class="headerlink" title="fs 流操作"></a>fs 流操作</h3><ul>
<li>写入流 createWriteStream</li>
<li>读取流 createReadStream</li>
<li>管道流 pipe</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">writeStr</span>: <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 需要先创建流</span></span><br><span class="line">  <span class="keyword">const</span> writeStream = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line">  writeStream.<span class="title function_">write</span>(str); <span class="comment">// str为写入内容</span></span><br><span class="line">  writeStream.<span class="title function_">end</span>(); <span class="comment">// 此句必须写，不然无法触发下面的finish事件</span></span><br><span class="line">  writeStream.<span class="title function_">on</span>(<span class="string">&quot;finish&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;写入完成&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------------------------------------/-------/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> readStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(readStream);</span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  str += data;</span><br><span class="line">  count++;</span><br><span class="line">&#125;);</span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str, <span class="string">&quot;str----&quot;</span>, count);</span><br><span class="line">&#125;);</span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&quot;err&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err, <span class="string">&quot;err----&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------------------------------------------------------/-------/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> readStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;./test.txt&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> writeStream = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;./one.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 将读取的test文件内容，写入到one，one如有内容，会被覆盖</span></span><br><span class="line">readStream.<span class="title function_">pipe</span>(writeStream);</span><br></pre></td></tr></table></figure>

<h3 id="路径拼接"><a href="#路径拼接" class="headerlink" title="路径拼接"></a>路径拼接</h3><p><code>path.join(&#39;路径&#39;,&#39;路径&#39;,..);</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入path模块</span></span><br><span class="line"><span class="keyword">const</span> path=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//路径拼接</span></span><br><span class="line"><span class="keyword">let</span> finialPath=path.<span class="title function_">join</span>(<span class="string">&#x27;itcast&#x27;</span>,<span class="string">&#x27;a,&#x27;</span>css<span class="string">&#x27;,&#x27;</span>test.<span class="property">css</span><span class="string">&#x27;);</span></span><br><span class="line"><span class="string">//输出</span></span><br><span class="line"><span class="string">console.log(finialPath);</span></span><br><span class="line"><span class="string">//用__dirname获取当前文件的绝对路径</span></span><br><span class="line"><span class="string">const fs=require(&#x27;</span>fs<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">fs.readFile(path.join(__dirname,&#x27;</span>test.<span class="property">css</span><span class="string">&#x27;),&#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;,(err,doc)=&gt;&#123;</span></span><br><span class="line"><span class="string">console.log(err);</span></span><br><span class="line"><span class="string">console.log(doc);</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure>

<h2 id="第三方模块"><a href="#第三方模块" class="headerlink" title="第三方模块"></a>第三方模块</h2><p>npm(node package manager):node 的第三方模块管理工具</p>
<ul>
<li>下载：<code>npm install 模块名</code></li>
<li>卸载：<code>npm uninstall package 模块名</code></li>
</ul>
<p>全局安装和本地安装：一般命令行工具全局安装，库文件本地安装</p>
<h3 id="第三方模块-mine"><a href="#第三方模块-mine" class="headerlink" title="第三方模块 mine"></a>第三方模块 mine</h3><p>其中 mine.getType(路径);可根据路径返回请求的文件类型;可用于 res.writeHead(200,{‘content-type’:’text/css;charset=utf8’})</p>
<h3 id="第三方模块-art-template-模板引擎"><a href="#第三方模块-art-template-模板引擎" class="headerlink" title="第三方模块 art-template 模板引擎"></a>第三方模块 art-template 模板引擎</h3><ol>
<li><p>下载：<code>npm install art-template</code></p>
</li>
<li><p>引入：<code>const template = require(&#39;art-template&#39;);</code></p>
</li>
<li><p>告诉模板引擎要拼接的数据和模板地址:<code>const html=template(&#39;模板数据&#39;,数据);</code></p>
</li>
</ol>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入模块</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>);</span><br><span class="line"><span class="comment">//拼接</span></span><br><span class="line"><span class="keyword">const</span> html=<span class="title function_">template</span>(<span class="string">&#x27;./index.art&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;xioaming&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>: <span class="number">29</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.art</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;data.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;data.age&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>模板语法</p>
<ul>
<li><p>数据输出<br>标准语法：<code>&#123;&#123;数据&#125;&#125;</code><br>原始语法：<code>&lt;%=数据%&gt;</code></p>
</li>
<li><p>原文输出：数据中带有 HTML 标签，默认情况下模板引擎不会解析标签,会转义后输出,若要解析则<br>标准语法：<code>&#123;&#123;@数据&#125;&#125;</code><br>原始语法：<code>&lt;%-数据%&gt;</code></p>
</li>
<li><p>条件判断<br>标准语法：<code>&#123;&#123;if 条件&#125;&#125;....&#123;&#123;else if 条件&#125;&#125;....&#123;&#123;/if&#125;&#125;</code><br>原始语法：<code>&lt;%if (条件) &#123;%>....<%&#125; else if(条件) &#123;%>....<%&#125;  %&gt;</code></p>
</li>
<li><p>循环<br>标准语法：<code>&#123;&#123;each 数据&#125;&#125; &#123;&#123;$index&#125;&#125; &#123;&#123;$value&#125;&#125;  &#123;&#123;/each&#125;&#125;</code><br>原始语法：<code>&lt;% for() &#123;%> ....<%&#125; %&gt;</code></p>
</li>
</ul>
</li>
<li><p>子模板</p>
</li>
</ul>
<p>将网站的公共区域（头部、页脚）抽离到单独文件中<br>标准语法：<code>&#123;include &#39;模板路径/footer.art&#39;&#125;</code><br>原始语法：<code>&lt;%include(&#39;模板路径&#39;)%&gt;</code></p>
<ul>
<li>模板继承</li>
</ul>
<p>将网站 HTML 骨架抽离到单独文件中，其他页面模板可以继承</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">!&lt;DOCTYPE HTML&gt;</span><br><span class="line">  &lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">      &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">      &lt;title&gt;骨架模板&lt;/title&gt;</span><br><span class="line">      &#123;&#123;block &#x27;head&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">      &#123;&#123;block &#x27;content&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">      &lt;!--预留位置--&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">  &lt;/html&gt;&lt;/DOCTYPE</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>模板继承</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;extend <span class="string">&#x27;./test.art&#x27;</span>&#125;&#125;</span><br><span class="line">&#123;&#123;block <span class="string">&#x27;head&#x27;</span>&#125;&#125; &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;test.css&quot;</span>&gt; &#123;&#123;/block&#125;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>模板配置</p>
<ol>
<li>向模板中导入变量<code>template.default.imports.变量名=变量值(第三方模板的方法);</code> 在模板 test.art 中使用<code>&#123;&#123;dateFormat(time,'yyyy-mm-dd')&#125;&#125;</code></li>
<li>设置模板根目录<code>template.defaults.root=模板目录</code></li>
<li>设置模板默认后缀<code>template.defaults.extname=&#39;.art&#39;</code></li>
</ol>
</li>
</ul>
<h3 id="第三方模块-router"><a href="#第三方模块-router" class="headerlink" title="第三方模块 router"></a>第三方模块 router</h3><p>功能：实现路由<br>使用步骤：获取路由对象；调用路由对象提供的方法创建路由；启用路由；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getRouter = <span class="built_in">require</span>(<span class="string">&quot;router&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">getRounter</span>();</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&quot;hello world!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">router</span>(req, res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-serve-static"><a href="#第三方模块-serve-static" class="headerlink" title="第三方模块 serve-static"></a>第三方模块 serve-static</h3><p>功能：静态资源访问服务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> serverStatic = <span class="built_in">require</span>(<span class="string">&quot;serve-static&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> serve = <span class="title function_">serverStatic</span>(<span class="string">&quot;./pulic&quot;</span>);</span><br><span class="line">serve.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">serve</span>(req, res);</span><br><span class="line">&#125;);</span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-Express-框架"><a href="#第三方模块-Express-框架" class="headerlink" title="第三方模块 Express 框架"></a>第三方模块 Express 框架</h3><p>基于 node 平台的 web 应用开发框架，可使用<code>npm install express</code>下载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用框架</span></span><br><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建网站服务器</span></span><br><span class="line"><span class="keyword">const</span> app=<span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//当客户端以get方式访问/时</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req.res</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//获取get参数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>);</span><br><span class="line"><span class="comment">//响应:sen方法会自动设置http状态码，响应头部,类型</span></span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;hello!!!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//当客户端以post方式访问/add时</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/add&#x27;</span>,<span class="function">(<span class="params">req.res</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//获取post参数：需要第三方模块body-parser</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>);</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;hello!!!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server is runningn ...&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>第三方模块 body-parser</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&quot;body-parser&quot;</span>);</span><br><span class="line"><span class="comment">//配置body-parser模块</span></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extender</span>: <span class="literal">false</span> &#125;));</span><br><span class="line"><span class="comment">//接收请求</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/add&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>构建模块化路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="comment">//创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> home = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="comment">//将路由和请求路径进行匹配</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/home&quot;</span>, home);</span><br><span class="line"><span class="comment">//在home路由下继续创建路由</span></span><br><span class="line">home.<span class="title function_">get</span>(<span class="string">&quot;/index&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 响应/home/index</span></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>参数路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务端</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/find/:id&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>); <span class="comment">//&#123;id:124&#125;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="attr">localhost</span>: <span class="number">3000</span> / find / <span class="number">124</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>中间件:将客户端发来的请求进行拦截处理</li>
</ul>
<p>如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;请求地址&quot;</span>, <span class="string">&quot;处理函数&quot;</span>);</span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;请求地址&quot;</span>, <span class="string">&quot;处理函数&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>针对一个请求可设置多个中间件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//next方法：该中间件处理后会将请求的控制权交给下一个中间件</span></span><br><span class="line">  req.<span class="property">name</span> = <span class="string">&quot;xiaoming&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">name</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>app.use 中间件用法</li>
</ul>
<p>会匹配所有的请求方法,直接传入请求处理函数代表接收所有请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">url</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>用于错误处理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;程序发生未知错误&#x27;</span>); <span class="comment">//易出现错误的地方</span></span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">send</span>(err.<span class="property">message</span>); <span class="comment">//只能用于处理同步代码错误</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//异步代码错误需要手动触发错误</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index&#x27;</span>,<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./test.c&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(err)&#123;</span><br><span class="line"> <span class="title function_">next</span>(err); <span class="comment">//易出现错误的地方</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;&#125;);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err,req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line"> res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">send</span>(err.<span class="property">message</span>); <span class="comment">//只能用于处理同步代码错误</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>静态资源的处理</li>
</ul>
<p>通过 express 内置的 express.static 托管静态文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&quot;./pulic&quot;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>express 模板引擎</li>
</ul>
<p>在原 art-template 模板引擎的基础上进行封装:<code>npm install art-template express-art-template</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当渲染后缀为art的模板时，使用express-art-template</span></span><br><span class="line">app.<span class="title function_">engine</span>(<span class="string">&quot;art&quot;</span>, <span class="built_in">require</span>(<span class="string">&quot;express-art-template&quot;</span>));</span><br><span class="line"><span class="comment">//设置模板存放目录</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&quot;views&quot;</span>, path.<span class="title function_">jon</span>(__dirname, <span class="string">&quot;views&quot;</span>));</span><br><span class="line"><span class="comment">//渲染模板时不写后缀，默认拼接art后缀</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&quot;view engine&quot;</span>, <span class="string">&quot;art&quot;</span>);</span><br><span class="line"><span class="comment">//渲染模板</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&quot;index&quot;</span>, &#123; <span class="attr">mes</span>: <span class="string">&quot;模板数据&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>将变量设置到 app.locals 对象下，则所有的模板都可以获取到</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="property">locals</span>.<span class="property">users</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//users是自定义的</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xiaomei&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="第三方模块-Gulp"><a href="#第三方模块-Gulp" class="headerlink" title="第三方模块 Gulp"></a>第三方模块 Gulp</h3><p>功能：项目上线，HTML、CSS、JS 文件压缩合并，语法转换（es6、less）</p>
<p>使用：</p>
<ul>
<li>使用<code>npm install gulp</code>下载 gulp 库文件</li>
<li>在项目根目录下建立 gulpfile.js 文件</li>
<li>重构项目的文件夹结构 src 目录放置源代码文件，dist 目录放置构建后文件</li>
<li>在 gulpfile.js 文件中编写任务</li>
<li>在命令行工具中执行 gulp 任务</li>
</ul>
<p>gulp 提供的方法：</p>
<ul>
<li>gulp.src():获取任务要处理的文件</li>
<li>gulp.dest():输出文件</li>
<li>gulp.task():建立 gulp 任务</li>
<li>gulp.watch():监控文件的变化</li>
</ul>
<p>gulp 插件：</p>
<ul>
<li>gulp-htmlminn: html 文件压缩</li>
<li>gulp-csso: css 文件压缩</li>
<li>gulp-babel: javascript 语法转化</li>
<li>gulp-less: less 语法转化</li>
<li>gulp-uglify: 压缩混淆 JavaScript</li>
<li>gulp-file-include:公共文件包含</li>
<li>browsersync:浏览器实时同步</li>
</ul>
<h2 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h2><p>超文本传输协议。规定了客户端（浏览器）与服务器（网站服务器）之间请求和应答的标准</p>
<ul>
<li>静态资源：服务器不需要处理，可以直接响应给客户端的资源，如：css，JavaScript，image 文件</li>
<li>动态资源：相同的请求地址，不同的响应资源</li>
</ul>
<h3 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h3><p>在 HTTP 请求和响应的过程中传递的数据块叫做报文</p>
<ul>
<li><p>请求报文</p>
<ol>
<li>请求方式：GET、POST</li>
<li>请求地址</li>
<li>请求参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  req.<span class="property">headers</span>; <span class="comment">//请求报文</span></span><br><span class="line">  req.<span class="property">url</span>; <span class="comment">//请求地址</span></span><br><span class="line">  req.<span class="property">method</span>; <span class="comment">//请求方法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li><p>响应报文</p>
<ol>
<li>HTTP 状态码： 200(请求成功)、400(客户端请求语法有误)、404(请求的资源未找到)、500(服务器错误)、</li>
<li>内容类型：<ul>
<li>text/html</li>
<li>text/css</li>
<li>application/javascript</li>
<li>image/jpeg</li>
<li>application/json</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>指客户端请求地址,如：<code>http://localhost:8080/index</code>与服务端程序代码的对应关系，即请求什么响应什么；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//获取客户端的请求路径</span></span><br><span class="line">  <span class="keyword">let</span> &#123; pathname &#125; = url.<span class="title function_">parse</span>(req.<span class="property">url</span>);</span><br><span class="line">  <span class="comment">//或写成</span></span><br><span class="line">  <span class="comment">//let pathname=url.parse(req.url).pathname;</span></span><br><span class="line">  <span class="keyword">if</span> (pathname == <span class="string">&quot;/&quot;</span> || pathname == <span class="string">&quot;/index&quot;</span>) &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&quot;欢迎来到首页&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&quot;页面不存在&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="创建-web-服务器"><a href="#创建-web-服务器" class="headerlink" title="创建 web 服务器"></a>创建 web 服务器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用系统模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>();</span><br><span class="line"><span class="comment">//当客户端发送请求的时候</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//响应</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//返回状态码和返回资源类型,若无，低级浏览器可能出问题</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">400</span>, &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=utf8&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running....&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>完善：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用系统模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>); <span class="comment">//处理url地址模块</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&quot;querystring&quot;</span>); <span class="comment">//处理参数模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//当客户端发送请求的时候</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;request&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//post参数是通过事件的方式接受的</span></span><br><span class="line">  <span class="comment">//data当请求参数传递的时候发出data事件</span></span><br><span class="line">  <span class="comment">//end当参数传递完成的时候时发出end事件</span></span><br><span class="line">  <span class="comment">//获取POST参数需要使用data事件和end事件；</span></span><br><span class="line">  <span class="keyword">let</span> postParams = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">    postParams += params; <span class="comment">//接收的数据不是一次性发完的</span></span><br><span class="line">  &#125;);</span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(postParams);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(querystring.<span class="title function_">parse</span>(postParams)); <span class="comment">//将参数转换为对象格式</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//响应</span></span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//返回状态码和相关信息</span></span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">400</span>, &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=utf8&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//调用url模块方法parse();第一个参数为要处理的地址，第二个参数为是否处理为对象格式，true为是；</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url.<span class="title function_">parse</span>(res.<span class="property">url</span>, <span class="literal">true</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running....&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Node-js-异步编程"><a href="#Node-js-异步编程" class="headerlink" title="Node.js 异步编程"></a>Node.js 异步编程</h2><ul>
<li>同步 api:当前 api 执行完成后，才能继续执行下一个 api;同步代码执行完后才开始执行异步代码，再执行回调函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步api可以从返回值中拿到api执行结果，而异步api不行</span></span><br><span class="line"></span><br><span class="line">funciotn <span class="title function_">sum</span>(<span class="params">x,y</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> re=<span class="title function_">sum</span>(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//异步</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getMsg</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">msg</span>:<span class="string">&#x27;hello&#x27;</span>&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> res=<span class="title function_">getMsg</span>(); <span class="comment">//undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>异步 api:当前 api 的执行，不会阻塞后续代码的执行;异步 api 通过回调函数获取返回值</li>
</ul>
<blockquote>
<p>回调函数：自己定义函数让别人去调用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="title function_">callback</span>(<span class="string">&quot;XiaoMing&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getData</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span> + n);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>promise 解决回调地狱问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ler promise=<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line"><span class="title function_">resolve</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;xiaoming&#x27;</span>&#125;);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="title function_">reject</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,<span class="number">2000</span>);</span><br><span class="line">&#125;):</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function"><span class="params">result</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(result);<span class="comment">//&#123;name:&#x27;xioaming&#x27;&#125;).catch(error=&gt;console.log(error);//error);</span></span><br></pre></td></tr></table></figure>

<ul>
<li>异步函数：终极方案，让异步代码写成同步代码形式，让代码不再有回调函数嵌套</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在普通函数定义前加上async关键字</span></span><br><span class="line"><span class="comment">//异步函数默认返回的时promise对象</span></span><br><span class="line"><span class="comment">//在异步函数使用throw关键字进行错误抛出，之后的代码将不会执行</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>());</span><br><span class="line"><span class="title function_">fn</span>().<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//awaite关键字只能出现在异步函数中</span></span><br><span class="line"><span class="comment">//awaite promise对象； 暂停异步函数的执行，等待promise对象返回结果后在向下执行</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">p1</span>();</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">p2</span>();</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">p3</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回 promise 对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用util模块的promisify方法</span></span><br><span class="line"><span class="keyword">const</span> fs=<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> promisify=<span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>).<span class="property">promisify</span>;</span><br><span class="line"><span class="keyword">const</span> readFile=<span class="title function_">pronisify</span>(fs.<span class="property">readFile</span>);</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r1=awaite <span class="title function_">readFile</span>(<span class="string">&#x27;./1.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> r2=awaite <span class="title function_">readFile</span>(<span class="string">&#x27;./2.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(r1,r2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>

<p>捕获错误:</p>
<p><code>try catch</code>可以捕获异步函数以及其他同步代码在执行过程中发生的错误，但不能捕获其他类型 api 发生的错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">fid</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (er) &#123;</span><br><span class="line">    <span class="title function_">next</span>(er);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="全局对象-global"><a href="#全局对象-global" class="headerlink" title="全局对象 global"></a>全局对象 global</h2><p>在浏览器中全局对象时 window,在 node 中全局对象是 global</p>
<p>Node 中的全局对象有以下方法，可省略 global：<code>console.log()</code>,<code>setTimeout()</code>,clearEimeout()<code>,</code>setInternal()<code>,</code>clearInterval`</p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>存储数据的仓库：mysql、MongoDB、Oracle</p>
<p>相关概念：</p>
<table>
<thead>
<tr>
<th>术语</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>database</td>
<td>数据仓库,可建立多个数据库</td>
</tr>
<tr>
<td>collection</td>
<td>集合，一组数据的集合</td>
</tr>
<tr>
<td>document</td>
<td>文档，一条具体的数据</td>
</tr>
<tr>
<td>field</td>
<td>字段,文档中的属性名称</td>
</tr>
</tbody></table>
<h3 id="第三方包-Mongoose"><a href="#第三方包-Mongoose" class="headerlink" title="第三方包 Mongoose"></a>第三方包 Mongoose</h3><p>使用 node.js 操作 MongoDB 数据库,下载<code>npm install mongoose</code></p>
<ul>
<li>数据库的连接</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line">mongoose</span><br><span class="line">  .<span class="title function_">connect</span>(<span class="string">&quot;mongodb://localhost/test&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;数据库连接成功&quot;</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fail!&quot;</span>, err));</span><br></pre></td></tr></table></figure>

<ul>
<li>创建数据库</li>
</ul>
<p>在 MongoDB 中不需要显示创建数据库，如果使用的数据库不存在，MongoDB 会自动创建。</p>
<h4 id="MongoDB-增删查改操作"><a href="#MongoDB-增删查改操作" class="headerlink" title="MongoDB 增删查改操作"></a>MongoDB 增删查改操作</h4><ul>
<li>创建集合</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对集合设定规则</span></span><br><span class="line"><span class="keyword">const</span> courseSchema = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">author</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">isPublished</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建集合并合并规则</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Course</span> = mongoose.<span class="title function_">model</span>(<span class="string">&quot;Course&quot;</span>, courseSchema); <span class="comment">//返回构造函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文档</li>
</ul>
<p>即向集合中插入元素</p>
<p>第一种方法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建集合实例</span></span><br><span class="line"><span class="keyword">const</span> course=<span class="keyword">new</span> <span class="title class_">Course</span>(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//保存数据</span></span><br><span class="line">course.<span class="title function_">save</span>();</span><br></pre></td></tr></table></figure>

<p>第二种方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Course</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function">(<span class="params">err,doc</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//错误对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line"><span class="comment">//当前文档</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(doc);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create返回的也是promise对象</span></span><br><span class="line"><span class="title class_">Course</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;tset&#x27;</span>,</span><br><span class="line"><span class="attr">author</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="attr">isPubulished</span>: <span class="literal">true</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">doc</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(doc)).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<ul>
<li>mongoose 验证</li>
</ul>
<p>在创建集合规则时，可以设置当前字段的验证规则，验证失败则输入插入失败</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postSchema=<span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line"> <span class="attr">title</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">String</span>,  <span class="comment">//字段类型</span></span><br><span class="line">  <span class="attr">required</span>: <span class="literal">true</span>  <span class="comment">//true时代表该字段必填,不能为空</span></span><br><span class="line">  <span class="attr">default</span>: <span class="string">&#x27;默认title&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">  <span class="attr">validate</span>:&#123;  <span class="comment">//自定义验证器</span></span><br><span class="line">  <span class="attr">validator</span>: <span class="function"><span class="params">v</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="comment">//返回布尔值，true代表验证成功</span></span><br><span class="line">   <span class="comment">//v要验证的值</span></span><br><span class="line">   <span class="keyword">return</span> v.<span class="property">length</span>&gt;<span class="number">4</span></span><br><span class="line">  &#125;</span><br><span class="line">   <span class="attr">masseage</span>: <span class="string">&#x27;error!!!!!&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">authod</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">String</span>,  <span class="comment">//字段类型</span></span><br><span class="line">  <span class="attr">trim</span>:<span class="literal">true</span> <span class="comment">//自动去除字符串两边的空格</span></span><br><span class="line">  <span class="attr">required</span>: [<span class="literal">true</span>,<span class="string">&#x27;错误信息&#x27;</span>], <span class="comment">//自定义错误信息</span></span><br><span class="line">  <span class="attr">minlength</span>: <span class="number">2</span>,  <span class="comment">//字符串最小长度</span></span><br><span class="line">  <span class="attr">maxlength</span>: [<span class="number">10</span>,<span class="string">&#x27;长度错误&#x27;</span>],  <span class="comment">//字符串最大长度</span></span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">age</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">  <span class="attr">min</span>: <span class="number">2</span>,  <span class="comment">//数值的最小值</span></span><br><span class="line">  <span class="attr">max</span>: <span class="number">100</span> <span class="comment">//数值的最大值</span></span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">category</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">enum</span>:[<span class="string">&#x27;html&#x27;</span>,<span class="string">&#x27;css&#x27;</span>,<span class="string">&#x27;js&#x27;</span>]  <span class="comment">//枚举,输入的值必须在其中,否则报错</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  enum:&#123;</span></span><br><span class="line"><span class="comment">   values: [&#x27;html&#x27;,&#x27;css&#x27;,&#x27;js&#x27;],</span></span><br><span class="line"><span class="comment">   message: &#x27;error message&#x27;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Post</span>=mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Post&#x27;</span>,postSchema);</span><br><span class="line">post.<span class="title function_">create</span>(&#123;&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">re</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(re)).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<ul>
<li><p>集合关联</p>
<ol>
<li>使用 id 对集合进行关联</li>
<li>使用 populate 方法进行关联集合查询</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户集合</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span>=mongoose.<span class="title function_">model</span>(<span class="string">&#x27;User&#x27;</span>,<span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;<span class="attr">name</span>:&#123;<span class="attr">type</span>: <span class="title class_">String</span>&#125;&#125;));</span><br><span class="line"><span class="comment">//文章集合</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Post</span>=mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Post&#x27;</span>,<span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line"> <span class="attr">title</span>:&#123;<span class="attr">type</span>: <span class="title class_">String</span>&#125;,</span><br><span class="line"><span class="comment">//使用id将文章集合和作者集合进行关联</span></span><br><span class="line"> <span class="attr">author</span>:&#123;<span class="attr">type</span>: mongoose.<span class="property">Schema</span>.<span class="property">Types</span>.<span class="property">ObjectId</span>, <span class="attr">ref</span>: <span class="string">&#x27;User&#x27;</span>&#125;</span><br><span class="line">&#125;)):</span><br><span class="line"></span><br><span class="line"><span class="comment">//联合查询</span></span><br><span class="line"><span class="title class_">Post</span>.<span class="title function_">find</span>().<span class="title function_">populate</span>(<span class="string">&#x27;author&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">err,result</span>)=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br></pre></td></tr></table></figure>

<ul>
<li>导入数据</li>
</ul>
<p>shell 命令：<code>mongoimport -d 数据库名称 -c 集合名称 -file 要导入的数据文件（josn格式）</code></p>
<ul>
<li>查询文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据条件查询文档，若为空则查询所有文档</span></span><br><span class="line"><span class="title class_">Course</span>.<span class="title function_">find</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">//返回的是文档的集合数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//实例</span></span><br><span class="line"><span class="title class_">Course</span>.<span class="title function_">find</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>(&#123; <span class="attr">age</span>: &#123; <span class="attr">$gt</span>: <span class="number">20</span>, <span class="attr">$lt</span>: <span class="number">50</span> &#125; &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">//查询大于20小于50</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>(&#123; <span class="attr">hobbies</span>: &#123; <span class="attr">$in</span>: [<span class="string">&quot;运动&quot;</span>] &#125; &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">//查询包含运动的</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只查询一条数据</span></span><br><span class="line"><span class="title class_">Course</span>.<span class="title function_">findOne</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;xiaoming&quot;</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//选择要查询的字段</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>()</span><br><span class="line">  .<span class="title function_">select</span>(<span class="string">&quot;name age -_id&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err)); <span class="comment">//只返回查询的字段，不查询的字段前加-</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将查询出来的数据进行升序排序(从小到大）</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>()</span><br><span class="line">  .<span class="title function_">sort</span>(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br><span class="line"></span><br><span class="line"><span class="comment">//将查询出来的数据进行降序排序(从大到小）</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>()</span><br><span class="line">  .<span class="title function_">sort</span>(<span class="string">&quot;-age&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//skip跳过多条数据，limit限制查询数量</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>()</span><br><span class="line">  .<span class="title function_">skip</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">limit</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">//分页查询时常用</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除第一个文档</span></span><br><span class="line"><span class="title class_">Course</span>.<span class="title function_">findOndeAndDelete</span>(&#123;&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)); <span class="comment">//返回删除的文档</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除多个文档</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">deleteMany</span>(&#123;&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br></pre></td></tr></table></figure>

<ul>
<li>更新文档</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新单个</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">updateOne</span>(&#123; 查询条件 &#125;, &#123; 要修改的值 &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">re</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(re));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新多个</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">updateMany</span>(&#123; 查询条件 &#125;, &#123; 要修改的值 &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">re</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(re));</span><br></pre></td></tr></table></figure>

<h4 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h4><h5 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//301代表重定向</span></span><br><span class="line"><span class="comment">//location 跳转地址</span></span><br><span class="line">req.<span class="title function_">on</span>(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">301</span>, &#123;</span><br><span class="line">    <span class="title class_">Location</span>: <span class="string">&quot;/list&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  res.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>npm i nodemon -g</code><br><code>nodemon test.js</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/06/07/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/07/20-00-00/" class="post-title-link" itemprop="url">Vue2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-07 20:00:00" itemprop="dateCreated datePublished" datetime="2021-06-07T20:00:00+08:00">2021-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-21 23:02:31" itemprop="dateModified" datetime="2023-04-21T23:02:31+08:00">2023-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Vue2-0"><a href="#Vue2-0" class="headerlink" title="Vue2.0"></a>Vue2.0</h1><blockquote>
<p>一套用于构建用户界面的渐进式 javascrip 框架</p>
</blockquote>
<h2 id="原生使用"><a href="#原生使用" class="headerlink" title="原生使用"></a>原生使用</h2><ul>
<li>引入vue</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="language-javascript"> <span class="comment">//引入 Vue</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引入vue后，会出现全局属性Vue&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>容器</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;root&#x27;</span>&gt;</span>&#123;&#123;msg&#125;&#125; &#123;&#123;name&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  <span class="comment">&lt;!-- &#123;&#123;&#125;&#125;中可写js表达式--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用vue</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span>=<span class="literal">false</span>;<span class="comment">//阻止vue启动时的生成的提醒</span></span><br><span class="line"><span class="comment">//创建vue实例</span></span><br><span class="line"><span class="keyword">const</span> vu= <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, <span class="comment">//挂载点，指定容器,可写类名，不能用在html和body上；第二种写法可用vu.$mount(&#x27;#root&#x27;);代替</span></span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">msg</span>:<span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiaomi&#x27;</span>,</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>)&#123;&#125; <span class="comment">//不建议在data中写函数，因为会data中的属性会进行数据代理，而方法并不需要进行数据代理</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//data第二种写成函数式,由Vue管理的函数不能写成箭头函数，对象里的方法可省略:function</span></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment"> data:function()&#123;</span></span><br><span class="line"><span class="comment">   return&#123;</span></span><br><span class="line"><span class="comment">     name:&#x27;xiaoming&#x27;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ul>
<li><p>插值语法：用于解析标签体内容<br><code>&#123;&#123;xxx&#125;&#125;</code>xxx 为 js 表达式，可以直接读取到 data 中的属性</p>
</li>
<li><p>指令语法：用于解析标签<br><code>v-bind:href=&quot;xxx&quot;</code>或简写为<code>:href=&quot;xxx&quot;</code></p>
</li>
</ul>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><ul>
<li><p>数据绑定</p>
<ul>
<li><p>单向数据绑定：数据只能从 data 流向页面;<br><code>v-bind:href=&quot;xxx&quot;</code>或简写为<code>:href=&quot;xxx&quot;</code></p>
</li>
<li><p>双向数据绑定：数据能从 data 流向页面,也能从页面流向 data，默认绑定value<br><code>v-model:value=&quot;xxx&quot;</code>或简写<code>v-model=&quot;xxx&quot;</code>。<code>v-model</code>指令只能用在表单类（输入类 input、select）元素上,<code>v-model</code>的三个修饰符：<code>lazy</code>失去焦点在收集数据，<code>number</code>输入的字符串转为有效数字，<code>trim</code>去除首尾的空格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--输入框--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  <span class="attr">v-model.trim</span>=<span class="string">&quot;keyWords/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag"></span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;!--单选框，要加上value属性--&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;input type=&quot;</span><span class="attr">radio</span>&quot; <span class="attr">v-model</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;radio1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> /&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;radio2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> /&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--多选框--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--若没有配置value，则当v-model初始值为数组时，勾选时收集的是null，为字符串时，收集的是布尔值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;reading&quot;</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sports&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:cllick</span>=<span class="string">&quot;showhello&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--或简写成--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">cllick</span>=<span class="string">&quot;showhello($event,22)&quot;</span>&gt;</span>$event占位<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>:<span class="string">&#x27;.button1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">   <span class="attr">name</span>:<span class="string">&#x27;xiaomei&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">showhello</span>(<span class="params">e,n</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>,n);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>事件修饰符</p>
<ul>
<li>prevent:阻止默认事件</li>
<li>stop:阻止事件冒泡</li>
<li>once：事件只触发一次</li>
<li>capture:使用事件的捕获模式</li>
<li>sefl:只有 event.target 是当前操作的元素时才触发事件</li>
<li>passive:事件的默认行为立即执行，无需等待事件回调执行完毕，</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;www.baidu.com&#x27;</span> <span class="attr">v-on:click.prevent.stop</span>=<span class="string">&quot;showhello()&quot;</span>&gt;</span>test<span class="tag">&lt;<span class="name">a</span>&gt;</span> <span class="comment">&lt;!--阻止a标签自动跳转,可连续写--&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>键盘事件</p>
<ul>
<li>vue 中的按键别名：<code>回车enter</code>，<code>删除delete</code>，<code>退出esc</code>，<code>空格space</code>， <code>换行tap(必须配合keydown使用)</code>， <code>上up</code>，<code>下down</code>，<code>左left</code>，<code>右right</code></li>
<li>系统修饰键：<code>ctrl</code>，<code>alt</code>，<code>shift</code>，<code>meta</code><ul>
<li>配合 keyup 使用时：需再按下其他键，随后释放其他键才能触发</li>
<li>配合 keydown 使用时：正常触发</li>
</ul>
</li>
<li>Vue.config.keyCodes.自定义键名=键码</li>
<li>vue 中未提供的按键别名，可使用按键原始名去绑定，注意要转换为 kebab-case（短横线命名）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;tips&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;showhello&quot;</span>&gt;</span>`</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;tips&quot;</span> @<span class="attr">keyup.ctrl.y</span>=<span class="string">&quot;showhello&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>条件渲染</p>
</li>
</ul>
<p>v-if 与 v-show 的区别：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;false&quot;</span>&gt;</span> test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="comment">&lt;!--元素还存在--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;false&quot;</span>&gt;</span> test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="comment">&lt;!--元素直接消失,中间不能被打断--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span> <span class="comment">&lt;!--template不影响结构，但必须和v-if配合使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else</span>&gt;</span> test<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>渲染文本</p>
<ul>
<li><p><code>v-text</code> 指令,向其所在的节点中渲染文本内容,其会替换掉节点中的内容，<code>&#123;&#123;xxx&#125;&#125;</code>插值语法则不会,可以替换指定内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-text</span>=<span class="string">&quot;keyword&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>v-html</code> 指令,向其所在的节点中渲染文本内容,其会替换掉节点中的内容,且会解析 html 标签，<code>v-text</code>则不会。其具有安全性问题，在网页上动态渲染 html 标签是非常危险的，易导致 XSS 攻击。</p>
</li>
</ul>
</li>
<li><p>列表渲染</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;#root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--遍历数组--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;n in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;n.id&quot;</span> &gt;</span></span><br><span class="line">    &#123;&#123;index&#125;&#125; <span class="comment">&lt;!--索引值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--遍历对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(val,k,index2) of persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index2&quot;</span> &gt;</span></span><br><span class="line">    &#123;&#123;index2&#125;&#125; <span class="comment">&lt;!--索引值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 除此之外还可以遍历字符串，数字--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm=<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"> <span class="attr">persons</span>:[</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="number">001</span>,<span class="attr">name</span>:<span class="string">&#x27;xiaoMei&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="number">002</span>,<span class="attr">name</span>:<span class="string">&#x27;xiaoHong&#x27;</span>,<span class="attr">age</span>:<span class="number">22</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="number">003</span>,<span class="attr">name</span>:<span class="string">&#x27;xiaoLan&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  ]</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>key给节点提供唯一标识</p>
<ul>
<li>不写key，则默认用index</li>
<li>虚拟 DOM 中的 key 的作用：key 是虚拟 DOM 对象的标识，当数据发送变化时，vue 会根据新数据生成新的虚拟 DOM，随后 vue 将新的虚拟 DOM 与旧的虚拟 DOM 进行差异比较</li>
<li>对比规则为：<ul>
<li>旧虚拟 DOM 中找到与新虚拟 DOM 相同的 key：<ul>
<li>若虚拟 DOM 中的内容没有改变，则直接使用之前的真实 DOM</li>
<li>若虚拟 DOM 中的内容改变了，则生成新的真实 DOM，随后替换掉页面中之前的真实 DOM</li>
</ul>
</li>
<li>旧虚拟 DOM 中未找到与新虚拟 DOM 相同的 key：创建新的真实 DOM，随后渲染到页面。</li>
</ul>
</li>
<li>index 作为 key 可能发生的问题：对数据进行逆序添加、删除时，会产生没有必要的真实 dom，界面虽然没问题，但效率低。当结构中存在输入类的 DOM 时，界面会出现问题。</li>
</ul>
</li>
<li><p>其他指令</p>
<ul>
<li><p><code>v-cloak</code>指令，Vue 实例创建完毕并接管容器后，会删除所有 v-cloak 属性，常用于解决网速不好加载 vue 慢而显示问题</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-attr">[v-cloak]</span>&#123;<span class="attribute">display</span>:none;&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-cloak</span>&gt;</span> &#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>v-once</code>指令，其所在的节点在初次渲染后，就视为静态内容了，以后即使数据变化了，其也不再变化</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span> &#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>v-pre</code>指令，跳过其所在节点的编译过程，可用于跳过没有指令语法、插值语法的节点，加快编译速度。</p>
</li>
</ul>
</li>
<li><p>自定义指令</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;&#125;,</span><br><span class="line">  <span class="attr">directives</span>:&#123;</span><br><span class="line">  <span class="comment">//局部指令</span></span><br><span class="line">  <span class="comment">//指令与元素成功绑定时即一开始就被调用，当指令所在模板被重新解析时会被调用。</span></span><br><span class="line">  <span class="comment">//简写</span></span><br><span class="line">  <span class="title function_">test</span>(<span class="params">element,binding</span>)&#123; <span class="comment">//element,binding为规定写法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//这里的this为window</span></span><br><span class="line">    element.<span class="property">innerText</span>=bindding.<span class="property">value</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//标准写法</span></span><br><span class="line">  <span class="attr">test2</span>:&#123; <span class="comment">//命名：多个单词用-分割，使用时不用-,后一个首字母改为大写</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">element,binding</span>)&#123;<span class="comment">//指令与元素成功绑定时调用&#125;,</span></span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">element,binding</span>)&#123;<span class="comment">//指令所在元素插入页面时调用&#125;,</span></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">element,binding</span>)&#123;<span class="comment">//指令所在模板被重新解析时被调用&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(指令名，回调函数);</span><br></pre></td></tr></table></figure>

<h2 id="MVVM-模型"><a href="#MVVM-模型" class="headerlink" title="MVVM 模型"></a>MVVM 模型</h2><blockquote>
<p>一种软件架构</p>
</blockquote>
<ul>
<li>M:模型 model:对应 data 中的数据</li>
<li>V：视图 view:模板</li>
<li>VM：视图模型 view model：vue 实例</li>
<li>数据代理</li>
</ul>
<p><code>Object.defineproperty()</code>第一个参数为对象，第二个为对象的属性，第三个为配置项</p>
<p>如添加属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">let person&#123;</span><br><span class="line">name:&#x27;xiaomei&#x27;</span><br><span class="line">&#125;</span><br><span class="line">Object.defineproperty(person,&#x27;age&#x27;,&#123;</span><br><span class="line">value:18,</span><br><span class="line">//默认情况下添加的属性不可枚举，即无法遍历出来</span><br><span class="line">enumerable:true  //true表示可以枚举</span><br><span class="line">//默认情况下添加的属性的值无法更改</span><br><span class="line">writable:true //控制属性是否可修改</span><br><span class="line">//默认情况下添加的属性无法删除</span><br><span class="line">configurable: true ////控制属性是否可删除</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//当读取person的age属性时，get函数会被调用，且返回age的值</span><br><span class="line">get:function()&#123;</span><br><span class="line">return &#x27;hello&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//当修改person的age属性时，set函数会被调用</span><br><span class="line">set:function(value)&#123;</span><br><span class="line">age=value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过一个对象对另一个对象中的属性的操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var object=&#123;//原数据</span><br><span class="line">    name:&#x27;xiaomei&#x27;,</span><br><span class="line">    sex:&#x27;female&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">var test=&#123;</span><br><span class="line">    age:3,</span><br><span class="line">    hobby:&#x27;swing&#x27;</span><br><span class="line">&#125;</span><br><span class="line">Object.defineProperty(object,&#x27;age&#x27;,&#123;</span><br><span class="line">//默认情况下添加的属性不可枚举，即无法遍历出来</span><br><span class="line"></span><br><span class="line">get()&#123;</span><br><span class="line"></span><br><span class="line">    console.log(&#x27;getter&#x27;)</span><br><span class="line">    return test.age;  //通过object中的age控制test中的age,即数据代理</span><br><span class="line">&#125;,</span><br><span class="line">set(n)&#123;</span><br><span class="line">console.log(&quot;set&quot;,n)</span><br><span class="line">test.age=n;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>vue 中的数据代理：通过 vm 对象来代理 data 对象中属性的操作</p>
<p>通过 Object.defineProperty()把 data 对象中所有属性添加到 vm 上，为每一个添加到 vm 上的属性，都指定一个 getter/setter 方法,在它们内部去对 data 中的数据进行操作</p>
<h2 id="数据监听"><a href="#数据监听" class="headerlink" title="数据监听"></a>数据监听</h2><p>通过<code>vm._data</code>也可以访问到 data 中的数据,但其是经过加工的,即形成 getter、setter 形式</p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//###只能监测一层</span><br><span class="line">let data=&#123;name:&#x27;xiaomei&#x27;&#125;</span><br><span class="line">//创建一个监视的实例对象，用于监视data中的属性变化</span><br><span class="line">const obs=new Observer(data);</span><br><span class="line">function Observer(obj)&#123;</span><br><span class="line">//汇总对象中所有的属性形成一个数组</span><br><span class="line">const keys=Object.keys(obj);</span><br><span class="line">//遍历</span><br><span class="line">keys.forEach((k)=&gt;&#123;</span><br><span class="line">Object.defineProperty(this,k,&#123;</span><br><span class="line">get()&#123;</span><br><span class="line">return obj[k];</span><br><span class="line">&#125;,</span><br><span class="line">set(val)&#123;</span><br><span class="line">console.log(&#x27;数据被修改了&#x27;);</span><br><span class="line">obj[k]=val</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理：通过 setter 实现监测，且要在 new Vue 时就传入要监测的数据;</p>
<ul>
<li>对象中后追加的属性，vue 默认不做响应式处理；如要给后添加的属性做响应式处理，需要用<code>Vue.set(对象,&#39;添加的属性&#39;,&#39;属性值&#39;)或vm.$set(对象,&#39;添加的属性&#39;,&#39;属性值&#39;)</code></li>
<li>删除属性也会做响应式更新，可使用<code>this.$delete(&#39;属性&#39;)</code>删除</li>
<li>数组更新检测<br>vue 将被侦听的数组的变更方法进行了包裹，所以会触发视图的更新，即先调用原生方法对数组进行修改，接着重新解模板，进行更新页面。被包裹的方法有<code>push()</code>,<code>pop()</code>,<code>shift()</code>,<code>unshift()</code>,<code>splice()</code>,<code>sort()</code>,<code>reverse()</code>.或使用<code>Vue.set(数组,下标,&#39;修改的值&#39;)或vm.$set(数组,下标,&#39;修改的值&#39;)</code></li>
</ul>
<blockquote>
<p>!注意：Vue.set();和 vm.$set()不能给 vm 或 vm 的根数据对象添加属性</p>
</blockquote>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>要用的属性不存在，利用已有属性计算而得来</p>
<p>内部有缓存机制，多次调用时只运行一次，效率更高,但不能开启异步任务如:<code>setTimeout()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;.box&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;xiaomei&#x27;</span>,</span><br><span class="line">  <span class="attr">hoby</span>:<span class="string">&#x27;reading&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="attr">fullName</span>:&#123;</span><br><span class="line">    <span class="comment">//初次读取fullName时，get会被调用;所依赖的数据改变时会调用,即data中的属性被改变时。</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>+<span class="string">&#x27;-&#x27;</span>+<span class="variable language_">this</span>.<span class="property">hoby</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//当fullname被修改时，会被调用</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    //当数据只读不修改时，可采用简写</span></span><br><span class="line"><span class="comment">    fullName()&#123;</span></span><br><span class="line"><span class="comment">    return this.name+&#x27;-&#x27;+this.hoby;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="监听属性"><a href="#监听属性" class="headerlink" title="监听属性"></a>监听属性</h2><p>能开启异步操作如:<code>setTimeout(()=&gt;&#123;&#125;,1000)</code>;所有不被 vue 所管理的函数最好写成箭头函数，这样 this 的指向才是 vm</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#test&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">istrue</span>: <span class="literal">false</span></span><br><span class="line">  <span class="attr">number</span>:&#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>:<span class="number">2</span>&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;&#125;,</span><br><span class="line">  <span class="attr">computed</span>:&#123;&#125;,</span><br><span class="line">  wantch&#123;</span><br><span class="line">   <span class="string">&#x27;istrue&#x27;</span>:&#123;</span><br><span class="line">      <span class="attr">immediate</span>:<span class="literal">true</span>, <span class="comment">///初始化时调用一下handler</span></span><br><span class="line">      <span class="comment">//当istrue发生改变时调用</span></span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//简写，当只有handler()时</span></span><br><span class="line">    <span class="comment">/*istrue(newValue,oldValue)&#123;console.log(&#x27;test&#x27;);&#125;*/</span></span><br><span class="line"></span><br><span class="line">  <span class="string">&#x27;number&#x27;</span>:&#123;</span><br><span class="line">    <span class="attr">deep</span>:<span class="literal">true</span>, <span class="comment">//深度监视，当对象内的属性发生变化时,能检测到多层级内容的改变</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue);</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">/*//第二种写法</span></span><br><span class="line"><span class="comment">vm.$watch(&#x27;istrue&#x27;,&#123; handler()&#123;&#125; &#125; );</span></span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="comment">vm.$watch(&#x27;istrue&#x27;,function()&#123; console.log(&#x27;test&#x27;);&#125;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>对要显示的数据进行特定格式化后在显示（常用于一些简单逻辑的处理）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--使用过滤器--&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;time|timeFormater1()|timeFormater2&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--或者v-bind:属性=&quot;xxx|过滤器名&quot;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--过滤器可额外接收参数，多个过滤器可串联，原始数据未改变，产生的是新的数据--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">data</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">time</span>:<span class="number">24356765432</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>:&#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//注册过滤器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">filters</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">timeFormater1</span>(<span class="params">value</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> value; <span class="comment">//返回数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">timeFormater2</span>(<span class="params">value</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> value; <span class="comment">//返回数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//注册全局过滤器</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;myName&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;<span class="keyword">return</span> value;&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="绑定样式"><a href="#绑定样式" class="headerlink" title="绑定样式"></a>绑定样式</h2><ul>
<li><p>动态指定类名<br><code>&lt;div class=&#39;box&#39; :class=&#39;xxx&#39; &gt;test&lt;/div&gt;</code><br>xxx 可为<code>字符串</code>、数组<code>[&#39;box1&#39;,&#39;box2&#39;]</code>、对象<code>&#123;box1:false,box2:true&#125;</code>。</p>
</li>
<li><p>动态指定内联样式<br><code>&lt;div class=&#39;box&#39;  :style=&quot;xxx&quot; &gt;test&lt;/div&gt;</code><br>xxx 可为<code>字符串</code>、数组<code>[&#123;color:&#39;red&#39;&#125;,&#123;background:&#39;red&#39;&#125;]</code>、对象<code>&#123;color:&#39;red&#39;&#125;</code>。</p>
</li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>又名生命周期回调函数、生命周期函数、生命周期钩子，是 vue 在关键时刻帮我们调用的一些特殊名称的函数，其名字不可更改，其中的 this 指向 vm 或组件实例对象。</p>
<table>
<thead>
<tr>
<th>生命周期</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>初始化：生命周期、事件</td>
<td>但数据代理还未开始</td>
</tr>
<tr>
<td>beforeCreate</td>
<td>无法通过 vm 访问到 data 中的数据已经 methods 中的方法</td>
</tr>
<tr>
<td>初始化：数据检测、数据代理</td>
<td></td>
</tr>
<tr>
<td>created</td>
<td>可以通过 vm 可访问到 data 中的数据、methods 中的方法</td>
</tr>
<tr>
<td>解析模板，生成虚拟 DOM</td>
<td>此时页面还不能显示解析好的内容</td>
</tr>
<tr>
<td>beforeMount</td>
<td>页面呈现的是未经 Vue 编译的 DOM 结构，此时所有对 DOM 的操作，最终都不奏效</td>
</tr>
<tr>
<td>创建 vm $el</td>
<td>将内存中的虚拟 DOM 转为真实 DOM 插入页面</td>
</tr>
<tr>
<td>mounted</td>
<td>页面中呈现的是经过 Vue 编译的 DOM，对 DOM 的操作均有效，到此初始化过程结束。一般在此进行开启定时器、发送网络请求、订阅消息、绑定自定义事件等操作</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>此时数据是新的，但页面是旧的，即页面未与数据保持同步</td>
</tr>
<tr>
<td>根据新的数据，生成新的虚拟 DOM，随后与旧的虚拟 DOM 进行比较，最终完成页面的更新</td>
<td></td>
</tr>
<tr>
<td>updated</td>
<td>此时数据和页面保持同步</td>
</tr>
<tr>
<td>beforeDestroy</td>
<td>此时 vm 中所有的 data、methods、指令等都处于可用状态，马上要执行销毁过程，一般在此进行关闭定时器、取消订阅消息、解绑自定义事件等操作</td>
</tr>
<tr>
<td>destroyed</td>
<td>销毁 vue 实例后自定义事件会失效，但原生 DOM 事件依然有效</td>
</tr>
</tbody></table>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>实现应用中局部功能代码和资源的集合</p>
<blockquote>
<p>模块：向外提供特定功能的 js 程序</p>
</blockquote>
<ul>
<li>非单文件组件：一个文件中包含有 n 个组件</li>
</ul>
<p>创建 school 组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="keyword">const</span> school=&#123;&#125;;</span><br><span class="line"><span class="comment">//标准写法</span></span><br><span class="line"><span class="keyword">const</span> school=<span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line"><span class="comment">//组件定义时，不要写el配置项,最终所有的组件都要进过一个vm的管理</span></span><br><span class="line"><span class="comment">//名字</span></span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xuexiao&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用template可以配置组件结果。</span></span><br><span class="line"><span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;h3&gt;test&lt;/h3&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>,</span><br><span class="line"></span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123; <span class="comment">//data必须写成函数，为避免组件被复用时，数据存在引用关系</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"> <span class="attr">schoolName</span>:<span class="string">&#x27;BST&#x27;</span>,</span><br><span class="line"> <span class="attr">address</span>:<span class="string">&#x27;beijing&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>定义 app 组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app=<span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>创建 vm</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"><span class="attr">template</span>:<span class="string">&#x27;&lt;app&gt;&lt;/app&gt;&#x27;</span>,</span><br><span class="line"><span class="comment">//局部注册组件</span></span><br><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line"> <span class="attr">xuexioa</span>:school,  <span class="comment">//组件名：一个单词通常首字母大小，多个单词通常用-分隔，或首字母大写（需要Vue脚手架支持）</span></span><br><span class="line"> app</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局注册组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;xuexiao&#x27;</span>,school);</span><br></pre></td></tr></table></figure>

<p>使用组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xuexiao</span>&gt;</span><span class="tag">&lt;/<span class="name">xuexiao</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xuexiao</span> /&gt;</span><span class="comment">&lt;!--需要脚手架支持，否则多个组件时，后续组件将不能渲染--&gt;</span></span><br></pre></td></tr></table></figure>

<p>关于 VueComponent，组件本质是一个名为 VueComponent 的构造函数，是由 Vue.extend 生成的。当我们写<code>&lt;xuexiao&gt;&lt;/xuexiao&gt;</code>，Vue 解析时会帮我们创建 school 组件的实例对象，即 vue 帮我们执行<code>new VueComponent();</code>。当我们每次调用 Vue.extend()时,返回的都是一个全新的 VueComponent。在组件配置中，data 函数、methods 中的函数、watch 中的函数等，它们的 this 都指向 VueComponent 实例对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">a</span>=<span class="number">1</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">b</span>=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建一个Demo实例对象</span></span><br><span class="line"><span class="keyword">const</span> d=<span class="keyword">new</span> <span class="title class_">Demo</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Demo</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">//显示原型属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d.<span class="property">__proto__</span>); <span class="comment">//隐式原型属性</span></span><br><span class="line"><span class="comment">//显示原型属性与隐式原型属性都指向原型对象</span></span><br><span class="line"><span class="comment">//通过显示原型属性操作原型对象</span></span><br><span class="line"><span class="title class_">Demo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">e</span>=<span class="number">21</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>!!重要内置关系：VueComponent.prototype.<strong>proto</strong>===Vue.prototype;其可以让组件实例对象访问到 Vue 原型上的属性和方法。</p>
</blockquote>
<ul>
<li>单文件组件：一个文件中只包含有一个组件<ul>
<li>school.vue 组件</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!--组件的结构--&gt;</span><br><span class="line"> &lt;div class=&quot;demo&quot;&gt;</span><br><span class="line"> &lt;h2&gt;&#123;&#123;schoolName&#125;&#125;&lt;/h2&gt;</span><br><span class="line"> &lt;h2&gt;&#123;&#123;address&#125;&#125;&lt;/h2&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//组件交互的代码</span><br><span class="line"> export default&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line">   schoolName:&#x27;daxue&#x27;</span><br><span class="line">   address:&#x27;beijing&#x27;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line">    showName()&#123;</span><br><span class="line">  alert(this.schoolName);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">/*样式*/</span><br><span class="line">.demoo&#123;</span><br><span class="line">background-color:red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>App.vue 组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;School/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//引入组件</span><br><span class="line">import School from &#x27;./School&#x27;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">name:&#x27;App&#x27;,</span><br><span class="line">components:&#123;School&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>main.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"><span class="attr">components</span>:&#123;<span class="title class_">App</span>&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>index.html</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&#x27;utf-8&quot;/&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag"> &lt;title&gt;test&lt;/title&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/head&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;body&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;div id=&quot;root&quot;&gt;&lt;div&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;script type=&quot;text/javascript&quot; src=&quot;./vue.js&quot;&gt;&lt;/script&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;script type=&quot;text/javascript&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/body&gt;</span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/html&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="脚手架-vue-cli-command-line-interface"><a href="#脚手架-vue-cli-command-line-interface" class="headerlink" title="脚手架 vue.cli(command line interface)"></a>脚手架 vue.cli(command line interface)</h2><ol>
<li>全局安装@vue/cli:<code>npm install -g @vue/cli</code></li>
<li>切换到要创建项目的目录，然后创建项目：<code>vue create xxxx</code></li>
<li>启动项目：<code>npm run serve</code></li>
</ol>
<blockquote>
<ol>
<li>配置 npm 淘宝镜像：<code>npm config set registry https://....</code></li>
<li>Vue 脚手架隐藏了所有 webpack 相关的配置，若想查看具体 webpack 配置，执行：<code>vue inspect &gt; output.js</code></li>
</ol>
</blockquote>
<ul>
<li>main.js 项目的入口文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入vue.runtime.xxx.js，其是运行版的vue,只包含核心功能，没有模板解析器,而完整版的Vue才有。</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入App组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//关闭生产提示</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span>=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建VUe实例对象</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line"><span class="comment">//将App组件放入容器中</span></span><br><span class="line"><span class="attr">render</span>:<span class="function"><span class="params">h</span>=&gt;</span><span class="title function_">h</span>(app), <span class="comment">//没有模板解析器，不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params">createElement</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>,<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>vue.config.js 配置</li>
</ul>
<p>使用 vue.config.js 可以对脚手架进行个性化定制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line"> <span class="attr">pages</span>:&#123;</span><br><span class="line">   <span class="attr">index</span>:&#123;</span><br><span class="line">  <span class="comment">//入口</span></span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;src/main.js&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> <span class="attr">lintOnSave</span>:<span class="literal">false</span>, <span class="comment">//关闭语法检查</span></span><br><span class="line"> <span class="comment">//代理</span></span><br><span class="line"> <span class="attr">devServer</span>:&#123;</span><br><span class="line">  <span class="attr">proxy</span>:&#123;</span><br><span class="line">   <span class="string">&#x27;/api&#x27;</span>::&#123;</span><br><span class="line">    <span class="attr">target</span>:<span class="string">&#x27;http://xxxx&#x27;</span></span><br><span class="line">    <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">pathRewrite</span>:&#123;</span><br><span class="line">     <span class="string">&#x27;^/api&#x27;</span>:<span class="string">&#x27;/api&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="attr">configureWebpack</span>:<span class="function">(<span class="params">config</span>)=&gt;</span>&#123;<span class="comment">//地址</span></span><br><span class="line">  config.<span class="property">resolve</span>=&#123;</span><br><span class="line">   <span class="attr">extensions</span>:[<span class="string">&#x27;.js&#x27;</span>,<span class="string">&#x27;.json&#x27;</span>,<span class="string">&#x27;.vue&#x27;</span>],</span><br><span class="line">   <span class="attr">alias</span>:&#123;</span><br><span class="line">    <span class="string">&#x27;@&#x27;</span>:path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./src&#x27;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>脚手架文件结构</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|--node_modules</span><br><span class="line">|--public</span><br><span class="line">|--src</span><br><span class="line">    |--assets:静态资源文件夹</span><br><span class="line">    |--component:存放组件文件夹</span><br><span class="line">    |--App.vue：汇总所有组件</span><br><span class="line">    |--mian.js：入口文件</span><br><span class="line">|--.gitignore: git版本管制忽略的配置</span><br><span class="line">|--babel.config.js</span><br><span class="line">|--package.json: 应用包配置文件</span><br><span class="line">|--package-lock.json: 包版本控制文件</span><br></pre></td></tr></table></figure>

<ul>
<li>ref 属性</li>
</ul>
<p>id 的替代者,用来给元素或组件注册引用信息,应用在 html 标签上获取的是真实 DOM 元素，应用组件标签上获取的是组件的实例对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;h1 v-text=&quot;msg&quot; ref=&quot;title&quot;&gt;&lt;/h1&gt;</span><br><span class="line">&lt;button ref=&quot;btn&quot; @click=&quot;showDOM&quot;&gt;outPut_DOM&lt;/button&gt;</span><br><span class="line">&lt;School ref=&quot;sch&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import School from &#x27;./component/school&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line"> name:&#x27;App&#x27;,</span><br><span class="line"> components:&#123;School&#125;</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> msg:&#x27;hello&#x27;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line"> showDOM()&#123;</span><br><span class="line"> console.log(this.$ref.title); //真实DOM元素</span><br><span class="line"> console.log(this.$ref.sch); //School组件的实例对象</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>props 配置项</li>
</ul>
<p>让组件接收外部传来的数据,props 是只读的，Vue 底层会监测(非深度监测)props，若发生修改会发出警告。若要修改数据，请复制一份到 data 中,再修改。</p>
<blockquote>
<p>Vue 使用 props 时父组件给子组件传值后，子组件可用 props 配置项接收，但不要忘了加引号！！！！！！！否则使用它会出现 undefined！<br>v-modle 绑定的值不应是 props 传过来的值，当其为对象类型时，修改对象中的属性时，vue 无法发现<br>props和data的属性重复时，props的优先级更高</p>
</blockquote>
<p>子组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">data</span>:&#123;&#125;,</span><br><span class="line"><span class="comment">//简单声明接收</span></span><br><span class="line"><span class="attr">props</span>:[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>]</span><br><span class="line"><span class="comment">//接收的同时对数据进行类型限制</span></span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">String</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="title class_">Number</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">String</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//接收的同时对数据进行类型限制和默认值的指定</span></span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:&#123;</span><br><span class="line"> <span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line">   <span class="attr">required</span>:<span class="literal">true</span>, <span class="comment">//name必填</span></span><br><span class="line">  &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line"> &lt;!--传递数据--&gt;</span><br><span class="line"> &lt;Student name=&quot;xiaoMei&quot; sex=&quot;female&quot; :age=&quot;12&quot;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Student from &#x27;./components/Student&#x27;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;App&quot;,</span><br><span class="line"> components:&#123;Student&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>props 适用于父组件和子组件的通信，子组件与父组件的通信要求父先给子一个函数，子再通过形参的形式传递数据</p>
</blockquote>
<h2 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h2><p>子组件跟父组件通信可使用 Vue 的自定义事件，父组件通过@xxx=“function(){}”给子组件绑定自定义事件，然后子组件通过$emit 触发事件，第一个参数为触发的事件，第二个为要传递的数据，便可实现子与父的通信。组件中使用原生事件需要<code>native</code>修饰符<br>适用于子组件与父组件通信<br>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 通过父组件给子组件绑定一个自定义事件：用于子给父传递数据 --&gt;</span><br><span class="line">&lt;Student v-on:test=&quot;getStudentName&quot;/&gt;</span><br><span class="line">&lt;!-- 第二种写法,使用ref--&gt;</span><br><span class="line">&lt;!-- &lt;student ref=&quot;student&quot;/&gt;  --&gt;</span><br><span class="line">&lt;!-- &lt;student ref=&quot;student&quot;  @click.native=&quot;show&quot;/&gt;  组件绑定原生DOM事件，需要使用native修饰符 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import School from &#x27;./components/School.vue&#x27;</span><br><span class="line">import Student from &#x27;./components/Student&#x27;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">name:&#x27;App&#x27;, components:&#123;School,Student&#125;</span><br><span class="line">data()&#123;</span><br><span class="line"> return &#123;</span><br><span class="line">    msg: &#x27;test1!!!!!!!!&#x27;</span><br><span class="line"> &#125;&#125;</span><br><span class="line">methods:&#123;</span><br><span class="line"> getStudentName(name)&#123;</span><br><span class="line">  console.log(name);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> // 第二种写法,使用ref--&gt;</span><br><span class="line"> /*</span><br><span class="line"> mounted()&#123;</span><br><span class="line"> this.$refs.student.$on(&#x27;test&#x27;,this.getStudentName);</span><br><span class="line"> //this.$refs.student.$on(&#x27;test&#x27;,(name,...params)=&gt;&#123;...//要用箭头函数，否则this指向出错&#125;);</span><br><span class="line"> &#125;</span><br><span class="line"> */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>Student.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;sex&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;button @click=&quot;sendStudentName&quot;&gt;test&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;Student&#x27;</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">name:&#x27;xiaoHu&#x27;,</span><br><span class="line">sex:&#x27;man&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">sendStudentName()&#123;</span><br><span class="line">//触发student组件实例身上的test(getStudentName)事件;即this.$emit(&#x27;传过来的事件名&#x27;,参数数据）；</span><br><span class="line">this.$emit(&#x27;test&#x27;,this.name,xx,32);</span><br><span class="line">&#125;</span><br><span class="line">unbind()&#123;</span><br><span class="line">//this.$off(&#x27;demo1&#x27;); //解绑一个自定义事件</span><br><span class="line">//this.$off(&#123;&#x27;xx&#x27;,&#x27;xx&#x27;,&#x27;xx&#x27;&#125;); //解绑多个自定义事件</span><br><span class="line">this.$off(); //解绑所有自定义事件</span><br><span class="line">&#125;,</span><br><span class="line">death()&#123;</span><br><span class="line">this.$destroy(); //销毁当前student组件的实例，销毁后所有student实例的自定义事件全部失效</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="全局事件总线"><a href="#全局事件总线" class="headerlink" title="全局事件总线"></a>全局事件总线</h2><p>适用与任意组件间的通信</p>
<p>main.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line"> el:&#x27;#root&#x27;,</span><br><span class="line"> render:h=&gt;h(App),</span><br><span class="line"> beforeCreate()&#123;</span><br><span class="line">    Vue.prototype.$bus=this //安装全局事件总线</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;school&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> name:&#x27;xuexiao&#x27;,</span><br><span class="line"> address:&#x27;biejing&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> mounted()&#123;</span><br><span class="line"> //接受数据</span><br><span class="line"> this.$bus.$on(&#x27;hello&#x27;,(data)=&gt;&#123;</span><br><span class="line"> console.log(&#x27;recieve data&#x27;,data);</span><br><span class="line"> &#125;);</span><br><span class="line"> &#125;,</span><br><span class="line"> beforeDestroy()&#123;</span><br><span class="line"> //解绑事件</span><br><span class="line"> this.$bus.$off(&#x27;hello&#x27;)&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;temlate&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default(&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> name:&#x27;小米&#x27;,</span><br><span class="line"> sex:&#x27;woman&#x27;,</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line"> sendStudentName()&#123;</span><br><span class="line"> //提供数据</span><br><span class="line"> this.$bus.$emit(&#x27;hello&#x27;,32)</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="消息发布和订阅"><a href="#消息发布和订阅" class="headerlink" title="消息发布和订阅"></a>消息发布和订阅</h2><p>适用于任意组件间通信，需要信息的组件订阅消息，提供信息的组件的发布消息</p>
<p>School.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//安装pubsub: npm i pubsub-js</span><br><span class="line">import pubsub from &#x27;pubsub-js&#x27;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> name:&#x27;xuexiao&#x27;,</span><br><span class="line"> address:&#x27;beijing&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> mounted()&#123;</span><br><span class="line"> //订阅消息，接收数据</span><br><span class="line"> this.pubId=pubsub.subscribe(&#x27;hello&#x27;,function(msgName,data)&#123;</span><br><span class="line"> console.log(&#x27;有人发布hello消息&#x27;,msgName,data);</span><br><span class="line"> console.log(this);</span><br><span class="line">  &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line"> beforeDestroy()&#123;</span><br><span class="line"> pubsub.unsubscribe(this.pubId);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>student.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import pubsub from &#x27;pubsub-js&#x27;</span><br><span class="line">export default (&#123;</span><br><span class="line"> name:&#x27;Student&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line"> name:&#x27;xiaomei&#x27;,</span><br><span class="line"> sex:&#x27;woman&#x27;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line"> ///提供数据</span><br><span class="line"> sendData()&#123;</span><br><span class="line"> pubsub.publish(&#x27;hello&#x27;,2222);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>nextTick</li>
</ul>
<p>语法：<code>this.$nextTick(回调函数)</code><br>作用：在下一次 DOM 更新结束后执行其指定的回调,用于当改变数据后，要基于更新后的新 DOM 进行某些操作时，要在 nextTick 所指定的回调函数中执行</p>
<ul>
<li>mixins(混入)配置项</li>
</ul>
<blockquote>
<p>组件之的属性优先级更高，生命周期函数会一起执行<br>可以把多个组件共用的配置提取成一个混入对象<br>school 组件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;h2 @click=&quot;showName&quot; &gt;&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//引用一个test</span><br><span class="line">import&#123;test&#125; from &#x27;../mixin&#x27;</span><br><span class="line">//import&#123;test,test2&#125; from &#x27;../mixn&#x27;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;School&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return &#123;name:&#x27;daxue&#x27;&#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> mixins:[test]</span><br><span class="line"> //mixins:[test,test2]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//全局混入</span><br><span class="line">//Vue.mixin(xxx)</span><br><span class="line">//Vue.mixin(xxx2)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>mixin.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//定义混合</span><br><span class="line">export const test=&#123;</span><br><span class="line"> methods:&#123;</span><br><span class="line">  showNamw()&#123;alert(this.name);&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> mounted()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">export const test2=&#123;</span><br><span class="line"> data()&#123;</span><br><span class="line"> return&#123;</span><br><span class="line">  x:2,</span><br><span class="line">  y:1</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> mounted()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>插件:用于增强 Vue</li>
</ul>
<p>main.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//引入Vue</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">//引入APP</span><br><span class="line">import APP from &#x27;./App.vue&#x27;</span><br><span class="line">//引入插件</span><br><span class="line">import plugins from &#x27;./plugins&#x27;</span><br><span class="line"></span><br><span class="line">//使用插件</span><br><span class="line">Vue.use(plugins,33,2);</span><br><span class="line"></span><br><span class="line">//创建VM</span><br><span class="line">new Vue(&#123;</span><br><span class="line"> el:&#x27;#root&#x27;,</span><br><span class="line"> render:h=&gt;h(App)</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<p>plugins.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//定义插件</span><br><span class="line">export default&#123;</span><br><span class="line">install (Vue,x,y)&#123;</span><br><span class="line">console.log(x,y);</span><br><span class="line">//添加全局过滤器</span><br><span class="line">Vue.filter(....)</span><br><span class="line">//添加实例方法</span><br><span class="line">Vue.prototype.$myMethod=function()&#123;..&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>scoped 样式<br>让样式只在本组件内有效，即局部生效，防止冲突。写法：<code>&lt;style scoped&gt;&lt;/style&gt;</code><br>其在标签上加上属性<code>data-v-xxxxx</code>，配合标签属性选择器<code>demo[data-v-xxxxx]</code></p>
<blockquote>
<p>组件化编码流程：1.拆分成静态组件。2.实现动态组件。3.实现交互绑定事件</p>
</blockquote>
</li>
<li><p>vue 封装的动画与过渡</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;ransition name=&quot;hello&quot; appear&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">/*动画*/</span><br><span class="line">.hello-enter-active&#123;</span><br><span class="line"> animation: test 0.5s linear;</span><br><span class="line">&#125;</span><br><span class="line">.hello-leave-active&#123;</span><br><span class="line"> animation: test 0.3s linear reverse;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes test&#123;&#125;</span><br><span class="line"></span><br><span class="line">/*详细写法</span><br><span class="line">/*进入的起点*/</span><br><span class="line">.hello-enter&#123;</span><br><span class="line"> transform:translateX(-100x);</span><br><span class="line">&#125;</span><br><span class="line">/*进入的终点*/</span><br><span class="line">.hello-enter-to&#123;</span><br><span class="line"> transform:translateX(0px);</span><br><span class="line">&#125;</span><br><span class="line">/**/</span><br><span class="line">.hello-leave&#123;</span><br><span class="line"> transform:translateX(0px);</span><br><span class="line">&#125;</span><br><span class="line">/**/</span><br><span class="line">.hello-leave-to&#123;</span><br><span class="line"> transform:translateX(-100px);</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="vue-脚手架配置代理服务"><a href="#vue-脚手架配置代理服务" class="headerlink" title="vue 脚手架配置代理服务"></a>vue 脚手架配置代理服务</h2><p>vue.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line"></span><br><span class="line"> pages:&#123;</span><br><span class="line">  index:&#123;</span><br><span class="line">   //入口</span><br><span class="line">  entry:&#x27;src/main.js&#x27;</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line">lintOnSave:false, //关闭语法检测</span><br><span class="line">//开启代理服务器（一）:配置简单，但不能配置多个代理</span><br><span class="line">/*</span><br><span class="line">devServer:&#123;</span><br><span class="line"> proxy:&#x27;http://localhost:3333&#x27;</span><br><span class="line">&#125;*/</span><br><span class="line">//开启代理服务器（二）:可以配置多个代理</span><br><span class="line">devServer:&#123;</span><br><span class="line">proxy:&#123;</span><br><span class="line">&#x27;/api&#x27;:&#123; //匹配所有以&#x27;/api&#x27;开头的请求路径</span><br><span class="line">target:&#x27;&lt;url&gt;&#x27;,</span><br><span class="line">ws:true, //用于支持websocket</span><br><span class="line">changeOrigin:true //用于控制请求头中的host值,true时，服务器请求头伪装成localhost：5050，false时为localhost:8080</span><br><span class="line">&#125;,</span><br><span class="line">&#x27;/test&#x27;:&#123;</span><br><span class="line">target:&#x27;&lt;other_url&gt;&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">&#x27;/test2&#x27;&#123;</span><br><span class="line">target:&#x27;http://localhost:5000&#x27;,</span><br><span class="line">pathRewrite:&#123;&#x27;^/test2&#x27;:&#x27;&#x27;&#125;, //清除地址前面的协议域名端口http://localhost:8080</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line"> name:&#x27;App&#x27;,</span><br><span class="line"> methods:&#123;</span><br><span class="line"> getStudents()&#123;</span><br><span class="line"> aixos.get(&#x27;http://localhost:8081/students&#x27;).then(</span><br><span class="line"> response=&gt;&#123;</span><br><span class="line"> console.log(&#x27;请求成功&#x27;,data);</span><br><span class="line"> &#125;,</span><br><span class="line"> error=&gt;&#123;</span><br><span class="line"> console.log(&#x27;请求fail&#x27;,message);</span><br><span class="line"> &#125;);</span><br><span class="line">//aioxs.post(地址,&#123;key:value,key2:value2&#125;).then(function(response)&#123;&#125;,function(error)&#123;&#125;)</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><p>用于父组件与子组件的通信</p>
<p>Category.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;category&quot;&gt;</span><br><span class="line">&lt;h3&gt;&#123;&#123;title&#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;!--定义插槽--&gt;</span><br><span class="line">&lt;!-- 默认插槽 --&gt;</span><br><span class="line">&lt;slot &gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 具名插槽 --&gt;</span><br><span class="line">&lt;slot name=&quot;center&quot;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;footer&quot;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 作用域插槽:数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定 --&gt;</span><br><span class="line">&lt;slot :games=&quot;test&quot;  :games2:&#x27;list&#x27;&gt;默认 当没有传递具体结构时，会显示&lt;/slot&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;Category&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line"> return &#123;</span><br><span class="line"> test:[&#x27;xxx&#x27;,&#x27;0989&#x27;,&#x27;33&#x27;],</span><br><span class="line"> list:[&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#x27;]</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> props:[&#x27;listData&#x27;,&#x27;title&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;img slot=&quot;center&quot; src=&quot;xxx&quot;&gt;</span><br><span class="line">&lt;a slot=&quot;footer&quot; href=&quot;xxxx&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">&lt;Category&gt;</span><br><span class="line">&lt;template scope=&quot;test1&quot;&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;test1.games&#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123;test1.games2&#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/Category&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><p>专门在 vue 中实现集中式状态（数据）管理的一个 vue 插件,对 vue 应用中多个组件的共享状态进行集中式的管理（读与写），也是一种组件间通信的方式，适用于任意组件间的通信。</p>
<p>使用时机：多个组件需要共享数据时</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/fJo8ZF"><img src="https://z3.ax1x.com/2021/08/10/fJo8ZF.png" alt="fJo8ZF.png"></a></p>
<h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p>创建文件：src/store/index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">//使用vuex插件</span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line">//action--用于响应组件中的动作</span><br><span class="line">const actions=&#123;&#125;</span><br><span class="line">//mutations--用于操作数据state</span><br><span class="line">const mutations=&#123;&#125;</span><br><span class="line">//state--用于储存数据</span><br><span class="line">const state=&#123;&#125;</span><br><span class="line"></span><br><span class="line">//创建store</span><br><span class="line">const store =new Vuex.Store(&#123;</span><br><span class="line">actions,</span><br><span class="line">mutatuons,</span><br><span class="line">state,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//暴露store</span><br><span class="line">expore default store</span><br></pre></td></tr></table></figure>

<p>在 main.js 中创建 vm 时传入 store 配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import Vue form &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;/App.vue&#x27;</span><br><span class="line">//引用插件</span><br><span class="line">import vueResource from &#x27;vue-resource&#x27;</span><br><span class="line">import Vuex form &#x27;vuex&#x27;</span><br><span class="line">import store form  &#x27;./store&#x27;</span><br><span class="line"></span><br><span class="line">//使用插件</span><br><span class="line">Vue.use(vueResource);</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">el:&#x27;#app&#x27;,</span><br><span class="line">render:h=&gt;h(App),</span><br><span class="line">store,</span><br><span class="line">beforeCreate()&#123;</span><br><span class="line">Vue.prototype.$bus=this</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>初始化数据、配置 actions、mutations，操作文件 store.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex form &#x27;vuex&#x27;</span><br><span class="line">Vue.use (Vuex);</span><br><span class="line"></span><br><span class="line">const actions=&#123;</span><br><span class="line">//响应组件中的动组</span><br><span class="line">jia:function(context,value)&#123;</span><br><span class="line"> //context里中存放着一些方法</span><br><span class="line">context.commit(&#x27;JIA&#x27;,value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mutations=&#123;</span><br><span class="line">//执行jia</span><br><span class="line">JIA:function(state,value)&#123;</span><br><span class="line">state.sum+=value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//初始化数据</span><br><span class="line">const state=&#123;sum=0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//创建并暴露store</span><br><span class="line">export default new Vuex.store(&#123;</span><br><span class="line">actions:actions,</span><br><span class="line">mutations,</span><br><span class="line">state,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>组件中读取 vuex 中的数据：<code>$store.state.sum</code><br>组件中修改 vuex 中的数据：<code>$store.dispatch(&#39;actions中的方法名&#39;,数据)</code>或<code>$store.commit(&#39;mutatuins中的方法名&#39;,数据)</code></p>
<blockquote>
<p>若没有网络请求或其他业务逻辑，组件中也可以越过 actions，即不写 dispatch,直接编写 commit</p>
</blockquote>
<h4 id="四个-map-方法的使用"><a href="#四个-map-方法的使用" class="headerlink" title="四个 map 方法的使用"></a>四个 map 方法的使用</h4><ul>
<li>mapState:用于帮助我们映射 state 中的数据为计算属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line">//借助mapState生成计算属性，对象写法</span><br><span class="line">...mapState(&#123;sum:&#x27;sum&#x27;,school:&#x27;shchool&#x27;,subject:&#x27;subject&#x27;&#125;);</span><br><span class="line">//借助mapState生成计算属性，对象写法</span><br><span class="line">...mapState([&#x27;sum&#x27;,&#x27;shchool&#x27;,&#x27;subject&#x27;]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>mapGetters: 帮助我们映射 getters 中的数据为计算属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line">...mapGetters(&#123;b:&#x27;b&#x27;&#125;);</span><br><span class="line">...mapGetters([&#x27;b&#x27;]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>mapActions 方法：帮助我们生成与 action 对法的方法，即包含<code>$store.dispatch(xxx)</code>的函数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">...mapActions(&#123;inicrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;)</span><br><span class="line">...mapActions([&#x27;jiaOdd&#x27;,&#x27;jiaWait&#x27;])</span><br></pre></td></tr></table></figure>

<ul>
<li>mapMutations 方法：用于帮助我们生成与 mutations 对话的方法，即：包含$store.commit(xxx)的函数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">...mapMutations(&#123;increment:&#x27;JIA&#x27;,decrement:&#x27;JIAN&#x27;&#125;)</span><br><span class="line">...mapMutations([&#x27;JIA&#x27;,&#x27;JIAN&#x27;])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mapActions 与 mapMutations 使用时，若需要传递参数需要在模板中绑定事件时传递好参数，否则参数是事件对象</p>
</blockquote>
<h3 id="store-1"><a href="#store-1" class="headerlink" title="store"></a>store</h3><p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//创建store</span><br><span class="line">import vue from &#x27;vue&#x27;</span><br><span class="line">import vuex from &#x27;vuex&#x27;</span><br><span class="line">//应用vuex插件</span><br><span class="line">Vue.use(vuex);</span><br><span class="line"></span><br><span class="line">const test=&#123;</span><br><span class="line">//namespaced:true,</span><br><span class="line">action:&#123;&#125;,</span><br><span class="line">mutations:&#123;&#125;,</span><br><span class="line">state:&#123;&#125;,</span><br><span class="line">getters:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">//store：actions、mutations、state、getters</span><br><span class="line"></span><br><span class="line">//创建暴露store</span><br><span class="line">export default new Vuex.store&#123;</span><br><span class="line"> modules:&#123;</span><br><span class="line"> a:test,</span><br><span class="line"> b:xxx</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">,,,</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;mapState,mapGetters,mapMutations,mapActions &#125; form &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">name:&#x27;test&#x27;</span><br><span class="line">data()&#123;&#125;,</span><br><span class="line">computed:&#123;</span><br><span class="line">personList()&#123;</span><br><span class="line"> return this.$store.state.personAbout</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="模块化-命名空间"><a href="#模块化-命名空间" class="headerlink" title="模块化+命名空间"></a>模块化+命名空间</h3><p>为了让代码更好维护，让多种数据分类更加明确</p>
<p>修改 store.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">const countAbout=&#123;</span><br><span class="line">namespaced:true, //开启命名空间</span><br><span class="line">state:&#123;x:1&#125;,</span><br><span class="line">mutatuions:&#123;.........&#125;,</span><br><span class="line">actions:&#123;..&#125;,</span><br><span class="line">getters:&#123;</span><br><span class="line"></span><br><span class="line">bigSum(state)&#123;</span><br><span class="line"> return state.sum+1;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const personAbout=&#123;</span><br><span class="line">namespaced:true,</span><br><span class="line">state:&#123;..&#125;,</span><br><span class="line">mutations:&#123;&#125;,</span><br><span class="line">actions:&#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store=new Vuex.Store(&#123;</span><br><span class="line">modules:&#123;</span><br><span class="line">countAbout,</span><br><span class="line">personAbout</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 state 数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$store.state.personAbout.list</span><br><span class="line">//借助mapState读取</span><br><span class="line">...mapState(&#x27;countAbout&#x27;,[&#x27;sum,&#x27;school&#x27;,&#x27;subject&#x27;]);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 getters 数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$store.getters(&#x27;personAbout/firstPersonName&#x27;)</span><br><span class="line">//借助mapGetters读取</span><br><span class="line">...mapGetters(&#x27;countAbout&#x27;,[&#x27;bigSum&#x27;]);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 dispatch 数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$store.dispatch(&#x27;personAbout/addPersonWang&#x27;person`)</span><br><span class="line">//借助mapActions读取</span><br><span class="line">...mapActions(&#x27;countAbout&#x27;,&#123;incrementOdd:&#x27;jiaOdd&#x27;,incrementWait:&#x27;jiaWait&#x27;&#125;);</span><br></pre></td></tr></table></figure>

<p>开启命名空间后，组件读取 commit 数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this.$store.commit(&#x27;personAbout/ADD_PERSON&#x27;,person)</span><br><span class="line">...mapMutations(&#x27;countAbout&#x27;,&#123;increment:&quot;JIA&quot;,decrement:&quot;JIAN&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由就是一组映射（key-value）的对应关系,key 为路径，value 是 function 或 Component</p>
<ul>
<li>后端路由:value 是 function,用于处理客户端提交的请求，即服务端根据请求路径找到匹配的函数处理数据后，返回响应数据</li>
</ul>
<blockquote>
<p>路由组件一般放在 pages 文件夹，一般组件则放在 Component 文件夹；通过切换，隐藏了的路由组件，默认是被销毁的，需要的时候在去挂载；每个组件都有$route属性，里面存储着自己的路由信息<br>；整个应用只有一个route，可通过组件的$router 属性获取到。</p>
</blockquote>
<h4 id="vue-router：vue-的一个插件库，用来实现-SPA-应用（单个-web-应用，整个页面只有一个完整页面，只会做页面的局部更新，数据需要通过-ajax-请求获取）"><a href="#vue-router：vue-的一个插件库，用来实现-SPA-应用（单个-web-应用，整个页面只有一个完整页面，只会做页面的局部更新，数据需要通过-ajax-请求获取）" class="headerlink" title="vue-router：vue 的一个插件库，用来实现 SPA 应用（单个 web 应用，整个页面只有一个完整页面，只会做页面的局部更新，数据需要通过 ajax 请求获取）"></a>vue-router：vue 的一个插件库，用来实现 SPA 应用（单个 web 应用，整个页面只有一个完整页面，只会做页面的局部更新，数据需要通过 ajax 请求获取）</h4><p>src/router/index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//引入路由</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">//引入组件</span><br><span class="line">import About form &#x27;../components/About.vue&#x27;</span><br><span class="line">import Home form &#x27;../components/Home.vue&#x27;</span><br><span class="line"></span><br><span class="line">//创建并暴露一个路由器</span><br><span class="line">export default new VueRouter(&#123;</span><br><span class="line"></span><br><span class="line">routes:[</span><br><span class="line">&#123;path:&quot;/about&quot;,</span><br><span class="line">component:About</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&quot;/home&quot;</span><br><span class="line">component:Home</span><br><span class="line">children:[ //多级路由</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;news&#x27;, //不能写‘/news’</span><br><span class="line">component:News,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//引入Vue</span><br><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">//引入APP</span><br><span class="line">import App form &#x27;./App.vue&#x27;</span><br><span class="line">//引入VueRouter</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">//引入路由器</span><br><span class="line">import router form &#x27;./router&#x27;</span><br><span class="line"></span><br><span class="line">//应用插件</span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line">//创建vm</span><br><span class="line">new Vue(&#123;</span><br><span class="line">el:&quot;#app&quot;,</span><br><span class="line">render:h=&gt;h(App),</span><br><span class="line">router:router</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.js 跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!--用route-link代替a标签去跳转--&gt;</span><br><span class="line">&lt;!--active-class属性：该元素激活时触发样式，可配置高亮样式--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home/news&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带query参数（字符串写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home/news?id=xxx&amp;titel=xxx&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带query参数（对象写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;</span><br><span class="line">&#123;path:&#x27;/home/news&#x27;,</span><br><span class="line">query:&#123;id:xxx,titel:xxx&#125;</span><br><span class="line">&#125;&quot;&gt;&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;router-view&gt;&lt;/route-view&gt; &lt;!--指定组件呈现的位置--&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>接收 query 参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.query.id</span><br></pre></td></tr></table></figure>

<h4 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h4><p>简化路由跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:&#x27;/demo&#x27;,</span><br><span class="line">component:Demo,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line"> path:&#x27;test&#x27;</span><br><span class="line"> component:Test,</span><br><span class="line"> chilren:[</span><br><span class="line">  &#123;</span><br><span class="line">  name:&#x27;hello&#x27; //给路由命名</span><br><span class="line">  path:&#x27;welcome&#x27;,</span><br><span class="line">  component:Hello</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">name:weather</span><br><span class="line">path:&#x27;weather/:id/:title&#x27;, //使用占位符声明接收params参数</span><br><span class="line">component:Weather</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;name:hello&quot;&gt;test&lt;/router-link&gt;</span><br><span class="line">&lt;router-link :to=&quot;</span><br><span class="line">&#123;</span><br><span class="line">name:hello,</span><br><span class="line">query:&#123;id:xxx,title:xxx&#125;</span><br><span class="line">&#125;&quot;&gt;test&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带params参数（字符串写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;/home/news/id/title&quot;&gt;Home&lt;/router-link&gt;</span><br><span class="line">&lt;!--跳转路由并携带params参数（对象写法）--&gt;</span><br><span class="line">&lt;router-link  class=&quot;&quot; to=&quot;</span><br><span class="line">&#123;name:&#x27;weather&#x27;,</span><br><span class="line">params:&#123;id:xxx,titel:xxx&#125;</span><br><span class="line">&#125;&quot;&gt;&lt;/router-link&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>携带 params 参数时，若使用 to 的对象写法，则不能使用 path 配置项，必须用 name 配置下</p>
</blockquote>
<p>接收 params 参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$route.params.id</span><br></pre></td></tr></table></figure>

<h3 id="路由的-props-配置"><a href="#路由的-props-配置" class="headerlink" title="路由的 props 配置"></a>路由的 props 配置</h3><p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">export default new VueRouter(&#123;</span><br><span class="line"></span><br><span class="line">routes:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/home&#x27;,</span><br><span class="line">component:Home,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;test&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:title&#x27;,</span><br><span class="line">compomemt:Detail,</span><br><span class="line">//props的第一种写法，值为对象，该对象中的所有key-value都会以props的形式传给Detail组件</span><br><span class="line">props:&#123;a:1,b:&#x27;hello&#x27;&#125;</span><br><span class="line">//props的第二种写法，值为布尔值，若布尔值为真，就会把该路由组件收到的所有params参数，以props的形式传给detail组件。只能传params参数</span><br><span class="line">props：true</span><br><span class="line">//props的第三种写法，值为函数,该函数返回的对象中每一组key-value都会通过props传给Detail组件</span><br><span class="line">props($route)&#123;</span><br><span class="line">return &#123;id:$route.query.id,title:$route.query.title&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Detail.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line"> &lt;li&gt;&lt;/li&gt;</span><br><span class="line"> &lt;li&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">name:&#x27;Detail&#x27;,</span><br><span class="line">props:[&#x27;id&#x27;,&#x27;title&#x27;],</span><br><span class="line">computed:&#123;xxx&#125;,</span><br><span class="line">mounted()&#123;xxx&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><router-link>的 replace 属性<ul>
<li>作用：控制路由跳转时操作的浏览器历史记录的模式</li>
<li>历史记录的写入方式：<code>push</code>追加历史记录，<code>replace</code>替换当前记录；路由跳转时默认为<code>push</code></li>
<li><router-link replace >test</router-link></li>
</ul>
</li>
</ul>
<p>message.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">name:&#x27;massage&#x27;,</span><br><span class="line">data()&#123;&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">pushShow(m)&#123;</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line"></span><br><span class="line"> name:&#x27;test&#x27;,</span><br><span class="line"> query:&#123;</span><br><span class="line">  id:m.id,</span><br><span class="line">  title:m.title</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Banner.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name:&#x27;Banner&#x27;</span><br><span class="line"> methods:&#123;</span><br><span class="line"> back()&#123;this.$router.back()&#125;,</span><br><span class="line"> forward()&#123;this.$router.forward()&#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123;</span><br><span class="line"> name:&#x27;test&#x27;,</span><br><span class="line"> params:&#123;id:xxx,title:xxx&#125;</span><br><span class="line"> &#125;)</span><br><span class="line"></span><br><span class="line">this.$router.replace(&#123;</span><br><span class="line"> name:&#x27;test&#x27;,</span><br><span class="line"> params:&#123;id:xxx,title:xxx&#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="缓存路由组件"><a href="#缓存路由组件" class="headerlink" title="缓存路由组件"></a>缓存路由组件</h3><p>让不展示的路由组件保持挂载，不被销毁</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive include=&quot;News&quot;&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>home.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line"> &lt;ul&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">   &lt;router-link to=&quot;/home/new&quot;&gt;news&lt;/router-link&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">   &lt;router-link to=&quot;/home/message&quot;&gt;message&lt;/router-link&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;!--缓存多个路由组件--&gt;</span><br><span class="line">&lt;!-- &lt;keep-alive :include=&quot;[&#x27;&#x27;,&#x27;&#x27;]&quot;&gt;--&gt;</span><br><span class="line">&lt;!--缓存一个路由组价--&gt;</span><br><span class="line">&lt;keep-alive include=&quot;News&quot;&gt;</span><br><span class="line"> &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line"> name:&#x27;Home&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>New.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> export default&#123;</span><br><span class="line"> name:&#x27;News&#x27;,</span><br><span class="line"> data()&#123;</span><br><span class="line">  return&#123;</span><br><span class="line">  opacity:1</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> //路由组件所独有的两个钩子，用于捕获路由组件的激活状态</span><br><span class="line"> activated()&#123;console.log(&#x27;News组件被激活了&#x27;)&#125;</span><br><span class="line"> deactivated()&#123;console.log(&#x27;News组件失活了&#x27;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><p>对路由进行权限控制</p>
<ul>
<li>全局守卫</li>
</ul>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">const router=new VueRounter(&#123;</span><br><span class="line"> routes:[</span><br><span class="line">  &#123;</span><br><span class="line">  name:&#x27;test&#x27;,</span><br><span class="line">  path:&#x27;/about&#x27;,</span><br><span class="line">  component:About</span><br><span class="line">  meta:&#123;isAuth:true,title:&#x27;新闻&#x27;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"> ]</span><br><span class="line">//全局前置路由守卫---初始化时被调用，每次路由切换之前被调用</span><br><span class="line">router.beforeEach((to,from,next)=&gt;&#123;</span><br><span class="line">if(to.meta.isAuth)&#123;//判断当前路由是否需要进行权限控制</span><br><span class="line"> if(localStorage.getItem(&#x27;shool&#x27;)===&#x27;test&#x27;)&#123;next();&#125;</span><br><span class="line"> else&#123;alert(&#x27;学校名不对&#x27;)&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next(); //放行</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//全局前置路由守卫---初始化时被调用，每次路由切换之后被调用</span><br><span class="line">router.afterEach((to,from,next)=&gt;&#123;</span><br><span class="line">console.log(&#x27;后置路由守卫&#x27;);</span><br><span class="line">dovument.title=to.meta.title||&#x27;testTitle&#x27;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure>

<ul>
<li>独享守卫</li>
</ul>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">name:&#x27;news&#x27;,</span><br><span class="line">path:&#x27;news&#x27;,</span><br><span class="line">component:News,</span><br><span class="line">meta:&#123;isAuth:true,title:&#x27;新闻&#x27;&#125;,</span><br><span class="line">beforeEnter:(to,from,next)=&gt;&#123;</span><br><span class="line">if(to.meta.isAuth)&#123;//判断当前路由是否需要进行权限控制</span><br><span class="line"> if(localStorage.getItem(&#x27;shool&#x27;)===&#x27;test&#x27;)&#123;next();&#125;</span><br><span class="line"> else&#123;alert(&#x27;学校名不对&#x27;)&#125;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next(); //放行</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组件内守卫</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//进入守卫：进入该组件时被调用</span><br><span class="line">beforeRouteEnter(to,from,next)&#123;&#125;,</span><br><span class="line">//离开守卫：离开该组件时被调用</span><br><span class="line">beforeRouteLeave(to,from,next)&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由器工作模式"><a href="#路由器工作模式" class="headerlink" title="路由器工作模式"></a>路由器工作模式</h3><p>对于一个 url 来说<code>#</code>及其后的内容就是 hash 值;hash 值不会包含在 http 请求中，即 hash 值不会带给服务器。</p>
<ul>
<li>hash 模式:</li>
</ul>
<p>地址中永远带着#号，不美观；通过第三方手机 app 分享时可能会标记为不合法；但其兼容性好；</p>
<ul>
<li>history 模式:</li>
</ul>
<p>地址干净，兼容比 hash 略差，应用部署上线时需要后端人员支持，解决刷新页面服务端 404 的问题；</p>
<h2 id="Vue-UI-组件库"><a href="#Vue-UI-组件库" class="headerlink" title="Vue UI 组件库"></a>Vue UI 组件库</h2><p>移动端：<code>Vant</code>,<code>Cube UI</code>,<code>Mint UI</code></p>
<p>PC 端：<code>Element UI</code>, <code>IView UI</code></p>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入ElementUI组件库</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">//引入ElementUI全部样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">ues</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"> <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span></span><br><span class="line"> <span class="attr">render</span>:<span class="function"><span class="params">h</span>=&gt;</span><span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>balel.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line"><span class="attr">presets</span>:[</span><br><span class="line"> <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,</span><br><span class="line"> [<span class="string">&quot;@babel/present-env&quot;</span>,&#123;<span class="string">&quot;modules&quot;</span>:<span class="literal">false</span>&#125;],</span><br><span class="line">],</span><br><span class="line"><span class="attr">plugins</span>:[</span><br><span class="line">[</span><br><span class="line"> <span class="string">&quot;component&quot;</span>,</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="string">&quot;libraryName&quot;</span>:<span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line"> <span class="string">&quot;styleLibraryName&quot;</span>:<span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line"> &#125;</span><br><span class="line">]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="vue-刷新当前页面"><a href="#vue-刷新当前页面" class="headerlink" title="vue 刷新当前页面"></a>vue 刷新当前页面</h3><p>用 vue-router 重新路由到当前页面，页面是不进行刷新的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//###ctrl+F5刷新</span></span><br><span class="line">location.<span class="title function_">reload</span>()；</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">router</span>.<span class="title function_">go</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//局部刷新</span></span><br><span class="line"><span class="number">1.</span> 跳转到一个空白页，再跳转回来</span><br><span class="line"><span class="number">2.</span> v-<span class="keyword">if</span>控制router-view的存亡来实现刷新</span><br></pre></td></tr></table></figure>

<h3 id="VUE-实现-checkbox-的勾选"><a href="#VUE-实现-checkbox-的勾选" class="headerlink" title="VUE 实现 checkbox 的勾选"></a>VUE 实现 checkbox 的勾选</h3><p>给选择按钮绑定 v-mode 变量，值为 true 时就是选中状态，绑定点击事件，执行勾选操作</p>
<h3 id="自定义-checkbox-样式"><a href="#自定义-checkbox-样式" class="headerlink" title="自定义 checkbox 样式"></a>自定义 checkbox 样式</h3><p>通过 label 标签将 input 包裹住，通过 label for 绑定 input id，<br>将 input 设置 opacity: 0;不可见，再通过给设置 lable 标签或其中 div 来设置 checkbox 的默认样式及选中状态样式</p>
<h3 id="特殊符号（Unicode）"><a href="#特殊符号（Unicode）" class="headerlink" title="特殊符号（Unicode）"></a>特殊符号（Unicode）</h3><p><code>https://www.cnblogs.com/Whikiey/archive/2011/01/05/1926220.html</code></p>
<h3 id="vue-中native修饰符只对组件有效"><a href="#vue-中native修饰符只对组件有效" class="headerlink" title="vue 中native修饰符只对组件有效"></a>vue 中<code>native</code>修饰符只对组件有效</h3><h3 id="v-model-双向绑定-computed-属性，-若不同时加-get-和-set-则报错"><a href="#v-model-双向绑定-computed-属性，-若不同时加-get-和-set-则报错" class="headerlink" title="v-model 双向绑定 computed 属性， 若不同时加 get 和 set 则报错"></a>v-model 双向绑定 computed 属性， 若不同时加 get 和 set 则报错</h3><h3 id="当一层-flex-布局的时候，设置子元素的-width-100-就没有问题"><a href="#当一层-flex-布局的时候，设置子元素的-width-100-就没有问题" class="headerlink" title="当一层 flex 布局的时候，设置子元素的 width:100%就没有问题"></a>当一层 flex 布局的时候，设置子元素的 width:100%就没有问题</h3><p>当页面中多层 flex 布局嵌套的时候，设置其中子元素的 width：100%会不起作用。可把元素设置为绝对定位来解决该问题。</p>
<h3 id="动态修改样式"><a href="#动态修改样式" class="headerlink" title="动态修改样式"></a>动态修改样式</h3><p>可通过 v-bind 绑定 style+配合模板字符串或者<code>&lt;h2 :style=&quot;&#123;key(属性名):value(属性值)&#125;&quot;&gt;</code>或者<code>&lt;h2 :style=&quot;&#39;key(属性名):&#39;+value(值)+&#39;px&#39;&quot;&gt;</code>来实现。</p>
<h2 id="webStorage"><a href="#webStorage" class="headerlink" title="webStorage"></a>webStorage</h2><p>存储内容大小一般支持 5MB 左右<br>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储。<br>相关 api：</p>
<ol>
<li>xxxxStorage.setItem(‘key’,’value’);接受一个键和值作为参数，把键值添加到存储中，若存在则更新。</li>
<li>xxxxStorage.getItem(‘person’);接受一个键名作为参数,返回键名对应的值。</li>
<li>xxxStorage.removeItem(‘key);接受一个键名作为参数,删除键名和其对应的值。</li>
<li>xxxStorage.clear();清空存储中的所有数据。</li>
</ol>
<p>注意：1.SessionStorage 存储内容会随浏览器窗口的关闭而消失；2.LocalStorage 存储的内容，需手动清除才会消失。3.xxxxx.Storage.getItem(xx);若 xx 对应的值获取不到则返回 null；4.JSON.parse(null)的结果依然是 null。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
