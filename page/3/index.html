<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.baidu.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="http://www.baidu.com/page/3/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.baidu.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/05/22/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/22/20-22-11/" class="post-title-link" itemprop="url">JS实例</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-22 20:22:11" itemprop="dateCreated datePublished" datetime="2021-05-22T20:22:11+08:00">2021-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-15 20:53:15" itemprop="dateModified" datetime="2023-02-15T20:53:15+08:00">2023-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><h2 id="判断是否是pc设备"><a href="#判断是否是pc设备" class="headerlink" title="判断是否是pc设备"></a>判断是否是pc设备</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function IsPC() &#123;</span><br><span class="line">    var userAgentInfo = navigator.userAgent;</span><br><span class="line">    console.log(userAgentInfo);</span><br><span class="line">    var Agents = [&quot;Android&quot;, &quot;iPhone&quot;,&quot;SymbianOS&quot;, &quot;Windows Phone&quot;, &quot;iPod&quot;];</span><br><span class="line">    var flag = true;</span><br><span class="line">    for (var v = 0; v &lt; Agents.length; v++) &#123;</span><br><span class="line">        if (userAgentInfo.indexOf(Agents[v]) &gt; 0) &#123;</span><br><span class="line">            flag = false;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(window.screen.width&gt;=768)&#123;</span><br><span class="line">         flag = true;</span><br><span class="line">    &#125;</span><br><span class="line">    return flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">window.onload()=function()&#123;</span><br><span class="line">var oUl1=document.getElementById(&quot;ul1&quot;);</span><br><span class="line">var oDiv1=document.getElementById(&quot;div1&quot;);</span><br><span class="line">//将图片添加到末尾</span><br><span class="line">oUl1.innerHTML+=oUl1.innerHTML;</span><br><span class="line">//重新设置一下ul的宽</span><br><span class="line">oUl1.style.width=220*8+&quot;px&quot;;</span><br><span class="line">setInterval(function()&#123;</span><br><span class="line">//让ul向左运动一个图片位置</span><br><span class="line">startMove(oUl1,&#123;left:oUl1.offsetLeft-220&#125;,function()&#123;</span><br><span class="line">if(oUl1.offsetLeft&lt;=-oUl1.offsetWidth/2)&#123;</span><br><span class="line">oUl1.style.left=&quot;opx&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,2000);</span><br></pre></td></tr></table></figure>


<h3 id="拖拽"><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</h3><ul>
<li>mousedown </li>
</ul>
<p>记录鼠标按下的位置和被拖拽物体相对距离</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//clientX为鼠标位置，offsetLeft为盒子位置</span><br><span class="line">var offsetX=e.clientX-node.offsetLeft;</span><br><span class="line">var offsetY=e.clientY-node.offsetTop;</span><br></pre></td></tr></table></figure>


<ul>
<li>mousemove</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//鼠标移动的距离减去相对距离=盒子移动的距离</span><br><span class="line">node.style.left=e.clientX-offsetX+&#x27;px&#x27;;</span><br><span class="line">node.style.top=e.clientY-offsetY+&#x27;px&#x27;;</span><br></pre></td></tr></table></figure>

<ul>
<li>mouseup</li>
</ul>
<p>取消拖拽</p>
<p><em>实例：</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//父盒子与子盒子要有定位</span><br><span class="line">window.onload=function()&#123;</span><br><span class="line">var oDiv=document.getElementById(&quot;div1&quot;);</span><br><span class="line">oDiv.onmousedown=function(ev)&#123;</span><br><span class="line">var e=ev||window.event;</span><br><span class="line">var offsetX=e.clientX-oDiv.offsetLeft;</span><br><span class="line">var offsetY=e.clientY-oDiv.offsetTop;</span><br><span class="line"></span><br><span class="line">document.onmousemove=function(ev)&#123;</span><br><span class="line">	var e=ev||window.event;</span><br><span class="line">oDiv.style.left=e.clientX-offsetX+&quot;px&quot;;</span><br><span class="line">oDiv.style.top=e.clientY-offsetY+&quot;px&quot;;</span><br><span class="line">&#125;&#125;</span><br><span class="line">//绑定到document上，防止鼠标移动过快,离开节点</span><br><span class="line">document.onmouseup=function()&#123;</span><br><span class="line">document.onmousemove=null;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="动态创建表单并提交"><a href="#动态创建表单并提交" class="headerlink" title="动态创建表单并提交"></a>动态创建表单并提交</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// JavaScript 构建一个 form </span><br><span class="line">function MakeForm() </span><br><span class="line">&#123; </span><br><span class="line">  // 创建一个 form </span><br><span class="line">  var form1 = document.createElement(&quot;form&quot;); </span><br><span class="line">  form1.id = &quot;form1&quot;; </span><br><span class="line">  form1.name = &quot;form1&quot;; </span><br><span class="line">  // 添加到 body 中 </span><br><span class="line">  document.body.appendChild(form1); </span><br><span class="line">  // 创建一个输入 </span><br><span class="line">  var input = document.createElement(&quot;input&quot;); </span><br><span class="line">  // 设置相应参数 </span><br><span class="line">  input.type = &quot;text&quot;; </span><br><span class="line">  input.name = &quot;value1&quot;; </span><br><span class="line">  input.value = &quot;1234567&quot;; </span><br><span class="line">  // 将该输入框插入到 form 中 </span><br><span class="line">  form1.appendChild(input); </span><br><span class="line">  // form 的提交方式 </span><br><span class="line">  form1.method = &quot;POST&quot;; </span><br><span class="line">  // form 提交路径 </span><br><span class="line">  form1.action = &quot;/servlet/info&quot;; </span><br><span class="line">  // 对该 form 执行提交 </span><br><span class="line">  form1.submit(); </span><br><span class="line">  // 删除该 form </span><br><span class="line">  document.body.removeChild(form1); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="虚拟列表"><a href="#虚拟列表" class="headerlink" title="虚拟列表"></a>虚拟列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;cube-recycle-list&quot; id=&quot;container&quot;&gt;</span><br><span class="line">    &lt;!-- 可见区域列表 --&gt;</span><br><span class="line">    &lt;div :style=&quot;&#123; height: heights + &#x27;px&#x27; &#125;&quot;&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        v-for=&quot;(item, index) in visibleItems&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">        class=&quot;cube-recycle-list-item&quot;</span><br><span class="line">        :style=&quot;&#123; transform: &#x27;translate(0,&#x27; + item.top + &#x27;px)&#x27; &#125;&quot;</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;!-- 内容 --&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          :style=&quot;</span><br><span class="line">            &#x27;height: &#x27; +</span><br><span class="line">            (index + startIndex + 1) * 10 +</span><br><span class="line">            &#x27;px; width: 100%; background-color: aqua&#x27;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; index + startIndex &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 预加载,用于动态获取宽高 --&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      class=&quot;cube-recycle-list-item&quot;</span><br><span class="line">      v-for=&quot;(item, index) in preItems&quot;</span><br><span class="line">      :ref=&quot;(el) =&gt; itemDom(el, item.index, index)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 内容 --&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        :style=&quot;</span><br><span class="line">          &#x27;height: &#x27; +</span><br><span class="line">          (item.index + 1) * 10 +</span><br><span class="line">          &#x27;px; width: 100%; background-color: aqua&#x27;</span><br><span class="line">        &quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; item.index &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; nextTick, ref, computed, onMounted, onBeforeUnmount &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;List&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let n = 0;</span><br><span class="line">    let items = ref([]);</span><br><span class="line">    let list = ref([]);</span><br><span class="line">    let loadings = ref(false);</span><br><span class="line">    let heights = ref(0);</span><br><span class="line">    let pageNo = ref(0);</span><br><span class="line">    let startIndex = ref(0);</span><br><span class="line">    let refs = ref([]);</span><br><span class="line">    let itemDom = (el, index, i) =&gt; &#123;//获取预加载的元素节点</span><br><span class="line">      if (i == 0) &#123;</span><br><span class="line">        refs.value = [];</span><br><span class="line">      &#125;</span><br><span class="line">      refs.value.push(&#123; index, el &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    let size = ref(15); //每页</span><br><span class="line">    let visibleItems = computed(() =&gt; &#123;</span><br><span class="line">      return items.value.slice(</span><br><span class="line">        Math.max(0, startIndex.value - size.value),</span><br><span class="line">        Math.min(items.value.length, startIndex.value + size.value)</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">    let preItems = computed(() =&gt; &#123;//先加载元素获取其宽高，然后过滤去掉元素</span><br><span class="line">      return items.value.filter(function (item) &#123;</span><br><span class="line">        return !item.height;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    //更新每个item顶部距离和 整个列表的高</span><br><span class="line">    let updateItemTop = () =&gt; &#123;</span><br><span class="line">      let height = 0;</span><br><span class="line">      let pre;</span><br><span class="line">      let current;</span><br><span class="line">      // loop all items to</span><br><span class="line">      for (let i = 0; i &lt; items.value.length; i++) &#123;</span><br><span class="line">        pre = items.value[i - 1];</span><br><span class="line">        current = items.value[i];</span><br><span class="line">        // it is empty in array</span><br><span class="line">        /* istanbul ignore if */</span><br><span class="line">        if (!items.value[i]) &#123;</span><br><span class="line">          height += 0;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          current.top = pre ? pre.top + pre.height : 0;</span><br><span class="line">          height += current.height;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      heights.value = height;</span><br><span class="line">    &#125;;</span><br><span class="line">    //更新可见区域的起始序号</span><br><span class="line">    let updateStartIndex = () =&gt; &#123;</span><br><span class="line">      // update visible items start index</span><br><span class="line">      let top = document.getElementById(&quot;container&quot;).scrollTop;</span><br><span class="line">      let item;</span><br><span class="line">      for (let i = 0; i &lt; items.value.length; i++) &#123;</span><br><span class="line">        item = items.value[i];</span><br><span class="line">        if (!item || item.top &gt; top) &#123;</span><br><span class="line">          startIndex.value = Math.max(0, i - 1);</span><br><span class="line">          break;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    ///加载每一页数据的高度</span><br><span class="line">    let loadItemsByIndex = () =&gt; &#123;</span><br><span class="line">      const start = (pageNo.value - 1) * size.value;</span><br><span class="line">      const end = pageNo.value * size.value;</span><br><span class="line">      let promiseTasks = [];</span><br><span class="line">      let item;</span><br><span class="line">      for (let i = start; i &lt; end; i++) &#123;</span><br><span class="line">        //处理原数据</span><br><span class="line">        item = items.value[i];</span><br><span class="line">        if (!item) &#123;</span><br><span class="line">          items.value[i] = &#123;</span><br><span class="line">            index: i,</span><br><span class="line">            data: list.value[i] || &#123;&#125;,</span><br><span class="line">            height: 0,</span><br><span class="line">            top: -1000,</span><br><span class="line">          &#125;;</span><br><span class="line">          promiseTasks.push(</span><br><span class="line">            nextTick().then(() =&gt; &#123;</span><br><span class="line">              /////  动态获取每个item的高</span><br><span class="line">              for (let j = 0; j &lt; refs.value.length; j++) &#123;</span><br><span class="line">                if (refs.value[j].index == i) &#123;</span><br><span class="line">                  let node = refs.value[j].el;</span><br><span class="line">                  if (node) &#123;</span><br><span class="line">                    items.value[i].height = node.offsetHeight;</span><br><span class="line">                  &#125; else &#123;</span><br><span class="line">                    items.value[i].height = 0;</span><br><span class="line">                  &#125;</span><br><span class="line">                  break;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      //加载一页的高和item的顶</span><br><span class="line">      window.Promise.all(promiseTasks).then(() =&gt; &#123;</span><br><span class="line">        console.log(items.value);</span><br><span class="line">        updateItemTop();</span><br><span class="line">        updateStartIndex();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    //获取数据</span><br><span class="line">    let load = () =&gt; &#123;</span><br><span class="line">      if (!loadings.value) &#123;</span><br><span class="line">        console.log(&quot;load&quot;);</span><br><span class="line">        let arr = [];</span><br><span class="line">        const promiseFetch = new Promise((resolve) =&gt; &#123;</span><br><span class="line">          setTimeout(() =&gt; &#123;</span><br><span class="line">            arr = [];</span><br><span class="line">            for (let i = 0; i &lt; size.value; i++) &#123;</span><br><span class="line">              arr.push(&#123; n: n++ &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            resolve(arr);</span><br><span class="line">          &#125;, 1000);</span><br><span class="line">        &#125;);</span><br><span class="line">        pageNo.value++;</span><br><span class="line">        loadings.value = true; //加载中</span><br><span class="line">        promiseFetch.then((res) =&gt; &#123;</span><br><span class="line">          loadings.value = false; //取消加载中</span><br><span class="line">          //追加数据</span><br><span class="line">          list.value.push(...res);</span><br><span class="line">          ///加载item的高度</span><br><span class="line">          loadItemsByIndex();</span><br><span class="line">          //if (res.length &lt; size.value) &#123;</span><br><span class="line">          //没有更多数据</span><br><span class="line">          // updateItemTop();</span><br><span class="line">          //updateStartIndex();</span><br><span class="line">          // &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    let _onScroll = () =&gt; &#123;</span><br><span class="line">      if (</span><br><span class="line">        document.getElementById(&quot;container&quot;).scrollTop +</span><br><span class="line">          document.getElementById(&quot;container&quot;).offsetHeight &gt;</span><br><span class="line">        heights.value - 100</span><br><span class="line">      ) &#123;</span><br><span class="line">        //判断是否到底</span><br><span class="line">        load();</span><br><span class="line">      &#125;</span><br><span class="line">      //不停更新可见区域索引</span><br><span class="line">      updateStartIndex();</span><br><span class="line">    &#125;;</span><br><span class="line">    let _onResize = () =&gt; &#123;</span><br><span class="line">      //重新加载全部数据的高度</span><br><span class="line">      items.value.forEach((item) =&gt; &#123;</span><br><span class="line">        item.loaded = false;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      let node = document.getElementById(&quot;container&quot;);</span><br><span class="line"></span><br><span class="line">      console.log(node);</span><br><span class="line">      node.addEventListener(&quot;scroll&quot;, _onScroll);</span><br><span class="line">      window.addEventListener(&quot;resize&quot;, _onResize);</span><br><span class="line">      load();</span><br><span class="line">    &#125;);</span><br><span class="line">    onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">      document</span><br><span class="line">        .getElementById(&quot;container&quot;)</span><br><span class="line">        .removeEventListener(&quot;scroll&quot;, _onScroll);</span><br><span class="line">      window.removeEventListener(&quot;resize&quot;, _onResize);</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      items,</span><br><span class="line">      heights,</span><br><span class="line">      startIndex,</span><br><span class="line">      itemDom,</span><br><span class="line">      size,</span><br><span class="line">      visibleItems,</span><br><span class="line">      preItems,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.cube-recycle-list &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  height: 100%;</span><br><span class="line">  overflow-x: hidden;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line">.cube-recycle-list-item &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="js获取选择的文本"><a href="#js获取选择的文本" class="headerlink" title="js获取选择的文本"></a>js获取选择的文本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">⾮IE浏览器获取选中⽂本：</span><br><span class="line">1. document.getSelection().toString()</span><br><span class="line">如果想获取选中部分的html代码，由于getSelection()⽅法返回的是⼀个Range对象，就需要⽤到Range对象的cloneContents⽅法，cloneContents⽅法把Range对象的内容复制到⼀个DocumentFragment对象中，我们需要创建⼀个dom元素，然后将该DocumentFragment对象添加到创建的dom元素中，通过获取它的innerHTML来获取选择部分的html代码.</span><br><span class="line"></span><br><span class="line">2. document.selection.createRange().text;</span><br><span class="line">3. document.selection.createRange().htmlText;</span><br></pre></td></tr></table></figure>
<h2 id="数组深拷贝"><a href="#数组深拷贝" class="headerlink" title="数组深拷贝"></a>数组深拷贝</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">es5:</span><br><span class="line">方法一：适用 单层 数组嵌套的深拷贝</span><br><span class="line">var ary2 = ary1.concat();</span><br><span class="line"> </span><br><span class="line">方法二：适用 多层 数组嵌套的深拷贝</span><br><span class="line">var ary2 = JSON.parse(JSON.stringify(ary1));</span><br><span class="line">　　//此方法适用于Oject的深度拷贝，因为Array属于Oject类型，所以也适用于此处；</span><br><span class="line">　　//需要注意的是：作为Oject的深度拷贝时，要复制的function会直接消失，所以这个方法只能用在单纯只有数据的对象。</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">es6:</span><br><span class="line">// 方法三：适用 单层 数组嵌套的深拷贝</span><br><span class="line">var ary2 = [...ary1];</span><br><span class="line"> </span><br><span class="line">// 方法四：适用 单层 数组嵌套的深拷贝</span><br><span class="line">var [...ary2] = ary1;</span><br><span class="line"> </span><br><span class="line">//方法五：通过递归实现 多层 的深拷贝</span><br><span class="line"></span><br><span class="line">function deepCopy(source)&#123;</span><br><span class="line">        if (typeof source != &quot;object&quot;) &#123;</span><br><span class="line">           return source;</span><br><span class="line">        &#125;</span><br><span class="line">        if (source == null) &#123;</span><br><span class="line">            return source;</span><br><span class="line">        &#125;</span><br><span class="line">        var newObj = source.constructor === Array ? [] : &#123;&#125;;  //开辟一块新的内存空间</span><br><span class="line">        for (var i in source) &#123;</span><br><span class="line">             newObj[i] = deepCopy(source[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        return newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="js复制文本"><a href="#js复制文本" class="headerlink" title="js复制文本"></a>js复制文本</h2><p>简介<br>目前，一共有三种方法可以实现剪贴板操作。</p>
<p>1 Document.execCommand()方法<br>2 异步的 Clipboard API<br>3 copy事件和paste事件</p>
<p>一、Document.execCommand() 方法<br>Document.execCommand()是操作剪贴板的传统方法，各种浏览器都支持。</p>
<p>它支持复制、剪切和粘贴这三个操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">document.execCommand(&#x27;copy&#x27;)（复制）</span><br><span class="line">document.execCommand(&#x27;cut&#x27;)（剪切）</span><br><span class="line">document.execCommand(&#x27;paste&#x27;)（粘贴）</span><br></pre></td></tr></table></figure>
<p>（1）复制操作</p>
<p>复制时，先选中文本，然后调用document.execCommand(‘copy’)，选中的文本就会进入剪贴板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const inputElement = document.querySelector(&#x27;#input&#x27;);</span><br><span class="line">inputElement.select();</span><br><span class="line">document.execCommand(&#x27;copy&#x27;);</span><br></pre></td></tr></table></figure>
<p>上面示例中，脚本先选中输入框inputElement里面的文字（inputElement.select()），然后document.execCommand(‘copy’)将其复制到剪贴板。</p>
<p>注意，复制操作最好放在事件监听函数里面，由用户触发（比如用户点击按钮）。如果脚本自主执行，某些浏览器可能会报错。</p>
<p>（2）粘贴操作</p>
<p>粘贴时，调用document.execCommand(‘paste’)，就会将剪贴板里面的内容，输出到当前的焦点元素中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const pasteText = document.querySelector(&#x27;#output&#x27;);</span><br><span class="line">pasteText.focus();</span><br><span class="line">document.execCommand(&#x27;paste&#x27;);</span><br></pre></td></tr></table></figure>


<p>（3）缺点</p>
<p>Document.execCommand()方法虽然方便，但是有一些缺点。</p>
<p>首先，它只能将选中的内容复制到剪贴板，无法向剪贴板任意写入内容。</p>
<p>其次，它是同步操作，如果复制/粘贴大量数据，页面会出现卡顿。有些浏览器还会跳出提示框，要求用户许可，这时在用户做出选择前，页面会失去响应。</p>
<p>为了解决这些问题，浏览器厂商提出了异步的 Clipboard API。</p>
<p>二、异步 Clipboard API<br>Clipboard API是下一代的剪贴板操作方法，比传统的document.execCommand()方法更强大、更合理。</p>
<p>它的所有操作都是异步的，返回 Promise 对象，不会造成页面卡顿。而且，它可以将任意内容（比如图片）放入剪贴板。</p>
<p>navigator.clipboard属性返回 Clipboard 对象，所有操作都通过这个对象进行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const clipboardObj = navigator.clipboard;</span><br></pre></td></tr></table></figure>
<p>如果navigator.clipboard属性返回undefined，就说明当前浏览器不支持这个 API。</p>
<p>由于用户可能把敏感数据（比如密码）放在剪贴板，允许脚本任意读取会产生安全风险，所以这个 API 的安全限制比较多。</p>
<p>首先，Chrome 浏览器规定，只有 HTTPS 协议的页面才能使用这个 API。不过，开发环境（localhost）允许使用非加密协议。</p>
<p>其次，调用时需要明确获得用户的许可。权限的具体实现使用了 Permissions API，跟剪贴板相关的有两个权限：clipboard-write（写权限）和clipboard-read（读权限）。<br>“写权限”自动授予脚本，而”读权限”必须用户明确同意给予。</p>
<p>也就是说，写入剪贴板，脚本可以自动完成，但是读取剪贴板时，浏览器会弹出一个对话框，询问用户是否同意读取。`</p>
<p>另外，需要注意的是，脚本读取的总是当前页面的剪贴板。这带来的一个问题是，如果把相关的代码粘贴到开发者工具中直接运行，可能会报错，因为这时的当前页面是开发者工具的窗口，而不是网页页面。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(async () =&gt; &#123;</span><br><span class="line">  const text = await navigator.clipboard.readText();</span><br><span class="line">  console.log(text);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>如果你把上面的代码，粘贴到开发者工具里面运行，就会报错。因为代码运行的时候，开发者工具窗口是当前页，这个页面不存在 Clipboard API 依赖的 DOM 接口。一个解决方法就是，相关代码放到setTimeout()里面延迟运行，在调用函数之前快速点击浏览器的页面窗口，将其变成当前页。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(async () =&gt; &#123;</span><br><span class="line">  const text = await navigator.clipboard.readText();</span><br><span class="line">  console.log(text);</span><br><span class="line">&#125;, 2000);</span><br></pre></td></tr></table></figure>
<p>上面代码粘贴到开发者工具运行后，快速点击一下网页的页面窗口，使其变为当前页，这样就不会报错了。</p>
<p>三、Clipboard 对象<br>Clipboard 对象提供了四个方法，用来读写剪贴板。它们都是异步方法，返回 Promise 对象。</p>
<p>4.1 Clipboard.readText()<br>Clipboard.readText()方法用于复制剪贴板里面的文本数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">document.body.addEventListener(</span><br><span class="line">  &#x27;click&#x27;,</span><br><span class="line">  async (e) =&gt; &#123;</span><br><span class="line">    const text = await navigator.clipboard.readText();</span><br><span class="line">    console.log(text);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>上面示例中，用户点击页面后，就会输出剪贴板里面的文本。注意，浏览器这时会跳出一个对话框，询问用户是否同意脚本读取剪贴板。</p>
<p>如果用户不同意，脚本就会报错。这时，可以使用try…catch结构，处理报错。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">async function getClipboardContents() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const text = await navigator.clipboard.readText();</span><br><span class="line">    console.log(&#x27;Pasted content: &#x27;, text);</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.error(&#x27;Failed to read clipboard contents: &#x27;, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.2 Clipboard.read()<br>Clipboard.read()方法用于复制剪贴板里面的数据，可以是文本数据，也可以是二进制数据（比如图片）。该方法需要用户明确给予许可。</p>
<p>该方法返回一个 Promise 对象。一旦该对象的状态变为 resolved，就可以获得一个数组，每个数组成员都是 ClipboardItem 对象的实例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">async function getClipboardContents() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const clipboardItems = await navigator.clipboard.read();</span><br><span class="line">    for (const clipboardItem of clipboardItems) &#123;</span><br><span class="line">      for (const type of clipboardItem.types) &#123;</span><br><span class="line">        const blob = await clipboardItem.getType(type);</span><br><span class="line">        console.log(URL.createObjectURL(blob));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.error(err.name, err.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ClipboardItem 对象表示一个单独的剪贴项，每个剪贴项都拥有ClipboardItem.types属性和ClipboardItem.getType()方法。</p>
<p>ClipboardItem.types属性返回一个数组，里面的成员是该剪贴项可用的 MIME 类型，比如某个剪贴项可以用 HTML 格式粘贴，也可以用纯文本格式粘贴，那么它就有两个 MIME 类型（text/html和text/plain）。</p>
<p>ClipboardItem.getType(type)方法用于读取剪贴项的数据，返回一个 Promise 对象。该方法接受剪贴项的 MIME 类型作为参数，返回该类型的数据，该参数是必需的，否则会报错。</p>
<p>4.3 Clipboard.writeText()<br>Clipboard.writeText()方法用于将文本内容写入剪贴板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">document.body.addEventListener(</span><br><span class="line">‘click’,</span><br><span class="line">async (e) =&gt; &#123;</span><br><span class="line">await navigator.clipboard.writeText(‘Yo’)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>上面示例是用户在网页点击后，脚本向剪贴板写入文本数据。</p>
<p>该方法不需要用户许可，但是最好也放在try…catch里面防止报错。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">async function copyPageUrl() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await navigator.clipboard.writeText(location.href);</span><br><span class="line">    console.log(&#x27;Page URL copied to clipboard&#x27;);</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.error(&#x27;Failed to copy: &#x27;, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.4 Clipboard.write()<br>Clipboard.write()方法用于将任意数据写入剪贴板，可以是文本数据，也可以是二进制数据。</p>
<p>该方法接受一个 ClipboardItem 实例作为参数，表示写入剪贴板的数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  const imgURL = &#x27;https://dummyimage.com/300.png&#x27;;</span><br><span class="line">  const data = await fetch(imgURL);</span><br><span class="line">  const blob = await data.blob();</span><br><span class="line">  await navigator.clipboard.write([</span><br><span class="line">    new ClipboardItem(&#123;</span><br><span class="line">      [blob.type]: blob</span><br><span class="line">    &#125;)</span><br><span class="line">  ]);</span><br><span class="line">  console.log(&#x27;Image copied.&#x27;);</span><br><span class="line">&#125; catch (err) &#123;</span><br><span class="line">  console.error(err.name, err.message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面示例中，脚本向剪贴板写入了一张图片。注意，Chrome 浏览器目前只支持写入 PNG 格式的图片。</p>
<p>ClipboardItem()是浏览器原生提供的构造函数，用来生成ClipboardItem实例，它接受一个对象作为参数，该对象的键名是数据的 MIME 类型，键值就是数据本身。</p>
<p>下面的例子是将同一个剪贴项的多种格式的值，写入剪贴板，一种是文本数据，另一种是二进制数据，供不同的场合粘贴使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function copy() &#123;</span><br><span class="line">const image = await fetch(‘kitten.png’);</span><br><span class="line">const text = new Blob([‘Cute sleeping kitten’], &#123;type: ‘text/plain’&#125;);</span><br><span class="line">const item = new ClipboardItem(&#123;</span><br><span class="line">‘text/plain’: text,</span><br><span class="line">‘image/png’: image</span><br><span class="line">&#125;);</span><br><span class="line">await navigator.clipboard.write([item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>五、copy 事件，cut 事件<br>用户向剪贴板放入数据时，将触发copy事件。</p>
<p>下面的示例是将用户放入剪贴板的文本，转为大写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const source = document.querySelector(&#x27;.source&#x27;);</span><br><span class="line"></span><br><span class="line">source.addEventListener(&#x27;copy&#x27;, (event) =&gt; &#123;</span><br><span class="line">  const selection = document.getSelection();</span><br><span class="line">  event.clipboardData.setData(&#x27;text/plain&#x27;, selection.toString().toUpperCase());</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面示例中，事件对象的clipboardData属性包含了剪贴板数据。它是一个对象，有以下属性和方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Event.clipboardData.setData(type, data)：修改剪贴板数据，需要指定数据类型。</span><br><span class="line">Event.clipboardData.getData(type)：获取剪贴板数据，需要指定数据类型。</span><br><span class="line">Event.clipboardData.clearData([type])：清除剪贴板数据，可以指定数据类型。如果不指定类型，将清除所有类型的数据。</span><br><span class="line">Event.clipboardData.items：一个类似数组的对象，包含了所有剪贴项，不过通常只有一个剪贴项。</span><br></pre></td></tr></table></figure>
<p>下面的示例是拦截用户的复制操作，将指定内容放入剪贴板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const clipboardItems = [];</span><br><span class="line"></span><br><span class="line">document.addEventListener(‘copy’, async (e) =&gt; &#123;</span><br><span class="line">e.preventDefault();</span><br><span class="line">try &#123;</span><br><span class="line">let clipboardItems = [];</span><br><span class="line">for (const item of e.clipboardData.items) &#123;</span><br><span class="line">if (!item.type.startsWith(‘image/’)) &#123;</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">clipboardItems.push(</span><br><span class="line">new ClipboardItem(&#123;</span><br><span class="line">[item.type]: item,</span><br><span class="line">&#125;)</span><br><span class="line">);</span><br><span class="line">await navigator.clipboard.write(clipboardItems);</span><br><span class="line">console.log(‘Image copied.’);</span><br><span class="line">&#125;</span><br><span class="line">&#125; catch (err) &#123;</span><br><span class="line">console.error(err.name, err.message);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面示例中，先使用e.preventDefault()取消了剪贴板的默认操作，然后由脚本接管复制操作。</p>
<p>cut事件则是在用户进行剪切操作时触发，它的处理跟copy事件完全一样，也是从Event.clipboardData属性拿到剪切的数据。</p>
<p>六、paste 事件<br>用户使用剪贴板数据，进行粘贴操作时，会触发paste事件。</p>
<p>下面的示例是拦截粘贴操作，由脚本将剪贴板里面的数据取出来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&#x27;paste&#x27;, async (e) =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  const text = await navigator.clipboard.readText();</span><br><span class="line">  console.log(&#x27;Pasted text: &#x27;, text);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>一、原理：<br>利用 input 框的 .select() 事件选中需要复制的文本。<br>利用 document.execCommand(“copy”) 来将文字复制到剪切板中。【MDN已废弃,部分浏览器可使用】</p>
<h2 id="js毫秒如何转时分秒"><a href="#js毫秒如何转时分秒" class="headerlink" title="js毫秒如何转时分秒"></a>js毫秒如何转时分秒</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">formatDuring: function(mss) &#123;</span><br><span class="line"></span><br><span class="line">  var days = parseInt(mss / (1000 * 60 * 60 * 24));</span><br><span class="line"></span><br><span class="line">  var hours = parseInt((mss % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));</span><br><span class="line"></span><br><span class="line">  var minutes = parseInt((mss % (1000 * 60 * 60)) / (1000 * 60));</span><br><span class="line"></span><br><span class="line">  var seconds = (mss % (1000 * 60)) / 1000;</span><br><span class="line"></span><br><span class="line">  return days + &quot; 天 &quot; + hours + &quot; 小时 &quot; + minutes + &quot; 分钟 &quot; + seconds + &quot; 秒 &quot;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关闭页面发送请求"><a href="#关闭页面发送请求" class="headerlink" title="关闭页面发送请求"></a>关闭页面发送请求</h2><p>在用户将页面完全关闭前，有时需要向后台传输一些必要数据（比如：用户行为分析数据）。为了避免数据丢失，一些网站会使用同步的 XMLHttpRequest() 请求，直到数据完全传递到服务器，再关闭页面。这种处理方式，可能会导致诸如页面延迟几秒后再关闭的糟糕体验，其实我们有更好的解决这类问题的方式。</p>
<p>XMLHttpRequest 规范提到 同步 XMLHttpRequest 已经计划从 Web 平台删除，开发者禁止将 new XMLHttpRequest().open(method, url [, async = true [, username = null [, password = null]]]) 方法中 async 参数赋值为 false 使用。Chrome 80 中迈出了第一步，开始禁止在如下这些事件处理器中使用同步 XMLHttpRequest：beforeunload、unload、pagehide、visibilitychange。Webkit 最近也有一个实现此行为的提交。</p>
<p>Fetch keepalive</p>
<p>Fetch API  提供了一套健壮的与服务器端交互的方式，提供了跨越不同平台 API 的一致接口。它提供了一个选项 keepalive，保证不管发送请求的页面关闭与否，请求都会持续直到结束。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&#x27;unload&#x27;, &#123;</span><br><span class="line">  fetch(&#x27;/siteAnalytics&#x27;, &#123;</span><br><span class="line">    method: &#x27;POST&#x27;,</span><br><span class="line">    body: getStatistics(),</span><br><span class="line">    keepalive: true</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>fetch() 方法的优点是可以更好地控制发送到服务器的内容。fetch() 方法会返回一个 Promise 对象，resolve 值是 Response 对象。 本例中，我没有使用 fetch() 返回值做任何其他的事情，是因为这个请求发生在页面卸载之时，因此并不一定会保证执行。</p>
<p>SendBeacon()</p>
<p>SendBeacon() 方法底层的使用的是 Fetch API。这样就能明白为什么它也有 64 KB  的上传数据限制，也能明白为什么它还能在页面卸载后继续请求。它的主要优点是简单，只要用一行代码就能搞定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&#x27;unload&#x27;, &#123;</span><br><span class="line">  navigator.sendBeacon(&#x27;/siteAnalytics&#x27;, getStatistics());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="v-for遍历对象获取下标"><a href="#v-for遍历对象获取下标" class="headerlink" title="v-for遍历对象获取下标"></a>v-for遍历对象获取下标</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v-for=&quot;(value,key,index) in obj&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><p>方法1：先排序后去重</p>
<p>1）对数组进行双重循环；如果外循环的值大于内循环的值；就利用第三方变量对其交换值 ；这儿也可以用 sort</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.sort((a,b)=&gt;&#123;return a-b&#125;); // 排序</span><br></pre></td></tr></table></figure>
<p>2）当排序完成以后；再次循环进行比较相邻的两个值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var a =[1,2,3,4,5,2,3,5,5,5,5]</span><br><span class="line">function info(a)&#123;</span><br><span class="line">            var arr = []</span><br><span class="line">            for(var i=0;i&lt;a.length;i++)&#123;</span><br><span class="line">                for(var j=0;j&lt;a.length-1;j++)&#123;</span><br><span class="line">                    if(a[i]&gt;a[j])&#123;</span><br><span class="line">                        var list = a[i]</span><br><span class="line">                        a[i] = a[j]</span><br><span class="line">                        a[j] = list</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            for(var e=0;e&lt;a.length;e++)&#123;</span><br><span class="line">                if(a[e] != a[e+1])&#123;</span><br><span class="line">                    arr.push(a[e])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return arr</span><br><span class="line"> &#125;</span><br><span class="line">        let list = info(a)</span><br><span class="line">        console.log(list); // 输出结果 [1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<p>方法2：indexOf去重</p>
<p>此去重主要是利用 indexOf 去查找是否有相同的值；如果没有就返回-1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var a =[1,2,3,4,5,2,3,5,5,5,5]</span><br><span class="line">function info(arr)&#123;</span><br><span class="line">            let a = []</span><br><span class="line">            for(var i in arr)&#123;</span><br><span class="line">                if(a.indexOf(arr[i])==-1)&#123;</span><br><span class="line">                    a.push(arr[i])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return a</span><br><span class="line">  &#125;</span><br><span class="line">        let list = info(a)</span><br><span class="line">        console.log(list); // 输出结果 [1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<p>方法3：双重for循环去重</p>
<p>这儿需要注意一点的就是内循环的时候不要 a.length-1；否则的话就会出现[1, 2, 3, 4, 5, 5]这个结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var a =[1,2,3,4,5,2,3,5,5,5,5]</span><br><span class="line">for(let i=0;i&lt;a.length;i++)&#123;</span><br><span class="line">            for(let j=i+1;j&lt;a.length;j++)&#123;</span><br><span class="line">                if(a[i]===a[j])&#123;</span><br><span class="line">                a.splice(j,1);</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  console.log(a); // 输出结果 [1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<p>方法4：Set去重</p>
<p>set去重应该说是简单的去重方式了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = [1,2,3,4,5,2,3,5,5,5,5]</span><br><span class="line">let list = [...new Set(a)]</span><br><span class="line">console.log(list); // 输出结果 [1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>

<h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><p>列表数据转树型结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">话不多说，直接进入正题~</span><br><span class="line"></span><br><span class="line">列表数据中字段如下：</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        id: 1,</span><br><span class="line">        text: &#x27;节点1&#x27;,</span><br><span class="line">        parentId: 0 //这里用0表示为顶级节点</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id: 2,</span><br><span class="line">        text: &#x27;节点1_1&#x27;,</span><br><span class="line">        parentId: 1 //通过这个字段来确定子父级</span><br><span class="line">    &#125;</span><br><span class="line">    ...   </span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">我们预期的结果：</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        id: 1,</span><br><span class="line">        text: &#x27;节点1&#x27;,</span><br><span class="line">        parentId: 0,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;</span><br><span class="line">                id:2,</span><br><span class="line">                text: &#x27;节点1_1&#x27;,</span><br><span class="line">                parentId:1</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">先说一下实现的思路：</span><br><span class="line">1、先把列表数据转成以id为key，节点本身为value的对象temp；</span><br><span class="line">2、定义空列表treeData，然后遍历temp对象</span><br><span class="line">2-1、如果当前节点不是顶级节点（parentId不为0），那找到以parentId作为key的节点，并把当前节点push到该节点的children中；</span><br><span class="line">2-2、如果当前节点是顶级节点，只需把该节点push到treeData中,当temp遍历结束后，treeData就是最后的树型数据。</span><br><span class="line"></span><br><span class="line">具体代码：</span><br><span class="line"></span><br><span class="line">var temp = &#123;&#125;;</span><br><span class="line">var treeData = [];</span><br><span class="line">for(var i=0; i&lt;data.length; i++)&#123;</span><br><span class="line">    temp[data[i].id] = data[i];</span><br><span class="line">&#125;</span><br><span class="line">for(var i in temp)&#123;</span><br><span class="line">     if(temp[i].parentId != &quot;&quot;) &#123;</span><br><span class="line">         if(!temp[temp[i].parentId].children) &#123;</span><br><span class="line">             temp[temp[i].parentId].children = new Array();</span><br><span class="line">         &#125;</span><br><span class="line">         temp[temp[i].parentId].children.push(temp[i]);</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">         treeData.push(temp[i]);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">这里特别说一下有个稍微底层一点的东东，也是该方法实现的关键所在。。</span><br><span class="line">大家想一想，逐步跟一下这个过程，在遍历temp时，假如顶级节点1先被push到了treeData中，而后面又有子节点被添加到了节点1中，那么这个子节点最后能不能被带入到treeData中的节点1里呢？</span><br><span class="line"></span><br><span class="line">答案是可以的~</span><br><span class="line"></span><br><span class="line">因为节点1本身是个Object对象，它指向了一个内存地址，而无论后续节点1怎么改变，被push到treeData中的节点1都会指向同一个地址，所以节点1被什么时候push都没有关系，最后就是完整的数据。</span><br></pre></td></tr></table></figure>

<h2 id="前端实现吸顶的三种方式"><a href="#前端实现吸顶的三种方式" class="headerlink" title="前端实现吸顶的三种方式"></a>前端实现吸顶的三种方式</h2><p>一、position: sticky<br>设置粘性定位并且添加某个方位才可生效，但是兼容性较差。<br>二、动态修改元素的position<br>监听页面的滚动，比较 元素初始状态距离顶部的高度offsetTop 与 页面此时的滚动高度 。当后者大于前者时，修改元素的position方式为fixed。<br>三、障眼法<br>复制一个相同的元素，将其固定于顶部并让其先隐藏。<br>监听页面的滚动，比较 元素初始状态距离顶部的高度offsetTop 与 页面此时的滚动高度 ，当后者数值大于前者数值时，原来的元素刚刚好触顶，且正与新元素的位置重合。<br>此时我们在监听方法中，让这个新元素显示。<br>当页面继续滚动的时候，原来的元素已经被滚上去了，而新的元素一直被固定在顶部并且此时已经显示出来，所以这个过程发生的时候，会让人有一种元素改变了定位方式的错觉。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/04/22/20-44-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/22/20-44-11/" class="post-title-link" itemprop="url">Webpack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-22 20:44:11" itemprop="dateCreated datePublished" datetime="2021-04-22T20:44:11+08:00">2021-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 20:58:51" itemprop="dateModified" datetime="2021-11-28T20:58:51+08:00">2021-11-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><p>是一种前端资源构建工具，一个静态模块打包器（module bundler）。在webpack看来，前端所有资源文件都会作为模块处理，它将根据模块的依赖关系进行静态分析，打包成对应的静态资源（bundle）。</p>
<h2 id="五个核心概念"><a href="#五个核心概念" class="headerlink" title="五个核心概念"></a>五个核心概念</h2><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>入口，指示webpack以哪个文件为入口起点开始打包，分析构建内部依赖图。</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>输出，指示webpack打包后的资源bundles输出到哪里去，以及如何命名</p>
<h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><p>让webpack能够去处理那些非js文件</p>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>用于执行范围更广的任务，如打包优化，压缩等</p>
<h3 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h3><p>指示webpack使用相应模式的配置</p>
<ul>
<li>development    本地开发模式</li>
</ul>
<p>会将<code>process.env.NODE_ENV</code>的值设为development;启用NamedChunksPlugin和NamedModulesPlugin</p>
<p>开发环境：<code>webpack ./src/index.js -o ./build/built.js --mode=development</code>;webpack会以./src/index.js为入口文件开始打包，输出到./build/built.js</p>
<ul>
<li>production    上线生产模式</li>
</ul>
<p>会将<code>process.env.NODE_ENV</code>的值设为production;启用FlagDependencyUsagePlugin,FlagIncludedChunksPlugin,ModuleConcatenationPlugin,NoEmitOnErrorsPlugin,OccurrenceOrderPlugin,SideEffectsFlagPlugin,UglifyJsPlugin；</p>
<p>生产环境：<code>webpack ./src/index.js -o ./build/built.js --mode=production</code>;webpack会以./src/index.js为入口文件开始打包，输出到./build/built.js</p>
<ol>
<li>webpack能处理js/json文件，不能处理css、img等其他文件</li>
<li>生产环境和开发环境会将es6模块化编译成浏览器能识别的模块化</li>
<li>生产环境比开发环境多一个压缩js代码的过程。</li>
</ol>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><ul>
<li>webpack.config.js</li>
</ul>
<p>webpack配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">//用于拼接路径</span><br><span class="line">const &#123;resolve&#125;=require(&#x27;path&#x27;);</span><br><span class="line">//插件:需要下载</span><br><span class="line">const HtmlWebpackPlugin=require(&#x27;html-webpack-plugin&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//webpack配置</span><br><span class="line">module.exports=&#123;</span><br><span class="line">//入口起点</span><br><span class="line">entry:&#x27;./src/index.js&#x27;,</span><br><span class="line"></span><br><span class="line">//输出</span><br><span class="line">output:&#123;</span><br><span class="line">//输出文件名</span><br><span class="line">filename:&#x27;built.js&#x27;</span><br><span class="line">//输出路径</span><br><span class="line">path: resolve(__dirname,&#x27;build&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">//loader配置</span><br><span class="line">module:&#123;</span><br><span class="line">rules:[	//loader配置</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//匹配哪些文件</span><br><span class="line">test:/\.css$/,</span><br><span class="line">//使用哪些loader进行处理</span><br><span class="line">use:[</span><br><span class="line">//use数组中loader执行顺序：从右到左，从下到上，依次执行。</span><br><span class="line">//创建style标签，将js中的样式资源插入进行，添加到head中生效</span><br><span class="line">&#x27;style-loader&#x27;,</span><br><span class="line">//将css文件变成commonjs模块加载到jsa中,里面内容是样式字符串</span><br><span class="line">&#x27;css-loader&#x27;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//匹配哪些文件</span><br><span class="line">test:/\.less$/,</span><br><span class="line">//使用哪些loader进行处理</span><br><span class="line">use:[</span><br><span class="line">&#x27;style-loader&#x27;,</span><br><span class="line">&#x27;css-loader&#x27;,</span><br><span class="line">//将less文件编译成css文件,需要下载less-loader和less</span><br><span class="line">&#x27;less-loader&#x27;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//处理图片</span><br><span class="line">test:/\.(jpg|png|gif)$/,</span><br><span class="line">//问题：处理不了html中的img图片</span><br><span class="line">//使用一个loader</span><br><span class="line">loader:&#x27;url-loader&#x27;,</span><br><span class="line">options:&#123;</span><br><span class="line">limit:8*1024,		//图片小于8kb,会被处理成base64，减少请求数量，减轻服务器压力，但图片体积会更大</span><br><span class="line">esModule:false,		//关闭url-loader的es6模块化，使用commonjs解析，避免解析时出现[object Module]</span><br><span class="line">name:&#x27;[hash:10].[ext]&#x27;,		//给图片重新命名，提取图片hash的前10位，扩展名为ext</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//处理html中的img图片（负责引入img,从而能被url-loader处理）</span><br><span class="line">test:/\.html$/,</span><br><span class="line">loader:&#x27;html-loader&#x27;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">//打包其他资源</span><br><span class="line">exclude:/\.(css|js|html|less)$/,	//排除css、js、html</span><br><span class="line">loader:&#x27;file-loader&#x27;,</span><br><span class="line">opetions:&#123;</span><br><span class="line">name:&#x27;[hash:10].[ext]&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">//语法检查,只检查自己写的源代码，第三方的库是不用检查的，检查规则需要在package.json中的eslintConsig中设置</span><br><span class="line">//需下载eslint-config-airbnb-base   eslint-plugin-import</span><br><span class="line">&#123;</span><br><span class="line">test:/\.js$/,</span><br><span class="line">exclue:/node_modules/,</span><br><span class="line">loader:&#x27;eslint-loader&#x27;,</span><br><span class="line">options&#123;</span><br><span class="line">fix:true	//自动修复eslint的错误</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//js兼容处理：babel-loader   @babel/core    @babel/preset-env</span><br><span class="line">//基本js兼容性处理--&gt;@babel/preset-env；只能转换基本语法，如promise不能转换</span><br><span class="line">//全部js兼容性处理--&gt;@babel/polyfill；会将所有兼容性代码全部引入，体积太大</span><br><span class="line">//按需加载--&gt;core-js</span><br><span class="line">&#123;</span><br><span class="line">test:/\.js$/,</span><br><span class="line">exclude:/node_modules/,</span><br><span class="line">/*</span><br><span class="line">当一个文件需要多个loader处理时，需要指定loader执行的先后顺序</span><br><span class="line">*/</span><br><span class="line">enforce:&#x27;pre&#x27;,	//优先执行</span><br><span class="line">loader:&#x27;babel-loader&#x27;,</span><br><span class="line">options:&#123;</span><br><span class="line">//预设：指示babel做怎样的兼容处理</span><br><span class="line">presets:[</span><br><span class="line">&#x27;@babel/preset-env&#x27;,</span><br><span class="line">&#123;</span><br><span class="line">//按需加载</span><br><span class="line">useBuiltIns:&#x27;usage&#x27;,</span><br><span class="line">///指定core-js版本</span><br><span class="line">corejs:&#123;</span><br><span class="line">version:3</span><br><span class="line">&#125;,</span><br><span class="line">//指定兼容浏览器的版本</span><br><span class="line">targets:&#123;</span><br><span class="line">chrome:&#x27;60&#x27;,</span><br><span class="line">firefox:&#x27;60&#x27;,</span><br><span class="line">edge:&#x27;60&#x27;,</span><br><span class="line">ie:&#x27;9&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">/*//第二种写法</span><br><span class="line">rules:[</span><br><span class="line">&#123;</span><br><span class="line">test:/\.css$/,</span><br><span class="line">use:[</span><br><span class="line">//取代style-loader,提取js中的css成单独文件</span><br><span class="line">MiniCssExtractPlugin.loader,</span><br><span class="line">&#x27;css-loader&#x27;,</span><br><span class="line">/*</span><br><span class="line">//css兼容性处理：帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</span><br><span class="line">//需下载postcss-loader  postcss-preset-env</span><br><span class="line">loader:&#x27;postcss-loader&#x27;,</span><br><span class="line">options:&#123;</span><br><span class="line">ident:&#x27;postcss&#x27;,</span><br><span class="line">plugin:()=&gt;[require(&#x27;postcss-present-env&#x27;)()]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">//plugin配置</span><br><span class="line">plugins:[</span><br><span class="line"></span><br><span class="line">//html-webpack-plugin</span><br><span class="line">//默认创建一个空的html，自动引入打包输出的所有文件</span><br><span class="line">//需要有结构的html文件</span><br><span class="line">new HtmlWebpackPlugin(&#123;</span><br><span class="line">//复制‘./src/index.html’文件，并自动引入打包输出的所有文件资源</span><br><span class="line">template:&#x27;./src/index.html&#x27;,</span><br><span class="line">minify:&#123;	//压缩html代码</span><br><span class="line">collapseWhitespace:true,	//移除空格</span><br><span class="line">removeComments:true		//移除注释</span><br><span class="line">&#125;</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">//css兼容</span><br><span class="line">new MiniCssExtratPlugin(&#123;</span><br><span class="line">filename:&#x27;css/built.css&#x27;</span><br><span class="line">&#125;),</span><br><span class="line">//压缩css</span><br><span class="line">new OptimizeCssAssetsWebpackPlugin()</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">//模式</span><br><span class="line">mode:&#x27;development&#x27;</span><br><span class="line"></span><br><span class="line">//开启服务器devSever,用于自动编译，自动打开浏览器，刷新浏览器，但只在内存中编译打包，不就有实际输出</span><br><span class="line">//启动指令为：npx webpack-dev-server</span><br><span class="line">devServer:&#123;</span><br><span class="line">contentBase:resolve(__dirname,&#x27;build&#x27;),</span><br><span class="line">//启用gzip压缩</span><br><span class="line">compress:true,</span><br><span class="line">//端口号</span><br><span class="line">port:3333,</span><br><span class="line">//自动打开浏览器</span><br><span class="line">open:true,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>package.json</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&quot;browserslist&quot;:&#123;		//兼容的浏览器版本</span><br><span class="line">//默认匹配生产环境，可通过修改process.env.NODE_ENV=developent来改变</span><br><span class="line">	&quot;developent&quot;:[</span><br><span class="line">		&quot;last 1 chrome version&quot;,</span><br><span class="line">		&quot;last 1 firefox version&quot;,</span><br><span class="line">	],</span><br><span class="line">	&quot;production&quot;:[</span><br><span class="line">		&quot;&gt;0.2%&quot;,</span><br><span class="line">		&quot;not dead&quot;,</span><br><span class="line">		&quot;not op_mini all&quot;	</span><br><span class="line">		]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&quot;eslintConfig&quot;:&#123;</span><br><span class="line">&quot;extends&quot;:&quot;airbnb-base&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>index.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//引用样式</span><br><span class="line">import &#x27;./index.css&#x27;</span><br><span class="line">//兼容js</span><br><span class="line">import &#x27;@babel/polyfill&#x27;</span><br></pre></td></tr></table></figure>


<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="开发环境优化"><a href="#开发环境优化" class="headerlink" title="开发环境优化"></a>开发环境优化</h3><ul>
<li>打包构建速度</li>
</ul>
<p>HMR:模块热替换;当模块发生变化时，只会重新打包这个模块，而不是打包全部模块。</p>
<p> package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">devServer:&#123;</span><br><span class="line">...</span><br><span class="line">//开启HMR功能</span><br><span class="line">hot:true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>样式文件:可以使用hmr功能：style-loader内部实现了</p>
</li>
<li><p>js文件：默认不能使用hmr功能,解决办法：修改js代码，添加支持hmr功能的代码，但只能处理非入口js文件的其他文件。<br>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(module.hot)&#123;</span><br><span class="line">module.hot.accept(&#x27;./test.js&#x27;,function()&#123;&#125;);	//监听test.js的变化，若变化则执行回调函数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>html文件：默认不能使用hmr功能,解决办法：修改entry，将html文件引入</p>
</li>
</ul>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">entry:[&#x27;./src/js/index.js&#x27;,&#x27;./src/index.html&#x27;],</span><br><span class="line">output:&#123;...&#125;,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>代码调试</li>
</ul>
<h3 id="生成环境优化"><a href="#生成环境优化" class="headerlink" title="生成环境优化"></a>生成环境优化</h3><ul>
<li>打包构建速度</li>
<li>代码运行的性能</li>
</ul>
<p>source-map:一种提供源代码到构建后代码映射的技术，用于检测源代码的错误<br>种类：</p>
<blockquote>
<p>内联和外部的区别：外部生成了文件而内联没有，内联的构建速度更快；</p>
</blockquote>
<ul>
<li>source-map:外部<br>错误代码准确信息和源代码的错误位置</li>
<li>inline-source-map:内联<br>只生成一个内联source-map<br>错误代码的准确信息和源代码的错误位置</li>
<li>hidden-source-map:外部<br>错误代码的错误原因，但没有错误位置<br>不能追踪源代码错误，只能提示到构建后代码的错误位置</li>
<li>eval-source-map:内联<br>每一个文件都生成对应的source-map，都在eval</li>
<li>nosources-source-map:外部<br>错误代码的准确信息,但没有任何源代码信息</li>
<li>cheap-souce-map:外部<br>错误代码准确信息和源代码的错误位置,只能精确到行</li>
<li>cheap-module-souce-map:外部<br>错误代码准确信息和源代码的错误位置</li>
</ul>
<p>开发环境：速度快(eval&gt;inline&gt;cheap&gt;..)，调试友好(souce-map,cheap-module-souce-map,cheap-spuce-map)<br>所以应选择eval-source-map/eval-cheap-module-souce-amp</p>
<p>生产环境：内联会让代码体积变大，所以不用内联，源代码要不要隐藏（nosource-source-map全部隐藏，hidden-source-map只隐藏源代码，会提示构建后代码错误信息）<br>所以选择source-map/cheap-module-souce-map</p>
<h2 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//以下loader只会匹配一个</span><br><span class="line">//注意：不能有两个配置处理同一个类型文件</span><br><span class="line">oneOf:[</span><br><span class="line">&#123;</span><br><span class="line">test:/\.css$/,</span><br><span class="line">use:[...commonCssLoadder]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr>
<ol>
<li>webpack打包后打开index.html无内容出现空白页面：修改webpack配置，在util.js中的<code>fallback:&#39;vue-style-loader&#39;,</code>下面增加publicPath:’../../‘，修改config/index.js，增加build：{ assetsPublicPath:’./‘}。另外，！路由模式改为hash模式</li>
<li>界面正常显示但出现cannot read property xxx of undefined（不能读取xxx属性）的问题：在渲染页面时，则会直接读取初始时的数据，若数据初始时为空，则容易出现错误。而请求是异步的，请求的数据会在页面首次渲染后才会发起</li>
</ol>
<ul>
<li>webpack设置服务器代理在config目录下的index.js中配置</li>
</ul>
<ol>
<li>保留eslint的语法检测把不符合自己习惯的规则去掉，可配置文件在项目根目录里以 .eslintrc.* 命名的文件。关闭方法，则是把 build/webpack.base.conf.js 配置文件中的eslint rules注释掉即可</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/03/10/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/10/20-22-11/" class="post-title-link" itemprop="url">HTML超文本标记语言</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-10 20:22:11" itemprop="dateCreated datePublished" datetime="2021-03-10T20:22:11+08:00">2021-03-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-28 02:01:38" itemprop="dateModified" datetime="2021-08-28T02:01:38+08:00">2021-08-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTML-是用来描述网页的一种语言"><a href="#HTML-是用来描述网页的一种语言" class="headerlink" title="HTML 是用来描述网页的一种语言"></a>HTML 是用来描述网页的一种语言</h1><p>emmet语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div*3快速生成3个&lt;div&gt;&lt;/div&gt;</span><br><span class="line">父子级关系：ul&gt;li</span><br><span class="line">兄弟关系：div+p</span><br><span class="line">生成带有类名的：.demo或#two</span><br><span class="line">有顺序的：加上$符号</span><br><span class="line">在生成的标签内写内容：&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>浏览器内核:</p>
<table>
<thead>
<tr>
<th>浏览器</th>
<th>内核</th>
</tr>
</thead>
<tbody><tr>
<td>IE</td>
<td>Trident</td>
</tr>
<tr>
<td>firefox</td>
<td>Gecko</td>
</tr>
<tr>
<td>safari</td>
<td>Webkit</td>
</tr>
<tr>
<td>chrome/Opera</td>
<td>Blink</td>
</tr>
</tbody></table>
<h2 id="HTML-标签"><a href="#HTML-标签" class="headerlink" title="HTML 标签"></a>HTML 标签</h2><blockquote>
<p>HTML 标记标签通常被称为 HTML 标签 (HTML tag)。</p>
</blockquote>
<ul>
<li>HTML 标签是由尖括号包围的关键词，比如<code> &lt;html&gt;</code></li>
<li>HTML 标签通常是成对出现的，称为双标签,如<code> &lt;html&gt;</code> 和<code> &lt;/html&gt;</code>.也有单标签：<code>&lt;br/&gt;</code></li>
<li>标签对中的第一个标签是开始标签，第二个标签是结束标签</li>
<li>开始和结束标签也被称为开放标签和闭合标签 </li>
</ul>
<p>网页：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;	//使用html5标准进行解析网页</span><br><span class="line">&lt;html lang&gt;</span><br><span class="line">&lt;head&gt;			//网页头部</span><br><span class="line">&lt;title&gt;title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br><span class="line">&lt;body&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>base</li>
</ul>
<p><code>&lt;base href=&quot;&quot; target=&quot;_top&quot;&gt;</code>所有链接标签的默认链接</p>
<ul>
<li>meta视口标签</li>
</ul>
<p>常用于指定网页描述、关键词、作者、事件等</p>
<p><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0&quot;&gt;</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name=”viewport”</td>
<td>content=”width=(设置的是viewport宽度,可设置device-width特殊值),initial-scale=(初始缩放比，大于0的数字小于10),maximum-scale=（最大缩放比，大于0的数字)，minimum-scale=(最小缩放比，大于0的数字)，user-scalable=(用户是否可以缩放)”</td>
</tr>
<tr>
<td>name=”http-equiv”</td>
<td>额外添加头部内容</td>
</tr>
<tr>
<td>charset</td>
<td>编码</td>
</tr>
</tbody></table>
<h3 id="常用标签"><a href="#常用标签" class="headerlink" title="常用标签"></a>常用标签</h3><ul>
<li><p>标题标签:<code>&lt;h1&gt;----&lt;h6&gt;</code></p>
</li>
<li><p>段落标签：<code>&lt;p&gt;</code></p>
</li>
<li><p>换行标签：<code>&lt;br /&gt;</code></p>
</li>
<li><p>分割线： <code>&lt;hr&gt;</code></p>
</li>
<li><p>字体：<code>&lt;h1&gt;这是1号标题&lt;/h1&gt; &lt;font size=&quot;6&quot;&gt;这是6号字体文本&lt;/font&gt; 可以使用font-family（字体），color（颜色），和font-size（字体大小）属性来定义字体的样式,使用 text-align（文字对齐）属性指定文本的水平与垂直对齐方式</code>  </p>
</li>
</ul>
<blockquote>
<p>嵌套问题：超链接不能嵌套超链接，p标签不能嵌套p标签，标题标签h1-h6也不能嵌套；</p>
</blockquote>
<ul>
<li><p>内部样式表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">当单个文件需要特别样式时，就可以使用内部样式表。你可以在&lt;head&gt; 部分通过 &lt;style&gt;标签定义内部样式表:&lt;head&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">body &#123;background-color:yellow;&#125;</span><br><span class="line">p &#123;color:blue;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>外部样式表</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">当样式需要被应用到很多页面的时候，外部样式表将是理想的选择。</span><br><span class="line">使用外部样式表，你就可以通过更改一个文件来改变整个站点的外观。</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;!--定义了文档与外部资源的关系--&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;mystyle.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>背景色属性:<code>&lt;p style=&quot;background-color:green;&quot;&gt;这是一个段落。&lt;/p&gt;</code></p>
</li>
<li><p>加粗：<code>&lt;strong&gt;或&lt;b&gt;</code></p>
</li>
<li><p>斜体：<code>&lt;em&gt;或&lt;i&gt;</code></p>
</li>
<li><p>下划线：<code>&lt;ins&gt;或&lt;u&gt;</code></p>
</li>
<li><p>盒子: <code>&lt;div&gt;与&lt;span&gt;</code></p>
</li>
<li><p>图像标签和路径：<code>&lt;img src=&quot;图像路径&quot;/&gt;</code></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>图片路径</td>
</tr>
<tr>
<td>alt</td>
<td>图片不显示时提醒文字</td>
</tr>
<tr>
<td>title</td>
<td></td>
</tr>
<tr>
<td>border</td>
<td>边框</td>
</tr>
<tr>
<td>width,height</td>
<td>宽，高</td>
</tr>
</tbody></table>
<ul>
<li>超链接标签: <code>&lt;a href=&quot;跳转目标(外连接如www.xxx.com，内链接如xxx.html,空链接:#，下载链接)&quot; target=&quot;弹出方式(_self在本窗口打开，_blank在新窗口打开,_top跳出弹窗,&quot;&gt;文本图像&lt;/a&gt;</code></li>
</ul>
<ul>
<li><p>锚点: <code>&lt;a href=&quot;#one&quot;&gt;&lt;/a&gt;   &lt;h3 id=&quot;one&quot;&gt;标题&lt;/h3&gt;</code></p>
</li>
<li><p>特殊符号:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>空格</td>
<td><code>&amp;nbsp;</code></td>
</tr>
<tr>
<td>小于号</td>
<td><code>&amp;lt;</code></td>
</tr>
<tr>
<td>大于号</td>
<td><code>&amp;gt;</code></td>
</tr>
</tbody></table>
<ul>
<li>表格标签：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;table width=&quot;500px&quot; border=&quot;1px&quot; cellspacing=&quot;0&quot;&gt;  &lt;!--定义表格标签,属性引号可要可不要--&gt;</span><br><span class="line">	&lt;thead&gt;&lt;!--头部--&gt;</span><br><span class="line">		&lt;tr&gt; </span><br><span class="line">			&lt;th&gt;&lt;/th&gt;&lt;!--表头，td-&gt;th加粗文字--&gt;</span><br><span class="line">			&lt;td&gt;&lt;/td&gt;&lt;!--列，必须嵌套在行中--&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/thead&gt;</span><br><span class="line">	&lt;tbody&gt;&lt;!--主体--&gt;</span><br><span class="line">&lt;col width=&quot;100px&quot;&gt;&lt;!--第1列的宽度--&gt;</span><br><span class="line">&lt;col width=&quot;100px&quot;&gt;&lt;!--第2列的宽度--&gt;</span><br><span class="line">&lt;colgroup span=&quot;6&quot; width=&quot;100px&quot;&gt;&lt;!--接下来6列合成一组，一起设置宽度--&gt;</span><br><span class="line">		&lt;tr&gt; &lt;!--行--&gt;</span><br><span class="line">			&lt;td colspan=&quot;2&quot;&gt;&lt;/td&gt;&lt;!--合并单元格,需要删除多余的单元格--&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td rowspan=2&quot;&gt;&lt;!--合并行,需要在下面行中删除一个单元格--&gt;&lt;/td&gt;</span><br><span class="line">				&lt;td&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr height=&quot;100px&quot;&gt;	&lt;!--设置行高，宽无法设置--&gt;</span><br><span class="line">			&lt;td width=&quot;100px&quot;&gt;	&lt;!--设置列宽，一整列都一致变化,哪个大用哪个--&gt;</span><br><span class="line">			&lt;/td&gt;</span><br><span class="line">			&lt;td&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td&gt;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">	&lt;/tbody&gt;</span><br><span class="line"></span><br><span class="line">	&lt;tfoot&gt;&lt;!--页脚--&gt;</span><br><span class="line">	&lt;/tfoot&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<p>表格属性：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>align</td>
<td>left,center,right</td>
<td>表格相对周围元素的对齐方式</td>
</tr>
<tr>
<td>border</td>
<td>1或”像素值”</td>
<td>边框</td>
</tr>
<tr>
<td>cellpadding</td>
<td>像素值</td>
<td>单元边沿与内容的的距离</td>
</tr>
<tr>
<td>cellspacing</td>
<td>像素值</td>
<td>单元格间的空白</td>
</tr>
<tr>
<td>width，height</td>
<td></td>
<td>高，宽</td>
</tr>
</tbody></table>
<ul>
<li><p>列表标签</p>
<ol>
<li>无序标签：<code>&lt;ul&gt;&lt;li&gt;列表&lt;/li&gt;&lt;li&gt;列表&lt;/li&gt;&lt;li&gt;列表&lt;/li&gt;&lt;/ul&gt;</code>;去掉小圆点：<code>list-style:none</code></li>
<li>有序标签：<code>&lt;ol&gt;&lt;li&gt;列表&lt;/li&gt;&lt;li&gt;列表&lt;/li&gt;&lt;li&gt;列表&lt;/li&gt;&lt;/ol&gt;</code></li>
<li>自定义列表：<code>&lt;dl&gt;&lt;dt&gt;名词&lt;/dt&gt;&lt;&lt;dd&gt;名词解释&lt;/dd&gt;dd&gt;名词解释&lt;/dd&gt;&lt;dl&gt;</code></li>
</ol>
</li>
<li><p>表单域：</p>
</li>
</ul>
<p><code>&lt;form action=&quot;url地址(服务器程序的url地址)&quot; method=&quot;提交方式(get/post)&quot; name=&quot;表单域名称&quot;&gt;表单域控件&lt;/form&gt;</code><br>用<code>&lt;input type=&quot;sumit&quot; value=&quot;提交&quot; /&gt;</code>提交数据，用<code>&lt;input type=&quot;reset&quot; value=&quot;重置&quot; /&gt;</code>重置输入；input必须放在form标签内才能提交，所有提交的数据必须有name属性；</p>
<ul>
<li><p>input表单元素：<br><code>&lt;input type=&quot;属性值&quot; name=&quot;名称;单选按钮与复选框应是相同的name值&quot; value=&quot;规定input元素的值&quot; checked=&quot;首次加载时选中&quot; maxlength=&quot;输入字段的最大长度&quot;/&gt;</code></p>
</li>
<li><p>input 样式修改</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">去除边框：</span><br><span class="line">border:none;</span><br><span class="line">ouline:none;</span><br><span class="line">居中：</span><br><span class="line">vertical-align:middle;</span><br><span class="line">隐藏radio的按钮:</span><br><span class="line">display:none</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>type属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>button</td>
<td>按键</td>
</tr>
<tr>
<td>checkbox</td>
<td>定义复选框</td>
</tr>
<tr>
<td>file</td>
<td>供文件上传</td>
</tr>
<tr>
<td>hidden</td>
<td>隐藏输入字段</td>
</tr>
<tr>
<td>image</td>
<td>图像形式提交按钮</td>
</tr>
<tr>
<td>password</td>
<td>密码字段</td>
</tr>
<tr>
<td>radio</td>
<td>定义单选按钮</td>
</tr>
<tr>
<td>reset</td>
<td>重置按钮</td>
</tr>
<tr>
<td>submit</td>
<td>提交按钮</td>
</tr>
<tr>
<td>text</td>
<td>输入字段</td>
</tr>
</tbody></table>
<ul>
<li>label标签：用于绑定表单域，点击自动调整到输入框</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;label\&gt;for=&quot;sex&quot;&gt; 男\&lt;/label&gt;</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;sex&quot; id=&quot;sex&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>select:下拉列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;select&gt;</span><br><span class="line">/*至少包含一对option*/</span><br><span class="line">&lt;option&gt;\&lt;/option&gt;</span><br><span class="line">&lt;option&gt;\&lt;/option&gt;</span><br><span class="line">/*默认选中*/</span><br><span class="line">&lt;option selected=&quot;selected&quot;\&gt;xxx\&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>textarea:多行文本输入框</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea rows=&quot;3&quot; cols=&quot;28&quot;&gt;   /*cols:每行字符数； rows：行数*/</span><br><span class="line">内容</span><br><span class="line">&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="HTML5特性"><a href="#HTML5特性" class="headerlink" title="HTML5特性"></a>HTML5特性</h3><h4 id="1-新增语义化标签"><a href="#1-新增语义化标签" class="headerlink" title="1.新增语义化标签"></a>1.新增语义化标签</h4><p>标签语义化指根据网页中的内容结构，选择适合的标签进行编写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;article&gt;</span><br><span class="line">&lt;aside&gt;		元素页面主内容之外的某些内容（比如侧栏）</span><br><span class="line">&lt;details&gt;	定义用户能够查看或隐藏的额外细节。</span><br><span class="line">&lt;figcaption&gt; 	定义 &lt;figure&gt; 元素的标题。</span><br><span class="line">&lt;figure&gt;	规定自包含内容，比如图示、图表、照片、代码清单等。</span><br><span class="line">&lt;footer&gt;</span><br><span class="line">&lt;header&gt;</span><br><span class="line">&lt;main&gt;</span><br><span class="line">&lt;mark&gt;	定义重要的或强调的文本。</span><br><span class="line">&lt;nav&gt;</span><br><span class="line">&lt;section&gt;	定义文档中的节。</span><br><span class="line">&lt;summary&gt;	定义 &lt;details&gt; 元素的可见标题。</span><br><span class="line">&lt;time&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-新增多媒体标签"><a href="#2-新增多媒体标签" class="headerlink" title="2.新增多媒体标签"></a>2.新增多媒体标签</h4><ul>
<li>\&lt;video&gt;</li>
</ul>
<p><code>&lt;video src=&quot;&quot; controls=&quot;controls&quot; &gt;&lt;/video&gt;</code></p>
<p>属性：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>自动播放，谷歌禁止，可添加muted属性解决</td>
</tr>
<tr>
<td>controls</td>
<td>播放控件</td>
</tr>
<tr>
<td>width;height</td>
<td>宽高</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
<tr>
<td>preload</td>
<td>auto(加载视频);none(不加载)</td>
</tr>
<tr>
<td>poster</td>
<td>imgurl(加载等待图片)</td>
</tr>
<tr>
<td>muted</td>
<td>静音播放</td>
</tr>
</tbody></table>
<ul>
<li>\&lt;audio&gt;</li>
</ul>
<p><code>&lt;audio src=&quot;&quot; &gt;&lt;/audio&gt;</code></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>自动播放，谷歌禁止</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
<tr>
<td>controls</td>
<td>播放控件</td>
</tr>
</tbody></table>
<h4 id="3-input类型"><a href="#3-input类型" class="headerlink" title="3.input类型"></a>3.input类型</h4><table>
<thead>
<tr>
<th>属性值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type=”email”</td>
<td>限制必须输入email类型</td>
</tr>
<tr>
<td>type=”number”</td>
<td>数字类型</td>
</tr>
<tr>
<td>type=”search”</td>
<td>搜索框</td>
</tr>
<tr>
<td>type=”color”</td>
<td>颜色</td>
</tr>
<tr>
<td>type=”tel”</td>
<td>手机号码</td>
</tr>
<tr>
<td>type=”date”</td>
<td>日期</td>
</tr>
<tr>
<td>maxlength=””</td>
<td>允许输入最大长度,不会提示</td>
</tr>
<tr>
<td>max</td>
<td>允许输入最大长度</td>
</tr>
<tr>
<td>min</td>
<td>允许输入最大长度</td>
</tr>
</tbody></table>
<h4 id="4-表单属性"><a href="#4-表单属性" class="headerlink" title="4.表单属性"></a>4.表单属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>placeholder</td>
<td>提示文本</td>
</tr>
<tr>
<td>multiple</td>
<td>可多选文件提交</td>
</tr>
<tr>
<td>autofocus</td>
<td>自动聚焦</td>
</tr>
<tr>
<td>required</td>
<td>不能为空，必填</td>
</tr>
</tbody></table>
<h3 id="5-canvas"><a href="#5-canvas" class="headerlink" title="5. canvas"></a>5. canvas</h3><p>使用js在网页上绘制图像<br><code>&lt;canvas id=&#39;&#39;  width=&#39;&#39; height=&#39;&#39;&gt;&lt;/canvas&gt;</code></p>
<h3 id="本地存储localStorage"><a href="#本地存储localStorage" class="headerlink" title="本地存储localStorage"></a>本地存储localStorage</h3><p>无时间限制，5M，只存储字符串</p>
<h3 id="地理定位Geolocation"><a href="#地理定位Geolocation" class="headerlink" title="地理定位Geolocation"></a>地理定位Geolocation</h3><h3 id="socket通信：webscoket"><a href="#socket通信：webscoket" class="headerlink" title="socket通信：webscoket"></a>socket通信：webscoket</h3><h3 id="后台js：webworkers"><a href="#后台js：webworkers" class="headerlink" title="后台js：webworkers"></a>后台js：webworkers</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/03/03/16-32-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/03/16-32-11/" class="post-title-link" itemprop="url">web前端开发技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-03 16:32:11" itemprop="dateCreated datePublished" datetime="2021-03-03T16:32:11+08:00">2021-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-06 11:30:12" itemprop="dateModified" datetime="2023-02-06T11:30:12+08:00">2023-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="web前端开发技术"><a href="#web前端开发技术" class="headerlink" title="web前端开发技术"></a>web前端开发技术</h1><h2 id="web前端开发技术的优化策略"><a href="#web前端开发技术的优化策略" class="headerlink" title="web前端开发技术的优化策略"></a>web前端开发技术的优化策略</h2><p>网络页面的核心价值在于传递消费者所需要的信息并且以此来满足消费者相应的需求。而对于消费者和体验用户来说，网页加载的快慢直接影响了这个网页的访问量。如果用户在等待网站信息呈现的事件过长，很大程度上会对其消费体验造成一定影响，会造成用户无法将信息进行高效利用。基于这样的考虑，对web前端技术进行优化并体现信息的真正价值具有重要的意义。web前端技术的优化对网络性能的改善、工作效率的提高都发挥着重要作用。可以从以下几个方面开展工作，对web前端技术进行优化：</p>
<ol>
<li><p>减少HTTP请求数<br>减少不必要的消耗时间的Http请求数，是web前端开发技术的一个重要方面。一个完整的Http包括DNS寻址、发送双方的数据、建立浏览器和服务器间的连接并传输数据、等待服务器响应等等多个环节。在这个过程中，每一个Http请求都必须携带数据，因此每一个请求都不免占用宽带资源，导致用户等待时间增加。要减少网页中Http的请求，经常被采用的方法有：将多个CSS文件或者JavaScript文件合并成一个；优化图片地图，在一个图像上划分不同区域以及注入不通过映射的链接；保持图片和文本一起显示和下载；通过利用CSS background进行背景图的绝对定位，这种做法可以提高网页的载入速度，提高用户的体验。</p>
</li>
<li><p>优化文件的规模<br>文件规模能对网页加载造成一定的影响 ，这个过程包括压缩JavaScript和CSS文件以及对相应的代码进行优化。优化代码的工作主要是删除一些不必要的Html标签，避免内联式和优化CSS代码。</p>
</li>
<li><p>减少DNS查找<br>DNS查找的时间开销很大，这是国内许多网站的通病。在一次DNS的解析过程中会耗费20~120ms，若DNS解析请求过于频繁，就会导致用户等待时间的增加，同时也会使信息传输的质量有所下降。并且在DNS查找结束前，浏览器将无法下载该域名下的任何东西。对于国内的站点来说，过多使用站外的Widget（微件），也易引起DNS查找过多的问题。适当减少DNS查找能有效地提高网页地加载速度，对于web前端开发技术来说，DNS查找的优化也非常重要。</p>
</li>
<li><p>杜绝无用响应<br>在用户访问网站的时候，常常会遇到无用响应，如404错误或拒绝访问错误，这是没有找到文件引起的。Http请求耗费时间过长，而较长的等待时间却得到一个无用的响应页面，大大降低了用户体验。对页面的链接进行充分的测试加上对web服务器Errorr日志的不断跟踪能有效地减少404错误。大多时候，这种错误由于定位稍难而容易被技术人员忽略。</p>
</li>
<li><p>有效避免重定向<br>网页的重定向会耗费一定的时间，这也是造成用户等待时间过长的一个因素。重定向问题的产生有很多，每增加一次重定向就必然会增加一次对web的请求，所以重定向问题应该尽量避免。这要求技术人员能对web站点的子目录后加一个”/“，这种做法能有效避免重定向。</p>
</li>
<li><p>优化网页内容<br>CSS的全称是层叠样式表，层叠表明后面的CSS可以覆盖前面的，高级的可以覆盖低级的，因此浏览器会在完全加载完后才考虑开展渲染工作。根据CSS这样的特性，要实现web的优化，可以考虑将样式表放在顶部。另外，可以将script放在底部，该举措是为了防止script脚本阻塞当前页面，从而造成下载速度较慢，页面的加载时间过长等问题的产生。</p>
</li>
</ol>
<h2 id="Web-实时推送技术"><a href="#Web-实时推送技术" class="headerlink" title="Web 实时推送技术"></a>Web 实时推送技术</h2><h3 id="一、双向通信"><a href="#一、双向通信" class="headerlink" title="一、双向通信"></a>一、双向通信</h3><p>HTTP 协议有一个缺陷：通信只能由客户端发起。举例来说，我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP 协议做不到服务器主动向客户端推送信息。这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。在WebSocket协议之前，有三种实现双向通信的方式：轮询（polling）、长轮询（long-polling）和iframe流（streaming）。</p>
<ol>
<li>轮询（polling）<br>轮询是客户端和服务器之间会一直进行连接，每隔一段时间就询问一次。其缺点也很明显：连接数会很多，一个接受，一个发送。而且每次发送请求都会有Http的Header，会很耗流量，也会消耗CPU的利用率。</li>
</ol>
<ul>
<li>优点：实现简单，无需做过多的更改</li>
<li>缺点：轮询的间隔过长，会导致用户不能及时接收到更新的数据；轮询的间隔过短，会导致查询请求过多，增加服务器端的负担</li>
</ul>
<ol start="2">
<li>长轮询（long-polling）</li>
</ol>
<p>长轮询是对轮询的改进版，客户端发送HTTP给服务器之后，看有没有新消息，如果没有新消息，就一直等待。当有新消息的时候，才会返回给客户端。在某种程度上减小了网络带宽和CPU利用率等问题。由于http数据包的头部数据量往往很大（通常有400多个字节），但是真正被服务器需要的数据却很少（有时只有10个字节左右），这样的数据包在网络上周期性的传输，难免对网络带宽是一种浪费。</p>
<ul>
<li>优点：比 Polling 做了优化，有较好的时效性</li>
<li>缺点：保持连接会消耗资源; 服务器没有返回有效数据，程序超时。</li>
</ul>
<ol start="3">
<li>iframe流（streaming）<br>iframe流方式是在页面中插入一个隐藏的iframe，利用其src属性在服务器和客户端之间创建一条长连接，服务器向iframe传输数据（通常是HTML，内有负责插入信息的javascript），来实时更新页面。</li>
</ol>
<ul>
<li>优点：消息能够实时到达；浏览器兼容好</li>
<li>缺点：服务器维护一个长连接会增加开销；IE、chrome、Firefox会显示加载没有完成，图标会不停旋转。</li>
</ul>
<h2 id="二、WebSocket"><a href="#二、WebSocket" class="headerlink" title="二、WebSocket"></a>二、WebSocket</h2><ol>
<li>什么是websocket<br>WebSocket是一种全新的协议，随着HTML5草案的不断完善，越来越多的现代浏览器开始全面支持WebSocket技术了，它将TCP的Socket（套接字）应用在了webpage上，从而使通信双方建立起一个保持在活动状态连接通道。</li>
</ol>
<p>一旦Web服务器与客户端之间建立起WebSocket协议的通信连接，之后所有的通信都依靠这个专用协议进行。通信过程中可互相发送JSON、XML、HTML或图片等任意格式的数据。由于是建立在HTTP基础上的协议，因此连接的发起方仍是客户端，而一旦确立WebSocket通信连接，不论服务器还是客户端，任意一方都可直接向对方发送报文。</p>
<p>初次接触 WebSocket 的人，都会问同样的问题：我们已经有了 HTTP 协议，为什么还需要另一个协议？</p>
<ol start="2">
<li>HTTP的局限性<br>HTTP是半双工协议，也就是说，在同一时刻数据只能单向流动，客户端向服务器发送请求(单向的)，然后服务器响应请求(单向的)。<br>服务器不能主动推送数据给浏览器。这就会导致一些高级功能难以实现，诸如聊天室场景就没法实现。</li>
<li>WebSocket的特点<br>支持双向通信，实时性更强<br>可以发送文本，也可以发送二进制数据<br>减少通信量：只要建立起WebSocket连接，就希望一直保持连接状态。和HTTP相比，不但每次连接时的总开销减少，而且由于WebSocket的首部信息很小，通信量也相应减少了相对于传统的HTTP每次请求-应答都需要客户端与服务端建立连接的模式，WebSocket是类似Socket的TCP长连接的通讯模式，一旦WebSocket连接建立后，后续数据都以帧序列的形式传输。在客户端断开WebSocket连接或Server端断掉连接前，不需要客户端和服务端重新发起连接请求。在海量并发和客户端与服务器交互负载流量大的情况下，极大的节省了网络带宽资源的消耗，有明显的性能优势，且客户端发送和接受消息是在同一个持久连接上发起，实时性优势明显。</li>
</ol>
<h2 id="三、Web-实时推送技术的比较"><a href="#三、Web-实时推送技术的比较" class="headerlink" title="三、Web 实时推送技术的比较"></a>三、Web 实时推送技术的比较</h2><p>方式类型技术实现优点缺点适用场景</p>
<ul>
<li>轮询Pollingclient→server客户端循环请求<br>1、实现简单<br>2、 支持跨域<br>1、浪费带宽和服务器资源<br>2、 一次请求信息大半是无用（完整http头信息）<br>3、有延迟<br>4、大部分无效请求适于小型应用</li>
<li>长轮询Long-Pollingclient→server服务器hold住连接，一直到有数据或者超时才返回，减少重复请求次数<br>1、实现简单<br>2、不会频繁发请求<br>3、节省流量<br>4、延迟低<br>1、服务器hold住连接，会消耗资源<br>2、一次请求信息大半是无用WebQQ、Hi网页版、Facebook </li>
<li>IM长连接iframeclient→server在页面里嵌入一个隐蔵iframe，将这个 iframe 的 src 属性设为对一个长连接的请求，服务器端就能源源不断地往客户端输入数据。<br>1、数据实时送达<br>2、不发无用请求，一次链接，多次“推送”<br>1、服务器增加开销<br>2、无法准确知道连接状态<br>3、IE、chrome等一直会处于loading状态Gmail聊天</li>
<li>WebSocketserver⇌clientnew WebSocket()<br>1、支持双向通信，实时性更强<br>2、可发送二进制文件<br>3、减少通信量<br>1、浏览器支持程度不一致<br>2、不支持断开重连网络游戏、银行交互和支付</li>
</ul>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><blockquote>
<p>首次请求后保存一份请求资源的响应副本，当用户再次发起相同请求后，如果判断缓存命中则拦截请求，将之前存储的响应副本返回给用户，避免重新向服务器发起资源请求。<br>减少冗余数据传输，节省网络流量，减轻服务器压力，加快访问速度</p>
</blockquote>
<ul>
<li>强制缓存<br>不会向服务器发请求，而是直接从缓存中读取资源，在控制台中返回200状态码</li>
</ul>
<p>响应头参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma:no-cache;</span><br><span class="line">Expires:响应头里的过期时间，若在这个时间内，则命中强缓存；（以分钟为单位，优先级比Cache-Control）</span><br><span class="line">Cache-Control:当值为max-age=300时（以秒为单位），则代表这个请求正确返回时间的五分钟内再次加载资源，就会命中强缓存。等于0则不使用缓存</span><br><span class="line">当为-no-cache时，表示不使用强缓存，需要使用协商缓存，先与服务器确认返回的响应是否被更改，如果之前的响应中存在Etag，那么请求时会与服务端验证，如果资源未被更改，则可避免重复下载。</span><br><span class="line">当为-no-store时，表示直接禁止浏览器缓存数据。</span><br><span class="line">当为-public时，表示被所有的用户缓存，包括终端用户和cdn等中间代理服务器。</span><br><span class="line">当为-private时，表示只能被终端用户缓存，不允许cdn等中继服务器对其缓存。</span><br></pre></td></tr></table></figure>


<ul>
<li>协商缓存<br>在使用本地缓存前，需向服务器发送请求，服务器根据请求头的参数判断是否命中协商缓存，若命中，则返回304状态码并带上新的响应头通知浏览器从缓存中读取数据。协商缓存可以解决本地资源不更新的问题。</li>
</ul>
<p>需设置Cache-Control为-no-cache</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Last-Modify:浏览器第一次请求一个资源时，服务器返回的响应头会加上Last-Modify，其为一个时间标识，记录该资源最后修改的时间.</span><br><span class="line">If-MOdify-Since:当浏览器再次请求同一个资源时，请求头会包含If-Modify-Sine，值为缓存之前返回的Last—Modify。服务器收到后根据当前资源修改的 时间判断是否命中缓存</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Etag:浏览器第一次请求一个资源时，服务器返回当前资源在服务器的唯一标识</span><br><span class="line">If-None_Match:再次请求时，若发现资源有Etag声明，则请求头会带上If-None_Match,值为Etag的值，服务器收到后进行比较来判断是否命中缓存。</span><br></pre></td></tr></table></figure>
<p>精度上etag要优于last-modify，last-modify单位为s，使用它无法区分一秒内修改多次的情况。<br>性能上etag要逊于last-modify，etag需要服务器额外性能计算hash值。</p>
<p>ctrl+r/f5/地址栏刷新：强缓存和协商缓存都生效</p>
<p>ctrl+f5/ctrl+shift+r:全部失效，会重新请求资源并缓存</p>
<p>post请求无法被缓存</p>
<p>静态页面可通过配置meta标签设置缓存属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;max-age=3000&quot;/&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/03/01/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/01/20-22-22/" class="post-title-link" itemprop="url">PHP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-01 20:22:22" itemprop="dateCreated datePublished" datetime="2021-03-01T20:22:22+08:00">2021-03-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-08-28 02:05:38" itemprop="dateModified" datetime="2021-08-28T02:05:38+08:00">2021-08-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><p>（全称：PHP：Hypertext Preprocessor，即”PHP：超文本预处理器”）是一种通用开源脚本语言。PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器</p>
<h2 id="PHP-语法"><a href="#PHP-语法" class="headerlink" title="PHP 语法"></a>PHP 语法</h2><ul>
<li>PHP 脚本可以放在文档中的任何位置。</li>
<li>PHP 脚本以<code> &lt;?php</code> 开始，以 <code>?&gt;</code> 结束</li>
<li>通过 PHP，有两种在浏览器输出文本的基础指令：<code>echo</code> 和 <code>print</code>。echo - 可以输出一个或多个字符串.print - 只允许输出一个字符串，返回值总为 1.可以使用括号，也可以不使用括号</li>
<li>可用<code>#</code>注释单行语句</li>
</ul>
<h2 id="PHP-变量规则"><a href="#PHP-变量规则" class="headerlink" title="PHP 变量规则"></a>PHP 变量规则</h2><ul>
<li>变量以<code> $</code> 符号开始，后面跟着变量的名称</li>
<li>变量名必须以字母或者下划线字符开始</li>
<li>变量名只能包含字母数字字符以及下划线（<code>A-z</code>、<code>0-9</code> 和<code> _</code> ）</li>
<li>变量名不能包含空格</li>
<li>变量名是区分大小写的（<code>$y </code>和 <code>$Y</code> 是两个不同的变量）</li>
<li>PHP 没有声明变量的命令</li>
<li>PHP 是一门弱类型语言,根据变量的值，自动把变量转换为正确的数据类型。</li>
</ul>
<h2 id="PHP-变量作用域"><a href="#PHP-变量作用域" class="headerlink" title="PHP 变量作用域"></a>PHP 变量作用域</h2><ul>
<li>global</li>
</ul>
<blockquote>
<p>在所有函数外部定义的变量，拥有全局作用域。除了函数外，全局变量可以被脚本中的任何部分访问，要在一个函数中访问一个全局变量，需要使用 global 关键字进行声明。</p>
</blockquote>
<p>在 PHP 函数内部声明的变量是局部变量，仅能在函数内部访问：global 关键字用于函数内访问全局变量。</p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$x=5;</span><br><span class="line">$y=10;</span><br><span class="line">function Test()</span><br><span class="line">&#123;</span><br><span class="line">    global $x,$y;</span><br><span class="line">    echo $x;</span><br><span class="line">    $y=$x+$y;</span><br><span class="line">&#125;</span><br><span class="line">myTest();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>PHP 将所有全局变量存储在一个名为 $GLOBALS[index] 的数组中。 index 保存变量的名称。这个数组可以在函数内部访问，也可以直接用来更新全局变量。</p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$x=5;</span><br><span class="line">$y=10;</span><br><span class="line">function myTest()</span><br><span class="line">&#123;</span><br><span class="line">    $GLOBALS[&#x27;y&#x27;]=$GLOBALS[&#x27;x&#x27;]+$GLOBALS[&#x27;y&#x27;];</span><br><span class="line">    echo $y;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">myTest();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>static</li>
</ul>
<p>当一个函数完成时，它的所有变量通常都会被删除。然而，有时候您希望某个局部变量不要被删除。<br>要做到这一点，请在您第一次声明变量时使用 static 关键字：然后，每次调用该函数时，该变量将会保留着函数前一次被调用时的值。<br>注释：该变量仍然是函数的局部变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function myTest()</span><br><span class="line">&#123;</span><br><span class="line">    static $x=0;</span><br><span class="line">    echo $x;</span><br><span class="line">    $x++;</span><br><span class="line">    echo PHP_EOL;    // 换行符</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">myTest();</span><br><span class="line">myTest();</span><br><span class="line">myTest();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="PHP-EOF-heredoc-使用说明"><a href="#PHP-EOF-heredoc-使用说明" class="headerlink" title="PHP EOF(heredoc) 使用说明"></a>PHP EOF(heredoc) 使用说明</h2><p>PHP EOF(heredoc)是一种在命令行shell（如sh、csh、ksh、bash、PowerShell和zsh）和程序语言（像Perl、PHP、Python和Ruby）里定义一个字符串的方法。</p>
<ol>
<li>必须后接分号，否则编译通不过。</li>
<li>EOF 可以用任意其它字符代替，只需保证结束标识与开始标识一致。以<code>&lt;&lt;&lt;EOF</code>开始标记开始，以 EOF 结束标记结束，结束标记必须顶头写，不能有缩进和空格，且在结束标记末尾要有分号 。只要保证开始标记和结束标记不在正文中出现即可</li>
<li>位于开始标记和结束标记之间的变量可以被正常解析，但是函数则不可以。在 heredoc 中，变量不需要用连接符 . 或 , 来拼接，如下：</li>
<li>开始标识可以不带引号。EOF 中是会解析 html 格式内容的，并且在双引号内的内容也有转义效果。</li>
<li>当内容需要内嵌引号（单引号或双引号）时，不需要加转义符，本身对单双引号转义，加不加引号转义字符都有效。</li>
</ol>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$name=&quot;jjj&quot;</span><br><span class="line">$a= &lt;&lt;&lt;EOF</span><br><span class="line">$name</span><br><span class="line">&lt;br/&gt;&lt;h1&gt;我的第一个标题&lt;/h1&gt;</span><br><span class="line">\$name</span><br><span class="line">\t</span><br><span class="line">jjjjj</span><br><span class="line">EOF;</span><br><span class="line">echo $a;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>字符串, 整型(整数是一个没有小数的数字。可以是正数或负数,十进制， 十六进制（ 以 0x 为前缀）或八进制（前缀为 0）。),浮点型(浮点数是带小数部分的数字，或是指数形式。),布尔型,数组,对象,NULL 值.</p>
<h2 id="PHP-常量"><a href="#PHP-常量" class="headerlink" title="PHP 常量"></a>PHP 常量</h2><p>(常量名不需要加 $ 修饰符,默认是全局变量)。</p>
<p><code>bool define ( string $name , mixed $value , bool $case_insensitive)</code><br>case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">define (&quot;PI&quot;,3.14);</span><br><span class="line">echo PI;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="并置运算符"><a href="#并置运算符" class="headerlink" title="并置运算符"></a>并置运算符</h2><p>在 PHP 中，只有一个字符串运算符。并置运算符 <code>.</code> 用于把两个字符串值连接起来。</p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$txt1=&quot;Hello world!&quot;;</span><br><span class="line">$txt2=&quot;What a nice day!&quot;;</span><br><span class="line">echo $txt1 . &quot; &quot; . $txt2;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>strlen() 函数<br>strlen() 函数返回字符串的长度（字节数）。<br><code>echo strlen(&quot;Hello world!&quot;);</code></p>
</li>
<li><p>strpos() 函数</p>
</li>
</ul>
<p>strpos() 函数用于在字符串内查找一个字符或一段指定的文本。如果在字符串中找到匹配，该函数会返回第一个匹配的字符位置。如果未找到匹配，则返回 FALSE。第一个字符的位置是 0;<br><code>strpos(&quot;Hello world!&quot;,&quot;world&quot;);</code></p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><ul>
<li><p>PHP7+ 版本新增整除运算符 intdiv()该函数返回值为第一个参数除于第二个参数的值并取整（向下取整）<br><code>intdiv(10, 3)</code></p>
</li>
<li><p>在 PHP7+ 版本多了一个 NULL 合并运算符 ??</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 如果 $_GET[&#x27;user&#x27;] 不存在返回 &#x27;nobody&#x27;，否则返回 $_GET[&#x27;user&#x27;] 的值</span><br><span class="line">$username = $_GET[&#x27;user&#x27;] ?? &#x27;nobody&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>PHP7+ 支持组合比较符（combined comparison operator）也称之为太空船操作符，符号为 &lt;=&gt;。<br>组合比较运算符可以轻松实现两个变量的比较，当然不仅限于数值类数据的比较。相等返回0，大于返回1，小于返回-1；</li>
</ul>
<p>语法格式如下：</p>
<p><code>$c = $a &lt;=&gt; $b;</code></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>数组是一个能在单个变量中存储多个值的特殊变量。</p>
<p>在 PHP 中，array() 函数用于创建数组：<br><code>$cars=array(&quot;Volvo&quot;,&quot;BMW&quot;,&quot;Toyota&quot;);</code></p>
<p>获取数组的长度 - count() 函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$cars=array(&quot;Volvo&quot;,&quot;BMW&quot;,&quot;Toyota&quot;);</span><br><span class="line">echo count($cars);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>PHP 关联数组</li>
</ul>
<p>关联数组是使用您分配给数组的指定的键的数组。</p>
<p>这里有两种创建关联数组的方法：<br>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$age=array(&quot;Peter&quot;=&gt;&quot;35&quot;,&quot;Ben&quot;=&gt;&quot;37&quot;,&quot;Joe&quot;=&gt;&quot;43&quot;);</span><br><span class="line">echo &quot;Peter is &quot; . $age[&#x27;Peter&#x27;] . &quot; years old.&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$age[&#x27;Peter&#x27;]=&quot;35&quot;;</span><br><span class="line">$age[&#x27;Ben&#x27;]=&quot;37&quot;;</span><br><span class="line">$age[&#x27;Joe&#x27;]=&quot;43&quot;;</span><br></pre></td></tr></table></figure>
<ul>
<li>遍历关联数组<br>遍历并打印关联数组中的所有值，您可以使用 foreach 循环，如下所示：<br>foreach 循环用于遍历数组。</li>
</ul>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">foreach ($array as $value)</span><br><span class="line">&#123;</span><br><span class="line">    要执行代码;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每进行一次循环，当前数组元素的值就会被赋值给 $value 变量（数组指针会逐一地移动），在进行下一次循环时，您将看到数组中的下一个值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">foreach ($array as $key =&gt; $value)</span><br><span class="line">&#123;</span><br><span class="line">    要执行代码;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一次循环，当前数组元素的键与值就都会被赋值给 $key 和 $value 变量（数字指针会逐一地移动），在进行下一次循环时，你将看到数组中的下一个键与值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$age=array(&quot;Peter&quot;=&gt;&quot;35&quot;,&quot;Ben&quot;=&gt;&quot;37&quot;,&quot;Joe&quot;=&gt;&quot;43&quot;);</span><br><span class="line"> </span><br><span class="line">foreach($age as $x=&gt;$x_value)</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Key=&quot; . $x . &quot;, Value=&quot; . $x_value;</span><br><span class="line">    echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="PHP-数组排序函数"><a href="#PHP-数组排序函数" class="headerlink" title="PHP - 数组排序函数"></a>PHP - 数组排序函数</h2><p>在本章中，我们将一一介绍下列 PHP 数组排序函数：</p>
<p>sort() - 对数组进行升序排列<br>rsort() - 对数组进行降序排列<br>asort() - 根据关联数组的值，对数组进行升序排列<br>ksort() - 根据关联数组的键，对数组进行升序排列<br>arsort() - 根据关联数组的值，对数组进行降序排列<br>krsort() - 根据关联数组的键，对数组进行降序排列</p>
<h2 id="PHP-超级全局变量"><a href="#PHP-超级全局变量" class="headerlink" title="PHP 超级全局变量"></a>PHP 超级全局变量</h2><p>PHP中预定义了几个超级全局变量（superglobals） ，这意味着它们在一个脚本的全部作用域中都可用。 你不需要特别说明，就可以在函数及类中使用。</p>
<p>PHP 超级全局变量列表:</p>
<ul>
<li><p>$GLOBALS<br>$GLOBALS 是PHP的一个超级全局变量组，在一个PHP脚本的全部作用域中都可以访问。</p>
</li>
<li><p>$_SERVER<br>$_SERVER 是一个包含了诸如头信息(header)、路径(path)、以及脚本位置(script locations)等等信息的数组。这个数组中的项目由 Web 服务器创建。不能保证每个服务器都提供全部项目；<br>下表列出了所有 $_SERVER 变量中的重要元素:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>元素/代码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>$_SERVER[‘PHP_SELF’]</td>
<td>当前执行脚本的文件名，与 document root 有关。例如，在地址为 <a target="_blank" rel="noopener" href="http://example.com/test.php/foo.bar">http://example.com/test.php/foo.bar</a> 的脚本中使用 $<em>SERVER[‘PHP_SELF’] 将得到 /test.php/foo.bar。__FILE</em>_ 常量包含当前(例如包含)文件的完整路径和文件名。 从 PHP 4.3.0 版本开始，如果 PHP 以命令行模式运行，这个变量将包含脚本名。之前的版本该变量不可用。</td>
</tr>
<tr>
<td>$_SERVER[‘GATEWAY_INTERFACE’]</td>
<td>服务器使用的 CGI 规范的版本；例如，”CGI/1.1”。</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_ADDR’]</td>
<td>当前运行脚本所在的服务器的 IP 地址。</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_NAME’]</td>
<td>当前运行脚本所在的服务器的主机名。如果脚本运行于虚拟主机中，该名称是由那个虚拟主机所设置的值决定。(如: <a target="_blank" rel="noopener" href="http://www.runoob.com/">www.runoob.com</a>)</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_SOFTWARE’]</td>
<td>服务器标识字符串，在响应请求时的头信息中给出。 (如：Apache/2.2.24)</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_PROTOCOL’]</td>
<td>请求页面时通信协议的名称和版本。例如，”HTTP/1.0”。</td>
</tr>
<tr>
<td>$_SERVER[‘REQUEST_METHOD’]</td>
<td>访问页面使用的请求方法；例如，”GET”, “HEAD”，”POST”，”PUT”。</td>
</tr>
<tr>
<td>$_SERVER[‘REQUEST_TIME’]</td>
<td>请求开始时的时间戳。从 PHP 5.1.0 起可用。 (如：1377687496)</td>
</tr>
<tr>
<td>$_SERVER[‘QUERY_STRING’]</td>
<td>query string（查询字符串），如果有的话，通过它进行页面访问。</td>
</tr>
<tr>
<td>$_SERVER[‘HTTP_ACCEPT’]</td>
<td>当前请求头中 Accept: 项的内容，如果存在的话。</td>
</tr>
<tr>
<td>$_SERVER[‘HTTP_ACCEPT_CHARSET’]</td>
<td>当前请求头中 Accept-Charset: 项的内容，如果存在的话。例如：”iso-8859-1,*,utf-8”。</td>
</tr>
<tr>
<td>$_SERVER[‘HTTP_HOST’]</td>
<td>当前请求头中 Host: 项的内容，如果存在的话。</td>
</tr>
<tr>
<td>$_SERVER[‘HTTP_REFERER’]</td>
<td>引导用户代理到当前页的前一页的地址（如果存在）。由 user agent 设置决定。并不是所有的用户代理都会设置该项，有的还提供了修改 HTTP_REFERER 的功能。简言之，该值并不可信。)</td>
</tr>
<tr>
<td>$_SERVER[‘HTTPS’]</td>
<td>如果脚本是通过 HTTPS 协议被访问，则被设为一个非空的值。</td>
</tr>
<tr>
<td>$_SERVER[‘REMOTE_ADDR’]</td>
<td>浏览当前页面的用户的 IP 地址。</td>
</tr>
<tr>
<td>$_SERVER[‘REMOTE_HOST’]</td>
<td>浏览当前页面的用户的主机名。DNS 反向解析不依赖于用户的 REMOTE_ADDR。</td>
</tr>
<tr>
<td>$_SERVER[‘REMOTE_PORT’]</td>
<td>用户机器上连接到 Web 服务器所使用的端口号。</td>
</tr>
<tr>
<td>$_SERVER[‘SCRIPT_FILENAME’]</td>
<td>当前执行脚本的绝对路径。</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_ADMIN’]</td>
<td>该值指明了 Apache 服务器配置文件中的 SERVER_ADMIN 参数。如果脚本运行在一个虚拟主机上，则该值是那个虚拟主机的值。(如：<a href="mailto:&#x73;&#x6f;&#109;&#101;&#111;&#x6e;&#x65;&#64;&#x72;&#x75;&#110;&#111;&#111;&#x62;&#x2e;&#x63;&#111;&#x6d;">&#x73;&#x6f;&#109;&#101;&#111;&#x6e;&#x65;&#64;&#x72;&#x75;&#110;&#111;&#111;&#x62;&#x2e;&#x63;&#111;&#x6d;</a>)</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_PORT’]</td>
<td>Web 服务器使用的端口。默认值为 “80”。如果使用 SSL 安全连接，则这个值为用户设置的 HTTP 端口。</td>
</tr>
<tr>
<td>$_SERVER[‘SERVER_SIGNATURE’]</td>
<td>包含了服务器版本和虚拟主机名的字符串。</td>
</tr>
<tr>
<td>$_SERVER[‘PATH_TRANSLATED’]</td>
<td>当前脚本所在文件系统（非文档根目录）的基本路径。这是在服务器进行虚拟到真实路径的映像后的结果。</td>
</tr>
<tr>
<td>$_SERVER[‘SCRIPT_NAME’]</td>
<td>包含当前脚本的路径。这在页面需要指向自己时非常有用。<strong>FILE</strong> 常量包含当前脚本(例如包含文件)的完整路径和文件名。</td>
</tr>
<tr>
<td>$_SERVER[‘SCRIPT_URI’]</td>
<td>URI 用来指定要访问的页面。例如 “/index.html”。</td>
</tr>
</tbody></table>
<ul>
<li>$_REQUEST</li>
</ul>
<p>$_REQUEST 用于收集HTML表单提交的数据。</p>
<p>以下实例显示了一个输入字段（input）及提交按钮(submit)的表单(form)。 当用户通过点击 “Submit” 按钮提交表单数据时, 表单数据将发送至<form>标签中 action 属性中指定的脚本文件。 在这个实例中，我们指定文件来处理表单数据。如果你希望其他的PHP文件来处理该数据，你可以修改该指定的脚本文件名。 然后，我们可以使用超级全局变量 $_REQUEST 来收集表单中的 input 字段数据:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER[&#x27;PHP_SELF&#x27;];?&gt;&quot;&gt;</span><br><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;?php </span><br><span class="line">$name = $_REQUEST[&#x27;fname&#x27;]; </span><br><span class="line">echo $name; </span><br><span class="line">?&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>$_POST</li>
</ul>
<p>$_POST 被广泛应用于收集表单数据，在HTML form标签的指定该属性：”method=”post”。</p>
<p>以下实例显示了一个输入字段（input）及提交按钮(submit)的表单(form)。 当用户通过点击 “Submit” 按钮提交表单数据时, 表单数据将发送至<form>标签中 action 属性中指定的脚本文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">$name = $_POST[&#x27;fname&#x27;]; </span><br><span class="line">echo $name; </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>$_GET<br>$_GET 同样被广泛应用于收集表单数据，在HTML form标签的指定该属性：”method=”get”。<br>$_GET 也可以收集URL中发送的数据。<br><code>&lt;a href=&quot;test_get.php?subject=PHP&amp;web=runoob.com&quot;&gt;Test $GET&lt;/a&gt;</code><br>当用户点击链接 “Test $GET”, 参数 “subject” 和 “web” 将发送至”test_get.php”,你可以在 “test_get.php” 文件中使用 $_GET 变量来获取这些数据。</li>
</ul>
<p>以下实例显示了 “test_get.php” 文件的代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">echo &quot;Study &quot; . $_GET[&#x27;subject&#x27;] . &quot; @ &quot; . $_GET[&#x27;web&#x27;];</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>$_FILES</li>
<li>$_ENV</li>
<li>$_COOKIE</li>
<li>$_SESSION</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function functionName()</span><br><span class="line">&#123;</span><br><span class="line">    // 要执行的代码</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="魔术常量"><a href="#魔术常量" class="headerlink" title="魔术常量"></a>魔术常量</h2><p>PHP 向它运行的任何脚本提供了大量的预定义常量。<br>不过很多常量都是由不同的扩展库定义的，只有在加载了这些扩展库时才会出现，或者动态加载后，或者在编译时已经包括进去了。<br>有八个魔术常量它们的值随着它们在代码中的位置改变而改变。</p>
<ul>
<li><p>_<em>LINE</em>_<br>文件中的当前行号。</p>
</li>
<li><p>_<em>FILE</em>_<br>文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。自 PHP 4.0.2 起，_<em>FILE</em>_ 总是包含一个绝对路径（如果是符号连接，则是解析后的绝对路径），</p>
</li>
<li><p>_<em>DIR</em>_<br>文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。</p>
</li>
<li><p>_<em>FUNCTION</em>_<br>函数名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该函数被定义时的名字</p>
</li>
<li><p>_<em>CLASS</em>_<br>类的名称（PHP 4.3.0 新加）。自 PHP 5 起本常量返回该类被定义时的名字（区分大小写）。</p>
</li>
<li><p>_<em>TRAIT</em>_<br>Trait 的名字（PHP 5.4.0 新加）。自 PHP 5.4.0 起，PHP 实现了代码复用的一个方法，称为 traits。</p>
</li>
<li><p>_<em>METHOD</em>_<br>类的方法名（PHP 5.0.0 新加）。返回该方法被定义时的名字（区分大小写）。</p>
</li>
<li><p>_<em>NAMESPACE</em>_<br>当前命名空间的名称（区分大小写）。此常量是在编译时定义的（PHP 5.3.0 新增）。</p>
</li>
</ul>
<p>PHP 命名空间可以解决以下两类问题：</p>
<ol>
<li>用户编写的代码与PHP内部的类/函数/常量或第三方类/函数/常量之间的名字冲突。</li>
<li>为很长的标识符名称(通常是为了缓解第一类问题而定义的)创建一个别名（或简短）的名称，提高源代码的可读性。</li>
</ol>
<p>定义命名空间<br>默认情况下，所有常量、类和函数名都放在全局空间下，就和PHP支持命名空间之前一样。</p>
<p>命名空间通过关键字namespace 来声明。如果一个文件中包含命名空间，它必须在其它所有代码之前声明命名空间。语法格式如下；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">// 定义代码在 &#x27;MyProject&#x27; 命名空间中  </span><br><span class="line">namespace MyProject;  </span><br><span class="line"> </span><br><span class="line">// ... 代码 ...  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>也可以在同一个文件中定义不同的命名空间代码，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">namespace MyProject;</span><br><span class="line"></span><br><span class="line">const CONNECT_OK = 1;</span><br><span class="line">class Connection &#123; /* ... */ &#125;</span><br><span class="line">function connect() &#123; /* ... */  &#125;</span><br><span class="line"></span><br><span class="line">namespace AnotherProject;</span><br><span class="line"></span><br><span class="line">const CONNECT_OK = 1;</span><br><span class="line">class Connection &#123; /* ... */ &#125;</span><br><span class="line">function connect() &#123; /* ... */  &#125;</span><br><span class="line">?&gt;  </span><br></pre></td></tr></table></figure>
<p>不建议使用这种语法在单个文件中定义多个命名空间。建议使用下面的大括号形式的语法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace MyProject &#123;</span><br><span class="line">    const CONNECT_OK = 1;</span><br><span class="line">    class Connection &#123; /* ... */ &#125;</span><br><span class="line">    function connect() &#123; /* ... */  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namespace AnotherProject &#123;</span><br><span class="line">    const CONNECT_OK = 1;</span><br><span class="line">    class Connection &#123; /* ... */ &#125;</span><br><span class="line">    function connect() &#123; /* ... */  &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>将全局的非命名空间中的代码与命名空间中的代码组合在一起，只能使用大括号形式的语法。全局代码必须用一个不带名称的 namespace 语句加上大括号括起来，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace MyProject &#123;</span><br><span class="line"></span><br><span class="line">const CONNECT_OK = 1;</span><br><span class="line">class Connection &#123; /* ... */ &#125;</span><br><span class="line">function connect() &#123; /* ... */  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namespace &#123; // 全局代码</span><br><span class="line">session_start();</span><br><span class="line">$a = MyProject\connect();</span><br><span class="line">echo MyProject\Connection::start();</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>在声明命名空间之前唯一合法的代码是用于定义源文件编码方式的 declare 语句。所有非 PHP 代码包括空白符都不能出现在命名空间的声明之前。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">declare(encoding=&#x27;UTF-8&#x27;); //定义多个命名空间和不包含在命名空间中的代码</span><br><span class="line">namespace MyProject &#123;</span><br><span class="line"></span><br><span class="line">const CONNECT_OK = 1;</span><br><span class="line">class Connection &#123; /* ... */ &#125;</span><br><span class="line">function connect() &#123; /* ... */  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namespace &#123; // 全局代码</span><br><span class="line">session_start();</span><br><span class="line">$a = MyProject\connect();</span><br><span class="line">echo MyProject\Connection::start();</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="子命名空间"><a href="#子命名空间" class="headerlink" title="子命名空间"></a>子命名空间</h2><p>与目录和文件的关系很像，PHP 命名空间也允许指定层次化的命名空间的名称。因此，命名空间的名字可以使用分层次的方式定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace MyProject\Sub\Level;  //声明分层次的单个命名空间</span><br><span class="line"></span><br><span class="line">const CONNECT_OK = 1;</span><br><span class="line">class Connection &#123; /* ... */ &#125;</span><br><span class="line">function Connect() &#123; /* ... */  &#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>命名空间使用<br>PHP 命名空间中的类名可以通过三种方式引用：</p>
<ul>
<li>非限定名称，或不包含前缀的类名称，例如 $a=new foo(); 或 foo::staticmethod();。如果当前命名空间是 currentnamespace，foo 将被解析为 currentnamespace\foo。如果使用 foo 的代码是全局的，不包含在任何命名空间中的代码，则 foo 会被解析为foo。 警告：如果命名空间中的函数或常量未定义，则该非限定的函数名称或常量名称会被解析为全局函数名称或常量名称。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Foo\Bar\subnamespace; </span><br><span class="line"></span><br><span class="line">const FOO = 1;</span><br><span class="line">function foo() &#123;&#125;</span><br><span class="line">class foo</span><br><span class="line">&#123;</span><br><span class="line">    static function staticmethod() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>限定名称,或包含前缀的名称，例如 $a = new subnamespace\foo(); 或 subnamespace\foo::staticmethod();。如果当前的命名空间是 currentnamespace，则 foo 会被解析为 currentnamespace\subnamespace\foo。如果使用 foo 的代码是全局的，不包含在任何命名空间中的代码，foo 会被解析为subnamespace\foo。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Foo\Bar;</span><br><span class="line">include &#x27;file1.php&#x27;;</span><br><span class="line"></span><br><span class="line">const FOO = 2;</span><br><span class="line">function foo() &#123;&#125;</span><br><span class="line">class foo</span><br><span class="line">&#123;</span><br><span class="line">    static function staticmethod() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 非限定名称 */</span><br><span class="line">foo(); // 解析为函数 Foo\Bar\foo</span><br><span class="line">foo::staticmethod(); // 解析为类 Foo\Bar\foo ，方法为 staticmethod</span><br><span class="line">echo FOO; // 解析为常量 Foo\Bar\FOO</span><br><span class="line"></span><br><span class="line">/* 限定名称 */</span><br><span class="line">subnamespace\foo(); // 解析为函数 Foo\Bar\subnamespace\foo</span><br><span class="line">subnamespace\foo::staticmethod(); // 解析为类 Foo\Bar\subnamespace\foo,</span><br><span class="line">                                  // 以及类的方法 staticmethod</span><br><span class="line">echo subnamespace\FOO; // 解析为常量 Foo\Bar\subnamespace\FOO</span><br><span class="line">                                  </span><br><span class="line">/* 完全限定名称 */</span><br><span class="line">\Foo\Bar\foo(); // 解析为函数 Foo\Bar\foo</span><br><span class="line">\Foo\Bar\foo::staticmethod(); // 解析为类 Foo\Bar\foo, 以及类的方法 staticmethod</span><br><span class="line">echo \Foo\Bar\FOO; // 解析为常量 Foo\Bar\FOO</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>注意访问任意全局类、函数或常量，都可以使用完全限定名称，例如 \strlen() 或 \Exception 或 \INI_ALL。</p>
<p>在命名空间内部访问全局类、函数和常量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">namespace Foo;</span><br><span class="line"></span><br><span class="line">function strlen() &#123;&#125;</span><br><span class="line">const INI_ALL = 3;</span><br><span class="line">class Exception &#123;&#125;</span><br><span class="line"></span><br><span class="line">$a = \strlen(&#x27;hi&#x27;); // 调用全局函数strlen</span><br><span class="line">$b = \INI_ALL; // 访问全局常量 INI_ALL</span><br><span class="line">$c = new \Exception(&#x27;error&#x27;); // 实例化全局类 Exception</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>完全限定名称，或包含了全局前缀操作符的名称，例如， $a = new \currentnamespace\foo(); 或 \currentnamespace\foo::staticmethod();。在这种情况下，foo 总是被解析为代码中的文字名(literal name)currentnamespace\foo。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/02/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-11-33/" class="post-title-link" itemprop="url">Ant-Design</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:11:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-30 23:32:54" itemprop="dateModified" datetime="2022-12-30T23:32:54+08:00">2022-12-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="antd"><a href="#antd" class="headerlink" title="antd"></a>antd</h1><h3 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h3><ul>
<li>缺少key，提示错误</li>
</ul>
<p>添加rowkey属性指定唯一key</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Table rowkey=&#123;&#x27;id&#x27;&#125;&gt;</span><br><span class="line">&lt;/Table&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Checkbox"><a href="#Checkbox" class="headerlink" title="Checkbox"></a>Checkbox</h3><ul>
<li>Checkbox.Group 初始值无效<br>useState()初始为空，Checkbox.Group 绑定后不再更新</li>
</ul>
<h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><ul>
<li>lazy<br>Suspense中的fallback渲染的组件不能使用懒加载</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/02/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-11-33/" class="post-title-link" itemprop="url">AJax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:11:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-10 14:58:22" itemprop="dateModified" datetime="2022-07-10T14:58:22+08:00">2022-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><p><code>XMLHttpRequest</code>IE8以下不兼容；IE8以下声明ajax方法为<code>ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</code></p>
<ol>
<li><p>创建ajax对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var xhr=null</span><br><span class="line">if(window.XMLHttpRequest)&#123;</span><br><span class="line"> xhr=new XMLHttpRequest();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">xhr=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>调用open</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">第一个参数： 请求方式 </span><br><span class="line">第二个：url</span><br><span class="line">第三个：是否异步，true异步，false同步</span><br><span class="line">*/</span><br><span class="line">xhr.open(&quot;get&quot;,&quot;./1.txt&quot;,true);</span><br><span class="line">//或</span><br><span class="line">xhr.open(&quot;get&quot;,&quot;./get.php?name=yyyy&amp;age=22&amp;password=342&quot;,true);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>调用send</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//get方法</span><br><span class="line">xhr.send();</span><br><span class="line">//post方法，将数据放在send()里提交</span><br><span class="line">xhr.setRequestHeader(&#x27;content-type&#x27;,&#x27;application/x-www-form-urlencoded&#x27;);	//声明发送的数据类型</span><br><span class="line">xhr.send(&quot;name=yyy&amp;age=33&amp;password=124564&quot;);	//无需编码</span><br><span class="line">//post没有缓存问题</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>等待数据响应</li>
</ol>
<p>onreadystatechange事件</p>
<table>
<thead>
<tr>
<th>readyState属性</th>
<th>请求状态</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>（初始化）还没调用open（）方法</td>
</tr>
<tr>
<td>1</td>
<td>（载入）已调用send()方法。正在发送请求</td>
</tr>
<tr>
<td>2</td>
<td>(载入完成）send()方法完成，已收到全部响应内容</td>
</tr>
<tr>
<td>3</td>
<td>(解析）正在解析响应内容</td>
</tr>
<tr>
<td>4</td>
<td>(完成）响应内容解析完成，可在客户端调用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>status属性</th>
<th>服务器（请求资源）的状态</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td></td>
</tr>
<tr>
<td>400</td>
<td></td>
</tr>
</tbody></table>
<p><code>responseText</code>:返回以文本形式存放的内容;<br><code>responseXML</code>:返回XML形式的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange=function()&#123;</span><br><span class="line">if(xhr.readyState==4)&#123;</span><br><span class="line">if(xhr.status==200)&#123;</span><br><span class="line"></span><br><span class="line">console.log(xhr.responseText);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">alert(&quot;error:&quot;+xhr.status);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="传输格式"><a href="#传输格式" class="headerlink" title="传输格式"></a>传输格式</h3><ul>
<li><p>xml数据<br>优点：种类丰富，传输量非常大<br>缺点：解析麻烦，不适合轻量数据</p>
</li>
<li><p>json数据</p>
</li>
</ul>
<p>优点：轻量级数据，解析轻松<br>缺点：种类少，传输数据量少</p>
<p><code>JSON.parse();</code>:将JSON字符串转为一个对象。<br>你的字符串必须符合JSON格式，即键值都必须使用双引号包裹：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let a = &#x27;[&quot;1&quot;,&quot;2&quot;]&#x27;;</span><br><span class="line">let b = &quot;[&#x27;1&#x27;,&#x27;2&#x27;]&quot;;</span><br><span class="line">console.log(JSON.parse(a));// Array [1,2]</span><br><span class="line">console.log(JSON.parse(b));// 报错</span><br></pre></td></tr></table></figure>
<p><code>JSON.stringify();</code>:将 JavaScript 对象转换为 JSON 字符串</p>
<h3 id="ajax-只能下载同源的数据，跨源的数据禁止下载"><a href="#ajax-只能下载同源的数据，跨源的数据禁止下载" class="headerlink" title="ajax 只能下载同源的数据，跨源的数据禁止下载"></a>ajax 只能下载同源的数据，跨源的数据禁止下载</h3><ul>
<li><p>同源策略</p>
<ol>
<li>同协议</li>
<li>同域名/IP</li>
<li>同端口号</li>
</ol>
</li>
</ul>
<p>同源策略禁止跨源请求</p>
<ul>
<li>跨源方法：<ol>
<li>修改ajax同源协议（不建议）</li>
<li>委托php文件进行跨源</li>
<li>JSONP</li>
</ol>
</li>
</ul>
<h3 id="JSONP跨域的使用流程"><a href="#JSONP跨域的使用流程" class="headerlink" title="JSONP跨域的使用流程"></a>JSONP跨域的使用流程</h3><ol>
<li>先去声明一个函数，这个函数有一个形参，这个形参会拿到我们想要下载的数据，</li>
<li>在需要下载数据的时候，动态创建script标签，将标签src属性设置成下载数据的链接</li>
<li>当script插入到页面的时候，就会调用号已经封装好的函数，将数据传过来</li>
</ol>
<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function download(data)&#123;</span><br><span class="line">console.log(data);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;test.js&quot;&gt;	//浏览器一运行就会显示&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//动态生成script标签</span><br><span class="line">window.onload=function()&#123;</span><br><span class="line">var Obtn=document.getElementById(&#x27;btn1&#x27;);</span><br><span class="line">Obtn.onclick=function()&#123;</span><br><span class="line">	var oScript=document.createElement(&quot;script&quot;);	//创建script标签</span><br><span class="line">	oScript.src=&#x27;test.js&#x27;;</span><br><span class="line">	document.body.appendChild(oScript);		//插入到页面</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p> test.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">download(&quot;hello!!!!!!!!!&quot;);</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function download(data)&#123;</span><br><span class="line">console.log(data);</span><br><span class="line"> var oInfo=documenet.getElementById(&quot;oinfo&quot;);</span><br><span class="line"> var oTi=..;</span><br><span class="line">	oInfo.innerHTML=`$&#123;data.city&#125;`</span><br><span class="line">		</span><br><span class="line">	var str=&#x27;&#x27;;</span><br><span class="line">	for (var i=0;i&lt;arr.length;i++)&#123;</span><br><span class="line">	str+=`</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td&gt;$&#123;arr[i].data&#125;&lt;/td&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">			`</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	oTi.innerHTML=str;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//动态生成script标签</span><br><span class="line">window.onload=function()&#123;</span><br><span class="line">var Obtn=document.getElementById(&#x27;btn1&#x27;);</span><br><span class="line">Obtn.onclick=function()&#123;</span><br><span class="line">	var oScript=document.createElement(&quot;script&quot;);	//创建script标签</span><br><span class="line">	oScript.src=&#x27;https:.....&amp;callback=download&#x27;;</span><br><span class="line">	document.body.appendChild(oScript);		//插入到页面</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h3><p>form表单点击提交数据后需跳转页面，ajax为异步进行的数据传输</p>
<ul>
<li>action:点击submit后跳转的url</li>
<li>method:表单提交方式get/post<ul>
<li>get(默认)<br>直接将数据拼接在url后面进行提交;用<code>？</code>进行拼接,多个数据之间用<code>&amp;</code>进行连接<ul>
<li>优点：简单</li>
<li>缺点：不安全，最大2kb，无法实现上传大文件</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;get.php&quot; method=&quot;get&quot;&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;username&quot; placeholder=&quot;name&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;age&quot; placeholder=&quot;age&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;password&quot; placeholder=&quot;&quot; /&gt;</span><br><span class="line">&lt;input type&quot;submit&quot;/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>post<br>通过浏览器内部进行提交<ul>
<li>优点：安全，上传大小无上限</li>
<li>缺点：比get复杂</li>
</ul>
</li>
</ul>
<p><code>enctype</code>提交数据的格式，默认<code>application/x-www-form-urlencoded</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;post.php&quot; method=&quot;post&quot;  enctype=&quot;application/x-www-from-urlencoded&quot;&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;username&quot; placeholder=&quot;name&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;age&quot; placeholder=&quot;age&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;password&quot; placeholder=&quot;&quot; /&gt;</span><br><span class="line">&lt;input type&quot;submit&quot; value=&quot;post按钮&quot;/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>php</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header(&#x27;content-type:text/html;charset=&quot;UTF-8&quot;&#x27;);</span><br><span class="line">//$_GET 全局关联数组 ；存放着get提交的所有数据</span><br><span class="line">//$_POST全局数组，储存着post发送来的数据</span><br><span class="line">$username=$_GET[&#x27;username&#x27;];</span><br><span class="line">$age=$_GET[&#x27;age&#x27;];</span><br><span class="line">$password=$_GET[&#x27;password&#x27;];</span><br><span class="line"></span><br><span class="line">echo (&quot;&#123;$username&#125;,$&#123;age&#125;,&#123;$password&#125;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header(&quot;Content-type:text/html;charset=utf-8&quot;);</span><br><span class="line">//连接数据库</span><br><span class="line">/*</span><br><span class="line">第一个参数：连接数据库的ip/域名</span><br><span class="line">第二个参数：用户名</span><br><span class="line">第三个参数：密码</span><br><span class="line">*/</span><br><span class="line">$link=mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;123456&quot;);</span><br><span class="line">if($link)&#123;</span><br><span class="line">echo&quot;连接失败&quot;;</span><br><span class="line">exit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//设置字符集</span><br><span class="line">mysql_set_charset(&quot;utf8&quot;);</span><br><span class="line">//选择数据库</span><br><span class="line">mysql_select_db(&quot;jjjj&quot;);</span><br><span class="line">//准备sql语句</span><br><span class="line">$sql=&quot;SELECT * FROM students&quot;;</span><br><span class="line">//发送sql语句</span><br><span class="line">$res=mysql_query($sql);</span><br><span class="line">//处理结果,全部获取</span><br><span class="line">$arr=array();</span><br><span class="line">while($row=mysql_fetch_assoc($res))&#123;</span><br><span class="line">array_push($arr,$row);</span><br><span class="line">var_dump($row);</span><br><span class="line">&#125;</span><br><span class="line">echo json_encode($arr);</span><br><span class="line">//关闭数据库</span><br><span class="line">mysql_close($link);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="post-put-patch请求传参格式有-formData-形式-、query-形式-、JSON形式三种；"><a href="#post-put-patch请求传参格式有-formData-形式-、query-形式-、JSON形式三种；" class="headerlink" title="post/put/patch请求传参格式有 formData 形式 、query 形式 、JSON形式三种；"></a>post/put/patch请求传参格式有 formData 形式 、query 形式 、JSON形式三种；</h2><h2 id="axios设置token到请求头："><a href="#axios设置token到请求头：" class="headerlink" title="axios设置token到请求头："></a>axios设置token到请求头：</h2><p>加一个http request拦截器；通过window.localStorage.getItem(“accessToken”) 来获取token的value；通过config.headers.accessToken = token;将token放到请求头发送给服务器，放在请求头中<br>##form表单提交是单向的：<br>只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取HTTP应答包。</p>
<hr>
<p>同源策略<br>跨域：浏览器允许向服务器发送跨域请求，从而克服Ajax只能同源使用的限制。</p>
<p>同源策略：如果两个页面的协议，域名,端口都相同，则两个页面具有相同的源。<br>同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源。这是一个用于隔离潜在恶意文件的重要安全机制。</p>
<p>不受同源策略限制的</p>
<p>页面中的链接，重定向以及表单提交是不会受到同源策略限制的。</p>
<p>跨域资源的引入是可以的。但是js不能读写加载的内容。如嵌入到页面中的<script src="..."></script>，<img>，<link>，<iframe>等。</p>
<p>受到限制的</p>
<p>Cookie、LocalStorage 和 IndexDB 无法读取<br>DOM和JS对象无法获得<br>AJAX 请求不能发送<br>跨域解决方案<br>一、JSONP跨域<br>jsonp的核心原理就是：目标页面回调本地页面的方法,并带入参数<br>服务器端实现 JSONP 接口的步骤<br>服务器端获取客户端发送过来的query参数，其中参数有回调函数的名字<br>得到的数据，拼接出一个函数调用的字符串<br>把上一步拼接得到的字符串，响应给客户端的 <script> 标签进行解析执行<br>jsonp的缺点：只能发送get一种请求。<br>1、原生JS实现<br>通过script标签src属性，发送带有callback参数的GET请求，服务端将接口返回数据拼凑到callback函数中，返回给浏览器，浏览器解析执行，从而前端拿到callback函数返回的数据。</p>
<script>
    function getData(data){
        console.log(data)
    }
</script>
<script src="http://127.0.0.1:3000/web?cb=getData"></script>
<p>后端nodejs代码<br>主要用来模拟服务器<br>携带参数必须是字符串</p>
<p>const express=require(‘express’)<br>const router=express.Router()<br>router.get(‘/web’,(req,res)=&gt;{<br>    let {cb}=req.query<br>    console.log(req.query)<br>    var data = {<br>        name: ‘xtt’,<br>        age: 18,<br>        gender:’女孩子’<br>    }<br>    // 携带参数必须是字符串<br>    res.send(<code>$&#123;cb&#125;($&#123;JSON.stringify(data)&#125;)</code>)<br>    router.get(‘/que’,(req,res)=&gt;{<br>        res.send(<code>$&#123;req.query.cb&#125;(&#39;dd&#39;)</code>)<br>    })<br>})<br>module.exports=router<br>2、jquery Ajax实现<br>以jquery来发起jsonp请求</p>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.js"></script>
<script>
    let url = 'http://127.0.0.1:3000/que?cb=getData'
    $.ajax({
        method: 'GET',
        url,
        dataType: 'jsonp',
        success: (res) => {
            console.log(res)
        }
    })
</script>
<p>3、Vue axios实现<br>handleCallback({“success”: true, “user”: “admin”})<br>this.$http = axios;<br>this.$http.jsonp(‘<a target="_blank" rel="noopener" href="http://127.0.0.1:3000/que?cb=getData&#39;">http://127.0.0.1:3000/que?cb=getData&#39;</a>, {<br>    params: {},<br>    jsonp: ‘handleCallback’<br>}).then((res) =&gt; {<br>    console.log(res);<br>})<br>二、跨域资源共享（CORS）<br>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。<br>CORS需要浏览器和服务器同时支持。<br>目前，所有主流浏览器都支持该功能，IE10以下不支持。<br>浏览器将CORS跨域请求分为：简单请求、非简单请求。<br>简单请求与非简单请求<br>简单请求<br>浏览器在发送跨域请求的时候，会先判断下是简单请求还是非简单请求，如果是简单请求，就先执行服务端程序，然后浏览器才会判断是否跨域。<br>同时满足以下的两个条件，就属于简单请求。浏览器对这两种的处理，是不一样的。</p>
<p>请求方式：get/post/head其中一种<br>请求头设置：<br>Accept<br>Accept-Language<br>Content-Type：application/x-www-form-urlencoded、multipart/form-data、text/plain（ 只限于三个值中的一个）<br>详细描述<br>对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个Origin字段。<br>举例：</p>
<p>发起请求</p>
<p>自动在头信息之中，添加一个Origin字段。</p>
<p>GET /cors HTTP/1.1<br>Origin: <a target="_blank" rel="noopener" href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a><br>Host: api.alice.com<br>Accept-Language: en-US<br>Connection: keep-alive<br>User-Agent: Mozilla/5.0…<br>Origin：本次请求来自哪个域（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求。</p>
<p>服务器判断此次请求Origin源</p>
<p>不在许可范围内：服务器会返回一个正常的 HTTP 回应。<br>浏览器发现，这个回应的头信息没有包含Access-Control-Allow-Origin字段（详见下文），就知道出错了，从而抛出一个错误，被请求的异常回调函数捕获。<br>注意，这种错误无法通过状态码识别，因为 HTTP 回应的状态码有可能是200。<br>在许可范围内：服务器返回的响应，会多出几个头信息字段。<br>有三个与 CORS 请求相关的字段，都以Access-Control-开头。<br>Access-Control-Allow-Origin: <a target="_blank" rel="noopener" href="http://api.bob.com/">http://api.bob.com</a><br>Access-Control-Allow-Credentials: true<br>Access-Control-Expose-Headers: FooBar<br>Content-Type: text/html; charset=utf-8<br>Access-Control解释</p>
<p>Access-Control-Allow-Origin：必须的</p>
<p>它的值要么是请求时Origin字段的值，要么是一个*，表示接受任意域名的请求。</p>
<p>Access-Control-Allow-Credentials：可选</p>
<p>布尔值，表示是否允许发送 Cookie。默认情况下，Cookie 不包括在 CORS 请求之中（为了降低 CSRF 攻击的风险。）。设为true，即表示服务器明确许可，浏览器可以把 Cookie 包含在请求中，一起发给服务器。这个值也只能设为true，如果服务器不要浏览器发送 Cookie，不发送该字段即可。</p>
<p>Access-Control-Expose-Headers：可选</p>
<p>CORS 请求时，XMLHttpRequest对象的getResponseHeader()方法只能拿到6个服务器返回的基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定。上面的例子指定，getResponseHeader(‘FooBar’)可以返回FooBar字段的值。</p>
<p>非简单请求<br>对服务器提出特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json。</p>
<p>预检请求</p>
<p>非简单请求的 CORS 请求，会在正式通信之前，增加一次 HTTP 查询请求，称为“预检”请求（preflight）。<br>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP 方法和头信息字段。<br>只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。<br>这是为了防止这些新增的请求，对传统的没有 CORS 支持的服务器形成压力，给服务器一个提前拒绝的机会，这样可以防止服务器收到大量DELETE和PUT请求，这些传统的表单不可能跨域发出的请求<br>举例</p>
<p>自动发出一个“预检”请求，要求服务器确认可以这样请求。下面是这个“预检”请求的 HTTP 头信息：</p>
<p>OPTIONS /cors HTTP/1.1<br>Origin: <a target="_blank" rel="noopener" href="http://api.bob.com/">http://api.bob.com</a><br>Access-Control-Request-Method: PUT<br>Access-Control-Request-Headers: X-Custom-Header<br>Host: api.alice.com<br>Accept-Language: en-US<br>Connection: keep-alive<br>User-Agent: Mozilla/5.0…</p>
<p>两个特殊字段:</p>
<p>Access-Control-Request-Method必须的<br>用来列出浏览器的 CORS 请求会用到哪些 HTTP 方法，上例是PUT。</p>
<p>Access-Control-Request-Headers<br>该字段是一个逗号分隔的字符串，指定浏览器 CORS 请求会额外发送的头信息字段。</p>
<p>服务器收到“预检”请求以后，检查了Origin、Access-Control-Request-Method和Access-Control-Request-Headers字段以后，确认允许跨源请求，就可以做出回应</p>
<p>预检请求的回应：<br>服务器收到”预检”请求以后，检查了Origin、Access-Control-Request-Method和Access-Control-Request-Headers字段以后，确认允许跨源请求，就可以做出回应。</p>
<p>HTTP回应中，除了关键的是Access-Control-Allow-Origin字段，其他CORS相关字段如下：</p>
<p>Access-Control-Allow-Methods：必选<br>它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次”预检”请求。</p>
<p>Access-Control-Allow-Headers<br>如果浏览器请求包括Access-Control-Request-Headers字段，则Access-Control-Allow-Headers字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p>
<p>Access-Control-Allow-Credentials：可选<br>该字段与简单请求时的含义相同。</p>
<p>Access-Control-Max-Age：可选<br>用来指定本次预检请求的有效期，单位为秒。</p>
<p>CORS跨域<br>1)前端设置</p>
<p>let xhr;<br>try {<br>    xhr=new XMLHttpRequest();<br>} catch (error) {<br>     xhr=new ActiveXObject(‘Microsoft.XMLHTTP’);<br>}<br>xhr.open(‘post’,’<a target="_blank" rel="noopener" href="http://localhost:3000/login&#39;,true">http://localhost:3000/login&#39;,true</a>);<br>xhr.setRequestHeader(‘content-type’,’application/x-www-form-urlencoded’);<br>xhr.send(‘name=111&amp;age=12’);<br>xhr.onreadystatechange=function(){<br>    if(xhr.readyState==4){<br>        let reg=/^2\d{2}/<br>        if(reg.test(xhr.status)){<br>            console.log(JSON.parse(xhr.response))<br>        }<br>    }<br>}<br>nodejs代码<br>在Express中通过第3方中间件来完成cors跨域解决<br>使用步骤分为如下 3 步：</p>
<p>运行 npm install cors 安装中间件<br>使用 const cors = require(‘cors’) 导入中间件<br>在路由之前调用 app.use(cors()) 配置中间件<br>const express=require(‘express’)<br>const cors=require(‘cors’)<br>const app=express()<br>app.listen(3000)<br>const allowHosts=[<br>    ‘<a href="http://localhost:5000&#39;">http://localhost:5000&#39;</a>,<br>    ‘<a href="http://localhost:2000&#39;">http://localhost:2000&#39;</a><br>]<br>app.use(cors())<br>app.use((req,res,next)=&gt;{<br>    let hst =req.header.origin<br>    if(allowHosts.includes(hst)){<br>        next()<br>    }else{<br>        return res.send({<br>            code:404,<br>            msg:’地址不对’<br>        })<br>    }<br>})<br>app.get(‘/login’,(req,res)=&gt;{<br>    res.send(‘登陆’)<br>})<br>三、Nginx 反向代理解决跨域问题<br>正向代理和反向代理<br>提到代理，肯定要说一下这两个的区别。</p>
<p>举个正向代理的例子<br>我打球累了走不动了，找看球的小朋友帮我去旁边的商店买瓶水。商店老板是不知道到底是谁需要喝水的，隐藏了客户端。当然，小朋友可以告诉老板就是那个打球像蔡徐坤的人要喝水。还有，VPN 就是正向代理。</p>
<p>反向代理的例子<br>我打球累了，找看球的小朋友要瓶水喝（当然我肯定会给钱的：D）。我不需要知道小朋友的水是从旁边的商店还是两公里外的超市买的。隐藏了服务端。还有，我们连好了 VPN 访问谷歌的时候，浏览的那些页面，我们是不会知道具体是哪台服务器的资源。</p>
<p>nginx配置解决iconfont跨域<br>浏览器跨域访问js、css、img等常规静态资源被同源策略许可，但iconfont字体文件(eot|otf|ttf|woff|svg)例外，此时可在nginx的静态资源服务器中加入以下配置。</p>
<p>location / {<br>  add_header Access-Control-Allow-Origin *;<br>}<br>nginx反向代理接口跨域<br>跨域问题：同源策略仅是针对浏览器的安全策略。服务器端调用HTTP接口只是使用HTTP协议，不需要同源策略，也就不存在跨域问题。</p>
<p>实现思路：通过Nginx配置一个代理服务器域名与domain1相同，端口不同）做跳板机，反向代理访问domain2接口，并且可以顺便修改cookie中domain信息，方便当前域cookie写入，实现跨域访问。</p>
<p>nginx具体配置</p>
<p>#proxy服务器<br>server {<br>    listen       81;<br>    server_name  <a target="_blank" rel="noopener" href="http://www.domain1.com/">www.domain1.com</a>;</p>
<pre><code>location / &#123;
    proxy_pass   http://www.yp2.com:8080;  #反向代理
    proxy_cookie_domain www.yp2.com www.yp1.com; #修改cookie里域名
    index  index.html index.htm;

    # 当用webpack-dev-server等中间件代理接口访问nignx时，此时无浏览器参与，故没有同源限制，下面的跨域配置可不启用
    add_header Access-Control-Allow-Origin http://www.yp1.com;  #当前端只跨域不带cookie时，可为*
    add_header Access-Control-Allow-Credentials true;
&#125;
</code></pre>
<p>}</p>
<p>四、nodejs中间件代理跨域<br>node中间件实现跨域代理，原理大致与nginx相同，都是通过启一个代理服务器，实现数据的转发，也可以通过设置cookieDomainRewrite参数修改响应头中cookie中域名，实现当前域的cookie写入，方便接口登录认证。</p>
<p>1、nodejs服务器代理<br>使用node + express + http-proxy-middleware搭建一个proxy服务器。</p>
<p>npm i express htttp-proxy-middleware</p>
<p>const express=require(‘express’)<br>const app=express()<br>app.listen(5000)<br>const httpProxyMiddleware=require(‘http-proxy-middleware’)<br>// 服务器代理  —接口中间层 代理层<br>app.use(‘/api’ ,httpProxyMiddleware.createProxyMiddleware({<br>    // 代理的地址<br>    target:’<a href="http://localhost:8989&#39;">http://localhost:8989&#39;</a>,<br>    // 默认false不修改。修改代理请求是他的主机名<br>    changeOrigin:true,<br>    // 修改响应头信息，实现跨域并允许带cookie<br>    onProxyRes: function(proxyRes, req, res) {<br>        res.header(‘Access-Control-Allow-Origin’, ‘<a href="http://localhost:5000&#39;">http://localhost:5000&#39;</a>);<br>        res.header(‘Access-Control-Allow-Credentials’, ‘true’);<br>    },</p>
<pre><code>// 匹配规则
pathRewrite:&#123;
    // 访问路径 映射到 目标服务器中的路径
    &#39;^/v1/api&#39;:&#39;/&#39;
&#125;
</code></pre>
<p>}))<br>2、vue框架的跨域<br>vue中实现开发环境的时的反向代理进行跨域解决，在项目根目录下面创建一个vue.config.js文件，写下如下代码<br>vue.config.js部分配置：</p>
<p>module.exports={<br>    // 指定服务器模块<br>    devServer:{<br>        // 代理<br>        proxy:{<br>            ‘/v1/api’:{<br>                // 目标地址<br>                target:’<a href="http://localhost:3000&#39;">http://localhost:3000&#39;</a>,<br>                changeOrigin:true,<br>                pathRewrite:{<br>                    ‘/v1/api’:’/api’<br>                }<br>            }<br>        }<br>    }<br>}<br>五、document.domain + iframe跨域<br>前提条件<br>这两个域名必须属于同一个一级域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。<br>Javascript出于对安全性的考虑，而禁止两个或者多个不同域的页面进行互相操作。<br>而相同域的页面在相互操作的时候不会有任何问题。</p>
<p>alert(document.domain = “baidu.com”);     //“baidu.com”<br>alert(document.domain = “<a target="_blank" rel="noopener" href="http://www.baidu.com&quot;/">www.baidu.com&quot;</a>); //“<a target="_blank" rel="noopener" href="http://www.baidu.com&quot;/">www.baidu.com&quot;</a><br>举例<br>1）父窗口：(<a target="_blank" rel="noopener" href="http://father.baidu.com/a.html">http://father.baidu.com/a.html</a>)</p>
<iframe id="iframe" src="http://child.baidu.com/b.html"></iframe>
<script>
    document.domain = 'baidu.com';
    var user = 'admin';
</script>
预览
1）子窗口：(http://child.baidu.com/b.html)

<script>
    document.domain = 'baidu.com';
    // 获取父窗口中变量
    console.log('get js data from parent ---> ' + window.parent.user);
</script>
<p>六、location.hash + iframe跨域<br>hash 属性是一个可读可写的字符串，该字符串是 URL 的锚部分（从 # 号开始的部分）。</p>
<p>实现原理<br>a想要与b跨域相互通信，通过中间页c来实现。<br>三个页面，不同域之间利用iframe的location.hash传值，相同域之间直接js访问来通信。<br>利用location.hash传值,创建定时器，坚持hash的变化，执行相应的操作。<br>下面我们来完成一个案例：<br>具体实现<br>A域：a.html -&gt; B域：b.html -&gt; A域：c.html<br>a与b不同域只能通过hash值单向通信，b与c也不同域也只能单向通信，但c与a同域，所以c可通过parent.parent访问a页面所有对象。<br>1）a.html：(<a target="_blank" rel="noopener" href="http://www.baidu1.com/a.html">http://www.baidu1.com/a.html</a>)</p>
<iframe id="iframe" src="http://www.baidu2.com/b.html" style="display:none;"></iframe>
<script>
    var iframe = document.getElementById('iframe');

<pre><code>// 向b.html传hash值
setTimeout(function() &#123;
    iframe.src = iframe.src + &#39;#user=admin&#39;;
&#125;, 1000);

// 开放给同域c.html的回调方法
function onCallback(res) &#123;
    alert(&#39;data from c.html ---&gt; &#39; + res);
&#125;
</code></pre>
<p></script><br>2）b.html：(<a target="_blank" rel="noopener" href="http://www.baidu2.com/b.html">http://www.baidu2.com/b.html</a>)</p>
<iframe id="iframe" src="http://www.baidu1.com/c.html" style="display:none;"></iframe>
<script>
    var iframe = document.getElementById('iframe');

<pre><code>// 监听a.html传来的hash值，再传给c.html
window.onhashchange = function () &#123;
    iframe.src = iframe.src + location.hash;
&#125;;
</code></pre>
<p></script><br>3）c.html：(<a target="_blank" rel="noopener" href="http://www.baidu1.com/c.html">http://www.baidu1.com/c.html</a>)</p>
<script>
    // 监听b.html传来的hash值
    window.onhashchange = function () {
        // 再通过操作同域a.html的js回调，将结果传回
        window.parent.parent.onCallback('hello: ' + location.hash.replace('#user=', ''));
    };
</script>
<p>优缺点<br>location.hash + iframe跨域的优点：</p>
<p>可以解决域名完全不同的跨域<br>可以实现双向通讯<br>location.hash + iframe跨域的缺点：</p>
<p>location.hash会直接暴露在URL里，并且在一些浏览器里会产生历史记录，数据安全性不高也影响用户体验<br>另外由于URL大小的限制，支持传递的数据量也不大。<br>七、window.name + iframe解决跨域<br>window.name属性的独特之处：只要在一个window下，无论url怎么变化，只要设置好了window.name，那么后续就一直都不会改变。同理，在iframe中，即使url在变化，iframe中的window.name也是一个固定的值，利用这个，我们就可以实现跨域了（2MB）。</p>
<p>举例<br>test1.html</p>
<body>
  <h2>test1页面</h2>
  <iframe src="http://192.168.0.1/php_demo/test2.html" frameborder="1"></iframe>
  <script>
    var ifr = document.querySelector('iframe')
    ifr.style.display = 'none'
    var flag = 0;
    ifr.onload = function () {
        console.log('跨域获取数据', ifr.contentWindow.name);
        ifr.contentWindow.close();
    }
  </script>
</body>
test2.html

<body>
  <h2>test2页面</h2>
  <script>
    var person = {
      name: '大鹏_yp',
      age: 24,
      school: 'lngydx'
    }
    window.name = JSON.stringify(person)
  </script>
</body>
通过iframe的src属性由外域转向本地域，跨域数据即由iframe的window.name从外域传递到本地域。这个就巧妙地绕过了浏览器的跨域访问限制，但同时它又是安全操作。

<p>八、postMessage通信跨域<br>PWA渐进式web应用</p>
<p>在HTML5中新增了postMessage方法，postMessage可以实现跨文档消息传输（Cross Document Messaging）<br>该方法可以通过绑定window的message事件来监听发送跨文档消息传输内容。<br>它可用于解决以下方面的问题：</p>
<p>a. 页面和其打开的新窗口的数据传递<br>b. 多窗口之间消息传递<br>c. 页面与嵌套的iframe消息传递<br>d. 上面三个场景的跨域数据传递</p>
<p>postMessage用法：</p>
<p>postMessage(data,origin)方法接受两个参数<br>参数说明：</p>
<p>data： html5规范支持任意基本类型或可复制的对象，但部分浏览器只支持字符串，所以传参时最好用JSON.stringify()序列化。<br>origin： 协议+主机+端口号，也可以设置为”*”，表示可以传递给任意窗口，如果要指定和当前窗口同源的话设置为”/“。<br>举例<br>postMessage：发送<br>onmessage：接收<br>1）a.html：(<a target="_blank" rel="noopener" href="http://www.baidu1.com/a.html">http://www.baidu1.com/a.html</a>)</p>
<iframe id="iframe" src="http://www.baidu2.com/b.html" style="display:none;"></iframe>
<script>       
    var iframe = document.getElementById('iframe');
    iframe.onload = function() {
        var data = {
            name: 'aym'
        };
        // 向domain2传送跨域数据
        iframe.contentWindow.postMessage(JSON.stringify(data), 'http://www.baidu2.com');
    };

<pre><code>// 接受baidu2返回数据
window.addEventListener(&#39;message&#39;, function(e) &#123;
    alert(&#39;data from baidu2 ---&gt; &#39; + e.data);
&#125;, false);
</code></pre>
<p></script><br>2）b.html：(<a target="_blank" rel="noopener" href="http://www.baidu2.com/b.html">http://www.baidu2.com/b.html</a>)</p>
<script>
    // 接收baidu1的数据
    window.addEventListener('message', function(e) {
        alert('data from baidu1 ---> ' + e.data);

        var data = JSON.parse(e.data);
        if (data) {
            data.number = 16;

            // 处理后再发回baidu1
            window.parent.postMessage(JSON.stringify(data), 'http://www.baidu1.com');
        }
    }, false);
</script>
<p>九、WebSocket协议跨域<br>WebSocket protocol是HTML5一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是server push技术的一种很好的实现。<br>原生WebSocket API使用起来不太方便，我们使用Socket.io，它很好地封装了webSocket接口，提供了更简单、灵活的接口，也对不支持webSocket的浏览器提供了向下兼容。<br>WebSocket 如何工作<br>Web浏览器和服务器都必须实现 WebSockets 协议来建立和维护连接。由于 WebSockets 连接长期存在，与典型的HTTP连接不同，对服务器有重要的影响。</p>
<p>基于多线程或多进程的服务器无法适用于 WebSockets，因为它旨在打开连接，尽可能快地处理请求，然后关闭连接。任何实际的 WebSockets 服务器端实现都需要一个异步服务器。</p>
<p>案例<br>1）前端代码：</p>
<div>user input：<input type="text"></div>
<script src="https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js"></script>
<script>
var socket = io('http://www.baidu2.com:8080');

<p>// 连接成功处理<br>socket.on(‘connect’, function() {<br>    // 监听服务端消息<br>    socket.on(‘message’, function(msg) {<br>        console.log(‘data from server: —&gt; ‘ + msg);<br>    });</p>
<pre><code>// 监听服务端关闭
socket.on(&#39;disconnect&#39;, function() &#123; 
    console.log(&#39;Server socket has closed.&#39;); 
&#125;);
</code></pre>
<p>});</p>
<p>document.getElementsByTagName(‘input’)[0].onblur = function() {<br>    socket.send(this.value);<br>};<br></script><br>2）Nodejs socket后台：</p>
<p>var http = require(‘http’);<br>var socket = require(‘socket.io’);</p>
<p>// 启http服务<br>var server = http.createServer(function(req, res) {<br>    res.writeHead(200, {<br>        ‘Content-type’: ‘text/html’<br>    });<br>    res.end();<br>});</p>
<p>server.listen(‘8080’);<br>console.log(‘Server is running at port 8080…’);</p>
<p>// 监听socket连接<br>socket.listen(server).on(‘connection’, function(client) {<br>    // 接收信息<br>    client.on(‘message’, function(msg) {<br>        client.send(‘hello：’ + msg);<br>        console.log(‘data from client: —&gt; ‘ + msg);<br>    });</p>
<pre><code>// 断开处理
client.on(&#39;disconnect&#39;, function() &#123;
    console.log(&#39;Client socket has closed.&#39;); 
&#125;);
</code></pre>
<p>});</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/11/20-22-22/" class="post-title-link" itemprop="url">CSS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2021-01-11T20:22:22+08:00">2021-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-28 21:05:57" itemprop="dateModified" datetime="2021-11-28T21:05:57+08:00">2021-11-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><p>响应式布局：在不同设备之间缩放网页</p>
<ul>
<li><p>媒介查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//大范围在上面</span><br><span class="line">@media screen and (max-width:768px)&#123;</span><br><span class="line">当屏幕小于该尺寸时采用如下布局</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">@media screen and(max-width:1020px)&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>网页适配移动端</p>
<ul>
<li><p>百分比<br><code>.item&#123;width:55%;&#125;</code></p>
</li>
<li><p>利用rem单位</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.htmlfont-size:100px;&#125;</span><br><span class="line">.item&#123;width: 0.4rem;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>dpr=物理像素/设备独立像素<br><code>&lt;meta name=&quot;viewport&quot; content= &quot;width=device-width,initial-scale=1/dpr&gt;</code></li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><h4 id="1-基础选择器："><a href="#1-基础选择器：" class="headerlink" title="1.基础选择器："></a>1.基础选择器：</h4><ul>
<li>标签选择器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p&#123;</span><br><span class="line">   color:red;</span><br><span class="line">&#125;</span><br><span class="line">div&#123;</span><br><span class="line">   color:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>类选择器：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.类名&#123;</span><br><span class="line">   .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>id选择器：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#id名&#123;</span><br><span class="line">   /*只能使用一次*/</span><br><span class="line">&#125;</span><br><span class="line">&lt;\div id=&quot;xx&quot;&gt; &lt;\/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>通配符选择器：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">   margin:0;</span><br><span class="line">   padding:0;</span><br><span class="line">   /*不需要调用，自动给所有的元素使用*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="2-组合选择器："><a href="#2-组合选择器：" class="headerlink" title="2.组合选择器："></a>2.组合选择器：</h4><ul>
<li>后代选择器: </li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">元素1 元素2 &#123;</span><br><span class="line">样式 ;</span><br><span class="line">选择元素1里面的所有元素2(后代元素);</span><br><span class="line">元素1，2用空格隔开</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如：</span><br><span class="line">ul li &#123;xxxx&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>子选择器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">元素1&gt;元素2 &#123;</span><br><span class="line">选择元素1里的所有直接后代元素2;</span><br><span class="line">元素2必须是亲儿子</span><br><span class="line">&#125;</span><br><span class="line">如：</span><br><span class="line">div&gt;p&#123;xxxx选择div里最近一级p标签元素&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>并集选择器：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素1，元素2&#123;xxxxx同时选择元素1和2&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-伪类选择器"><a href="#3-伪类选择器" class="headerlink" title="3.伪类选择器"></a>3.伪类选择器</h3><ul>
<li>链接伪类选择器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a:link&#123;&#125;</span><br><span class="line">a:visited&#123;&#125;</span><br><span class="line">a:hover&#123;鼠标经过&#125;</span><br><span class="line">a:active&#123;&#125;</span><br><span class="line">input:focus&#123;点击时获取焦点&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>结构性伪类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">----------------------------</span><br><span class="line">li:nth-of-type(2n)&#123;选择序号（同类型）为偶数的xxx元素&#125;</span><br><span class="line">xxx:nth-of-type(2n+1)&#123;选择序号（同类型）为奇数的xxx元素&#125;</span><br><span class="line">xxx:nth-child(n)&#123;选择序号为n的xxx元素&#125;</span><br><span class="line">li:first-of-type&#123;第一个元素&#125;</span><br><span class="line">li:last-of-type&#123;最后一个元素&#125;</span><br><span class="line">li:only-of-type&#123;只属于li节点&#125;</span><br><span class="line">li:nth-child(3)&#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>before/after</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">xxx:before&#123;</span><br><span class="line">content:&#x27;&#x27;;</span><br><span class="line">display:xxx;</span><br><span class="line">color:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xxx:after&#123;</span><br><span class="line">content:&#x27;&#x27;;</span><br><span class="line">display:xxx;</span><br><span class="line">color:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx[attr(属性名称)=val(属性值)]&#123;xxx&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>伪元素选择器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(伪元素)xxx::after&#123;xxx&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Css的三种样式表"><a href="#Css的三种样式表" class="headerlink" title="Css的三种样式表"></a>Css的三种样式表</h4><ol>
<li>行内样式表</li>
<li>内部样式表</li>
<li>外部样式表<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css文件路径&quot;&gt;</code></li>
</ol>
<blockquote>
<p>css继承:可继承文字相关的样式;而不能继承布局相关的样式</p>
</blockquote>
<p><em>一般情况下，优先级如下：</em></p>
<p><code>（内联(行内)样式）Inline style &gt; （内部样式）Internal style sheet &gt;（外部样式）External style sheet &gt; 浏览器默认样式</code></p>
<p><code>!important&gt;行内(内联)样式 &gt; id 选择器 &gt; 类选择器 = 伪类选择器 = 属性选择器 &gt; 标签选择器 = 伪元素选择器&gt;继承&gt;通用选择器</code></p>
<p>权重越大，优先级越高：<code>通用选择器0、标签（元素）选择器1、类选择器10、ID选择器：100、行内样式1000</code></p>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#box p .tt&#123;xxx&#125;		//权重为100+1+10</span><br><span class="line"></span><br><span class="line">#box .tt&#123;xxx&#125;		//权重100+10</span><br></pre></td></tr></table></figure>


<p>注意：如果外部样式放在内部样式的后面，则外部样式将覆盖内部样式。</p>
<hr>
<h4 id="元素显示模式"><a href="#元素显示模式" class="headerlink" title="元素显示模式"></a>元素显示模式</h4><ol>
<li><p>块元素：<code>&lt;h1&gt; &lt;p&gt; &lt;div&gt; &lt;ul&gt;....</code>独占一行；宽高边距可控；文字列元素内不能使用块级元素如<code>&lt;p&gt;</code>与<code>&lt;h1&gt;</code>内不能放<code>&lt;div&gt;</code>;图片<code>&lt;img&gt;</code>可放在<code>&lt;p&gt;</code>内调整位置</p>
</li>
<li><p>行内(内联)元素：<code>&lt;a&gt;,&lt;span&gt;,&lt;b&gt;,&lt;em&gt;...</code>一行多个；宽高无法直接设置；只能容纳文本或其他行内元素；</p>
</li>
</ol>
<blockquote>
<p>特别的<code>&lt;a&gt;</code>内可以放块级元素，给<code>&lt;a&gt;</code>转换一下块级模式最安全</p>
</blockquote>
<ol start="3">
<li>行内块元素：<code>&lt;img /&gt;,&lt;input /&gt;,&lt;td&gt;</code>高宽可设置；一行多个</li>
</ol>
<h4 id="显示模式转换："><a href="#显示模式转换：" class="headerlink" title="显示模式转换："></a>显示模式转换：</h4><ol>
<li>转换为块元素：<code>dispaly:block</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a&#123;</span><br><span class="line">   width:22xp;</span><br><span class="line">   ....</span><br><span class="line">   display:block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>转换为行内元素 <code>dispaly:inline</code></li>
<li>行内块元素：<code>display:inline-block</code></li>
</ol>
<hr>
<h3 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h3><p>多个块级元素纵向排列用标准流，横向排列用浮动<br>特性：</p>
<ol>
<li>脱离标准流的控制，不再保留原先的位置</li>
<li>所有浮动一行对齐.上对齐,宽高位置只跟上一个浮动元素有关,父级宽度不够时会换行</li>
<li>具有行内块特性</li>
</ol>
<blockquote>
<p>浮动元素不会压住文字和图片、表单元素（输入框、单选按钮、下拉选择框、复选框等）；可做出文字环绕图片效果；</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123; </span><br><span class="line">   float:none|left|right；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意:假如某个div元素A是浮动的，如果A元素上一个元素也是浮动的，那么A元素会跟随在上一个元素的后边(如果一行放不下这两个元素，那么A元素会被挤到下一行)；如果A元素上一个元素是标准流中的元素，那么A的相对垂直位置不会改变，也就是说A的顶部总是和上一个元素的底部对齐。</p>
</blockquote>
<h3 id="常用标准流约束浮动位置"><a href="#常用标准流约束浮动位置" class="headerlink" title="常用标准流约束浮动位置"></a>常用标准流约束浮动位置</h3><ul>
<li>清除浮动： 父级盒子不设置高度时，子盒子浮动，脱标不占位置，则父级盒子高度为0；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//父元素清除浮动影响</span><br><span class="line">选择器&#123;</span><br><span class="line">   clear:none|left(该元素左边不允许出现浮动元素)|right|both；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意:对于CSS的清除浮动(clear)，一定要牢记：这个规则只能影响使用清除的元素本身，不能影响其他元素。</p>
</blockquote>
<ol>
<li>额外标签法：在浮动元素的末尾添加一个空标签如<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code></li>
<li>父级添加<code>overflow:hidden|auto|scroll;</code> 设置为auto时会出现滚动条，可选择隐藏<code>overflow-x:hidden;</code>或<code>overflow-y:auto</code></li>
</ol>
<ul>
<li>修改滚动条样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">【1】IE</span><br><span class="line"> </span><br><span class="line">　　IE浏览器支持通过CSS样式来改变滚动条的部件的自定义颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-face-color滚动条凸出部分的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-shadow-color立体滚动条阴影的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-highlight-color滚动条空白部分的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-3dlight-color滚动条亮边的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-darkshadow-color滚动条强阴影的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-track-color滚动条的背景颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-arrow-color上下按钮上三角箭头的颜色</span><br><span class="line"> </span><br><span class="line">　　scrollbar-base-color滚动条的基本颜色</span><br><span class="line"></span><br><span class="line">【2】webkit</span><br><span class="line">::-webkit-scrollbar 滚动条整体部分</span><br><span class="line">::-webkit-scrollbar-thumb  滚动条里面的小方块，能向上向下移动（或往左往右移动，取决于是垂直滚动条还是水平滚动条）</span><br><span class="line">::-webkit-scrollbar-track  滚动条的轨道（里面装有Thumb）</span><br><span class="line">::-webkit-scrollbar-button 滚动条的轨道的两端按钮，允许通过点击微调小方块的位置。</span><br><span class="line">::-webkit-scrollbar-track-piece 内层轨道，滚动条中间部分（除去）</span><br><span class="line">::-webkit-scrollbar-corner 边角，即两个滚动条的交汇处</span><br><span class="line">::-webkit-resizer 两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</span><br><span class="line"></span><br><span class="line">/////////////////////////////////////////////////////////////////////</span><br><span class="line">/* 定义滚动条样式 */</span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: 6px;</span><br><span class="line">  height: 6px;</span><br><span class="line">  background-color: rgba(240, 240, 240, 1);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">/*定义滚动条轨道 内阴影+圆角*/</span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  box-shadow: inset 0 0 0px rgba(240, 240, 240, .5);</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  background-color: rgba(240, 240, 240, .5);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">/*定义滑块 内阴影+圆角*/</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">  box-shadow: inset 0 0 0px rgba(240, 240, 240, .5);</span><br><span class="line">  background-color: rgba(240, 240, 240, .5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>父级添加伪元素法<code>:after</code></li>
</ol>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.clear:after&#123;</span><br><span class="line">   conten:&quot;&quot;;</span><br><span class="line">   display:block;</span><br><span class="line">   height:0;</span><br><span class="line">   clear:both;</span><br><span class="line">   visibility:hidden;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.clear&#123;</span><br><span class="line">   /*IE6,7专有*/</span><br><span class="line">   *zoom:1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>父级双伪元素清除浮动</li>
</ol>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  .clear:before,.clear:after&#123;</span><br><span class="line">     content:&quot;&quot;;</span><br><span class="line">     display:table;</span><br><span class="line">  &#125;</span><br><span class="line">  .clear:after&#123;</span><br><span class="line">     clear:both;</span><br><span class="line">  &#125;</span><br><span class="line">  .clear&#123;</span><br><span class="line">     *zoom:1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> ###  边距折叠问题：</span><br><span class="line"></span><br><span class="line">块的上外边距(margin-top)和下外边距(margin-bottom)有时合并(折叠)为单个边距，其大小为单个边距的最大值(或如果它们相等，则仅为其中一个)，这种行为称为边距折叠</span><br><span class="line">有三种情况会形成外边距重叠：</span><br><span class="line"></span><br><span class="line">- 同一层相邻元素之间，上下外边距合并</span><br><span class="line">- 没有内容将父元素和后代元素分开；如果没有边框border，内边距padding，行内内容，则就会出现父块元素和其内后代块元素外边界重叠，重叠部分最终会溢出到父级块元素外面。</span><br><span class="line">-空的块级元素：当一个块元素上边界margin-top 直接贴到元素下边界margin-bottom时也会发生边界折叠。 </span><br><span class="line"></span><br><span class="line">- 解决方法：触发BFC（块格式上下文）</span><br><span class="line">   - 为父元素设置：上边框或上内边距</span><br><span class="line">   - 为父元素添加overflow：hidden；</span><br><span class="line">   - 为父元素添加dispaly:inline-block/tabl-cell;或float:left;或positon:absolute/fixed;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h3><p>将盒子固定到某一个位置<code>定位=定位模式+边偏移</code></p>
<ol>
<li>定位模式：<code>position:static|relative|absolute|fixed</code><ul>
<li>静态定位static：不脱标，不能偏移；</li>
<li>相对定位relative：相对与自己原来的位置来移动；不脱标，继续保留原来的位置</li>
<li>绝对定位absolute：若没有祖先元素或祖先元素没有定位，则以浏览器为准；若祖先元素有定位，则以最近一级有定位的祖先元素为参考点；</li>
<li>固定定位fixed：以浏览器可视窗口为参考点，更父级元素没有任何关系；不随滚动条滚动，不在占有原先位置；</li>
<li>粘性定位sticky：以浏览器可视窗口为参考点；占有原先的位置；必须添加top,left,right,bottom其中一个才生效；</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">固定在版心右侧位置</span><br><span class="line">left:50%;浏览器的一半位置</span><br><span class="line">amrgin-left:版心宽度的一半距离。</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>边偏移：<code>top:33px;bottom:...;left:.....;right:...</code></li>
<li>叠放次序：<code>选择器&#123;z-index:1;&#125;</code>数值可正可负；数值越大盒子越靠上；只有定位的盒子才能有z-index属性；另外，有定位的在没有定位的上面，都有定位则后面写的在上面，</li>
</ol>
<blockquote>
<p>子级是绝对定位的话，父级要用相对定位，子盒子不需要占有位置，父级需要占有位置；<br>行内元素添加绝对或固定定位，可直接设置宽高；块级元素添加后不设置宽高则默认是内容大小；<br>浮动元素可以压住标准流盒子；但不会压住标准流盒子里的文字和图片；</p>
</blockquote>
<ul>
<li>flex弹性布局<ul>
<li>采用Flex布局的元素，称为Flex容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为Flex项目（flex item），简称”项目”。</li>
<li>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。</li>
<li>主轴的开始位置（与边框的交叉点）叫做main start，结束位置叫做main end；</li>
<li>交叉轴的开始位置叫做cross start，结束位置叫做cross end。</li>
<li>项目默认沿主轴排列。单个项目占据的主轴空间叫做main size，占据的交叉轴空间叫做cross size。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>容器属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-direction:row/row-reverse/column/column-reverse</td>
<td>决定主轴的方向</td>
</tr>
<tr>
<td>flex-wrap:nowrap/wrap/wrap-reverse（最开始的一行在下面，新的在上面）;</td>
<td>如果一条轴线排不下，是否换行以及如何换行</td>
</tr>
<tr>
<td>flex-flow:&lt;flex-direction&gt;&lt;flex-wrap&gt;</td>
<td>flex-direction与flex-wrap的简写形式</td>
</tr>
<tr>
<td>justify-content:flex-start/flex-end/center/space-between（两端对齐，项目间的间隔相等)/space-around（每个项目间的间隔相等，项目与边框的间隔较小）</td>
<td>定义项目在主轴上的对齐方式</td>
</tr>
<tr>
<td>align-items:stretch（项目无高度或设为auto时，将会占满整个容器高度）/center/flex-start/flex-end/baseline（项目的第一行文字的基线对齐）;</td>
<td>定义项目在交叉轴上的对齐方式</td>
</tr>
<tr>
<td>align-content:stretch（项目无高度或设为auto时，将会占满整个容器高度）/center/flex-start/flex-end/space-between/space-around</td>
<td>定义项目在多根轴线上的对齐方式，如果项目只有一根轴线则不起作用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>项目属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-grow: 数字;</td>
<td>定义项目的放大比例，默认0；若全部设为1，则平分空间</td>
</tr>
<tr>
<td>flex-shrink:数字;</td>
<td>定义缩小比例，默认1，都设为1，空间不足，则都等比例缩小；若设为0则不会</td>
</tr>
<tr>
<td>flex-basis:宽高/auto;</td>
<td>定义项目占主轴的空间，默认auto</td>
</tr>
<tr>
<td>flex:none/[<flex-grow>,flex-shrink，<flex-basis>];</td>
<td>flex-grow,flex-shrink，flex-basis简写，后两个可选，默认0,1，auto</td>
</tr>
<tr>
<td>order:数字;</td>
<td>定义项目的排列顺序，越小越靠前，默认0</td>
</tr>
<tr>
<td>align-self:auto / flex-start / flex-end / center / baseline / stretch;</td>
<td>允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">display:flex;</span><br><span class="line">flex-direction:row/coloumn;</span><br><span class="line">justify-content:flex-start(开始对齐)/flex-end（尾部对齐）/center/space-between（两端对齐）/space-around(自动分配间隔）</span><br><span class="line">align-items:stretch/center/flex-start/flex-end/baseline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h3><ul>
<li><p>display:none（隐藏）|block(除转换为块级元素外，还可显示元素);</p>
<blockquote>
<p>display隐藏后不再占有原来的位置；</p>
</blockquote>
</li>
<li><p>visibility:visible(可视)|hidden；</p>
<blockquote>
<p>visibility:隐藏元素后，继续占有原来的位置；</p>
</blockquote>
</li>
<li><p>opacity:0; </p>
</li>
</ul>
<hr>
<h4 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h4><ul>
<li><p>font-family:默认使用第一个字体,<code>font-family:&quot;Microsoft yahie&quot; ,&quot;hiragino Sans GB&quot;,Arial;</code></p>
</li>
<li><p>font-size: 单位px</p>
</li>
<li><p>font-weight: <code>nomal或400</code>不加粗;<code>bold或700</code>加粗；<code>100-900</code></p>
</li>
<li><p>font-style:<code>normal</code>默认；<code>italic</code>斜体；</p>
</li>
<li><p>color：支持十六进制、rgb（255,5,5）、预设颜色值red</p>
</li>
<li><p>text-align:文本内容对齐left,right,center;</p>
</li>
<li><p>line-height:行高，单位px;</p>
</li>
<li><p>text-decoration:文本装饰；<code>none</code>没有装饰线；<code>underline</code> 下划线；<code>line-through</code>删除线；</p>
</li>
<li><p>text-indent:缩进；单位em代表1个文字大小；px像素</p>
</li>
<li><p>字体复合属性：<code>font: font-style font-weight font-size/line-height font-family;</code>顺序不能换，必须保留<code>font-size</code> 和<code>font-family</code>属性</p>
</li>
</ul>
<hr>
<p>css背景</p>
<ul>
<li>背景颜色：<code>background-color</code></li>
<li>背景图片：<code>background-image:url()</code></li>
<li>背景图片重复平铺：<code>background-repeat:no-repeat|repeat-x|repeat-y</code></li>
<li>背景图片位置：<code>background-position:(方位名词：top|center|left|right|top left等)(坐标：x,y或只有x坐标与垂直居中)两个可混合使用</code></li>
<li>背景固定：<code>background-attachment:scroll|fixed(固定)</code></li>
<li>背景复合写法：<code>background:(没有顺序)一般颜色 图片 平铺 固定 位置。。</code></li>
<li>背景半透明 ：<code>backround:rgba(0,0,0,0.5)最后一个参数代表透明度</code></li>
</ul>
<hr>
<p>子标签会继承付标签的部分样式如字体、颜色等<br>行高可以不跟单位：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">font:12px/1.5; /*子元素字体大小的1.5倍*/</span><br><span class="line">&#125;</span><br><span class="line">div&#123;</span><br><span class="line">   font-size:14px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="盒子"><a href="#盒子" class="headerlink" title="盒子"></a>盒子</h3><ul>
<li>边框:<code>border</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">加边框后盒子会变大</span><br><span class="line">border-width:单位px</span><br><span class="line">border-stye:solid(实线)|dashed（虚线）|dotted（点线）</span><br><span class="line">border-color:</span><br><span class="line">复合写法：border：xxx xxx xxx没有循序</span><br><span class="line">每条边可单独设置:</span><br><span class="line">border-top:</span><br><span class="line">border-bottom:</span><br><span class="line">合并相邻边框</span><br><span class="line">border-collapse:collapse;</span><br></pre></td></tr></table></figure>

<ul>
<li>内容:content</li>
<li>内边界:<code>padding</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">也会改变盒子大小,若盒子没有width/height属性则不会</span><br><span class="line">可分开设置上下左右边距</span><br><span class="line">padding-left:</span><br><span class="line">复合写法：padding：（2个：上下，左右；3个：上，左右，下；4个：顺时针）</span><br></pre></td></tr></table></figure>

<ul>
<li>外边距:<code>margin</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*可分开设置</span><br><span class="line">margin-left:</span><br><span class="line">nargin-bottom:</span><br><span class="line">*复合写法与padding一致</span><br></pre></td></tr></table></figure>

<h3 id="盒子居中"><a href="#盒子居中" class="headerlink" title="盒子居中"></a>盒子居中</h3><ul>
<li><p>让块级盒子水平居中：</p>
<ol>
<li>通过手动计算 margin 左右边距<br>父盒子的定宽的，子盒子指定 margin-left 即可</li>
<li>盒子有宽度，左右设为auto；<br><code>margin：0，auto；</code>// 让子盒子左右自动适应，想当于 <code>left:auto; right:auto</code></li>
<li>先让盒子左右边缘和父盒子垂直的中心线垂直，然后把子盒子往回移动自身宽度的一半</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/* 通过 transform 实现*/</span><br><span class="line">//子盒子</span><br><span class="line">margin-left: 50%;                // 先移动父盒子的一半</span><br><span class="line">       transform: translateX(-50%);     // 再移动自身盒子一半,transform中translate使用百分比时相对的是自己的长宽，不是父盒子的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*通过 定位实现*/</span><br><span class="line">//父盒子</span><br><span class="line">position: relative;</span><br><span class="line">//子盒子</span><br><span class="line">position: absolute;</span><br><span class="line">       left: 50%;                       // 向右移动父盒子一半</span><br><span class="line">       margin-left: -100px;             // 向左移动自身盒子一半</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>把盒子转成行内块,行内元素只需要在父级元素添加text-align:center即可；</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//父盒子</span><br><span class="line">text-align: center;               // 让父盒子设置水平居中</span><br><span class="line"></span><br><span class="line">//子盒子</span><br><span class="line">display: inline-block;            // 让子盒子显示为行内块模式</span><br></pre></td></tr></table></figure>

<ul>
<li><p>盒子垂直居中的方法</p>
<ol>
<li>知道父盒子的高度，可以使用 margin 计算盒子的上下边距，来使盒子居中</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">margin-top: 149px;         // 根据父盒子的高度指定子盒子 margin-top 即可</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>先让盒子的上下边缘和父盒子的水平中心线重叠，，然后再让子盒子往回移动自身一半的距离</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/* 通过 transform 属性来移动*/</span><br><span class="line">	//子盒子</span><br><span class="line">	margin-top: 50%;                  // 向下移动父盒子的一半</span><br><span class="line">        transform: translateY(-50%);      // 向上移动自身盒子的一半</span><br><span class="line"></span><br><span class="line">/* 通过 定位来移动*/</span><br><span class="line">	//父盒子</span><br><span class="line">	position: relative;</span><br><span class="line">	//子盒子</span><br><span class="line">	position: absolute;</span><br><span class="line">        top: 50%;                  // 先向下移动父盒子的一半</span><br><span class="line">        margin-top: -100px;        // 再向上移动自身盒子的一半</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用表格的 vertical-align :middle 属性来实现盒子垂直居中</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//父盒子</span><br><span class="line">display: table-cell;         // 显示形式为表格</span><br><span class="line">       vertical-align: middle;      // 里面内容为居中对齐</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>把盒子转成行内块</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//父盒子line-height:500px 与 子盒子的vertical-align:middel共同作用使子盒子垂直居中。</span><br><span class="line">.parent-box &#123;</span><br><span class="line">line-height: 500px;</span><br><span class="line">text-align:center;</span><br><span class="line">&#125;</span><br><span class="line">.child-box &#123;</span><br><span class="line">display:inline-block;</span><br><span class="line">vertical-align:middle;</span><br><span class="line">line-height:1rem;</span><br><span class="line">color:white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>利用flex布局</li>
</ul>
<p>flex布局，设置水平与竖直方向的内容居中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.parent-box &#123;</span><br><span class="line">display: flex;</span><br><span class="line">justify-content: center;</span><br><span class="line">align-items: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li> position:absolute 配合定位与margin：auto</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//不兼容低版本的IE浏览器</span><br><span class="line">.parent-box &#123;</span><br><span class="line">position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.child-box &#123;</span><br><span class="line">position: absolute;</span><br><span class="line">left: 0;</span><br><span class="line">top: 0;</span><br><span class="line">right: 0;</span><br><span class="line">bottom:0;</span><br><span class="line">margin: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用JS的思路大概给大家说下：</li>
</ul>
<p>1、js中只要获取到当前盒子具体的left/top值即可</p>
<p>2、一屏幕的宽高-盒子的宽高，最后除以2，获取的值就是它应该具备的left/top(这个值可以使盒子处于页面中间)</p>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><ul>
<li><p>单列布局</p>
</li>
<li><p>两列布局<br>两栏布局（左侧宽度固定，右侧自适应）：左浮动或absoulute，右margin-left调位置或者触发BFC；使用flex布局；使用网格布局</p>
</li>
<li><p>三栏布局</p>
<ul>
<li>圣杯布局</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">.content &#123;</span><br><span class="line">    padding: 30px 15%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fld &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    margin-left: -15%;</span><br><span class="line">    width: 15%;</span><br><span class="line">    height: 10rem;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.fcd &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 100%;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.frd &#123;</span><br><span class="line">    float: right;</span><br><span class="line">    margin-right: -15%;</span><br><span class="line">    width: 15%;</span><br><span class="line">    height: 10rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>双飞翼布局</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.container &#123;</span><br><span class="line">    min-width: 600px;//确保中间内容可以显示出来，两倍left宽+right宽</span><br><span class="line">&#125;</span><br><span class="line">.left &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    background: red;</span><br><span class="line">    margin-left: -100%;</span><br><span class="line">&#125;</span><br><span class="line">.center &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 500px;</span><br><span class="line">    background: yellow;</span><br><span class="line">&#125;</span><br><span class="line">.center .inner &#123;</span><br><span class="line">    margin: 0 200px; //中间新增部分</span><br><span class="line">&#125;</span><br><span class="line">.right &#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    background: blue;</span><br><span class="line">    margin-left: -200px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>两种布局实现方式对比:两种布局方式都是把主列放在文档流最前面，使主列优先加载。两种布局方式在实现上也有相同之处，都是让三列浮动，然后通过负外边距形成三列布局。两种布局方式的不同之处在于如何处理中间主列的位置：圣杯布局是利用父容器的左、右内边距+两个从列相对定位；双飞翼布局是把主列嵌套在一个新的父级块中利用主列的左、右外边距进行布局调整</p>
</blockquote>
<ul>
<li>粘连布局</li>
</ul>
<p>特点：有一块内容<main>，当<main>的高康足够长的时候，紧跟在&lt;main&gt;后面的元素&lt;footer&gt;会跟在&lt;main&gt;元素的后面。当&lt;main&gt;元素比较短的时候(比如小于屏幕的高度),我们期望这个&lt;footer&gt;元素能够“粘连”在屏幕的底部</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   * &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 0;</span><br><span class="line">      &#125;</span><br><span class="line">      html,</span><br><span class="line">      body &#123;</span><br><span class="line">        height: 100%;//高度一层层继承下来</span><br><span class="line">      &#125;</span><br><span class="line">      #content &#123;</span><br><span class="line">        min-height: 100%;</span><br><span class="line">        background: pink;</span><br><span class="line">        text-align: center;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">      &#125;</span><br><span class="line">      #content .main &#123;</span><br><span class="line">        padding-bottom: 50px;</span><br><span class="line">      &#125;</span><br><span class="line">      #footer &#123;</span><br><span class="line">        height: 50px;</span><br><span class="line">        line-height: 50px;</span><br><span class="line">        background: deeppink;</span><br><span class="line">        text-align: center;</span><br><span class="line">        margin-top: -50px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;content&quot;&gt;</span><br><span class="line">&lt;div class=&quot;main&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;footer&gt;&lt;/footer&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>(1)footer必须是一个独立的结构，与wrap没有任何嵌套关系；(2)wrap区域的高度通过设置min-height，变为视口高度；(3)footer要使用margin为负来确定自己的位置；(4)在main区域需要设置 padding-bottom。这也是为了防止负 margin 导致 footer 覆盖任何实际内容。</p>
</blockquote>
<h3 id="清除内外边距"><a href="#清除内外边距" class="headerlink" title="清除内外边距"></a>清除内外边距</h3><blockquote>
<p>(body会默认有个边距)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">   margin:0;</span><br><span class="line">   padding:0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h2><ul>
<li>透明：<code>opacity:0.5</code>子元素也会跟着变化</li>
<li>圆角边框：<code>border-radius:10px|10%|顺时针四个参数</code>;</li>
<li>盒子阴影：<code>box-shadow:3px水平阴影 0px垂直阴影 5px模糊距离 0px阴影尺寸 #fff颜色 inset（内阴影）</code>不占空间</li>
<li>文字阴影：<code>text-shadow:水平阴影 垂直阴影 模糊距离 颜色</code></li>
<li>渐变背景：`background:linear-gradient(to bottom|to top|to right|to left,#fff(开始颜色),#000(结束颜色));</li>
<li>过渡动画：<code>transition: width(要过渡的属性) 1s(过渡时间) ease-in(过渡方式) 2s(延迟时间)</code><blockquote>
<p>transition过渡方式 ：ease：慢速开始，然后变快，然后慢速结束；ease-in：以慢速开始的过渡效果；ease-out：以慢速结束的过渡效果；ease-in-out：以慢速开始和结束的过渡</p>
</blockquote>
</li>
<li>位移属性：<code>transform:translateX|translateY|translateZ(20px);</code>位移时默认是元素的中心位置</li>
<li>缩放：<code>transform:scale(1.5);</code>默认为1正常大小；<code>transform-origin:50% 50%;</code>元素缩放中心点位置</li>
<li>旋转：<code>transform:rotateX|rotateY|rotateZ(30deg);</code></li>
<li>透视：<code>transform:perspective(1000px);</code>透视距离，必须写在前面；</li>
<li>循环动画：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//定义动画</span><br><span class="line">@keyframe beat&#123;		//关键帧</span><br><span class="line">30%:&#123;</span><br><span class="line">transform:scale(1.3);</span><br><span class="line">&#125;</span><br><span class="line">100%:&#123;</span><br><span class="line">transform:scale(1);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//使用动画</span><br><span class="line"></span><br><span class="line">span.heart&#123;</span><br><span class="line">animation:beat(动画名称) 1.5s(动画时长) infinite(循环动画);</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li> box-shadow可同时设置多个阴影，如<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">box-shadow:    #fff 22px -15px 0 6px,   #fff 57px -6px 0 2px,   #fff 87px 4px 0 -4px,    #fff 33px 6px 0 6px</span><br></pre></td></tr></table></figure></li>
<li>使用clip-path可快速裁剪盒子形状，使用shape-outsizes可实现文字不规则环绕效果（注意兼容问题）</li>
<li>transform中的rotate属性旋转后，其内部内容会随之旋转。</li>
<li>设置字间距可使用letter-spacing属性增加或减少字符间的空白（字符间距）。该属性定义了在文本字符框之间插入多少空间(允许使用负值)</li>
<li>CSS中用于设置过渡特效的属性是 transition，但是其不能同时使用在多个属性身上。</li>
</ul>
<h3 id="精灵图"><a href="#精灵图" class="headerlink" title="精灵图"></a>精灵图</h3><p>将多个小背景图整合到一张大图片中，减少了服务器的请求</p>
<p>移动背景位置：<code>background-position </code>移动的距离是这个目标图片的x，y坐标，一般情况是向上或左移动，所以数值是负值；</p>
<h3 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h3><p>精灵图放大会失真，字体图标不会，且可以改变颜色大小，只适合简单图形；</p>
<p>字体图标下载网站：<code>http://icomoon.io</code> <code>https://iconfont.cn</code></p>
<p>使用方法：<br>1.添加字体声明在<code>&lt;style&gt;&lt;/style&gt;</code>中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@font-face&#123;</span><br><span class="line">   font-family: `name`;</span><br><span class="line">   src:url()</span><br><span class="line">   ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.使用:从官网复制图标粘贴到相应位置并设置样式:<code>span&#123;font-family:&#39;name&#39;;font-size:....&#125;</code></p>
<h3 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h3><p>盒边距设置为0，边框宽度控制大小，边框背景设置为透明</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">   width:0px;</span><br><span class="line">   height:0px;</span><br><span class="line">   border:20px solid transparent;</span><br><span class="line">   border-left-color:red;</span><br><span class="line">   /*照顾兼容性*/</span><br><span class="line">   line-height:0;</span><br><span class="line">   font-size:0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直角三角形</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">width:0;</span><br><span class="line">height:0;</span><br><span class="line">/*上边框调大*/</span><br><span class="line">border-toP:100px solid transparent;</span><br><span class="line">border-right:50px solid red;</span><br><span class="line">/*左边和下边边框设置为0*/</span><br><span class="line">border-bottom:0;</span><br><span class="line">border-left:0;</span><br></pre></td></tr></table></figure>

<h3 id="鼠标样式"><a href="#鼠标样式" class="headerlink" title="鼠标样式"></a>鼠标样式</h3><p><code>li&#123; cursor:default|pointer(手指)|move|text(文本)|not-allowed(禁止)&#125;</code></p>
<h3 id="防止文本域被拖拽"><a href="#防止文本域被拖拽" class="headerlink" title="防止文本域被拖拽"></a>防止文本域被拖拽</h3><p><code>textarea&#123;resize:none;&#125;</code></p>
<h3 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h3><p>用于设置行内块垂直对齐方式(必须作用与inline-block元素)<br><code>vertical-align:baseline(基线)|top|middle|bottom;</code></p>
<ul>
<li>解决图片底部空白缝隙问题：添加vertical-align属性；或转换为块级元素`display:block;</li>
</ul>
<h3 id="溢出文字省略号表示"><a href="#溢出文字省略号表示" class="headerlink" title="溢出文字省略号表示"></a>溢出文字省略号表示</h3><ul>
<li>单行</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.强制一行显示文本</span><br><span class="line">white-space:nowrap;</span><br><span class="line">2.超出部分隐藏</span><br><span class="line">overflow:hidden;</span><br><span class="line">3.超出文字用省略号表示</span><br><span class="line">text-overflow:ellipsis;</span><br></pre></td></tr></table></figure>
<ul>
<li>多行</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">兼容性差，适合移动端和wwebkit浏览器</span><br><span class="line">overflow:hidden;</span><br><span class="line">text-overflow:ellipsis;</span><br><span class="line">/*弹性盒子显示*/</span><br><span class="line">display: -webkit-box;</span><br><span class="line">/*限时一个快元素显示的文本行数*/</span><br><span class="line">-webkit-line-clap:2;</span><br><span class="line">/*设置伸缩盒对象的子元素的排列方式和*/</span><br><span class="line">-webkit-box-orient:vertical;</span><br></pre></td></tr></table></figure>

<h3 id="盒子间的边框问题"><a href="#盒子间的边框问题" class="headerlink" title="盒子间的边框问题"></a>盒子间的边框问题</h3><p>防止边框重叠</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ul li&#123;</span><br><span class="line">   list-style:none;</span><br><span class="line">   float:left;</span><br><span class="line">   width:111Px;</span><br><span class="line">   height:222px;</span><br><span class="line">   border: 2px solid red;</span><br><span class="line">   margin-left: -1px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>鼠标移动显示边框</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*若盒子有定位，则利用z-index提高层级*/</span><br><span class="line">ul ll:hover&#123;</span><br><span class="line">   z-index:1;</span><br><span class="line">   border:1px solid red;</span><br><span class="line">&#125;</span><br><span class="line">/*若盒子没有定位则鼠标经过时添加相对定位*/</span><br><span class="line">ul li:hover&#123;</span><br><span class="line">   position:relative;</span><br><span class="line">   border: 2px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/11/20-22-22/" class="post-title-link" itemprop="url">微信小程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2021-01-11T20:22:22+08:00">2021-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-12 17:49:32" itemprop="dateModified" datetime="2022-04-12T17:49:32+08:00">2022-04-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><ul>
<li>app.json      //配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;page&quot;:[</span><br><span class="line">    &quot;page/index/index“，</span><br><span class="line">    &quot;page下页面路径“</span><br><span class="line">]&#125;</span><br><span class="line">&quot;window&quot;:&#123;</span><br><span class="line">   // 导航配置</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>app.js  //注册小程序应用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">App(&#123;.....&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>app.wxss    //全局公共样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">page&#123;       //小程序会在所有页面加一个page ，因此应设置页面高度为100%</span><br><span class="line">           height:100%;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>页面：<br>page<br>\index<br>\-index.js  </li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">     page(&#123;</span><br><span class="line">     //初始化数据</span><br><span class="line">         data: &#123;</span><br><span class="line">             msg: &#x27;hello&#x27;,</span><br><span class="line">             userInfo:&#123;</span><br><span class="line">                 //存放用户信息</span><br><span class="line">             &#125;,</span><br><span class="line">         &#125;,</span><br><span class="line"></span><br><span class="line">        //事件绑定</span><br><span class="line">        handleParent()&#123;            </span><br><span class="line">            console.log(&#x27;parent&#x27;)</span><br><span class="line">        &#125;,</span><br><span class="line">        handleChild()&#123;</span><br><span class="line">            console.log(&#x27;child&#x27;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        //跳转至logs页面</span><br><span class="line">        toLogs()&#123;                </span><br><span class="line">            //需要使用api</span><br><span class="line">            wx,navigateTo(&#123;         //保留当前页面跳转到另一个页面</span><br><span class="line">                url:&#x27;/page/logs/logs&#x27;,   //相对路径</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">         //生命周期函数：监听页面加载，最先执行</span><br><span class="line">         onLoad:function(options)&#123;</span><br><span class="line">             console.log(&#x27;onLoad()&#x27;)        //打印</span><br><span class="line"></span><br><span class="line">             //修改msg数据：this.setData</span><br><span class="line">             consile.log(this)  //this表示当前页面的实例对象</span><br><span class="line">             consile.log(this.data.msg)   </span><br><span class="line">              this.setData(&#123;</span><br><span class="line">                 msg:&#x27;after&#x27;</span><br><span class="line">             &#125;)</span><br><span class="line"></span><br><span class="line">             //授权以后获取用户信息</span><br><span class="line">             wx.gerUserInfo(&#123;</span><br><span class="line">                 succes:() =&gt; &#123;</span><br><span class="line">                     condole.log(res);</span><br><span class="line">                     //成功后更新数据</span><br><span class="line">                     this.setData(&#123;</span><br><span class="line">                         userInfo: res.userInfo</span><br><span class="line">                     &#125;)</span><br><span class="line">                 &#125;,</span><br><span class="line">                 fail:() =&gt;&#123;</span><br><span class="line">                     condole.log(err);</span><br><span class="line">                 &#125;,</span><br><span class="line">             &#125;)</span><br><span class="line">       &#125;,</span><br><span class="line"></span><br><span class="line">    //获取用户信息</span><br><span class="line">       handleGetUserInfo(res)&#123;      //形参用于判断</span><br><span class="line">           console.log(res)</span><br><span class="line">        if(res.detail.userInfo)&#123;</span><br><span class="line">            //修改userInfo的状态数据</span><br><span class="line">            thsi.setData(&#123;</span><br><span class="line">                userInfo: res.detail.userInfo</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">       &#125;,</span><br><span class="line">.....</span><br><span class="line">                 &#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>index.wxml</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;view class=&quot;indexcontainer&quot;&gt;   &lt;!--//样式--&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;image wx:if=&#x27;&#123;&#123;userInfo.avatarUrl&#125;&#125;&#x27; class=&quot;avatarUrl&quot; src=&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;&gt; &lt;/image&gt;    &lt;!--图片路径--&gt;</span><br><span class="line">    &lt;botton wx:else bindgetuserinfo=&#x27;handleGetUserInfo&#x27; open-type=&quot;getUserInfo&quot;&gt;获取用户信息&lt;/botton&gt;</span><br><span class="line">    &lt;text class=&quot;userName&quot;&gt; 文字文字 &lt;/text&gt;</span><br><span class="line">    &lt;text&gt;&#123;&#123;msg&#125;&#125;&lt;/text&gt;    &lt;!--//使用数据--&gt;</span><br><span class="line">    &lt;!--  事件绑定  --&gt;</span><br><span class="line">&lt;!--    &lt;view class=&quot;hello&quot; bindtap=&quot;handleParent&quot;&gt;  &lt;text bindtap=&#x27;handleChild&#x27;&gt;hello&lt;/text&gt;   &lt;/view&gt;  --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view class=&quot;hello&quot; bindtap=&quot;toLogs&quot;&gt;  </span><br><span class="line">    &lt;text&gt;hello&lt;/text&gt;  </span><br><span class="line">   &lt;/view&gt; </span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>index.wxss      //样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">             .indexContainer&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  align-items: center;</span><br><span class="line">  background: #f0f;       /*只有16进制*/</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.avatarUrl&#123;         /*头像尺寸样式*/</span><br><span class="line">  width: 200rpx;</span><br><span class="line">  height:200rpx;</span><br><span class="line">  border-radius: 50%;      /*圆角*/</span><br><span class="line">  margin: 100rpx 0;</span><br><span class="line">&#125;</span><br><span class="line">.usrName&#123;</span><br><span class="line">  font-size: 32rpx;</span><br><span class="line">  margin: 100rpx 0;</span><br><span class="line">&#125;</span><br><span class="line">.hello&#123;</span><br><span class="line">  width:300rpx;</span><br><span class="line">  height: 80rpx;</span><br><span class="line">  line-height: 80rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  border: 1rpx solid #333;</span><br><span class="line">  border-radius:10rpx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>index.json  </p>
</li>
<li><p>日志：<br>log/logs.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;usingComponens&quot;:&#123;&#125;,</span><br><span class="line">    &quot;navigationBarTitleText&quot;: &quot;日志“    //最顶部栏文字</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h3><p>bind：冒泡事件<br>catch：非冒泡</p>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx:if=&#x27;条件&#x27;</span><br><span class="line">wx:else</span><br><span class="line">wx:elif=&#x27;条件&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="微信小程序-bindtap-传参"><a href="#微信小程序-bindtap-传参" class="headerlink" title="微信小程序 bindtap 传参"></a>微信小程序 bindtap 传参</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//index.wxml</span><br><span class="line">&lt;view bindtap=&quot;changeIndex&quot; data-src1=&quot;我固定参数1&quot; data-src2=&quot;我是固定参数2&quot; &gt;</span><br><span class="line">  </span><br><span class="line">&lt;/view&gt;</span><br><span class="line">//index.js</span><br><span class="line">page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line">  </span><br><span class="line"> &#125;,</span><br><span class="line"> changeIndex(e)&#123;</span><br><span class="line"> console.log(e.currentTarget.dataset.src1); //我是固定参数1</span><br><span class="line"> console.log(e.currentTarget.dataset.src2); //我是固定参数2</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">////如果需要传递动态的参数 例如遍历渲染时 想传递 index 给 changeIndex方法</span><br><span class="line">//index.wxml</span><br><span class="line">&lt;view wx:for=&quot;&#123;&#123;lists&#125;&#125;&quot; wx:for-index=&quot;index&quot; wx:key=&quot;index&quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot; &gt;</span><br><span class="line">&#123;&#123;item.title&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">//index.js</span><br><span class="line">page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line"> lists:[&#123;title:&#x27;参数1&#x27;,id:1&#125;,&#123;title:&#x27;参数2&#x27;,id:2&#125;]</span><br><span class="line"> &#125;,</span><br><span class="line"> changeIndex(e)&#123;</span><br><span class="line"> console.log(e.currentTarget.dataset.index);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><ol>
<li>导航栏</li>
</ol>
<p>在app.json文件内：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;pages&quot;:[</span><br><span class="line">        &quot;路径&quot;,</span><br><span class="line">        &quot;路径&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;window&quot;:&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;tabBar&quot;:&#123;</span><br><span class="line">        &quot;backgroundColor&quot;:&quot;#f6f6f5&quot;,</span><br><span class="line">        &quot;list&quot;:[&#123;</span><br><span class="line">            &quot;pagePath&quot;:&quot;路径&quot;,</span><br><span class="line">            &quot;text&quot;:&quot;文字&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;pagePath&quot;:&quot;路径&quot;,</span><br><span class="line">            &quot;text&quot;:&quot;文字&quot;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>input</li>
</ol>
<p>在index.js文件夹内</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">page(&#123;</span><br><span class="line">    data:&#123;</span><br><span class="line">        first:&quot;&quot;,</span><br><span class="line">        second:&quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    first:function(e)&#123;</span><br><span class="line">        var n=e.detail.value;</span><br><span class="line">        if(!isNaN(n))&#123;</span><br><span class="line">            this.setData(&#123;</span><br><span class="line">                first:n</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"> calculate:function()&#123;</span><br><span class="line">    var n=this.data.first+1;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">        second:n</span><br><span class="line">    &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;,</span><br><span class="line">....</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在index.wxml文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\&lt;input bindinput=&quot;first&quot; placeholder=&quot;文字&quot;&gt;\&lt;/input&gt;</span><br><span class="line">\&lt;input value=&quot;second&quot; placeholder=&quot;文字&quot;disabled&gt;\&lt;/input&gt;</span><br><span class="line">//placeholder：提示</span><br><span class="line">//bindiniput:输入</span><br><span class="line">//bindconfirm:回车触发事件</span><br><span class="line">//value:输入框内容</span><br><span class="line">\&lt;input class=&quot;search_input&quot; placeholder=&quot;Search&quot; bindinput=&quot;text_input&quot; bindconfirm=&quot;searchtap&quot;value=&quot;&#123;&#123;search_key&#125;&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<ul>
<li>textarea</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//auto-focus: 自动聚焦</span><br><span class="line">//maxlength=&quot;-1&quot;:不限长度</span><br><span class="line"> \&lt;textarea auto-focus placeholder=&quot;Text&quot;maxlength=&quot;-1&quot; bindinput=&quot;text_input&quot; value=&quot;&#123;&#123;record&#125;&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>选择照片</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wx.chooseImage(&#123;</span><br><span class="line">     count: 1, //数量 默认9</span><br><span class="line">     sizeType: [&#x27;original&#x27;, &#x27;compressed&#x27;], //图片质量：原图，压缩</span><br><span class="line">     sourceType: [&#x27;album&#x27;, &#x27;camera&#x27;],      //拍照，相册</span><br><span class="line">     success: (res) =&gt; &#123;</span><br><span class="line">       //成功后把地址放入全局变量中,</span><br><span class="line">       app.data.picpath = res.tempFilePaths[0];</span><br><span class="line">       //跳转到图片裁剪界面，文字识别界面</span><br><span class="line">       wx.navigateTo(&#123;</span><br><span class="line">         url: &#x27;/pages/ocr/ocr&#x27;,</span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>跳转界面 </li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//返回界面</span><br><span class="line">           wx.navigateBack(&#123;</span><br><span class="line">             delta: 0,     //0表示上一层</span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//关闭当前页面跳转到</span><br><span class="line"> wx.redirectTo(&#123;</span><br><span class="line">   url: &#x27;/pages/index/index&#x27;,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取列表index</li>
</ul>
<p>wx:for控制属性绑定一个数组进行列表渲染。</p>
<blockquote>
<p>（当前项的下标变量名默认为 index，数组当前项的变量名默认为 item，改名：使用 wx:for-item=“jjj” 可以指定数组当前元素的变量名，<br>使用 wx:for-index =”aa“可以指定数组当前下标的变量名。<br>这个注意了。wx:key还是要加上的，不然一直报这个提示错误：如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 &lt;input/&gt; 中的输入内容，&lt;switch/&gt; 的选中状态），需要使用 wx:key 来指定列表中项目的唯一的标识符。</p>
</blockquote>
<blockquote>
<p>wx:key 的值以两种形式提供<br>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。<br>保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：<br>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。如不提供 wx:key，会报一个 warning， 如果明确知道该列表是静态，或者不必关注其顺序，可以选择忽略。）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wxml:</span><br><span class="line"> &lt;view class=&quot;touch-item &#123;&#123;item.isTouchMove ? &#x27;touch-move-active&#x27; : &#x27;&#x27;&#125;&#125;&quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot; bindtouchstart=&quot;touchstart&quot; bindtouchmove=&quot;touchmove&quot; wx:for=&quot;&#123;&#123;item1&#125;&#125;&quot;   wx:key=&quot;i&quot;&gt;</span><br><span class="line"> &lt;view class=&quot;del&quot; catchtap=&quot;del&quot; style=&quot;border-radius:20rpx 0 0 20rpx;&quot;  data-detail=&quot;&#123;&#123;item.content.text&#125;&#125; &quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot;&gt;删除&lt;/view&gt;&lt;/view&gt;</span><br><span class="line">js:</span><br><span class="line"> //列表删除</span><br><span class="line">del(e)&#123;</span><br><span class="line">    this.data.item1.splice(e.currentTarget.dataset.index, 1)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">     item1: this.data.item1</span><br><span class="line">    &#125;)&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>搜索</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for(var i=0,j=0;i&lt;app.data.item2.length;i++)&#123;</span><br><span class="line">   if(app.data.item2[i].delete==0)&#123;</span><br><span class="line">     //模糊搜索</span><br><span class="line">  if(app.data.item2[i].content.text.indexOf(this.data.search_key)!=-1)&#123;</span><br><span class="line">    this.data.item1[j]=app.data.item2[i];</span><br><span class="line">    j++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>复制</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/*#######复制功能########################*/</span><br><span class="line">copy: function (e) &#123;</span><br><span class="line">  var that = this;</span><br><span class="line">  wx.setClipboardData(&#123;</span><br><span class="line">   data: e.currentTarget.dataset.detail,</span><br><span class="line">   success: function (res) &#123;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>云数据库</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wx.cloud.init(&#123;         //初始化</span><br><span class="line">  env:&quot;cloud1-3gerlsz2682ceb37&quot;,</span><br><span class="line">  traceUser:true,</span><br><span class="line">&#125;);</span><br><span class="line">const db=wx.cloud.database();</span><br><span class="line"></span><br><span class="line">Page(&#123; </span><br><span class="line">    var that = this;//定义到这里，让that先获取到外面方法的this</span><br><span class="line">    db.collection(&#x27;my_data&#x27;).where(&#123;_openid:app.data.useropenid&#125;).get(&#123;</span><br><span class="line">      success: function(res) &#123;</span><br><span class="line">    //    that.setData(&#123;item2:res.data[0].array&#125;)</span><br><span class="line">    //用户数据放入全局变量中</span><br><span class="line">    app.data.item2=res.data[0].array; </span><br><span class="line">    </span><br><span class="line">    //更新数据 ，添加新条目</span><br><span class="line">  db.collection(&#x27;my_data&#x27;)</span><br><span class="line">  .doc(app.data.useropenid)     //_id</span><br><span class="line">  .update(&#123;</span><br><span class="line">    data:&#123;</span><br><span class="line">     array: _.unshift([&#123;</span><br><span class="line">      content:&#123;</span><br><span class="line">        text: this.data.record,</span><br><span class="line">        time: this.data.record_time,</span><br><span class="line">      &#125;,</span><br><span class="line">      isTouchMove:false,</span><br><span class="line">      delete:0</span><br><span class="line">    &#125;])&#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>获取时间</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">util.js:</span><br><span class="line">const formatTime = date =&gt; &#123;</span><br><span class="line">  const year = date.getFullYear()</span><br><span class="line">  const month = date.getMonth() + 1</span><br><span class="line">  const day = date.getDate()</span><br><span class="line">  const hour = date.getHours()</span><br><span class="line">  const minute = date.getMinutes()</span><br><span class="line">  const second = date.getSeconds()</span><br><span class="line"></span><br><span class="line">  return [year, month, day].map(formatNumber).join(&#x27;-&#x27;) + &#x27; &#x27; + [hour, minute, second].map(formatNumber).join(&#x27;:&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const formatNumber = n =&gt; &#123;</span><br><span class="line">  n = n.toString()</span><br><span class="line">  return n[1] ? n : &#x27;0&#x27; + n</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  formatTime: formatTime</span><br><span class="line">&#125;</span><br><span class="line"> js:</span><br><span class="line"> var util = require(&#x27;../../util/util.js&#x27;);</span><br><span class="line"> Page(&#123;</span><br><span class="line">  //获取时间</span><br><span class="line">  const _ = db.command;</span><br><span class="line">  var time = util.formatTime(new Date());</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    record_time:time</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>布局</li>
</ol>
<ul>
<li>固定按钮</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wxml:</span><br><span class="line">&lt;view class=&quot;round-click&quot; bindtap=&quot;new_goto&quot;&gt;+&lt;/view&gt;</span><br><span class="line">wxss:</span><br><span class="line">  .round-click&#123;</span><br><span class="line"></span><br><span class="line">    height: 120rpx;</span><br><span class="line"></span><br><span class="line">    width: 120rpx;</span><br><span class="line">    background-color:rgb(246, 246, 246,0.9);</span><br><span class="line">    border-radius: 100%;</span><br><span class="line">    position: fixed;</span><br><span class="line">    bottom: 100rpx;</span><br><span class="line">    right: 20rpx;</span><br><span class="line"></span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">	font-size:70rpx;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    z-index: 9;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>wx.request发起 HTTPS 网络请求,data请求的参数,success接口调用成功的回调函数    </p>
<p>AudioContext对象用于与audio组件绑定，通过它可以在逻辑层操作视图层的audio组件。可以用wx.createAudioContext(audioId)接口创建并返回audio的上下文对象AudioContext。</p>
<h2 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h2><ol>
<li>利用小程序提供的 API 跳转：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 保留当前页面，跳转到应用内的某个页面，使用wx.navigateBack可以返回到原页面。</span><br><span class="line">// 注意：调用 navigateTo 跳转时，调用该方法的页面会被加入堆栈，但是 redirectTo </span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  url: &#x27;page/home/home?user_id=111&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">复制代码</span><br><span class="line">// 关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层。</span><br><span class="line"></span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  url: &#x27;page/home/home?user_id=111&#x27;　　// 页面 A</span><br><span class="line">&#125;)</span><br><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  url: &#x27;page/detail/detail?product_id=222&#x27;　　// 页面 B</span><br><span class="line">&#125;)</span><br><span class="line">// 跳转到页面 A</span><br><span class="line">wx.navigateBack(&#123;</span><br><span class="line">  delta: 2</span><br><span class="line">&#125;)</span><br><span class="line">复制代码</span><br><span class="line">// 关闭当前页面，跳转到应用内的某个页面。</span><br><span class="line">wx.redirectTo(&#123;</span><br><span class="line">  url: &#x27;page/home/home?user_id=111&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">// 跳转到tabBar页面（在app.json中注册过的tabBar页面），同时关闭其他非tabBar页面。</span><br><span class="line">wx.switchTab(&#123;</span><br><span class="line">  url: &#x27;page/index/index&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">// 关闭所有页面，打开到应用内的某个页面。</span><br><span class="line">wx.reLanch(&#123;</span><br><span class="line">  url: &#x27;page/home/home?user_id=111&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>原理：wxml中不能直接使用较高级的js语法，如‘.toFixed’，‘toString()’，但可以通过引入wxs模块实现效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1.新建`filter.wxs`</span><br><span class="line">var filters = &#123;    </span><br><span class="line">    toFix: function (value) &#123;       </span><br><span class="line">        return value.toFixed(2) // 此处2为保留两位小数，保留几位小数，这里写几    </span><br><span class="line">    &#125;,</span><br><span class="line">    toStr: function (value) &#123;       </span><br><span class="line">        return value.toString()</span><br><span class="line">    &#125;,</span><br><span class="line">    toNum: function (value) &#123;       </span><br><span class="line">        return value.toNumber()</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">module.exports = &#123;   </span><br><span class="line">    toFix: filters.toFix,</span><br><span class="line">    toStr: filters.toStr,</span><br><span class="line">    toNum: filters.toNum,//暴露接口调用</span><br><span class="line">&#125;</span><br><span class="line">2.WXML中引入WXS</span><br><span class="line">&lt;wxs module=&quot;filters&quot; src=&quot;../../utils/filters.wxs&quot;&gt;&lt;/wxs&gt;</span><br><span class="line">3.在WXML中使用</span><br><span class="line">&lt;view&gt;</span><br><span class="line">&#123;&#123; filters.toFix(price) &#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">　　其他如toString(),toNumber()也可用此类似方法</span><br></pre></td></tr></table></figure>

<h2 id="虚拟列表"><a href="#虚拟列表" class="headerlink" title="虚拟列表"></a>虚拟列表</h2><ul>
<li>wxml<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;scroll-view id=&#x27;scrollView&#x27; style=&quot;margin-top:80rpx;height:calc(100% - 180rpx);&quot; scroll-y=&quot;true&quot;</span><br><span class="line">  scroll-with-animation=&quot;true&quot; enable-back-to-top=&quot;true&quot; refresher-enabled=&quot;true&quot; refresher-background=&quot;#f6f6f6&quot;</span><br><span class="line">  refresher-triggered=&quot;true&quot; bindscrolltolower=&quot;listScrollBottom&quot; bindscrolltoupper=&quot;listScrollTop&quot;</span><br><span class="line">  upper-threshold=&quot;&#123;&#123;listEmptyView+100&#125;&#125;&quot; lower-threshold=&quot;100&quot; scroll-top=&quot;&#123;&#123;currentListPosition&#125;&#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view wx:if=&quot;&#123;&#123;list.length==0&#125;&#125;&quot; style=&quot;text-align:center;color:gray;padding:40rpx;&quot;&gt;还没有动态哦，快去发一条吧(。・∀・)ノ&lt;/view&gt;</span><br><span class="line">  &lt;view id=&quot;listContainer&#123;&#123;index&#125;&#125;&quot; wx:for=&quot;&#123;&#123;list&#125;&#125;&quot; wx:key=&quot;index&quot;&gt;</span><br><span class="line">    &lt;view wx:if=&quot;&#123;&#123;item.length==undefind&#125;&#125;&quot; style=&quot;height:&#123;&#123;item.height&#125;&#125;px&quot;&gt;&lt;/view&gt;</span><br><span class="line">    &lt;view wx:else&gt;</span><br><span class="line">      &lt;view class=&quot;main_container&quot; wx:for=&quot;&#123;&#123;item&#125;&#125;&quot; wx:key=&quot;i&quot;&gt;</span><br><span class="line">        &lt;image style=&quot;width:100rpx;height:100rpx;border-radius:50%;&quot; src=&quot;&#123;&#123;item.avatar&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;/image&gt;</span><br><span class="line">        &lt;view class=&quot;main_container_right&quot;&gt;</span><br><span class="line">          &lt;view&gt;</span><br><span class="line">            &lt;view class=&quot;main_container_name&quot;&gt;&#123;&#123;item.userName&#125;&#125; &lt;/view&gt;</span><br><span class="line">            &lt;view style=&quot;display:inline-block;1font-size:30rpx;font-weight:400;color:#536471;&quot;&gt; • &#123;&#123;item.createTime&#125;&#125;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">          &lt;!-- 文字 --&gt;</span><br><span class="line"></span><br><span class="line">          &lt;view style=&quot;padding-left:20rpx;&quot;&gt;&lt;text&gt;&#123;&#123;item.content&#125;&#125;&lt;/text&gt;</span><br><span class="line">            &lt;!-- 视频 --&gt;</span><br><span class="line">            &lt;view data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; wx:if=&quot;&#123;&#123;item.hasVideo&amp;&amp;item.url.length!=0&#125;&#125;&quot; bindtap=&quot;videoPreview&quot;</span><br><span class="line">              class=&quot;main_container_video&quot;&gt;</span><br><span class="line">              &lt;text style=&quot;font-size:100rpx;&quot; class=&quot;iconfont icon-play&quot;&gt;&lt;/text&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">            &lt;image wx:if=&quot;&#123;&#123;!item.hasVideo&amp;&amp;item.url.length==1&#125;&#125;&quot; bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot;</span><br><span class="line">              data-current=&quot;0&quot; mode=&quot;aspectFill&quot; class=&quot;main_container_img1&quot; src=&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;&gt;</span><br><span class="line">            &lt;/image&gt;</span><br><span class="line">            &lt;view wx:elif=&quot;&#123;&#123;item.url.length==2&#125;&#125;&quot; class=&quot;main_container_img2&quot;&gt;</span><br><span class="line">              &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;0&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                src=&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;&gt;</span><br><span class="line">              &lt;/image&gt;</span><br><span class="line">              &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;1&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                src=&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;&gt;</span><br><span class="line">              &lt;/image&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;view wx:elif=&quot;&#123;&#123;item.url.length==3&#125;&#125;&quot; class=&quot;main_container_img3&quot;&gt;</span><br><span class="line">              &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;0&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                src=&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;&gt;</span><br><span class="line">              &lt;/image&gt;</span><br><span class="line">              &lt;view class=&quot;main_container_img3_item&quot;&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;1&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  src=&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;2&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  src=&quot;&#123;&#123;item.url[2]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;view wx:elif=&quot;&#123;&#123;item.url.length==4&#125;&#125;&quot; class=&quot;main_container_img4&quot;&gt;</span><br><span class="line">              &lt;view class=&quot;main_container_img4_item&quot;&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;0&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  style=&quot; border-radius:  16rpx 0 0 0;&quot; src=&quot;&#123;&#123;item.url[0]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;1&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  style=&quot; border-radius:   0 16rpx 0 0;&quot; src=&quot;&#123;&#123;item.url[1]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;/view&gt;</span><br><span class="line">              &lt;view class=&quot;main_container_img4_item&quot;&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;2&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  style=&quot; border-radius:   0 0 0 16rpx ;&quot; src=&quot;&#123;&#123;item.url[2]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">                &lt;image bindtap=&quot;imgPreview&quot; data-src=&quot;&#123;&#123;item.url&#125;&#125;&quot; data-current=&quot;3&quot; mode=&quot;aspectFill&quot;</span><br><span class="line">                  style=&quot; border-radius:   0  0 16rpx 0;&quot; src=&quot;&#123;&#123;item.url[3]&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">              &lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;!--位置--&gt;</span><br><span class="line">            &lt;view style=&quot;margin-top:30rpx;&quot; wx:if=&quot;&#123;&#123;item.location&#125;&#125;&quot;&gt;&lt;text</span><br><span class="line">                style=&quot;font-size:25rpx;color:#536471&quot;&gt;位于：&lt;/text&gt;&lt;text</span><br><span class="line">                style=&quot;font-size:25rpx;color:#1d9bf0&quot;&gt;&#123;&#123;item.location&#125;&#125;&lt;/text&gt;&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">          &lt;view class=&quot;main_container_bottom&quot;&gt;</span><br><span class="line">            &lt;view data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot;&gt;&lt;text class=&quot;iconfont icon-comment&quot;&gt;&lt;/text&gt;&#123;&#123;item.comments?item.comments:&#x27;&#x27;&#125;&#125;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">            &lt;view data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot;&gt;&lt;text class=&quot;iconfont icon-favorite&quot;&gt;&lt;/text&gt;&lt;/view&gt;</span><br><span class="line">            &lt;view bindtap=&quot;likesUpgrade&quot; data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot; data-likes=&quot;&#123;&#123;item.likes?item.likes:0&#125;&#125;&quot;&gt;&lt;text</span><br><span class="line">                class=&quot;iconfont icon-fabulous&quot;&gt;&lt;/text&gt;&#123;&#123;item.likes?item.likes:&#x27;&#x27;&#125;&#125;&lt;/view&gt;</span><br><span class="line">            &lt;view data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot;&gt;&lt;text class=&quot;iconfont icon-share&quot;&gt;&lt;/text&gt;&lt;/view&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/scroll-view&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>-js </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    list: [</span><br><span class="line">      [],</span><br><span class="line">      [],</span><br><span class="line">      []</span><br><span class="line">    ],</span><br><span class="line">    keyword: &#x27;&#x27;,</span><br><span class="line">    pageNo: 1,</span><br><span class="line">    pageSize: 8,</span><br><span class="line">    total: 0,</span><br><span class="line">    listEmptyView: 0,</span><br><span class="line">    currentListPosition: 0,</span><br><span class="line">    scrollContainerHeight: 0,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">  listScrollTop(e) &#123;</span><br><span class="line">    let pageNo = this.data.pageNo - 2;</span><br><span class="line">    if (pageNo &gt; 0) &#123;</span><br><span class="line">      this.getList(pageNo, this.data.pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  listScrollBottom(e) &#123;</span><br><span class="line">    let pageNo = this.data.pageNo + 1;</span><br><span class="line">    if (pageNo &lt;= Math.ceil(this.data.total / this.data.pageSize)) &#123;</span><br><span class="line">      this.getList(pageNo, this.data.pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getList(pageNo, pageSize) &#123;</span><br><span class="line">    //获取列表</span><br><span class="line">    axios(&#123;</span><br><span class="line">      method: &quot;get&quot;,</span><br><span class="line">      header: &#123;</span><br><span class="line">        &#x27;Authorization&#x27;: wx.getStorageSync(&#x27;Authorization&#x27;),</span><br><span class="line">      &#125;,</span><br><span class="line">      url: &quot;/updates/public?pageNo=&quot; + pageNo + &quot;&amp;pageSize=&quot; + pageSize + &quot;&amp;keyword=&quot;</span><br><span class="line">    &#125;).then(res =&gt; &#123;</span><br><span class="line">      console.log(pageNo, pageSize, res);</span><br><span class="line">      if (res.data.code == 200) &#123;</span><br><span class="line">        var that = this</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          total: res.data.data.total,</span><br><span class="line">        &#125;)</span><br><span class="line">        if (pageNo &gt;= this.data.pageNo) &#123; //向后翻页</span><br><span class="line">          // wx.createSelectorQuery().select(&#x27;#listContainer1&#x27;).boundingClientRect(function (rect) &#123;&#125;).exec(function (re) &#123;</span><br><span class="line">          //   console.log(that.data.scrollContainerHeight);</span><br><span class="line">          //   that.setData(&#123;</span><br><span class="line">          //     currentListPosition: that.data.listEmptyView  + re[0].height-that.data.scrollContainerHeight+50</span><br><span class="line">          //   &#125;)</span><br><span class="line">          // &#125;)</span><br><span class="line">          if (pageNo &gt; 2) &#123; //大于两页清除前面</span><br><span class="line">            wx.createSelectorQuery().select(&#x27;#listContainer&#x27; + (pageNo - 1)).boundingClientRect(function (rect) &#123;&#125;).exec(function (re) &#123; //空view替代删除的条目</span><br><span class="line">              that.setData(&#123;</span><br><span class="line">                listEmptyView: that.data.listEmptyView + re[0].height,</span><br><span class="line">                pageNo: pageNo,</span><br><span class="line">                [`list[$&#123;pageNo-2&#125;]`]: &#123;</span><br><span class="line">                  height: re[0].height</span><br><span class="line">                &#125;,</span><br><span class="line">                [`list[$&#123;pageNo&#125;]`]: res.data.data.records,</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.setData(&#123;</span><br><span class="line">              pageNo: pageNo,</span><br><span class="line">              [`list[$&#123;pageNo&#125;]`]: res.data.data.records,</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123; //向前翻页</span><br><span class="line">          if (this.data.list.length &gt; (pageNo + 1)) &#123;</span><br><span class="line">            this.setData(&#123;</span><br><span class="line">              [`list[$&#123;pageNo&#125;]`]: res.data.data.records,</span><br><span class="line">              [`list[$&#123;pageNo+2&#125;]`]: [],</span><br><span class="line">              pageNo: this.data.pageNo - 1</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.setData(&#123;</span><br><span class="line">              [`list[$&#123;pageNo&#125;]`]: res.data.data.records,</span><br><span class="line">              pageNo: this.data.pageNo - 1</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          wx.createSelectorQuery().select(&#x27;#listContainer&#x27; + (pageNo)).boundingClientRect(function (rect) &#123;&#125;).exec(function (res) &#123; //缩短占位view高度</span><br><span class="line">      </span><br><span class="line">            that.setData(&#123;</span><br><span class="line">              listEmptyView: that.data.listEmptyView - res[0].height</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">          title: res.data.message,</span><br><span class="line">          duration: 1000,</span><br><span class="line">          icon: &#x27;none&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, err =&gt; &#123;</span><br><span class="line">      if (err == 201) &#123;</span><br><span class="line">        wx.redirectTo(&#123;</span><br><span class="line">          url: &#x27;/pages/login/login&#x27;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>微信小程序中局部更新对象或者数组中的某个数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.setData(&#123;</span><br><span class="line">[&#x27;list[0][1].a&#x27;]:0</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/01/20-11-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/01/20-11-22/" class="post-title-link" itemprop="url">snowboy语音模型说明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-01 20:11:22" itemprop="dateCreated datePublished" datetime="2021-01-01T20:11:22+08:00">2021-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-28 13:35:07" itemprop="dateModified" datetime="2021-06-28T13:35:07+08:00">2021-06-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">嵌入式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="snowboy-离线语音唤醒说明"><a href="#snowboy-离线语音唤醒说明" class="headerlink" title="snowboy 离线语音唤醒说明"></a>snowboy 离线语音唤醒说明</h1><ul>
<li>resources/models/snowboy.umdl：唤醒词为“snowboy”的通用模型。将SetSensitivity设置为0.5，ApplyFrontend设置为false。</li>
<li>resources/models/jarvis.umdl: 唤醒词为“Jarvis” (<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/29">https://snowboy.kitt.ai/hotword/29</a>) 的通用模型，其中包含了对应于“Jarvis”的两个唤醒词模型，所以需要设置两个sensitivity。将SetSensitivity设置为0.8,0.8，ApplyFrontend设置为true。</li>
<li>resources/models/smart_mirror.umdl: 唤醒词为“Smart Mirror” (<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/47">https://snowboy.kitt.ai/hotword/47</a>) 的通用模型。将SetSensitivity设置为0.5，ApplyFrontend设置为false。</li>
<li>resources/models/subex.umdl: 唤醒词为“Subex”(<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/22014">https://snowboy.kitt.ai/hotword/22014</a>) 的通用模型。将SetSensitivity设置为0.5，ApplyFrontend设置为true。</li>
<li>resources/models/neoya.umdl: 唤醒词为“Neo ya”(<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/22171">https://snowboy.kitt.ai/hotword/22171</a>) 的通用模型。其中包含了对应于“Neo ya”的两个&gt;唤醒词模型，所以需要设置两个sensitivity。将SetSensitivity设置为0.7,0.7，ApplyFrontend设置为true。</li>
<li>resources/models/hey_extreme.umdl: 唤醒词为“Hey Extreme” (<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/15428)%E7%9A%84%E9%80%9A%E7%94%A8%E6%A8%A1%E5%9E%8B%E3%80%82%E5%B0%86%60SetSensitivity%60%E8%AE%BE%E7%BD%AE%E4%B8%BA%600.6%60%EF%BC%8C%60ApplyFrontend%60%E8%AE%BE%E7%BD%AE%E4%B8%BA%60true%60%E3%80%82">https://snowboy.kitt.ai/hotword/15428)的通用模型。将`SetSensitivity`设置为`0.6`，`ApplyFrontend`设置为`true`。</a></li>
<li>resources/models/computer.umdl: 唤醒词为“Computer” (<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/46">https://snowboy.kitt.ai/hotword/46</a>) 的通用模型。将SetSensitivity设置为0.6，ApplyFrontend设置为true。</li>
<li>resources/models/view_glass.umdl: 唤醒词为“View Glass” (<a target="_blank" rel="noopener" href="https://snowboy.kitt.ai/hotword/7868">https://snowboy.kitt.ai/hotword/7868</a>) 的通用模型。将SetSensitivity设置为0.7，ApplyFrontend设置为true。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
