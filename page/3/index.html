<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"a913481180.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="https://a913481180.github.io/page/3/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://a913481180.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/05/22/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/22/20-22-11/" class="post-title-link" itemprop="url">JS实例</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-22 20:22:11" itemprop="dateCreated datePublished" datetime="2021-05-22T20:22:11+08:00">2021-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h2><blockquote>
<p>通用唯一识别码（英语：Universally Unique Identifier，缩写：UUID）是用于计算机体系中以识别信息的一个 128 位标识符，通常表现为一串 32 位十六进制数字。<br>基于 RFC4122 标准创建的 UUID，它有很多版本：v1,v2..v5；</p>
<p>uuid v1 是使用主机 MAC 地址和当前日期和时间的组合生成的，这种方式意味着 uuid 是匿名的。</p>
<p>uuid v4 是随机生成的，没有内在逻辑，组合方式非常多（2¹²⁸），除非每秒生成数以万亿计的 ID，否则几乎不可能产生重复，如果你的应用程序是关键型任务，仍然应该添加唯一性约束，以避免 v4 冲突。</p>
<p>uuid v5 与 v1 v4 不同，它通过提供两条输入信息（输入字符串和命名空间）生成的，这两条信息被转换为 uuid；</p>
</blockquote>
<p>1）1~8 位采用系统时间，在系统时间上精确到毫秒级保证时间上的唯一性；</p>
<p>2）9~16 位采用底层的 IP 地址，在服务器集群中的唯一性；</p>
<p>3）17~24 位采用当前对象的 HashCode 值，在一个内部对象上的唯一性；</p>
<p>4）25~32 位采用调用方法的一个随机数，在一个对象内的毫秒级的唯一性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateUUIDv4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> crypto === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// Node.js API Crypto 提供 **randomUUID()** 方法，基于 RFC 4122 V4 生成随机数；</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> crypto.randomUUID === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> crypto.randomUUID();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用crypto提供的getRandomValues方法</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      <span class="keyword">typeof</span> crypto.getRandomValues === <span class="string">&quot;function&quot;</span> &amp;&amp;</span><br><span class="line">      <span class="keyword">typeof</span> <span class="built_in">Uint8Array</span> === <span class="string">&quot;function&quot;</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">const</span> callback = <span class="function">(<span class="params">c</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> num = <span class="built_in">Number</span>(c);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          num ^</span><br><span class="line">          (crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">1</span>))[<span class="number">0</span>] &amp; (<span class="number">15</span> &gt;&gt; (num / <span class="number">4</span>)))</span><br><span class="line">        ).toString(<span class="number">16</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;10000000-1000-4000-8000-100000000000&quot;</span>.replace(<span class="regexp">/[018]/g</span>, callback);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//使用Math.random(),时间戳生成 UUID.使用正则表达式替换字符串中的 x 和 y，其中 x 被随机的 16 进制数所取代，y 被一个特定的 16 进制数所取代，该数可以确定版本号（这里选择了版本 4）和变体号。</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;</span>.replace(<span class="regexp">/[xy]/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    <span class="keyword">let</span> r = (d + <span class="built_in">Math</span>.random() * <span class="number">16</span>) % <span class="number">16</span> | <span class="number">0</span>;</span><br><span class="line">    d = <span class="built_in">Math</span>.floor(d / <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> (c == <span class="string">&quot;x&quot;</span> ? r : (r &amp; <span class="number">0x3</span>) | <span class="number">0x8</span>).toString(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h2><p>单位时间内，频繁触发事件，只执行最后一次事件（回城）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn();</span><br><span class="line">    &#125;, t);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h2><p>单位时间内，频繁触发事件，必须等待第一次事件执行完毕（技能）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer === <span class="literal">null</span>) &#123;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        fn();</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        timer = <span class="literal">null</span>;</span><br><span class="line">      &#125;, t);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><ul>
<li>图片到浏览器顶部的距离 offsetTop&lt; 视口高度 clientHeight+滚动轴距离 scrollTop</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:400px;position:relative;overflow:auto&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;rwo&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;image/load.gif&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 父元素要使用定位,否则需要计算偏移</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&quot;container&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> height = el.clientHeight;</span></span><br><span class="line"><span class="javascript">    el.onscroll = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> scrollTop = e.target.scrollTop;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> imgs = el.getElementsByTagName(<span class="string">&quot;img&quot;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> imgs) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!item.src) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> top = item.offsetTop;</span></span><br><span class="line"><span class="javascript">          <span class="comment">//图片顶部小于等于滚动条加父元素高度就出现在可视区域</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">// console.log(top, height, scrollTop);</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (top &lt;= height + scrollTop + <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="javascript">            item.src = item.dataset.src;</span></span><br><span class="line"><span class="javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Element.getBoundingClientRect() 方法返回元素的大小及其相对于视口的位置。我们可以取得它的 top 值，它的 top 值就是元素左上角到视口顶部的距离。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需要计算父容器偏移</span></span><br><span class="line"><span class="keyword">let</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&quot;container&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> height = el.clientHeight;</span><br><span class="line"><span class="keyword">let</span> offset = el.offsetTop;</span><br><span class="line">el.onscroll = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> imgs = el.getElementsByTagName(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> imgs) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!item.src) &#123;</span><br><span class="line">      <span class="keyword">let</span> top = item.getBoundingClientRect().top;</span><br><span class="line">      <span class="comment">//图片顶部出现在可视区域</span></span><br><span class="line">      <span class="keyword">if</span> (top &lt;= heigh + offset + <span class="number">10</span>) &#123;</span><br><span class="line">        item.src = item.dataset.src;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><ul>
<li>动态切换 img 标签的 src</li>
<li>将所有图片横向排列，然后依次向左移动至显示区域内</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">width:</span> <span class="attr">210</span>,</span></span><br><span class="line"><span class="tag">          <span class="attr">height:</span> <span class="attr">210</span>,</span></span><br><span class="line"><span class="tag">          <span class="attr">border:</span> &quot;<span class="attr">10px</span> <span class="attr">solid</span> <span class="attr">skyblue</span>&quot;,</span></span><br><span class="line"><span class="tag">          <span class="attr">overflow:</span> &quot;<span class="attr">hidden</span>&quot;,</span></span><br><span class="line"><span class="tag">          <span class="attr">position:</span> &quot;<span class="attr">relative</span>&quot;,</span></span><br><span class="line"><span class="tag">        &#125;&#125;</span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;uli&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">listStyle:</span> &quot;<span class="attr">none</span>&quot;,</span></span><br><span class="line"><span class="tag">            <span class="attr">position:</span> &quot;<span class="attr">absolute</span>&quot;,</span></span><br><span class="line"><span class="tag">            <span class="attr">left:</span> <span class="attr">0</span>,</span></span><br><span class="line"><span class="tag">            <span class="attr">padding:</span> <span class="attr">0</span>,</span></span><br><span class="line"><span class="tag">            <span class="attr">margin:</span> <span class="attr">0</span>,</span></span><br><span class="line"><span class="tag">            <span class="attr">whiteSpace:</span> &quot;<span class="attr">nowrap</span>&quot;,</span></span><br><span class="line"><span class="tag">            <span class="attr">height:</span> <span class="attr">200</span>,</span></span><br><span class="line"><span class="tag">          &#125;&#125;</span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> &quot;<span class="attr">red</span> <span class="attr">5px</span> <span class="attr">solid</span>&quot;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo512.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;err&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> &quot;<span class="attr">blue</span> <span class="attr">5px</span> <span class="attr">solid</span>&quot;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo512.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;err&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> &quot;<span class="attr">green</span> <span class="attr">5px</span> <span class="attr">solid</span>&quot;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo512.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;err&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> &quot;<span class="attr">pink</span> <span class="attr">5px</span> <span class="attr">solid</span>&quot;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo512.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;err&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border:</span> &quot;<span class="attr">red</span> <span class="attr">5px</span> <span class="attr">solid</span>&quot;, <span class="attr">display:</span> &quot;<span class="attr">inline-block</span>&quot; &#125;&#125;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./logo512.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;err&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  let ul = document.getElementById(&quot;uli&quot;);</span><br><span class="line">    setInterval(() =&gt; &#123;</span><br><span class="line">      ul.style.left = parseInt(ul.style.left) - 210 + &quot;px&quot;;</span><br><span class="line">      if (ul.offsetLeft &lt;= -210 * 4) &#123;</span><br><span class="line">        ul.style.left = &quot;0px&quot;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 2000);</span><br><span class="line"> <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="拖拽"><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</h3><ul>
<li>mousedown</li>
</ul>
<p>记录鼠标按下的位置和被拖拽物体相对距离</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//clientX为鼠标位置，offsetLeft为盒子位置</span></span><br><span class="line"><span class="keyword">var</span> offsetX = e.clientX - node.offsetLeft;</span><br><span class="line"><span class="keyword">var</span> offsetY = e.clientY - node.offsetTop;</span><br></pre></td></tr></table></figure>

<ul>
<li>mousemove</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//鼠标移动的距离减去相对距离=盒子移动的距离</span></span><br><span class="line">node.style.left = e.clientX - offsetX + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">node.style.top = e.clientY - offsetY + <span class="string">&quot;px&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>mouseup</li>
</ul>
<p>取消拖拽</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  //父盒子与子盒子要有定位</span><br><span class="line">  window.onload=function()&#123;</span><br><span class="line">    var oDiv=document.getElementById(&quot;div1&quot;);</span><br><span class="line">    oDiv.onmousedown=function(ev)&#123;</span><br><span class="line">      var e=ev||window.event;</span><br><span class="line">      var offsetX=e.clientX-oDiv.offsetLeft;</span><br><span class="line">      var offsetY=e.clientY-oDiv.offsetTop;</span><br><span class="line"></span><br><span class="line">      document.onmousemove=function(ev)&#123;</span><br><span class="line">        var e=ev||window.event;</span><br><span class="line">        oDiv.style.left=e.clientX-offsetX+&quot;px&quot;;</span><br><span class="line">        oDiv.style.top=e.clientY-offsetY+&quot;px&quot;;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">    //绑定到document上，防止鼠标移动过快,离开节点</span><br><span class="line">    document.onmouseup=function()&#123;</span><br><span class="line">      document.onmousemove=null;</span><br><span class="line">      document.onmousedown=null;</span><br><span class="line">      document.onmouseup=null;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="动态创建表单并提交"><a href="#动态创建表单并提交" class="headerlink" title="动态创建表单并提交"></a>动态创建表单并提交</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript 构建一个 form</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MakeForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 创建一个 form</span></span><br><span class="line">  <span class="keyword">var</span> form1 = <span class="built_in">document</span>.createElement(<span class="string">&quot;form&quot;</span>);</span><br><span class="line">  form1.id = <span class="string">&quot;form1&quot;</span>;</span><br><span class="line">  form1.name = <span class="string">&quot;form1&quot;</span>; <span class="comment">// 添加到 body 中</span></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(form1); <span class="comment">// 创建一个输入</span></span><br><span class="line">  <span class="keyword">var</span> input = <span class="built_in">document</span>.createElement(<span class="string">&quot;input&quot;</span>); <span class="comment">// 设置相应参数</span></span><br><span class="line">  input.type = <span class="string">&quot;text&quot;</span>;</span><br><span class="line">  input.name = <span class="string">&quot;value1&quot;</span>;</span><br><span class="line">  input.value = <span class="string">&quot;1234567&quot;</span>; <span class="comment">// 将该输入框插入到 form 中</span></span><br><span class="line">  form1.appendChild(input); <span class="comment">// form 的提交方式</span></span><br><span class="line">  form1.method = <span class="string">&quot;POST&quot;</span>; <span class="comment">// form 提交路径</span></span><br><span class="line">  form1.action = <span class="string">&quot;/servlet/info&quot;</span>; <span class="comment">// 对该 form 执行提交</span></span><br><span class="line">  form1.submit(); <span class="comment">// 删除该 form</span></span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(form1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="虚拟列表"><a href="#虚拟列表" class="headerlink" title="虚拟列表"></a>虚拟列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;cube-recycle-list&quot; id=&quot;container&quot;&gt;</span><br><span class="line">    &lt;!-- 可见区域列表 --&gt;</span><br><span class="line">    &lt;div :style=&quot;&#123; height: heights + &#x27;px&#x27; &#125;&quot;&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        v-for=&quot;(item, index) in visibleItems&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">        class=&quot;cube-recycle-list-item&quot;</span><br><span class="line">        :style=&quot;&#123; transform: &#x27;translate(0,&#x27; + item.top + &#x27;px)&#x27; &#125;&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;!-- 内容 --&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          :style=&quot;</span><br><span class="line">            &#x27;height: &#x27; +</span><br><span class="line">            (index + startIndex + 1) * 10 +</span><br><span class="line">            &#x27;px; width: 100%; background-color: aqua&#x27;</span><br><span class="line">          &quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; index + startIndex &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 预加载,用于动态获取宽高 --&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      class=&quot;cube-recycle-list-item&quot;</span><br><span class="line">      v-for=&quot;(item, index) in preItems&quot;</span><br><span class="line">      :ref=&quot;(el) =&gt; itemDom(el, item.index, index)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 内容 --&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        :style=&quot;</span><br><span class="line">          &#x27;height: &#x27; +</span><br><span class="line">          (item.index + 1) * 10 +</span><br><span class="line">          &#x27;px; width: 100%; background-color: aqua&#x27;</span><br><span class="line">        &quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; item.index &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; nextTick, ref, computed, onMounted, onBeforeUnmount &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;List&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let n = 0;</span><br><span class="line">    let items = ref([]);</span><br><span class="line">    let list = ref([]);</span><br><span class="line">    let loadings = ref(false);</span><br><span class="line">    let heights = ref(0);</span><br><span class="line">    let pageNo = ref(0);</span><br><span class="line">    let startIndex = ref(0);</span><br><span class="line">    let refs = ref([]);</span><br><span class="line">    let itemDom = (el, index, i) =&gt; &#123;</span><br><span class="line">      //获取预加载的元素节点</span><br><span class="line">      if (i == 0) &#123;</span><br><span class="line">        refs.value = [];</span><br><span class="line">      &#125;</span><br><span class="line">      refs.value.push(&#123; index, el &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    let size = ref(15); //每页</span><br><span class="line">    let visibleItems = computed(() =&gt; &#123;</span><br><span class="line">      return items.value.slice(</span><br><span class="line">        Math.max(0, startIndex.value - size.value),</span><br><span class="line">        Math.min(items.value.length, startIndex.value + size.value)</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">    let preItems = computed(() =&gt; &#123;</span><br><span class="line">      //先加载元素获取其宽高，然后过滤去掉元素</span><br><span class="line">      return items.value.filter(function (item) &#123;</span><br><span class="line">        return !item.height;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    //更新每个item顶部距离和 整个列表的高</span><br><span class="line">    let updateItemTop = () =&gt; &#123;</span><br><span class="line">      let height = 0;</span><br><span class="line">      let pre;</span><br><span class="line">      let current;</span><br><span class="line">      // loop all items to</span><br><span class="line">      for (let i = 0; i &lt; items.value.length; i++) &#123;</span><br><span class="line">        pre = items.value[i - 1];</span><br><span class="line">        current = items.value[i];</span><br><span class="line">        // it is empty in array</span><br><span class="line">        /* istanbul ignore if */</span><br><span class="line">        if (!items.value[i]) &#123;</span><br><span class="line">          height += 0;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          current.top = pre ? pre.top + pre.height : 0;</span><br><span class="line">          height += current.height;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      heights.value = height;</span><br><span class="line">    &#125;;</span><br><span class="line">    //更新可见区域的起始序号</span><br><span class="line">    let updateStartIndex = () =&gt; &#123;</span><br><span class="line">      // update visible items start index</span><br><span class="line">      let top = document.getElementById(&quot;container&quot;).scrollTop;</span><br><span class="line">      let item;</span><br><span class="line">      for (let i = 0; i &lt; items.value.length; i++) &#123;</span><br><span class="line">        item = items.value[i];</span><br><span class="line">        if (!item || item.top &gt; top) &#123;</span><br><span class="line">          startIndex.value = Math.max(0, i - 1);</span><br><span class="line">          break;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    ///加载每一页数据的高度</span><br><span class="line">    let loadItemsByIndex = () =&gt; &#123;</span><br><span class="line">      const start = (pageNo.value - 1) * size.value;</span><br><span class="line">      const end = pageNo.value * size.value;</span><br><span class="line">      let promiseTasks = [];</span><br><span class="line">      let item;</span><br><span class="line">      for (let i = start; i &lt; end; i++) &#123;</span><br><span class="line">        //处理原数据</span><br><span class="line">        item = items.value[i];</span><br><span class="line">        if (!item) &#123;</span><br><span class="line">          items.value[i] = &#123;</span><br><span class="line">            index: i,</span><br><span class="line">            data: list.value[i] || &#123;&#125;,</span><br><span class="line">            height: 0,</span><br><span class="line">            top: -1000,</span><br><span class="line">          &#125;;</span><br><span class="line">          promiseTasks.push(</span><br><span class="line">            nextTick().then(() =&gt; &#123;</span><br><span class="line">              /////  动态获取每个item的高</span><br><span class="line">              for (let j = 0; j &lt; refs.value.length; j++) &#123;</span><br><span class="line">                if (refs.value[j].index == i) &#123;</span><br><span class="line">                  let node = refs.value[j].el;</span><br><span class="line">                  if (node) &#123;</span><br><span class="line">                    items.value[i].height = node.offsetHeight;</span><br><span class="line">                  &#125; else &#123;</span><br><span class="line">                    items.value[i].height = 0;</span><br><span class="line">                  &#125;</span><br><span class="line">                  break;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      //加载一页的高和item的顶</span><br><span class="line">      window.Promise.all(promiseTasks).then(() =&gt; &#123;</span><br><span class="line">        console.log(items.value);</span><br><span class="line">        updateItemTop();</span><br><span class="line">        updateStartIndex();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    //获取数据</span><br><span class="line">    let load = () =&gt; &#123;</span><br><span class="line">      if (!loadings.value) &#123;</span><br><span class="line">        console.log(&quot;load&quot;);</span><br><span class="line">        let arr = [];</span><br><span class="line">        const promiseFetch = new Promise((resolve) =&gt; &#123;</span><br><span class="line">          setTimeout(() =&gt; &#123;</span><br><span class="line">            arr = [];</span><br><span class="line">            for (let i = 0; i &lt; size.value; i++) &#123;</span><br><span class="line">              arr.push(&#123; n: n++ &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            resolve(arr);</span><br><span class="line">          &#125;, 1000);</span><br><span class="line">        &#125;);</span><br><span class="line">        pageNo.value++;</span><br><span class="line">        loadings.value = true; //加载中</span><br><span class="line">        promiseFetch.then((res) =&gt; &#123;</span><br><span class="line">          loadings.value = false; //取消加载中</span><br><span class="line">          //追加数据</span><br><span class="line">          list.value.push(...res);</span><br><span class="line">          ///加载item的高度</span><br><span class="line">          loadItemsByIndex();</span><br><span class="line">          //if (res.length &lt; size.value) &#123;</span><br><span class="line">          //没有更多数据</span><br><span class="line">          // updateItemTop();</span><br><span class="line">          //updateStartIndex();</span><br><span class="line">          // &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    let _onScroll = () =&gt; &#123;</span><br><span class="line">      if (</span><br><span class="line">        document.getElementById(&quot;container&quot;).scrollTop +</span><br><span class="line">          document.getElementById(&quot;container&quot;).offsetHeight &gt;</span><br><span class="line">        heights.value - 100</span><br><span class="line">      ) &#123;</span><br><span class="line">        //判断是否到底</span><br><span class="line">        load();</span><br><span class="line">      &#125;</span><br><span class="line">      //不停更新可见区域索引</span><br><span class="line">      updateStartIndex();</span><br><span class="line">    &#125;;</span><br><span class="line">    let _onResize = () =&gt; &#123;</span><br><span class="line">      //重新加载全部数据的高度</span><br><span class="line">      items.value.forEach((item) =&gt; &#123;</span><br><span class="line">        item.loaded = false;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      let node = document.getElementById(&quot;container&quot;);</span><br><span class="line"></span><br><span class="line">      console.log(node);</span><br><span class="line">      node.addEventListener(&quot;scroll&quot;, _onScroll);</span><br><span class="line">      window.addEventListener(&quot;resize&quot;, _onResize);</span><br><span class="line">      load();</span><br><span class="line">    &#125;);</span><br><span class="line">    onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">      document</span><br><span class="line">        .getElementById(&quot;container&quot;)</span><br><span class="line">        .removeEventListener(&quot;scroll&quot;, _onScroll);</span><br><span class="line">      window.removeEventListener(&quot;resize&quot;, _onResize);</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      items,</span><br><span class="line">      heights,</span><br><span class="line">      startIndex,</span><br><span class="line">      itemDom,</span><br><span class="line">      size,</span><br><span class="line">      visibleItems,</span><br><span class="line">      preItems,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.cube-recycle-list &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  height: 100%;</span><br><span class="line">  overflow-x: hidden;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line">.cube-recycle-list-item &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p>② 将文件流转换为 blob 链接<br>③ blob 链接转化时要注意添加 mime 类型<br>（移动端不加此步会导致下载失效）<br>④ js 创建一个 a 标签，并触发 click 点击下载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> downloadFile = (data: any, <span class="attr">fileName</span>: string): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// // data为blob格式</span></span><br><span class="line">  <span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([data], &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//pc</span></span><br><span class="line">  <span class="comment">// const downloadElement = document.createElement(&#x27;a&#x27;);</span></span><br><span class="line">  <span class="comment">// const href = window.URL.createObjectURL(blob);</span></span><br><span class="line">  <span class="comment">// downloadElement.href = href;</span></span><br><span class="line">  <span class="comment">// downloadElement.download = fileName;</span></span><br><span class="line">  <span class="comment">// document.body.appendChild(downloadElement);</span></span><br><span class="line">  <span class="comment">// downloadElement.click();</span></span><br><span class="line">  <span class="comment">// document.body.removeChild(downloadElement);</span></span><br><span class="line">  <span class="comment">// window.URL.revokeObjectURL(href);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//移动端</span></span><br><span class="line">  <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">  <span class="comment">// 传入被读取的blob对象</span></span><br><span class="line">  reader.readAsDataURL(blob);</span><br><span class="line">  <span class="comment">// 读取完成的回调事件</span></span><br><span class="line">  reader.onload = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">    a.download = fileName;</span><br><span class="line">    a.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="comment">// 生成的base64编码</span></span><br><span class="line">    <span class="keyword">const</span> url = reader.result;</span><br><span class="line">    a.href = url <span class="keyword">as</span> string;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">    a.click();</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(a);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="js-获取选择的文本"><a href="#js-获取选择的文本" class="headerlink" title="js 获取选择的文本"></a>js 获取选择的文本</h2><p>⾮ IE 浏览器获取选中⽂本：</p>
<ol>
<li><code>document.getSelection().toString()</code><br>如果想获取选中部分的 html 代码，由于 getSelection()⽅法返回的是⼀个 Range 对象，就需要⽤到 Range 对象的 cloneContents ⽅法，cloneContents ⽅法把 Range 对象的内容复制到⼀个 DocumentFragment 对象中，我们需要创建⼀个 dom 元素，然后将该 DocumentFragment 对象添加到创建的 dom 元素中，通过获取它的 innerHTML 来获取选择部分的 html 代码.</li>
<li><code>document.selection.createRange().text</code>;</li>
<li><code>document.selection.createRange().htmlText</code>;</li>
</ol>
<h2 id="数组深拷贝"><a href="#数组深拷贝" class="headerlink" title="数组深拷贝"></a>数组深拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5:</span></span><br><span class="line"><span class="comment">// 方法一：适用 单层 数组嵌套的深拷贝</span></span><br><span class="line"><span class="keyword">var</span> ary2 = ary1.concat();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二：适用 多层 数组嵌套的深拷贝</span></span><br><span class="line"><span class="keyword">var</span> ary2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(ary1)); <span class="comment">//此方法适用于Oject的深度拷贝，因为Array属于Oject类型，所以也适用于此处； //需要注意的是：作为Oject的深度拷贝时，要复制的function会直接消失，所以这个方法只能用在单纯只有数据的对象。</span></span><br><span class="line"><span class="comment">// 方法三：适用 单层 数组嵌套的深拷贝</span></span><br><span class="line">es6: <span class="keyword">var</span> ary2 = [...ary1];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法四：适用 单层 数组嵌套的深拷贝</span></span><br><span class="line"><span class="keyword">var</span> [...ary2] = ary1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法五：通过递归实现 多层 的深拷贝</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> source !== <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> source;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (source === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> source;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> newObj = source.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;; <span class="comment">//开辟一块新的内存空间</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> source) &#123;</span><br><span class="line">    newObj[i] = deepCopy(source[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="js-复制文本"><a href="#js-复制文本" class="headerlink" title="js 复制文本"></a>js 复制文本</h2><p>简介<br>目前，一共有三种方法可以实现剪贴板操作。</p>
<ol>
<li><code>Document.execCommand()</code>方法</li>
<li>异步的 <code>Clipboard API</code></li>
<li>copy 事件和 paste 事件</li>
</ol>
<p>一、<code>Document.execCommand()</code> 方法<br><code>Document.execCommand()</code>是操作剪贴板的传统方法，各种浏览器都支持。</p>
<p>它支持复制、剪切和粘贴这三个操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">&quot;copy&quot;</span>); <span class="comment">//（复制）</span></span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">&quot;cut&quot;</span>); <span class="comment">//（剪切）</span></span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">&quot;paste&quot;</span>); <span class="comment">//（粘贴）</span></span><br></pre></td></tr></table></figure>

<p>（1）复制操作</p>
<p>复制时，先选中文本，然后调用 document.execCommand(‘copy’)，选中的文本就会进入剪贴板。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inputElement = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#input&quot;</span>);</span><br><span class="line">inputElement.select();</span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">&quot;copy&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>上面示例中，脚本先选中输入框 inputElement 里面的文字（inputElement.select()），然后 document.execCommand(‘copy’)将其复制到剪贴板。</p>
<p>注意，复制操作最好放在事件监听函数里面，由用户触发（比如用户点击按钮）。如果脚本自主执行，某些浏览器可能会报错。</p>
<p>（2）粘贴操作</p>
<p>粘贴时，调用 document.execCommand(‘paste’)，就会将剪贴板里面的内容，输出到当前的焦点元素中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pasteText = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#output&quot;</span>);</span><br><span class="line">pasteText.focus();</span><br><span class="line"><span class="built_in">document</span>.execCommand(<span class="string">&quot;paste&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>（3）缺点</p>
<p><code>Document.execCommand()</code>方法虽然方便，但是有一些缺点。</p>
<p>首先，它只能将选中的内容复制到剪贴板，无法向剪贴板任意写入内容。</p>
<p>其次，它是同步操作，如果复制/粘贴大量数据，页面会出现卡顿。有些浏览器还会跳出提示框，要求用户许可，这时在用户做出选择前，页面会失去响应。</p>
<p>为了解决这些问题，浏览器厂商提出了异步的 Clipboard API。</p>
<p>二、异步 <code>Clipboard</code> API<br>Clipboard API 是下一代的剪贴板操作方法，比传统的 document.execCommand()方法更强大、更合理。</p>
<p>它的所有操作都是异步的，返回 Promise 对象，不会造成页面卡顿。而且，它可以将任意内容（比如图片）放入剪贴板。</p>
<p><code>navigator.clipboard</code>属性返回 Clipboard 对象，所有操作都通过这个对象进行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clipboardObj = navigator.clipboard;</span><br></pre></td></tr></table></figure>

<p>如果 navigator.clipboard 属性返回 undefined，就说明当前浏览器不支持这个 API。</p>
<p>由于用户可能把敏感数据（比如密码）放在剪贴板，允许脚本任意读取会产生安全风险，所以这个 API 的安全限制比较多。</p>
<p>首先，Chrome 浏览器规定，只有 <code>HTTPS</code> 协议的页面才能使用这个 API。不过，开发环境（localhost）允许使用非加密协议。</p>
<p>其次，调用时需要明确获得用户的许可。权限的具体实现使用了 Permissions API，跟剪贴板相关的有两个权限：clipboard-write（写权限）和 clipboard-read（读权限）。<br>“写权限”自动授予脚本，而”读权限”必须用户明确同意给予。</p>
<p>也就是说，写入剪贴板，脚本可以自动完成，但是读取剪贴板时，浏览器会弹出一个对话框，询问用户是否同意读取。`</p>
<p>另外，需要注意的是，脚本读取的总是当前页面的剪贴板。这带来的一个问题是，如果把相关的代码粘贴到开发者工具中直接运行，可能会报错，因为这时的当前页面是开发者工具的窗口，而不是网页页面。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> navigator.clipboard.readText();</span><br><span class="line">  <span class="built_in">console</span>.log(text);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>如果你把上面的代码，粘贴到开发者工具里面运行，就会报错。因为代码运行的时候，开发者工具窗口是当前页，这个页面不存在 Clipboard API 依赖的 DOM 接口。一个解决方法就是，相关代码放到 setTimeout()里面延迟运行，在调用函数之前快速点击浏览器的页面窗口，将其变成当前页。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> navigator.clipboard.readText();</span><br><span class="line">  <span class="built_in">console</span>.log(text);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>上面代码粘贴到开发者工具运行后，快速点击一下网页的页面窗口，使其变为当前页，这样就不会报错了。</p>
<p>三、Clipboard 对象<br>Clipboard 对象提供了四个方法，用来读写剪贴板。它们都是异步方法，返回 Promise 对象。</p>
<p>4.1 Clipboard.readText()<br>Clipboard.readText()方法用于复制剪贴板里面的文本数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> navigator.clipboard.readText();</span><br><span class="line">  <span class="built_in">console</span>.log(text);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上面示例中，用户点击页面后，就会输出剪贴板里面的文本。注意，浏览器这时会跳出一个对话框，询问用户是否同意脚本读取剪贴板。</p>
<p>如果用户不同意，脚本就会报错。这时，可以使用 try…catch 结构，处理报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getClipboardContents</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> navigator.clipboard.readText();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Pasted content: &quot;</span>, text);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;Failed to read clipboard contents: &quot;</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.2 Clipboard.read()<br>Clipboard.read()方法用于复制剪贴板里面的数据，可以是文本数据，也可以是二进制数据（比如图片）。该方法需要用户明确给予许可。</p>
<p>该方法返回一个 Promise 对象。一旦该对象的状态变为 resolved，就可以获得一个数组，每个数组成员都是 ClipboardItem 对象的实例。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getClipboardContents</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> clipboardItems = <span class="keyword">await</span> navigator.clipboard.read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> clipboardItem <span class="keyword">of</span> clipboardItems) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> type <span class="keyword">of</span> clipboardItem.types) &#123;</span><br><span class="line">        <span class="keyword">const</span> blob = <span class="keyword">await</span> clipboardItem.getType(type);</span><br><span class="line">        <span class="built_in">console</span>.log(URL.createObjectURL(blob));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err.name, err.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ClipboardItem 对象表示一个单独的剪贴项，每个剪贴项都拥有 ClipboardItem.types 属性和 ClipboardItem.getType()方法。</p>
<p>ClipboardItem.types 属性返回一个数组，里面的成员是该剪贴项可用的 MIME 类型，比如某个剪贴项可以用 HTML 格式粘贴，也可以用纯文本格式粘贴，那么它就有两个 MIME 类型（text/html 和 text/plain）。</p>
<p>ClipboardItem.getType(type)方法用于读取剪贴项的数据，返回一个 Promise 对象。该方法接受剪贴项的 MIME 类型作为参数，返回该类型的数据，该参数是必需的，否则会报错。</p>
<p>4.3 Clipboard.writeText()<br>Clipboard.writeText()方法用于将文本内容写入剪贴板。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(</span><br><span class="line">‘click’,</span><br><span class="line"><span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line"><span class="keyword">await</span> navigator.clipboard.writeText(‘Yo’)</span><br><span class="line">&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>上面示例是用户在网页点击后，脚本向剪贴板写入文本数据。</p>
<p>该方法不需要用户许可，但是最好也放在 try…catch 里面防止报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">copyPageUrl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> navigator.clipboard.writeText(location.href);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Page URL copied to clipboard&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;Failed to copy: &quot;</span>, err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.4 Clipboard.write()<br>Clipboard.write()方法用于将任意数据写入剪贴板，可以是文本数据，也可以是二进制数据。</p>
<p>该方法接受一个 ClipboardItem 实例作为参数，表示写入剪贴板的数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> imgURL = <span class="string">&quot;https://dummyimage.com/300.png&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> fetch(imgURL);</span><br><span class="line">  <span class="keyword">const</span> blob = <span class="keyword">await</span> data.blob();</span><br><span class="line">  <span class="keyword">await</span> navigator.clipboard.write([</span><br><span class="line">    <span class="keyword">new</span> ClipboardItem(&#123;</span><br><span class="line">      [blob.type]: blob,</span><br><span class="line">    &#125;),</span><br><span class="line">  ]);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Image copied.&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(err.name, err.message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面示例中，脚本向剪贴板写入了一张图片。注意，Chrome 浏览器目前只支持写入 PNG 格式的图片。</p>
<p>ClipboardItem()是浏览器原生提供的构造函数，用来生成 ClipboardItem 实例，它接受一个对象作为参数，该对象的键名是数据的 MIME 类型，键值就是数据本身。</p>
<p>下面的例子是将同一个剪贴项的多种格式的值，写入剪贴板，一种是文本数据，另一种是二进制数据，供不同的场合粘贴使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> image = <span class="keyword">await</span> fetch(‘kitten.png’);</span><br><span class="line"><span class="keyword">const</span> text = <span class="keyword">new</span> Blob([‘Cute sleeping kitten’], &#123;<span class="attr">type</span>: ‘text/plain’&#125;);</span><br><span class="line"><span class="keyword">const</span> item = <span class="keyword">new</span> ClipboardItem(&#123;</span><br><span class="line">‘text/plain’: text,</span><br><span class="line">‘image/png’: image</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">await</span> navigator.clipboard.write([item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>五、copy 事件，cut 事件<br>用户向剪贴板放入数据时，将触发 copy 事件。</p>
<p>下面的示例是将用户放入剪贴板的文本，转为大写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.source&quot;</span>);</span><br><span class="line"></span><br><span class="line">source.addEventListener(<span class="string">&quot;copy&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> selection = <span class="built_in">document</span>.getSelection();</span><br><span class="line">  event.clipboardData.setData(<span class="string">&quot;text/plain&quot;</span>, selection.toString().toUpperCase());</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上面示例中，事件对象的 clipboardData 属性包含了剪贴板数据。它是一个对象，有以下属性和方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Event.clipboardData.setData(type, data)：修改剪贴板数据，需要指定数据类型。</span><br><span class="line">Event.clipboardData.getData(type)：获取剪贴板数据，需要指定数据类型。</span><br><span class="line">Event.clipboardData.clearData([type])：清除剪贴板数据，可以指定数据类型。如果不指定类型，将清除所有类型的数据。</span><br><span class="line">Event.clipboardData.items：一个类似数组的对象，包含了所有剪贴项，不过通常只有一个剪贴项。</span><br></pre></td></tr></table></figure>

<p>下面的示例是拦截用户的复制操作，将指定内容放入剪贴板。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clipboardItems = [];</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(‘copy’, <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">e.preventDefault();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">let</span> clipboardItems = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> e.clipboardData.items) &#123;</span><br><span class="line"><span class="keyword">if</span> (!item.type.startsWith(‘image/’)) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">clipboardItems.push(</span><br><span class="line"><span class="keyword">new</span> ClipboardItem(&#123;</span><br><span class="line">[item.type]: item,</span><br><span class="line">&#125;)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">await</span> navigator.clipboard.write(clipboardItems);</span><br><span class="line"><span class="built_in">console</span>.log(‘Image copied.’);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line"><span class="built_in">console</span>.error(err.name, err.message);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上面示例中，先使用 e.preventDefault()取消了剪贴板的默认操作，然后由脚本接管复制操作。</p>
<p>cut 事件则是在用户进行剪切操作时触发，它的处理跟 copy 事件完全一样，也是从 Event.clipboardData 属性拿到剪切的数据。</p>
<p>六、paste 事件<br>用户使用剪贴板数据，进行粘贴操作时，会触发 paste 事件。</p>
<p>下面的示例是拦截粘贴操作，由脚本将剪贴板里面的数据取出来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&quot;paste&quot;</span>, <span class="keyword">async</span> (e) =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  <span class="keyword">const</span> text = <span class="keyword">await</span> navigator.clipboard.readText();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Pasted text: &quot;</span>, text);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>一、原理：<br>利用 input 框的 .select() 事件选中需要复制的文本。<br>利用 document.execCommand(“copy”) 来将文字复制到剪切板中。【MDN 已废弃,部分浏览器可使用】</p>
<h2 id="js-毫秒如何转时分秒"><a href="#js-毫秒如何转时分秒" class="headerlink" title="js 毫秒如何转时分秒"></a>js 毫秒如何转时分秒</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">formatDuring: <span class="function"><span class="keyword">function</span>(<span class="params">mss</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> days = <span class="built_in">parseInt</span>(mss / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> hours = <span class="built_in">parseInt</span>((mss % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> minutes = <span class="built_in">parseInt</span>((mss % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> seconds = (mss % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> days + <span class="string">&quot; 天 &quot;</span> + hours + <span class="string">&quot; 小时 &quot;</span> + minutes + <span class="string">&quot; 分钟 &quot;</span> + seconds + <span class="string">&quot; 秒 &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关闭页面发送请求"><a href="#关闭页面发送请求" class="headerlink" title="关闭页面发送请求"></a>关闭页面发送请求</h2><ul>
<li>同步 ajax</li>
</ul>
<p>在用户将页面完全关闭前，有时需要向后台传输一些必要数据（比如：用户行为分析数据）。为了避免数据丢失，一些网站会使用同步的 <code>XMLHttpRequest()</code> 请求，直到数据完全传递到服务器，再关闭页面。这种处理方式，可能会导致诸如页面延迟几秒后再关闭的糟糕体验，其实我们有更好的解决这类问题的方式。<br>XMLHttpRequest 规范提到 同步 XMLHttpRequest 已经计划从 Web 平台删除，开发者禁止将</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> XMLHttpRequest().open(method, url [, <span class="keyword">async</span> = <span class="literal">true</span> [, username = <span class="literal">null</span> [, password = <span class="literal">null</span>]]])</span><br></pre></td></tr></table></figure>

<p>方法中 async 参数赋值为 false 使用。Chrome 80 中迈出了第一步，开始禁止在如下这些事件处理器中使用同步 XMLHttpRequest：<code>beforeunload</code>、<code>unload</code>、<code>pagehide</code>、<code>visibilitychange</code>。Webkit 最近也有一个实现此行为的提交。</p>
<ul>
<li><code>fetch keepalive</code><br>Fetch API 提供了一套健壮的与服务器端交互的方式，提供了跨越不同平台 API 的一致接口。它提供了一个选项 <code>keepalive</code>，保证不管发送请求的页面关闭与否，请求都会持续直到结束。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;unload&#x27;</span>, &#123;</span><br><span class="line">  fetch(<span class="string">&#x27;/siteAnalytics&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: getStatistics(),</span><br><span class="line">    <span class="attr">keepalive</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fetch() 方法的优点是可以更好地控制发送到服务器的内容。fetch() 方法会返回一个 Promise 对象，resolve 值是 Response 对象。 本例中，我没有使用 fetch() 返回值做任何其他的事情，是因为这个请求发生在页面卸载之时，因此并不一定会保证执行。</p>
<ul>
<li>SendBeacon()</li>
</ul>
<p>SendBeacon() 方法底层的使用的是 Fetch API。这样就能明白为什么它也有 <code>64 KB</code> 的上传数据限制，也能明白为什么它还能在页面卸载后继续请求。它的主要优点是简单，只要用一行代码就能搞定。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;unload&#x27;</span>, &#123;</span><br><span class="line">  navigator.sendBeacon(<span class="string">&#x27;/siteAnalytics&#x27;</span>, getStatistics());<span class="comment">//post请求</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="v-for-遍历对象获取下标"><a href="#v-for-遍历对象获取下标" class="headerlink" title="v-for 遍历对象获取下标"></a>v-for 遍历对象获取下标</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v-<span class="keyword">for</span>=<span class="string">&quot;(value,key,index) in obj&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><ul>
<li>方法 1：先排序后去重</li>
</ul>
<p>1）对数组进行双重循环；如果外循环的值大于内循环的值；就利用第三方变量对其交换值 ；这儿也可以用 sort</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;); <span class="comment">// 排序</span></span><br></pre></td></tr></table></figure>

<p>2）当排序完成以后；再次循环进行比较相邻的两个值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">info</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; a.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (a[i] &gt; a[j]) &#123;</span><br><span class="line">        <span class="keyword">var</span> list = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = list;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; a.length; e++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a[e] != a[e + <span class="number">1</span>]) &#123;</span><br><span class="line">      arr.push(a[e]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> list = info(a);</span><br><span class="line"><span class="built_in">console</span>.log(list); <span class="comment">// 输出结果 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方法 2：indexOf 去重</li>
</ul>
<p>此去重主要是利用 indexOf 去查找是否有相同的值；如果没有就返回-1</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">info</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a.indexOf(arr[i]) == -<span class="number">1</span>) &#123;</span><br><span class="line">      a.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> list = info(a);</span><br><span class="line"><span class="built_in">console</span>.log(list); <span class="comment">// 输出结果 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方法 3：双重 for 循环去重</li>
</ul>
<p>这儿需要注意一点的就是内循环的时候不要 a.length-1；否则的话就会出现[1, 2, 3, 4, 5, 5]这个结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; a.length; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a[i] === a[j]) &#123;</span><br><span class="line">      a.splice(j, <span class="number">1</span>);</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 输出结果 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>方法 4：Set 去重<br>set 去重应该说是简单的去重方式了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> list = [...new <span class="built_in">Set</span>(a)];</span><br><span class="line"><span class="built_in">console</span>.log(list); <span class="comment">// 输出结果 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h2 id="判断是否是-pc-设备"><a href="#判断是否是-pc-设备" class="headerlink" title="判断是否是 pc 设备"></a>判断是否是 pc 设备</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsPC</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> userAgentInfo = navigator.userAgent;</span><br><span class="line">  <span class="built_in">console</span>.log(userAgentInfo);</span><br><span class="line">  <span class="keyword">var</span> Agents = [<span class="string">&quot;Android&quot;</span>, <span class="string">&quot;iPhone&quot;</span>, <span class="string">&quot;SymbianOS&quot;</span>, <span class="string">&quot;Windows Phone&quot;</span>, <span class="string">&quot;iPod&quot;</span>];</span><br><span class="line">  <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; Agents.length; v++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (userAgentInfo.indexOf(Agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      flag = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.screen.width &gt;= <span class="number">768</span>) &#123;</span><br><span class="line">    flag = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><p>列表数据转树型结构</p>
<p>话不多说，直接进入正题~<br>列表数据中字段如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;节点1&#x27;</span>,</span><br><span class="line">        <span class="attr">parentId</span>: <span class="number">0</span> <span class="comment">//这里用0表示为顶级节点</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;节点1_1&#x27;</span>,</span><br><span class="line">        <span class="attr">parentId</span>: <span class="number">1</span> <span class="comment">//通过这个字段来确定子父级</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>我们预期的结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;节点1&quot;</span>,</span><br><span class="line">    <span class="attr">parentId</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;节点1_1&quot;</span>,</span><br><span class="line">        <span class="attr">parentId</span>: <span class="number">1</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>先说一下实现的思路：<br>1、先把列表数据转成以 id 为 key，节点本身为 value 的对象 temp；<br>2、定义空列表 treeData，然后遍历 temp 对象<br>2-1、如果当前节点不是顶级节点（parentId 不为 0），那找到以 parentId 作为 key 的节点，并把当前节点 push 到该节点的 children 中；<br>2-2、如果当前节点是顶级节点，只需把该节点 push 到 treeData 中,当 temp 遍历结束后，treeData 就是最后的树型数据。</p>
<p>具体代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temp = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> treeData = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">  temp[data[i].id] = data[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> temp) &#123;</span><br><span class="line">  <span class="keyword">if</span> (temp[i].parentId != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!temp[temp[i].parentId].children) &#123;</span><br><span class="line">      temp[temp[i].parentId].children = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    temp[temp[i].parentId].children.push(temp[i]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    treeData.push(temp[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里特别说一下有个稍微底层一点的东东，也是该方法实现的关键所在。。<br>大家想一想，逐步跟一下这个过程，在遍历 temp 时，假如顶级节点 1 先被 push 到了 treeData 中，而后面又有子节点被添加到了节点 1 中，那么这个子节点最后能不能被带入到 treeData 中的节点 1 里呢？答案是可以的~为节点 1 本身是个 Object 对象，它指向了一个内存地址，而无论后续节点 1 怎么改变，被 push 到 treeData 中的节点 1 都会指向同一个地址，所以节点 1 被什么时候 push 都没有关系，最后就是完整的数据。</p>
<h2 id="前端实现吸顶的三种方式"><a href="#前端实现吸顶的三种方式" class="headerlink" title="前端实现吸顶的三种方式"></a>前端实现吸顶的三种方式</h2><ul>
<li><p>一、position: sticky<br>设置粘性定位并且添加某个方位才可生效，但是兼容性较差。</p>
</li>
<li><p>二、动态修改元素的 position<br>监听页面的滚动，比较 元素初始状态距离顶部的高度 offsetTop 与 页面此时的滚动高度 。当后者大于前者时，修改元素的 position 方式为 fixed。</p>
</li>
<li><p>三、障眼法<br>复制一个相同的元素，将其固定于顶部并让其先隐藏。<br>监听页面的滚动，比较 元素初始状态距离顶部的高度 offsetTop 与 页面此时的滚动高度 ，当后者数值大于前者数值时，原来的元素刚刚好触顶，且正与新元素的位置重合。<br>此时我们在监听方法中，让这个新元素显示。<br>当页面继续滚动的时候，原来的元素已经被滚上去了，而新的元素一直被固定在顶部并且此时已经显示出来，所以这个过程发生的时候，会让人有一种元素改变了定位方式的错觉。</p>
</li>
</ul>
<h2 id="如何强制完全重新加载-location-reload（true）已弃用"><a href="#如何强制完全重新加载-location-reload（true）已弃用" class="headerlink" title="如何强制完全重新加载,location.reload（true）已弃用"></a>如何强制完全重新加载,location.reload（true）已弃用</h2><p>由于该 forceReload 参数已被弃用，它也已经被一些浏览器忽略了。</p>
<p><code>location.reload();</code>如果您想执行强制重新加载（如使用 Ctrl+完成 F5）以便从服务器而不是浏览器缓存重新加载所有资源，则使用 only 不是解决方案。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//执行POST对当前位置的请求，因为这总是会使浏览器重新加载所有内容。</span></span><br><span class="line"><span class="comment">//location.reload()只是执行一个GET请求。于是，我来到了解决办法将一个空的形式对角应用与method=&quot;POST&quot;和action=&quot;https://example.org/&quot;，然后提交从代码隐藏表单想要当。</span></span><br><span class="line"><span class="function"><span class="title">forceReload</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(environment.production) &#123;</span><br><span class="line">        <span class="keyword">const</span> form = <span class="built_in">document</span>.createElement(<span class="string">&#x27;form&#x27;</span>);</span><br><span class="line">        form.method = <span class="string">&quot;POST&quot;</span>;</span><br><span class="line">        form.action = location.href;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(form);</span><br><span class="line">        form.submit();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//由于window.location.reload(true)已被弃用。您可以使用：</span></span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="built_in">window</span>.location.href,</span><br><span class="line"><span class="comment">//强制重新加载并清除缓存。</span></span><br></pre></td></tr></table></figure>

<h2 id="new-Date-的浏览器兼容性问题"><a href="#new-Date-的浏览器兼容性问题" class="headerlink" title="new Date()的浏览器兼容性问题"></a>new Date()的浏览器兼容性问题</h2><p>当我们需要将一串日期字符串转换为具体的 Date 格式的时候，往往需要用到 new Date(“xxxx”)方法。</p>
<p>当时在 IE、safari 浏览器下，会遇到这种问题：</p>
<p><code>new Date(&#39;2016-01-01 00:00:00&#39;)</code> //却返回这个值 Invalid Date，转换失败<br>但在 chrome、FF 返回的正确的结果，所以不同的浏览器还是存在差异的，以下列出了所有浏览器都支持的方式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2011</span>, <span class="number">01</span>, <span class="number">07</span>); <span class="comment">// yyyy, mm-1, dd</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2011</span>, <span class="number">01</span>, <span class="number">07</span>, <span class="number">11</span>, <span class="number">05</span>, <span class="number">00</span>); <span class="comment">// yyyy, mm-1, dd, hh, mm, ss</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;02/07/2011&quot;</span>); <span class="comment">// &quot;mm/dd/yyyy&quot;</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;02/07/2011 11:05:00&quot;</span>); <span class="comment">// &quot;mm/dd/yyyy hh:mm:ss&quot;</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1297076700000</span>); <span class="comment">// milliseconds</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&quot;Mon Feb 07 2011 11:05:00 GMT&quot;</span>); <span class="comment">// &quot;&quot;Day Mon dd yyyy hh:mm:ss GMT/UTC</span></span><br></pre></td></tr></table></figure>

<h2 id="js-时间戳转换成日期的方法"><a href="#js-时间戳转换成日期的方法" class="headerlink" title="js 时间戳转换成日期的方法"></a>js 时间戳转换成日期的方法</h2><p><code>(new Date(parseInt(n))).toLocaleDateString()</code></p>
<h2 id="封装一个获取时间的方法"><a href="#封装一个获取时间的方法" class="headerlink" title="封装一个获取时间的方法"></a>封装一个获取时间的方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gettime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">var</span> h = time.getHours();</span><br><span class="line">  h = h &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + h : h; <span class="comment">//小于10前面添加0</span></span><br><span class="line">  <span class="keyword">var</span> m = time.getMinutes();</span><br><span class="line">  <span class="keyword">var</span> s = getSeconds();</span><br><span class="line">  <span class="keyword">return</span> h + <span class="string">&quot;:&quot;</span> + m + <span class="string">&quot;:&quot;</span> + s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(gettime());</span><br></pre></td></tr></table></figure>

<h2 id="js-时分秒转化为秒"><a href="#js-时分秒转化为秒" class="headerlink" title="js 时分秒转化为秒"></a>js 时分秒转化为秒</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = <span class="string">&quot;00:02:10&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> hour = time.split[<span class="string">&quot;:&quot;</span>](<span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> min = time.split[<span class="string">&quot;:&quot;</span>](<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> sec = time.split[<span class="string">&quot;:&quot;</span>](<span class="number">2</span>);</span><br><span class="line">s = <span class="built_in">Number</span>(hour * <span class="number">3600</span>) + <span class="built_in">Number</span>(min * <span class="number">60</span>) + <span class="built_in">Number</span>(sec);</span><br><span class="line"><span class="built_in">console</span>.log(s); <span class="comment">//130</span></span><br></pre></td></tr></table></figure>

<h2 id="触发-input-file-的-click-事件"><a href="#触发-input-file-的-click-事件" class="headerlink" title="触发 input-file 的 click 事件"></a>触发 input-file 的 click 事件</h2><p><code>document.querySelector(&#39;#file&#39;).click()</code></p>
<h2 id="清空-input-file-值"><a href="#清空-input-file-值" class="headerlink" title="清空 input-file 值"></a>清空 input-file 值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.###</span></span><br><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">test.value = <span class="string">&quot;&quot;</span>; <span class="comment">//test的value不能设为有字符的值，但是可以设置为空值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.###</span></span><br><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">test.outerHTML = test.outerHTML; <span class="comment">//重新初始化了test的html</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/04/22/20-44-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/22/20-44-11/" class="post-title-link" itemprop="url">Webpack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-22 20:44:11" itemprop="dateCreated datePublished" datetime="2021-04-22T20:44:11+08:00">2021-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><p>是一种前端资源构建工具，一个静态模块打包器（module bundler）。在 webpack 看来，前端所有资源文件都会作为模块处理，它将根据模块的依赖关系进行静态分析，打包成对应的静态资源（bundle）。</p>
<h2 id="五个核心概念"><a href="#五个核心概念" class="headerlink" title="五个核心概念"></a>五个核心概念</h2><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>入口，指示 webpack 以哪个文件为入口起点开始打包，分析构建内部依赖图。</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>输出，指示 webpack 打包后的资源 bundles 输出到哪里去，以及如何命名</p>
<h3 id="Loader"><a href="#Loader" class="headerlink" title="Loader"></a>Loader</h3><p>让 webpack 能够去处理那些非 js 文件</p>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>用于执行范围更广的任务，如打包优化，压缩等</p>
<h3 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h3><p>指示 webpack 使用相应模式的配置</p>
<ul>
<li>development 本地开发模式</li>
</ul>
<p>会将<code>process.env.NODE_ENV</code>的值设为 development;启用 NamedChunksPlugin 和 NamedModulesPlugin</p>
<p>开发环境：<code>webpack ./src/index.js -o ./build/built.js --mode=development</code>;webpack 会以./src/index.js 为入口文件开始打包，输出到./build/built.js</p>
<ul>
<li>production 上线生产模式</li>
</ul>
<p>会将<code>process.env.NODE_ENV</code>的值设为 production;启用 FlagDependencyUsagePlugin,FlagIncludedChunksPlugin,ModuleConcatenationPlugin,NoEmitOnErrorsPlugin,OccurrenceOrderPlugin,SideEffectsFlagPlugin,UglifyJsPlugin；</p>
<p>生产环境：<code>webpack ./src/index.js -o ./build/built.js --mode=production</code>;webpack 会以./src/index.js 为入口文件开始打包，输出到./build/built.js</p>
<ol>
<li>webpack 能处理 js/json 文件，不能处理 css、img 等其他文件</li>
<li>生产环境和开发环境会将 es6 模块化编译成浏览器能识别的模块化</li>
<li>生产环境比开发环境多一个压缩 js 代码的过程。</li>
</ol>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><ul>
<li>webpack.config.js</li>
</ul>
<p>webpack 配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用于拼接路径</span></span><br><span class="line"><span class="keyword">const</span> &#123;resolve&#125;=<span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//插件:需要下载</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin=<span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//webpack配置</span></span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="comment">//入口起点</span></span><br><span class="line"><span class="attr">entry</span>:<span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line"><span class="attr">output</span>:&#123;</span><br><span class="line"><span class="comment">//输出文件名</span></span><br><span class="line"><span class="attr">filename</span>:<span class="string">&#x27;built.js&#x27;</span></span><br><span class="line"><span class="comment">//输出路径</span></span><br><span class="line"><span class="attr">path</span>: resolve(__dirname,<span class="string">&#x27;build&#x27;</span>)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//loader配置</span></span><br><span class="line"><span class="attr">module</span>:&#123;</span><br><span class="line"><span class="attr">rules</span>:[ <span class="comment">//loader配置</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//匹配哪些文件</span></span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="comment">//使用哪些loader进行处理</span></span><br><span class="line">use:[</span><br><span class="line"><span class="comment">//use数组中loader执行顺序：从右到左，从下到上，依次执行。</span></span><br><span class="line"><span class="comment">//创建style标签，将js中的样式资源插入进行，添加到head中生效</span></span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line"><span class="comment">//将css文件变成commonjs模块加载到jsa中,里面内容是样式字符串</span></span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//匹配哪些文件</span></span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.less$/</span>,</span><br><span class="line"><span class="comment">//使用哪些loader进行处理</span></span><br><span class="line">use:[</span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line"><span class="comment">//将less文件编译成css文件,需要下载less-loader和less</span></span><br><span class="line"><span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//处理图片</span></span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.(jpg|png|gif)$/</span>,</span><br><span class="line"><span class="comment">//问题：处理不了html中的img图片</span></span><br><span class="line"><span class="comment">//使用一个loader</span></span><br><span class="line">loader:<span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line"><span class="attr">options</span>:&#123;</span><br><span class="line"><span class="attr">limit</span>:<span class="number">8</span>*<span class="number">1024</span>,  <span class="comment">//图片小于8kb,会被处理成base64，减少请求数量，减轻服务器压力，但图片体积会更大</span></span><br><span class="line"><span class="attr">esModule</span>:<span class="literal">false</span>,  <span class="comment">//关闭url-loader的es6模块化，使用commonjs解析，避免解析时出现[object Module]</span></span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;[hash:10].[ext]&#x27;</span>,  <span class="comment">//给图片重新命名，提取图片hash的前10位，扩展名为ext</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//处理html中的img图片（负责引入img,从而能被url-loader处理）</span></span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.html$/</span>,</span><br><span class="line">loader:<span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//打包其他资源</span></span><br><span class="line"><span class="attr">exclude</span>:<span class="regexp">/\.(css|js|html|less)$/</span>, <span class="comment">//排除css、js、html</span></span><br><span class="line">loader:<span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line"><span class="attr">opetions</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;[hash:10].[ext]&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//语法检查,只检查自己写的源代码，第三方的库是不用检查的，检查规则需要在package.json中的eslintConsig中设置</span></span><br><span class="line"><span class="comment">//需下载eslint-config-airbnb-base   eslint-plugin-import</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.js$/</span>,</span><br><span class="line">exclue:<span class="regexp">/node_modules/</span>,</span><br><span class="line">loader:<span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">options&#123;</span><br><span class="line"><span class="attr">fix</span>:<span class="literal">true</span> <span class="comment">//自动修复eslint的错误</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//js兼容处理：babel-loader   @babel/core    @babel/preset-env</span></span><br><span class="line"><span class="comment">//基本js兼容性处理--&gt;@babel/preset-env；只能转换基本语法，如promise不能转换</span></span><br><span class="line"><span class="comment">//全部js兼容性处理--&gt;@babel/polyfill；会将所有兼容性代码全部引入，体积太大</span></span><br><span class="line"><span class="comment">//按需加载--&gt;core-js</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">test</span>:<span class="regexp">/\.js$/</span>,</span><br><span class="line">exclude:<span class="regexp">/node_modules/</span>,</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当一个文件需要多个loader处理时，需要指定loader执行的先后顺序</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">enforce:<span class="string">&#x27;pre&#x27;</span>, <span class="comment">//优先执行</span></span><br><span class="line"><span class="attr">loader</span>:<span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line"><span class="attr">options</span>:&#123;</span><br><span class="line"><span class="comment">//预设：指示babel做怎样的兼容处理</span></span><br><span class="line"><span class="attr">presets</span>:[</span><br><span class="line"><span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//按需加载</span></span><br><span class="line"><span class="attr">useBuiltIns</span>:<span class="string">&#x27;usage&#x27;</span>,</span><br><span class="line"><span class="comment">///指定core-js版本</span></span><br><span class="line"><span class="attr">corejs</span>:&#123;</span><br><span class="line"><span class="attr">version</span>:<span class="number">3</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//指定兼容浏览器的版本</span></span><br><span class="line"><span class="attr">targets</span>:&#123;</span><br><span class="line"><span class="attr">chrome</span>:<span class="string">&#x27;60&#x27;</span>,</span><br><span class="line"><span class="attr">firefox</span>:<span class="string">&#x27;60&#x27;</span>,</span><br><span class="line"><span class="attr">edge</span>:<span class="string">&#x27;60&#x27;</span>,</span><br><span class="line"><span class="attr">ie</span>:<span class="string">&#x27;9&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">/*//第二种写法</span></span><br><span class="line"><span class="comment">rules:[</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">test:/\.css$/,</span></span><br><span class="line"><span class="comment">use:[</span></span><br><span class="line"><span class="comment">//取代style-loader,提取js中的css成单独文件</span></span><br><span class="line"><span class="comment">MiniCssExtractPlugin.loader,</span></span><br><span class="line"><span class="comment">&#x27;css-loader&#x27;,</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//css兼容性处理：帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</span></span><br><span class="line"><span class="comment">//需下载postcss-loader  postcss-preset-env</span></span><br><span class="line"><span class="comment">loader:&#x27;postcss-loader&#x27;,</span></span><br><span class="line"><span class="comment">options:&#123;</span></span><br><span class="line"><span class="comment">ident:&#x27;postcss&#x27;,</span></span><br><span class="line"><span class="comment">plugin:()=&gt;[require(&#x27;postcss-present-env&#x27;)()]</span></span><br><span class="line"><span class="comment">&#125;,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//plugin配置</span></span><br><span class="line"><span class="attr">plugins</span>:[</span><br><span class="line"></span><br><span class="line"><span class="comment">//html-webpack-plugin</span></span><br><span class="line"><span class="comment">//默认创建一个空的html，自动引入打包输出的所有文件</span></span><br><span class="line"><span class="comment">//需要有结构的html文件</span></span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line"><span class="comment">//复制‘./src/index.html’文件，并自动引入打包输出的所有文件资源</span></span><br><span class="line"><span class="attr">template</span>:<span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line"><span class="attr">minify</span>:&#123; <span class="comment">//压缩html代码</span></span><br><span class="line"><span class="attr">collapseWhitespace</span>:<span class="literal">true</span>, <span class="comment">//移除空格</span></span><br><span class="line"><span class="attr">removeComments</span>:<span class="literal">true</span>  <span class="comment">//移除注释</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//css兼容</span></span><br><span class="line"><span class="comment">new MiniCssExtratPlugin(&#123;</span></span><br><span class="line"><span class="comment">filename:&#x27;css/built.css&#x27;</span></span><br><span class="line"><span class="comment">&#125;),</span></span><br><span class="line"><span class="comment">//压缩css</span></span><br><span class="line"><span class="comment">new OptimizeCssAssetsWebpackPlugin()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">//模式</span></span><br><span class="line"><span class="attr">mode</span>:<span class="string">&#x27;development&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//开启服务器devSever,用于自动编译，自动打开浏览器，刷新浏览器，但只在内存中编译打包，不就有实际输出</span></span><br><span class="line"><span class="comment">//启动指令为：npx webpack-dev-server</span></span><br><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line"><span class="attr">contentBase</span>:resolve(__dirname,<span class="string">&#x27;build&#x27;</span>),</span><br><span class="line"><span class="comment">//启用gzip压缩</span></span><br><span class="line"><span class="attr">compress</span>:<span class="literal">true</span>,</span><br><span class="line"><span class="comment">//端口号</span></span><br><span class="line"><span class="attr">port</span>:<span class="number">3333</span>,</span><br><span class="line"><span class="comment">//自动打开浏览器</span></span><br><span class="line"><span class="attr">open</span>:<span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>package.json</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="string">&quot;browserslist&quot;</span>:&#123;  <span class="comment">//兼容的浏览器版本</span></span><br><span class="line"><span class="comment">//默认匹配生产环境，可通过修改process.env.NODE_ENV=developent来改变</span></span><br><span class="line"> <span class="attr">&quot;developent&quot;</span>:[</span><br><span class="line">  <span class="string">&quot;last 1 chrome version&quot;</span>,</span><br><span class="line">  <span class="string">&quot;last 1 firefox version&quot;</span>,</span><br><span class="line"> ],</span><br><span class="line"> <span class="attr">&quot;production&quot;</span>:[</span><br><span class="line">  <span class="string">&quot;&gt;0.2%&quot;</span>,</span><br><span class="line">  <span class="string">&quot;not dead&quot;</span>,</span><br><span class="line">  <span class="string">&quot;not op_mini all&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;eslintConfig&quot;</span>:&#123;</span><br><span class="line"><span class="attr">&quot;extends&quot;</span>:<span class="string">&quot;airbnb-base&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>index.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./index.css&quot;</span>;</span><br><span class="line"><span class="comment">//兼容js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@babel/polyfill&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="开发环境优化"><a href="#开发环境优化" class="headerlink" title="开发环境优化"></a>开发环境优化</h3><ul>
<li>打包构建速度</li>
</ul>
<p>HMR:模块热替换;当模块发生变化时，只会重新打包这个模块，而不是打包全部模块。</p>
<p>package.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">devServer:&#123;</span><br><span class="line">...</span><br><span class="line"><span class="comment">//开启HMR功能</span></span><br><span class="line">hot:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>样式文件:可以使用 hmr 功能：style-loader 内部实现了</li>
<li>js 文件：默认不能使用 hmr 功能,解决办法：修改 js 代码，添加支持 hmr 功能的代码，但只能处理非入口 js 文件的其他文件。<br>index.html</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&quot;./test.js&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;); <span class="comment">//监听test.js的变化，若变化则执行回调函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>html 文件：默认不能使用 hmr 功能,解决办法：修改 entry，将 html 文件引入</li>
</ul>
<p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="attr">entry</span>:[<span class="string">&#x27;./src/js/index.js&#x27;</span>,<span class="string">&#x27;./src/index.html&#x27;</span>],</span><br><span class="line"><span class="attr">output</span>:&#123;...&#125;,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>代码调试</li>
</ul>
<h3 id="生成环境优化"><a href="#生成环境优化" class="headerlink" title="生成环境优化"></a>生成环境优化</h3><ul>
<li>打包构建速度</li>
<li>代码运行的性能</li>
</ul>
<p>source-map:一种提供源代码到构建后代码映射的技术，用于检测源代码的错误<br>种类：</p>
<blockquote>
<p>内联和外部的区别：外部生成了文件而内联没有，内联的构建速度更快；</p>
</blockquote>
<ul>
<li>source-map:外部<br>错误代码准确信息和源代码的错误位置</li>
<li>inline-source-map:内联<br>只生成一个内联 source-map<br>错误代码的准确信息和源代码的错误位置</li>
<li>hidden-source-map:外部<br>错误代码的错误原因，但没有错误位置<br>不能追踪源代码错误，只能提示到构建后代码的错误位置</li>
<li>eval-source-map:内联<br>每一个文件都生成对应的 source-map，都在 eval</li>
<li>nosources-source-map:外部<br>错误代码的准确信息,但没有任何源代码信息</li>
<li>cheap-souce-map:外部<br>错误代码准确信息和源代码的错误位置,只能精确到行</li>
<li>cheap-module-souce-map:外部<br>错误代码准确信息和源代码的错误位置</li>
</ul>
<p>开发环境：速度快(eval&gt;inline&gt;cheap&gt;..)，调试友好(souce-map,cheap-module-souce-map,cheap-spuce-map)<br>所以应选择 eval-source-map/eval-cheap-module-souce-amp</p>
<p>生产环境：内联会让代码体积变大，所以不用内联，源代码要不要隐藏（nosource-source-map 全部隐藏，hidden-source-map 只隐藏源代码，会提示构建后代码错误信息）<br>所以选择 source-map/cheap-module-souce-map</p>
<h3 id="生成环境优化-2"><a href="#生成环境优化-2" class="headerlink" title="生成环境优化 2"></a>生成环境优化 2</h3><blockquote>
<p>soucemap 是需要的，soucemap 并不会影响运行时包体积，它只是个 souce mapping，在利用 sentry 等工具做错误监控时候如果没有 soucemap 将会陷入困境。换成非自家公司的 CDN 是一个极其危险的操作</p>
</blockquote>
<h4 id="1-生产环境关闭-productionSourceMap、css-sourceMap"><a href="#1-生产环境关闭-productionSourceMap、css-sourceMap" class="headerlink" title="1.生产环境关闭 productionSourceMap、css sourceMap"></a>1.生产环境关闭 productionSourceMap、css sourceMap</h4><p>众所周知，SourceMap 就是当页面出现某些错误，能够定位到具体的某一行代码，SourceMap 就是帮你建立这个映射关系的，方便代码调试。在生产环境中我们完全没必要开启这个功能（谁在生产环境调试代码？不会是你吧）<br>如下配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProduction = process.env.NODE_ENV === <span class="string">&quot;production&quot;</span>;</span><br><span class="line"><span class="comment">// 判断是否是生产环境</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">productionSourceMap</span>: !isProduction, <span class="comment">//关闭生产环境下的SourceMap映射文件</span></span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">sourceMap</span>: !isProduction, <span class="comment">// css sourceMap 配置</span></span><br><span class="line">    <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">      ...其它代码,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ...其它代码,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>此时再<code>npm run build</code> 打包，就会发现速度快了很多，体积瞬间只有几兆了！</p>
<h4 id="2-分析大文件，找出内鬼"><a href="#2-分析大文件，找出内鬼" class="headerlink" title="2.分析大文件，找出内鬼"></a>2.分析大文件，找出内鬼</h4><p>安装 <code>npm install webpack-bundle-analyzer -D</code> 插件，打包后会生产一个本地服务，清楚的展示打包文件的包含关系和大小。</p>
<p>vue.config.js 配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).BundleAnalyzerPlugin</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">   ...其它</span><br><span class="line">   <span class="attr">configureWebpack</span>: [</span><br><span class="line">   plugins: [</span><br><span class="line">      <span class="keyword">new</span> BundleAnalyzerPlugin() <span class="comment">// 分析打包大小使用默认配置</span></span><br><span class="line">   ]</span><br><span class="line">  &#125;,</span><br><span class="line"> ...其它</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自动弹出一个服务，清晰的展示打包后 js 的文件大小,把必须要用的第三方 js 通过 cdn 的方式引用。<br>分析发现，elementui、echarts 是必须使用的，打包又耗时且页面加载也较慢得很。可以通过 cdn 直接引入，方便且速度快。</p>
<h4 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h4><p>element-ui 是我们项目用的主要框架，所以这个肯定是少不了，但是项目里面 ant-design 为什么会存在呢，原来是发现有个页面使用了 antd 的进度条组件，因为 elementui 的进度条不太好看。但是没想到这样把整个 antd 都导进来了。<br>方案：</p>
<ol>
<li>舍弃 antd 组件，自己去找一个类似的 vue 插件或者干脆自己实现一个。（这个方法短时间无法完成，且不想去动以前代码，暂不考虑）</li>
<li>使用 antd 部分加载。只加载想要的进度条组件，可以减少文件体积（这个方法简单粗暴，就是牺牲一些文件大小）。</li>
</ol>
<p>我们使用方案 2，根据 antd 官方的文档配置部分组件的引入。</p>
<p>安装 <code>npm install babel-plugin-import -D</code></p>
<p>第一步 main.js 导入需要的组件 Step</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Steps &#125; <span class="keyword">from</span> <span class="string">&quot;ant-design-vue&quot;</span>;</span><br><span class="line">Vue.component(Steps.name, Steps);</span><br><span class="line">Vue.component(Steps.Step.name, Steps.Step);</span><br></pre></td></tr></table></figure>

<p>第二步 babel.config.js 加上配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&quot;@vue/cli-plugin-babel/preset&quot;</span>],</span><br><span class="line">  <span class="comment">//以下是按需加载的配置++++</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;import&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&quot;ant-design-vue&quot;</span>,</span><br><span class="line">        <span class="attr">libraryDirectory</span>: <span class="string">&quot;es&quot;</span>,</span><br><span class="line">        <span class="attr">style</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>此时再分析，antd 已经小了很多。</p>
<h4 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h4><p>项目里面第三方 js 很多，有些打包下来会很大，而且加载速度较慢。我们把这些 js 分离出来，通过 cdn 的方式在 html 中的 script 标签中直接使用，一方面减少打包体积，一方面提高了加载速度。<br>这里推荐一个免费的 cdn: BootCDN。也可以使用自己购买的付费 cdn 服务，我们到网站搜索自己项目需要的 js。<br>第一步：配置 vue.config.js，让 webpack 不打包这些 js，而是通过 script 标签加入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isProduction = process.env.NODE_ENV === <span class="string">&quot;production&quot;</span>; <span class="comment">// 判断是否是生产环境</span></span><br><span class="line"><span class="comment">//正式环境不打包公共js</span></span><br><span class="line"><span class="keyword">let</span> externals = &#123;&#125;;</span><br><span class="line"><span class="comment">//储存cdn的文件</span></span><br><span class="line"><span class="keyword">let</span> cdn = &#123;</span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.0/theme-chalk/index.min.css&quot;</span>, <span class="comment">// element-ui css 样式表</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">js</span>: [],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//正式环境才需要</span></span><br><span class="line"><span class="keyword">if</span> (isProduction) &#123;</span><br><span class="line">  externals = &#123;</span><br><span class="line">    <span class="comment">//排除打包的js</span></span><br><span class="line">    <span class="attr">vue</span>: <span class="string">&quot;Vue&quot;</span>,</span><br><span class="line">    <span class="string">&quot;element-ui&quot;</span>: <span class="string">&quot;ELEMENT&quot;</span>,</span><br><span class="line">    <span class="attr">echarts</span>: <span class="string">&quot;echarts&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  cdn.js = [</span><br><span class="line">    <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.min.js&quot;</span>, <span class="comment">// vuejs</span></span><br><span class="line">    <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/element-ui/2.6.0/index.js&quot;</span>, <span class="comment">// element-ui js</span></span><br><span class="line">    <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/element-ui/2.6.0/locale/zh-CN.min.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/echarts/5.1.2/echarts.min.js&quot;</span>,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...其它配置</span></span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="comment">//常用的公共js 排除掉，不打包 而是在index添加cdn，</span></span><br><span class="line">    externals,</span><br><span class="line">    <span class="comment">//...其它配置</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//...其它配置</span></span><br><span class="line">    <span class="comment">// 注入cdn变量 (打包时会执行)</span></span><br><span class="line">    config.plugin(<span class="string">&quot;html&quot;</span>).tap(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">      args[<span class="number">0</span>].cdn = cdn; <span class="comment">// 配置cdn给插件</span></span><br><span class="line">      <span class="keyword">return</span> args;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//...其它配置</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>第二步：html 模板中加入定义好的 cdn 变量使用的代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>web<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入样式 --&gt;</span></span><br><span class="line">    &lt;% for(var css of htmlWebpackPlugin.options.cdn.css) &#123; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%=css%&gt;&quot;</span> /&gt;</span></span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 引入JS --&gt;</span></span><br><span class="line">    &lt;% for(var js of htmlWebpackPlugin.options.cdn.js) &#123; %&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%=js%&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以发现 cdn.js 中，我把 vue、echarts、element-ui 这三个大头加入了。在 externals 对象中左侧是 npm 包的名称，右侧是在代码中暴露的全局变量。注意 element-ui 对应的是 ELEMENT。</p>
<h4 id="懒加载的方式"><a href="#懒加载的方式" class="headerlink" title="懒加载的方式"></a>懒加载的方式</h4><p>没有使用 exclejs，是因为 exceljs 在我的业务代码中不是直接引用的，而是一个叫 table2excel 间接依赖的。所以就算我通过上面的方法排除掉它，在打包的时候还是会通过 table2excel 的依赖找到它并打包。<br>那这种不可避免的情况，该如何优化，让加载速度不受影响呢？</p>
<p>1.script 标签中注释掉 <code>import Table2Excel from &quot;table2excel.js&quot;;</code></p>
<p>2.下载的方法中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">download</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//使用import().then()方式</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&quot;table2excel.js&quot;</span>).then(<span class="function">(<span class="params">Table2Excel</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> Table2Excel.default(<span class="string">&quot;#table&quot;</span>).export(<span class="string">&#x27;filename&#x27;</span>) <span class="comment">//多了一层default</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样在进入系统时，不会加载 Table2Excel 和 exceljs，当需要时才会去加载，第一次会慢一点，后面就不需要加载了，会变快。</p>
<h4 id="moment-js-的优化"><a href="#moment-js-的优化" class="headerlink" title="moment.js 的优化"></a>moment.js 的优化</h4><p>我们发现 monentjs 在项目中有使用来对时间格式化，但是使用频率并不高，完全可以自己实现一个 format 方法，或者使用只有 6kb 的 day.js.</p>
<p>但这里我们暂不替换，把 moment 变得瘦小一些即可，删除掉除中文以外的语言包。<br>第一步：vue.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...其它配置</span></span><br><span class="line"><span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  config</span><br><span class="line">    .plugin(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line">    <span class="comment">//忽略/moment/locale下的所有文件</span></span><br><span class="line">    .use(<span class="keyword">new</span> webpack.IgnorePlugin(<span class="regexp">/^\.\/locale$/</span>, <span class="regexp">/moment$/</span>));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//...其它配置</span></span><br></pre></td></tr></table></figure>

<p>第二步：main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&quot;moment&quot;</span>; <span class="comment">//手动引入所需要的语言包</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;moment/locale/zh-cn&quot;</span>; <span class="comment">// 指定使用的语言</span></span><br><span class="line">moment.locale(<span class="string">&quot;zh-cn&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h4><p>通过 <code>compression-webpack-plugin</code> 插件把代码压缩为 gzip。但是！需要服务器支持<br>webpack 端 vue.config.js 配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打包压缩静态文件插件</span></span><br><span class="line"><span class="keyword">const</span> CompressionPlugin = <span class="built_in">require</span>(<span class="string">&quot;compression-webpack-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//...其它配置</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...其它配置</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//生产环境开启js\css压缩</span></span><br><span class="line">    <span class="keyword">if</span> (isProduction) &#123;</span><br><span class="line">      config.plugin(<span class="string">&quot;compressionPlugin&quot;</span>).use(</span><br><span class="line">        <span class="keyword">new</span> CompressionPlugin(&#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.(js)$/</span>, <span class="comment">// 匹配文件名</span></span><br><span class="line">          threshold: <span class="number">10240</span>, <span class="comment">// 对超过10k的数据压缩</span></span><br><span class="line">          <span class="attr">minRatio</span>: <span class="number">0.8</span>,</span><br><span class="line">          <span class="attr">deleteOriginalAssets</span>: <span class="literal">true</span>, <span class="comment">// 删除源文件</span></span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//...其它配置</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>服务器端配置这里就不详细说明了可以谷百： nginx 开启静态压缩 找到答案。</p>
<h2 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下loader只会匹配一个</span></span><br><span class="line"><span class="comment">//注意：不能有两个配置处理同一个类型文件</span></span><br><span class="line"><span class="attr">oneOf</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [...commonCssLoadder],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;&#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<hr>
<ol>
<li>webpack 打包后打开 index.html 无内容出现空白页面：修改 webpack 配置，在 util.js 中的<code>fallback:&#39;vue-style-loader&#39;,</code>下面增加 publicPath:’../../‘，修改 config/index.js，增加 build：{ assetsPublicPath:’./‘}。另外，！路由模式改为 hash 模式</li>
<li>界面正常显示但出现 cannot read property xxx of undefined（不能读取 xxx 属性）的问题：在渲染页面时，则会直接读取初始时的数据，若数据初始时为空，则容易出现错误。而请求是异步的，请求的数据会在页面首次渲染后才会发起</li>
</ol>
<ul>
<li>webpack 设置服务器代理在 config 目录下的 index.js 中配置</li>
</ul>
<ol>
<li>保留 eslint 的语法检测把不符合自己习惯的规则去掉，可配置文件在项目根目录里以 .eslintrc.* 命名的文件。关闭方法，则是把 build/webpack.base.conf.js 配置文件中的 eslint rules 注释掉即可</li>
</ol>
<h2 id="常用-Loader（高频）"><a href="#常用-Loader（高频）" class="headerlink" title="常用 Loader（高频）"></a>常用 Loader（高频）</h2><ul>
<li><p>raw-loader：加载文件原始内容（utf-8）</p>
</li>
<li><p>file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件 (处理图片和字体)</p>
</li>
<li><p>source-map-loader：加载额外的 Source Map 文件，以方便断点调试</p>
</li>
<li><p>svg-inline-loader：将压缩后的 SVG 内容注入代码中</p>
</li>
<li><p>image-loader：加载并且压缩图片文件</p>
</li>
<li><p>json-loader 加载 JSON 文件（默认包含）</p>
</li>
<li><p>babel-loader：把 ES6 转换成 ES5</p>
</li>
<li><p>ts-loader: 将 TypeScript 转换成 JavaScript</p>
</li>
<li><p>awesome-typescript-loader：将 TypeScript 转换成 JavaScript，性能优于 ts-loader</p>
</li>
<li><p>sass-loader：将 SCSS/SASS 代码转换成 CSS</p>
</li>
<li><p>css-loader：加载 CSS，支持模块化、压缩、文件导入等特性</p>
</li>
<li><p>style-loader：把 CSS 代码注入到 JavaScript 中，通过 DOM 操作去加载 CSS</p>
</li>
<li><p>postcss-loader：扩展 CSS 语法，使用下一代 CSS，可以配合 autoprefixer 插件自动补齐 CSS3 前缀</p>
</li>
<li><p>vue-loader：加载 Vue.js 单文件组件</p>
</li>
</ul>
<h2 id="常用的-Plugin"><a href="#常用的-Plugin" class="headerlink" title="常用的 Plugin"></a>常用的 Plugin</h2><ul>
<li><p>define-plugin：定义环境变量 (Webpack4 之后指定 mode 会自动配置)</p>
</li>
<li><p>ignore-plugin：忽略部分文件</p>
</li>
<li><p>html-webpack-plugin：简化 HTML 文件创建 (依赖于 html-loader)</p>
</li>
<li><p>web-webpack-plugin：可方便地为单页应用输出 HTML，比 html-webpack-plugin 好用</p>
</li>
<li><p>uglifyjs-webpack-plugin：不支持 ES6 压缩 (Webpack4 以前)</p>
</li>
<li><p>terser-webpack-plugin: 支持压缩 ES6 (Webpack4)</p>
</li>
<li><p>webpack-parallel-uglify-plugin: 多进程执行代码压缩，提升构建速度</p>
</li>
<li><p>mini-css-extract-plugin: 分离样式文件，CSS 提取为独立文件，支持按需加载 (替代 extract-text-webpack-plugin)</p>
</li>
<li><p>serviceworker-webpack-plugin：为网页应用增加离线缓存功能</p>
</li>
<li><p>clean-webpack-plugin: 目录清理</p>
</li>
</ul>
<h2 id="Loader-和-plugin-的区别"><a href="#Loader-和-plugin-的区别" class="headerlink" title="Loader 和 plugin 的区别"></a>Loader 和 plugin 的区别</h2><p>Loader 本质就是一个函数，在该函数中对接收到的内容进行转换，返回转换后的结果。 因为 Webpack 只认识 JavaScript，所以 Loader 就成了翻译官，对其他类型的资源进行转译的预处理工作。</p>
<p>Plugin 就是插件，基于事件流框架 Tapable，插件可以扩展 Webpack 的功能，在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</p>
<p>Loader 在 module.rules 中配置，作为模块的解析规则，类型为数组。每一项都是一个 Object，内部包含了 test(类型文件)、loader、options (参数)等属性。</p>
<p>Plugin 在 plugins 中单独配置，类型为数组，每一项是一个 Plugin 的实例，参数都通过构造函数传入</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/03/10/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/10/20-22-11/" class="post-title-link" itemprop="url">HTML超文本标记语言</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-10 20:22:11" itemprop="dateCreated datePublished" datetime="2021-03-10T20:22:11+08:00">2021-03-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTML-是用来描述网页的一种语言"><a href="#HTML-是用来描述网页的一种语言" class="headerlink" title="HTML 是用来描述网页的一种语言"></a>HTML 是用来描述网页的一种语言</h1><blockquote>
<p>Hyper text markup Language(超文本标记语言)<br>超文本：通过超链接将文字＼图片＼音频＼动画等各种信息组织在一起</p>
</blockquote>
<ul>
<li><p>w3c(world wide web consortium 万维网联盟)</p>
<ul>
<li>结构化标准语言(html,xml)</li>
<li>表现标准语言(css)</li>
<li>行为标准（dom,ecmaScript）</li>
</ul>
</li>
<li><p>emmet 语法：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">div*3快速生成3个</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">父子级关系：ul&gt;li 兄弟关系：div+p 生成带有类名的：.demo或#two</span><br><span class="line">有顺序的：加上$符号 在生成的标签内写内容：&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>浏览器内核（渲染引擎）:</li>
</ul>
<blockquote>
<p>对代码进行解析渲染</p>
</blockquote>
<table>
<thead>
<tr>
<th>浏览器</th>
<th>内核</th>
<th>说明｜</th>
</tr>
</thead>
<tbody><tr>
<td>IE</td>
<td>Trident</td>
<td>IE，猎豹，百度，360 浏览器</td>
</tr>
<tr>
<td>firefox</td>
<td>Gecko</td>
<td>火狐浏览器内核</td>
</tr>
<tr>
<td>safari</td>
<td>Webkit</td>
<td>苹果浏览器内核</td>
</tr>
<tr>
<td>chrome/Opera</td>
<td>Blink</td>
<td>Blink 也是 webkit 的分支</td>
</tr>
</tbody></table>
<h2 id="HTML-标签"><a href="#HTML-标签" class="headerlink" title="HTML 标签"></a>HTML 标签</h2><blockquote>
<p>HTML 标记标签通常被称为 HTML 标签 (HTML tag)。</p>
</blockquote>
<ul>
<li>HTML 标签是由尖括号包围的关键词，比如<code>&lt;html&gt;</code></li>
<li>HTML 标签通常是成对出现的，称为双标签,如<code>&lt;html&gt;</code> 和<code>&lt;/html&gt;</code>.也有单标签：<code>&lt;br/&gt;</code></li>
<li>标签对中的第一个标签是开始标签，第二个标签是结束标签</li>
<li>开始和结束标签也被称为开放标签和闭合标签</li>
<li>标签中的同名属性，后写的会失效</li>
</ul>
<p>网页结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--告诉浏览器使用什么规范．使用html5标准进行解析网页--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--网页头部--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--网页标题--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>base</li>
</ul>
<p><code>&lt;base href=&quot;&quot; target=&quot;_top&quot;&gt;</code>所有链接标签的默认链接</p>
<ul>
<li>meta 视口标签</li>
</ul>
<blockquote>
<p>常用于指定网页描述、关键词、作者、事件等<br>seo</p>
</blockquote>
<p><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0&quot;&gt;</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name=”viewport”</td>
<td>content=”width=(设置的是 viewport 宽度,可设置 device-width 特殊值),initial-scale=(初始缩放比，大于 0 的数字小于 10),maximum-scale=（最大缩放比，大于 0 的数字)，minimum-scale=(最小缩放比，大于 0 的数字)，user-scalable=(用户是否可以缩放)”</td>
</tr>
<tr>
<td>name=”http-equiv”</td>
<td>额外添加头部内容</td>
</tr>
<tr>
<td>http-equiv=”refresh”</td>
<td><code>content=&quot;10;url=http://xxx&quot;</code> 自动刷新</td>
</tr>
<tr>
<td>http-equiv=”X-UA-Compatible”</td>
<td><code>content=&quot;IE=edge&quot;</code> ie 兼容</td>
</tr>
<tr>
<td>charset=’UTF-8’</td>
<td>编码</td>
</tr>
<tr>
<td>name=”author”</td>
<td>content=”xxx,xxx,xx”网页作者</td>
</tr>
<tr>
<td>name=”copyright”</td>
<td>content=”2002-2022@版权”网页版权</td>
</tr>
<tr>
<td>name=”keywords”</td>
<td>content=”xxx,xxx,xx”网页关键词</td>
</tr>
<tr>
<td>name=”description”</td>
<td>content=”xxx,xxx,xx”网页描述</td>
</tr>
<tr>
<td>name=”robots”</td>
<td>content=”noindex | all”爬虫索引的范围</td>
</tr>
</tbody></table>
<h3 id="常用标签"><a href="#常用标签" class="headerlink" title="常用标签"></a>常用标签</h3><blockquote>
<p>块级元素：元素独占一行，标签体内几乎能写任何元素<br>行内标签：由内容撑开,不独占一行, 只能写行内元素,写块级元素<br>行内块元素：</p>
</blockquote>
<ul>
<li><p>标题标签:<code>&lt;h1&gt;----&lt;h6&gt;</code></p>
</li>
<li><p>段落标签：<code>&lt;p&gt;</code>标签体内不能写块元素,若写，会放到ｐ标签外面或脚手架报错</p>
</li>
<li><p>换行标签：<code>&lt;br /&gt;</code></p>
</li>
<li><p>分割线： <code>&lt;hr&gt;</code></p>
</li>
<li><p>保持原有格式显示：<code>&lt;pre&gt;&lt;/pre&gt;</code></p>
</li>
<li><p>字体：<code>&lt;h1&gt;这是1号标题&lt;/h1&gt; &lt;font size=&quot;6&quot;&gt;这是6号字体文本&lt;/font&gt; 可以使用font-family（字体），color（颜色），和font-size（字体大小）属性来定义字体的样式,使用 text-align（文字对齐）属性指定文本的水平与垂直对齐方式</code></p>
</li>
</ul>
<blockquote>
<p>嵌套问题：超链接不能嵌套超链接，p 标签不能嵌套 p 标签，；</p>
</blockquote>
<ul>
<li>内部样式表</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">当单个文件需要特别样式时，就可以使用内部样式表。你可以在<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  部分通过</span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml">    标签定义内部样式表:<span class="tag">&lt;<span class="name">head</span> &gt;</span> <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> &gt;</span><span class="css"> <span class="selector-tag">body</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">background-color</span>: yellow;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="selector-tag">p</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">color</span>: blue;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  </span></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>外部样式表</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">当样式需要被应用到很多页面的时候，外部样式表将是理想的选择。</span><br><span class="line">使用外部样式表，你就可以通过更改一个文件来改变整个站点的外观。</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--定义了文档与外部资源的关系--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mystyle.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>背景色属性:<code>&lt;p style=&quot;background-color:green;&quot;&gt;这是一个段落。&lt;/p&gt;</code></p>
</li>
<li><p>加粗：<code>&lt;strong&gt;或&lt;b&gt;</code></p>
</li>
<li><p>斜体：<code>&lt;em&gt;或&lt;i&gt;</code></p>
</li>
<li><p>下划线：<code>&lt;ins&gt;或&lt;u&gt;</code></p>
</li>
<li><p>删除线：<code>&lt;del&gt;或&lt;s&gt;</code></p>
</li>
<li><p>盒子: <code>&lt;div&gt;与&lt;span&gt;</code></p>
</li>
<li><p>图像标签和路径：<code>&lt;img src=&quot;图像路径&quot;/&gt;</code></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>图片路径</td>
</tr>
<tr>
<td>alt</td>
<td>图片不显示时提醒文字</td>
</tr>
<tr>
<td>title</td>
<td>图片文字提醒</td>
</tr>
<tr>
<td>border</td>
<td>边框</td>
</tr>
<tr>
<td>width,height</td>
<td>宽，高，只写其中一个，会等比例缩放另一个</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>图片分类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>webp</td>
<td>支持无损和有损压缩，有损压缩体积比 jpg 小 1/3 ，无损比 png 小 1/4,支持有损半透明，支持动图</td>
</tr>
<tr>
<td>jpg(jpeg)</td>
<td>有损压缩，支持的色彩丰富，占用空间小，不支持透明背景和动图</td>
</tr>
<tr>
<td>png</td>
<td>无损压缩，支持的色彩丰富，占用空间大，支持透明背景(0-256)，不支持动图</td>
</tr>
<tr>
<td>apng</td>
<td>无损压缩，支持的色彩丰富，占用空间大，支持透明背景(0-256)，支持动图</td>
</tr>
<tr>
<td>bmp</td>
<td>不支持压缩，支持的色彩丰富，占用空间极大，支持透明背景，不支持动图</td>
</tr>
<tr>
<td>gif</td>
<td>无损压缩， 仅支持 256 种颜色，支持简单透明背景(0,1bit)和动图</td>
</tr>
<tr>
<td>tif</td>
<td>支持保存图层，</td>
</tr>
<tr>
<td>avf</td>
<td>视频软件有损压缩产物，有损压缩体积比 jpg 小 1/2，打开速度慢,需解码</td>
</tr>
<tr>
<td>heif(heic)</td>
<td>收费，视频软件有损压缩产物，有损压缩体积比 jpg 小 1/2，打开速度慢,需解码</td>
</tr>
</tbody></table>
<ul>
<li><p>超链接标签: <code>&lt;a href=&quot;跳转目标(外连接如www.xxx.com，内链接如xxx.html,空链接:#，下载链接)&quot; target=&quot;弹出方式(_self在本窗口打开，_blank在新窗口打开,_top跳出弹窗,&quot; download=&quot;下载文件&quot;&gt;文本图像&lt;/a&gt;</code></p>
</li>
<li><p>锚点:</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#one&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;one&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>回到顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>刷新页面<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(999);&quot;</span>&gt;</span>执行脚本<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;tel:10010&quot;</span>&gt;</span>打电话<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:xxx@qq.com&quot;</span>&gt;</span>邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;sms:10086&quot;</span>&gt;</span>短信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>字符实体:</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>空格</td>
<td><code>&amp;nbsp;</code></td>
</tr>
<tr>
<td>小于号</td>
<td><code>&amp;lt;</code></td>
</tr>
<tr>
<td>大于号</td>
<td><code>&amp;gt;</code></td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td><code>&amp;amp;</code></td>
</tr>
<tr>
<td><code>￥</code></td>
<td><code>&amp;yen;</code></td>
</tr>
<tr>
<td>版权</td>
<td><code>&amp;copy;</code></td>
</tr>
<tr>
<td>乘号</td>
<td><code>&amp;times;</code></td>
</tr>
<tr>
<td>除号</td>
<td><code>&amp;divide;</code></td>
</tr>
</tbody></table>
<ul>
<li>表格标签：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--table标签的width和heigth是最小值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--定义表格标签,属性引号可要可不要--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">caption</span>&gt;</span><span class="tag">&lt;/<span class="name">caption</span>&gt;</span><span class="comment">&lt;!--表格标题--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">thead</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center|left|right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top|middle|bottom&quot;</span>&gt;</span><span class="comment">&lt;!--表格头部--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="comment">&lt;!--表头，td-&gt;th加粗文字--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="comment">&lt;!--列，必须嵌套在行中--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center|left|right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top|middle|bottom&quot;</span>&gt;</span><span class="comment">&lt;!--主体,tbody标签的height与thead、tfoot标签的height相加不能小于table标签的height--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">col</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span><span class="comment">&lt;!--第1列的宽度--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">col</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span><span class="comment">&lt;!--第2列的宽度--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">colgroup</span> <span class="attr">span</span>=<span class="string">&quot;6&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span><span class="comment">&lt;!--接下来6列合成一组，一起设置宽度--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span> <span class="comment">&lt;!--行--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="comment">&lt;!--合并单元格,需要删除多余的单元格--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">2</span>&quot;&gt;</span><span class="comment">&lt;!--合并行,需要在下面行中删除一个单元格--&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>  <span class="attr">align</span>=<span class="string">&quot;center|left|right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top|middle|bottom&quot;</span>&gt;</span> <span class="comment">&lt;!--设置行高，宽无法设置--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center|left|right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top|middle|bottom&quot;</span>&gt;</span> <span class="comment">&lt;!--设置列宽，一整列都一致变化,哪个大用哪个--&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">tfoot</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center|left|right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top|middle|bottom&quot;</span>&gt;</span><span class="comment">&lt;!--页脚--&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>sex<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>xiaomi<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>man<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>19<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>表格属性：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>align</td>
<td>left,center,right</td>
<td>表格相对周围元素的对齐方式</td>
</tr>
<tr>
<td>border</td>
<td>1 或”像素值”</td>
<td>边框</td>
</tr>
<tr>
<td>cellpadding</td>
<td>像素值</td>
<td>单元边沿与内容的的距离</td>
</tr>
<tr>
<td>cellspacing</td>
<td>像素值</td>
<td>单元格间的空白</td>
</tr>
<tr>
<td>width，height</td>
<td></td>
<td>高，宽</td>
</tr>
</tbody></table>
<ul>
<li><p>列表标签</p>
<ul>
<li>无序标签：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>去掉小圆点：<code>list-style:none</code></p>
<ul>
<li>有序标签：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>自定义列表：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>名词<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词解释<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词解释<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>分类<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>分类１<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>表单域：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span></span></span><br><span class="line"><span class="tag">  <span class="attr">action</span>=<span class="string">&quot;url地址(服务器程序的url地址)&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">method</span>=<span class="string">&quot;提交方式(get/post)&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">&quot;表单域名称&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  表单域控件</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>用<code>&lt;input type=&quot;sumit&quot; value=&quot;提交&quot; /&gt;</code>提交数据，用<code>&lt;input type=&quot;reset&quot; value=&quot;重置&quot; /&gt;</code>重置输入；input 必须放在 form 标签内才能提交，所有提交的数据必须有 name 属性；</p>
<ul>
<li><p>input 表单元素：<br><code>&lt;input type=&quot;属性值&quot; name=&quot;名称;单选按钮与复选框应是相同的name值&quot; value=&quot;规定input元素的值&quot; checked=&quot;首次加载时选中&quot; maxlength=&quot;输入字段的最大长度&quot; hidden readonly disabled placeholder=&quot;xx&quot; required pattern=&quot;[0-9]&quot;/&gt;</code></p>
</li>
<li><p>input 样式修改</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="comment">/*除边框：*/</span></span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  ouline: none;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*居中：*/</span></span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*隐藏radio的按钮:*/</span></span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>type 属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>button</td>
<td>按键</td>
</tr>
<tr>
<td>checkbox</td>
<td>定义复选框,name 写成同样的则为一组，值为 value。设置 checked 则默认选中</td>
</tr>
<tr>
<td>file</td>
<td>供文件上传</td>
</tr>
<tr>
<td>hidden</td>
<td>隐藏输入字段</td>
</tr>
<tr>
<td>image</td>
<td>图像形式提交按钮</td>
</tr>
<tr>
<td>password</td>
<td>密码字段</td>
</tr>
<tr>
<td>radio</td>
<td>定义单选按钮,name 写成同样的则为一组，值为 value,不写则为 on,设置 checked 则默认选中</td>
</tr>
<tr>
<td>reset</td>
<td>重置按钮,value 则为标签体的值,不能写 name</td>
</tr>
<tr>
<td>submit</td>
<td>提交按钮,value 则为标签体的值,不能写 name</td>
</tr>
<tr>
<td>text</td>
<td>输入字段，value 默认值，maxlength 最大长度</td>
</tr>
</tbody></table>
<ul>
<li>label 标签：用于绑定表单域，点击自动调整到输入框</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>for=&quot;sex&quot;&gt; 男\<span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>select:下拉列表</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">  /*至少包含一对option*/</span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>\<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>\<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  /*默认选中*/</span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span> \&gt;</span>xxx\<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>textarea:多行文本输入框</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;28&quot;</span>&gt;</span></span><br><span class="line">   /*cols:每行字符数； rows：行数*/</span><br><span class="line">内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>iframe</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mainFrame&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- name属性可以和超链接或表单的target配合用来显示不同内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;mainFrame&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">target</span>=<span class="string">&quot;mainFrame&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重置按钮&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>默认表达提交按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>&gt;</span>普通按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span>&lt;/iframe</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="HTML5-特性"><a href="#HTML5-特性" class="headerlink" title="HTML5 特性"></a>HTML5 特性</h3><h4 id="1-新增语义化标签"><a href="#1-新增语义化标签" class="headerlink" title="1.新增语义化标签"></a>1.新增语义化标签</h4><p>标签语义化指根据网页中的内容结构，选择适合的标签进行编写。</p>
<ul>
<li>布局标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>元素页面主内容之外的某些内容（比如侧栏）<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span>&gt;</span>定义文档中的节。<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span>定义 details 元素的可见标题。<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  定义用户能够查看或隐藏的额外细节。</span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>定义 figure 元素的标题。<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">  规定自包含内容，比如图示、图表、照片、代码清单等。</span><br><span class="line">  <span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sub</span>&gt;</span><span class="tag">&lt;/<span class="name">sub</span>&gt;</span>下标文字 <span class="tag">&lt;<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">sup</span>&gt;</span>上标文字 <span class="tag">&lt;<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">code</span>&gt;</span>代码块</span><br><span class="line">    <span class="tag">&lt;<span class="name">mark</span>&gt;</span> 定义重要的或强调的文本。<span class="tag">&lt;/<span class="name">mark</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--//文本注音--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ruby</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>汉<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rt</span>&gt;</span>han<span class="tag">&lt;/<span class="name">rt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ruby</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--进度条--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">progress</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meter</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--列表--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">datalist</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;xx&quot;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">meter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">meter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-新增多媒体标签"><a href="#2-新增多媒体标签" class="headerlink" title="2.新增多媒体标签"></a>2.新增多媒体标签</h4><ul>
<li><code>&lt;video&gt;</code></li>
</ul>
<p><code>&lt;video src=&quot;&quot; controls=&quot;controls&quot; &gt;&lt;/video&gt;</code></p>
<p>属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>autoplay</td>
<td>自动播放，谷歌默认禁止，可添加 muted 属性解决</td>
</tr>
<tr>
<td>controls</td>
<td>播放控件</td>
</tr>
<tr>
<td>width;height</td>
<td>宽高</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
<tr>
<td>preload</td>
<td>auto(加载视频);none(不加载);metadata(加载基本信息，如时长)</td>
</tr>
<tr>
<td>poster</td>
<td>imgurl(加载等待图片)</td>
</tr>
<tr>
<td>muted</td>
<td>静音播放</td>
</tr>
</tbody></table>
<ul>
<li><code>&lt;audio&gt;</code></li>
</ul>
<p><code>&lt;audio src=&quot;&quot; &gt;&lt;/audio&gt;</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>音频路径</td>
</tr>
<tr>
<td>muted</td>
<td>静音</td>
</tr>
<tr>
<td>autoplay</td>
<td>自动播放，谷歌根据媒体参与度来判断是否自动自动播放</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
<tr>
<td>preload</td>
<td>auto(加载视频);none(不加载);metadata(加载基本信息，如时长)</td>
</tr>
<tr>
<td>controls</td>
<td>播放控件</td>
</tr>
</tbody></table>
<h4 id="3-input-类型"><a href="#3-input-类型" class="headerlink" title="3.input 类型"></a>3.input 类型</h4><table>
<thead>
<tr>
<th>属性值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type=”email”</td>
<td>限制必须输入 email 类型</td>
</tr>
<tr>
<td>type=”number”</td>
<td>数字类型</td>
</tr>
<tr>
<td>type=”search”</td>
<td>搜索框</td>
</tr>
<tr>
<td>type=”ranger”</td>
<td>范围滑块</td>
</tr>
<tr>
<td>type=”color”</td>
<td>颜色</td>
</tr>
<tr>
<td>type=”tel”</td>
<td>手机号码</td>
</tr>
<tr>
<td>type=”date”</td>
<td>日期</td>
</tr>
<tr>
<td>type=”month”</td>
<td>月</td>
</tr>
<tr>
<td>type=”week”</td>
<td>周</td>
</tr>
<tr>
<td>type=”time”</td>
<td>时间</td>
</tr>
<tr>
<td>type=”datetime-local”</td>
<td>日期时间</td>
</tr>
<tr>
<td>maxlength=””</td>
<td>允许输入最大长度,不会提示</td>
</tr>
<tr>
<td>max</td>
<td>允许输入最大长度</td>
</tr>
<tr>
<td>min</td>
<td>允许输入最大长度</td>
</tr>
</tbody></table>
<h4 id="4-表单属性"><a href="#4-表单属性" class="headerlink" title="4.表单属性"></a>4.表单属性</h4><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>placeholder</td>
<td>提示文本</td>
</tr>
<tr>
<td>multiple</td>
<td>可多选文件提交</td>
</tr>
<tr>
<td>autofocus</td>
<td>自动聚焦</td>
</tr>
<tr>
<td>autocomplete</td>
<td>值为 on,off。只能用于 text 输入框. 记录输入历史</td>
</tr>
<tr>
<td>required</td>
<td>不能为空，必填</td>
</tr>
<tr>
<td>pattern</td>
<td>正则校验，不能用于 textarea,空输入不校验</td>
</tr>
</tbody></table>
<h3 id="5-canvas"><a href="#5-canvas" class="headerlink" title="5. canvas"></a>5. canvas</h3><p>使用 js 在网页上绘制图像<br><code>&lt;canvas id=&#39;&#39;  width=&#39;&#39; height=&#39;&#39;&gt;&lt;/canvas&gt;</code></p>
<h3 id="本地存储-localStorage"><a href="#本地存储-localStorage" class="headerlink" title="本地存储 localStorage"></a>本地存储 localStorage</h3><p>无时间限制，5M，只存储字符串</p>
<h3 id="地理定位-Geolocation"><a href="#地理定位-Geolocation" class="headerlink" title="地理定位 Geolocation"></a>地理定位 Geolocation</h3><h3 id="socket-通信：webscoket"><a href="#socket-通信：webscoket" class="headerlink" title="socket 通信：webscoket"></a>socket 通信：webscoket</h3><h3 id="后台-js：webworkers"><a href="#后台-js：webworkers" class="headerlink" title="后台 js：webworkers"></a>后台 js：webworkers</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/03/03/16-32-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/03/16-32-11/" class="post-title-link" itemprop="url">web前端开发技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-03 16:32:11" itemprop="dateCreated datePublished" datetime="2021-03-03T16:32:11+08:00">2021-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="web-前端开发技术的优化策略"><a href="#web-前端开发技术的优化策略" class="headerlink" title="web 前端开发技术的优化策略"></a>web 前端开发技术的优化策略</h2><p>网络页面的核心价值在于传递消费者所需要的信息并且以此来满足消费者相应的需求。而对于消费者和体验用户来说，网页加载的快慢直接影响了这个网页的访问量。如果用户在等待网站信息呈现的事件过长，很大程度上会对其消费体验造成一定影响，会造成用户无法将信息进行高效利用。基于这样的考虑，对 web 前端技术进行优化并体现信息的真正价值具有重要的意义。web 前端技术的优化对网络性能的改善、工作效率的提高都发挥着重要作用。可以从以下几个方面开展工作，对 web 前端技术进行优化：</p>
<ol>
<li><p>减少 HTTP 请求数<br>减少不必要的消耗时间的 Http 请求数，是 web 前端开发技术的一个重要方面。一个完整的 Http 包括 DNS 寻址、发送双方的数据、建立浏览器和服务器间的连接并传输数据、等待服务器响应等等多个环节。在这个过程中，每一个 Http 请求都必须携带数据，因此每一个请求都不免占用宽带资源，导致用户等待时间增加。要减少网页中 Http 的请求，经常被采用的方法有：将多个 CSS 文件或者 JavaScript 文件合并成一个；优化图片地图，在一个图像上划分不同区域以及注入不通过映射的链接；保持图片和文本一起显示和下载；通过利用 CSS background 进行背景图的绝对定位，这种做法可以提高网页的载入速度，提高用户的体验。</p>
</li>
<li><p>优化文件的规模<br>文件规模能对网页加载造成一定的影响 ，这个过程包括压缩 JavaScript 和 CSS 文件以及对相应的代码进行优化。优化代码的工作主要是删除一些不必要的 Html 标签，避免内联式和优化 CSS 代码。</p>
</li>
<li><p>减少 DNS 查找<br>DNS 查找的时间开销很大，这是国内许多网站的通病。在一次 DNS 的解析过程中会耗费 20~120ms，若 DNS 解析请求过于频繁，就会导致用户等待时间的增加，同时也会使信息传输的质量有所下降。并且在 DNS 查找结束前，浏览器将无法下载该域名下的任何东西。对于国内的站点来说，过多使用站外的 Widget（微件），也易引起 DNS 查找过多的问题。适当减少 DNS 查找能有效地提高网页地加载速度，对于 web 前端开发技术来说，DNS 查找的优化也非常重要。</p>
</li>
<li><p>杜绝无用响应<br>在用户访问网站的时候，常常会遇到无用响应，如 404 错误或拒绝访问错误，这是没有找到文件引起的。Http 请求耗费时间过长，而较长的等待时间却得到一个无用的响应页面，大大降低了用户体验。对页面的链接进行充分的测试加上对 web 服务器 Errorr 日志的不断跟踪能有效地减少 404 错误。大多时候，这种错误由于定位稍难而容易被技术人员忽略。</p>
</li>
<li><p>有效避免重定向<br>网页的重定向会耗费一定的时间，这也是造成用户等待时间过长的一个因素。重定向问题的产生有很多，每增加一次重定向就必然会增加一次对 web 的请求，所以重定向问题应该尽量避免。这要求技术人员能对 web 站点的子目录后加一个”/“，这种做法能有效避免重定向。</p>
</li>
<li><p>优化网页内容<br>CSS 的全称是层叠样式表，层叠表明后面的 CSS 可以覆盖前面的，高级的可以覆盖低级的，因此浏览器会在完全加载完后才考虑开展渲染工作。根据 CSS 这样的特性，要实现 web 的优化，可以考虑将样式表放在顶部。另外，可以将 script 放在底部，该举措是为了防止 script 脚本阻塞当前页面，从而造成下载速度较慢，页面的加载时间过长等问题的产生。</p>
</li>
</ol>
<h2 id="Web-实时推送技术"><a href="#Web-实时推送技术" class="headerlink" title="Web 实时推送技术"></a>Web 实时推送技术</h2><h3 id="一、双向通信"><a href="#一、双向通信" class="headerlink" title="一、双向通信"></a>一、双向通信</h3><p>HTTP 协议有一个缺陷：通信只能由客户端发起。举例来说，我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP 协议做不到服务器主动向客户端推送信息。这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。在 WebSocket 协议之前，有三种实现双向通信的方式：轮询（polling）、长轮询（long-polling）和 iframe 流（streaming）。</p>
<ol>
<li>轮询（polling）<br>轮询是客户端和服务器之间会一直进行连接，每隔一段时间就询问一次。其缺点也很明显：连接数会很多，一个接受，一个发送。而且每次发送请求都会有 Http 的 Header，会很耗流量，也会消耗 CPU 的利用率。</li>
</ol>
<ul>
<li>优点：实现简单，无需做过多的更改</li>
<li>缺点：轮询的间隔过长，会导致用户不能及时接收到更新的数据；轮询的间隔过短，会导致查询请求过多，增加服务器端的负担</li>
</ul>
<ol start="2">
<li>长轮询（long-polling）</li>
</ol>
<p>长轮询是对轮询的改进版，客户端发送 HTTP 给服务器之后，看有没有新消息，如果没有新消息，就一直等待。当有新消息的时候，才会返回给客户端。在某种程度上减小了网络带宽和 CPU 利用率等问题。由于 http 数据包的头部数据量往往很大（通常有 400 多个字节），但是真正被服务器需要的数据却很少（有时只有 10 个字节左右），这样的数据包在网络上周期性的传输，难免对网络带宽是一种浪费。</p>
<ul>
<li>优点：比 Polling 做了优化，有较好的时效性</li>
<li>缺点：保持连接会消耗资源; 服务器没有返回有效数据，程序超时。</li>
</ul>
<ol start="3">
<li>iframe 流（streaming）<br>iframe 流方式是在页面中插入一个隐藏的 iframe，利用其 src 属性在服务器和客户端之间创建一条长连接，服务器向 iframe 传输数据（通常是 HTML，内有负责插入信息的 javascript），来实时更新页面。</li>
</ol>
<ul>
<li>优点：消息能够实时到达；浏览器兼容好</li>
<li>缺点：服务器维护一个长连接会增加开销；IE、chrome、Firefox 会显示加载没有完成，图标会不停旋转。</li>
</ul>
<h3 id="二、WebSocket"><a href="#二、WebSocket" class="headerlink" title="二、WebSocket"></a>二、WebSocket</h3><ol>
<li>什么是 websocket<br>WebSocket 是一种全新的协议，随着 HTML5 草案的不断完善，越来越多的现代浏览器开始全面支持 WebSocket 技术了，它将 TCP 的 Socket（套接字）应用在了 webpage 上，从而使通信双方建立起一个保持在活动状态连接通道。</li>
</ol>
<p>一旦 Web 服务器与客户端之间建立起 WebSocket 协议的通信连接，之后所有的通信都依靠这个专用协议进行。通信过程中可互相发送 JSON、XML、HTML 或图片等任意格式的数据。由于是建立在 HTTP 基础上的协议，因此连接的发起方仍是客户端，而一旦确立 WebSocket 通信连接，不论服务器还是客户端，任意一方都可直接向对方发送报文。</p>
<p>初次接触 WebSocket 的人，都会问同样的问题：我们已经有了 HTTP 协议，为什么还需要另一个协议？</p>
<ol start="2">
<li>HTTP 的局限性<br>HTTP 是半双工协议，也就是说，在同一时刻数据只能单向流动，客户端向服务器发送请求(单向的)，然后服务器响应请求(单向的)。<br>服务器不能主动推送数据给浏览器。这就会导致一些高级功能难以实现，诸如聊天室场景就没法实现。</li>
<li>WebSocket 的特点<br>支持双向通信，实时性更强<br>可以发送文本，也可以发送二进制数据<br>减少通信量：只要建立起 WebSocket 连接，就希望一直保持连接状态。和 HTTP 相比，不但每次连接时的总开销减少，而且由于 WebSocket 的首部信息很小，通信量也相应减少了相对于传统的 HTTP 每次请求-应答都需要客户端与服务端建立连接的模式，WebSocket 是类似 Socket 的 TCP 长连接的通讯模式，一旦 WebSocket 连接建立后，后续数据都以帧序列的形式传输。在客户端断开 WebSocket 连接或 Server 端断掉连接前，不需要客户端和服务端重新发起连接请求。在海量并发和客户端与服务器交互负载流量大的情况下，极大的节省了网络带宽资源的消耗，有明显的性能优势，且客户端发送和接受消息是在同一个持久连接上发起，实时性优势明显。</li>
</ol>
<h3 id="三、Web-实时推送技术的比较"><a href="#三、Web-实时推送技术的比较" class="headerlink" title="三、Web 实时推送技术的比较"></a>三、Web 实时推送技术的比较</h3><p>方式类型技术实现优点缺点适用场景</p>
<ul>
<li>轮询 Pollingclient→server 客户端循环请求<br>1、实现简单<br>2、 支持跨域<br>1、浪费带宽和服务器资源<br>2、 一次请求信息大半是无用（完整 http 头信息）<br>3、有延迟<br>4、大部分无效请求适于小型应用</li>
<li>长轮询 Long-Pollingclient→server 服务器 hold 住连接，一直到有数据或者超时才返回，减少重复请求次数<br>1、实现简单<br>2、不会频繁发请求<br>3、节省流量<br>4、延迟低<br>1、服务器 hold 住连接，会消耗资源<br>2、一次请求信息大半是无用 WebQQ、Hi 网页版、Facebook</li>
<li>IM 长连接 iframeclient→server 在页面里嵌入一个隐蔵 iframe，将这个 iframe 的 src 属性设为对一个长连接的请求，服务器端就能源源不断地往客户端输入数据。<br>1、数据实时送达<br>2、不发无用请求，一次链接，多次“推送”<br>1、服务器增加开销<br>2、无法准确知道连接状态<br>3、IE、chrome 等一直会处于 loading 状态 Gmail 聊天</li>
<li>WebSocketserver⇌clientnew WebSocket()<br>1、支持双向通信，实时性更强<br>2、可发送二进制文件<br>3、减少通信量<br>1、浏览器支持程度不一致<br>2、不支持断开重连网络游戏、银行交互和支付</li>
</ul>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><blockquote>
<p>首次请求后保存一份请求资源的响应副本，当用户再次发起相同请求后，如果判断缓存命中则拦截请求，将之前存储的响应副本返回给用户，避免重新向服务器发起资源请求。<br>减少冗余数据传输，节省网络流量，减轻服务器压力，加快访问速度</p>
</blockquote>
<h3 id="强制缓存"><a href="#强制缓存" class="headerlink" title="强制缓存"></a>强制缓存</h3><p>不会向服务器发请求，而是直接从缓存中读取资源，在控制台中返回<code>200</code>状态码</p>
<p>响应头参数</p>
<ul>
<li><code>pragma</code>:<code>no-cache</code>;兼容 http 1.0</li>
<li><code>Expires</code>:兼容 http 1.0,响应头里的过期时间，若在这个时间内，则命中强缓存；（以分钟为单位，在服务端配置，当客户端和服务端时间不一致的时候会出现问题，优先级比<code>Cache-Control</code>低）</li>
<li><code>Cache-Control</code>:只兼容 http 1.1。是在服务器端配置的,<ul>
<li>当值为<code>max-age=300</code>时（以秒为单位），则代表这个请求正确返回时间的五分钟内再次加载资源，就会命中强缓存。等于 0 则不使用缓存</li>
<li>当为-<code>no-cache</code>时，表示不使用强缓存，需要使用协商缓存，先与服务器确认返回的响应是否被更改，如果之前的响应中存在 Etag，那么请求时会与服务端验证，如果资源未被更改，则可避免重复下载。</li>
<li>当为-<code>no-store</code>时，表示直接禁止浏览器缓存数据。</li>
<li>当为-<code>public</code>时，表示被所有的用户缓存，包括终端用户和 cdn 等中间代理服务器。</li>
<li>当为-<code>private</code>时，表示只能被终端用户缓存，不允许 cdn 等中继服务器对其缓存。</li>
</ul>
</li>
</ul>
<h3 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h3><p>在使用本地缓存前，需向服务器发送请求，服务器根据请求头的参数判断是否命中协商缓存，若命中，则返回<code>304</code>状态码并带上新的响应头通知浏览器从缓存中读取数据。协商缓存可以解决本地资源不更新的问题。</p>
<p>需设置<code>Cache-Control</code>为<code>no-cache</code></p>
<ul>
<li><p><code>Last-Modify</code>:浏览器第一次请求一个资源时，服务器返回的响应头会加上<code>Last-Modify</code>，其为一个时间标识，记录该资源最后修改的时间.</p>
</li>
<li><p><code>If-Modify-Since</code>:当浏览器再次请求同一个资源时，请求头会包含<code>If-Modify-Sine</code>，值为缓存之前返回的<code>Last—Modify</code>。服务器收到后根据当前资源修改的 时间判断是否命中缓存</p>
</li>
<li><p><code>Etag</code>:浏览器第一次请求一个资源时，服务器返回当前资源在服务器的唯一标识</p>
</li>
<li><p><code>If-None-Match</code>:再次请求时，若发现资源有 Etag 声明，则请求头会带上<code>If-None-Match</code>,值为<code>Etag</code>的值，服务器收到后进行比较来判断是否命中缓存。</p>
</li>
</ul>
<p>区别</p>
<ul>
<li>优先级上，<code>etag/if-none-match</code>更高</li>
<li>精度上<code>etag</code>要优于<code>last-modify</code>，<code>last-modify</code>单位为 s，使用它无法区分一秒内修改多次的情况。</li>
<li>性能上<code>etag</code>要逊于<code>last-modify</code>，<code>etag</code>需要服务器额外性能计算 hash 值。</li>
</ul>
<blockquote>
<p>ctrl+r/f5/地址栏刷新：强缓存和协商缓存都生效<br>ctrl+f5/ctrl+shift+r:全部失效，会重新请求资源并缓存<br>post 请求无法被缓存</p>
</blockquote>
<p>静态页面可通过配置 meta 标签设置缓存属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-Control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;max-age=3000&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="从输入-url-到页面完成加载发生了什么"><a href="#从输入-url-到页面完成加载发生了什么" class="headerlink" title="从输入 url 到页面完成加载发生了什么"></a>从输入 url 到页面完成加载发生了什么</h2><ul>
<li><p>DNS 解析：将域名解析成 IP 地址<br>DNS(domain name system，域名系统)：因特网上域名和 IP 地址相互映射的分布式数据库；简单理解就是域名与 IP 地址的对照表<br>URL(Uniform Resource Locator)，统一资源定位符，用于定位互联网上资源，俗称网址。<br>遵守以下的语法规则：<br><code>scheme://host.domain:port/path/filename</code></p>
</li>
<li><p>TCP 连接：TCP 三次握手<br>第一次握手，由浏览器发起，告诉服务器我要发送请求了；<br>第二次握手，由服务器发起，告诉浏览器我准备接受了，你赶紧发送吧。<br>第三次握手，由浏览器发送，告诉服务器，我马上就发了，准备接受吧。<br>“三次握手”的目的是“为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误”。</p>
</li>
<li><p>发送 HTTP 请求</p>
</li>
</ul>
<p>HTTP 请求报文格式：<code>请求行</code>+<code>请求头</code>+<code>空行</code>+<code>消息体</code>，请求行包括请求方式(GET/POST/DELETE/PUT)、请求资源路径(URL)、HTTP 版本号；</p>
<ul>
<li>服务器处理请求并返回 HTTP 报文</li>
</ul>
<p>服务器收到请求后会发出应答，即响应数据。HTTP 响应与 HTTP 请求相似， HTTP 响应报文格式：<code>状态行</code>+<code>响应头</code>+<code>空行</code>+<code>消息体</code>，状态行包括 HTTP 版本号、状态码、状态说明。</p>
<ul>
<li>浏览器解析渲染页面<br>浏览器拿到响应文本后，解析 HTML 代码，请求 js，css 等资源，最后进行页面渲染，呈现给用户。页面渲染一般分为以下几个步骤：</li>
</ul>
<p>(1)根据 HTML 文件解析出 DOM Tree</p>
<p>(2)根据 CSS 解析出 CSSOM Tree(CSS 规则树)</p>
<p>(3)将 DOM Tree 和 CSSOM Tree 合并，构建 Render tree(渲染树)</p>
<p>(4)reflow(重排)：根据 Render tree 进行节点信息计算(Layout)</p>
<p>(5)repaint(重绘)：根据计算好的信息绘制整个页面(Painting)</p>
<ul>
<li>连接结束：TCP 四次挥手</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、A——&gt;B ：A告诉B：“我发完了”；</span><br><span class="line"></span><br><span class="line">2、B——&gt;A：B告诉A：“好的，我知道你发完了”</span><br><span class="line"></span><br><span class="line">3、B——&gt;A：B告诉A：“我收完了”；</span><br><span class="line"></span><br><span class="line">4、A——&gt;B：A告诉B：“好的，我知道你发收完了”</span><br></pre></td></tr></table></figure>

<h2 id="重绘-和-重排（回流）"><a href="#重绘-和-重排（回流）" class="headerlink" title="重绘 和 重排（回流）"></a>重绘 和 重排（回流）</h2><blockquote>
<p>重绘不一定导致重排，但重排一定会导致重绘<br>重排（Reflow） &amp;&amp; 重绘（Redraw）会付出高昂的性能代价</p>
</blockquote>
<h3 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h3><p>重绘 （Redraw）：某些元素的外观被改变所触发的浏览器行为（重新计算节点在屏幕中的绝对位置并渲染的过程）； 例如：修改元素的填充颜色，会触发重绘；</p>
<p>下面情况会发生重绘：</p>
<ul>
<li>color</li>
<li>border-style</li>
<li>border-radius</li>
<li>text-decoration</li>
<li>box-shadow</li>
<li>outline</li>
<li>background</li>
<li>…</li>
</ul>
<h3 id="重排（回流）"><a href="#重排（回流）" class="headerlink" title="重排（回流）"></a>重排（回流）</h3><p>重排 （Reflow）：重新生成布局，重新排列元素（重新计算各节点和 css 具体的大小和位置：渲染树需要重新计算所有受影响的节点）；例如：改元素的宽高，会触发重排；<br>通过两者概念区别明显得知，重排要比重绘的成本大得多，我们应该尽量减少重排操作，减少页面性能消耗</p>
<ul>
<li>页面初始渲染，这是开销最大的一次重排;</li>
<li>添加/删除可见的 DOM 元素;</li>
<li>改变<code>元素位置</code>;</li>
<li>改变<code>元素尺寸</code>，比如边距、填充、边框、宽度和高度等;</li>
<li>改变<code>元素内容</code>，比如文字数量，图片大小等;</li>
<li>改变元素<code>字体大小</code>;</li>
<li>改变浏览器窗口尺寸，比如 resize 事件发生时;</li>
<li>激活<code>CSS伪类</code>（例如：:hover）;</li>
<li>设置 <code>style 属性</code>的值，因为通过设置 style 属性改变结点样式的话，每一次设置都会触发一次 reflow;</li>
<li>查询某些属性或调用某些计算方法：<code>offsetWidth</code>、<code>offsetHeigh</code>t 等，除此之外，当我们调用 getComputedStyl 方法，或者 IE 里的 currentStyle 时，也会触发重排，原理是一样的，都为求一个“即时性”和“准确性”;</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">width height margin padding</span><br><span class="line">display border-width border position</span><br><span class="line">overflow font-size vertical-align min-height</span><br><span class="line">clientWidth clientHeight clientTop clientLeft</span><br><span class="line">offsetWidth offsetHeight offsetTop offsetLeft</span><br><span class="line">scrollWidth scrollHeight scrollTop scrollLeft</span><br><span class="line">scrollIntoView() scrollTo() getComputedStyle()</span><br><span class="line">getBoundingClientRect() scrollIntoViewIfNeeded()</span><br></pre></td></tr></table></figure>

<h3 id="减少重排次数"><a href="#减少重排次数" class="headerlink" title="减少重排次数"></a>减少重排次数</h3><ul>
<li><p>样式集中改变<br>不要一条一条地修改 DOM 的样式。可以先定义好 css 的 class，然后修改 DOM 的 className。</p>
</li>
<li><p>分离读写操作<br>DOM 的多个读操作（或多个写操作），应该放在一起。不要两个读操作之间，加入一个写操作</p>
</li>
<li><p>将 DOM 离线<br>使用 display:none</p>
</li>
<li><p>使用 absolute 或 fixed 脱离文档流<br>为动画的 HTML 元件使用 fixed 或 absoult 的 position，那么修改他们的 CSS 是不会 reflow 的。</p>
</li>
</ul>
<h2 id="script-标签中-defer-和-async-的区别"><a href="#script-标签中-defer-和-async-的区别" class="headerlink" title="script 标签中 defer 和 async 的区别"></a>script 标签中 defer 和 async 的区别</h2><p>多个带 async 属性的标签，不能保证加载的顺序；多个带 defer 属性的标签，按照加载顺序执行;</p>
<ul>
<li>async 属性，表示后续文档的加载和执行与 js 脚本的加载和执行是并行进行的，即异步执行；</li>
<li>defer 属性，加载后续文档的过程和 js 脚本的加载(此时仅加载不执行)是并行进行的(异步)，js 脚本需要等到文档所有元素解析完成之后才执行，DOMContentLoaded 事件触发执行之前。</li>
</ul>
<h2 id="前端路由"><a href="#前端路由" class="headerlink" title="前端路由"></a>前端路由</h2><p>前端路由是指在浏览器端控制页面内容切换显示的机制。在没有服务器端参与的情况下，前端路由可以根据 URL 的变化，对应展现不同的内容，实现页面的“伪”跳转。在现代前端开发中，单页面应用（SPA）已成为一种常见的架构风格。与传统的多页面应用（MPA）相比，SPA 能够提供更加流畅的用户体验，因为它无需重新加载整个页面即可更新部分页面内容。</p>
<h3 id="路由的基本模式"><a href="#路由的基本模式" class="headerlink" title="路由的基本模式"></a>路由的基本模式</h3><ul>
<li>Hash 模式原理：<ul>
<li>浏览器原生支持通过 window.location.hash 读写 URL 中的 hash 值，并且当 hash 值变化时，页面不会触发重新加载。</li>
<li>SPA 可以监听 hashchange 事件，在 URL 的 hash 部分变化时根据定义好的路由映射关系来动态渲染内容。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Hash模式的简易实现</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;hashchange&quot;</span>, routeChange);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">routeChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> hash = <span class="built_in">window</span>.location.hash.slice(<span class="number">1</span>); <span class="comment">// Remove the &#x27;#&#x27; symbol</span></span><br><span class="line">  <span class="comment">// 基于hash值显示不同内容</span></span><br><span class="line">  routerView.innerHTML = routes[hash] ? routes[hash] : routes[<span class="string">&quot;404&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>History 模式原理：<ul>
<li>History API 允许 SPA 在浏览历史记录中添加、修改记录而不会触发页面加载。</li>
<li>通过 history.pushState 和 history.replaceState 可以改变 URL 且不重新加载页面。</li>
<li>SPA 可以监听 popstate 事件来响应浏览器前进、后退操作。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// History模式的简易实现</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;popstate&quot;</span>, routeChange);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">navigate</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  history.pushState(&#123;&#125;, <span class="string">&quot;&quot;</span>, path);</span><br><span class="line">  routeChange();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">routeChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> path = <span class="built_in">window</span>.location.pathname;</span><br><span class="line">  <span class="comment">// 根据pathname来渲染不同的页面组件</span></span><br><span class="line">  routerView.innerHTML = routes[path] ? routes[path] : routes[<span class="string">&quot;404&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// navigate(&#x27;/user&#x27;); // 导航至用户页面</span></span><br></pre></td></tr></table></figure>

<h3 id="前端路由的实现"><a href="#前端路由的实现" class="headerlink" title="前端路由的实现"></a>前端路由的实现</h3><p>在实际项目中，前端路由通常借助专业的路由库（如 react-router、vue-router 等）来实现。而且，需要考虑到如下两个常见问题的解决方案：</p>
<ul>
<li>路由懒加载：</li>
</ul>
<p>为了加快首次页面加载速度，可以将不同路由对应的组件分割成独立的代码块后懒加载，仅当路由被访问时才加载对应组件。</p>
<ul>
<li>路由的保护与权限控制：</li>
</ul>
<p>前端路由守卫提供了在路由跳转执行前后插入逻辑的能力，可用于权限验证、数据预加载、动画过渡等。</p>
<ol>
<li>使用路由导航钩子控制跳转流程，如进行权限校验。</li>
<li>结合状态管理和路由，在状态改变时同步 URL 变化，确保用户随时刷新页面或分享链接都能获得一致的界面状态。</li>
<li>利用<code>&lt;link rel=&quot;prefetch&quot;&gt;</code>或<code>import(/* webpackPrefetch: true */ &#39;./path/to/Component&#39;)</code>进行资源预获取，提高路由跳转的性能。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/02/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-11-33/" class="post-title-link" itemprop="url">Ant-Design</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:11:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="antd"><a href="#antd" class="headerlink" title="antd"></a>antd</h2><h3 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h3><ul>
<li>缺少 key，提示错误</li>
</ul>
<p>添加 rowkey 属性指定唯一 key</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Table</span> <span class="attr">rowkey</span>=<span class="string">&#123;</span>&#x27;<span class="attr">id</span>&#x27;&#125;&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Checkbox"><a href="#Checkbox" class="headerlink" title="Checkbox"></a>Checkbox</h3><ul>
<li>Checkbox.Group 初始值无效<br>useState()初始为空，Checkbox.Group 绑定后不再更新</li>
</ul>
<h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><ul>
<li>lazy<br>Suspense 中的 fallback 渲染的组件不能使用懒加载</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/02/12/20-10-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-10-33/" class="post-title-link" itemprop="url">AJax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:10:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:10:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>AJAX 全称为“Asynchronous JavaScript and XML”（异步 JavaScript 和 XML），是一种创建交互式网页应用的网页开发技术。通过在后台与服务器进行少量数据交换，Ajax 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。而传统的网页(不使用 Ajax)如果需要更新内容，必需重载整个网页面。<br>Ajax 的工作原理相当于在用户和服务器之间加了一个中间层(AJAX 引擎)，使用户操作与服务器响应异步化</p>
<blockquote>
<p><code>XMLHttpRequest</code>IE8 以下不兼容；IE8 以下声明 ajax 方法为<code>ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</code></p>
</blockquote>
<h2 id="AJAX-请求的五个步骤"><a href="#AJAX-请求的五个步骤" class="headerlink" title="AJAX 请求的五个步骤"></a>AJAX 请求的五个步骤</h2><ol>
<li><p>创建 ajax(XMLHttpRequest)对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">  xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>onreadystatechange</code>事件,设置回调函数,等待数据响应</p>
<p>发送请求将会收到响应，XHR 对象以下属性将会被填充上数据</p>
<table>
<thead>
<tr>
<th>readyState 属性</th>
<th>HTTP 请求状态</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>（请求还未初始化）还没调用 open（）方法</td>
</tr>
<tr>
<td>1</td>
<td>（已建立服务器链接）open() 方法已经被调用。未调用 send()方法。</td>
</tr>
<tr>
<td>2</td>
<td>（请求已接收）send() 方法已经被调用，并且头部和状态已经可获得</td>
</tr>
<tr>
<td>3</td>
<td>（正在处理请求）下载中；responseText 属性已经包含部分数据。</td>
</tr>
<tr>
<td>4</td>
<td>（完成）下载操作已完成。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>status</th>
<th>状态码英文名称</th>
<th>服务器（请求资源）的状态</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>OK</td>
<td>请求成功</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>无内容。服务器成功处理，但未返回内容。</td>
</tr>
<tr>
<td>206</td>
<td>Partial Content</td>
<td>是对资源某一部分的请求，服务器成功处理了部分 GET 请求，响应报文中包含由 Content-Range 指定范围的实体内容。</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
<td>永久性重定向。请求的资源已被永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新 URI。今后任何新的请求都应使用新的 URI 代替</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>临时性重定向。与 301 类似。但资源只是临时被移动。客户端应继续使用原有 URI</td>
</tr>
<tr>
<td>303</td>
<td>See Other</td>
<td>查看其它地址。与 302 类似。使用 GET 请求查看</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。</td>
</tr>
<tr>
<td>307</td>
<td>Temporary Redirect</td>
<td>临时重定向。与 302 类似。使用 GET 请求重定向，会按照浏览器标准，不会从 POST 变成 GET。</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>客户端请求报文中存在语法错误，服务器无法理解</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>请求要求用户的身份认证，通过 HTTP 认证（BASIC 认证，DIGEST 认证）的认证信息，若之前已进行过一次请求，则表示用户认证失败</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required</td>
<td>保留，将来使用</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>服务器理解请求客户端的请求，但是拒绝执行此请求</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>服务器无法根据客户端的请求找到资源</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>服务器内部错误，无法完成请求</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>服务器不支持请求的功能，无法完成请求</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>错误网关</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>由于超载或系统维护，服务器暂时的无法处理客户端的请求</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Time-out</td>
<td>网关超时</td>
</tr>
</tbody></table>
<p><code>responseText</code>:返回以文本形式存放的内容;<br><code>responseXML</code>:返回 XML 形式的内容,如果响应的内容类型是”text/xml”或”application/xml”，那就是包含响应数据的 XML DOM 文档。<br><code>statusText</code>：响应的 HTTP 状态描述</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">&quot;error:&quot;</span> + xhr.status);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>调用 open 方法与服务器建立链接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数： 请求方式 </span></span><br><span class="line"><span class="comment">第二个：url</span></span><br><span class="line"><span class="comment">第三个：是否异步，true异步，false同步</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">xhr.open(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;./1.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">xhr.open(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;./get.php?name=yyyy&amp;age=22&amp;password=342&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">xhr.open(<span class="string">&quot;post&quot;</span>, <span class="string">&quot;/test.php&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>调用 send 方法,向服务器发送数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//get方法,不需要传递参数</span></span><br><span class="line">xhr.send();</span><br><span class="line"></span><br><span class="line"><span class="comment">//post方法，将数据放在send()里提交</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>); <span class="comment">//发送表单数据</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/json; charset=utf-8&quot;</span>); <span class="comment">//发送json格式数据</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;text/plain;  charset=utf-8&quot;</span>); <span class="comment">//发送纯文本,不指定Content-type时直接默认值</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;text/html; charset=utf-8&quot;</span>); <span class="comment">//发送html文本</span></span><br><span class="line"><span class="comment">//设置请求头</span></span><br><span class="line">xhr.send(<span class="string">&quot;name=yyy&amp;age=33&amp;password=124564&quot;</span>); <span class="comment">//无需编码</span></span><br><span class="line"><span class="comment">//post没有缓存问题</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="传输格式"><a href="#传输格式" class="headerlink" title="传输格式"></a>传输格式</h3><ul>
<li><p>xml 数据<br>优点：种类丰富，传输量非常大<br>缺点：解析麻烦，不适合轻量数据</p>
</li>
<li><p>json 数据</p>
</li>
</ul>
<p>优点：轻量级数据，解析轻松<br>缺点：种类少，传输数据量少</p>
<p><code>JSON.parse();</code>:将 JSON 字符串转为一个对象。<br>你的字符串必须符合 JSON 格式，即键值都必须使用双引号包裹：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;[&quot;1&quot;,&quot;2&quot;]&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;[&#x27;1&#x27;,&#x27;2&#x27;]&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(a)); <span class="comment">// Array [1,2]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(b)); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<p><code>JSON.stringify();</code>:将 JavaScript 对象转换为 JSON 字符串</p>
<h3 id="ajax-只能下载同源的数据，跨源的数据禁止下载"><a href="#ajax-只能下载同源的数据，跨源的数据禁止下载" class="headerlink" title="ajax 只能下载同源的数据，跨源的数据禁止下载"></a>ajax 只能下载同源的数据，跨源的数据禁止下载</h3><blockquote>
<p>如果要请求的域和当前域是不同域，就叫跨域</p>
</blockquote>
<ul>
<li><p>同源策略</p>
<ol>
<li> 同协议</li>
<li> 同域名/IP</li>
<li> 同端口号</li>
</ol>
</li>
</ul>
<p>同源策略禁止跨源请求</p>
<ul>
<li>跨源方法：<ol>
<li> 修改 ajax 同源协议（不建议）</li>
<li> 委托 php 文件进行跨源</li>
<li> JSONP</li>
</ol>
</li>
</ul>
<h3 id="JSONP-跨域的使用流程"><a href="#JSONP-跨域的使用流程" class="headerlink" title="JSONP 跨域的使用流程"></a>JSONP 跨域的使用流程</h3><ol>
<li> 先去声明一个函数，这个函数有一个形参，这个形参会拿到我们想要下载的数据，</li>
<li> 在需要下载数据的时候，动态创建 script 标签，将标签 src 属性设置成下载数据的链接</li>
<li> 当 script 插入到页面的时候，就会调用号已经封装好的函数，将数据传过来</li>
</ol>
<p>index.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test.js&quot;</span>&gt;</span><span class="javascript"> <span class="comment">//浏览器一运行就会显示</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">//动态生成script标签</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">var</span> Obtn=<span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn1&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">Obtn.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">var</span> oScript=<span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>); <span class="comment">//创建script标签</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> oScript.src=<span class="string">&#x27;test.js&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="built_in">document</span>.body.appendChild(oScript);  <span class="comment">//插入到页面</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>test.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">download(<span class="string">&quot;hello!!!!!!!!!&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">data</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> oInfo=documenet.getElementById(<span class="string">&quot;oinfo&quot;</span>);</span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> oTi=..;</span></span><br><span class="line"><span class="javascript">   oInfo.innerHTML=<span class="string">`<span class="subst">$&#123;data.city&#125;</span>`</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> str=<span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span></span><br><span class="line"><span class="javascript">   str+=<span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="javascript">    &lt;tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="javascript">     &lt;td&gt;<span class="subst">$&#123;arr[i].data&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="javascript">    &lt;/tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="javascript">     `</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">   oTi.innerHTML=str;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">//动态生成script标签</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> Obtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn1&quot;</span>);</span></span><br><span class="line"><span class="javascript">    Obtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> oScript = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>); <span class="comment">//创建script标签</span></span></span><br><span class="line"><span class="javascript">      oScript.src = <span class="string">&quot;https:.....&amp;callback=download&quot;</span>;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.body.appendChild(oScript); <span class="comment">//插入到页面</span></span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h3><p>form 表单点击提交数据后需跳转页面，ajax 为异步进行的数据传输</p>
<ul>
<li>action:点击 submit 后跳转的 url</li>
<li>method:表单提交方式 get/post<ul>
<li>get(默认)<br>直接将数据拼接在 url 后面进行提交;用<code>？</code>进行拼接,多个数据之间用<code>&amp;</code>进行连接 - 优点：简单 - 缺点：不安全，最大 2kb，无法实现上传大文件</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;get.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>&quot;<span class="attr">submit</span>&quot;/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>post<br>通过浏览器内部进行提交<ul>
<li>优点：安全，上传大小无上限</li>
<li>缺点：比 get 复杂</li>
</ul>
</li>
</ul>
<p><code>enctype</code>提交数据的格式，默认<code>application/x-www-form-urlencoded</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span></span></span><br><span class="line"><span class="tag">  <span class="attr">action</span>=<span class="string">&quot;post.php&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">method</span>=<span class="string">&quot;post&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enctype</span>=<span class="string">&quot;application/x-www-from-urlencoded&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>&quot;<span class="attr">submit</span>&quot; <span class="attr">value</span>=<span class="string">&quot;post按钮&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">&#x27;content-type:text/html;charset=&quot;UTF-8&quot;&#x27;</span>);</span><br><span class="line"><span class="comment">//$_GET 全局关联数组 ；存放着get提交的所有数据</span></span><br><span class="line"><span class="comment">//$_POST全局数组，储存着post发送来的数据</span></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> (<span class="string">&quot;<span class="subst">&#123;$username&#125;</span>,$&#123;age&#125;,<span class="subst">&#123;$password&#125;</span>);</span></span><br><span class="line"><span class="string">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="comment">//连接数据库</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数：连接数据库的ip/域名</span></span><br><span class="line"><span class="comment">第二个参数：用户名</span></span><br><span class="line"><span class="comment">第三个参数：密码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$link</span>=mysql_connect(<span class="string">&quot;localhost&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$link</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span><span class="string">&quot;连接失败&quot;</span>;</span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置字符集</span></span><br><span class="line">mysql_set_charset(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line"><span class="comment">//选择数据库</span></span><br><span class="line">mysql_select_db(<span class="string">&quot;jjjj&quot;</span>);</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM students&quot;</span>;</span><br><span class="line"><span class="comment">//发送sql语句</span></span><br><span class="line"><span class="variable">$res</span>=mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment">//处理结果,全部获取</span></span><br><span class="line"><span class="variable">$arr</span>=<span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$row</span>=mysql_fetch_assoc(<span class="variable">$res</span>))&#123;</span><br><span class="line">array_push(<span class="variable">$arr</span>,<span class="variable">$row</span>);</span><br><span class="line">var_dump(<span class="variable">$row</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> json_encode(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">//关闭数据库</span></span><br><span class="line">mysql_close(<span class="variable">$link</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="post-put-patch-请求传参格式有-formData-形式-、query-形式-、JSON-形式三种"><a href="#post-put-patch-请求传参格式有-formData-形式-、query-形式-、JSON-形式三种" class="headerlink" title="post/put/patch 请求传参格式有 formData 形式 、query 形式 、JSON 形式三种"></a>post/put/patch 请求传参格式有 formData 形式 、query 形式 、JSON 形式三种</h2><h2 id="axios-设置-token-到请求头"><a href="#axios-设置-token-到请求头" class="headerlink" title="axios 设置 token 到请求头"></a>axios 设置 token 到请求头</h2><p>加一个 http request 拦截器；通过 window.localStorage.getItem(“accessToken”) 来获取 token 的 value；通过 config.headers.accessToken = token;将 token 放到请求头发送给服务器，放在请求头中</p>
<h2 id="form-表单提交是单向的"><a href="#form-表单提交是单向的" class="headerlink" title="form 表单提交是单向的"></a>form 表单提交是单向的</h2><h2 id="只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取-HTTP-应答包"><a href="#只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取-HTTP-应答包" class="headerlink" title="只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取 HTTP 应答包"></a>只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取 HTTP 应答包</h2><p>同源策略<br>跨域：浏览器允许向服务器发送跨域请求，从而克服 Ajax 只能同源使用的限制。</p>
<p>同源策略：如果两个页面的协议，域名,端口都相同，则两个页面具有相同的源。<br>同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源。这是一个用于隔离潜在恶意文件的重要安全机制。</p>
<p>不受同源策略限制的</p>
<p>页面中的链接，重定向以及表单提交是不会受到同源策略限制的。</p>
<p>跨域资源的引入是可以的。但是 js 不能读写加载的内容。如嵌入到页面中的<code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;，&lt;img&gt;，&lt;link&gt;，&lt;iframe&gt;</code>等。</p>
<p>受到限制的</p>
<p>Cookie、LocalStorage 和 IndexDB 无法读取<br>DOM 和 JS 对象无法获得<br>AJAX 请求不能发送<br>跨域解决方案<br>一、JSONP 跨域<br>jsonp 的核心原理就是：目标页面回调本地页面的方法,并带入参数<br>服务器端实现 JSONP 接口的步骤<br>服务器端获取客户端发送过来的 query 参数，其中参数有回调函数的名字<br>得到的数据，拼接出一个函数调用的字符串<br>把上一步拼接得到的字符串，响应给客户端的 <code>&lt;script&gt;</code> 标签进行解析执行<br>jsonp 的缺点：只能发送 get 一种请求。<br>1、原生 JS 实现<br>通过 script 标签 src 属性，发送带有 callback 参数的 GET 请求，服务端将接口返回数据拼凑到 callback 函数中，返回给浏览器，浏览器解析执行，从而前端拿到 callback 函数返回的数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://127.0.0.1:3000/web?cb=getData&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端 nodejs 代码<br>主要用来模拟服务器<br>携带参数必须是字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line">router.get(<span class="string">&quot;/web&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; cb &#125; = req.query;</span><br><span class="line">  <span class="built_in">console</span>.log(req.query);</span><br><span class="line">  <span class="keyword">var</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xtt&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&quot;女孩子&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 携带参数必须是字符串</span></span><br><span class="line">  res.send(<span class="string">`<span class="subst">$&#123;cb&#125;</span>(<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>)`</span>);</span><br><span class="line">  router.get(<span class="string">&quot;/que&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.send(<span class="string">`<span class="subst">$&#123;req.query.cb&#125;</span>(&#x27;dd&#x27;)`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<p>2、jquery Ajax 实现<br>以 jquery 来发起 jsonp 请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> url = <span class="string">&quot;http://127.0.0.1:3000/que?cb=getData&quot;</span>;</span></span><br><span class="line"><span class="javascript">  $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="javascript">    url,</span></span><br><span class="line"><span class="javascript">    <span class="attr">dataType</span>: <span class="string">&quot;jsonp&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(res);</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、Vue axios 实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">handleCallback(&#123; <span class="attr">success</span>: <span class="literal">true</span>, <span class="attr">user</span>: <span class="string">&quot;admin&quot;</span> &#125;);</span><br><span class="line"><span class="built_in">this</span>.$http = axios;</span><br><span class="line"><span class="built_in">this</span>.$http</span><br><span class="line">  .jsonp(<span class="string">&quot;&lt;http://127.0.0.1:3000/que?cb=getData&gt;&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">jsonp</span>: <span class="string">&quot;handleCallback&quot;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>二、跨域资源共享（CORS）<br>CORS 是一个 W3C 标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出 XMLHttpRequest 请求，从而克服了 AJAX 只能同源使用的限制。<br>CORS 需要浏览器和服务器同时支持。<br>目前，所有主流浏览器都支持该功能，IE10 以下不支持。<br>浏览器将 CORS 跨域请求分为：简单请求、非简单请求。<br>简单请求与非简单请求<br>简单请求<br>浏览器在发送跨域请求的时候，会先判断下是简单请求还是非简单请求，如果是简单请求，就先执行服务端程序，然后浏览器才会判断是否跨域。<br>同时满足以下的两个条件，就属于简单请求。浏览器对这两种的处理，是不一样的。</p>
<p>请求方式：get/post/head 其中一种<br>请求头设置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Accept</span><br><span class="line">Accept-Language</span><br><span class="line">Content-Type：application/x-www-form-urlencoded、multipart/form-data、text/plain（ 只限于三个值中的一个）</span><br></pre></td></tr></table></figure>

<p>详细描述<br>对于简单请求，浏览器直接发出 CORS 请求。具体来说，就是在头信息之中，增加一个 Origin 字段。<br>举例：</p>
<p>发起请求</p>
<p>自动在头信息之中，添加一个 Origin 字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET /cors HTTP/1.1</span><br><span class="line">Origin: &lt;http://127.0.0.1:8080&gt;</span><br><span class="line">Host: api.alice.com</span><br><span class="line">Accept-Language: en-US</span><br><span class="line">Connection: keep-alive</span><br><span class="line">User-Agent: Mozilla/5.0...</span><br><span class="line">Origin：本次请求来自哪个域（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求。</span><br></pre></td></tr></table></figure>

<p>服务器判断此次请求 Origin 源</p>
<p>不在许可范围内：服务器会返回一个正常的 HTTP 回应。<br>浏览器发现，这个回应的头信息没有包含 Access-Control-Allow-Origin 字段（详见下文），就知道出错了，从而抛出一个错误，被请求的异常回调函数捕获。<br>注意，这种错误无法通过状态码识别，因为 HTTP 回应的状态码有可能是 200。<br>在许可范围内：服务器返回的响应，会多出几个头信息字段。<br>有三个与 CORS 请求相关的字段，都以 Access-Control-开头。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: &lt;http://api.bob.com&gt;</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br><span class="line">Access-Control-Expose-Headers: FooBar</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure>

<p>Access-Control 解释</p>
<p>Access-Control-Allow-Origin：必须的</p>
<p>它的值要么是请求时 Origin 字段的值，要么是一个*，表示接受任意域名的请求。</p>
<p>Access-Control-Allow-Credentials：可选</p>
<p>布尔值，表示是否允许发送 Cookie。默认情况下，Cookie 不包括在 CORS 请求之中（为了降低 CSRF 攻击的风险。）。设为 true，即表示服务器明确许可，浏览器可以把 Cookie 包含在请求中，一起发给服务器。这个值也只能设为 true，如果服务器不要浏览器发送 Cookie，不发送该字段即可。</p>
<p>Access-Control-Expose-Headers：可选</p>
<p>CORS 请求时，XMLHttpRequest 对象的 getResponseHeader()方法只能拿到 6 个服务器返回的基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在 Access-Control-Expose-Headers 里面指定。上面的例子指定，getResponseHeader(‘FooBar’)可以返回 FooBar 字段的值。</p>
<p>非简单请求<br>对服务器提出特殊要求的请求，比如请求方法是 PUT 或 DELETE，或者 Content-Type 字段的类型是 application/json。</p>
<p>预检请求</p>
<p>非简单请求的 CORS 请求，会在正式通信之前，增加一次 HTTP 查询请求，称为“预检”请求（preflight）。<br>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP 方法和头信息字段。<br>只有得到肯定答复，浏览器才会发出正式的 XMLHttpRequest 请求，否则就报错。<br>这是为了防止这些新增的请求，对传统的没有 CORS 支持的服务器形成压力，给服务器一个提前拒绝的机会，这样可以防止服务器收到大量 DELETE 和 PUT 请求，这些传统的表单不可能跨域发出的请求<br>举例</p>
<p>自动发出一个“预检”请求，要求服务器确认可以这样请求。下面是这个“预检”请求的 HTTP 头信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /cors HTTP/1.1</span><br><span class="line">Origin: &lt;http://api.bob.com&gt;</span><br><span class="line">Access-Control-Request-Method: PUT</span><br><span class="line">Access-Control-Request-Headers: X-Custom-Header</span><br><span class="line">Host: api.alice.com</span><br><span class="line">Accept-Language: en-US</span><br><span class="line">Connection: keep-alive</span><br><span class="line">User-Agent: Mozilla/5.0...</span><br></pre></td></tr></table></figure>

<p>两个特殊字段:</p>
<p>Access-Control-Request-Method 必须的<br>用来列出浏览器的 CORS 请求会用到哪些 HTTP 方法，上例是 PUT。</p>
<p>Access-Control-Request-Headers<br>该字段是一个逗号分隔的字符串，指定浏览器 CORS 请求会额外发送的头信息字段。</p>
<p>服务器收到“预检”请求以后，检查了 Origin、Access-Control-Request-Method 和 Access-Control-Request-Headers 字段以后，确认允许跨源请求，就可以做出回应</p>
<p>预检请求的回应：<br>服务器收到”预检”请求以后，检查了 Origin、Access-Control-Request-Method 和 Access-Control-Request-Headers 字段以后，确认允许跨源请求，就可以做出回应。</p>
<p>HTTP 回应中，除了关键的是 Access-Control-Allow-Origin 字段，其他 CORS 相关字段如下：</p>
<p>Access-Control-Allow-Methods：必选<br>它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次”预检”请求。</p>
<p>Access-Control-Allow-Headers<br>如果浏览器请求包括 Access-Control-Request-Headers 字段，则 Access-Control-Allow-Headers 字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p>
<p>Access-Control-Allow-Credentials：可选<br>该字段与简单请求时的含义相同。</p>
<p>Access-Control-Max-Age：可选<br>用来指定本次预检请求的有效期，单位为秒。</p>
<p>CORS 跨域 1)前端设置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    xhr=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">     xhr=<span class="keyword">new</span> ActiveXObject(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">xhr.open(<span class="string">&#x27;post&#x27;</span>,<span class="string">&#x27;&lt;http://localhost:3000/login&#x27;</span>,<span class="literal">true</span>&gt;);</span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line">xhr.send(<span class="string">&#x27;name=111&amp;age=12&#x27;</span>);</span><br><span class="line">xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> reg=<span class="regexp">/^2\d&#123;2&#125;/</span></span><br><span class="line">        <span class="keyword">if</span>(reg.test(xhr.status))&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(xhr.response))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nodejs 代码<br>在 Express 中通过第 3 方中间件来完成 cors 跨域解决<br>使用步骤分为如下 3 步：</p>
<p>运行<code>npm install cors</code>安装中间件<br>使用 <code>const cors = require(&#39;cors&#39;)</code>导入中间件<br>在路由之前调用 <code>app.use(cors())</code> 配置中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&quot;cors&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">const</span> allowHosts = [<span class="string">&quot;http://localhost:5000&quot;</span>, <span class="string">&quot;http://localhost:2000&quot;</span>];</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> hst = req.header.origin;</span><br><span class="line">  <span class="keyword">if</span> (allowHosts.includes(hst)) &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> res.send(&#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">404</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&quot;地址不对&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.get(<span class="string">&quot;/login&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.send(<span class="string">&quot;登陆&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>三、Nginx 反向代理解决跨域问题<br>正向代理和反向代理<br>提到代理，肯定要说一下这两个的区别。</p>
<p>举个正向代理的例子<br>我打球累了走不动了，找看球的小朋友帮我去旁边的商店买瓶水。商店老板是不知道到底是谁需要喝水的，隐藏了客户端。当然，小朋友可以告诉老板就是那个打球像蔡徐坤的人要喝水。还有，VPN 就是正向代理。</p>
<p>反向代理的例子<br>我打球累了，找看球的小朋友要瓶水喝（当然我肯定会给钱的：D）。我不需要知道小朋友的水是从旁边的商店还是两公里外的超市买的。隐藏了服务端。还有，我们连好了 VPN 访问谷歌的时候，浏览的那些页面，我们是不会知道具体是哪台服务器的资源。</p>
<p>nginx 配置解决 iconfont 跨域<br>浏览器跨域访问 js、css、img 等常规静态资源被同源策略许可，但 iconfont 字体文件(eot|otf|ttf|woff|svg)例外，此时可在 nginx 的静态资源服务器中加入以下配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  add_header Access-Control-Allow-Origin *;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nginx 反向代理接口跨域<br>跨域问题：同源策略仅是针对浏览器的安全策略。服务器端调用 HTTP 接口只是使用 HTTP 协议，不需要同源策略，也就不存在跨域问题。</p>
<p>实现思路：通过 Nginx 配置一个代理服务器域名与 domain1 相同，端口不同）做跳板机，反向代理访问 domain2 接口，并且可以顺便修改 cookie 中 domain 信息，方便当前域 cookie 写入，实现跨域访问。</p>
<p>nginx 具体配置</p>
<h1 id="proxy-服务器"><a href="#proxy-服务器" class="headerlink" title="proxy 服务器"></a>proxy 服务器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       81;</span><br><span class="line">    server_name  &lt;www.domain1.com&gt;;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass   http://www.yp2.com:8080;  #反向代理</span><br><span class="line">        proxy_cookie_domain www.yp2.com www.yp1.com; #修改cookie里域名</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">        # 当用webpack-dev-server等中间件代理接口访问nignx时，此时无浏览器参与，故没有同源限制，下面的跨域配置可不启用</span><br><span class="line">        add_header Access-Control-Allow-Origin http://www.yp1.com;  #当前端只跨域不带cookie时，可为*</span><br><span class="line">        add_header Access-Control-Allow-Credentials true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>四、nodejs 中间件代理跨域<br>node 中间件实现跨域代理，原理大致与 nginx 相同，都是通过启一个代理服务器，实现数据的转发，也可以通过设置 cookieDomainRewrite 参数修改响应头中 cookie 中域名，实现当前域的 cookie 写入，方便接口登录认证。</p>
<p>1、nodejs 服务器代理<br>使用 node + express + http-proxy-middleware 搭建一个 proxy 服务器。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express htttp-proxy-middleware</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.listen(<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">const</span> httpProxyMiddleware = <span class="built_in">require</span>(<span class="string">&quot;http-proxy-middleware&quot;</span>);</span><br><span class="line"><span class="comment">// 服务器代理  ---接口中间层 代理层</span></span><br><span class="line">app.use(</span><br><span class="line">  <span class="string">&quot;/api&quot;</span>,</span><br><span class="line">  httpProxyMiddleware.createProxyMiddleware(&#123;</span><br><span class="line">    <span class="comment">// 代理的地址</span></span><br><span class="line">    <span class="attr">target</span>: <span class="string">&quot;&lt;http://localhost:8989&gt;&quot;</span>,</span><br><span class="line">    <span class="comment">// 默认false不修改。修改代理请求是他的主机名</span></span><br><span class="line">    <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 修改响应头信息，实现跨域并允许带cookie</span></span><br><span class="line">    <span class="attr">onProxyRes</span>: <span class="function"><span class="keyword">function</span> (<span class="params">proxyRes, req, res</span>) </span>&#123;</span><br><span class="line">      res.header(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;&lt;http://localhost:5000&gt;&quot;</span>);</span><br><span class="line">      res.header(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 匹配规则</span></span><br><span class="line">    <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">      <span class="comment">// 访问路径 映射到 目标服务器中的路径</span></span><br><span class="line">      <span class="string">&quot;^/v1/api&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2、vue 框架的跨域<br>vue 中实现开发环境的时的反向代理进行跨域解决，在项目根目录下面创建一个 vue.config.js 文件，写下如下代码<br>vue.config.js 部分配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 指定服务器模块</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="comment">// 代理</span></span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/v1/api&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">// 目标地址</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;&lt;http://localhost:3000&gt;&quot;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&quot;/v1/api&quot;</span>: <span class="string">&quot;/api&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>五、document.domain + iframe 跨域<br>前提条件<br>这两个域名必须属于同一个一级域名!而且所用的协议，端口都要一致，否则无法利用 document.domain 进行跨域。<br>Javascript 出于对安全性的考虑，而禁止两个或者多个不同域的页面进行互相操作。<br>而相同域的页面在相互操作的时候不会有任何问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert((<span class="built_in">document</span>.domain = <span class="string">&quot;baidu.com&quot;</span>)); <span class="comment">//&quot;baidu.com&quot;</span></span><br><span class="line">alert((<span class="built_in">document</span>.domain = <span class="string">&quot;www.baidu.com&quot;</span>)); <span class="comment">//&quot;www.baidu.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>举例<br>1）父窗口：<code>(&lt;http://father.baidu.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://child.baidu.com/b.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.domain = <span class="string">&quot;baidu.com&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> user = <span class="string">&quot;admin&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>预览<br>1）子窗口：<code>(http://child.baidu.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.domain = <span class="string">&quot;baidu.com&quot;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取父窗口中变量</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">&quot;get js data from parent ---&gt; &quot;</span> + <span class="built_in">window</span>.parent.user);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>六、location.hash + iframe 跨域<br>hash 属性是一个可读可写的字符串，该字符串是 URL 的锚部分（从 # 号开始的部分）。</p>
<p>实现原理<br>a 想要与 b 跨域相互通信，通过中间页 c 来实现。<br>三个页面，不同域之间利用 iframe 的 location.hash 传值，相同域之间直接 js 访问来通信。<br>利用 location.hash 传值,创建定时器，坚持 hash 的变化，执行相应的操作。<br>下面我们来完成一个案例：<br>具体实现<br>A 域：a.html -&gt; B 域：b.html -&gt; A 域：c.html<br>a 与 b 不同域只能通过 hash 值单向通信，b 与 c 也不同域也只能单向通信，但 c 与 a 同域，所以 c 可通过 parent.parent 访问 a 页面所有对象。<br>1）a.html：<code>(&lt;http://www.baidu1.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;http://www.baidu2.com/b.html&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">&quot;iframe&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 向b.html传hash值</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    iframe.src = iframe.src + <span class="string">&quot;#user=admin&quot;</span>;</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 开放给同域c.html的回调方法</span></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">onCallback</span>(<span class="params">res</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">&quot;data from c.html ---&gt; &quot;</span> + res);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）b.html：<code>(http://www.baidu2.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;http://www.baidu1.com/c.html&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">&quot;iframe&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 监听a.html传来的hash值，再传给c.html</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    iframe.src = iframe.src + location.hash;</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">3）c.html：(http://www.baidu1.com/c.html)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 监听b.html传来的hash值</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 再通过操作同域a.html的js回调，将结果传回</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.parent.parent.onCallback(</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;hello: &quot;</span> + location.hash.replace(<span class="string">&quot;#user=&quot;</span>, <span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="javascript">    );</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>优缺点<br>location.hash + iframe 跨域的优点：</p>
<p>可以解决域名完全不同的跨域<br>可以实现双向通讯<br>location.hash + iframe 跨域的缺点：</p>
<p>location.hash 会直接暴露在 URL 里，并且在一些浏览器里会产生历史记录，数据安全性不高也影响用户体验<br>另外由于 URL 大小的限制，支持传递的数据量也不大。<br>七、window.name + iframe 解决跨域<br>window.name 属性的独特之处：只要在一个 window 下，无论 url 怎么变化，只要设置好了 window.name，那么后续就一直都不会改变。同理，在 iframe 中，即使 url 在变化，iframe 中的 window.name 也是一个固定的值，利用这个，我们就可以实现跨域了（2MB）。</p>
<p>举例<br>test1.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>test1页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://192.168.0.1/php_demo/test2.html&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> ifr = <span class="built_in">document</span>.querySelector(<span class="string">&quot;iframe&quot;</span>);</span></span><br><span class="line"><span class="javascript">    ifr.style.display = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> flag = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    ifr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;跨域获取数据&quot;</span>, ifr.contentWindow.name);</span></span><br><span class="line"><span class="javascript">      ifr.contentWindow.close();</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>test2.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>test2页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> person = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">name</span>: <span class="string">&quot;大鹏_yp&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">age</span>: <span class="number">24</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">school</span>: <span class="string">&quot;lngydx&quot;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.name = <span class="built_in">JSON</span>.stringify(person);</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过 iframe 的 src 属性由外域转向本地域，跨域数据即由 iframe 的 window.name 从外域传递到本地域。这个就巧妙地绕过了浏览器的跨域访问限制，但同时它又是安全操作。</p>
<p>八、postMessage 通信跨域<br>PWA 渐进式 web 应用</p>
<p>在 HTML5 中新增了 postMessage 方法，postMessage 可以实现跨文档消息传输（Cross Document Messaging）<br>该方法可以通过绑定 window 的 message 事件来监听发送跨文档消息传输内容。<br>它可用于解决以下方面的问题：</p>
<p>a. 页面和其打开的新窗口的数据传递<br>b. 多窗口之间消息传递<br>c. 页面与嵌套的 iframe 消息传递<br>d. 上面三个场景的跨域数据传递</p>
<p>postMessage 用法：</p>
<p>postMessage(data,origin)方法接受两个参数<br>参数说明：</p>
<p>data： html5 规范支持任意基本类型或可复制的对象，但部分浏览器只支持字符串，所以传参时最好用 JSON.stringify()序列化。<br>origin： 协议+主机+端口号，也可以设置为”*“，表示可以传递给任意窗口，如果要指定和当前窗口同源的话设置为”/“。<br>举例<br>postMessage：发送<br>onmessage：接收<br>1）a.html：<code>(&lt;http://www.baidu1.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;http://www.baidu2.com/b.html&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">&quot;iframe&quot;</span>);</span></span><br><span class="line"><span class="javascript">  iframe.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> data = &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">name</span>: <span class="string">&quot;aym&quot;</span>,</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 向domain2传送跨域数据</span></span></span><br><span class="line"><span class="javascript">    iframe.contentWindow.postMessage(</span></span><br><span class="line"><span class="javascript">      <span class="built_in">JSON</span>.stringify(data),</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;http://www.baidu2.com&quot;</span></span></span><br><span class="line"><span class="javascript">    );</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 接受baidu2返回数据</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.addEventListener(</span></span><br><span class="line"><span class="javascript">    <span class="string">&quot;message&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&quot;data from baidu2 ---&gt; &quot;</span> + e.data);</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">  );</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）b.html：<code>(http://www.baidu2.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 接收baidu1的数据</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.addEventListener(</span></span><br><span class="line"><span class="javascript">    <span class="string">&quot;message&quot;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      alert(<span class="string">&quot;data from baidu1 ---&gt; &quot;</span> + e.data);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> data = <span class="built_in">JSON</span>.parse(e.data);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="javascript">        data.number = <span class="number">16</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 处理后再发回baidu1</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.parent.postMessage(</span></span><br><span class="line"><span class="javascript">          <span class="built_in">JSON</span>.stringify(data),</span></span><br><span class="line"><span class="javascript">          <span class="string">&quot;http://www.baidu1.com&quot;</span></span></span><br><span class="line"><span class="javascript">        );</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">  );</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>九、WebSocket 协议跨域<br>WebSocket protocol 是 HTML5 一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是 server push 技术的一种很好的实现。<br>原生 WebSocket API 使用起来不太方便，我们使用 Socket.io，它很好地封装了 webSocket 接口，提供了更简单、灵活的接口，也对不支持 webSocket 的浏览器提供了向下兼容。<br>WebSocket 如何工作<br>Web 浏览器和服务器都必须实现 WebSockets 协议来建立和维护连接。由于 WebSockets 连接长期存在，与典型的 HTTP 连接不同，对服务器有重要的影响。</p>
<p>基于多线程或多进程的服务器无法适用于 WebSockets，因为它旨在打开连接，尽可能快地处理请求，然后关闭连接。任何实际的 WebSockets 服务器端实现都需要一个异步服务器。</p>
<p>案例<br>1）前端代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>user input：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> socket = io(<span class="string">&quot;http://www.baidu2.com:8080&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 连接成功处理</span></span></span><br><span class="line"><span class="javascript">  socket.on(<span class="string">&quot;connect&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 监听服务端消息</span></span></span><br><span class="line"><span class="javascript">    socket.on(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;data from server: ---&gt; &quot;</span> + msg);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 监听服务端关闭</span></span></span><br><span class="line"><span class="javascript">    socket.on(<span class="string">&quot;disconnect&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;Server socket has closed.&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">  &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.getElementsByTagName[<span class="string">&quot;input&quot;</span>](<span class="number">0</span>).onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    socket.send(<span class="built_in">this</span>.value);</span></span><br><span class="line"><span class="javascript">  &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）Nodejs socket 后台：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> socket = <span class="built_in">require</span>(<span class="string">&quot;socket.io&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启http服务</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;text/html&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  res.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="string">&quot;8080&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Server is running at port 8080...&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听socket连接</span></span><br><span class="line">socket.listen(server).on(<span class="string">&quot;connection&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 接收信息</span></span><br><span class="line">  client.on(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    client.send(<span class="string">&quot;hello：&quot;</span> + msg);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;data from client: ---&gt; &quot;</span> + msg);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 断开处理</span></span><br><span class="line">  client.on(<span class="string">&quot;disconnect&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Client socket has closed.&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/11/20-22-22/" class="post-title-link" itemprop="url">css</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2021-01-11T20:22:22+08:00">2021-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--可以写在任何地方，建议写在&lt;head&gt;标签中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.test</span> &#123;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#idd</span> &#123;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入外部css,可以触发浏览器缓存--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./test.css&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>响应式布局：在不同设备之间缩放网页</p>
<ul>
<li>媒介查询</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//大范围在上面</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">768px</span>)&#123;</span><br><span class="line">当屏幕小于该尺寸时采用如下布局</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span>(<span class="attribute">max-width</span>:<span class="number">1020px</span>)&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>网页适配移动端</p>
<ul>
<li><p>百分比<br><code>.item&#123;width:55%;&#125;</code></p>
</li>
<li><p>利用 rem 单位</p>
<blockquote>
<p>rem 相对与根文本字体大小<br>em 相对与自己的字体或父元素的字体大小</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.htmlfont-size</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span>&#123;<span class="attribute">width</span>: <span class="number">0.4rem</span>;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>dpr=物理像素/设备独立像素<br><code>&lt;meta name=&quot;viewport&quot; content= &quot;width=device-width,initial-scale=1/dpr&gt;</code></li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><blockquote>
<p>后来者居上</p>
</blockquote>
<h4 id="1-基础选择器"><a href="#1-基础选择器" class="headerlink" title="1.基础选择器"></a>1.基础选择器</h4><ul>
<li>标签选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>类选择器：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  .类名 &#123;</span></span><br><span class="line"><span class="css">    <span class="comment">/*不能用纯数字*/</span></span></span><br><span class="line"><span class="css">    <span class="comment">/*.....*/</span></span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--后写的class会失效--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test&quot;</span> <span class="attr">class</span>=<span class="string">&quot;test1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--生效顺序由css中的位置决定--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test3 test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>id 选择器：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#id</span>名 &#123;</span></span><br><span class="line"><span class="css">    <span class="comment">/*只能使用一次*/</span></span></span><br><span class="line"><span class="css">    <span class="comment">/*不能用数字开头*/</span></span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;xx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通配符选择器：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/*不需要调用，自动给所有的元素使用*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-组合选择器"><a href="#2-组合选择器" class="headerlink" title="2.组合选择器"></a>2.组合选择器</h4><ul>
<li>后代选择器:</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1 元素2 &#123;</span></span><br><span class="line"><span class="comment">样式 ;</span></span><br><span class="line"><span class="comment">选择元素1里面的所有元素2(后代元素);</span></span><br><span class="line"><span class="comment">元素1，2用空格隔开</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">如：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>子选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1&gt;元素2 &#123;</span></span><br><span class="line"><span class="comment">选择元素1里的所有直接后代元素2;</span></span><br><span class="line"><span class="comment">元素2必须是亲儿子</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">如：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div里最近一级p标签元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>兄弟选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div之后，和div同级且相邻的第一个p元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div之后，和div同级的所有p元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>并集选择器：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1，元素2&#123;xxxxx同时选择元素1和2&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-伪类选择器"><a href="#3-伪类选择器" class="headerlink" title="3.伪类选择器"></a>3.伪类选择器</h3><blockquote>
<p>选择元素的特殊状态</p>
</blockquote>
<ul>
<li>链接伪类选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*顺序不能乱写*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="comment">/*没有访问过*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="comment">/*访问过的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/*鼠标悬浮*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="comment">/*点击时*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="comment">/*点击时获取焦点*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="comment">/*勾选时的复选框或单选框*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span> &#123;</span><br><span class="line">  <span class="comment">/*禁用的input元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:enabled</span> &#123;</span><br><span class="line">  <span class="comment">/*未禁用的input元素*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>结构性伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">  <span class="comment">/*选择第一个子元素为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="comment">/*选择最后一个子元素为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:only-child</span> &#123;</span><br><span class="line">  <span class="comment">/*选择没有兄弟li节点的li元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   选择第3个子元素为li的元素,</span></span><br><span class="line"><span class="comment">   不写则都不生效，</span></span><br><span class="line"><span class="comment">   写n则选择全部符合的，</span></span><br><span class="line"><span class="comment">   2n则为偶数的,</span></span><br><span class="line"><span class="comment">   2n+1则选择奇数的,</span></span><br><span class="line"><span class="comment">   -n+5前五个</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-last-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*倒数第三个*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-of-type &#123;</span><br><span class="line">  <span class="comment">/*选择第一个为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:last-of-type</span> &#123;</span><br><span class="line">  <span class="comment">/*选择最后一个为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:only-of-type</span> &#123;</span><br><span class="line">  <span class="comment">/*选择没有同级li元素的li节点*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">  <span class="comment">/*选择序号（同类型）为偶数的xxx元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-last-of-type</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*倒数第三个*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="comment">/* 选中根元素,即html标签 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:empty</span> &#123;</span><br><span class="line">  <span class="comment">/* 选择div标签体为空的元素 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>否定伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.test</span>) &#123;</span><br><span class="line">  <span class="comment">/*选择div中类名不是test的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[title=<span class="string">&quot;xx&quot;</span>]</span>) &#123;</span><br><span class="line">  <span class="comment">/*选择div,排除属性为title=&#x27;xx&#x27;的div元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)) &#123;</span><br><span class="line">  <span class="comment">/*选择div,排除第二个*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>目标伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:target</span> &#123;</span><br><span class="line">  <span class="comment">/* 锚点选中的元素 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>语言伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:lang</span>(en) &#123;</span><br><span class="line">  <span class="comment">/* 元素的lang属性为en的节点 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:lang</span>(en) &#123;</span><br><span class="line">  <span class="comment">/* div元素的lang属性为en的div节点 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>伪元素选择器</li>
</ul>
<blockquote>
<p>选择元素中的特殊位置<br>可以只写一个冒号，除了 placeholder 和 selection</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(伪元素)<span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;xxx&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::first-letter</span>&#123;</span><br><span class="line">   <span class="comment">/* div中第一个文字 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">   <span class="comment">/* div中第一行 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::selection</span>&#123;</span><br><span class="line">   <span class="comment">/* div中选中的颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::placeholder</span>&#123;</span><br><span class="line">   <span class="comment">/* 选中input中的提示文字 */</span></span><br><span class="line">   <span class="attribute">color</span>:red</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在元素前面创建一个元素 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line"><span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">display</span>:xxx;</span><br><span class="line"><span class="attribute">color</span>:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在元素后面创建一个元素 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line"><span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">display</span>:xxx;</span><br><span class="line"><span class="attribute">color</span>:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-属性选择器"><a href="#4-属性选择器" class="headerlink" title="4. 属性选择器"></a>4. 属性选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[attr(属性名称)]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[attr(属性名称)=<span class="string">&quot;val(属性值)&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值为a开头的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)^=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值为a结尾的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)$=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值包含a的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)*=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Css-的三种样式表"><a href="#Css-的三种样式表" class="headerlink" title="Css 的三种样式表"></a>Css 的三种样式表</h4><ol>
<li>行内样式表<code>&lt;div style=&quot;&quot;&gt;&lt;/div&gt;</code></li>
<li>内部样式表<code>&lt;style&gt;&lt;/&gt;</code></li>
<li>外部样式表<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css文件路径&quot;&gt;</code></li>
</ol>
<blockquote>
<p>css 继承:可继承文字相关的样式;而不能继承布局相关的样式</p>
</blockquote>
<p><em>一般情况下，优先级如下：</em></p>
<p><code>（内联(行内)样式）Inline style &gt; （内部样式）Internal style sheet =（外部样式）External style sheet &gt; 浏览器默认样式</code></p>
<p><code>!important&gt;行内(内联)样式 &gt; id 选择器 &gt; 类选择器 = 伪类选择器 = 属性选择器 &gt; 标签选择器 = 伪元素选择器&gt;通配符选择器&gt;继承</code></p>
<p>权重越大，优先级越高：(<code>ID选择器：100</code>、<code>类/伪类/属性选择器10</code>、 <code>标签（元素）/伪元素选择器1</code>)、若权重相同，则后写的生效</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span> <span class="selector-tag">p</span> <span class="selector-class">.tt</span>&#123;xxx&#125;  //权重为<span class="number">100</span>+<span class="number">1</span>+<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#box</span> <span class="selector-class">.tt</span>&#123;xxx&#125;  //权重<span class="number">100</span>+<span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>注意：如果外部样式放在内部样式的后面，则外部样式将覆盖内部样式。</p>
<h4 id="元素显示模式"><a href="#元素显示模式" class="headerlink" title="元素显示模式"></a>元素显示模式</h4><ol>
<li><p>块元素：<code>&lt;h1&gt; &lt;p&gt; &lt;div&gt; &lt;ul&gt;....</code>独占一行，默认占满父元素；宽高边距可控；文字列元素内不能使用块级元素如<code>&lt;p&gt;</code>与<code>&lt;h1&gt;</code>内不能放<code>&lt;div&gt;</code>;图片<code>&lt;img&gt;</code>可放在<code>&lt;p&gt;</code>内调整位置</p>
</li>
<li><p>行内(内联)元素：<code>&lt;a&gt;,&lt;span&gt;,&lt;b&gt;,&lt;em&gt;...</code>一行多个；宽高无法直接设置；只能容纳文本或其他行内元素；</p>
</li>
<li><p>行内块元素：<code>&lt;img /&gt;,&lt;input /&gt;,&lt;td&gt;</code>高宽可设置；一行多个</p>
</li>
<li><p>特别的<code>&lt;a&gt;</code>内可以放块级元素，给<code>&lt;a&gt;</code>转换一下块级模式最安全</p>
</li>
</ol>
<h4 id="显示模式转换"><a href="#显示模式转换" class="headerlink" title="显示模式转换"></a>显示模式转换</h4><ol>
<li><p>转换为块元素：<code>dispaly:block</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">22</span>xp;</span><br><span class="line">   ....</span><br><span class="line">   <span class="attribute">display</span>:block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>转换为行内元素 <code>dispaly:inline</code></p>
</li>
<li><p>行内块元素：<code>display:inline-block</code></p>
</li>
</ol>
<hr>
<h3 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h3><p>多个块级元素纵向排列用标准流，横向排列用浮动<br>特性：</p>
<ol>
<li>脱离标准流的控制，不再保留原先的位置</li>
<li>所有浮动一行对齐.上对齐,宽高位置只跟上一个浮动元素有关,父级宽度不够时会换行</li>
<li>具有行内块特性</li>
</ol>
<blockquote>
<p>浮动元素不会压住文字和图片、表单元素（输入框、单选按钮、下拉选择框、复选框等）；可做出文字环绕图片效果；</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">  <span class="attribute">float</span>: none|left|right；;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:假如某个 div 元素 A 是浮动的，如果 A 元素上一个元素也是浮动的，那么 A 元素会跟随在上一个元素的后边(如果一行放不下这两个元素，那么 A 元素会被挤到下一行)；如果 A 元素上一个元素是标准流中的元素，那么 A 的相对垂直位置不会改变，也就是说 A 的顶部总是和上一个元素的底部对齐。</p>
</blockquote>
<h3 id="常用标准流约束浮动位置"><a href="#常用标准流约束浮动位置" class="headerlink" title="常用标准流约束浮动位置"></a>常用标准流约束浮动位置</h3><p>浮动影响：</p>
<ul>
<li>父级盒子不设置高度时，子盒子浮动，脱标不占位置，则父级盒子高度为 0；</li>
<li>被浮动元素覆盖的块级元素中的文字会被挤出去；</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* //父元素清除浮动影响 */</span></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: none|<span class="built_in">left</span>(该元素左边不允许出现浮动元素) |right|both；;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:对于 CSS 的清除浮动(clear)，一定要牢记：这个规则只能影响使用清除的元素本身，不能影响其他元素。</p>
</blockquote>
<ol>
<li><p>额外标签法：在浮动元素的末尾添加一个空标签如<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code></p>
</li>
<li><p>父级添加<code>overflow:hidden|auto|scroll;</code> 设置为 auto 时会出现滚动条，可选择隐藏<code>overflow-x:hidden;</code>或<code>overflow-y:auto</code></p>
</li>
<li><p>父级伪元素清除浮动</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clear</span>:after &#123;</span><br><span class="line">  conten: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">  <span class="comment">/*IE6,7专有*/</span></span><br><span class="line">  *zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="边距折叠问题"><a href="#边距折叠问题" class="headerlink" title="边距折叠问题"></a>边距折叠问题</h3><p>块的上外边距(margin-top)和下外边距(margin-bottom)有时合并(折叠)为单个边距，其大小为单个边距的最大值(或如果它们相等，则仅为其中一个)，这种行为称为边距折叠<br>有三种情况会形成外边距重叠：</p>
<ul>
<li><p>同一层相邻元素之间，上下外边距合并</p>
</li>
<li><p>没有内容将父元素和后代元素分开；如果没有边框 border，内边距 padding，行内内容，则就会出现父块元素和其内后代块元素外边界重叠，重叠部分最终会溢出到父级块元素外面。 -空的块级元素：当一个块元素上边界 margin-top 直接贴到元素下边界 margin-bottom 时也会发生边界折叠。</p>
</li>
<li><p>解决方法：触发 BFC（块格式上下文）</p>
<ul>
<li>为父元素设置：上边框或上内边距</li>
<li>为父元素添加 overflow：hidden；</li>
<li>为父元素添加 dispaly:inline-block/tabl-cell;或 float:left;或 positon:absolute/fixed;</li>
</ul>
</li>
</ul>
<h3 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h3><p>将盒子固定到某一个位置<code>定位=定位模式+边偏移</code></p>
<ol>
<li><p>定位模式：<code>position:static|relative|absolute|fixed</code></p>
<ul>
<li><p>静态定位 static：不脱标，不能偏移；</p>
</li>
<li><p>相对定位 relative：相对与自己原来的位置来移动；不脱标，继续保留原来的位置</p>
</li>
<li><p>绝对定位 absolute：若没有祖先元素或祖先元素没有定位，则以浏览器为准；若祖先元素有定位（任何定位），则以最近一级有定位的祖先元素为参考点；</p>
</li>
<li><p>固定定位 fixed：以浏览器可视窗口为参考点，跟父级元素没有任何关系；不随滚动条滚动，不在占有原先位置；</p>
</li>
<li><p>粘性定位 sticky：离它最近的一个拥有滚动机制的祖先元素为参考点，即便这个祖先不是最近的真实可滚动祖先；占有原先的位置；必须添加 top,left,right,bottom 其中一个才生效；可以和浮动一起设置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 固定在版心右侧位置 --&gt;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">50%</span>;浏览器的一半位置</span><br><span class="line"><span class="attribute">margin-left</span>:版心宽度的一半距离。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>边偏移：<code>top:33px;bottom:...;left:.....;right:...</code></p>
</li>
<li><p>叠放次序：<code>选择器&#123;z-index:1;&#125;</code>数值可正可负；数值越大盒子越靠上；只有定位的盒子才能有 z-index 属性；另外，有定位的在没有定位的上面，都有定位则后面写的在上面，</p>
</li>
</ol>
<blockquote>
<p>不能和浮动一起写(sticky 除外)，优先定位<br>子级是绝对定位的话，父级要用相对定位，子盒子不需要占有位置，父级需要占有位置；<br>行内元素添加绝对或固定定位，可直接设置宽高；块级元素添加后不设置宽高则默认是内容大小；相对定位还是保留元素之前的显示模式<br>浮动元素可以压住标准流盒子；但不会压住标准流盒子里的文字和图片；<br>绝对定位和固定定位，想让宽高和包含块一致，可同时设置 left:0;right:0 与 top:0;bottom:0</p>
</blockquote>
<ul>
<li>flex 弹性布局<ul>
<li>采用 Flex 布局的元素，称为 Flex 容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称”项目”。</li>
<li>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。</li>
<li>主轴的开始位置（与边框的交叉点）叫做 main start，结束位置叫做 main end；</li>
<li>交叉轴的开始位置叫做 cross start，结束位置叫做 cross end。</li>
<li>项目默认沿主轴排列。单个项目占据的主轴空间叫做 main size，占据的交叉轴空间叫做 cross size。</li>
<li>当一层 flex 布局的时候，设置子元素的 width:100%就没有问题。当页面中多层 flex 布局嵌套的时候，设置其中子元素的 width：100%会不起作用。可把元素设置为绝对定位来解决该问题。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>容器属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-direction:row/row-reverse/column/column-reverse</td>
<td>决定主轴的方向</td>
</tr>
<tr>
<td>flex-wrap:nowrap/wrap/wrap-reverse（最开始的一行在下面，新的在上面）;</td>
<td>如果一条轴线排不下，是否换行以及如何换行</td>
</tr>
<tr>
<td>flex-flow:<code>&lt;flex-direction&gt;&lt;flex-wrap&gt;</code></td>
<td>flex-direction 与 flex-wrap 的简写形式</td>
</tr>
<tr>
<td>justify-content:flex-start/flex-end/center/space-between（两端对齐，项目间的间隔相等)/space-around（每个项目间的间隔相等，项目与边框的间隔较小）</td>
<td>定义项目在主轴上的对齐方式</td>
</tr>
<tr>
<td>align-items:stretch（项目无高度或设为 auto 时，将会占满整个容器高度）/center/flex-start/flex-end/baseline（项目的第一行文字的基线对齐）;</td>
<td>定义项目在交叉轴上的对齐方式</td>
</tr>
<tr>
<td>align-content:stretch（项目无高度或设为 auto 时，将会占满整个容器高度）/center/flex-start/flex-end/space-between/space-around</td>
<td>定义项目在多根轴线上的对齐方式，如果项目只有一根轴线则不起作用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>项目属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-grow: 数字;</td>
<td>定义项目的放大比例，默认 0；若全部设为 1，则平分空间</td>
</tr>
<tr>
<td>flex-shrink:数字;</td>
<td>定义缩小比例，默认 1，都设为 1，空间不足，则都等比例缩小；若设为 0 则不会</td>
</tr>
<tr>
<td>flex-basis:宽高/auto;</td>
<td>定义项目占主轴的空间，默认 auto</td>
</tr>
<tr>
<td>flex:none/[<code>&lt;flex-grow&gt;</code>,flex-shrink，<code>&lt;flex-basis&gt;</code>];</td>
<td>flex-grow,flex-shrink，flex-basis 简写，后两个可选，默认 0,1，auto</td>
</tr>
<tr>
<td>order:数字;</td>
<td>定义项目的排列顺序，越小越靠前，默认 0</td>
</tr>
<tr>
<td>align-self:auto / flex-start / flex-end / center / baseline / stretch;</td>
<td>允许单个项目有与其他项目不一样的对齐方式，可覆盖 align-items 属性。默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素，则等同于 stretch。</td>
</tr>
</tbody></table>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">display</span>:flex;</span><br><span class="line"><span class="attribute">flex-direction</span>:row/coloumn;</span><br><span class="line"><span class="attribute">justify-content</span>:<span class="built_in">flex-start</span>(开始对齐)/flex-end（尾部对齐）/center/space-between（两端对齐）/<span class="built_in">space-around</span>(自动分配间隔）</span><br><span class="line">align-items:stretch/center/flex-start/flex-end/baseline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h3><ul>
<li>display:none（隐藏）|block(除转换为块级元素外，还可显示元素);</li>
</ul>
<blockquote>
<p>display 隐藏后不再占有原来的位置；</p>
</blockquote>
<ul>
<li>visibility:visible(可视)|hidden；</li>
</ul>
<blockquote>
<p>visibility:隐藏元素后，继续占有原来的位置；</p>
</blockquote>
<ul>
<li>opacity:0;</li>
</ul>
<h4 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h4><ul>
<li><p>font-family:默认使用第一个字体,<code>font-family:&quot;Microsoft yahie&quot; ,&quot;hiragino Sans GB&quot;,Arial;</code></p>
</li>
<li><p>font-size: 单位 px</p>
</li>
<li><p>font-weight: <code>lighter或100-300</code>;<code>nomal或400</code>不加粗;<code>bold或700</code>加粗；<code>100-900</code></p>
</li>
<li><p>font-style:<code>normal</code>默认；<code>italic</code>斜体；<code>oblique</code>强制斜体</p>
</li>
<li><p>color：支持十六进制、rgb（255,5,5）、预设颜色值 red</p>
</li>
<li><p>text-align:文本内容对齐 left,right,center;</p>
</li>
<li><p>line-height:行高，单位 px|百分比|倍数,不能为负数;</p>
</li>
<li><p>text-decoration:文本装饰；<code>none</code>没有装饰线；<code>underline</code> 下划线；<code>line-through</code>删除线；可搭配 dotted 线|wavy 波浪线和颜色</p>
</li>
<li><p>text-indent:缩进；单位 em 代表 1 个文字大小；px 像素</p>
</li>
<li><p>letter-space:字间距；单位 em 代表 1 个文字大小；px 像素,可以为负数</p>
</li>
<li><p>word-space:英文字母间距；单位 em 代表 1 个文字大小；px 像素,可以为负数</p>
</li>
<li><p>字体复合属性：<code>font: font-style font-weight font-size/line-height font-family;</code>顺序不能换，必须保留<code>font-size</code> 和<code>font-family</code>属性</p>
</li>
</ul>
<h4 id="css-背景"><a href="#css-背景" class="headerlink" title="css 背景"></a>css 背景</h4><ul>
<li>背景颜色：<code>background-color</code></li>
<li>背景图片：<code>background-image:url()</code></li>
<li>背景图片重复平铺：<code>background-repeat:no-repeat|repeat-x|repeat-y</code></li>
<li>背景图片位置：<code>background-position:(方位名词：top|center|left|right|top left水平方向+垂直方向等)(坐标：x,y或只有x坐标与垂直居中)两个可混合使用</code></li>
<li>背景固定：<code>background-attachment:scroll|fixed(固定)</code></li>
<li>背景复合写法：<code>background:(没有顺序)一般颜色 图片 平铺 固定 位置。。</code></li>
<li>背景半透明 ：<code>backround:rgba(225,22,0,0.5)最后一个参数代表透明度</code></li>
</ul>
<p>子标签会继承父标签的部分样式如字体属性，文本属性（除 vertical-algin）、颜色等，不会继承边框、背景、边距、宽高等<br>行高可以不跟单位：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">1.5</span>; <span class="comment">/*子元素字体大小的1.5倍*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h3><h4 id="边框-border"><a href="#边框-border" class="headerlink" title="边框:border"></a>边框:<code>border</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 加边框后盒子会变大 */</span></span><br><span class="line"><span class="attribute">border-width</span>:单位px</span><br><span class="line">border-stye:<span class="built_in">solid</span>(实线)|dashed（虚线）|dotted（点线）|<span class="built_in">double</span>(双实线)</span><br><span class="line">border-color:</span><br><span class="line">/* 复合写法：border：xxx xxx xxx没有循序 */</span><br><span class="line">/* 每条边可单独设置: */</span><br><span class="line">border-top:</span><br><span class="line">border-bottom:</span><br><span class="line">/* 合并相邻边框 */</span><br><span class="line">border-collapse:collapse;</span><br></pre></td></tr></table></figure>

<h4 id="内容-content"><a href="#内容-content" class="headerlink" title="内容:content"></a>内容:<code>content</code></h4><h4 id="内边界-padding"><a href="#内边界-padding" class="headerlink" title="内边界:padding"></a>内边界:<code>padding</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 也会改变盒子大小,若盒子没有width/height属性则不会 */</span></span><br><span class="line"><span class="comment">/* 可分开设置上下左右边距 */</span></span><br><span class="line"><span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line"><span class="comment">/* 复合写法：padding：（2个：上下，左右；3个：上，左右，下；4个：顺时针） */</span></span><br><span class="line"><span class="comment">/* 不能为负数 */</span></span><br></pre></td></tr></table></figure>

<h4 id="外边距-margin"><a href="#外边距-margin" class="headerlink" title="外边距:margin"></a>外边距:<code>margin</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*可分开设置 */</span></span><br><span class="line"><span class="attribute">margin-left</span>:<span class="number">1px</span></span><br><span class="line">nargin-bottom:<span class="number">1px</span></span><br><span class="line">/* 复合写法与padding一致 */</span><br></pre></td></tr></table></figure>

<h3 id="盒子居中"><a href="#盒子居中" class="headerlink" title="盒子居中"></a>盒子居中</h3><ul>
<li><p>利用绝对定位，先将元素的左上角通过 top:50%和 left:50%定位到页面的中心，然后再通过<code>transform:translate(-50%,-50%)</code>来调整元素的中心点到页面的中心</p>
</li>
<li><p>使用 flex 布局，通过<code>align-items:center</code>和<code>justify-content:center</code>设置容器的垂直和水平方向上为居中对齐，然后它的子元素也可以实现垂直和水平的居中</p>
</li>
<li><p>父盒子<code>高已知</code>的情况,子盒子是<code>行内元素</code>或者<code>行内块</code>时,给父盒子设置<code>text-align:center;</code>会使子盒子水平居中,给单行文本设置<code>line-height=盒子高度</code>；使文本在盒子里垂直居中</p>
</li>
<li><p>父盒子 <code>display: table-cell;vertical-align: middle;text-align: center;</code>的情况,子盒子是<code>行内元素</code>或者<code>行内块</code>时(table-cell 表格单元格的形式呈现，类似于 td 标签)</p>
</li>
<li><p>利用绝对定位，先将元素的左上角通过 top:50%和 left:50%定位到页面的中心，然后再通过 margin 负值来调整元素的中心点到页面的中心。该方法适用于盒子<code>宽高已知</code>的情况</p>
</li>
<li><p>盒子<code>宽高已知</code>的情况，通过 margin 调整元素的中心点到页面的中心。(注意盒子的塌陷问题,margin-top 不用 50%的原因是，百分比默认的是父盒子宽度的百分比)</p>
</li>
<li><p>利用绝对定位，设置四个方向的值都为 0，并将 margin 设置为 auto，由于宽高固定，因此对应方向实现平分，可以实现水平和垂直方向上的居中。该方法适用于盒子<code>有宽高</code>的情况</p>
</li>
<li><p>使用 JS 的思路大概给大家说下：</p>
</li>
</ul>
<p>1、js 中只要获取到当前盒子具体的 left/top 值即可</p>
<p>2、一屏幕的宽高-盒子的宽高，最后除以 2，获取的值就是它应该具备的 left/top(这个值可以使盒子处于页面中间)</p>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><ul>
<li><p>单列布局</p>
</li>
<li><p>两列布局<br>两栏布局（左侧宽度固定，右侧自适应）：左浮动或 absoulute，右 margin-left 调位置或者触发 BFC；使用 flex 布局；使用网格布局</p>
</li>
<li><p>三栏布局</p>
<ul>
<li>圣杯布局</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">15%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fld</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fcd</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.frd</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>双飞翼布局</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">600px</span>; //确保中间内容可以显示出来，两倍<span class="attribute">left</span>宽+<span class="attribute">right</span>宽</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> <span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span>; //中间新增部分</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>两种布局实现方式对比:两种布局方式都是把主列放在文档流最前面，使主列优先加载。两种布局方式在实现上也有相同之处，都是让三列浮动，然后通过负外边距形成三列布局。两种布局方式的不同之处在于如何处理中间主列的位置：圣杯布局是利用父容器的左、右内边距+两个从列相对定位；双飞翼布局是把主列嵌套在一个新的父级块中利用主列的左、右外边距进行布局调整</p>
</blockquote>
<ul>
<li>粘连布局</li>
</ul>
<p>特点：有一块内容<code>&lt;main&gt;</code>，当<code>&lt;main&gt;</code>的高康足够长的时候，紧跟在<code>&lt;main&gt;</code>后面的元素<code>&lt;footer&gt;</code>会跟在<code>&lt;main&gt;</code>元素的后面。当<code>&lt;main&gt;</code>元素比较短的时候(比如小于屏幕的高度),我们期望这个<code>&lt;footer&gt;</code>元素能够“粘连”在屏幕的底部</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  * &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="comment">/* //高度一层层继承下来  */</span></span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#content</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">min-height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: pink;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#content</span> <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: deeppink;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-top</span>: -<span class="number">50px</span>;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>(1)footer 必须是一个独立的结构，与 wrap 没有任何嵌套关系；(2)wrap 区域的高度通过设置 min-height，变为视口高度；(3)footer 要使用 margin 为负来确定自己的位置；(4)在 main 区域需要设置 padding-bottom。这也是为了防止负 margin 导致 footer 覆盖任何实际内容。</p>
</blockquote>
<h3 id="清除内外边距"><a href="#清除内外边距" class="headerlink" title="清除内外边距"></a>清除内外边距</h3><blockquote>
<p>(body 会默认有个边距)</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h2><blockquote>
<p>伪类选择器，伪元素选择器<br>支持更多颜色：HSL，HSLA,RGBA,opacity<br>弹性盒子<br>2d、3d 变换<br>圆角、阴影、渐变<br>过渡效果<br>web 字体，显示电脑上没有的字体</p>
</blockquote>
<h3 id="私有前缀"><a href="#私有前缀" class="headerlink" title="私有前缀"></a>私有前缀</h3><blockquote>
<p>浏览器厂商用于测试新的 css 特性<br><a target="_blank" rel="noopener" href="https://www.caniuse.com/">兼容性查询网站</a></p>
</blockquote>
<ul>
<li>chrome/safari/edge：<code>-webkit-</code></li>
<li>firefox：<code>-moz-</code></li>
<li>opera：<code>-o-</code></li>
<li>IE：<code>-ms-</code></li>
</ul>
<h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3><ul>
<li><code>rem</code>：根元素字体的倍数</li>
<li><code>vh</code>：视口高的百分比</li>
<li><code>vw</code>：视口宽的百分比</li>
<li><code>vmax</code>：视口宽和高中大的那个的百分比</li>
<li><code>vmin</code>：视口宽和高中小的那个的百分比</li>
</ul>
<h3 id="盒模型属性"><a href="#盒模型属性" class="headerlink" title="盒模型属性"></a>盒模型属性</h3><ul>
<li><code>box-sizing</code>：<code>border-box</code>怪异盒模型，盒子的长宽包含内边距和边框,<code>content-box</code>标准盒模型，长宽不包含内边距和边框</li>
<li>调节盒子大小 <code>resize</code>：需添加<code>overflow</code>属性。值有（<code>horizontal</code>水平方向可调教大小,<code>vertical</code>垂直方向,<code>both</code>都可以）</li>
<li>盒子阴影<code>box-shadow</code>：<code>3px水平阴影 0px垂直阴影 5px模糊距离 0px阴影尺寸 #fff颜色 inset（内阴影）</code>不占空间</li>
<li>透明：<code>opacity:0.5</code>子元素也会跟着变化</li>
</ul>
<h3 id="边框属性"><a href="#边框属性" class="headerlink" title="边框属性"></a>边框属性</h3><ul>
<li>圆角边框<code>border-radius</code>：<code>10px|10%|顺时针四个参数</code>最大值为 50%;</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-top-left-radius</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">border-top-right-radius</span>: <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">border-bottom-left-radius</span>: <span class="number">100px</span> <span class="number">200px</span>; <span class="comment">/* 椭圆x轴半径 , y轴半径*/</span></span><br><span class="line"><span class="comment">/*椭圆*/</span></span><br><span class="line"><span class="attribute">border</span>-raduis: <span class="number">10px</span> <span class="number">20px</span> <span class="number">30px</span> <span class="number">40px</span> /<span class="number">10px</span> <span class="number">20px</span> <span class="number">40px</span> <span class="number">10px</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>外轮廓：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*不占位置*/</span></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">outline-width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">outline-color</span>: red;</span><br><span class="line">  <span class="attribute">outline-style</span>: solid;</span><br><span class="line">  <span class="attribute">outline-offset</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test2</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">20px</span> solid blue;</span><br><span class="line">  <span class="attribute">outline-offset</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h3><ul>
<li><p>文字阴影：<code>text-shadow:水平阴影 垂直阴影 模糊距离 颜色</code></p>
</li>
<li><p>文本换行<code>white-space</code>：<code>normal</code>,<code>pre</code>原文显示,<code>pre-wrap</code>超出边界换行.<code>pre-line</code>超出边界换行，只识别文本中的换行，行前行尾空格会忽略.<code>no-wrap</code>不换行</p>
</li>
<li><p>文本移除<code>text-overflow</code>：<code>ellipsis</code>需配合<code>overflow:hidden(非visible);white-space:no-wrap</code>使用|<code>clip</code>默认值</p>
</li>
<li><p>文本修饰</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-decoration-line</span>: overline;</span><br><span class="line"><span class="attribute">text-decoration-style</span>: solid;</span><br><span class="line"><span class="attribute">text-decoration-line</span>: red;</span><br><span class="line"><span class="attribute">text-decoration</span>: overline solid red;</span><br></pre></td></tr></table></figure>

<ul>
<li>文本描边(wekit)</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-webkit-text-stroke-<span class="attribute">color</span>: red;</span><br><span class="line">-webkit-text-stroke-<span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">-webkit-text-stroke: <span class="number">10px</span> green;</span><br></pre></td></tr></table></figure>

<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><ul>
<li><p>背景图原点<code>background-origin</code>：<code>paddding-box</code>默认，从 padding 区域开始；<code>border-box</code>从 border 区域开始，<code>content-box</code>：从内容区域开始</p>
</li>
<li><p>背景图向外裁切区域<code>background-clip</code>：<code>paddding-box</code>默认，从 padding 区域开始；<code>border-box</code>从 border 区域开始，<code>content-box</code>：从内容区域开始；<code>text</code>背景图显示在文字上，需要加上-webkit-前缀</p>
</li>
<li><p>背景图位置<code>background-position</code>：移动的距离是这个目标图片的 x，y 坐标，一般情况是向上或左移动，所以数值是负值；</p>
</li>
</ul>
<blockquote>
<p>精灵图<br>将多个小背景图整合到一张大图片中，减少了服务器的请求</p>
</blockquote>
<ul>
<li><p>背景图大小<code>background-size</code>：<code>300px 200px</code>不能为负值；<code>100% 20%</code>不能为负值；<code>auto</code>默认；<code>contain</code>图片整张放在 div 中，可能图片会重复铺满；<code>cover</code>图片充满 div,可能会裁切一部分</p>
</li>
<li><p>复合写法<code>background:color url repeat position / size origin clip</code>size 必须写在 position 后面且用斜杠分割，origin 和 clip 相同可以少写后一个，</p>
</li>
<li><p>多个背景<code>background:url(&#39;xx.jpg&#39;) no-repeat right top,url(&#39;xx.jpg&#39;) no-repeat right bottom,url(&#39;xx.jpg&#39;) no-repeat left top,</code></p>
</li>
</ul>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><blockquote>
<p>本质是图片</p>
</blockquote>
<ul>
<li><p>线性渐变背景：<code>background:linear-gradient(100px|100px 20px半径,to bottom|to top|to right|to left|to left top|20deg,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>径向渐变背景：<code>background:radial-gradient(at bottom|at top|at right|at left|at left top|circle|at 20px 100px,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>重复线性渐变背景：<code>background:repeating-linear-gradient(100px|100px 20px半径,to bottom|to top|to right|to left|to left top|20deg,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>重复径向渐变背景：<code>background:repeating-radial-gradient(at bottom|at top|at right|at left|at left top|circle|at 20px 100px,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
</ul>
<h3 id="2d-3d-变换"><a href="#2d-3d-变换" class="headerlink" title="2d/3d 变换"></a>2d/3d 变换</h3><ul>
<li><p>位移属性（不能用于行内元素）：<code>transform:translateX(20%)|translateY(-10%)|translateZ(20px)|translate(10px,10px,0px);</code>位移时默认是元素的中心位置,不脱离文档流</p>
</li>
<li><p>缩放（不能用于行内元素）：<code>transform:scaleX(1.5)|scaleY(1.5)|scaleZ(1.5)|scale(1.5)|scale3d(1.5);</code>默认为 1 正常大小，通过缩放可实现字体小于浏览器的最小字体限制；<code>transform-origin:50% 50%;</code>元素缩放中心点位置</p>
</li>
<li><p>旋转：<code>transform:rotateX()|rotateY()|rotate3d()|rotateZ(30deg)|rotate(30deg);</code>z 轴是垂直与屏幕的</p>
</li>
<li><p>透视：<code>transform:perspective(1000px);</code>透视距离，必须写在前面；</p>
</li>
<li><p>过渡动画：<code>transition: width(要过渡的属性) 1s(过渡时间) ease-in(过渡方式) 2s(延迟时间)</code></p>
</li>
</ul>
<blockquote>
<p>transition 过渡方式 ：ease：慢速开始，然后变快，然后慢速结束；ease-in：以慢速开始的过渡效果；ease-out：以慢速结束的过渡效果；ease-in-out：以慢速开始和结束的过渡</p>
</blockquote>
<ul>
<li>循环动画：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* //定义动画 */</span></span><br><span class="line"><span class="keyword">@keyframe</span> beat &#123;</span><br><span class="line">  <span class="comment">/* //关键帧 */</span></span><br><span class="line">  <span class="number">30%</span>: &#123;</span><br><span class="line">    transform: <span class="built_in">scale</span>(<span class="number">1.3</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span>: &#123;</span><br><span class="line">    transform: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* //使用动画 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.heart</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="built_in">beat</span>(动画名称) <span class="number">1.5s</span> (动画时长) <span class="built_in">infinite</span>(循环动画);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>box-shadow 可同时设置多个阴影，如</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">#fff</span> <span class="number">22px</span> -<span class="number">15px</span> <span class="number">0</span> <span class="number">6px</span>, <span class="number">#fff</span> <span class="number">57px</span> -<span class="number">6px</span> <span class="number">0</span> <span class="number">2px</span>, <span class="number">#fff</span> <span class="number">87px</span> <span class="number">4px</span> <span class="number">0</span> -<span class="number">4px</span>,</span><br><span class="line">    <span class="number">#fff</span> <span class="number">33px</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 clip-path 可快速裁剪盒子形状，使用 shape-outsizes 可实现文字不规则环绕效果（注意兼容问题）</li>
<li>transform 中的 rotate 属性旋转后，其内部内容会随之旋转。</li>
<li>设置字间距可使用 letter-spacing 属性增加或减少字符间的空白（字符间距）。该属性定义了在文本字符框之间插入多少空间(允许使用负值)</li>
<li>CSS 中用于设置过渡特效的属性是 transition，但是其不能同时使用在多个属性身上。</li>
</ul>
<h3 id="字体图标和-web-字体"><a href="#字体图标和-web-字体" class="headerlink" title="字体图标和 web 字体"></a>字体图标和 web 字体</h3><p>精灵图放大会失真，字体图标不会，且可以改变颜色大小，只适合简单图形；</p>
<p>字体图标下载网站：<code>http://icomoon.io</code> <code>https://iconfont.cn</code></p>
<p>使用方法： 1.添加字体声明在<code>&lt;style&gt;&lt;/style&gt;</code>中</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;xxname&quot;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>);</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>), <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>), <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>) <span class="built_in">format</span>(<span class="string">&quot;woff&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;xxname&quot;</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.使用:从官网复制图标粘贴到相应位置并设置样式:<code>span&#123;font-family:&#39;xxname&#39;;font-size:....&#125;</code></p>
<h3 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h3><p>盒边距设置为 0，边框宽度控制大小，边框背景设置为透明</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left-color</span>: red;</span><br><span class="line">  <span class="comment">/*照顾兼容性*/</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直角三角形</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line"><span class="comment">/*上边框调大*/</span></span><br><span class="line"><span class="attribute">border-top</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line"><span class="attribute">border-right</span>: <span class="number">50px</span> solid red;</span><br><span class="line"><span class="comment">/*左边和下边边框设置为0*/</span></span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">border-left</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<h3 id="鼠标样式"><a href="#鼠标样式" class="headerlink" title="鼠标样式"></a>鼠标样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="comment">/*cursor:default|pointer(手指)|move|text(文本)|not-allowed(禁止);*/</span></span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">&quot;xxx.png&quot;</span>) pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="防止文本域被拖拽"><a href="#防止文本域被拖拽" class="headerlink" title="防止文本域被拖拽"></a>防止文本域被拖拽</h3><p><code>textarea&#123;resize:none;&#125;</code></p>
<h3 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h3><p>用于设置行内块垂直对齐方式(必须作用与 inline-block 元素)<br><code>vertical-align:baseline(基线)|top|middle|bottom;</code></p>
<ul>
<li>解决图片底部空白缝隙问题：添加 vertical-align 属性；或转换为块级元素<code>display:block;</code></li>
</ul>
<h3 id="溢出文字省略号表示"><a href="#溢出文字省略号表示" class="headerlink" title="溢出文字省略号表示"></a>溢出文字省略号表示</h3><ul>
<li>单行</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/* 1.强制一行显示文本 */</span></span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="comment">/* 2.超出部分隐藏 */</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/* 3.超出文字用省略号表示 */</span></span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>多行</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">兼容性差，适合移动端和wwebkit浏览器</span><br><span class="line"><span class="attribute">overflow</span>:hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line"><span class="comment">/*弹性盒子显示*/</span></span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="comment">/*限时一个快元素显示的文本行数*/</span></span><br><span class="line">-webkit-line-clap:<span class="number">2</span>;</span><br><span class="line"><span class="comment">/*设置伸缩盒对象的子元素的排列方式和*/</span></span><br><span class="line">-webkit-box-orient:vertical;</span><br></pre></td></tr></table></figure>

<h3 id="盒子间的边框问题"><a href="#盒子间的边框问题" class="headerlink" title="盒子间的边框问题"></a>盒子间的边框问题</h3><p>防止边框重叠</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">111px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">222px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>鼠标移动显示边框</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*若盒子有定位，则利用z-index提高层级*/</span></span><br><span class="line"><span class="selector-tag">ul</span> ll<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*若盒子没有定位则鼠标经过时添加相对定位*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改滚动条样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 【1】IE */</span></span><br><span class="line"><span class="comment">/* IE浏览器支持通过CSS样式来改变滚动条的部件的自定义颜色 */</span></span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">　　scrollbar-face-color滚动条凸出部分的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-shadow-color立体滚动条阴影的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-highlight-color滚动条空白部分的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-3dlight-color滚动条亮边的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-darkshadow-color滚动条强阴影的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-track-color滚动条的背景颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-arrow-color上下按钮上三角箭头的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-base-color滚动条的基本颜色 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 【2】webkit */</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">::-webkit-scrollbar 滚动条整体部分</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-thumb  滚动条里面的小方块，能向上向下移动（或往左往右移动，取决于是垂直滚动条还是水平滚动条）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-track  滚动条的轨道（里面装有Thumb）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-button 滚动条的轨道的两端按钮，允许通过点击微调小方块的位置。</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-track-piece 内层轨道，滚动条中间部分（除去）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-corner 边角，即两个滚动条的交汇处</span></span><br><span class="line"><span class="comment">::-webkit-resizer 两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/* ///////////////////////////////////////////////////////////////////// */</span></span><br><span class="line"><span class="comment">/* 定义滚动条样式 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义滚动条轨道 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  box-shadow: inset <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义滑块 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  border-radius: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="预处理器-less"><a href="#预处理器-less" class="headerlink" title="预处理器 less"></a>预处理器 less</h2><h3 id="浏览器用法"><a href="#浏览器用法" class="headerlink" title="浏览器用法"></a>浏览器用法</h3><blockquote>
<p>运行时编译<br>下载 <code>less.js</code> and include it in a <code>&lt;script&gt;&lt;/script&gt;</code> tag in the <code>&lt;head&gt;</code> element of your page:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">text</span>=<span class="string">&quot;text/less&quot;</span>&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  .test &#123;</span></span><br><span class="line"><span class="xml">    .test2 &#123;</span></span><br><span class="line"><span class="xml">      color: red;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;less.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><p>easyless 插件，预编译生产 css</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="comment">/*会编译到css文件中*/</span></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用＠声明一个变量,变量可重复定义，遵循块级作用域</span></span><br><span class="line"><span class="variable">@color1:</span>red;<span class="comment">//值，可直接使用</span></span><br><span class="line"><span class="variable">@m:</span>margin;<span class="comment">//属性名，使用需要加花括号</span></span><br><span class="line"><span class="variable">@selector:</span>#test3;<span class="comment">//类名，使用需要加花括号</span></span><br><span class="line"><span class="variable">@url:</span><span class="string">&quot;../../bg.jpg&quot;</span>;<span class="comment">//地址链接，使用需要加花括号</span></span><br><span class="line"><span class="variable">@themes:</span> <span class="string">&quot;../../src/themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;@&#123;themes&#125;/tidal-wave.less&quot;</span>;</span><br><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line">   <span class="selector-class">.test2</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="variable">@color1</span>;</span><br><span class="line">      @&#123;m&#125;:<span class="selector-tag">0px</span> <span class="selector-tag">1px</span> <span class="selector-tag">2px</span> <span class="selector-tag">3px</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable">@&#123;selector&#125;</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>:red;</span><br><span class="line">      <span class="attribute">background</span>:url(<span class="string">@&#123;url&#125;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@primary:</span>  green;</span><br><span class="line"><span class="variable">@color:</span> primary;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.section</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@@color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="comment">//&amp;表示当前选择器的父级,代表所有父选择器（不仅仅是最近的祖先）</span></span><br><span class="line">  <span class="selector-tag">&amp;</span> <span class="selector-class">.test2</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="混入-mix-in"><a href="#混入-mix-in" class="headerlink" title="混入 mix-in"></a>混入 mix-in</h3><blockquote>
<p>将一系列属性从一个规则集引入到另一个规则集的方法(处理重复 css 样式)</p>
</blockquote>
<ul>
<li>普通混合</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不带输出的混合</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span>() &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>带参数的混合<br>参数只用逗号分隔，但后来添加了分号以支持将逗号分隔的列表值传递给单个参数。<br>逗号分隔的默认值： <code>.name(@param1: red, blue;1px;)</code>.<br>从 Less 4.0 开始，您可以使用括号转义 <code>[~()]</code> 来包装列表值，例如 <code>.name(@param1: ~(red, blue))</code>。 这类似于引用转义语法：<code>~&quot;quote&quot;</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span>(<span class="variable">@w</span>:red,<span class="variable">@h</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@w</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@h</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>(red,<span class="number">10px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>(pink,<span class="number">20px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>!important</code> 关键字<br>在 mixin 调用后使用 !important 关键字将其继承的所有属性标记为 !important：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> (<span class="variable">@bg</span>: <span class="number">#f5f5f5</span>; <span class="variable">@color</span>: <span class="number">#900</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="selector-class">.foo</span>() !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#900</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>重载混入<br>定义多个具有相同名称和参数数量的混合是合法的。 Less 将使用所有可以应用的属性。 如果您使用带有一个参数的 mixin，例如 .mixin(green);，然后将使用具有一个强制参数的所有 mixin 的属性：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>, <span class="variable">@margin</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译成</span></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>命名参数<br>mixin 引用可以通过名称而不是位置来提供参数值。 任何参数都可以通过其名称来引用，并且它们不必按任何特殊顺序排列：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>: black; <span class="variable">@margin</span>: <span class="number">10px</span>; <span class="variable">@padding</span>: <span class="number">20px</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@margin</span>: <span class="number">20px</span>; <span class="variable">@color</span>: <span class="number">#33acfe</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#efca44</span>; <span class="variable">@padding</span>: <span class="number">40px</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>@arguments</code><br><code>@arguments</code> 在 mixin 中有特殊含义，它包含调用 mixin 时传递的所有参数。 如果您不想处理单个参数，这很有用：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-shadow</span>(<span class="variable">@x</span>: <span class="number">0</span>, <span class="variable">@y</span>: <span class="number">0</span>, <span class="variable">@blur</span>: <span class="number">1px</span>, <span class="variable">@color</span>: <span class="number">#000</span>) &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.big-block</span> &#123;</span><br><span class="line">  <span class="selector-class">.box-shadow</span>(<span class="number">2px</span>, <span class="number">5px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结果</span></span><br><span class="line"><span class="selector-class">.big-block</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>高级参数和 <code>@rest</code> 变量<br>mixin 接受可变数量的参数，你可以使用 <code>...</code>。 在变量名之后使用它会将这些参数分配给变量。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(...) &#123;        <span class="comment">// matches 0-N arguments</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>: <span class="number">1</span>, ...) &#123; <span class="comment">// matches 0-N arguments</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>, <span class="variable">@rest</span>...) &#123;</span><br><span class="line">   <span class="comment">// @rest is bound to arguments after @a</span></span><br><span class="line">   <span class="comment">// @arguments is bound to all arguments</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>模板匹配<br>希望根据传递给它的参数更改混入的行为</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(dark, <span class="variable">@color</span>) &#123;<span class="comment">//它期望 dark 作为第一个参数</span></span><br><span class="line">  <span class="attribute">color</span>: darken(<span class="variable">@color</span>, <span class="number">10%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(light, <span class="variable">@color</span>) &#123;<span class="comment">//它需要 light</span></span><br><span class="line">  <span class="attribute">color</span>: lighten(<span class="variable">@color</span>, <span class="number">10%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@_</span>, <span class="variable">@color</span>) &#123;<span class="comment">//它期望任何值。</span></span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="variable">@switch:</span> light;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@switch</span>, <span class="number">#888</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a2a2a2</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125; ```</span><br></pre></td></tr></table></figure>

<ul>
<li>覆盖混入值<br>如果您有多个匹配的 mixins，所有规则都会被评估和合并，并返回具有该标识符的最后一个匹配值。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// library.less</span></span><br><span class="line"><span class="selector-id">#library</span>() &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    prop: foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// customize.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;library&quot;</span>;</span><br><span class="line"><span class="selector-id">#library</span>() &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">    prop: bar;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  my-value: #library.mixin[prop]; <span class="comment">//可以使用属性/变量访问器从已评估的混入规则中选择一个值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  my-value: bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>递归混入</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@counter</span>) <span class="keyword">when</span> (<span class="variable">@counter</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="selector-class">.loop</span>((<span class="variable">@counter</span> - <span class="number">1</span>));    <span class="comment">// next iteration</span></span><br><span class="line">  <span class="attribute">width</span>: (<span class="number">10px</span> * <span class="variable">@counter</span>); <span class="comment">// code for each iteration</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.loop</span>(<span class="number">5</span>); <span class="comment">// launch the loop</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, <span class="variable">@i</span>: <span class="number">1</span>) <span class="keyword">when</span> (<span class="variable">@i</span> =&lt; <span class="variable">@n</span>) &#123;</span><br><span class="line">  <span class="selector-class">.column-</span><span class="variable">@&#123;i&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: (<span class="variable">@i</span> * <span class="number">100%</span> / <span class="variable">@n</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, (<span class="variable">@i</span> + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>混入守卫</li>
</ul>
<p>守卫中可用的比较运算符的完整列表是： <code>&gt;</code>、<code>&gt;=</code>、<code>=</code>、<code>=&lt;</code>、<code>&lt;</code>。 此外，关键字 <code>true</code> 是唯一的真值</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (lightness(<span class="variable">@a</span>) &gt;= <span class="number">50%</span>) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (lightness(<span class="variable">@a</span>) &lt; <span class="number">50%</span>) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#ddd</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#555</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>逻辑运算符<br>使用 <code>and</code> 关键字组合守卫：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (isnumber(<span class="variable">@a</span>)) <span class="keyword">and</span> (<span class="variable">@a</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>您可以通过用逗号 <code>,</code> 分隔守卫来模拟 <code>or</code> 运算符。 如果任何一个守卫评估为真，它被认为是一场比赛：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (<span class="variable">@a</span> &gt; <span class="number">10</span>), (<span class="variable">@a</span> &lt; -<span class="number">10</span>) &#123;</span><br><span class="line">  ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>not</code> 关键字否定条件：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@b</span>) <span class="keyword">when</span> <span class="keyword">not</span> (<span class="variable">@b</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类型检查函数<br><code>iscolor</code><br><code>isnumber</code><br><code>isstring</code><br><code>iskeyword</code><br><code>isurl</code></p>
<p>检查一个值除了是一个数字之外是否在一个特定的单位中<br><code>ispixel</code><br><code>ispercentage</code><br><code>isem</code><br><code>isunit</code></p>
<ul>
<li>别名<br>Mixins 可以赋值给一个变量来作为变量调用调用，也可以用于 map lookup。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#theme</span><span class="selector-class">.dark</span><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">  <span class="selector-class">.colors</span>(light) &#123;</span><br><span class="line">    primary: purple;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.colors</span>(dark) &#123;</span><br><span class="line">    primary: black;</span><br><span class="line">    secondary: grey;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">  <span class="variable">@colors:</span> #theme.dark.navbar.colors(</span><br><span class="line">    dark</span><br><span class="line">  ); <span class="comment">//分配给变量和不带参数调用的 mixin 调用始终需要括号</span></span><br><span class="line">  <span class="variable">@colors:</span> #theme.dark.navbar.colors; <span class="comment">//错误</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@colors</span>[primary];</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">@colors</span>[secondary];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>Extend 是一个 Less 伪类，它将它所放置的选择器与与其引用的匹配的选择器合并。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两种写法</span></span><br><span class="line"><span class="selector-class">.a</span>:<span class="selector-tag">extend</span>(.b, .c) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span>:<span class="selector-tag">extend</span>(.b,</span><br><span class="line">  .c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//继承所有属性</span></span><br><span class="line"><span class="selector-class">.c</span>:<span class="selector-tag">extend</span>(.d all) &#123;</span><br><span class="line">  <span class="comment">// extends all instances of &quot;.d&quot; e.g. &quot;.x.d&quot; or &quot;.d.x&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c</span>:<span class="selector-tag">extend</span>(.d) &#123;</span><br><span class="line">  <span class="comment">// extends only instances where the selector will be output as just &quot;.d&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>继承附加到选择器</li>
</ul>
<p>附加到选择器的扩展看起来像一个普通的伪类，将选择器作为参数。 一个选择器可以包含多个扩展子句，但所有扩展都必须位于选择器的末尾。</p>
<ul>
<li>在选择器之后扩展： <code>pre:hover:extend(div pre)</code>.</li>
<li>选择器和扩展之间的空间是允许的： <code>pre:hover :extend(div pre)</code>.</li>
<li>允许多个扩展： <code>pre:hover:extend(div pre):extend(.bucket tr)</code> - 注意这与 <code>pre:hover:extend(div pre, .bucket tr)</code> 相同</li>
<li>这是不允许的： <code>pre:hover:extend(div pre).nth-child(odd)</code>. 扩展必须在最后</li>
</ul>
<h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><p>允许将来自多个属性的值聚合到单个属性下的逗号或空格分隔列表中,对于背景和转换等属性很有用。</p>
<ul>
<li>逗号<code>+</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>空格<code>+_</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">scale</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: scale(<span class="number">2</span>) rotate(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="import-规则"><a href="#import-规则" class="headerlink" title="@import 规则"></a><code>@import</code> 规则</h3><p>在标准 CSS 中，@import at 规则必须在所有其他类型的规则之前。 但是 Less 不关心你把 @import 语句放在哪里。如果它没有扩展名，则会附加 .less 并将其作为导入的 Less 文件包含在内。</p>
<h4 id="导入选项"><a href="#导入选项" class="headerlink" title="导入选项"></a>导入选项</h4><ul>
<li>reference: 导入外部文件，但除非引用，否则不将导入的样式添加到编译输出。</li>
<li>inline: 在输出中包含源文件但不处理它</li>
<li>less: 将文件视为 Less 文件，无论文件扩展名是什么</li>
<li>css: 将文件视为 CSS 文件，无论文件扩展名是什么</li>
<li>once: 只包含文件一次（这是默认行为）,这意味着该文件仅导入一次，该文件的后续导入语句将被忽略。</li>
<li>multiple: 允许导入多个同名文件。 这是与一次相反的行为。</li>
<li>optional: 允许仅在文件存在时导入该文件。 如果没有 optional 关键字，Less 会在导入找不到的文件时抛出 FileError 并停止编译。</li>
</ul>
<h3 id="plugin-规则"><a href="#plugin-规则" class="headerlink" title="@plugin 规则"></a><code>@plugin</code> 规则</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my-plugin.js</span></span><br><span class="line"><span class="attr">install</span>: <span class="function"><span class="keyword">function</span>(<span class="params">less, pluginManager, functions</span>) </span>&#123;</span><br><span class="line">    functions.add(<span class="string">&#x27;pi&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.PI;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@plugin</span> <span class="string">&quot;my-plugin&quot;</span>;</span><br><span class="line"><span class="selector-class">.show-me-pi</span> &#123;</span><br><span class="line">  value: pi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.show-me-pi</span> &#123;</span><br><span class="line">  value: 3.141592653589793;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="react-使用-less"><a href="#react-使用-less" class="headerlink" title="react 使用 less"></a>react 使用 less</h2><p>在终端中输入<code>npm install less-loader less --save</code><br>我们在项目根目录中找到刚才生成的 config 文件，找到里面的<code>webpack.config.js</code>这个文件：<br>然后搜索<code>sassRegex</code>就可以找到如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// style files regexes</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassRegex = <span class="regexp">/\.(scss|sass)$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassModuleRegex = <span class="regexp">/\.module\.(scss|sass)$/</span>;</span><br><span class="line"><span class="comment">//增加</span></span><br><span class="line"><span class="keyword">const</span> lessRegex = <span class="regexp">/\.less$/</span>;</span><br><span class="line"><span class="keyword">const</span> lessModuleRegex = <span class="regexp">/\.module\.less$/</span>;</span><br></pre></td></tr></table></figure>

<p>接着再搜索<code>sassRegex</code>，声明了变量肯定要用，添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Opt-in support for less (using .scss or .sass extensions).</span></span><br><span class="line"><span class="comment">// By default we support less Modules with the</span></span><br><span class="line"><span class="comment">// extensions .module.less</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: lessRegex,</span><br><span class="line">  <span class="attr">exclude</span>: lessModuleRegex,</span><br><span class="line">  <span class="attr">use</span>: getStyleLoaders(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">// Don&#x27;t consider CSS imports dead code even if the</span></span><br><span class="line">  <span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line">  <span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line">  <span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">  <span class="attr">sideEffects</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// Adds support for CSS Modules, but using less</span></span><br><span class="line"><span class="comment">// using the extension .module.less</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: lessModuleRegex,</span><br><span class="line">  <span class="attr">use</span>: getStyleLoaders(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">      <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="attr">getLocalIdent</span>: getCSSModuleLocalIdent,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">  ),</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>另外，导入 less 还会报错，在根目录的 react-app-env.d.ts 加入</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;*.module.less&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> classes: &#123; <span class="keyword">readonly</span> [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/01/09/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/09/20-00-00/" class="post-title-link" itemprop="url">react Native</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-09 20:00:00" itemprop="dateCreated datePublished" datetime="2021-01-09T20:00:00+08:00">2021-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="React-Native-0-71"><a href="#React-Native-0-71" class="headerlink" title="React Native 0.71"></a>React Native 0.71</h1><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p>注意 Node 的版本应大于等于 <code>16</code>，安装完 Node 后建议设置 npm 镜像（淘宝源）以加速后面的过程（或使用科学上网工具）<br>注意：不要使用 <code>cnpm</code>！cnpm 安装的模块路径比较奇怪，packager 不能正常识别！</p>
<h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><blockquote>
<p>低于 0.67 版本的 React Native 需要 JDK 1.8 版本（官方也称 8 版本）。<br>React Native 需要 <code>Java Development Kit [JDK] 11</code>。你可以在命令行中输入 <code>javac -version</code>（请注意是 javac，不是 java）来查看你当前安装的 JDK 版本。</p>
</blockquote>
<h3 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h3><h4 id="首先下载和安装-Android-Studio"><a href="#首先下载和安装-Android-Studio" class="headerlink" title="首先下载和安装 Android Studio"></a>首先下载和安装 Android Studio</h4><p>国内用户可能无法打开官方链接，请自行使用搜索引擎搜索可用的下载链接。安装界面中选择”Custom”选项，确保选中了以下几项：</p>
<ul>
<li><code>Android SDK</code></li>
<li><code>Android SDK Platform</code></li>
<li><code>Android Virtual Device</code><br>然后点击”Next”来安装选中的组件。</li>
</ul>
<h4 id="安装-Android-SDK"><a href="#安装-Android-SDK" class="headerlink" title="安装 Android SDK"></a>安装 Android SDK</h4><p>Android Studio 默认会安装最新版本的 Android SDK。目前编译 React Native 应用需要的是<code>Android 13 (Tiramisu)</code>版本的 SDK（注意 SDK 版本不等于终端系统版本，RN 目前支持 android 5 以上设备）。你可以在 Android Studio 的 SDK Manager 中选择安装各版本的 SDK。</p>
<p>你可以在 Android Studio 的欢迎界面中找到 SDK Manager。点击”Configure”，然后就能看到”SDK Manager”。</p>
<p>SDK Manager 还可以在 Android Studio 的”Preferences”菜单中找到。具体路径是<code>Appearance &amp; Behavior → System Settings → Android SDK</code>。</p>
<p>在 SDK Manager 中选择”SDK Platforms”选项卡，然后在右下角勾选”Show Package Details”。展开 Android 13 (Tiramisu)选项，确保勾选了下面这些组件（重申你必须使用稳定的代理软件，否则可能都看不到这个界面）：</p>
<ul>
<li><code>Android SDK Platform 33</code></li>
<li><code>Intel x86 Atom_64 System Image</code>,<code>Google APIs Intel x86 Atom System Image</code>（官方模拟器镜像文件，使用非官方模拟器不需要安装此组件）</li>
</ul>
<p>然后点击”SDK Tools”选项卡，同样勾中右下角的”Show Package Details”。展开”<code>Android SDK Build-Tools</code>“选项，确保选中了 React Native 所必须的<code>33.0.0</code>版本。你可以同时安装多个其他版本。</p>
<p>最后点击”Apply”来下载和安装这些组件。</p>
<h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><p>打开<code>控制面板</code> -&gt; <code>系统和安全</code> -&gt; <code>系统</code> -&gt; <code>高级系统设置</code> -&gt; <code>高级</code> -&gt; <code>环境变量</code> -&gt; <code>新建</code>，创建一个名为<code>ANDROID_HOME</code>的环境变量（系统或用户变量均可），指向你的 Android SDK 所在的目录（具体的路径可能和下图不一致，请自行确认）<br>SDK 默认是安装在下面的目录：<code>C:\Users\你的用户名\AppData\Local\Android\Sdk</code></p>
<p>你可以在 Android Studio 的”Preferences”菜单中查看 SDK 的真实路径，具体是<code>Appearance &amp; Behavior</code> → <code>System Settings</code> → <code>Android SDK。</code></p>
<p>你需要关闭现有的命令符提示窗口然后重新打开，这样新的环境变量才能生效。</p>
<p>把一些工具目录添加到环境变量 Path<br>打开<code>控制面板</code> -&gt; <code>系统和安全</code> -&gt; <code>系统</code> -&gt; <code>高级系统设置</code> -&gt; <code>高级</code> -&gt; <code>环境变量</code>，选中<code>Path</code>变量，然后点击编辑。点击新建然后把这些工具目录路径添加进去：platform-tools、emulator、tools、tools/bin</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%ANDROID_HOME%\platform-tools</span><br><span class="line">%ANDROID_HOME%\emulator</span><br><span class="line">%ANDROID_HOME%\tools</span><br><span class="line">%ANDROID_HOME%\tools\bin</span><br></pre></td></tr></table></figure>

<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><blockquote>
<p>如果你之前全局安装过旧的 react-native-cli 命令行工具，请使用 npm uninstall -g react-native-cli 卸载掉它以避免一些冲突：<br><code>npm uninstall -g react-native-cli @react-native-community/cli</code></p>
</blockquote>
<h3 id="使用-React-Native-内建的命令工具进行创建，也可以使用-node-自带的-npx-命令来安装"><a href="#使用-React-Native-内建的命令工具进行创建，也可以使用-node-自带的-npx-命令来安装" class="headerlink" title="使用 React Native 内建的命令工具进行创建，也可以使用 node 自带的 npx 命令来安装"></a>使用 React Native 内建的命令工具进行创建，也可以使用 node 自带的 npx 命令来安装</h3><blockquote>
<p>请不要在目录、文件名中使用中文、空格等特殊符号。请不要单独使用常见的关键字作为项目名（如 class, native, new, package 等等）。请不要使用与核心模块同名的项目名（如 react, react-native 等）。<br>请不要在某些权限敏感的目录例如 System32 目录中 init 项目！会有各种权限限制导致不能运行！<br>请不要使用一些移植的终端环境，例如 git bash 或 mingw 等等，这些在 windows 下可能导致找不到环境变量。请使用系统自带的命令行（CMD 或 powershell）运行。<br><code>npx react-native@latest init test_project</code><br>或指定版本<br><code>npx react-native@X.XX.X init AwesomeProject --version X.XX.X</code></p>
</blockquote>
<h3 id="准备-Android-设备"><a href="#准备-Android-设备" class="headerlink" title="准备 Android 设备"></a>准备 Android 设备</h3><p>使用 Android 真机<br>你也可以使用 Android 真机来代替模拟器进行开发，只需用 usb 数据线连接到电脑，然后遵照在设备上运行这篇文档的说明操作即可。</p>
<p>使用 Android 模拟器<br>你可以使用 Android Studio 打开项目下的”android”目录，然后可以使用”AVD Manager”来查看可用的虚拟设备,如果你刚刚才安装 Android Studio，那么可能需要先创建一个虚拟设备。点击”Create Virtual Device…”，然后选择所需的设备类型并点击”Next”，然后选择 Tiramisu API Level 33 image.</p>
<p>使用第三方模拟器<br>Genymotion<br>官方下载地址：<a target="_blank" rel="noopener" href="https://www.genymotion.com/download/">https://www.genymotion.com/download/</a><br>提示：如果你的电脑上已经单独安装了 VirtualBox 虚拟机软件，可以只下载 35MB 的 Genymotion。<br>在下载完成之后,在 Genymotion 面板就出现了你刚刚下载的模拟器,但是我们选择还不能启动,还有关键一步没有设置,就是在 Genymotion 软件中设置 Android SDK 的路径——–点击 Settings–ADB–Use custom Android SDK tools(自定义 AndroidSDK 工具)–Briwse ,,然后选择你的 AndroidSDK 的安装路径,如果路径没有问题,在下面就会出现 Android SDK tools found successfully 的提示,然后就可以了,</p>
<p>夜神模拟器<br><code>adb connect 127.0.0.1:62001</code></p>
<blockquote>
<p>启动 react native 项目，android studio 编辑器里的模拟器可以正常启动，传输至夜神模拟器报错<br>检查 Android SDK 的 adb 版本和夜神模拟器的 adb 版本是否一致<br>使用命令 <code>adb version</code> 查看 Android SDK 的 adb 版本<br>使用 <code>Nox_adb version</code> 查看夜神模拟器的 adb 版本（需进入夜神模拟器安装目录/bin 文件夹下）</p>
</blockquote>
<p>解决方案</p>
<p>找到 Android SDK 的 adb 文件路径：{安装 Path}\android-sdk\platform-tools<br><code>adb.exe</code><br><code>AdbWinApi.dll</code><br><code>AdbWinUsbApi.dll</code><br>将上面三个 Android SDK 的 adb 文件替换夜神模拟器的 adb 文件(夜神模拟器 adb 文件路径：{安装 Path}\Nox\bin)<br>删除夜神模拟器 bin 路径下的<code>nox_adb.exe</code>文件，再复制一份 Android SDK 的<code>adb.exe</code>文件到夜神模拟器 bin 路径下并重命名为<code>nox_adb.exe</code></p>
<p>替换完成后，再次使用命令 adb version 和 Nox_adb version 查看 Android SDK 和夜神模拟器的 adb 版本是否一致。<br>若一致，重新打开模拟器使用命令 adb connect 127.0.0.1:62001 连接模拟器即可</p>
<ul>
<li>编译并运行 React Native 应用</li>
</ul>
<p>确保你先运行了模拟器或者连接了真机，然后在你的项目目录中运行<code>yarn android</code>或者<code>yarn react-native run-android</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> AwesomeProject</span><br><span class="line">yarn android</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">yarn react-native run-android</span><br></pre></td></tr></table></figure>

<p>此命令会对项目的原生部分进行编译，同时在另外一个命令行中启动 Metro 服务对 js 代码进行实时打包处理（类似 webpack）。Metro 服务也可以使用<code>yarn start</code>命令单独启动。</p>
<p>如果配置没有问题，你应该可以看到应用自动安装到设备上并开始运行。注意第一次运行时需要下载大量编译依赖，耗时可能数十分钟。此过程严重依赖稳定的代理软件，否则将频繁遭遇链接超时和断开，导致无法运行。</p>
<p>也可以尝试阿里云提供的 maven 镜像，将<code>android/build.gradle</code>中加入</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/central&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/public&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/jcenter&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://https://maven.aliyun.com/repository/apache-snapshots&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/gradle-plugin&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/mapr-public&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/grails-core&#x27;</span> &#125;</span><br><span class="line">       maven &#123; url <span class="string">&#x27;https://repo1.maven.org/maven2/&#x27;</span> &#125;</span><br><span class="line">       mavenCentral()</span><br><span class="line">       google()</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><code>npx react-native run-android</code>只是运行应用的方式之一。你也可以在 Android Studio 中直接运行应用。</p>
<p>译注：建议在 run-android 成功后再尝试使用 Android Studio 启动。请不要轻易点击 Android Studio 中可能弹出的建议更新项目中某依赖项的建议，否则可能导致无法运行。</p>
<p>如果你无法正常运行，遇到奇奇怪怪的红屏错误，先回头仔细对照文档检查，然后可以看看问题讨论区。不同时期不同版本可能会碰到不同的问题，我们会在论坛中及时解答更新。但请注意千万不要执行 bundle 命令，那样会导致代码完全无法刷新。</p>
<h3 id="使用-TypeScript-开始新项目"><a href="#使用-TypeScript-开始新项目" class="headerlink" title="使用 TypeScript 开始新项目"></a>使用 TypeScript 开始新项目</h3><p>如果您要开始一个新项目，则有几种不同的上手方法。 您可以使用 TypeScript 模板:</p>
<p><code>npx react-native init MyApp --template react-native-template-typescript</code></p>
<p>如果以上命令失败，则可能是您的 PC 上全局安装了旧版本的<code>react-native</code>或<code>react-native-cli</code>。 尝试卸载 cli 并使用 npx 运行 cli.</p>
<p>您可以使用具有两个 TypeScript 模板的 Expo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g expo-cli</span><br><span class="line">expo init MyTSProject</span><br></pre></td></tr></table></figure>

<p>或者，您可以使用 Ignite，它也具有 TypeScript 模板:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g ignite-cli</span><br><span class="line">ignite new MyTSProject</span><br></pre></td></tr></table></figure>

<p>在已有的项目中添加 TypeScript<br>将 TypeScript 以及 React Native 和 Jest 的依赖添加到您的项目中。<br><code>yarn add --dev typescript @types/jest @types/react @types/react-native @types/react-test-renderer</code></p>
<p>或<br><code>npm install --save-dev typescript @types/jest @types/react @types/react-native @types/react-test-renderer</code></p>
<p>添加一个 TypeScript 配置文件。在项目的根目录中创建一个 tsconfig.json：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span>: <span class="string">&quot;react-native&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lib&quot;</span>: [<span class="string">&quot;es2017&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;types&quot;</span>: [<span class="string">&quot;react-native&quot;</span>, <span class="string">&quot;jest&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;esnext&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">    <span class="string">&quot;babel.config.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;metro.config.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jest.config.js&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建一个 jest.config.js 文件来配置 Jest 以使用 TypeScript:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">preset</span>: <span class="string">&quot;react-native&quot;</span>,</span><br><span class="line">  <span class="attr">moduleFileExtensions</span>: [<span class="string">&quot;ts&quot;</span>, <span class="string">&quot;tsx&quot;</span>, <span class="string">&quot;js&quot;</span>, <span class="string">&quot;jsx&quot;</span>, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;node&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>将 JavaScript 文件重命名为<code>* .tsx</code>:<br>请保留<code>./index.js</code>入口文件，否则将在打包生产版本时遇到问题。</p>
<p>运行 <code>yarn tsc</code> 对 TypeScript 文件进行类型检查。<br>TypeScript 和 React Native 是如何工作的<br>无需额外配置，和非 TypeScript 的 React Native 项目一样都是直接通过 Babel 体系 将您的文件转换为 JavaScript。我们建议您只使用 TypeScript 编译器的类型检查功能（而不是编译）。如果您有已经存在的 TypeScript 代码需要迁移到 React Native，这里有一些关于使用 Babel 而不是 TypeScript 编译器的注意事项。</p>
<h3 id="Icon-图标"><a href="#Icon-图标" class="headerlink" title="Icon 图标"></a>Icon 图标</h3><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>安装<code>npm i react-native-vector-icons -D</code><br>项目中引入 <code>import FontAwesome from &#39;react-native-vector-icons/FontAwesome&#39;</code><br>使用 <code>&lt;FontAwesome name=&quot;home&quot; size=&#123;26&#125; /&gt;</code><br>[图标预览]<a target="_blank" rel="noopener" href="https://oblador.github.io/react-native-vector-icons">https://oblador.github.io/react-native-vector-icons</a><br><a target="_blank" rel="noopener" href="https://github.com/oblador/react-native-vector-icons">https://github.com/oblador/react-native-vector-icons</a>[github]</p>
<h4 id="Android-无法正常显示图标"><a href="#Android-无法正常显示图标" class="headerlink" title="Android 无法正常显示图标"></a>Android 无法正常显示图标</h4><p>在 <code>android/app/build.gradle</code> （注意：不是 <code>android/build.gradle</code>） 下加入</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">project</span>.ext.vectoricons = [</span><br><span class="line">    iconFontNames: [ <span class="string">&#x27;FontAwesome.ttf&#x27;</span>] <span class="comment">// Name of the font files you want to copy</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">apply <span class="keyword">from</span>: <span class="keyword">file</span>(<span class="string">&quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>或者直接引入全部</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="keyword">from</span>: <span class="keyword">file</span>(<span class="string">&quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="ios-报错-unRecognized-font-family-‘FontAwesome’"><a href="#ios-报错-unRecognized-font-family-‘FontAwesome’" class="headerlink" title="ios 报错 unRecognized font family ‘FontAwesome’"></a>ios 报错 unRecognized font family ‘FontAwesome’</h4><ol>
<li>使用 Xcode 打开项目下的 ios 文件夹 或者 XXX.xcodeproj 文件（XXX 为项目名）</li>
<li>打开之后目录中会有一个与项目名称同名的文件夹，右键单击这个文件夹，选择 Add files to XXX，加入要使用的.ttf 文件或者是 react-native-vector-icons 下的整个 Fonts 文件夹，记得勾选上 Create floders 中的 create group 和 Add to targets 中的 XXX。</li>
<li>编辑 与项目名同名的文件夹 下的 info.plist，并加入行 <code>Fonts provided by application</code>，在该行中加入 字体文件名</li>
<li>注意，每个被 add 的.ttf 文件都要在 <code>Fonts provided by application</code> 中加入，当 add 的是整个 Fonts 文件夹时，文件夹中所有.ttf 文件都要在<code>Fonts provided by application</code> 中加入，否则会出现 We ran “xcodebuild” command but it exited with error code 65. 这样的错误</li>
<li>注意，ios 的 font-family 要求与字体文件字体名相同（不是文件名）比如从阿里妈妈下载的文件 字体名是 iconfont，那么在 XXX.js 中就要使用 iconfont<br><code>const iconSet = createIconSet(glyphMap, &#39;iconfont&#39;, &#39;MyIcon.ttf&#39;); //阿里妈妈的图标font-family为iconfont</code></li>
</ol>
<h3 id="RN-中的样式与-CSS-的不同"><a href="#RN-中的样式与-CSS-的不同" class="headerlink" title="RN 中的样式与 CSS 的不同"></a>RN 中的样式与 CSS 的不同</h3><p>1、没有继承性<br>RN 中的继承只发生在 Text 组件上</p>
<p>2、样式名采用小驼峰命名<br>fontSize VS font-size</p>
<p>3、所有尺寸都没有单位<br>width: 100</p>
<p>4、有一些特殊的样式名<br>marginHorizontal（水平外边距）, marginVertical （垂直外边距）</p>
<p>RN 样式的声明方式<br>1、通过 style 属性直接声明<br>属性值为对象：<code>&lt;组件 style=&#123;&#123;样式&#125;&#125; /&gt;</code><br>属性值为数组：<code>&lt;组件 style=&#123;[&#123;样式 1&#125;, ..., &#123;样式 N&#125;]&#125; /&gt;</code></p>
<p>2、在 style 属性中调用 StyleSheet 声明的样式<br>引入：<code>import &#123;StyleSheet, View&#125; from &#39;react-native&#39;</code><br>声明：<code>const styles = StyleSheet.create(&#123;foo: &#123;样式 1&#125;, bar: &#123;样式 2&#125;&#125;)</code><br>使用：<code>&lt;View style=&#123;[styles.foo, styles.bar]&#125;&gt;内容&lt;/View&gt;</code></p>
<p>使用 Flexbox 布局</p>
<p>在 RN 中使用 flexbox 规则来指定某个组件的子元素的布局，flexbox 可以在不同屏幕尺寸上提供一致的布局结构<br>flexDirection<br>声明主轴的方向，子元素是应该沿着 水平轴（row）方向排列，还是沿着 竖直轴（column）方向排列<br>在 Web 里默认是 水平轴（row），在 RN 里默认是 垂直轴（column）<br>justifyContent<br>在组件的 style 中指定 justifyContent 可以决定其子元素沿着 主轴 的排列方式</p>
<p>取值：<br>flex-start: 默认值，左对齐<br>flex-end: 右对齐<br>center: 居中<br>space-between: 两端对齐，项目之间的间隔都相等<br>space-around: 每个项目两侧的间隔相等。所以，项目之间的间隔比项目与两端的间隔大一倍<br>space-evenly：每个项目之间的间隔相等，均匀排列每个项目<br>alignItems<br>在组件的 style 中指定 alignItems 可以决定其子元素沿着 交叉轴 的排列方式</p>
<p>取值：<br>stretch: 默认值，根据容器交叉轴的高度撑满容器子元素<br>注意：要使 stretch 选项生效的话，子元素在 交叉轴 方向上不能有固定的尺寸<br>flex-end: 右对齐<br>center: 居中<br>space-between: 两端对齐，项目之间的间隔都相等<br>space-around: 每个项目两侧的间隔相等。所以，项目之间的间隔比项目与两端的间隔大一倍<br>space-evenly：每个项目之间的间隔相等，均匀排列每个项目</p>
<p>alignSelf<br>alignSelf 和 alignItems 具有相同的取值属性和作用，区别是：<br>alignItems 作用于容器下所有的子元素<br>alignSelf 作用于单个子元素，并且会覆盖 alignItems 指定的属性</p>
<p>flexWrap<br>flexWrap 属性作用于容器上，控制子元素溢出时如何在主轴上排列。默认是强制不换行</p>
<p>相对定位与绝对定位<br>一个元素的 position 类型决定了其在父元素中的位置</p>
<p>position 取值：<br>relative：（默认值），元素的位置取决于文档流<br>absolute：元素会脱离正常的文档流</p>
<p>宽度与高度<br>组件的宽度和高度决定了其在屏幕上显示的尺寸</p>
<p>指定宽高<br>RN 中的尺寸都是 无单位的，表示的是与设备像素密度无关的逻辑像素点<br>指定宽高一般用于在不同尺寸的屏幕上都显示成一样的大小</p>
<p>弹性（Flex）宽高<br>在组件中使用 flex 可以使其在可利用的空间中动态地扩张或收缩，一般会使用 flex：1 来指定某个组件扩张以撑满所有剩余的空间</p>
<p>如果有多个并列的子组件使用了 flex：1，则这些子组件会平分父容器的剩余的空间</p>
<p>如果这些并列的子组件的 flex 值不一样，则谁的值更大，谁占据剩余空间的比例就更大</p>
<p>注意：使用 flex 指定宽高的前提是其父容器的尺寸不为零</p>
<p>百分比宽高<br>用法和注意事项同 flex 宽高</p>
<p>设备宽高</p>
<p>用法：<br>获取设备宽度：Dimensions.get(‘window’).width<br>获取设备高度：Dimensions.get(‘window).height</p>
<h3 id="吐司-toast"><a href="#吐司-toast" class="headerlink" title="吐司 toast"></a>吐司 toast</h3><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>yarn add react-native-root-toast</code></p>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Toast.show(<span class="string">&quot;This is a message&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">duration</span>: Toast.durations.LONG,</span><br><span class="line">  <span class="attr">position</span>: Toast.positions.BOTTOM,</span><br><span class="line">  <span class="attr">shadow</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">animation</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">hideOnPress</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">delay</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">onShow</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// calls on toast\`s appear animation start</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onShown</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// calls on toast\`s appear animation end.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onHide</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// calls on toast\`s hide animation start.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onHidden</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// calls on toast\`s hide animation end.</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="本地存储-AsyncStorage"><a href="#本地存储-AsyncStorage" class="headerlink" title="本地存储 AsyncStorage"></a>本地存储 AsyncStorage</h3><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p><code>yarn add @react-native-async-storage/async-storage</code></p>
<h3 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> AsyncStorage.setItem(<span class="string">&quot;my-key&quot;</span>, textInput);</span><br><span class="line"><span class="keyword">const</span> value = <span class="keyword">await</span> AsyncStorage.getItem(<span class="string">&quot;my-key&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="error"><a href="#error" class="headerlink" title="error"></a>error</h2><h3 id="index-android-bundle"><a href="#index-android-bundle" class="headerlink" title="index.android.bundle"></a>index.android.bundle</h3><ul>
<li>清除缓存<code>./gradlew clean</code></li>
<li>卸载 app</li>
</ul>
<h3 id="Could-not-download-react-android-0-71-3-debug-aar"><a href="#Could-not-download-react-android-0-71-3-debug-aar" class="headerlink" title="Could not download react-android-0.71.3-debug.aar"></a>Could not download react-android-0.71.3-debug.aar</h3><p>根据报错提供的地址，复制的下载链接到浏览器下载，放到如下位置（前提是你没有改过依赖的存放路径）：<br>C:\Users\你的用户名/.gradle\caches\modules-2\files-2.1，接下来在哪个文件夹就因你缺失的文件的不同而不同了，我的是如下路径：<br>C:\Users\Duan/.gradle\caches\modules-2\files-2.1\com.facebook.react\react-android\0.71.3<br>但是一般都能在报错信息中找到，其中有多个文件夹，把刚刚下好的文件放到其中一个含有.pom 文件的文件夹里就对了然后重新运行就好了！！！</p>
<h3 id="“Deprecated-Gradle-features-were-used-in-this-build-making-it-incompatible-with-Gradle-7-0”"><a href="#“Deprecated-Gradle-features-were-used-in-this-build-making-it-incompatible-with-Gradle-7-0”" class="headerlink" title="“Deprecated Gradle features were used in this build, making it incompatible with Gradle 7.0”"></a>“Deprecated Gradle features were used in this build, making it incompatible with Gradle 7.0”</h3><p>根据提示，用如下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradlew --warning-mode all</span><br></pre></td></tr></table></figure>

<p>进行编译,提示如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; Configure project :</span><br><span class="line">The compile configuration has been deprecated for dependency declaration. This will fail with an error in Gradle 7.0. Please use the implementation configuration instead.</span><br></pre></td></tr></table></figure>

<p>很显然，在 Gradle 7.0，不支持 compile 了，所以，在 build.gradle 文件中，将 compile 改为 implementation，问题就解决了。在 build.gradle 文件中，将 compile 改为 implementation</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2021/01/01/10-12-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/01/10-12-33/" class="post-title-link" itemprop="url">DOM/BOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-01 10:12:33" itemprop="dateCreated datePublished" datetime="2021-01-01T10:12:33+08:00">2021-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="DOM（文档对象模型-document-object-model）"><a href="#DOM（文档对象模型-document-object-model）" class="headerlink" title="DOM（文档对象模型 document object model）"></a>DOM（文档对象模型 document object model）</h2><blockquote>
<p>用来提供一套操作网页内容的功能<br>HTML DOM 方法是您能够（在 HTML 元素上）执行的动作。<br>HTML DOM 属性是您能够设置或改变的 HTML 元素的值。<br>dom 树：以树状结构，体现标签与标签之间的关系</p>
</blockquote>
<ul>
<li><p>通过这个对象模型，JavaScript 获得创建动态 HTML 的所有力量：</p>
<ul>
<li>JavaScript 能改变页面中的所有 HTML 元素</li>
<li>JavaScript 能改变页面中的所有 HTML 属性</li>
<li>JavaScript 能改变页面中的所有 CSS 样式</li>
<li>JavaScript 能删除已有的 HTML 元素和属性</li>
<li>JavaScript 能添加新的 HTML 元素和属性</li>
<li>JavaScript 能对页面中所有已有的 HTML 事件作出反应</li>
<li>JavaScript 能在页面中创建新的 HTML 事件</li>
</ul>
</li>
<li><p>节点类型:</p>
<ul>
<li>元素节点：<code>&lt;div&gt;&lt;/div&gt;</code></li>
<li>属性节点：id=“div1”</li>
<li>文本节点： 文本</li>
</ul>
</li>
</ul>
<h3 id="结点的获取"><a href="#结点的获取" class="headerlink" title="结点的获取"></a>结点的获取</h3><ul>
<li><p>document.getElementById(id);</p>
</li>
<li><p>node.getElementsByTagName(标签名);<br>通过标签名获取符合条件的元素节点，返回：伪数组</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取ol下的li节点</span></span><br><span class="line">bar oOl=<span class="built_in">document</span>.getElementById(<span class="string">&quot;ol1&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> lis=oOl.getElementsByTagName(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="comment">//返回的是数组</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>node.getElementsByClassName(class 名);<br>通过 class 名字获取符合条件的元素节点；(IE8 以下不兼容）</p>
</li>
<li><p>document.getElementByName(name 属性的值);<br>通过 name 属性的值获取符合条件的元素节点，一般用于表单元素,因为其他元素使用 name 属性没用</p>
</li>
<li><p>document.querySelector(CSS 选择器格式字符串);<br>返回一个元素节点，找到符合条件的第一个元素节点</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//id=ol1</span></span><br><span class="line">  <span class="keyword">var</span> node = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#ol1&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//tagName=&#x27;li&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> node = <span class="built_in">document</span>.querySelector(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//class=box</span></span><br><span class="line">  <span class="keyword">var</span> node = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.box&quot;</span>);</span><br><span class="line">  node.style.backgroundColor = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>document.querySelectorAll(CSS 选择器格式字符串);<br>返回一个数组</li>
</ul>
<h4 id="js-获取子节点的方式"><a href="#js-获取子节点的方式" class="headerlink" title="js 获取子节点的方式"></a>js 获取子节点的方式</h4><ol>
<li>通过获取 dom 方式直接获取子节点<br>其中 test 的父标签 id 的值，div 为标签的名字。getElementsByTagName 是一个方法。返回的是一个数组。在访问的时候要按数组的形式访问。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).getElementsByTagName(<span class="string">&quot;div&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过<code>childNodes</code>获取子节点</li>
</ol>
<p>使用 childNodes 获取子节点的时候，childNodes 返回的是子节点的集合，是一个数组的格式。他会把文本，换行和空格也当成是节点信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).childNodes;</span><br></pre></td></tr></table></figure>

<p>为了不显示不必须的换行的空格，我们如果要使用 childNodes 就必须进行必要的过滤。通过正则表达式式取掉不必要的信息。下面是过滤掉</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//去掉换行的空格</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; b.length; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (b[i].nodeName == <span class="string">&quot;#text&quot;</span> &amp;&amp; !<span class="regexp">/\s/</span>.test(b.nodeValue)) &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).removeChild(b[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印测试</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; b.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i + <span class="string">&quot;---------&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(b[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//补充 document.getElementById(&quot;test&quot;).childElementCount; 可以直接获取长度 同length</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>通过<code>children</code>来获取子节点</li>
</ol>
<p>利用 children 来获取子元素是最方便的，他也会返回出一个数组。对其获取子元素的访问只需按数组的访问形式即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).children[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>获取第一个子节点</li>
</ol>
<p>firstChild 来获取第一个子元素，但是在有些情况下我们打印的时候会显示 undefined，这是什么情况呢？？其实 firstChild 和 childNodes 是一样的，在浏览器解析的时候会把他当换行和空格一起解析，其实你获取的是第一个子节点，只是这个子节点是一个换行或者是一个空格而已。那么不要忘记和 childNodes 一样处理呀。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).firstChild;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>firstElementChild 获取第一个子节点</li>
</ol>
<p>使用 firstElementChild 来获取第一个子元素的时候，这就没有 firstChild 的那种情况了。会获取到父元素第一个子元素的节点 这样就能直接显示出来文本信息了。他并不会匹配换行和空格信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).firstElementChild;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>获取最后一个子节点</li>
</ol>
<p>lastChild 获取最后一个子节点的方式其实和 firstChild 是类似的。同样的 lastElementChild 和 firstElementChild 也是一样的。不再赘余。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getLastChildA = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).lastChild;</span><br><span class="line"><span class="keyword">var</span> getLastChildB = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).lastElementChild;</span><br></pre></td></tr></table></figure>

<p>一个包解决你所有的 JS 问题,点击获取</p>
<h4 id="js-获取父节点的方式"><a href="#js-获取父节点的方式" class="headerlink" title="js 获取父节点的方式"></a>js 获取父节点的方式</h4><ol>
<li><code>parentNode</code>获取父节点</li>
</ol>
<p>获取的是当前元素的直接父元素。parentNode 是 w3c 的标准。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).parentNode;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>parentElement</code>获取父节点</li>
</ol>
<p>parentElement 和 parentNode 一样，只是 parentElement 是 ie 的标准。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).parentElement;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>offsetParent 获取所有父节点</li>
</ol>
<p>一看 offset 我们就知道是偏移量 其实这个是于位置有关的上下级 ，直接能够获取到所有父亲节点， 这个对应的值是 body 下的所有节点信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).offsetParent;</span><br></pre></td></tr></table></figure>

<h4 id="js-获取兄弟节点的方式"><a href="#js-获取兄弟节点的方式" class="headerlink" title="js 获取兄弟节点的方式"></a>js 获取兄弟节点的方式</h4><ol>
<li><p>通过获取父亲节点再获取子节点来获取兄弟节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother1 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).parentNode.children[<span class="number">1</span>];</span><br></pre></td></tr></table></figure></li>
<li><p>获取上一个兄弟节点</p>
</li>
</ol>
<p>在获取前一个兄弟节点的时候可以使用<code>previousSibling</code>和<code>previousElementSibling</code>。他们的区别是<code>previousSibling</code>会匹配字符，包括换行和空格，而不是节点。<code>previousElementSibling</code>则直接匹配节点。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother2 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).previousElementSibling;</span><br><span class="line"><span class="keyword">var</span> brother3 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).previousSibling;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>获取下一个兄弟节点</li>
</ol>
<p>同<code>previousSibling</code>和<code>previousElementSibling</code>，<code>nextSibling</code>和<code>nextElementSibling</code>也是类似的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother4 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).nextElementSibling;</span><br><span class="line"><span class="keyword">var</span> brother5 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>).nextSibling;</span><br></pre></td></tr></table></figure>

<h3 id="获取样式"><a href="#获取样式" class="headerlink" title="获取样式"></a>获取样式</h3><ul>
<li>node.currentStyle[‘height’]; //IE 兼容</li>
<li>getComputedStyle<a href="'height'">node</a>; //火狐、谷歌</li>
</ul>
<p>获取的是当前有效的样式</p>
<ul>
<li>node.getAttribute(“class”);</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增加属性,支持自定义</span></span><br><span class="line">node.setAttribute(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;box&quot;</span>);</span><br><span class="line">node.setAttribute(<span class="string">&quot;jjj&quot;</span>, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"><span class="comment">//自定义属性data-</span></span><br><span class="line">node.setAttribute(<span class="string">&quot;data-jjj&quot;</span>, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.setAttribute(<span class="string">&quot;data-a-b&quot;</span>, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.setAttribute(<span class="string">&quot;data-tB&quot;</span>, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.dataset.jjj;</span><br><span class="line">node.dataset.aB;</span><br><span class="line">node.dataset.tb;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除属性</span></span><br><span class="line">node.removeAttribute(<span class="string">&quot;class&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="修改样式"><a href="#修改样式" class="headerlink" title="修改样式"></a>修改样式</h3><ul>
<li>通过 style 属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.style.background = <span class="string">&quot;red&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>通过 className 属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.className = <span class="string">&quot;test&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>通过 classList 属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会覆盖原有类名</span></span><br><span class="line">el.classList.add(<span class="string">&quot;类名&quot;</span>);</span><br><span class="line">el.classList.remove(<span class="string">&quot;类名&quot;</span>);</span><br><span class="line">el.classList.toggle(<span class="string">&quot;类名&quot;</span>); <span class="comment">//有则移除，没有则添加</span></span><br></pre></td></tr></table></figure>

<h3 id="获取内容"><a href="#获取内容" class="headerlink" title="获取内容"></a>获取内容</h3><ul>
<li>innerHTML<br>获取标签内容，写入时会解析标签</li>
<li>innerText<br>获取标签间纯文本，不会解析标签</li>
<li>outerHTML<br>会替换整个标签</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> odiv=<span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(odiv.innerHTML);</span><br><span class="line">odiv.innerHTML=<span class="string">&quot;&lt;h1&gt;jjjjjjjj&lt;/h1&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(odiv.innerText);</span><br><span class="line"><span class="built_in">console</span>.log(odiv.outerHTML);</span><br></pre></td></tr></table></figure>

<h3 id="获取子节点"><a href="#获取子节点" class="headerlink" title="获取子节点"></a>获取子节点</h3><ul>
<li><p>childNode<br>访问当前节点下所有的子节点</p>
</li>
<li><p>firstChild<br>访问子节点中的首位</p>
</li>
<li><p>lastChild<br>访问子节点中的最后一位</p>
</li>
<li><p>nextSibling 访问当前节点兄弟节点中的下一个节点</p>
</li>
<li><p>previousSibling 访问当前节点兄弟节点中的上一个节点</p>
</li>
</ul>
<blockquote>
<p>上面这些属性都包含文本节点</p>
</blockquote>
<ul>
<li>children</li>
<li>firstElementChild</li>
<li>lastElementChild</li>
<li>nextElementSibling</li>
<li>previousElementSibling</li>
</ul>
<blockquote>
<p>上面这些属性只获取子节点中的元素节点，不包含文本。</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>nodeType</th>
<th>nodeName</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody><tr>
<td>元素节点</td>
<td>1</td>
<td>标签名</td>
<td>null</td>
</tr>
<tr>
<td>属性节点</td>
<td>2</td>
<td>属性名</td>
<td>属性值</td>
</tr>
<tr>
<td>文本节点</td>
<td>3</td>
<td>#text</td>
<td>文本内容</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> oDiv=<span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.childNodes.length); <span class="comment">//返回数组，里面为全部子元素，包括换行，缩进</span></span><br><span class="line"><span class="built_in">console</span>.log(oDiv.childNodes[<span class="number">0</span>].nodeName);</span><br><span class="line">&#125;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> &gt;</span> <span class="tag">&lt;<span class="name">em</span>&gt;</span> text<span class="tag">&lt;/<span class="name">em</span>&gt;</span> divtext <span class="tag">&lt;<span class="name">strong</span>&gt;</span>text<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取当前元素节点上的所有的属性节点"><a href="#获取当前元素节点上的所有的属性节点" class="headerlink" title="获取当前元素节点上的所有的属性节点"></a>获取当前元素节点上的所有的属性节点</h3><ul>
<li>attrbutes</li>
</ul>
<p>获取当前元素节点上的所有的属性节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes);</span><br></pre></td></tr></table></figure>

<p>返回的是集合：</p>
<ol>
<li> 无序</li>
<li> 不重复</li>
</ol>
<h3 id="获取其中的某一个属性节点"><a href="#获取其中的某一个属性节点" class="headerlink" title="获取其中的某一个属性节点"></a>获取其中的某一个属性节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//div中title=&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes.getNamedItem(<span class="string">&quot;title&quot;</span>).nodeName);</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes.getNamedItem(<span class="string">&quot;title&quot;</span>).nodeType);</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes.getNamedItem(<span class="string">&quot;title&quot;</span>).nodeValue);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes[<span class="string">&quot;title&quot;</span>].nodeName);</span><br><span class="line"><span class="built_in">console</span>.log(oDiv.attributes[<span class="string">&quot;title&quot;</span>].nodeType);</span><br></pre></td></tr></table></figure>

<h3 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h3><blockquote>
<p>document.write()会覆盖页面上的所有内容</p>
</blockquote>
<ul>
<li>createElement()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.createElement();</span><br><span class="line">参数：标签名</span><br><span class="line">返回值：创建好的节点</span><br></pre></td></tr></table></figure>

<ul>
<li>appendChild(插入元素)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node1.appendChild(node2);</span><br><span class="line">将node2节点插入到node1节点的子节点的末尾;</span><br></pre></td></tr></table></figure>

<ul>
<li>createTextNode()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.createTextNode(文本);</span><br><span class="line">创建文本节点（纯文本）</span><br></pre></td></tr></table></figure>

<ul>
<li>insertBefore(插入元素，在哪个元素前)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.insertBefore(box2, box1);</span><br><span class="line">将box2添加到box1前面;</span><br></pre></td></tr></table></figure>

<ul>
<li>replaceChild()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.replaceChild(box2, box1);</span><br><span class="line">用box2替换掉box1;</span><br></pre></td></tr></table></figure>

<ul>
<li>cloneNode(是否克隆后代节点)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node.cloneNode(); <span class="comment">//克隆自己</span></span><br><span class="line">node.cloneNode(<span class="literal">true</span>); <span class="comment">//克隆自己和本身下的所有子节点</span></span><br><span class="line"><span class="comment">//返回克隆的新节点</span></span><br></pre></td></tr></table></figure>

<ul>
<li>removeChild(删除的元素)</li>
</ul>
<blockquote>
<p>删除元素必须通过父元素删除</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.Child(box1);</span><br><span class="line">删掉box1节点;</span><br></pre></td></tr></table></figure>

<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>); <span class="comment">//div</span></span><br><span class="line">  <span class="keyword">var</span> newP = <span class="built_in">document</span>.createElement(<span class="string">&quot;p&quot;</span>); <span class="comment">//创建一个新的p标签节点</span></span><br><span class="line">  <span class="keyword">var</span> newText = <span class="built_in">document</span>.createTextNode(<span class="string">&quot;jjjj&quot;</span>); <span class="comment">//创建一个字符节点</span></span><br><span class="line">  newP.appendChild(newText); <span class="comment">//将字符节点插入到p节点中</span></span><br><span class="line">  oDiv.appendChild(newP); <span class="comment">//将p节点插入到div节点中</span></span><br><span class="line">  <span class="keyword">var</span> newb = <span class="built_in">document</span>.createElement(<span class="string">&quot;input&quot;</span>); <span class="comment">//新建一个input节点</span></span><br><span class="line">  oDiv.insertBefore(newb, newP); <span class="comment">//将input节点添加到p节点前面</span></span><br><span class="line">  <span class="comment">//doument.body.insertBefore(oP,oDiv); //将oP节点插入到oDiv 前面</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h3><ul>
<li><p>offsetWidth</p>
</li>
<li><p>offsetHeight</p>
</li>
<li><p>offsetLeft</p>
</li>
<li><p>offsetTop</p>
<ol>
<li><p> 在父元素均不设置 position 属性时，在 Chrome，opera 和 IE 浏览器中 offsetLeft 是<em>元素边框外侧</em>到<em>浏览器窗口内侧</em>的距离且 body.offsetLeft=0,在 firefox 浏览器中 offsetLeft 是元素边框外侧到 body 内侧的距离 body.offsetLeft=-边框宽度</p>
</li>
<li><p> 如果父元素是 body 且 body 设置了 position 属性，在 Chrome 和 opera 浏览器中 offsetLeft 是元素边框外侧到 body 边框外侧的距离，在 IE 和 fireForx 浏览器中 offsetLeft 是元素边框外侧到 body 边框内侧的距离</p>
</li>
<li><p> 如果父元素不是 body 元素且设置了 position 属性时，offsetLeft 为元素边框外侧到父元素边框内侧的距离（各浏览器情况一致）。</p>
</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line">  <span class="comment">//alert(getStyle(ODiv,&quot;width&quot;));</span></span><br><span class="line">  alert(oDiv.offsetWidth); <span class="comment">//眼睛能看到的实际宽度（width+border+padding）</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> oDiv2 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div2&quot;</span>);</span><br><span class="line">  alert(oDiv2.offsetLeft); <span class="comment">//眼睛能看到实际距离第一个有定位的父节点的距离。</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="DOM-事件监听器"><a href="#DOM-事件监听器" class="headerlink" title="DOM 事件监听器"></a>DOM 事件监听器</h4><ul>
<li>addEventListerner<br>语法<br><code>element.addEventListener(event, function, useCapture);</code><br>第一个参数是事件的类型（比如 “click” 或 “mousedown”）。第二个参数是当事件发生时我们需要调用的函数。第三个参数是布尔值，指定使用事件冒泡还是事件捕获,默认 false 事件冒泡,此参数是可选的。</li>
</ul>
<blockquote>
<p>注意：请勿对事件使用 “on” 前缀；请使用 “click” 代替 “onclick”。</p>
</blockquote>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加当用户点击按钮时触发的事件监听器：</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;myBtn&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, displayDate);</span><br></pre></td></tr></table></figure>

<p>addEventListener() 方法为指定元素指定事件处理程序。addEventListener() 方法为元素附加事件处理程序而不会覆盖已有的事件处理程序。您能够向一个元素添加多个事件处理程序。您能够向一个元素添加多个相同类型的事件处理程序，例如两个 “click” 事件。传统事件绑定重复添加会覆盖。您能够向任何 DOM 对象添加事件处理程序而非仅仅 HTML 元素，例如 window 对象。addEventListener() 方法使我们更容易控制事件如何对冒泡作出反应。当使用 addEventListener() 方法时，JavaScript 与 HTML 标记是分隔的，已达到更佳的可读性；即使在不控制 HTML 标记时也允许您添加事件监听器。</p>
<p>您能够通过使用 <code>removeEventListener()</code> 方法轻松地删除事件监听器。</p>
<p>格式：<code>node.removeEvenetListener()</code><br>参数：第一个为事件类型，第二个为删除函数的名字；</p>
<h4 id="IE-事件处理函数"><a href="#IE-事件处理函数" class="headerlink" title="IE 事件处理函数"></a>IE 事件处理函数</h4><ul>
<li><p>attachEvent();<br>参数：事件名称和函数<br>格式：node.attchEvent(onclink,fn);</p>
</li>
<li><p>detachEvent();<br>参数：事件名称和函数<br>格式：node.detachEvent(onclink,fn);</p>
</li>
<li><p>阻止超链接的默认行为</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> a1=<span class="built_in">document</span>.getElementById(<span class="string">&quot;a1&quot;</span>);</span><br><span class="line">a1.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> confirm(<span class="string">&quot;are you sure?&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">a1.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">evt.preventDefault();</span><br><span class="line">alert(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">a1.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line"><span class="built_in">window</span>.event.returnValue=<span class="literal">false</span>;   <span class="comment">//IE兼容</span></span><br><span class="line">alert(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;a id=<span class="string">&quot;a1&quot;</span> href=<span class="string">&quot;...&quot;</span>&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h4 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h4><p>事件委托</p>
<ol>
<li> 找到当前节点的父节点或者祖先节点</li>
<li> 将事件添加到你找到的这个父节点或者祖先节点上</li>
<li> 找到触发对象，判断触发对象是否是想要的触发对象，进行后续操作</li>
</ol>
<p>li 委托 ul 将 li 变成红色：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">&quot;ul1&quot;</span>);</span><br><span class="line">  oUl.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = ev || winow.event;</span><br><span class="line">    <span class="keyword">var</span> target = e.target || winow.event.target;</span><br><span class="line">    <span class="keyword">if</span> (target.nodeName.toLowerCase() == <span class="string">&quot;li&quot;</span>) &#123;</span><br><span class="line">      target.style.backgroundColor = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="HTML-事件"><a href="#HTML-事件" class="headerlink" title="HTML 事件"></a>HTML 事件</h3><p>HTML 事件可以是浏览器或用户做的某些事情。</p>
<p>写法：</p>
<ol>
<li>内联模式</li>
<li>脚本模式/外联模式</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick()&quot;</span>&gt;</span>内联模式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>外联模式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn=<span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">  0Btn.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">&quot;click button&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定事件格式：<code>元素节点.on+事件类型=匿名函数</code>；</p>
<blockquote>
<p>系统会在事件绑定完成时，生成一个事件对象。触发事件时，系统会自动去调用事件绑定的函数，将事件对象当做第一个参数传入。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(argument.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElement(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line">  <span class="comment">//oBtn.onclick=show;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">button属性：左键0；中键1；右键2；</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">鼠标位置：(原点位置不同）</span></span><br><span class="line"><span class="comment">clientX    clientY  //可视窗口的左上角</span></span><br><span class="line"><span class="comment">pageX    pageY   //整个页面的左上角（滚动也包括）</span></span><br><span class="line"><span class="comment">screenX    screenY  //电脑屏幕的左上角</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//事件对象获取的方式，固定写法</span></span><br><span class="line">    <span class="keyword">var</span> ev = e || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="built_in">console</span>.log(ev);</span><br><span class="line">    <span class="comment">//console.log(ev.button);</span></span><br><span class="line">    <span class="comment">//console.log(ev.clientX);</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>循环添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Oblock = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;div&quot;</span>);</span><br><span class="line"><span class="comment">//console.log(Oblock);</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; Oblock.length; i++) &#123;</span><br><span class="line">  Oblock[i].index = i;</span><br><span class="line">  Oblock[i].onmousedown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.index);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>window 事件</p>
<ul>
<li>load 当页面加载完后会触发</li>
<li>unload 当页面解析的时候触发（如刷新界面、关闭当前界面）IE 浏览器兼容</li>
<li>scroll 页面滚动</li>
<li>resize 窗口大小发生变化的时候触发</li>
</ul>
</li>
<li><p>表单事件</p>
<ul>
<li><p>blur 失去焦点</p>
</li>
<li><p>focus 获取焦点</p>
</li>
<li><p>select 在输入框内选中文本时触发</p>
</li>
<li><p>change 修改输入框内容并失去焦点时触发</p>
</li>
<li><p>sumit 只对 sumit 按钮有效</p>
</li>
<li><p>reset 只对 reset 按钮有效</p>
</li>
</ul>
</li>
</ul>
<p>下面是一些常见的 HTML 事件：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>onchange</td>
<td>HTML 元素已被改变</td>
</tr>
<tr>
<td>onclick</td>
<td>用户点击了 HTML 元素</td>
</tr>
<tr>
<td>ondblclick</td>
<td>双击</td>
</tr>
<tr>
<td>onmouseover</td>
<td>用户把鼠标移动到 HTML 元素上(经过子节点会重复触发)</td>
</tr>
<tr>
<td>onmouseout</td>
<td>用户把鼠标移开 HTML 元素(经过子节点会重复触发)</td>
</tr>
<tr>
<td>onmouseenter</td>
<td>用户把鼠标移动到 HTML 元素上(经过子节点不会重复触发,IE8 不兼容)</td>
</tr>
<tr>
<td>onmouseleave</td>
<td>用户把鼠标移开 HTML 元素(经过子节点不会重复触发,IE8 不兼容)</td>
</tr>
<tr>
<td>onmousedown</td>
<td>鼠标任一按钮被按下</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标被移动,会不停触发</td>
</tr>
<tr>
<td>onmouseup</td>
<td>鼠标按键被松开</td>
</tr>
<tr>
<td>onkeypress</td>
<td>用户按下键盘按键(只支持字符建，shift 等没用)</td>
</tr>
<tr>
<td>onkeydown</td>
<td>用户按下键盘按键</td>
</tr>
<tr>
<td>onkeyup</td>
<td>用户抬起键盘按键</td>
</tr>
<tr>
<td>onload</td>
<td>浏览器已经完成页面加载</td>
</tr>
</tbody></table>
<p>键盘事件对象属性：</p>
<ul>
<li>shiftKey //按下 shift 键为 true，默认为 false</li>
<li>altKey</li>
<li>ctrlKey</li>
<li>metaKey //按下 win 键</li>
<li>keyCode 键码 //不区分大小写，只返回大写 ASCII 码，支持 shift、ctrl 等非字符键；只在 keydown 下支持,可用 which 兼容</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> w = e.which || e.keyCode;</span><br><span class="line">    <span class="built_in">console</span>.log(w);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>charCode 键码 //区分大小写，只支持字符键，只在 keypress 下支持,可用 which 兼容</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.onkeypress = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> w = e.which || e.keyCode;</span><br><span class="line">    <span class="built_in">console</span>.log(w);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>target<br>目标对象/触发对象</li>
</ul>
<p>IE8 以下不兼容，可使用 window.event.srcElement</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">&quot;ul1&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.onkeypress = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = ev || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> target = e.target || <span class="built_in">window</span>.event.srcElement;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.tagName);</span><br><span class="line">    <span class="built_in">console</span>.log(target.innerHTML);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>事件冒泡：由里向外逐级触发</li>
</ul>
<blockquote>
<p>事件冒泡：同样的事件会在该元素的所有祖先元素中依次被触发(从里到外)<br>事件捕获：从根元素开始去执行对应事件(从外到里)</p>
</blockquote>
<p>事件对象的属性和方法:<br><code>cancelBubble=true;</code><br><code>stopPropagation();</code>(捕获阶段也有效)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; aDivs.length; i++) &#123;</span><br><span class="line">    <span class="built_in">window</span>.onkeypress = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> e = ev || <span class="built_in">window</span>.event;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.tagName);</span><br><span class="line">      e.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">      <span class="comment">//e.stopProgagation();</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mouseover 和 mouseout 会有冒泡效果<br>mouseenter 和 mouseleave 没有冒泡效果</p>
</blockquote>
<h2 id="BOM-浏览器对象模型"><a href="#BOM-浏览器对象模型" class="headerlink" title="BOM 浏览器对象模型"></a>BOM 浏览器对象模型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>:&#123;</span><br><span class="line">    <span class="attr">document</span>:&#123;anchors,forms,images,links,location&#125;,</span><br><span class="line">    <span class="attr">frames</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">history</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">location</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">navigator</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">screen</span>:&#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="输入输出语句"><a href="#输入输出语句" class="headerlink" title="输入输出语句"></a>输入输出语句</h3><ul>
<li>alert(msg):浏览器弹窗提示</li>
<li>console.log(msg):控制台打印信息</li>
<li>innerHTML:写入 HTML 元素</li>
</ul>
<blockquote>
<p>innerHTML 和 outerHTML 的区别：1）innerHTML:从对象的起始位置到终止位置的全部内容, 不包括 HTML 标签。2）outerHTML:除了包含 innerHTML 的全部内容外, 还包含对象标签本身。<br>如需访问 HTML 元素，JavaScript 可使用 document.getElementById(id) 方法。如：<code>document.getElementById(&quot;demo&quot;).innerHTML = 5 + 6;</code></p>
</blockquote>
<ul>
<li>document.write()：写入 HTML 输出</li>
</ul>
<blockquote>
<p>会解析标签<br>注意：在 HTML 文档完全加载后使用 document.write() 将会删除所有的标签 ;</p>
</blockquote>
<ul>
<li>prompt(info):浏览器弹出，用户输入</li>
</ul>
<h3 id="window-方法"><a href="#window-方法" class="headerlink" title="window 方法"></a>window 方法</h3><ul>
<li><code>alert();</code>弹出提示框</li>
<li><code>confirm();</code>弹出带确认的提示框，点确认返回 true，取消返回 false</li>
<li><code>prompt(&quot;tips&quot;,&quot;tips&quot;);</code>弹出带输入框的提示框，第一个参数为面板上的提示的内容，第二个为输入框里提示的内容</li>
<li><code>window.open(url, _blank|_top|_self|_parent, [新窗口的参数])</code>第一个参数的为跳转的 url，第二个参数为新窗口的名字，第三个参数为设置打开窗口的属性；如 width,height,top,left.</li>
</ul>
<h3 id="history-对象"><a href="#history-对象" class="headerlink" title="history 对象"></a>history 对象</h3><p><code>window..history</code>掌管的是当前窗口的历史记录（只要加载的 url 不一样就会产生不一样的历史记录）</p>
<p>属性：</p>
<ul>
<li><code>history.length</code>返回当前窗口的历史记录条数</li>
</ul>
<p>方法：</p>
<ul>
<li><code>history.back();</code>返回上一条历史记录</li>
<li><code>history.forward()；</code>前进下一条记录</li>
<li><code>history.go();</code>跳转到（0 为刷新，正整数为前进，负整数为后退）</li>
</ul>
<h3 id="location-地址栏"><a href="#location-地址栏" class="headerlink" title="location 地址栏"></a>location 地址栏</h3><p>方法：</p>
<ul>
<li><p><code>location.assign(url)</code>当前窗口跳转到该 url</p>
</li>
<li><p><code>location.replace(url)</code>在当前窗口替换成新的 url</p>
</li>
<li><p><code>location.reload()</code>刷新当前窗口</p>
</li>
<li><p><code>location.reload(true)</code>不经过浏览器缓存，强制从服务器重载</p>
</li>
</ul>
<hr>
<p><em>url:统一资源定位符</em><br><em>协议://IP（域名）//:端口号/路径/?查询字符串#锚点</em></p>
<ul>
<li><code>location.protocol</code>查看协议</li>
</ul>
<blockquote>
<p>file:本地磁盘文件访问<br>http:<br>https:</p>
</blockquote>
<ul>
<li><p><code>location.hostname</code>查看主机名 IP</p>
</li>
<li><p><code>location.port</code>查看端口号(默认隐藏，无法查看)</p>
</li>
<li><p><code>location.pathname</code>查看路径</p>
</li>
<li><p><code>location.search</code>查看字符串如<code>?name1=Tom&amp;name2=Tony</code></p>
</li>
<li><p><code>location.hash</code>查看锚点</p>
</li>
<li><p><code>loaction.href</code>查看整个 url</p>
</li>
</ul>
<h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>HTML5 中年，加入了一个 localStorage 特性，用来作为本地存储使用的，解决了 cookie 存储空间不足的问题。localStorage 中一般浏览器支持 5M 大小，cookie 中每条 cookie 的存储空间为 4k。</p>
<ul>
<li>本地存储技术：</li>
</ul>
<p><em>localStorage(IE8 以下不兼容);</em></p>
<ul>
<li><p>永久存储</p>
</li>
<li><p>最大可存储 5M，相当于客户端一个微型数据库</p>
</li>
<li><p>只能存储 string</p>
</li>
<li><p>localStorage 对象</p>
<ul>
<li>setItem(name,value);</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">window</span>.localStorage) &#123;</span><br><span class="line">  alert(<span class="string">&quot;当前页面不支持localStorage&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">localStorage</span>.setItem(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">  <span class="built_in">localStorage</span>.b = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">  <span class="built_in">localStorage</span>[<span class="string">&quot;c&quot;</span>] = <span class="string">&quot;3&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">localStorage</span>.getItem(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">localStorage</span>.b);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">localStorage</span>[<span class="string">&quot;a&quot;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>getItem(name);</li>
<li>removeItem(name);</li>
</ul>
<p><em>cookie</em></p>
<p>会话跟踪技术,从一次会话开始到结束（浏览器的关闭），会全程跟踪记录客户端的状态，记录相关信息</p>
<ul>
<li>可设置过期时间</li>
<li>最大可存储 4KB</li>
<li>每一个域名下最多可存储 50 条数据</li>
</ul>
<blockquote>
<p>只能存储字符串</p>
</blockquote>
<ul>
<li>cookie 的语法</li>
</ul>
<p>name 键；value 值，都可自定义<br><code>name=value;expires=date;path=path;domain=url;secure，其中name=value必选，剩余的可选</code></p>
<ol>
<li> expires/max-age:过期时间，填写日期对象。系统会自动清理过期的 cookie</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">funciton <span class="function"><span class="title">afterOffDate</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> d=<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> day=d.getDate();</span><br><span class="line">d.setDate(n+day);</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.cookie=<span class="string">&quot;user=&#x27;xxx&#x27;;expires=&quot;</span>+afterOffDate(<span class="number">7</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li> path 限制访问路径，如果不设置默认加载当前.html 文件的路径；</li>
<li> domain 限制访问域名，如果不设置默认加载当前文件.html 文件的服务器域名</li>
<li> secure 加入这个字段后只能设置 https 协议加载 cookie；</li>
<li> httpOnly cookie 的值不能修改；</li>
</ol>
<blockquote>
<p>火狐浏览器支持本地加载的文件缓存 cookie，谷歌只支持服务器加载文件缓存 cookie</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户</span></span><br><span class="line"><span class="comment">//设置cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&quot;username=xiaomi&quot;</span>;</span><br><span class="line"><span class="comment">//读取cookie</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.cookie);</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端设置</span></span><br><span class="line"><span class="comment">//在响应头中set-cookie</span></span><br></pre></td></tr></table></figure>

<ul>
<li>cookie 编解码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie=<span class="string">&quot;name1=&quot;</span>+<span class="built_in">encodeURIComponent</span>(<span class="string">&quot;小明&quot;</span>); <span class="comment">//编码写入</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">decodeURIComponent</span>(<span class="built_in">document</span>.cookie); <span class="comment">//解码读取</span></span><br></pre></td></tr></table></figure>

<p><em>sessionStorage(结合后台使用)</em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://a913481180.github.io/2020/12/22/23-33-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/23-33-33/" class="post-title-link" itemprop="url">ubuntu系统安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-22 23:33:33" itemprop="dateCreated datePublished" datetime="2020-12-22T23:33:33+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-14 23:04:20" itemprop="dateModified" datetime="2024-05-14T23:04:20+08:00">2024-05-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h3><h3 id="软碟通写入硬盘镜像"><a href="#软碟通写入硬盘镜像" class="headerlink" title="软碟通写入硬盘镜像"></a>软碟通写入硬盘镜像</h3><h3 id="重启进入安装界面"><a href="#重启进入安装界面" class="headerlink" title="重启进入安装界面"></a>重启进入安装界面</h3><table>
<thead>
<tr>
<th>分区：</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>/boot/efi/</td>
<td>必须，引导分区，256mb-512mb</td>
</tr>
<tr>
<td>/boot</td>
<td>非必须，引导分区，ext4 格式，256mb</td>
</tr>
<tr>
<td>swap</td>
<td>非必须，交换分区，虚拟内存，swap 格式。内存小于 2g-&gt;2g，内存小于 8g-&gt;4g-8g，内存大于 8g-&gt;8g-16g，内存大于 16-&gt;16g</td>
</tr>
<tr>
<td>/</td>
<td>必须，主分区，用于安装系统和软件，ext4 格式 ，30gb</td>
</tr>
<tr>
<td>/home</td>
<td>用户存放文件，ext4 格式</td>
</tr>
</tbody></table>
<blockquote>
<p><code>/bin</code> <code>/sbin</code> <code>/lib</code> <code>/etc</code> <code>/dev</code>这五个目录不要与根目录<code>/</code>所在分区分开。否则系统会不能正常引导</p>
</blockquote>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul>
<li>设置根用户密码：<br><code>sudo passwd</code></li>
<li>换源<br><code>sudo vim /etc/apt/sources.list</code><br>粘贴</li>
</ul>
<p>ubuntu</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#添加阿里源</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">#添加清华源,默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse multiverse</span><br></pre></td></tr></table></figure>

<p>debain</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#阿里</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb https://mirrors.aliyun.com/debian-security/ bullseye-security main</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian-security/ bullseye-security main</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">#中科大</span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb https://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/debian-security/ bullseye-security main contrib non-free</span><br><span class="line">#清华</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br><span class="line">#华为</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb-src https://mirrors.huaweicloud.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian-security/ bullseye-security main</span><br><span class="line">deb-src https://mirrors.huaweicloud.com/debian-security/ bullseye-security main</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb-src https://mirrors.huaweicloud.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb https://mirrors.huaweicloud.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">deb-src https://mirrors.huaweicloud.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">#腾讯</span><br><span class="line">deb https://mirrors.tencent.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb-src https://mirrors.tencent.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb https://mirrors.tencent.com/debian-security/ bullseye-security main</span><br><span class="line">deb-src https://mirrors.tencent.com/debian-security/ bullseye-security main</span><br><span class="line">deb https://mirrors.tencent.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb-src https://mirrors.tencent.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb https://mirrors.tencent.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">deb-src https://mirrors.tencent.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">#网易</span><br><span class="line">deb https://mirrors.163.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb-src https://mirrors.163.com/debian/ bullseye main non-free contrib</span><br><span class="line">deb https://mirrors.163.com/debian-security/ bullseye-security main</span><br><span class="line">deb-src https://mirrors.163.com/debian-security/ bullseye-security main</span><br><span class="line">deb https://mirrors.163.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb-src https://mirrors.163.com/debian/ bullseye-updates main non-free contrib</span><br><span class="line">deb https://mirrors.163.com/debian/ bullseye-backports main non-free contrib</span><br><span class="line">deb-src https://mirrors.163.com/debian/ bullseye-backports main non-free contrib</span><br></pre></td></tr></table></figure>

<ul>
<li>执行更新命令：<br><code>sudo apt-get update</code><br><code>sudo apt-get upgrade</code></li>
</ul>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><blockquote>
<p><code>sudo dpkg -i xxx-dev.deb</code></p>
</blockquote>
<ul>
<li>vim</li>
<li>neofetch</li>
<li>ranger</li>
<li>rar 解压软件<ul>
<li>(<a target="_blank" rel="noopener" href="https://www.rarlab.com/download.htm">https://www.rarlab.com/download.htm</a>) 下载最新版本的 linux 版本 rar 软件</li>
<li>解压后进入文件夹，执行<code>sudo make</code>命令</li>
<li>解压：<code>rar x test.rar</code></li>
<li>解压到当前目录：<code>rar e test.rar</code></li>
<li>压缩：<code>rar a test.rar /test</code></li>
<li>也可以使用<code>unrar</code>命令提取 rar 压缩文件</li>
</ul>
</li>
<li>截图工具：<code>flameshot</code><ul>
<li>安装：<code>sudo apt install flameshot</code></li>
<li>使用：<code>flameshot gui</code></li>
<li>添加快捷键：<code>/usr/bin/flameshot gui</code></li>
</ul>
</li>
<li>远程连接 windows 软件:<code>rdesktop</code><ul>
<li>安装：<code>sudo apt install rdesktop</code></li>
<li>使用：<code>rdesktop xxx.xxx.xxx.xxx -u kk -p 123456</code></li>
<li>参数：<ul>
<li><code>-f</code>：全屏模式 ctrl+alt+enter 可切换全屏</li>
<li><code>-a 16</code>： 16 位色彩</li>
<li><code>-z</code>：启用 RDP 数据流压缩</li>
<li><code>-x lan</code>：使用局域网级别的图像质量</li>
<li><code>-r clipboard</code>：运行共享剪切板</li>
<li><code>-g 1920x1080+0+0</code>：分辨率,窗口位置</li>
<li><code>-r sound:local</code>：同步声音</li>
<li><code>-r disk:share=/home</code>：win10 网上邻居虚拟一个映射盘，ubuntu 挂载到远程主机上</li>
</ul>
</li>
</ul>
</li>
<li>nodejs<ul>
<li>拷贝解压</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">VERSION=v10.15.0</span><br><span class="line">DISTRO=linux-x64</span><br><span class="line">sudo mkdir -p /usr/<span class="built_in">local</span>/lib/nodejs</span><br><span class="line">sudo tar -xJvf node-<span class="variable">$VERSION</span>-<span class="variable">$DISTRO</span>.tar.xz -C /usr/<span class="built_in">local</span>/lib/nodejs</span><br></pre></td></tr></table></figure>

<ul>
<li>环境变量<br>编辑文件<code>vim ~/.profile</code><br>添加<code>export PATH=/usr/local/lib/nodejs/node-$VERSION-$DISTRO/bin:$PATH</code><br>刷新：<code>source ~/.profile</code></li>
<li>google chrome<br><code>https://www.google.cn/intl/zh-CN/chrome/</code></li>
<li>搜狗输入法(ubuntu20 移除 qt4,会出现死机情况)<br><code>https://shurufa.sogou.com/</code></li>
<li>百度输入法</li>
<li>谷歌输入法(推荐)<br><code>sudo dpkg-reconfigure locales</code>选择中文<code>zh_CN.UTF-8 UTF-8</code><br><code>sudo apt install fcitx fcitx-googlepinyin</code></li>
<li>fcitx5 中文输入法<br><code>sudo apt install fcitx5 fcitx5-chinese-addons</code></li>
<li>网易云、QQ 音乐</li>
<li>vscode</li>
<li>vitrulbox</li>
<li>unzip</li>
<li>gzip</li>
<li>mpv、vlc</li>
<li>百度网盘</li>
<li>有道翻译</li>
<li>迅雷</li>
<li>wps</li>
<li>wps 字体安装<br>windows 的字体一般存放在 c:/windows/fonts 目录下，我拷贝到 linux 下的字体有：<br><code>simfang.ttf</code> 仿宋体<br><code>simhei.ttf</code>黑体<br><code>simkai.ttf</code>楷体</li>
</ul>
<p>宋体：<code>simsunb.ttf</code>和<code>simsun.ttc</code><br><code>simsun.ttf</code>宋体和新宋体，原文件名<code>simsun.ttc</code><br>微软雅黑：<code>msyhbd.ttf</code></p>
<p>下载字体文件，然后复制到 Linux 系统中的/usr/share/fonts/win-font 文件夹中。<br>修改权限，并更新字体缓存<br><code>sudo chmod -R 777  /usr/share/fonts/win-font</code><br><code>cd /usr/share/fonts/win-font</code></p>
<p>执行以下命令,生成字体的索引信息：<br><code>sudo mkfontscale</code><br><code>sudo mkfontdir</code><br>运行 fc-cache 命令更新字体缓存。<br><code>sudo fc-cache -fv</code></p>
<h2 id="压缩解压"><a href="#压缩解压" class="headerlink" title="压缩解压"></a>压缩解压</h2><ul>
<li>zip 命令<br>示例：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩文件</span></span><br><span class="line">zip -r test.zip file</span><br><span class="line"><span class="comment"># 解压文件</span></span><br><span class="line">unzip test.zip</span><br></pre></td></tr></table></figure>

<p>释义：<br><code>-r</code> : 递归处理</p>
<ul>
<li>rar 命令<br>示例：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩文件</span></span><br><span class="line">rar a -r test.rar file</span><br><span class="line"><span class="comment"># 解压文件</span></span><br><span class="line">unrar x test.rar</span><br></pre></td></tr></table></figure>

<p>释义：</p>
<p><code>a </code>: 添加到压缩文件</p>
<p><code>-r </code>: 递归处理</p>
<p><code>x </code>: 以绝对路径解压文件</p>
<ul>
<li>tar 命令<br>语法： <code>tar [主选项 + 辅选项] 文件或目录</code></li>
</ul>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩文件 file1 和目录 dir2 到 test.tar.gz</span></span><br><span class="line">tar -zcvf test.tar.gz file1 dir2</span><br><span class="line"><span class="comment"># 解压 test.tar.gz（将 c 换成 x 即可）</span></span><br><span class="line">tar -zxvf test.tar.gz</span><br><span class="line"><span class="comment"># 列出压缩文件的内容</span></span><br><span class="line">tar -ztvf test.tar.gz</span><br></pre></td></tr></table></figure>

<p>释义：</p>
<p><code>-z</code> : 使用 gzip 来压缩和解压文件</p>
<p><code>-v</code> : –verbose 详细的列出处理的文件</p>
<p><code>-f</code> : –file=ARCHIVE 使用档案文件或设备，这个选项通常是必选的</p>
<p><code>-c</code> : –create 创建一个新的归档（压缩包）</p>
<p><code>-x</code> : 从压缩包中解出文件</p>
<p>其它：</p>
<p>tar 命令其实并不是真的解压缩的处理者，而是使用了 gzip 或者 bzip2 等其它命令来达成，但是 gzip 等命令通常只能处理单个文件，并不方便，所以一般我们都是选择使用 tar 命令间接的完成解压缩。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
