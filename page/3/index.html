<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.baidu.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="http://www.baidu.com/page/3/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.baidu.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/02/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-11-33/" class="post-title-link" itemprop="url">Ant-Design</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:11:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:11:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="antd"><a href="#antd" class="headerlink" title="antd"></a>antd</h2><h3 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h3><ul>
<li>缺少key，提示错误</li>
</ul>
<p>添加rowkey属性指定唯一key</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Table</span> <span class="attr">rowkey</span>=<span class="string">&#123;</span>&#x27;<span class="attr">id</span>&#x27;&#125;&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Checkbox"><a href="#Checkbox" class="headerlink" title="Checkbox"></a>Checkbox</h3><ul>
<li>Checkbox.Group 初始值无效<br>useState()初始为空，Checkbox.Group 绑定后不再更新</li>
</ul>
<h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><ul>
<li>lazy<br>Suspense中的fallback渲染的组件不能使用懒加载</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/02/12/20-10-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/12/20-10-33/" class="post-title-link" itemprop="url">AJax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-12 20:10:33" itemprop="dateCreated datePublished" datetime="2021-02-12T20:10:33+08:00">2021-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>AJAX全称为“Asynchronous JavaScript and XML”（异步JavaScript和 XML），是一种创建交互式网页应用的网页开发技术。通过在后台与服务器进行少量数据交换，Ajax可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。而传统的网页(不使用 Ajax)如果需要更新内容，必需重载整个网页面。<br>Ajax的工作原理相当于在用户和服务器之间加了一个中间层(AJAX引擎)，使用户操作与服务器响应异步化</p>
<blockquote>
<p><code>XMLHttpRequest</code>IE8以下不兼容；IE8以下声明ajax方法为<code>ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</code></p>
</blockquote>
<h2 id="AJAX请求的五个步骤"><a href="#AJAX请求的五个步骤" class="headerlink" title="AJAX请求的五个步骤"></a>AJAX请求的五个步骤</h2><ol>
<li><p>创建ajax(XMLHttpRequest)对象</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr=<span class="literal">null</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>)&#123;</span><br><span class="line">    xhr=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    xhr=<span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>onreadystatechange</code>事件,设置回调函数,等待数据响应</p>
<p> 发送请求将会收到响应，XHR对象以下属性将会被填充上数据</p>
<table>
<thead>
<tr>
<th>readyState属性</th>
<th>HTTP请求状态</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>（请求还未初始化）还没调用open（）方法</td>
</tr>
<tr>
<td>1</td>
<td>（已建立服务器链接）open() 方法已经被调用。未调用send()方法。</td>
</tr>
<tr>
<td>2</td>
<td>（请求已接收）send() 方法已经被调用，并且头部和状态已经可获得</td>
</tr>
<tr>
<td>3</td>
<td>（正在处理请求）下载中；responseText 属性已经包含部分数据。</td>
</tr>
<tr>
<td>4</td>
<td>（完成）下载操作已完成。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>status</th>
<th>状态码英文名称</th>
<th>服务器（请求资源）的状态</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>OK</td>
<td>请求成功</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>无内容。服务器成功处理，但未返回内容。</td>
</tr>
<tr>
<td>206</td>
<td>Partial Content</td>
<td>是对资源某一部分的请求，服务器成功处理了部分GET请求，响应报文中包含由Content-Range指定范围的实体内容。</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
<td>永久性重定向。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
<td>临时性重定向。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td>
</tr>
<tr>
<td>303</td>
<td>See Other</td>
<td>查看其它地址。与302类似。使用GET请求查看</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。</td>
</tr>
<tr>
<td>307</td>
<td>Temporary Redirect</td>
<td>临时重定向。与302类似。使用GET请求重定向，会按照浏览器标准，不会从POST变成GET。</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>客户端请求报文中存在语法错误，服务器无法理解</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>请求要求用户的身份认证，通过HTTP认证（BASIC认证，DIGEST认证）的认证信息，若之前已进行过一次请求，则表示用户认证失败</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required</td>
<td>保留，将来使用</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>服务器理解请求客户端的请求，但是拒绝执行此请求</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>服务器无法根据客户端的请求找到资源</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>服务器内部错误，无法完成请求</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>服务器不支持请求的功能，无法完成请求</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>错误网关</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>由于超载或系统维护，服务器暂时的无法处理客户端的请求</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Time-out</td>
<td>网关超时</td>
</tr>
</tbody></table>
<p> <code>responseText</code>:返回以文本形式存放的内容;<br> <code>responseXML</code>:返回XML形式的内容,如果响应的内容类型是”text/xml”或”application/xml”，那就是包含响应数据的 XML DOM 文档。<br> <code>statusText</code>：响应的 HTTP 状态描述</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(xhr.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(xhr.<span class="property">status</span>==<span class="number">200</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;error:&quot;</span>+xhr.<span class="property">status</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>调用open方法与服务器建立链接</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数： 请求方式 </span></span><br><span class="line"><span class="comment">第二个：url</span></span><br><span class="line"><span class="comment">第三个：是否异步，true异步，false同步</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>,<span class="string">&quot;./1.txt&quot;</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>,<span class="string">&quot;./get.php?name=yyyy&amp;age=22&amp;password=342&quot;</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;post&quot;</span>,<span class="string">&quot;/test.php&quot;</span>,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>调用send方法,向服务器发送数据</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//get方法,不需要传递参数</span></span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//post方法，将数据放在send()里提交</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>); <span class="comment">//发送表单数据</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;application/json; charset=utf-8&#x27;</span>)<span class="comment">//发送json格式数据</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;text/plain;  charset=utf-8&#x27;</span>)<span class="comment">//发送纯文本,不指定Content-type时直接默认值</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;text/html; charset=utf-8&#x27;</span>)<span class="comment">//发送html文本</span></span><br><span class="line"><span class="comment">//设置请求头</span></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&quot;name=yyy&amp;age=33&amp;password=124564&quot;</span>); <span class="comment">//无需编码</span></span><br><span class="line"><span class="comment">//post没有缓存问题</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="传输格式"><a href="#传输格式" class="headerlink" title="传输格式"></a>传输格式</h3><ul>
<li><p>xml数据<br>优点：种类丰富，传输量非常大<br>缺点：解析麻烦，不适合轻量数据</p>
</li>
<li><p>json数据</p>
</li>
</ul>
<p>优点：轻量级数据，解析轻松<br>缺点：种类少，传输数据量少</p>
<p><code>JSON.parse();</code>:将JSON字符串转为一个对象。<br>你的字符串必须符合JSON格式，即键值都必须使用双引号包裹：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;[&quot;1&quot;,&quot;2&quot;]&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;[&#x27;1&#x27;,&#x27;2&#x27;]&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(a));<span class="comment">// Array [1,2]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(b));<span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<p><code>JSON.stringify();</code>:将 JavaScript 对象转换为 JSON 字符串</p>
<h3 id="ajax-只能下载同源的数据，跨源的数据禁止下载"><a href="#ajax-只能下载同源的数据，跨源的数据禁止下载" class="headerlink" title="ajax 只能下载同源的数据，跨源的数据禁止下载"></a>ajax 只能下载同源的数据，跨源的数据禁止下载</h3><blockquote>
<p>如果要请求的域和当前域是不同域，就叫跨域</p>
</blockquote>
<ul>
<li><p>同源策略</p>
<ol>
<li>同协议</li>
<li>同域名/IP</li>
<li>同端口号</li>
</ol>
</li>
</ul>
<p>同源策略禁止跨源请求</p>
<ul>
<li>跨源方法：<ol>
<li>修改ajax同源协议（不建议）</li>
<li>委托php文件进行跨源</li>
<li>JSONP</li>
</ol>
</li>
</ul>
<h3 id="JSONP跨域的使用流程"><a href="#JSONP跨域的使用流程" class="headerlink" title="JSONP跨域的使用流程"></a>JSONP跨域的使用流程</h3><ol>
<li>先去声明一个函数，这个函数有一个形参，这个形参会拿到我们想要下载的数据，</li>
<li>在需要下载数据的时候，动态创建script标签，将标签src属性设置成下载数据的链接</li>
<li>当script插入到页面的时候，就会调用号已经封装好的函数，将数据传过来</li>
</ol>
<p>index.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">download</span>(<span class="params">data</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;test.js&quot;</span>&gt;</span><span class="language-javascript"> <span class="comment">//浏览器一运行就会显示</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//动态生成script标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> <span class="title class_">Obtn</span>=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn1&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Obtn</span>.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">var</span> oScript=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>); <span class="comment">//创建script标签</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> oScript.<span class="property">src</span>=<span class="string">&#x27;test.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(oScript);  <span class="comment">//插入到页面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p> test.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">download</span>(<span class="string">&quot;hello!!!!!!!!!&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">download</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">var</span> oInfo=documenet.<span class="title function_">getElementById</span>(<span class="string">&quot;oinfo&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">var</span> oTi=..;</span></span><br><span class="line"><span class="language-javascript"> oInfo.<span class="property">innerHTML</span>=<span class="string">`<span class="subst">$&#123;data.city&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">var</span> str=<span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript"> str+=<span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">  &lt;tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">   &lt;td&gt;<span class="subst">$&#123;arr[i].data&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">  &lt;/tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">   `</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> oTi.<span class="property">innerHTML</span>=str;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//动态生成script标签</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> <span class="title class_">Obtn</span>=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Obtn</span>.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">var</span> oScript=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>); <span class="comment">//创建script标签</span></span></span><br><span class="line"><span class="language-javascript"> oScript.<span class="property">src</span>=<span class="string">&#x27;https:.....&amp;callback=download&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(oScript);  <span class="comment">//插入到页面</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h3><p>form表单点击提交数据后需跳转页面，ajax为异步进行的数据传输</p>
<ul>
<li>action:点击submit后跳转的url</li>
<li>method:表单提交方式get/post<ul>
<li>get(默认)<br>直接将数据拼接在url后面进行提交;用<code>？</code>进行拼接,多个数据之间用<code>&amp;</code>进行连接<ul>
<li>优点：简单</li>
<li>缺点：不安全，最大2kb，无法实现上传大文件</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;get.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>&quot;<span class="attr">submit</span>&quot;/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>post<br>通过浏览器内部进行提交<ul>
<li>优点：安全，上传大小无上限</li>
<li>缺点：比get复杂</li>
</ul>
</li>
</ul>
<p><code>enctype</code>提交数据的格式，默认<code>application/x-www-form-urlencoded</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;post.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>  <span class="attr">enctype</span>=<span class="string">&quot;application/x-www-from-urlencoded&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>&quot;<span class="attr">submit</span>&quot; <span class="attr">value</span>=<span class="string">&quot;post按钮&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;content-type:text/html;charset=&quot;UTF-8&quot;&#x27;</span>);</span><br><span class="line"><span class="comment">//$_GET 全局关联数组 ；存放着get提交的所有数据</span></span><br><span class="line"><span class="comment">//$_POST全局数组，储存着post发送来的数据</span></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$age</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> (<span class="string">&quot;<span class="subst">&#123;$username&#125;</span>,$&#123;age&#125;,<span class="subst">&#123;$password&#125;</span>);</span></span><br><span class="line"><span class="string">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="comment">//连接数据库</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">第一个参数：连接数据库的ip/域名</span></span><br><span class="line"><span class="comment">第二个参数：用户名</span></span><br><span class="line"><span class="comment">第三个参数：密码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$link</span>=<span class="title function_ invoke__">mysql_connect</span>(<span class="string">&quot;localhost&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$link</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span><span class="string">&quot;连接失败&quot;</span>;</span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置字符集</span></span><br><span class="line"><span class="title function_ invoke__">mysql_set_charset</span>(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line"><span class="comment">//选择数据库</span></span><br><span class="line"><span class="title function_ invoke__">mysql_select_db</span>(<span class="string">&quot;jjjj&quot;</span>);</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM students&quot;</span>;</span><br><span class="line"><span class="comment">//发送sql语句</span></span><br><span class="line"><span class="variable">$res</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment">//处理结果,全部获取</span></span><br><span class="line"><span class="variable">$arr</span>=<span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$row</span>=<span class="title function_ invoke__">mysql_fetch_assoc</span>(<span class="variable">$res</span>))&#123;</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$arr</span>,<span class="variable">$row</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$row</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">//关闭数据库</span></span><br><span class="line"><span class="title function_ invoke__">mysql_close</span>(<span class="variable">$link</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="post-put-patch请求传参格式有-formData-形式-、query-形式-、JSON形式三种"><a href="#post-put-patch请求传参格式有-formData-形式-、query-形式-、JSON形式三种" class="headerlink" title="post/put/patch请求传参格式有 formData 形式 、query 形式 、JSON形式三种"></a>post/put/patch请求传参格式有 formData 形式 、query 形式 、JSON形式三种</h2><h2 id="axios设置token到请求头"><a href="#axios设置token到请求头" class="headerlink" title="axios设置token到请求头"></a>axios设置token到请求头</h2><p>加一个http request拦截器；通过window.localStorage.getItem(“accessToken”) 来获取token的value；通过config.headers.accessToken = token;将token放到请求头发送给服务器，放在请求头中</p>
<h2 id="form表单提交是单向的"><a href="#form表单提交是单向的" class="headerlink" title="form表单提交是单向的"></a>form表单提交是单向的</h2><h2 id="只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取HTTP应答包"><a href="#只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取HTTP应答包" class="headerlink" title="只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取HTTP应答包"></a>只能给服务器发送数据，但是无法获取服务器返回的数据，也就是无法读取HTTP应答包</h2><p>同源策略<br>跨域：浏览器允许向服务器发送跨域请求，从而克服Ajax只能同源使用的限制。</p>
<p>同源策略：如果两个页面的协议，域名,端口都相同，则两个页面具有相同的源。<br>同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源。这是一个用于隔离潜在恶意文件的重要安全机制。</p>
<p>不受同源策略限制的</p>
<p>页面中的链接，重定向以及表单提交是不会受到同源策略限制的。</p>
<p>跨域资源的引入是可以的。但是js不能读写加载的内容。如嵌入到页面中的<code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;，&lt;img&gt;，&lt;link&gt;，&lt;iframe&gt;</code>等。</p>
<p>受到限制的</p>
<p>Cookie、LocalStorage 和 IndexDB 无法读取<br>DOM和JS对象无法获得<br>AJAX 请求不能发送<br>跨域解决方案<br>一、JSONP跨域<br>jsonp的核心原理就是：目标页面回调本地页面的方法,并带入参数<br>服务器端实现 JSONP 接口的步骤<br>服务器端获取客户端发送过来的query参数，其中参数有回调函数的名字<br>得到的数据，拼接出一个函数调用的字符串<br>把上一步拼接得到的字符串，响应给客户端的 <code>&lt;script&gt;</code> 标签进行解析执行<br>jsonp的缺点：只能发送get一种请求。<br>1、原生JS实现<br>通过script标签src属性，发送带有callback参数的GET请求，服务端将接口返回数据拼凑到callback函数中，返回给浏览器，浏览器解析执行，从而前端拿到callback函数返回的数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://127.0.0.1:3000/web?cb=getData&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端nodejs代码<br>主要用来模拟服务器<br>携带参数必须是字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router=express.<span class="title class_">Router</span>()</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/web&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;cb&#125;=req.<span class="property">query</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>)</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xtt&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">gender</span>:<span class="string">&#x27;女孩子&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 携带参数必须是字符串</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">`<span class="subst">$&#123;cb&#125;</span>(<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>)`</span>)</span><br><span class="line">    router.<span class="title function_">get</span>(<span class="string">&#x27;/que&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">`<span class="subst">$&#123;req.query.cb&#125;</span>(&#x27;dd&#x27;)`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=router</span><br></pre></td></tr></table></figure>

<p>2、jquery Ajax实现<br>以jquery来发起jsonp请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> url = <span class="string">&#x27;http://127.0.0.1:3000/que?cb=getData&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        url,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、Vue axios实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">handleCallback</span>(&#123;<span class="string">&quot;success&quot;</span>: <span class="literal">true</span>, <span class="string">&quot;user&quot;</span>: <span class="string">&quot;admin&quot;</span>&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$http</span> = axios;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">jsonp</span>(<span class="string">&#x27;&lt;http://127.0.0.1:3000/que?cb=getData&gt;&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">jsonp</span>: <span class="string">&#x27;handleCallback&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>二、跨域资源共享（CORS）<br>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。<br>CORS需要浏览器和服务器同时支持。<br>目前，所有主流浏览器都支持该功能，IE10以下不支持。<br>浏览器将CORS跨域请求分为：简单请求、非简单请求。<br>简单请求与非简单请求<br>简单请求<br>浏览器在发送跨域请求的时候，会先判断下是简单请求还是非简单请求，如果是简单请求，就先执行服务端程序，然后浏览器才会判断是否跨域。<br>同时满足以下的两个条件，就属于简单请求。浏览器对这两种的处理，是不一样的。</p>
<p>请求方式：get/post/head其中一种<br>请求头设置：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Accept</span><br><span class="line">Accept-Language</span><br><span class="line">Content-Type：application/x-www-form-urlencoded、multipart/form-data、text/plain（ 只限于三个值中的一个）</span><br></pre></td></tr></table></figure>

<p>详细描述<br>对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个Origin字段。<br>举例：</p>
<p>发起请求</p>
<p>自动在头信息之中，添加一个Origin字段。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET /cors HTTP/1.1</span><br><span class="line">Origin: &lt;http://127.0.0.1:8080&gt;</span><br><span class="line">Host: api.alice.com</span><br><span class="line">Accept-Language: en-US</span><br><span class="line">Connection: keep-alive</span><br><span class="line">User-Agent: Mozilla/5.0...</span><br><span class="line">Origin：本次请求来自哪个域（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求。</span><br></pre></td></tr></table></figure>

<p>服务器判断此次请求Origin源</p>
<p>不在许可范围内：服务器会返回一个正常的 HTTP 回应。<br>浏览器发现，这个回应的头信息没有包含Access-Control-Allow-Origin字段（详见下文），就知道出错了，从而抛出一个错误，被请求的异常回调函数捕获。<br>注意，这种错误无法通过状态码识别，因为 HTTP 回应的状态码有可能是200。<br>在许可范围内：服务器返回的响应，会多出几个头信息字段。<br>有三个与 CORS 请求相关的字段，都以Access-Control-开头。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: &lt;http://api.bob.com&gt;</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br><span class="line">Access-Control-Expose-Headers: FooBar</span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure>

<p>Access-Control解释</p>
<p>Access-Control-Allow-Origin：必须的</p>
<p>它的值要么是请求时Origin字段的值，要么是一个*，表示接受任意域名的请求。</p>
<p>Access-Control-Allow-Credentials：可选</p>
<p>布尔值，表示是否允许发送 Cookie。默认情况下，Cookie 不包括在 CORS 请求之中（为了降低 CSRF 攻击的风险。）。设为true，即表示服务器明确许可，浏览器可以把 Cookie 包含在请求中，一起发给服务器。这个值也只能设为true，如果服务器不要浏览器发送 Cookie，不发送该字段即可。</p>
<p>Access-Control-Expose-Headers：可选</p>
<p>CORS 请求时，XMLHttpRequest对象的getResponseHeader()方法只能拿到6个服务器返回的基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定。上面的例子指定，getResponseHeader(‘FooBar’)可以返回FooBar字段的值。</p>
<p>非简单请求<br>对服务器提出特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json。</p>
<p>预检请求</p>
<p>非简单请求的 CORS 请求，会在正式通信之前，增加一次 HTTP 查询请求，称为“预检”请求（preflight）。<br>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP 方法和头信息字段。<br>只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。<br>这是为了防止这些新增的请求，对传统的没有 CORS 支持的服务器形成压力，给服务器一个提前拒绝的机会，这样可以防止服务器收到大量DELETE和PUT请求，这些传统的表单不可能跨域发出的请求<br>举例</p>
<p>自动发出一个“预检”请求，要求服务器确认可以这样请求。下面是这个“预检”请求的 HTTP 头信息：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS /cors HTTP/1.1</span><br><span class="line">Origin: &lt;http://api.bob.com&gt;</span><br><span class="line">Access-Control-Request-Method: PUT</span><br><span class="line">Access-Control-Request-Headers: X-Custom-Header</span><br><span class="line">Host: api.alice.com</span><br><span class="line">Accept-Language: en-US</span><br><span class="line">Connection: keep-alive</span><br><span class="line">User-Agent: Mozilla/5.0...</span><br></pre></td></tr></table></figure>

<p>两个特殊字段:</p>
<p>Access-Control-Request-Method必须的<br>用来列出浏览器的 CORS 请求会用到哪些 HTTP 方法，上例是PUT。</p>
<p>Access-Control-Request-Headers<br>该字段是一个逗号分隔的字符串，指定浏览器 CORS 请求会额外发送的头信息字段。</p>
<p>服务器收到“预检”请求以后，检查了Origin、Access-Control-Request-Method和Access-Control-Request-Headers字段以后，确认允许跨源请求，就可以做出回应</p>
<p>预检请求的回应：<br>服务器收到”预检”请求以后，检查了Origin、Access-Control-Request-Method和Access-Control-Request-Headers字段以后，确认允许跨源请求，就可以做出回应。</p>
<p>HTTP回应中，除了关键的是Access-Control-Allow-Origin字段，其他CORS相关字段如下：</p>
<p>Access-Control-Allow-Methods：必选<br>它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次”预检”请求。</p>
<p>Access-Control-Allow-Headers<br>如果浏览器请求包括Access-Control-Request-Headers字段，则Access-Control-Allow-Headers字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p>
<p>Access-Control-Allow-Credentials：可选<br>该字段与简单请求时的含义相同。</p>
<p>Access-Control-Max-Age：可选<br>用来指定本次预检请求的有效期，单位为秒。</p>
<p>CORS跨域<br>1)前端设置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    xhr=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">     xhr=<span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;post&#x27;</span>,<span class="string">&#x27;&lt;http://localhost:3000/login&#x27;</span>,<span class="literal">true</span>&gt;);</span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&#x27;name=111&amp;age=12&#x27;</span>);</span><br><span class="line">xhr.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(xhr.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> reg=<span class="regexp">/^2\d&#123;2&#125;/</span></span><br><span class="line">        <span class="keyword">if</span>(reg.<span class="title function_">test</span>(xhr.<span class="property">status</span>))&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">response</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nodejs代码<br>在Express中通过第3方中间件来完成cors跨域解决<br>使用步骤分为如下 3 步：</p>
<p>运行<code>npm install cors</code>安装中间件<br>使用 <code>const cors = require(&#39;cors&#39;)</code>导入中间件<br>在路由之前调用 <code>app.use(cors())</code> 配置中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> cors=<span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app=<span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>)</span><br><span class="line"><span class="keyword">const</span> allowHosts=[</span><br><span class="line">    <span class="string">&#x27;http://localhost:5000&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;http://localhost:2000&#x27;</span></span><br><span class="line">]</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>())</span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req,res,next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> hst =req.<span class="property">header</span>.<span class="property">origin</span></span><br><span class="line">    <span class="keyword">if</span>(allowHosts.<span class="title function_">includes</span>(hst))&#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line">            <span class="attr">code</span>:<span class="number">404</span>,</span><br><span class="line">            <span class="attr">msg</span>:<span class="string">&#x27;地址不对&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登陆&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>三、Nginx 反向代理解决跨域问题<br>正向代理和反向代理<br>提到代理，肯定要说一下这两个的区别。</p>
<p>举个正向代理的例子<br>我打球累了走不动了，找看球的小朋友帮我去旁边的商店买瓶水。商店老板是不知道到底是谁需要喝水的，隐藏了客户端。当然，小朋友可以告诉老板就是那个打球像蔡徐坤的人要喝水。还有，VPN 就是正向代理。</p>
<p>反向代理的例子<br>我打球累了，找看球的小朋友要瓶水喝（当然我肯定会给钱的：D）。我不需要知道小朋友的水是从旁边的商店还是两公里外的超市买的。隐藏了服务端。还有，我们连好了 VPN 访问谷歌的时候，浏览的那些页面，我们是不会知道具体是哪台服务器的资源。</p>
<p>nginx配置解决iconfont跨域<br>浏览器跨域访问js、css、img等常规静态资源被同源策略许可，但iconfont字体文件(eot|otf|ttf|woff|svg)例外，此时可在nginx的静态资源服务器中加入以下配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  add_header Access-Control-Allow-Origin *;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nginx反向代理接口跨域<br>跨域问题：同源策略仅是针对浏览器的安全策略。服务器端调用HTTP接口只是使用HTTP协议，不需要同源策略，也就不存在跨域问题。</p>
<p>实现思路：通过Nginx配置一个代理服务器域名与domain1相同，端口不同）做跳板机，反向代理访问domain2接口，并且可以顺便修改cookie中domain信息，方便当前域cookie写入，实现跨域访问。</p>
<p>nginx具体配置</p>
<h1 id="proxy服务器"><a href="#proxy服务器" class="headerlink" title="proxy服务器"></a>proxy服务器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       81;</span><br><span class="line">    server_name  &lt;www.domain1.com&gt;;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass   http://www.yp2.com:8080;  #反向代理</span><br><span class="line">        proxy_cookie_domain www.yp2.com www.yp1.com; #修改cookie里域名</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">        # 当用webpack-dev-server等中间件代理接口访问nignx时，此时无浏览器参与，故没有同源限制，下面的跨域配置可不启用</span><br><span class="line">        add_header Access-Control-Allow-Origin http://www.yp1.com;  #当前端只跨域不带cookie时，可为*</span><br><span class="line">        add_header Access-Control-Allow-Credentials true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>四、nodejs中间件代理跨域<br>node中间件实现跨域代理，原理大致与nginx相同，都是通过启一个代理服务器，实现数据的转发，也可以通过设置cookieDomainRewrite参数修改响应头中cookie中域名，实现当前域的cookie写入，方便接口登录认证。</p>
<p>1、nodejs服务器代理<br>使用node + express + http-proxy-middleware搭建一个proxy服务器。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express htttp-proxy-middleware</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express=<span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app=<span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">5000</span>)</span><br><span class="line"><span class="keyword">const</span> httpProxyMiddleware=<span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>)</span><br><span class="line"><span class="comment">// 服务器代理  ---接口中间层 代理层</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/api&#x27;</span> ,httpProxyMiddleware.<span class="title function_">createProxyMiddleware</span>(&#123;</span><br><span class="line">    <span class="comment">// 代理的地址</span></span><br><span class="line">    <span class="attr">target</span>:<span class="string">&#x27;&lt;http://localhost:8989&gt;&#x27;</span>,</span><br><span class="line">    <span class="comment">// 默认false不修改。修改代理请求是他的主机名</span></span><br><span class="line">    <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 修改响应头信息，实现跨域并允许带cookie</span></span><br><span class="line">    <span class="attr">onProxyRes</span>: <span class="keyword">function</span>(<span class="params">proxyRes, req, res</span>) &#123;</span><br><span class="line">        res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;&lt;http://localhost:5000&gt;&#x27;</span>);</span><br><span class="line">        res.<span class="title function_">header</span>(<span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 匹配规则</span></span><br><span class="line">    <span class="attr">pathRewrite</span>:&#123;</span><br><span class="line">        <span class="comment">// 访问路径 映射到 目标服务器中的路径</span></span><br><span class="line">        <span class="string">&#x27;^/v1/api&#x27;</span>:<span class="string">&#x27;/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>

<p>2、vue框架的跨域<br>vue中实现开发环境的时的反向代理进行跨域解决，在项目根目录下面创建一个vue.config.js文件，写下如下代码<br>vue.config.js部分配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="comment">// 指定服务器模块</span></span><br><span class="line">    <span class="attr">devServer</span>:&#123;</span><br><span class="line">        <span class="comment">// 代理</span></span><br><span class="line">        <span class="attr">proxy</span>:&#123;</span><br><span class="line">            <span class="string">&#x27;/v1/api&#x27;</span>:&#123;</span><br><span class="line">                <span class="comment">// 目标地址</span></span><br><span class="line">                <span class="attr">target</span>:<span class="string">&#x27;&lt;http://localhost:3000&gt;&#x27;</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>:<span class="literal">true</span>,</span><br><span class="line">                <span class="attr">pathRewrite</span>:&#123;</span><br><span class="line">                    <span class="string">&#x27;/v1/api&#x27;</span>:<span class="string">&#x27;/api&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>五、document.domain + iframe跨域<br>前提条件<br>这两个域名必须属于同一个一级域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。<br>Javascript出于对安全性的考虑，而禁止两个或者多个不同域的页面进行互相操作。<br>而相同域的页面在相互操作的时候不会有任何问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&quot;baidu.com&quot;</span>);     <span class="comment">//&quot;baidu.com&quot;</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&quot;www.baidu.com&quot;</span>); <span class="comment">//&quot;www.baidu.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>举例<br>1）父窗口：<code>(&lt;http://father.baidu.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://child.baidu.com/b.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&#x27;baidu.com&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> user = <span class="string">&#x27;admin&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>预览<br>1）子窗口：<code>(http://child.baidu.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&#x27;baidu.com&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取父窗口中变量</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get js data from parent ---&gt; &#x27;</span> + <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">user</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>六、location.hash + iframe跨域<br>hash 属性是一个可读可写的字符串，该字符串是 URL 的锚部分（从 # 号开始的部分）。</p>
<p>实现原理<br>a想要与b跨域相互通信，通过中间页c来实现。<br>三个页面，不同域之间利用iframe的location.hash传值，相同域之间直接js访问来通信。<br>利用location.hash传值,创建定时器，坚持hash的变化，执行相应的操作。<br>下面我们来完成一个案例：<br>具体实现<br>A域：a.html -&gt; B域：b.html -&gt; A域：c.html<br>a与b不同域只能通过hash值单向通信，b与c也不同域也只能单向通信，但c与a同域，所以c可通过parent.parent访问a页面所有对象。<br>1）a.html：<code>(&lt;http://www.baidu1.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://www.baidu2.com/b.html&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 向b.html传hash值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        iframe.<span class="property">src</span> = iframe.<span class="property">src</span> + <span class="string">&#x27;#user=admin&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 开放给同域c.html的回调方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">onCallback</span>(<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;data from c.html ---&gt; &#x27;</span> + res);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）b.html：<code>(http://www.baidu2.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://www.baidu1.com/c.html&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听a.html传来的hash值，再传给c.html</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onhashchange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        iframe.<span class="property">src</span> = iframe.<span class="property">src</span> + location.<span class="property">hash</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">3）c.html：(http://www.baidu1.com/c.html)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听b.html传来的hash值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onhashchange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 再通过操作同域a.html的js回调，将结果传回</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">parent</span>.<span class="title function_">onCallback</span>(<span class="string">&#x27;hello: &#x27;</span> + location.<span class="property">hash</span>.<span class="title function_">replace</span>(<span class="string">&#x27;#user=&#x27;</span>, <span class="string">&#x27;&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>优缺点<br>location.hash + iframe跨域的优点：</p>
<p>可以解决域名完全不同的跨域<br>可以实现双向通讯<br>location.hash + iframe跨域的缺点：</p>
<p>location.hash会直接暴露在URL里，并且在一些浏览器里会产生历史记录，数据安全性不高也影响用户体验<br>另外由于URL大小的限制，支持传递的数据量也不大。<br>七、window.name + iframe解决跨域<br>window.name属性的独特之处：只要在一个window下，无论url怎么变化，只要设置好了window.name，那么后续就一直都不会改变。同理，在iframe中，即使url在变化，iframe中的window.name也是一个固定的值，利用这个，我们就可以实现跨域了（2MB）。</p>
<p>举例<br>test1.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>test1页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://192.168.0.1/php_demo/test2.html&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ifr = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;iframe&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    ifr.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> flag = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    ifr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;跨域获取数据&#x27;</span>, ifr.<span class="property">contentWindow</span>.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">        ifr.<span class="property">contentWindow</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>test2.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>test2页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> person = &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;大鹏_yp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">age</span>: <span class="number">24</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">school</span>: <span class="string">&#x27;lngydx&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">name</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(person)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过iframe的src属性由外域转向本地域，跨域数据即由iframe的window.name从外域传递到本地域。这个就巧妙地绕过了浏览器的跨域访问限制，但同时它又是安全操作。</p>
<p>八、postMessage通信跨域<br>PWA渐进式web应用</p>
<p>在HTML5中新增了postMessage方法，postMessage可以实现跨文档消息传输（Cross Document Messaging）<br>该方法可以通过绑定window的message事件来监听发送跨文档消息传输内容。<br>它可用于解决以下方面的问题：</p>
<p>a. 页面和其打开的新窗口的数据传递<br>b. 多窗口之间消息传递<br>c. 页面与嵌套的iframe消息传递<br>d. 上面三个场景的跨域数据传递</p>
<p>postMessage用法：</p>
<p>postMessage(data,origin)方法接受两个参数<br>参数说明：</p>
<p>data： html5规范支持任意基本类型或可复制的对象，但部分浏览器只支持字符串，所以传参时最好用JSON.stringify()序列化。<br>origin： 协议+主机+端口号，也可以设置为”*”，表示可以传递给任意窗口，如果要指定和当前窗口同源的话设置为”/“。<br>举例<br>postMessage：发送<br>onmessage：接收<br>1）a.html：<code>(&lt;http://www.baidu1.com/a.html&gt;)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://www.baidu2.com/b.html&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    iframe.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;aym&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 向domain2传送跨域数据</span></span></span><br><span class="line"><span class="language-javascript">        iframe.<span class="property">contentWindow</span>.<span class="title function_">postMessage</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data), <span class="string">&#x27;http://www.baidu2.com&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 接受baidu2返回数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;data from baidu2 ---&gt; &#x27;</span> + e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）b.html：<code>(http://www.baidu2.com/b.html)</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 接收baidu1的数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;data from baidu1 ---&gt; &#x27;</span> + e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript">            data.<span class="property">number</span> = <span class="number">16</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 处理后再发回baidu1</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="title function_">postMessage</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data), <span class="string">&#x27;http://www.baidu1.com&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>九、WebSocket协议跨域<br>WebSocket protocol是HTML5一种新的协议。它实现了浏览器与服务器全双工通信，同时允许跨域通讯，是server push技术的一种很好的实现。<br>原生WebSocket API使用起来不太方便，我们使用Socket.io，它很好地封装了webSocket接口，提供了更简单、灵活的接口，也对不支持webSocket的浏览器提供了向下兼容。<br>WebSocket 如何工作<br>Web浏览器和服务器都必须实现 WebSockets 协议来建立和维护连接。由于 WebSockets 连接长期存在，与典型的HTTP连接不同，对服务器有重要的影响。</p>
<p>基于多线程或多进程的服务器无法适用于 WebSockets，因为它旨在打开连接，尽可能快地处理请求，然后关闭连接。任何实际的 WebSockets 服务器端实现都需要一个异步服务器。</p>
<p>案例<br>1）前端代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>user input：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> socket = <span class="title function_">io</span>(<span class="string">&#x27;http://www.baidu2.com:8080&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 连接成功处理</span></span></span><br><span class="line"><span class="language-javascript">socket.<span class="title function_">on</span>(<span class="string">&#x27;connect&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听服务端消息</span></span></span><br><span class="line"><span class="language-javascript">    socket.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data from server: ---&gt; &#x27;</span> + msg);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听服务端关闭</span></span></span><br><span class="line"><span class="language-javascript">    socket.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server socket has closed.&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="property">getElementsByTagName</span>[<span class="string">&#x27;input&#x27;</span>](<span class="number">0</span>).<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    socket.<span class="title function_">send</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）Nodejs socket后台：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> socket = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启http服务</span></span><br><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    res.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;Content-type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    res.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="string">&#x27;8080&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server is running at port 8080...&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听socket连接</span></span><br><span class="line">socket.<span class="title function_">listen</span>(server).<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="keyword">function</span>(<span class="params">client</span>) &#123;</span><br><span class="line">    <span class="comment">// 接收信息</span></span><br><span class="line">    client.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">        client.<span class="title function_">send</span>(<span class="string">&#x27;hello：&#x27;</span> + msg);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data from client: ---&gt; &#x27;</span> + msg);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 断开处理</span></span><br><span class="line">    client.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Client socket has closed.&#x27;</span>); </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/11/20-22-22/" class="post-title-link" itemprop="url">css</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2021-01-11T20:22:22+08:00">2021-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--可以写在任何地方，建议写在&lt;head&gt;标签中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.test</span> &#123;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#idd</span> &#123;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--引入外部css,可以触发浏览器缓存--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./test.css&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h2><p>响应式布局：在不同设备之间缩放网页</p>
<ul>
<li>媒介查询</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//大范围在上面</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">768px</span>)&#123;</span><br><span class="line">当屏幕小于该尺寸时采用如下布局</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span>(<span class="attribute">max-width</span>:<span class="number">1020px</span>)&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>网页适配移动端</p>
<ul>
<li><p>百分比<br><code>.item&#123;width:55%;&#125;</code></p>
</li>
<li><p>利用 rem 单位</p>
<blockquote>
<p>rem 相对与根文本字体大小<br>em 相对与自己的字体或父元素的字体大小</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.htmlfont-size</span>:<span class="number">100px</span>;&#125;</span><br><span class="line"><span class="selector-class">.item</span>&#123;<span class="attribute">width</span>: <span class="number">0.4rem</span>;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>dpr=物理像素/设备独立像素<br><code>&lt;meta name=&quot;viewport&quot; content= &quot;width=device-width,initial-scale=1/dpr&gt;</code></li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><blockquote>
<p>后来者居上</p>
</blockquote>
<h4 id="1-基础选择器"><a href="#1-基础选择器" class="headerlink" title="1.基础选择器"></a>1.基础选择器</h4><ul>
<li>标签选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>类选择器：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  .类名 &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*不能用纯数字*/</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/*.....*/</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--后写的class会失效--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test&quot;</span> <span class="attr">class</span>=<span class="string">&quot;test1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--生效顺序由css中的位置决定--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test3 test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>id 选择器：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#id</span>名 &#123;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*只能使用一次*/</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/*不能用数字开头*/</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;xx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通配符选择器：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/*不需要调用，自动给所有的元素使用*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-组合选择器"><a href="#2-组合选择器" class="headerlink" title="2.组合选择器"></a>2.组合选择器</h4><ul>
<li>后代选择器:</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1 元素2 &#123;</span></span><br><span class="line"><span class="comment">样式 ;</span></span><br><span class="line"><span class="comment">选择元素1里面的所有元素2(后代元素);</span></span><br><span class="line"><span class="comment">元素1，2用空格隔开</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">如：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>子选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1&gt;元素2 &#123;</span></span><br><span class="line"><span class="comment">选择元素1里的所有直接后代元素2;</span></span><br><span class="line"><span class="comment">元素2必须是亲儿子</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">如：</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div里最近一级p标签元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>兄弟选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div之后，和div同级且相邻的第一个p元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*选择div之后，和div同级的所有p元素*/</span></span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>并集选择器：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">元素1，元素2&#123;xxxxx同时选择元素1和2&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-伪类选择器"><a href="#3-伪类选择器" class="headerlink" title="3.伪类选择器"></a>3.伪类选择器</h3><blockquote>
<p>选择元素的特殊状态</p>
</blockquote>
<ul>
<li>链接伪类选择器</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*顺序不能乱写*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="comment">/*没有访问过*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="comment">/*访问过的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/*鼠标悬浮*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="comment">/*点击时*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="comment">/*点击时获取焦点*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="comment">/*勾选时的复选框或单选框*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:disabled</span> &#123;</span><br><span class="line">  <span class="comment">/*禁用的input元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:enabled</span> &#123;</span><br><span class="line">  <span class="comment">/*未禁用的input元素*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>结构性伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">  <span class="comment">/*选择第一个子元素为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="comment">/*选择最后一个子元素为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:only-child</span> &#123;</span><br><span class="line">  <span class="comment">/*选择没有兄弟li节点的li元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   选择第3个子元素为li的元素,</span></span><br><span class="line"><span class="comment">   不写则都不生效，</span></span><br><span class="line"><span class="comment">   写n则选择全部符合的，</span></span><br><span class="line"><span class="comment">   2n则为偶数的,</span></span><br><span class="line"><span class="comment">   2n+1则选择奇数的,</span></span><br><span class="line"><span class="comment">   -n+5前五个</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-last-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*倒数第三个*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-of-type &#123;</span><br><span class="line">  <span class="comment">/*选择第一个为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:last-of-type</span> &#123;</span><br><span class="line">  <span class="comment">/*选择最后一个为li的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:only-of-type</span> &#123;</span><br><span class="line">  <span class="comment">/*选择没有同级li元素的li节点*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">  <span class="comment">/*选择序号（同类型）为偶数的xxx元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-last-of-type</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="comment">/*倒数第三个*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="comment">/* 选中根元素,即html标签 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:empty</span> &#123;</span><br><span class="line">  <span class="comment">/* 选择div标签体为空的元素 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>否定伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.test</span>) &#123;</span><br><span class="line">  <span class="comment">/*选择div中类名不是test的元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[title=<span class="string">&quot;xx&quot;</span>]</span>) &#123;</span><br><span class="line">  <span class="comment">/*选择div,排除属性为title=&#x27;xx&#x27;的div元素*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)) &#123;</span><br><span class="line">  <span class="comment">/*选择div,排除第二个*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>目标伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:target</span> &#123;</span><br><span class="line">  <span class="comment">/* 锚点选中的元素 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>语言伪类</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:lang</span>(en) &#123;</span><br><span class="line">  <span class="comment">/* 元素的lang属性为en的节点 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:lang</span>(en) &#123;</span><br><span class="line">  <span class="comment">/* div元素的lang属性为en的div节点 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>伪元素选择器</li>
</ul>
<blockquote>
<p>选择元素中的特殊位置<br>可以只写一个冒号，除了 placeholder 和 selection</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(伪元素)<span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;xxx&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::first-letter</span>&#123;</span><br><span class="line">   <span class="comment">/* div中第一个文字 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">   <span class="comment">/* div中第一行 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::selection</span>&#123;</span><br><span class="line">   <span class="comment">/* div中选中的颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::placeholder</span>&#123;</span><br><span class="line">   <span class="comment">/* 选中input中的提示文字 */</span></span><br><span class="line">   <span class="attribute">color</span>:red</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在元素前面创建一个元素 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line"><span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">display</span>:xxx;</span><br><span class="line"><span class="attribute">color</span>:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在元素后面创建一个元素 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line"><span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">display</span>:xxx;</span><br><span class="line"><span class="attribute">color</span>:xxx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-属性选择器"><a href="#4-属性选择器" class="headerlink" title="4. 属性选择器"></a>4. 属性选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[attr(属性名称)]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[attr(属性名称)=<span class="string">&quot;val(属性值)&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值为a开头的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)^=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值为a结尾的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)$=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*选择attr的值包含a的元素*/</span></span><br><span class="line"><span class="selector-attr">[attr(属性名称)*=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Css-的三种样式表"><a href="#Css-的三种样式表" class="headerlink" title="Css 的三种样式表"></a>Css 的三种样式表</h4><ol>
<li>行内样式表<code>&lt;div style=&quot;&quot;&gt;&lt;/div&gt;</code></li>
<li>内部样式表<code>&lt;style&gt;&lt;/&gt;</code></li>
<li>外部样式表<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css文件路径&quot;&gt;</code></li>
</ol>
<blockquote>
<p>css 继承:可继承文字相关的样式;而不能继承布局相关的样式</p>
</blockquote>
<p><em>一般情况下，优先级如下：</em></p>
<p><code>（内联(行内)样式）Inline style &gt; （内部样式）Internal style sheet =（外部样式）External style sheet &gt; 浏览器默认样式</code></p>
<p><code>!important&gt;行内(内联)样式 &gt; id 选择器 &gt; 类选择器 = 伪类选择器 = 属性选择器 &gt; 标签选择器 = 伪元素选择器&gt;通配符选择器&gt;继承</code></p>
<p>权重越大，优先级越高：(<code>ID选择器：100</code>、<code>类/伪类/属性选择器10</code>、 <code>标签（元素）/伪元素选择器1</code>)、若权重相同，则后写的生效</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span> <span class="selector-tag">p</span> <span class="selector-class">.tt</span>&#123;xxx&#125;  //权重为<span class="number">100</span>+<span class="number">1</span>+<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#box</span> <span class="selector-class">.tt</span>&#123;xxx&#125;  //权重<span class="number">100</span>+<span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>注意：如果外部样式放在内部样式的后面，则外部样式将覆盖内部样式。</p>
<h4 id="元素显示模式"><a href="#元素显示模式" class="headerlink" title="元素显示模式"></a>元素显示模式</h4><ol>
<li><p>块元素：<code>&lt;h1&gt; &lt;p&gt; &lt;div&gt; &lt;ul&gt;....</code>独占一行，默认占满父元素；宽高边距可控；文字列元素内不能使用块级元素如<code>&lt;p&gt;</code>与<code>&lt;h1&gt;</code>内不能放<code>&lt;div&gt;</code>;图片<code>&lt;img&gt;</code>可放在<code>&lt;p&gt;</code>内调整位置</p>
</li>
<li><p>行内(内联)元素：<code>&lt;a&gt;,&lt;span&gt;,&lt;b&gt;,&lt;em&gt;...</code>一行多个；宽高无法直接设置；只能容纳文本或其他行内元素；</p>
</li>
<li><p>行内块元素：<code>&lt;img /&gt;,&lt;input /&gt;,&lt;td&gt;</code>高宽可设置；一行多个</p>
</li>
<li><p>特别的<code>&lt;a&gt;</code>内可以放块级元素，给<code>&lt;a&gt;</code>转换一下块级模式最安全</p>
</li>
</ol>
<h4 id="显示模式转换"><a href="#显示模式转换" class="headerlink" title="显示模式转换"></a>显示模式转换</h4><ol>
<li><p>转换为块元素：<code>dispaly:block</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">   <span class="attribute">width</span>:<span class="number">22</span>xp;</span><br><span class="line">   ....</span><br><span class="line">   <span class="attribute">display</span>:block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>转换为行内元素 <code>dispaly:inline</code></p>
</li>
<li><p>行内块元素：<code>display:inline-block</code></p>
</li>
</ol>
<hr>
<h3 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h3><p>多个块级元素纵向排列用标准流，横向排列用浮动<br>特性：</p>
<ol>
<li>脱离标准流的控制，不再保留原先的位置</li>
<li>所有浮动一行对齐.上对齐,宽高位置只跟上一个浮动元素有关,父级宽度不够时会换行</li>
<li>具有行内块特性</li>
</ol>
<blockquote>
<p>浮动元素不会压住文字和图片、表单元素（输入框、单选按钮、下拉选择框、复选框等）；可做出文字环绕图片效果；</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">  <span class="attribute">float</span>: none|left|right；;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:假如某个 div 元素 A 是浮动的，如果 A 元素上一个元素也是浮动的，那么 A 元素会跟随在上一个元素的后边(如果一行放不下这两个元素，那么 A 元素会被挤到下一行)；如果 A 元素上一个元素是标准流中的元素，那么 A 的相对垂直位置不会改变，也就是说 A 的顶部总是和上一个元素的底部对齐。</p>
</blockquote>
<h3 id="常用标准流约束浮动位置"><a href="#常用标准流约束浮动位置" class="headerlink" title="常用标准流约束浮动位置"></a>常用标准流约束浮动位置</h3><p>浮动影响：</p>
<ul>
<li>父级盒子不设置高度时，子盒子浮动，脱标不占位置，则父级盒子高度为 0；</li>
<li>被浮动元素覆盖的块级元素中的文字会被挤出去；</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* //父元素清除浮动影响 */</span></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: none|<span class="built_in">left</span>(该元素左边不允许出现浮动元素) |right|both；;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意:对于 CSS 的清除浮动(clear)，一定要牢记：这个规则只能影响使用清除的元素本身，不能影响其他元素。</p>
</blockquote>
<ol>
<li><p>额外标签法：在浮动元素的末尾添加一个空标签如<code>&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;</code></p>
</li>
<li><p>父级添加<code>overflow:hidden|auto|scroll;</code> 设置为 auto 时会出现滚动条，可选择隐藏<code>overflow-x:hidden;</code>或<code>overflow-y:auto</code></p>
</li>
<li><p>父级伪元素清除浮动</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  conten: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">  <span class="comment">/*IE6,7专有*/</span></span><br><span class="line">  *zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="边距折叠问题"><a href="#边距折叠问题" class="headerlink" title="边距折叠问题"></a>边距折叠问题</h3><p>块的上外边距(margin-top)和下外边距(margin-bottom)有时合并(折叠)为单个边距，其大小为单个边距的最大值(或如果它们相等，则仅为其中一个)，这种行为称为边距折叠<br>有三种情况会形成外边距重叠：</p>
<ul>
<li><p>同一层相邻元素之间，上下外边距合并</p>
</li>
<li><p>没有内容将父元素和后代元素分开；如果没有边框 border，内边距 padding，行内内容，则就会出现父块元素和其内后代块元素外边界重叠，重叠部分最终会溢出到父级块元素外面。 -空的块级元素：当一个块元素上边界 margin-top 直接贴到元素下边界 margin-bottom 时也会发生边界折叠。</p>
</li>
<li><p>解决方法：触发 BFC（块格式上下文）</p>
<ul>
<li>为父元素设置：上边框或上内边距</li>
<li>为父元素添加 overflow：hidden；</li>
<li>为父元素添加 dispaly:inline-block/tabl-cell;或 float:left;或 positon:absolute/fixed;</li>
</ul>
</li>
</ul>
<h3 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h3><p>将盒子固定到某一个位置<code>定位=定位模式+边偏移</code></p>
<ol>
<li><p>定位模式：<code>position:static|relative|absolute|fixed</code></p>
<ul>
<li><p>静态定位 static：不脱标，不能偏移；</p>
</li>
<li><p>相对定位 relative：相对与自己原来的位置来移动；不脱标，继续保留原来的位置</p>
</li>
<li><p>绝对定位 absolute：若没有祖先元素或祖先元素没有定位，则以浏览器为准；若祖先元素有定位（任何定位），则以最近一级有定位的祖先元素为参考点；</p>
</li>
<li><p>固定定位 fixed：以浏览器可视窗口为参考点，跟父级元素没有任何关系；不随滚动条滚动，不在占有原先位置；</p>
</li>
<li><p>粘性定位 sticky：离它最近的一个拥有滚动机制的祖先元素为参考点，即便这个祖先不是最近的真实可滚动祖先；占有原先的位置；必须添加 top,left,right,bottom 其中一个才生效；可以和浮动一起设置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 固定在版心右侧位置 --&gt;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">50%</span>;浏览器的一半位置</span><br><span class="line"><span class="attribute">margin-left</span>:版心宽度的一半距离。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>边偏移：<code>top:33px;bottom:...;left:.....;right:...</code></p>
</li>
<li><p>叠放次序：<code>选择器&#123;z-index:1;&#125;</code>数值可正可负；数值越大盒子越靠上；只有定位的盒子才能有 z-index 属性；另外，有定位的在没有定位的上面，都有定位则后面写的在上面，</p>
</li>
</ol>
<blockquote>
<p>不能和浮动一起写(sticky 除外)，优先定位<br>子级是绝对定位的话，父级要用相对定位，子盒子不需要占有位置，父级需要占有位置；<br>行内元素添加绝对或固定定位，可直接设置宽高；块级元素添加后不设置宽高则默认是内容大小；相对定位还是保留元素之前的显示模式<br>浮动元素可以压住标准流盒子；但不会压住标准流盒子里的文字和图片；<br>绝对定位和固定定位，想让宽高和包含块一致，可同时设置 left:0;right:0 与 top:0;bottom:0</p>
</blockquote>
<ul>
<li>flex 弹性布局<ul>
<li>采用 Flex 布局的元素，称为 Flex 容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称”项目”。</li>
<li>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。</li>
<li>主轴的开始位置（与边框的交叉点）叫做 main start，结束位置叫做 main end；</li>
<li>交叉轴的开始位置叫做 cross start，结束位置叫做 cross end。</li>
<li>项目默认沿主轴排列。单个项目占据的主轴空间叫做 main size，占据的交叉轴空间叫做 cross size。</li>
<li>当一层 flex 布局的时候，设置子元素的 width:100%就没有问题。当页面中多层 flex 布局嵌套的时候，设置其中子元素的 width：100%会不起作用。可把元素设置为绝对定位来解决该问题。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>容器属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-direction:row/row-reverse/column/column-reverse</td>
<td>决定主轴的方向</td>
</tr>
<tr>
<td>flex-wrap:nowrap/wrap/wrap-reverse（最开始的一行在下面，新的在上面）;</td>
<td>如果一条轴线排不下，是否换行以及如何换行</td>
</tr>
<tr>
<td>flex-flow:<code>&lt;flex-direction&gt;&lt;flex-wrap&gt;</code></td>
<td>flex-direction 与 flex-wrap 的简写形式</td>
</tr>
<tr>
<td>justify-content:flex-start/flex-end/center/space-between（两端对齐，项目间的间隔相等)/space-around（每个项目间的间隔相等，项目与边框的间隔较小）</td>
<td>定义项目在主轴上的对齐方式</td>
</tr>
<tr>
<td>align-items:stretch（项目无高度或设为 auto 时，将会占满整个容器高度）/center/flex-start/flex-end/baseline（项目的第一行文字的基线对齐）;</td>
<td>定义项目在交叉轴上的对齐方式</td>
</tr>
<tr>
<td>align-content:stretch（项目无高度或设为 auto 时，将会占满整个容器高度）/center/flex-start/flex-end/space-between/space-around</td>
<td>定义项目在多根轴线上的对齐方式，如果项目只有一根轴线则不起作用</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>项目属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>flex-grow: 数字;</td>
<td>定义项目的放大比例，默认 0；若全部设为 1，则平分空间</td>
</tr>
<tr>
<td>flex-shrink:数字;</td>
<td>定义缩小比例，默认 1，都设为 1，空间不足，则都等比例缩小；若设为 0 则不会</td>
</tr>
<tr>
<td>flex-basis:宽高/auto;</td>
<td>定义项目占主轴的空间，默认 auto</td>
</tr>
<tr>
<td>flex:none/[<code>&lt;flex-grow&gt;</code>,flex-shrink，<code>&lt;flex-basis&gt;</code>];</td>
<td>flex-grow,flex-shrink，flex-basis 简写，后两个可选，默认 0,1，auto</td>
</tr>
<tr>
<td>order:数字;</td>
<td>定义项目的排列顺序，越小越靠前，默认 0</td>
</tr>
<tr>
<td>align-self:auto / flex-start / flex-end / center / baseline / stretch;</td>
<td>允许单个项目有与其他项目不一样的对齐方式，可覆盖 align-items 属性。默认值为 auto，表示继承父元素的 align-items 属性，如果没有父元素，则等同于 stretch。</td>
</tr>
</tbody></table>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line"><span class="attribute">display</span>:flex;</span><br><span class="line"><span class="attribute">flex-direction</span>:row/coloumn;</span><br><span class="line"><span class="attribute">justify-content</span>:<span class="built_in">flex-start</span>(开始对齐)/flex-end（尾部对齐）/center/space-between（两端对齐）/<span class="built_in">space-around</span>(自动分配间隔）</span><br><span class="line">align-items:stretch/center/flex-start/flex-end/baseline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h3><ul>
<li>display:none（隐藏）|block(除转换为块级元素外，还可显示元素);</li>
</ul>
<blockquote>
<p>display 隐藏后不再占有原来的位置；</p>
</blockquote>
<ul>
<li>visibility:visible(可视)|hidden；</li>
</ul>
<blockquote>
<p>visibility:隐藏元素后，继续占有原来的位置；</p>
</blockquote>
<ul>
<li>opacity:0;</li>
</ul>
<h4 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h4><ul>
<li><p>font-family:默认使用第一个字体,<code>font-family:&quot;Microsoft yahie&quot; ,&quot;hiragino Sans GB&quot;,Arial;</code></p>
</li>
<li><p>font-size: 单位 px</p>
</li>
<li><p>font-weight: <code>lighter或100-300</code>;<code>nomal或400</code>不加粗;<code>bold或700</code>加粗；<code>100-900</code></p>
</li>
<li><p>font-style:<code>normal</code>默认；<code>italic</code>斜体；<code>oblique</code>强制斜体</p>
</li>
<li><p>color：支持十六进制、rgb（255,5,5）、预设颜色值 red</p>
</li>
<li><p>text-align:文本内容对齐 left,right,center;</p>
</li>
<li><p>line-height:行高，单位 px|百分比|倍数,不能为负数;</p>
</li>
<li><p>text-decoration:文本装饰；<code>none</code>没有装饰线；<code>underline</code> 下划线；<code>line-through</code>删除线；可搭配 dotted 线|wavy 波浪线和颜色</p>
</li>
<li><p>text-indent:缩进；单位 em 代表 1 个文字大小；px 像素</p>
</li>
<li><p>letter-space:字间距；单位 em 代表 1 个文字大小；px 像素,可以为负数</p>
</li>
<li><p>word-space:英文字母间距；单位 em 代表 1 个文字大小；px 像素,可以为负数</p>
</li>
<li><p>字体复合属性：<code>font: font-style font-weight font-size/line-height font-family;</code>顺序不能换，必须保留<code>font-size</code> 和<code>font-family</code>属性</p>
</li>
</ul>
<h4 id="css-背景"><a href="#css-背景" class="headerlink" title="css 背景"></a>css 背景</h4><ul>
<li>背景颜色：<code>background-color</code></li>
<li>背景图片：<code>background-image:url()</code></li>
<li>背景图片重复平铺：<code>background-repeat:no-repeat|repeat-x|repeat-y</code></li>
<li>背景图片位置：<code>background-position:(方位名词：top|center|left|right|top left水平方向+垂直方向等)(坐标：x,y或只有x坐标与垂直居中)两个可混合使用</code></li>
<li>背景固定：<code>background-attachment:scroll|fixed(固定)</code></li>
<li>背景复合写法：<code>background:(没有顺序)一般颜色 图片 平铺 固定 位置。。</code></li>
<li>背景半透明 ：<code>backround:rgba(225,22,0,0.5)最后一个参数代表透明度</code></li>
</ul>
<p>子标签会继承父标签的部分样式如字体属性，文本属性（除 vertical-algin）、颜色等，不会继承边框、背景、边距、宽高等<br>行高可以不跟单位：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">1.5</span>; <span class="comment">/*子元素字体大小的1.5倍*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h3><h4 id="边框-border"><a href="#边框-border" class="headerlink" title="边框:border"></a>边框:<code>border</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 加边框后盒子会变大 */</span></span><br><span class="line"><span class="attribute">border-width</span>:单位px</span><br><span class="line">border-stye:<span class="built_in">solid</span>(实线)|dashed（虚线）|dotted（点线）|<span class="built_in">double</span>(双实线)</span><br><span class="line">border-color:</span><br><span class="line"><span class="comment">/* 复合写法：border：xxx xxx xxx没有循序 */</span></span><br><span class="line"><span class="comment">/* 每条边可单独设置: */</span></span><br><span class="line">border-top:</span><br><span class="line">border-bottom:</span><br><span class="line"><span class="comment">/* 合并相邻边框 */</span></span><br><span class="line">border-collapse:collapse;</span><br></pre></td></tr></table></figure>

<h4 id="内容-content"><a href="#内容-content" class="headerlink" title="内容:content"></a>内容:<code>content</code></h4><h4 id="内边界-padding"><a href="#内边界-padding" class="headerlink" title="内边界:padding"></a>内边界:<code>padding</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 也会改变盒子大小,若盒子没有width/height属性则不会 */</span></span><br><span class="line"><span class="comment">/* 可分开设置上下左右边距 */</span></span><br><span class="line"><span class="attribute">padding-left</span>:<span class="number">20px</span></span><br><span class="line"><span class="comment">/* 复合写法：padding：（2个：上下，左右；3个：上，左右，下；4个：顺时针） */</span></span><br><span class="line"><span class="comment">/* 不能为负数 */</span></span><br></pre></td></tr></table></figure>

<h4 id="外边距-margin"><a href="#外边距-margin" class="headerlink" title="外边距:margin"></a>外边距:<code>margin</code></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*可分开设置 */</span></span><br><span class="line"><span class="attribute">margin-left</span>:<span class="number">1px</span></span><br><span class="line">nargin-bottom:<span class="number">1px</span></span><br><span class="line"><span class="comment">/* 复合写法与padding一致 */</span></span><br></pre></td></tr></table></figure>

<h3 id="盒子居中"><a href="#盒子居中" class="headerlink" title="盒子居中"></a>盒子居中</h3><ul>
<li><p>利用绝对定位，先将元素的左上角通过top:50%和left:50%定位到页面的中心，然后再通过<code>transform:translate(-50%,-50%)</code>来调整元素的中心点到页面的中心</p>
</li>
<li><p>使用flex布局，通过<code>align-items:center</code>和<code>justify-content:center</code>设置容器的垂直和水平方向上为居中对齐，然后它的子元素也可以实现垂直和水平的居中</p>
</li>
<li><p>父盒子<code>高已知</code>的情况,子盒子是<code>行内元素</code>或者<code>行内块</code>时,给父盒子设置<code>text-align:center;</code>会使子盒子水平居中,给单行文本设置<code>line-height=盒子高度</code>；使文本在盒子里垂直居中</p>
</li>
<li><p>父盒子 <code>display: table-cell;vertical-align: middle;text-align: center;</code>的情况,子盒子是<code>行内元素</code>或者<code>行内块</code>时(table-cell表格单元格的形式呈现，类似于td标签)</p>
</li>
<li><p>利用绝对定位，先将元素的左上角通过top:50%和left:50%定位到页面的中心，然后再通过margin负值来调整元素的中心点到页面的中心。该方法适用于盒子<code>宽高已知</code>的情况</p>
</li>
<li><p>盒子<code>宽高已知</code>的情况，通过margin调整元素的中心点到页面的中心。(注意盒子的塌陷问题,margin-top不用50%的原因是，百分比默认的是父盒子宽度的百分比)</p>
</li>
<li><p>利用绝对定位，设置四个方向的值都为0，并将margin设置为auto，由于宽高固定，因此对应方向实现平分，可以实现水平和垂直方向上的居中。该方法适用于盒子<code>有宽高</code>的情况</p>
</li>
<li><p>使用 JS 的思路大概给大家说下：</p>
</li>
</ul>
<p>1、js 中只要获取到当前盒子具体的 left/top 值即可</p>
<p>2、一屏幕的宽高-盒子的宽高，最后除以 2，获取的值就是它应该具备的 left/top(这个值可以使盒子处于页面中间)</p>
<h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><ul>
<li><p>单列布局</p>
</li>
<li><p>两列布局<br>两栏布局（左侧宽度固定，右侧自适应）：左浮动或 absoulute，右 margin-left 调位置或者触发 BFC；使用 flex 布局；使用网格布局</p>
</li>
<li><p>三栏布局</p>
<ul>
<li>圣杯布局</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">15%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fld</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fcd</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.frd</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>双飞翼布局</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">600px</span>; //确保中间内容可以显示出来，两倍<span class="attribute">left</span>宽+<span class="attribute">right</span>宽</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: red;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> <span class="selector-class">.inner</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span>; //中间新增部分</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>两种布局实现方式对比:两种布局方式都是把主列放在文档流最前面，使主列优先加载。两种布局方式在实现上也有相同之处，都是让三列浮动，然后通过负外边距形成三列布局。两种布局方式的不同之处在于如何处理中间主列的位置：圣杯布局是利用父容器的左、右内边距+两个从列相对定位；双飞翼布局是把主列嵌套在一个新的父级块中利用主列的左、右外边距进行布局调整</p>
</blockquote>
<ul>
<li>粘连布局</li>
</ul>
<p>特点：有一块内容<code>&lt;main&gt;</code>，当<code>&lt;main&gt;</code>的高康足够长的时候，紧跟在<code>&lt;main&gt;</code>后面的元素<code>&lt;footer&gt;</code>会跟在<code>&lt;main&gt;</code>元素的后面。当<code>&lt;main&gt;</code>元素比较短的时候(比如小于屏幕的高度),我们期望这个<code>&lt;footer&gt;</code>元素能够“粘连”在屏幕的底部</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  * &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* //高度一层层继承下来  */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: pink;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#content</span> <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: deeppink;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: -<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>(1)footer 必须是一个独立的结构，与 wrap 没有任何嵌套关系；(2)wrap 区域的高度通过设置 min-height，变为视口高度；(3)footer 要使用 margin 为负来确定自己的位置；(4)在 main 区域需要设置 padding-bottom。这也是为了防止负 margin 导致 footer 覆盖任何实际内容。</p>
</blockquote>
<h3 id="清除内外边距"><a href="#清除内外边距" class="headerlink" title="清除内外边距"></a>清除内外边距</h3><blockquote>
<p>(body 会默认有个边距)</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h2><blockquote>
<p>伪类选择器，伪元素选择器<br>支持更多颜色：HSL，HSLA,RGBA,opacity<br>弹性盒子<br>2d、3d 变换<br>圆角、阴影、渐变<br>过渡效果<br>web 字体，显示电脑上没有的字体</p>
</blockquote>
<h3 id="私有前缀"><a href="#私有前缀" class="headerlink" title="私有前缀"></a>私有前缀</h3><blockquote>
<p>浏览器厂商用于测试新的 css 特性<br><a target="_blank" rel="noopener" href="https://www.caniuse.com/">兼容性查询网站</a></p>
</blockquote>
<ul>
<li>chrome/safari/edge：<code>-webkit-</code></li>
<li>firefox：<code>-moz-</code></li>
<li>opera：<code>-o-</code></li>
<li>IE：<code>-ms-</code></li>
</ul>
<h3 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h3><ul>
<li><code>rem</code>：根元素字体的倍数</li>
<li><code>vh</code>：视口高的百分比</li>
<li><code>vw</code>：视口宽的百分比</li>
<li><code>vmax</code>：视口宽和高中大的那个的百分比</li>
<li><code>vmin</code>：视口宽和高中小的那个的百分比</li>
</ul>
<h3 id="盒模型属性"><a href="#盒模型属性" class="headerlink" title="盒模型属性"></a>盒模型属性</h3><ul>
<li><code>box-sizing</code>：<code>border-box</code>怪异盒模型，盒子的长宽包含内边距和边框,<code>content-box</code>标准盒模型，长宽不包含内边距和边框</li>
<li>调节盒子大小 <code>resize</code>：需添加<code>overflow</code>属性。值有（<code>horizontal</code>水平方向可调教大小,<code>vertical</code>垂直方向,<code>both</code>都可以）</li>
<li>盒子阴影<code>box-shadow</code>：<code>3px水平阴影 0px垂直阴影 5px模糊距离 0px阴影尺寸 #fff颜色 inset（内阴影）</code>不占空间</li>
<li>透明：<code>opacity:0.5</code>子元素也会跟着变化</li>
</ul>
<h3 id="边框属性"><a href="#边框属性" class="headerlink" title="边框属性"></a>边框属性</h3><ul>
<li>圆角边框<code>border-radius</code>：<code>10px|10%|顺时针四个参数</code>最大值为50%;</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attribute">border-top-left-radius</span>:<span class="number">10px</span>;</span><br><span class="line"> <span class="attribute">border-top-right-radius</span>:<span class="number">10px</span>;</span><br><span class="line"> <span class="attribute">border-bottom-left-radius</span>:<span class="number">100px</span> <span class="number">200px</span>;<span class="comment">/* 椭圆x轴半径 , y轴半径*/</span></span><br><span class="line"><span class="comment">/*椭圆*/</span></span><br><span class="line"> <span class="attribute">border</span>-raduis:<span class="number">10px</span>  <span class="number">20px</span> <span class="number">30px</span> <span class="number">40px</span> /<span class="number">10px</span> <span class="number">20px</span> <span class="number">40px</span> <span class="number">10px</span></span><br></pre></td></tr></table></figure>

<ul>
<li>外轮廓：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*不占位置*/</span></span><br><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line"><span class="attribute">outline-width</span>:<span class="number">20px</span>;</span><br><span class="line"><span class="attribute">outline-color</span>:red;</span><br><span class="line"><span class="attribute">outline-style</span>:solid;</span><br><span class="line"><span class="attribute">outline-offset</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test2</span>&#123;</span><br><span class="line"><span class="attribute">outline</span>:<span class="number">20px</span> solid blue;</span><br><span class="line"><span class="attribute">outline-offset</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h3><ul>
<li><p>文字阴影：<code>text-shadow:水平阴影 垂直阴影 模糊距离 颜色</code></p>
</li>
<li><p>文本换行<code>white-space</code>：<code>normal</code>,<code>pre</code>原文显示,<code>pre-wrap</code>超出边界换行.<code>pre-line</code>超出边界换行，只识别文本中的换行，行前行尾空格会忽略.<code>no-wrap</code>不换行</p>
</li>
<li><p>文本移除<code>text-overflow</code>：<code>ellipsis</code>需配合<code>overflow:hidden(非visible);white-space:no-wrap</code>使用|<code>clip</code>默认值</p>
</li>
<li><p>文本修饰</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-decoration-line</span>:overline;</span><br><span class="line"><span class="attribute">text-decoration-style</span>:solid;</span><br><span class="line"><span class="attribute">text-decoration-line</span>:red;</span><br><span class="line"><span class="attribute">text-decoration</span>:overline solid red;</span><br></pre></td></tr></table></figure>

<ul>
<li>文本描边(wekit)</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-webkit-text-stroke-<span class="attribute">color</span>:red;</span><br><span class="line">-webkit-text-stroke-<span class="attribute">width</span>:<span class="number">10px</span>;</span><br><span class="line">-webkit-text-stroke:<span class="number">10px</span> green;</span><br></pre></td></tr></table></figure>

<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><ul>
<li><p>背景图原点<code>background-origin</code>：<code>paddding-box</code>默认，从padding区域开始；<code>border-box</code>从border区域开始，<code>content-box</code>：从内容区域开始</p>
</li>
<li><p>背景图向外裁切区域<code>background-clip</code>：<code>paddding-box</code>默认，从padding区域开始；<code>border-box</code>从border区域开始，<code>content-box</code>：从内容区域开始；<code>text</code>背景图显示在文字上，需要加上-webkit-前缀</p>
</li>
<li><p>背景图位置<code>background-position</code>：移动的距离是这个目标图片的 x，y 坐标，一般情况是向上或左移动，所以数值是负值；</p>
</li>
</ul>
<blockquote>
<p>精灵图<br>将多个小背景图整合到一张大图片中，减少了服务器的请求</p>
</blockquote>
<ul>
<li><p>背景图大小<code>background-size</code>：<code>300px 200px</code>不能为负值；<code>100% 20%</code>不能为负值；<code>auto</code>默认；<code>contain</code>图片整张放在div中，可能图片会重复铺满；<code>cover</code>图片充满div,可能会裁切一部分</p>
</li>
<li><p>复合写法<code>background:color url repeat position / size origin clip</code>size必须写在position后面且用斜杠分割，origin和clip相同可以少写后一个，</p>
</li>
<li><p>多个背景<code>background:url(&#39;xx.jpg&#39;) no-repeat right top,url(&#39;xx.jpg&#39;) no-repeat right bottom,url(&#39;xx.jpg&#39;) no-repeat left top,</code></p>
</li>
</ul>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><blockquote>
<p>本质是图片</p>
</blockquote>
<ul>
<li><p>线性渐变背景：<code>background:linear-gradient(100px|100px 20px半径,to bottom|to top|to right|to left|to left top|20deg,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>径向渐变背景：<code>background:radial-gradient(at bottom|at top|at right|at left|at left top|circle|at 20px 100px,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>重复线性渐变背景：<code>background:repeating-linear-gradient(100px|100px 20px半径,to bottom|to top|to right|to left|to left top|20deg,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
<li><p>重复径向渐变背景：<code>background:repeating-radial-gradient(at bottom|at top|at right|at left|at left top|circle|at 20px 100px,#fff(开始颜色),#3a3 10%,#3a3 100px,#000(结束颜色));</code></p>
</li>
</ul>
<h3 id="2d-3d变换"><a href="#2d-3d变换" class="headerlink" title="2d/3d变换"></a>2d/3d变换</h3><ul>
<li><p>位移属性（不能用于行内元素）：<code>transform:translateX(20%)|translateY(-10%)|translateZ(20px)|translate(10px,10px,0px);</code>位移时默认是元素的中心位置,不脱离文档流</p>
</li>
<li><p>缩放（不能用于行内元素）：<code>transform:scaleX(1.5)|scaleY(1.5)|scaleZ(1.5)|scale(1.5)|scale3d(1.5);</code>默认为 1 正常大小，通过缩放可实现字体小于浏览器的最小字体限制；<code>transform-origin:50% 50%;</code>元素缩放中心点位置</p>
</li>
<li><p>旋转：<code>transform:rotateX()|rotateY()|rotate3d()|rotateZ(30deg)|rotate(30deg);</code>z轴是垂直与屏幕的</p>
</li>
<li><p>透视：<code>transform:perspective(1000px);</code>透视距离，必须写在前面；</p>
</li>
<li><p>过渡动画：<code>transition: width(要过渡的属性) 1s(过渡时间) ease-in(过渡方式) 2s(延迟时间)</code></p>
</li>
</ul>
<blockquote>
<p>transition 过渡方式 ：ease：慢速开始，然后变快，然后慢速结束；ease-in：以慢速开始的过渡效果；ease-out：以慢速结束的过渡效果；ease-in-out：以慢速开始和结束的过渡</p>
</blockquote>
<ul>
<li>循环动画：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* //定义动画 */</span></span><br><span class="line"><span class="keyword">@keyframe</span> beat &#123;</span><br><span class="line">  <span class="comment">/* //关键帧 */</span></span><br><span class="line">  <span class="number">30%</span>: &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.3</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span>: &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* //使用动画 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.heart</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: <span class="built_in">beat</span>(动画名称) <span class="number">1.5s</span> (动画时长) <span class="built_in">infinite</span>(循环动画);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>box-shadow 可同时设置多个阴影，如</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">#fff</span> <span class="number">22px</span> -<span class="number">15px</span> <span class="number">0</span> <span class="number">6px</span>, <span class="number">#fff</span> <span class="number">57px</span> -<span class="number">6px</span> <span class="number">0</span> <span class="number">2px</span>, <span class="number">#fff</span> <span class="number">87px</span> <span class="number">4px</span> <span class="number">0</span> -<span class="number">4px</span>,</span><br><span class="line">    <span class="number">#fff</span> <span class="number">33px</span> <span class="number">6px</span> <span class="number">0</span> <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 clip-path 可快速裁剪盒子形状，使用 shape-outsizes 可实现文字不规则环绕效果（注意兼容问题）</li>
<li>transform 中的 rotate 属性旋转后，其内部内容会随之旋转。</li>
<li>设置字间距可使用 letter-spacing 属性增加或减少字符间的空白（字符间距）。该属性定义了在文本字符框之间插入多少空间(允许使用负值)</li>
<li>CSS 中用于设置过渡特效的属性是 transition，但是其不能同时使用在多个属性身上。</li>
</ul>
<h3 id="字体图标和web字体"><a href="#字体图标和web字体" class="headerlink" title="字体图标和web字体"></a>字体图标和web字体</h3><p>精灵图放大会失真，字体图标不会，且可以改变颜色大小，只适合简单图形；</p>
<p>字体图标下载网站：<code>http://icomoon.io</code> <code>https://iconfont.cn</code></p>
<p>使用方法： 1.添加字体声明在<code>&lt;style&gt;&lt;/style&gt;</code>中</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;xxname&#x27;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>);</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>),<span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>),<span class="built_in">url</span>(<span class="string">&quot;./xxx.ttf&quot;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">font-family</span>:<span class="string">&#x27;xxname&#x27;</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">19px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.使用:从官网复制图标粘贴到相应位置并设置样式:<code>span&#123;font-family:&#39;xxname&#39;;font-size:....&#125;</code></p>
<h3 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h3><p>盒边距设置为 0，边框宽度控制大小，边框背景设置为透明</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">20px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left-color</span>: red;</span><br><span class="line">  <span class="comment">/*照顾兼容性*/</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直角三角形</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line"><span class="comment">/*上边框调大*/</span></span><br><span class="line"><span class="attribute">border-top</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line"><span class="attribute">border-right</span>: <span class="number">50px</span> solid red;</span><br><span class="line"><span class="comment">/*左边和下边边框设置为0*/</span></span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">border-left</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<h3 id="鼠标样式"><a href="#鼠标样式" class="headerlink" title="鼠标样式"></a>鼠标样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="comment">/*cursor:default|pointer(手指)|move|text(文本)|not-allowed(禁止);*/</span></span><br><span class="line">  <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">&quot;xxx.png&quot;</span>) pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="防止文本域被拖拽"><a href="#防止文本域被拖拽" class="headerlink" title="防止文本域被拖拽"></a>防止文本域被拖拽</h3><p><code>textarea&#123;resize:none;&#125;</code></p>
<h3 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h3><p>用于设置行内块垂直对齐方式(必须作用与 inline-block 元素)<br><code>vertical-align:baseline(基线)|top|middle|bottom;</code></p>
<ul>
<li>解决图片底部空白缝隙问题：添加 vertical-align 属性；或转换为块级元素<code>display:block;</code></li>
</ul>
<h3 id="溢出文字省略号表示"><a href="#溢出文字省略号表示" class="headerlink" title="溢出文字省略号表示"></a>溢出文字省略号表示</h3><ul>
<li>单行</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/* 1.强制一行显示文本 */</span></span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="comment">/* 2.超出部分隐藏 */</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/* 3.超出文字用省略号表示 */</span></span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>多行</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">兼容性差，适合移动端和wwebkit浏览器</span><br><span class="line"><span class="attribute">overflow</span>:hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line"><span class="comment">/*弹性盒子显示*/</span></span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="comment">/*限时一个快元素显示的文本行数*/</span></span><br><span class="line">-webkit-line-clap:<span class="number">2</span>;</span><br><span class="line"><span class="comment">/*设置伸缩盒对象的子元素的排列方式和*/</span></span><br><span class="line">-webkit-box-orient:vertical;</span><br></pre></td></tr></table></figure>

<h3 id="盒子间的边框问题"><a href="#盒子间的边框问题" class="headerlink" title="盒子间的边框问题"></a>盒子间的边框问题</h3><p>防止边框重叠</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">111px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">222px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>鼠标移动显示边框</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*若盒子有定位，则利用z-index提高层级*/</span></span><br><span class="line"><span class="selector-tag">ul</span> ll<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*若盒子没有定位则鼠标经过时添加相对定位*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改滚动条样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 【1】IE */</span></span><br><span class="line"><span class="comment">/* IE浏览器支持通过CSS样式来改变滚动条的部件的自定义颜色 */</span></span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">　　scrollbar-face-color滚动条凸出部分的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-shadow-color立体滚动条阴影的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-highlight-color滚动条空白部分的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-3dlight-color滚动条亮边的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-darkshadow-color滚动条强阴影的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-track-color滚动条的背景颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-arrow-color上下按钮上三角箭头的颜色</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">　　scrollbar-base-color滚动条的基本颜色 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 【2】webkit */</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">::-webkit-scrollbar 滚动条整体部分</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-thumb  滚动条里面的小方块，能向上向下移动（或往左往右移动，取决于是垂直滚动条还是水平滚动条）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-track  滚动条的轨道（里面装有Thumb）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-button 滚动条的轨道的两端按钮，允许通过点击微调小方块的位置。</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-track-piece 内层轨道，滚动条中间部分（除去）</span></span><br><span class="line"><span class="comment">::-webkit-scrollbar-corner 边角，即两个滚动条的交汇处</span></span><br><span class="line"><span class="comment">::-webkit-resizer 两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/* ///////////////////////////////////////////////////////////////////// */</span></span><br><span class="line"><span class="comment">/* 定义滚动条样式 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义滚动条轨道 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义滑块 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">240</span>, <span class="number">240</span>, <span class="number">240</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="预处理器-less"><a href="#预处理器-less" class="headerlink" title="预处理器 less"></a>预处理器 less</h2><h3 id="浏览器用法"><a href="#浏览器用法" class="headerlink" title="浏览器用法"></a>浏览器用法</h3><blockquote>
<p>运行时编译<br>下载 <code>less.js</code> and include it in a <code>&lt;script&gt;&lt;/script&gt;</code> tag in the <code>&lt;head&gt;</code> element of your page:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">text</span>=<span class="string">&quot;text/less&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  .test &#123;</span></span><br><span class="line"><span class="language-xml">    .test2 &#123;</span></span><br><span class="line"><span class="language-xml">      color: red;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">  &#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;less.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><p>easyless 插件，预编译生产 css</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="comment">/*会编译到css文件中*/</span></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用＠声明一个变量,变量可重复定义，遵循块级作用域</span></span><br><span class="line"><span class="variable">@color1:</span>red;<span class="comment">//值，可直接使用</span></span><br><span class="line"><span class="variable">@m:</span>margin;<span class="comment">//属性名，使用需要加花括号</span></span><br><span class="line"><span class="variable">@selector:</span>#test3;<span class="comment">//类名，使用需要加花括号</span></span><br><span class="line"><span class="variable">@url:</span><span class="string">&quot;../../bg.jpg&quot;</span>;<span class="comment">//地址链接，使用需要加花括号</span></span><br><span class="line"><span class="variable">@themes:</span> <span class="string">&quot;../../src/themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;@&#123;themes&#125;/tidal-wave.less&quot;</span>;</span><br><span class="line"><span class="selector-class">.test</span>&#123;</span><br><span class="line">   <span class="selector-class">.test2</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="variable">@color1</span>;</span><br><span class="line">      @&#123;m&#125;:<span class="number">0px</span> <span class="number">1px</span> <span class="number">2px</span> <span class="number">3px</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable">@&#123;selector&#125;</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>:red;</span><br><span class="line">      <span class="attribute">background</span>:url(<span class="string">@&#123;url&#125;</span>)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@primary:</span>  green;</span><br><span class="line"><span class="variable">@color:</span> primary;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.section</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@@color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="comment">//&amp;表示当前选择器的父级,代表所有父选择器（不仅仅是最近的祖先）</span></span><br><span class="line">  <span class="selector-tag">&amp;</span> <span class="selector-class">.test2</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="混入mix-in"><a href="#混入mix-in" class="headerlink" title="混入mix-in"></a>混入mix-in</h3><blockquote>
<p>将一系列属性从一个规则集引入到另一个规则集的方法(处理重复 css 样式)</p>
</blockquote>
<ul>
<li>普通混合</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不带输出的混合</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span>() &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>带参数的混合<br>参数只用逗号分隔，但后来添加了分号以支持将逗号分隔的列表值传递给单个参数。<br>逗号分隔的默认值： <code>.name(@param1: red, blue;1px;)</code>.<br>从 Less 4.0 开始，您可以使用括号转义 <code>[~()]</code> 来包装列表值，例如 <code>.name(@param1: ~(red, blue))</code>。 这类似于引用转义语法：<code>~&quot;quote&quot;</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会编译到css文件中</span></span><br><span class="line"><span class="selector-class">.common</span>(<span class="variable">@w</span>:red,<span class="variable">@h</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@w</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@h</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12</span>;</span><br><span class="line">    <span class="selector-class">.common</span>(red,<span class="number">10px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.test3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16</span>;</span><br><span class="line">    <span class="selector-class">.common</span>(pink,<span class="number">20px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>!important</code> 关键字<br>在 mixin 调用后使用 !important 关键字将其继承的所有属性标记为 !important：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> (<span class="variable">@bg</span>: <span class="number">#f5f5f5</span>; <span class="variable">@color</span>: <span class="number">#900</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="selector-class">.foo</span>() !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译结果</span></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f5f5f5</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#900</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>重载混入<br>定义多个具有相同名称和参数数量的混合是合法的。 Less 将使用所有可以应用的属性。 如果您使用带有一个参数的 mixin，例如 .mixin(green);，然后将使用具有一个强制参数的所有 mixin 的属性：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>, <span class="variable">@margin</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译成</span></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>命名参数<br>mixin 引用可以通过名称而不是位置来提供参数值。 任何参数都可以通过其名称来引用，并且它们不必按任何特殊顺序排列：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>: black; <span class="variable">@margin</span>: <span class="number">10px</span>; <span class="variable">@padding</span>: <span class="number">20px</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@margin</span>: <span class="number">20px</span>; <span class="variable">@color</span>: <span class="number">#33acfe</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#efca44</span>; <span class="variable">@padding</span>: <span class="number">40px</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>@arguments</code><br><code>@arguments</code> 在 mixin 中有特殊含义，它包含调用 mixin 时传递的所有参数。 如果您不想处理单个参数，这很有用：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-shadow</span>(<span class="variable">@x</span>: <span class="number">0</span>, <span class="variable">@y</span>: <span class="number">0</span>, <span class="variable">@blur</span>: <span class="number">1px</span>, <span class="variable">@color</span>: <span class="number">#000</span>) &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">     -moz-<span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.big-block</span> &#123;</span><br><span class="line">  <span class="selector-class">.box-shadow</span>(<span class="number">2px</span>, <span class="number">5px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结果</span></span><br><span class="line"><span class="selector-class">.big-block</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">     -moz-<span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">5px</span> <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>高级参数和 <code>@rest</code> 变量<br>mixin 接受可变数量的参数，你可以使用 <code>...</code>。 在变量名之后使用它会将这些参数分配给变量。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(...) &#123;        <span class="comment">// matches 0-N arguments</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>: <span class="number">1</span>, ...) &#123; <span class="comment">// matches 0-N arguments</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>, <span class="variable">@rest</span>...) &#123;</span><br><span class="line">   <span class="comment">// @rest is bound to arguments after @a</span></span><br><span class="line">   <span class="comment">// @arguments is bound to all arguments</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>模板匹配<br>希望根据传递给它的参数更改混入的行为</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(dark, <span class="variable">@color</span>) &#123;<span class="comment">//它期望 dark 作为第一个参数</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">darken</span>(<span class="variable">@color</span>, <span class="number">10%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(light, <span class="variable">@color</span>) &#123;<span class="comment">//它需要 light</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">lighten</span>(<span class="variable">@color</span>, <span class="number">10%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@_</span>, <span class="variable">@color</span>) &#123;<span class="comment">//它期望任何值。</span></span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="variable">@switch:</span> light;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@switch</span>, <span class="number">#888</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#a2a2a2</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125; ```</span><br></pre></td></tr></table></figure>

<ul>
<li>覆盖混入值<br>如果您有多个匹配的 mixins，所有规则都会被评估和合并，并返回具有该标识符的最后一个匹配值。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// library.less</span></span><br><span class="line"><span class="selector-id">#library</span>() &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>:red;</span><br><span class="line">    prop: foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// customize.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;library&quot;</span>;</span><br><span class="line"><span class="selector-id">#library</span>() &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>:red;</span><br><span class="line">    prop: bar;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  my-value: #library.mixin[prop];<span class="comment">//可以使用属性/变量访问器从已评估的混入规则中选择一个值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  my-value: bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>递归混入</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@counter</span>) <span class="keyword">when</span> (<span class="variable">@counter</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="selector-class">.loop</span>((<span class="variable">@counter</span> - <span class="number">1</span>));    <span class="comment">// next iteration</span></span><br><span class="line">  <span class="attribute">width</span>: (<span class="number">10px</span> * <span class="variable">@counter</span>); <span class="comment">// code for each iteration</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.loop</span>(<span class="number">5</span>); <span class="comment">// launch the loop</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, <span class="variable">@i</span>: <span class="number">1</span>) <span class="keyword">when</span> (<span class="variable">@i</span> =&lt; <span class="variable">@n</span>) &#123;</span><br><span class="line">  <span class="selector-class">.column-</span><span class="variable">@&#123;i&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: (<span class="variable">@i</span> * <span class="number">100%</span> / <span class="variable">@n</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, (<span class="variable">@i</span> + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.column-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>混入守卫</li>
</ul>
<p>守卫中可用的比较运算符的完整列表是： <code>&gt;</code>、<code>&gt;=</code>、<code>=</code>、<code>=&lt;</code>、<code>&lt;</code>。 此外，关键字 <code>true</code> 是唯一的真值</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (<span class="built_in">lightness</span>(<span class="variable">@a</span>) &gt;= <span class="number">50%</span>) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (<span class="built_in">lightness</span>(<span class="variable">@a</span>) &lt; <span class="number">50%</span>) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123; <span class="selector-class">.mixin</span>(<span class="number">#ddd</span>) &#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123; <span class="selector-class">.mixin</span>(<span class="number">#555</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>逻辑运算符<br>使用 <code>and</code> 关键字组合守卫：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (<span class="built_in">isnumber</span>(<span class="variable">@a</span>)) <span class="keyword">and</span> (<span class="variable">@a</span> &gt; <span class="number">0</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>您可以通过用逗号 <code>,</code> 分隔守卫来模拟 <code>or</code> 运算符。 如果任何一个守卫评估为真，它被认为是一场比赛：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span> (<span class="variable">@a</span> &gt; <span class="number">10</span>), (<span class="variable">@a</span> &lt; -<span class="number">10</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>not</code> 关键字否定条件：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@b</span>) <span class="keyword">when</span> <span class="keyword">not</span> (<span class="variable">@b</span> &gt; <span class="number">0</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>类型检查函数<br><code>iscolor</code><br><code>isnumber</code><br><code>isstring</code><br><code>iskeyword</code><br><code>isurl</code></p>
<p>检查一个值除了是一个数字之外是否在一个特定的单位中<br><code>ispixel</code><br><code>ispercentage</code><br><code>isem</code><br><code>isunit</code></p>
<ul>
<li>别名<br>Mixins可以赋值给一个变量来作为变量调用调用，也可以用于map lookup。</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#theme</span><span class="selector-class">.dark</span><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">  <span class="selector-class">.colors</span>(light) &#123;</span><br><span class="line">    primary: purple;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.colors</span>(dark) &#123;</span><br><span class="line">    primary: black;</span><br><span class="line">    secondary: grey;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">  <span class="variable">@colors:</span> #theme.dark.navbar.<span class="built_in">colors</span>(dark);<span class="comment">//分配给变量和不带参数调用的 mixin 调用始终需要括号</span></span><br><span class="line">  <span class="variable">@colors:</span> #theme.dark.navbar.colors;<span class="comment">//错误</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@colors</span>[primary];</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">@colors</span>[secondary];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>Extend 是一个 Less 伪类，它将它所放置的选择器与与其引用的匹配的选择器合并。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两种写法</span></span><br><span class="line"><span class="selector-class">.a</span>:<span class="selector-tag">extend</span>(.b,.c) &#123;&#125;</span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span>:<span class="selector-tag">extend</span>(.b,.c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//继承所有属性</span></span><br><span class="line"><span class="selector-class">.c</span>:<span class="selector-tag">extend</span>(.d all) &#123;</span><br><span class="line">  <span class="comment">// extends all instances of &quot;.d&quot; e.g. &quot;.x.d&quot; or &quot;.d.x&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.c</span>:<span class="selector-tag">extend</span>(.d) &#123;</span><br><span class="line">  <span class="comment">// extends only instances where the selector will be output as just &quot;.d&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>继承附加到选择器</li>
</ul>
<p>附加到选择器的扩展看起来像一个普通的伪类，将选择器作为参数。 一个选择器可以包含多个扩展子句，但所有扩展都必须位于选择器的末尾。</p>
<ul>
<li>在选择器之后扩展： <code>pre:hover:extend(div pre)</code>.</li>
<li>选择器和扩展之间的空间是允许的： <code>pre:hover :extend(div pre)</code>.</li>
<li>允许多个扩展： <code>pre:hover:extend(div pre):extend(.bucket tr)</code> - 注意这与 <code>pre:hover:extend(div pre, .bucket tr)</code> 相同</li>
<li>这是不允许的： <code>pre:hover:extend(div pre).nth-child(odd)</code>. 扩展必须在最后</li>
</ul>
<h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><p>允许将来自多个属性的值聚合到单个属性下的逗号或空格分隔列表中,对于背景和转换等属性很有用。</p>
<ul>
<li>逗号<code>+</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>空格<code>+_</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">scale</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>();</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>) <span class="built_in">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="import-规则"><a href="#import-规则" class="headerlink" title="@import 规则"></a><code>@import</code> 规则</h3><p>在标准 CSS 中，@import at 规则必须在所有其他类型的规则之前。 但是 Less 不关心你把 @import 语句放在哪里。如果它没有扩展名，则会附加 .less 并将其作为导入的 Less 文件包含在内。</p>
<h4 id="导入选项"><a href="#导入选项" class="headerlink" title="导入选项"></a>导入选项</h4><ul>
<li>reference: 导入外部文件，但除非引用，否则不将导入的样式添加到编译输出。</li>
<li>inline: 在输出中包含源文件但不处理它</li>
<li>less: 将文件视为 Less 文件，无论文件扩展名是什么</li>
<li>css: 将文件视为 CSS 文件，无论文件扩展名是什么</li>
<li>once: 只包含文件一次（这是默认行为）,这意味着该文件仅导入一次，该文件的后续导入语句将被忽略。</li>
<li>multiple: 允许导入多个同名文件。 这是与一次相反的行为。</li>
<li>optional: 允许仅在文件存在时导入该文件。 如果没有 optional 关键字，Less 会在导入找不到的文件时抛出 FileError 并停止编译。</li>
</ul>
<h3 id="plugin-规则"><a href="#plugin-规则" class="headerlink" title="@plugin 规则"></a><code>@plugin</code> 规则</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my-plugin.js</span></span><br><span class="line"><span class="attr">install</span>: <span class="keyword">function</span>(<span class="params">less, pluginManager, functions</span>) &#123;</span><br><span class="line">    functions.<span class="title function_">add</span>(<span class="string">&#x27;pi&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">PI</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@plugin</span> <span class="string">&quot;my-plugin&quot;</span>;</span><br><span class="line"><span class="selector-class">.show-me-pi</span> &#123;</span><br><span class="line">  value: pi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译</span></span><br><span class="line"><span class="selector-class">.show-me-pi</span> &#123;</span><br><span class="line">  value: 3.141592653589793;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="react使用less"><a href="#react使用less" class="headerlink" title="react使用less"></a>react使用less</h2><p>在终端中输入<code>npm install less-loader less --save</code><br>我们在项目根目录中找到刚才生成的config文件，找到里面的<code>webpack.config.js</code>这个文件：<br>然后搜索<code>sassRegex</code>就可以找到如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// style files regexes</span></span><br><span class="line"><span class="keyword">const</span> cssRegex = <span class="regexp">/\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> cssModuleRegex = <span class="regexp">/\.module\.css$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassRegex = <span class="regexp">/\.(scss|sass)$/</span>;</span><br><span class="line"><span class="keyword">const</span> sassModuleRegex = <span class="regexp">/\.module\.(scss|sass)$/</span>;</span><br><span class="line"><span class="comment">//增加</span></span><br><span class="line"><span class="keyword">const</span> lessRegex = <span class="regexp">/\.less$/</span>;</span><br><span class="line"><span class="keyword">const</span> lessModuleRegex = <span class="regexp">/\.module\.less$/</span>;</span><br></pre></td></tr></table></figure>

<p>接着再搜索<code>sassRegex</code>，声明了变量肯定要用，添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Opt-in support for less (using .scss or .sass extensions).</span></span><br><span class="line"><span class="comment">// By default we support less Modules with the</span></span><br><span class="line"><span class="comment">// extensions .module.less</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: lessRegex,</span><br><span class="line">  <span class="attr">exclude</span>: lessModuleRegex,</span><br><span class="line">  <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">// Don&#x27;t consider CSS imports dead code even if the</span></span><br><span class="line">  <span class="comment">// containing package claims to have no side effects.</span></span><br><span class="line">  <span class="comment">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class="line">  <span class="comment">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class="line">  <span class="attr">sideEffects</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// Adds support for CSS Modules, but using less</span></span><br><span class="line"><span class="comment">// using the extension .module.less</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: lessModuleRegex,</span><br><span class="line">  <span class="attr">use</span>: <span class="title function_">getStyleLoaders</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">importLoaders</span>: <span class="number">3</span>,</span><br><span class="line">      <span class="attr">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">      <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="attr">getLocalIdent</span>: getCSSModuleLocalIdent,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">  ),</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>另外，导入less还会报错，在根目录的react-app-env.d.ts加入</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;*.module.less&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">classes</span>: &#123; <span class="keyword">readonly</span> [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/09/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/09/20-00-00/" class="post-title-link" itemprop="url">react Native</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-09 20:00:00" itemprop="dateCreated datePublished" datetime="2021-01-09T20:00:00+08:00">2021-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul>
<li>node.js python2(不能python3) jdk android_studio</li>
<li>配置环境变量</li>
</ul>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ul>
<li>使用React Native内建的命令工具进行创建，也可以使用node自带的npx命令来安装<br><code>npx react-native init test_project</code></li>
<li>准备 Android 设备<br>你需要准备一台 Android 设备来运行 React Native Android 应用。这里所指的设备既可以是真机，也可以是模拟器。后面我们所有的文档除非特别说明，并不区分真机或者模拟器。Android 官方提供了名为 Android Virtual Device（简称 AVD）的模拟器。此外还有很多第三方提供的模拟器如Genymotion、BlueStack 等。一般来说官方模拟器免费、功能完整，但性能较差。第三方模拟器性能较好，但可能需要付费，或带有广告。</li>
</ul>
<p>使用 Android 真机<br>你也可以使用 Android 真机来代替模拟器进行开发，只需用 usb 数据线连接到电脑，然后遵照在设备上运行这篇文档的说明操作即可。</p>
<p>使用 Android 模拟器<br>你可以使用 Android Studio 打开项目下的”android”目录，然后可以使用”AVD Manager”来查看可用的虚拟设备,如果你刚刚才安装 Android Studio，那么可能需要先创建一个虚拟设备。点击”Create Virtual Device…”，然后选择所需的设备类型并点击”Next”，然后选择S API Level 31 image.</p>
<ul>
<li>编译并运行 React Native 应用<br>确保你先运行了模拟器或者连接了真机，然后在你的项目目录中运行<code>yarn android</code>或者<code>yarn react-native run-android</code>。此命令会对项目的原生部分进行编译，同时在另外一个命令行中启动Metro服务对 js 代码进行实时打包处理（类似 webpack）。Metro服务也可以使用yarn start命令单独启动。</li>
</ul>
<p>如果配置没有问题，你应该可以看到应用自动安装到设备上并开始运行。注意第一次运行时需要下载大量编译依赖，耗时可能数十分钟。此过程严重依赖稳定的代理软件，否则将频繁遭遇链接超时和断开，导致无法运行。</p>
<p>也可以尝试阿里云提供的maven 镜像，将android/build.gradle中的jcenter()和google()分别替换为maven { url ‘<a target="_blank" rel="noopener" href="https://maven.aliyun.com/repository/jcenter&#39;">https://maven.aliyun.com/repository/jcenter&#39;</a> }和maven { url ‘<a target="_blank" rel="noopener" href="https://maven.aliyun.com/repository/google&#39;">https://maven.aliyun.com/repository/google&#39;</a> }（注意有多处需要替换）。</p>
<h3 id="jsx语法规则"><a href="#jsx语法规则" class="headerlink" title="jsx语法规则"></a>jsx语法规则</h3><ul>
<li>定义虚拟dom，不要写引号</li>
<li>标签中混入js表达式要用｛｝，js表达式会产生一个值(返回值)，可以放在任何需要值的地方，如<code>a</code>、<code>a+b</code>、<code>demo(1)</code>、<code>arr.map()</code>、<code>function test()&#123;&#125;</code>。js语句：<code>if()&#123;&#125;</code>,<code>for()&#123;&#125;</code>,<code>switch()&#123;&#125;</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const a=1;</span><br><span class="line">const Vdom=(</span><br><span class="line">&lt;span id=&#123;a&#125;&gt;&#123;a.toString()&#125;&lt;/span&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>样式的类型指定不要用class，要用className</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const Vdom=(</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>内联样式<br>要用<code>style=&#123;&#123;fontSize:"20px"&#125;&#125;</code>的写法</p>
</li>
<li><p>虚拟dom只有一个根标签</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Vdom=(</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>标签首字符为小写则直接转为html中同名元素，若为大写则去渲染对应组件</li>
</ul>
<h2 id="组件和模块"><a href="#组件和模块" class="headerlink" title="组件和模块"></a>组件和模块</h2><p>模块：提供特定功能的js程序<br>组件：实现局部功能效果的代码和资源集合（html、js、css、img等）</p>
<h3 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Demo()&#123;  //组件必须首字母大写</span><br><span class="line">//this 为undefind,经过babel编译后开启严格模式，this便指向undefind，不开启严格模式则是window</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是函数定义的，便调用该函数，将虚拟dom渲染成真实dom</span><br></pre></td></tr></table></figure>

<h3 id="类式组件"><a href="#类式组件" class="headerlink" title="类式组件"></a>类式组件</h3><h4 id="简单组件"><a href="#简单组件" class="headerlink" title="简单组件"></a>简单组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;//在Demo的原型对象上</span><br><span class="line">//this指向Demo的实例对象</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是类定义的，便new 出该类实例，通过该实例调用原型对象上的render方法。将虚拟dom渲染成真实dom</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="复杂组件"><a href="#复杂组件" class="headerlink" title="复杂组件"></a>复杂组件</h4><h5 id="state"><a href="#state" class="headerlink" title="state"></a>state</h5><blockquote>
<p>state为组件的重要属性，值是对象，通过更新组件的state来更新对应的页面显示（重新渲染组件）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变t</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;test&#125;&gt;test&#123;this.state.a&#125;&lt;/h1&gt; </span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">	//类中的方法默认开启局部严格模式</span><br><span class="line">	//所以this为undefind</span><br><span class="line">	//只有通过Demo实例调用此实例，this才为Demo的实例</span><br><span class="line">	//changeValue作为onClick的回调，不是实例调用</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>解决 this指向</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)//构造器是否接受props，是否传给super取决于是否希望在构造器中通过this访问props</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变this指向</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">//state不能直接更改</span><br><span class="line">this.state.a=1</span><br><span class="line">//必须通过api</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure></li>
<li><p>简写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">state=&#123;//等于号，代表给该类的实例追加属性</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">changValue=()=&gt;&#123;//必须用箭头函数</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="props"><a href="#props" class="headerlink" title="props"></a>props</h5><blockquote>
<p>组件的所有属性都保存在props中，props是只读的，不能修改</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>props规则限制</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//限制类型</span><br><span class="line">Demo.propTypes=&#123;</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">//默认值</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>简写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static propTypes=&#123;	//加上static代表给类本身添加属性</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">static defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>


<ul>
<li>函数式组件使用props</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function Demo(props)&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> Demo.propTypes=&#123;	</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br></pre></td></tr></table></figure>

<h5 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h5><blockquote>
<p>组件内的标签可使用ref属性标识自己类似id=’test’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 ref=&#x27;title1&#x27; &gt;官方不推荐String类型的ref写法，效率不高&lt;/h1&gt; </span><br><span class="line">&lt;h1 ref=&#123;(node)=&gt;&#123;this.title2=node&#125;&#125; &gt;ref的回调写法，内联写法在每次更新时会调用两次，第一次时为了清空旧的ref，所以为null，第二次才为DOM，可用类绑定函数替换&lt;/h1&gt; </span><br><span class="line">&lt;h1 ref=&#123;title3&#125; &gt;使用createRef&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">title3=createRef()//调用后返回一个容器，用于存储ref标识的节点，只能存一个</span><br><span class="line">test=()=&gt;&#123;</span><br><span class="line">console.log(this.refs.title1)</span><br><span class="line">console.log(this.title2)</span><br><span class="line">console.log(this.title3.current)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h5><ol>
<li>通过onXxx属性指定事件处理函数（注意大小写）<ul>
<li>react使用的自定义事件（原生小写-&gt;大写，原生大写-&gt;小写），而不是原生DOM事件</li>
<li>react中的事件是通过事件委托方式处理的（委托给组件最外层的元素,事件冒泡）</li>
</ul>
</li>
<li>可通过event.target得到的发生事件的DOM元素对象</li>
</ol>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><h5 id="旧"><a href="#旧" class="headerlink" title="旧"></a>旧</h5><ul>
<li><p>初始化阶段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">componentWillMount()//组件将要挂载</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure></li>
<li><p>更新数据时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setState()</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure></li>
<li><p>强制更新时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">forceUpdate()//不想更改状态中的数据，更新页面</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure></li>
<li><p>父组件渲染</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(props)//第一次不调用，接受新的props才调用</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>卸载组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure>
<h5 id="新"><a href="#新" class="headerlink" title="新"></a>新</h5><blockquote>
<p>因为新版本的异步渲染，因此componentWillUpdate，componentWillReceive，componentWillMount即将废弃，所以要加上UNSAFE_防止误解和滥用</p>
</blockquote>
</li>
<li><p>初始化阶段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">//UNSAFE_componentWillMount()</span><br><span class="line">static getDerivedStateFromProps(props,state)&#123;//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">//必须返回状态对象，若包含state中的数据，将覆盖它。用于state的值任何时候取决于props</span><br><span class="line">return &#123;a:1&#125;</span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure></li>
<li><p>更新数据时，调用setState()、forceUpdate()或父组件新Props</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">static getDerivedStateFromProps(props,state)//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">static getSnapshotBeforeUpdate(preProps,preState)&#123;//更新前</span><br><span class="line"></span><br><span class="line">return &#x27;xxx&#x27;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate(preProps,preState,snapshotValue)//之前的prop时和状态</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>卸载组件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="react-中的key作用"><a href="#react-中的key作用" class="headerlink" title="react 中的key作用"></a>react 中的key作用</h4><p>key是虚拟Dom对象的标识，当状态中的数据变化时，react会根据新数据形成新的虚拟DOM，<br>随后将新的虚拟DOM与旧的虚拟DOM进行diff比较。<br>若旧虚拟dom中到了与新虚拟dom中相同的key：</p>
<ul>
<li>虚拟dom中内容没有变化，使用之前的真实dom</li>
<li>虚拟dom中内容变化了，则生成新的真实dom，随后替换掉页面中的真实dom</li>
</ul>
<p>若旧虚拟dom未找到与新虚拟dom相同的key，则创建新的真实dom渲染到页面中</p>
<p>用index做key引发的问题</p>
<ol>
<li>若对数据进行逆序添加，逆序删除等破坏顺序操作时，产生没必要的真实dom更新，虽然界面没有问题</li>
<li>若结构中包含输入类的DOM，会产生错误DOM更新，界面会出现异常</li>
<li>若仅用于渲染列表展示，没有逆序添加，逆序删除等破坏顺序操作，则用index做key没有任何问题</li>
</ol>
<h4 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h4><p>安装：<code>npm i create-react-app -g</code></p>
<p>创建文件夹：<code>create-ract app test</code></p>
<p>进入创建的文件夹：<code>npm start</code></p>
<ul>
<li><p>入口文件index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//核心库</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">//渲染</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br><span class="line">import App from &#x27;./App&#x27;</span><br><span class="line">ReactDOM.render(&lt;App/&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure></li>
<li><p>App.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">Class App extends React.Component&#123;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;xx&lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">export default App</span><br></pre></td></tr></table></figure></li>
<li><p>样式模块化</p>
</li>
</ul>
<p>index.module.css</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.title&#123;color:red&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import hello form &#x27;./index.module.css&#x27;</span><br><span class="line"></span><br><span class="line">export default calss Test extends Compont&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div className=&#123;hello.title&#125;&gt;xx&lt;/div&gt;</span><br><span class="line">&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>代理</li>
</ul>
<p>setupProxy.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const proxy=require(&#x27;http-proxy-middleware&#x27;);</span><br><span class="line">module.exports=function (app) &#123;</span><br><span class="line">app.use(</span><br><span class="line">proxy.createProxyMiddleware(&#x27;/apis&#x27;,&#123;</span><br><span class="line">target:&#x27;http://xxx:xxx&#x27;,</span><br><span class="line">changeOrigin:true,//控制服务器收到的响应头中的Host字段值</span><br><span class="line">pathRewrite:&#123;&#x27;^/apis&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">proxy.createProxyMiddleware(&#x27;/api2&#x27;,&#123;</span><br><span class="line">target:&#x27;http://xxx:xxx&#x27;,</span><br><span class="line">changeOrigin:true,//控制服务器收到的响应头中的Host字段值,true时为代理服务ip,false为当前ip，默认为false</span><br><span class="line">pathRewrite:&#123;&#x27;^/api2&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信"><a href="#组件间通信" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li><p>子-&gt;父<br>父给子组件间传入回调函数，子组件调用回调函数把数据传给父组件</p>
</li>
<li><p>消息订阅与发布<br>第三方库pubsub.js</p>
</li>
</ul>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><blockquote>
<p>依赖H5 BOM浏览器对象上的history或hash锚点，监听路由变化，匹配对应的组件<br>BrowserRouter使用的h5的histrory API,不兼容IE9以下版本<br>HashRouter使用的URL的哈希值</p>
</blockquote>
<ul>
<li><p>react-router-dom</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//要统一由一个router管理，可包围在App外侧</span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">&lt;Link to=&#x27;/test&#x27;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/BrowserRouter&gt;</span><br><span class="line"></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=&#x27;/test&#x27;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>路由组件</p>
<blockquote>
<p>接受的props默认有history，location，match</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>一般组件<br>props传什么有什么</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Test/&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>NavLink</p>
<blockquote>
<p>可以通过activeClassName指定样式名,标签体内容是个特殊属性，通过this.props.children获取</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink activeClassName=&quot;active_color&quot;&gt;test</span><br><span class="line">&lt;/NavLink&gt;</span><br><span class="line">&lt;NavLink activeClassName=&quot;active_color&quot; children=&#x27;test&#x27;&gt;</span><br><span class="line">&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Switch</p>
<blockquote>
<p>路由默认会全部匹配完，加上switch可实现单一匹配，提高效率</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">//默认模糊匹配,exact严格匹配，开启后无法匹配二级路由</span><br><span class="line">&lt;Route exact path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Redirect</p>
<blockquote>
<p>重定向，写在路由最下方，当路由都不匹配时，跳转到redirect指定的路由</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Redirect to=&quot;/test&quot; &gt;</span><br></pre></td></tr></table></figure></li>
<li><p>二级路由</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test/a&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Redirect to=&quot;/test&quot; &gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>路由参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//params参数，this.props.match.params</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=`/test/$&#123;123&#125;/$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test/:id/:count&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//search参数(为urlencoded编码字符串，需借助querystring解析)，this.location.match.search</span><br><span class="line">import qs from &#x27;querystring&#x27;</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=`/test?a=$&#123;123&#125;&amp;b=$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">//qs.parse(this.props.location.search)</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//state参数(不在地址栏显示，browser刷新页面不丢失，hashRouter刷新丢失)，this.props.location.state</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=&#123;&#123;pathname:&#x27;/test&#x27;state:&#123;a=123,b=123&#125;&#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">goto()&#123;</span><br><span class="line">this.props.history.push(&#x27;/test&#x27;,&#123;</span><br><span class="line">xx:&#x27;xx&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">this.props.history.replace(&#x27;/test&#x27;,&#123;</span><br><span class="line">xx:&#x27;xx&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>withRouter<blockquote>
<p>加工一般组件，让一般组件用上路由api</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123;withRouter&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">class Test extends Component &#123;&#125;</span><br><span class="line"></span><br><span class="line">export default withRouter(Test)//返回的是全新的组件</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="React-Router-6"><a href="#React-Router-6" class="headerlink" title="React Router 6"></a>React Router 6</h4><blockquote>
<p>移除<Switch/> ，新增<Routers/><br>移除<Redirect/> ，新增<Navigate/><br>component={About}变为element={<About/>}<br>增加hooks</p>
</blockquote>
<ul>
<li><p>Routers</p>
<blockquote>
<p>必须用Routers包裹，不会匹配多个</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Routers,Route&#125; form &#x27;react-router-dom&#x27;</span><br><span class="line">&lt;Routers&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; element=&#123;&lt;Test/&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/TEST&quot; caseSensitive element=&#123;&lt;Test2/&gt;&#125;&gt;//区分大小写</span><br><span class="line">&lt;/Routers&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Navigate</p>
<blockquote>
<p>重定向,只要被渲染，就会切换路由</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Routers,Route,Navigate&#125; form &#x27;react-router-dom&#x27;</span><br><span class="line">&lt;Routers&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; element=&#123;&lt;Test/&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot;  /&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot; replace /&gt;&#125;&gt;</span><br><span class="line">&lt;/Routers&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>NavLink</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NaviLink className=&#123;()=&gt;return &#x27;activeColor&#x27;&#125;&gt;&lt;/NaviLink&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>路由表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#123;lazy&#125; from &#x27;react&#x27;</span><br><span class="line">import &#123;useRoutes,Navigate&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">//生成路由</span><br><span class="line">cosnt About=lazy(()=&gt;import(&#x27;../pages/About&#x27;))</span><br><span class="line">const element=useRoutes([</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/test&#x27;,</span><br><span class="line">element:&lt;Test/&gt;</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;new&#x27;,</span><br><span class="line">element:&lt;New/&gt;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;, </span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/about&#x27;,</span><br><span class="line">element:&lt;About/&gt;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        path:&#x27;/&#x27;,</span><br><span class="line">        //实现路由重定向</span><br><span class="line">        element:&lt;Navigate to=&#x27;/main&#x27;/&gt;</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;/*引用路由表*/&#125;</span><br><span class="line">&#123;element&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 若要显示子路由，需在父级路由组件中引入Outlet！！！</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;NavLink end to=&quot;new&quot;&gt;&lt;/NavLink&gt;//end代表匹配子路由时，自己失去高亮</span><br><span class="line">&#123;/*指定路由组件呈现的位置*/&#125;</span><br><span class="line">&lt;Outlet /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>路由参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//params参数，this.props.match.params</span><br><span class="line">&lt;Link to=`/test/$&#123;123&#125;/$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">import &#123;useParams,useMath&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const &#123;a,b&#125;=userParams()</span><br><span class="line">const &#123;a,b&#125;=userParams(/test/:a/:b&#125;)</span><br><span class="line">return (&#123;a+b&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=`/test?a=$&#123;123&#125;&amp;b=$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">import &#123;useSearchParams,useLocation&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const [search,setSearch]=userSearchParams()</span><br><span class="line">const a=search.get(&#x27;a&#x27;)</span><br><span class="line">let setData=()=&gt;&#123;setSearch(1234)&#125;//更新a</span><br><span class="line">const a1=useLocation()</span><br><span class="line">return (&#123;a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=&#x27;/test&#x27; state=&#123;&#123;a=123,b=123&#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line">import &#123;useLocation&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const obj=useLocation()</span><br><span class="line">return (&#123;obj.a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123;useNavigate&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">const navigate=userNavigate()</span><br><span class="line">goto()&#123;</span><br><span class="line">navigate(&#x27;/test&#x27;,&#123;</span><br><span class="line">replace:false,</span><br><span class="line">state:&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line">navigate(1)//前进</span><br><span class="line">navigate(-1)//后退</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h4><blockquote>
<p>状态管理js库，集中式管理react应用中多个组件共享的状态</p>
</blockquote>
<h5 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h5><ul>
<li><p>store.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer from &#x27;./countReducer&#x27;</span><br><span class="line">const store=createStore(countReducer)</span><br><span class="line">export default store</span><br></pre></td></tr></table></figure></li>
<li><p>countReducer.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的reducer，reducer本质是一个函数</span><br><span class="line">第一次调用时是store自动触发的，传递的preState是undefin</span><br><span class="line">export default function (preState,action)&#123;</span><br><span class="line">const &#123;type,data&#125;=action</span><br><span class="line">return preState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>test.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;../store/store.js&#x27;</span><br><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line">store.subscribe(()=&gt;&#123;</span><br><span class="line">this.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">increment()&#123;</span><br><span class="line">store.dispatch(&#123;type:&#x27;xx&quot;,data:123&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="完整"><a href="#完整" class="headerlink" title="完整"></a>完整</h5></li>
<li>countAction.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的action，</span><br><span class="line">export  function test(data)&#123;</span><br><span class="line">return &#123;type:&#x27;xxxx&#x27;,data&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>countReducer.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的reducer，reducer本质是一个函数</span><br><span class="line">//第一次调用时是store自动触发的，传递的preState是undefin</span><br><span class="line">//必须是纯函数（同样输入必定得到同样输出）不要在reducer中发起网络请求、改写prestate、使用Date.now() , Math.random()</span><br><span class="line">export default function (preState,action)&#123;</span><br><span class="line">const &#123;type,data&#125;=action</span><br><span class="line">switch(type)&#123;</span><br><span class="line">case 0:</span><br><span class="line">return preState//当preState没有变化时，不会引起页面刷新（浅比较）</span><br><span class="line">case 1:</span><br><span class="line">return preState+1</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>constants.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const ADD=&#x27;add&#x27;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>test.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;../store/store.js&#x27;</span><br><span class="line">import &#123;test&#125; from &#x27;../store/countAction.js&#x27;</span><br><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line">store.subscribe(()=&gt;&#123;</span><br><span class="line">this.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">increment()&#123;</span><br><span class="line">store.dispatch(test(123))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="异步action"><a href="#异步action" class="headerlink" title="异步action"></a>异步action</h5><blockquote>
<p>异步action指action返回值为函数，同步action指action返回值为对象</p>
</blockquote>
<ul>
<li>store.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore,applyMiddleware&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer from &#x27;./countReducer&#x27;</span><br><span class="line">//引入异步action中间件</span><br><span class="line">//yarn add redux-thunk</span><br><span class="line">import thunk  from &#x27;redux-thunk&#x27;</span><br><span class="line">const store=createStore(countReducer,applyMiddleware(thunk))</span><br><span class="line">export default store</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>action.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">export const add=data=(&#123;type:&#x27;add&#x27;,data&#125;)//同步action</span><br><span class="line">export const addAsync=(data,a,b,c)=&gt;&#123;</span><br><span class="line">return (dispatch)=&gt;&#123;</span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">dispatch(add(data)&#125;)</span><br><span class="line">&#125;,50000)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h5><blockquote>
<p>UI组件应该包裹一个容器组件，它们为父子关系<br>UI组件不能使用任何redux api，容器组件可以<br>容器给UI组件通过props传递状态、操作方法<br>不用在写store.subscribe()</p>
</blockquote>
<ul>
<li>容器组件<br>/containers/test/index.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//yran add react-redux</span><br><span class="line">import testUI from &#x27;../../components/test.jsx&#x27;</span><br><span class="line">//引入connect用于连接UI组件与redux</span><br><span class="line">import &#123;connect&#125; from &#x27;react-redux&#x27;</span><br><span class="line"></span><br><span class="line">let mapStateToProps=(state)=&gt;&#123;</span><br><span class="line">//通过props传给UI组件状态</span><br><span class="line">return &#123;</span><br><span class="line">a:1,b:state</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line">let mapDisoatchToProps=(dispatch)=&gt;&#123;</span><br><span class="line">//通过props传给UI操作方法</span><br><span class="line">return &#123;</span><br><span class="line">d:(data)=&gt;&#123;</span><br><span class="line">dispatch(&#123;type:&#x27;xxx&#x27;,data&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">c:()=&gt;&#123;&#125;</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const testContainer=connect(mapStateToProps,mapDisoatchToProps)(testUI)</span><br><span class="line"></span><br><span class="line">export default testContainer</span><br></pre></td></tr></table></figure></li>
</ul>
<p>App.jsx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import store form &#x27;../../redux/store.js&#x27;</span><br><span class="line">import Test from &#x27;../../containers/test&#x27;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;Test store=&#123;store&#125;/&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>简写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createIncreamentAction&#125; from &#x27;../store/action.js&#x27;</span><br><span class="line">const testContainer=connect(</span><br><span class="line">state=&gt;&#123;a:state&#125;,</span><br><span class="line">&#123;</span><br><span class="line">add:createIncreamentAction</span><br><span class="line">&#125;</span><br><span class="line">)(testUI)</span><br></pre></td></tr></table></figure>

<h5 id="provide"><a href="#provide" class="headerlink" title="provide"></a>provide</h5><p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">import &#123;Provider&#125; from &#x27;react-redux&#x27;</span><br><span class="line">//自动匹配容器组件，添加上store</span><br><span class="line">ReactDOM.render(&lt;ProVider store=&#123;store&#125;&gt;&lt;App/&gt;&lt;/ProVider&gt;,document)</span><br></pre></td></tr></table></figure>

<h5 id="整合容器和UI组件"><a href="#整合容器和UI组件" class="headerlink" title="整合容器和UI组件"></a>整合容器和UI组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createIncreamentAction&#125; from &#x27;../store/action.js&#x27;</span><br><span class="line"></span><br><span class="line">class Test extend Componet&#123;&#125;</span><br><span class="line">export default connect(</span><br><span class="line">state=&gt;&#123;a:state&#125;,</span><br><span class="line">&#123;</span><br><span class="line">add:createIncreamentAction</span><br><span class="line">&#125;</span><br><span class="line">)(Test)</span><br></pre></td></tr></table></figure>

<h5 id="多个reducer"><a href="#多个reducer" class="headerlink" title="多个reducer"></a>多个reducer</h5><ul>
<li>store.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore，applyMiddleware,combineReducers&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer1 from &#x27;./reducer/count1&#x27;</span><br><span class="line">import countReducer2 from &#x27;./reducer/count2&#x27;</span><br><span class="line">let allReducer=combineReducers(&#123;</span><br><span class="line">count1:countReducer1</span><br><span class="line">count2:countReducer2</span><br><span class="line">&#125;)</span><br><span class="line">export default createStore(allReducer)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let obj=&#123;a:&#123;b:1&#125;&#125;</span><br><span class="line">const &#123;a&#125;=obj;</span><br><span class="line">const &#123;a:&#123;b&#125;&#125;=obj;//连续解构赋值</span><br><span class="line">const &#123;a:&#123;b:value&#125;&#125;=obj;//连续解构赋值+重命名 </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h5><ul>
<li>若a函数，接收的参数是一个函数，那么a就可以称为高阶函数</li>
<li>若a函数，调用的返回值依然是一个函数，那么a就可以称为高阶函数<br>如promise setTimeOut arr.map()</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line">return (e)=&gt;&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;input onChange=&quot;&#123;test(&#x27;1&#x27;)&#125;&quot;/&gt;</span><br><span class="line">&lt;input onChange=&quot;&#123;test(&#x27;2&#x27;)&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="函数的柯里化"><a href="#函数的柯里化" class="headerlink" title="函数的柯里化"></a>函数的柯里化</h5><p>通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line">return (e)=&gt;&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function sum(a,b,c)&#123;return a+b+c&#125;</span><br><span class="line"></span><br><span class="line">function sum2(a)&#123;</span><br><span class="line">return (b)=&gt;&#123;</span><br><span class="line">return (c)=&gt;&#123;</span><br><span class="line">return a+b+c</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sum(1)(2)(3)</span><br></pre></td></tr></table></figure>

<h4 id="前端发请求"><a href="#前端发请求" class="headerlink" title="前端发请求"></a>前端发请求</h4><h5 id="xhr"><a href="#xhr" class="headerlink" title="xhr"></a>xhr</h5><ul>
<li>jquery</li>
<li>axios（node使用axios是封装http协议）<h5 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h5><blockquote>
<p>原生函数,老版本兼容性差</p>
</blockquote>
</li>
</ul>
<p>fetch(‘xxx’).then(res=&gt;{<br>//联系服务器成功<br>return res.json()<br>},err=&gt;{return new Promis(()=&gt;{})}).then(res=&gt;{},err=&gt;{})</p>
<h5 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h5><p>写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;a:1&#125;</span><br><span class="line"></span><br><span class="line">对象式setState</span><br><span class="line">this.setState(&#123;a:2&#125;)</span><br><span class="line">this.setState(&#123;a:2&#125;,()=&gt;&#123;</span><br><span class="line">//状态更新以及页面也更新后，才调用</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">函数式setState</span><br><span class="line">this.setState((state,props)=&gt;&#123;</span><br><span class="line">return &#123;a:1&#125;&#125;,()=&gt;&#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h4><blockquote>
<p>路由组件懒加载</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123;lazy,COmponent,Suspense&#125; form &#x27;react&#x27;</span><br><span class="line">const Home=lazy(()=&gt;&#123;import (&#x27;./Home&#x27;)&#125;)</span><br><span class="line">export default class Demo extend Component&#123;</span><br><span class="line"></span><br><span class="line">&lt;Suspense fallback=&#123;&lt;Loading/&gt;&#125;&gt;</span><br><span class="line">&lt;Route  path=&quot;/home&quot; component=&#123;Home&#125;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/Route&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><blockquote>
<p>hook是16.8的新特性，可以让你在函数组件中使用state以及其他react特性</p>
</blockquote>
<h5 id="state-1"><a href="#state-1" class="headerlink" title="state"></a>state</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const [a,set]=React.useState(123) //初始化会调用一次，下次调用时，会缓存数据，不会覆盖</span><br><span class="line">let add1=()=&gt;&#123;set(456)&#125;</span><br><span class="line">let add2=()=&gt;&#123;set((a)=&gt;&#123;return a+1&#125;)&#125;</span><br><span class="line">return (&lt;div&gt;a&lt;/div&gt;)&#125;</span><br></pre></td></tr></table></figure>

<h5 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h5><blockquote>
<p>函数组件里使用生命周期</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const [count,setCount]=React.useState(123) </span><br><span class="line"></span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;,[a])//检测a,改变时调用------</span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;,[])//谁也不监测,只调用一次---- componentDidMount</span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;)//检测所有,改变时调用----componentDidUpdate</span><br><span class="line">React.userEffect(()=&gt;&#123;return ()=&gt;&#123;组件卸载前执行&#125;&#125;,[])//componentWillUnmount</span><br><span class="line"></span><br><span class="line">return (&lt;div&gt;a&lt;/div&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const myRef=React.useRef() </span><br><span class="line">function show()&#123;myRef.style.color=&#x27;red&#x27;&#125;</span><br><span class="line">return (&lt;div ref=&#123;myRef&#125;&gt;a&lt;/div&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><blockquote>
<p>可以不用必须有一个真实DOM根标签，编译后会移除</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line"></span><br><span class="line">return (</span><br><span class="line">&lt;Fragment key=&#123;&#125;&gt;//只能有一个属性：key</span><br><span class="line">&lt;&gt;//简写，但不能写任何属性</span><br><span class="line">&lt;/&gt;</span><br><span class="line">&lt;/Fragment&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><blockquote>
<p>常用与祖组件和后代组件通信<br>一般不用Context,而是它的封装react-redux</p>
</blockquote>
<p>类式组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const CountContext=React.createContext()//创建一个上下文,必须所有组件都访问得到</span><br><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;CountContext.Provider value=&#123;this.state.a&#125;&gt;&lt;B/&gt;&lt;/CountContext.Provider&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;C/&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class C extends Component&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (this.context)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>所有组件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const CountContext=React.createContext()//创建一个上下文,必须所有组件都访问得到</span><br><span class="line">const &#123;Consumer,Provider&#125;=CountContext</span><br><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;Provider value=&#123;this.state.a&#125;&gt;&lt;B/&gt;&lt;/Provider&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;C/&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">function C()&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;&lt;Consumer&gt;&#123;value=&gt;&#123;return (&lt;span&gt;value&lt;/span&gt;)&#125;&lt;/Consumer&gt;&lt;/div&gt;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h4><blockquote>
<p>只要执行setState即使不更新数据，组件也会重新render9)<br>只要render()调用，其子组件也会更新<br>原因：shouldComponentUpdate()默认总是为true</p>
</blockquote>
<h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><ul>
<li>手动比较新旧值,不一样更新，否则禁止更新<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps,nextState)&#123;//新的</span><br><span class="line">console.log(this.props,this.state)//旧的</span><br><span class="line">return true</span><br><span class="line">return false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123;PureComponent&#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class Test extends PureComponent &#123;</span><br><span class="line">//依赖的数据不更新时，不重新render</span><br><span class="line"></span><br><span class="line">const obj=this.state</span><br><span class="line">obj.name=&#x27;xx&#x27;</span><br><span class="line">this.setState(obj)//浅比较，数据不会更新</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="render-Props"><a href="#render-Props" class="headerlink" title="render Props"></a>render Props</h4><blockquote>
<p>vue中的插槽</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;B&gt;aaa&lt;/B&gt;</span><br><span class="line"> &lt;B render=&#123;(val)=&gt;&#123;&lt;C b=&#123;val&#125; /&gt;&#125;/&gt;</span><br><span class="line">)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">state=&#123;b:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;span&gt;&#123;this.props.children&#125;&lt;/span&gt;</span><br><span class="line">this.props.render(this.state.b)</span><br><span class="line">)&#125;//aaa</span><br><span class="line">&#125;</span><br><span class="line">function C()&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;&lt;Consumer&gt;&#123;value=&gt;&#123;return (&lt;span&gt;value&lt;/span&gt;)&#125;&lt;/Consumer&gt;&lt;/div&gt;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="ErrorBoundary错误边界"><a href="#ErrorBoundary错误边界" class="headerlink" title="ErrorBoundary错误边界"></a>ErrorBoundary错误边界</h4><blockquote>
<p>防止子组件出错导致整个页面出错,只能在生产环境使用<br>只能捕获后代组件生命周期产生的错误，不能捕获自己的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;error:&#x27;&#x27;&#125;</span><br><span class="line">//生命周期函数</span><br><span class="line">static getDerivedStateFromError(err)&#123;//它的子组件出现报错时会调用</span><br><span class="line">componentDidCath(err,info)&#123;&#125;//发生错误时调用</span><br><span class="line">return &#123;error:err&#125;//返回新的state，在render前触发</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;error?error:&#x27;&#x27;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信-1"><a href="#组件间通信-1" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li>props<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">children props</span><br><span class="line">render props</span><br></pre></td></tr></table></figure></li>
<li>消息订阅-发布<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubs-sub event</span><br></pre></td></tr></table></figure></li>
<li>集中式管理<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redux、dva</span><br></pre></td></tr></table></figure></li>
<li>conText<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">生产者-消费者模式</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">- 搭配</span><br><span class="line">父子：props</span><br><span class="line">兄弟: 集中式管理、消息订阅发布</span><br><span class="line">祖孙: 集中式管理、消息订阅发布、context（开发用的少，封装插件用得多）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 关闭eslint</span><br><span class="line">第一步：执行以下命令：</span><br><span class="line">`npm run eject`</span><br><span class="line">第二步：在package.json 中修改代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>
“eslintConfig”: {<br>  “extends”: [<pre><code>&quot;react-app&quot;,
&quot;react-app/jest&quot;
</code></pre>
  ],<br>  “rules”:{<pre><code>&quot;no-undef&quot;:&quot;off&quot;, 
</code></pre>
  “no-restricted-globals”: “off”,<pre><code>&quot;no-unused-vars&quot;: &quot;off&quot;
</code></pre>
  }<br>},<br>```<br>第三步：重启项目</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2021/01/01/10-12-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/01/10-12-33/" class="post-title-link" itemprop="url">DOM/BOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-01 10:12:33" itemprop="dateCreated datePublished" datetime="2021-01-01T10:12:33+08:00">2021-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="DOM（文档对象模型document-object-model）"><a href="#DOM（文档对象模型document-object-model）" class="headerlink" title="DOM（文档对象模型document object model）"></a>DOM（文档对象模型document object model）</h2><blockquote>
<p>用来提供一套操作网页内容的功能<br>HTML DOM 方法是您能够（在 HTML 元素上）执行的动作。<br>HTML DOM 属性是您能够设置或改变的 HTML 元素的值。<br>dom树：以树状结构，体现标签与标签之间的关系</p>
</blockquote>
<ul>
<li><p>通过这个对象模型，JavaScript 获得创建动态 HTML 的所有力量：</p>
<ul>
<li>JavaScript 能改变页面中的所有 HTML 元素</li>
<li>JavaScript 能改变页面中的所有 HTML 属性</li>
<li>JavaScript 能改变页面中的所有 CSS 样式</li>
<li>JavaScript 能删除已有的 HTML 元素和属性</li>
<li>JavaScript 能添加新的 HTML 元素和属性</li>
<li>JavaScript 能对页面中所有已有的 HTML 事件作出反应</li>
<li>JavaScript 能在页面中创建新的 HTML 事件</li>
</ul>
</li>
<li><p>节点类型:</p>
<ul>
<li>元素节点：<code>&lt;div&gt;&lt;/div&gt;</code></li>
<li>属性节点：id=“div1”</li>
<li>文本节点： 文本</li>
</ul>
</li>
</ul>
<h3 id="结点的获取"><a href="#结点的获取" class="headerlink" title="结点的获取"></a>结点的获取</h3><ul>
<li><p>document.getElementById(id);</p>
</li>
<li><p>node.getElementsByTagName(标签名);<br>通过标签名获取符合条件的元素节点，返回：伪数组</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取ol下的li节点</span></span><br><span class="line">bar oOl=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ol1&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> lis=oOl.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="comment">//返回的是数组</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>node.getElementsByClassName(class名);<br>通过class名字获取符合条件的元素节点；(IE8以下不兼容）</p>
</li>
<li><p>document.getElementByName(name属性的值);<br>通过name属性的值获取符合条件的元素节点，一般用于表单元素,因为其他元素使用name属性没用</p>
</li>
<li><p>document.querySelector(CSS选择器格式字符串);<br>返回一个元素节点，找到符合条件的第一个元素节点</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//id=ol1</span></span><br><span class="line"><span class="keyword">var</span> node=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ol1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//tagName=&#x27;li&#x27;</span></span><br><span class="line"><span class="keyword">var</span> node=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//class=box</span></span><br><span class="line"><span class="keyword">var</span> node =<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.box&quot;</span>);</span><br><span class="line">node.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>document.querySelectorAll(CSS选择器格式字符串);<br>返回一个数组</li>
</ul>
<h4 id="js获取子节点的方式"><a href="#js获取子节点的方式" class="headerlink" title="js获取子节点的方式"></a>js获取子节点的方式</h4><ol>
<li>通过获取dom方式直接获取子节点<br>其中test的父标签id的值，div为标签的名字。getElementsByTagName是一个方法。返回的是一个数组。在访问的时候要按数组的形式访问。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;div&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过<code>childNodes</code>获取子节点</li>
</ol>
<p>使用childNodes获取子节点的时候，childNodes返回的是子节点的集合，是一个数组的格式。他会把文本，换行和空格也当成是节点信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b =<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">childNodes</span>;</span><br></pre></td></tr></table></figure>

<p>为了不显示不必须的换行的空格，我们如果要使用childNodes就必须进行必要的过滤。通过正则表达式式取掉不必要的信息。下面是过滤掉</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//去掉换行的空格</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;b.<span class="property">length</span>;i++)&#123;</span><br><span class="line">  <span class="keyword">if</span>(b[i].<span class="property">nodeName</span> == <span class="string">&quot;#text&quot;</span> &amp;&amp; !<span class="regexp">/\s/</span>.<span class="title function_">test</span>(b.<span class="property">nodeValue</span>))&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="title function_">removeChild</span>(b[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印测试</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;b.<span class="property">length</span>;i++)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i+<span class="string">&quot;---------&quot;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(b[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//补充 document.getElementById(&quot;test&quot;).childElementCount; 可以直接获取长度 同length</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>通过<code>children</code>来获取子节点</li>
</ol>
<p>利用children来获取子元素是最方便的，他也会返回出一个数组。对其获取子元素的访问只需按数组的访问形式即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">children</span>[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>获取第一个子节点</li>
</ol>
<p>firstChild来获取第一个子元素，但是在有些情况下我们打印的时候会显示undefined，这是什么情况呢？？其实firstChild和childNodes是一样的，在浏览器解析的时候会把他当换行和空格一起解析，其实你获取的是第一个子节点，只是这个子节点是一个换行或者是一个空格而已。那么不要忘记和childNodes一样处理呀。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">firstChild</span>;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>firstElementChild获取第一个子节点</li>
</ol>
<p>使用firstElementChild来获取第一个子元素的时候，这就没有firstChild的那种情况了。会获取到父元素第一个子元素的节点 这样就能直接显示出来文本信息了。他并不会匹配换行和空格信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFirstChild = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">firstElementChild</span>;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>获取最后一个子节点</li>
</ol>
<p>lastChild获取最后一个子节点的方式其实和firstChild是类似的。同样的lastElementChild和firstElementChild也是一样的。不再赘余。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getLastChildA = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">lastChild</span>;</span><br><span class="line"><span class="keyword">var</span> getLastChildB = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">lastElementChild</span>;</span><br></pre></td></tr></table></figure>

<p>一个包解决你所有的JS问题,点击获取</p>
<h4 id="js获取父节点的方式"><a href="#js获取父节点的方式" class="headerlink" title="js获取父节点的方式"></a>js获取父节点的方式</h4><ol>
<li><code>parentNode</code>获取父节点</li>
</ol>
<p>获取的是当前元素的直接父元素。parentNode是w3c的标准。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">parentNode</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>parentElement</code>获取父节点</li>
</ol>
<p>parentElement和parentNode一样，只是parentElement是ie的标准。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">parentElement</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>offsetParent获取所有父节点</li>
</ol>
<p>一看offset我们就知道是偏移量 其实这个是于位置有关的上下级 ，直接能够获取到所有父亲节点， 这个对应的值是body下的所有节点信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">offsetParent</span>;</span><br></pre></td></tr></table></figure>

<h4 id="js获取兄弟节点的方式"><a href="#js获取兄弟节点的方式" class="headerlink" title="js获取兄弟节点的方式"></a>js获取兄弟节点的方式</h4><ol>
<li><p>通过获取父亲节点再获取子节点来获取兄弟节点</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).   parentNode.<span class="property">children</span>[<span class="number">1</span>];</span><br></pre></td></tr></table></figure></li>
<li><p>获取上一个兄弟节点</p>
</li>
</ol>
<p>在获取前一个兄弟节点的时候可以使用<code>previousSibling</code>和<code>previousElementSibling</code>。他们的区别是<code>previousSibling</code>会匹配字符，包括换行和空格，而不是节点。<code>previousElementSibling</code>则直接匹配节点。</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>). previousElementSibling;</span><br><span class="line"><span class="keyword">var</span> brother3 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>). previousSibling;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>获取下一个兄弟节点</li>
</ol>
<p>同<code>previousSibling</code>和<code>previousElementSibling</code>，<code>nextSibling</code>和<code>nextElementSibling</code>也是类似的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> brother4 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">nextElementSibling</span>;</span><br><span class="line"><span class="keyword">var</span> brother5 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="property">nextSibling</span>;</span><br></pre></td></tr></table></figure>

<h3 id="获取样式"><a href="#获取样式" class="headerlink" title="获取样式"></a>获取样式</h3><ul>
<li>node.currentStyle[‘height’]; //IE兼容</li>
<li>getComputedStyle<a href="'height'">node</a>; //火狐、谷歌</li>
</ul>
<p>获取的是当前有效的样式</p>
<ul>
<li>node.getAttribute(“class”);</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增加属性,支持自定义</span></span><br><span class="line">node.<span class="title function_">setAttribute</span>(<span class="string">&quot;class&quot;</span>,<span class="string">&quot;box&quot;</span>);</span><br><span class="line">node.<span class="title function_">setAttribute</span>(<span class="string">&quot;jjj&quot;</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"><span class="comment">//自定义属性data-</span></span><br><span class="line">node.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-jjj&quot;</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-a-b&quot;</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-tB&quot;</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">node.<span class="property">dataset</span>.<span class="property">jjj</span></span><br><span class="line">node.<span class="property">dataset</span>.<span class="property">aB</span></span><br><span class="line">node.<span class="property">dataset</span>.<span class="property">tb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除属性</span></span><br><span class="line">node.<span class="title function_">removeAttribute</span>(<span class="string">&quot;class&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改样式"><a href="#修改样式" class="headerlink" title="修改样式"></a>修改样式</h3><ul>
<li>通过style属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.<span class="property">style</span>.<span class="property">background</span>=<span class="string">&#x27;red&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过className属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.<span class="property">className</span>=<span class="string">&#x27;test&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过classList属性修改</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不会覆盖原有类名</span></span><br><span class="line">el.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;类名&#x27;</span>)</span><br><span class="line">el.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;类名&#x27;</span>)</span><br><span class="line">el.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;类名&#x27;</span>)<span class="comment">//有则移除，没有则添加</span></span><br></pre></td></tr></table></figure>

<h3 id="获取内容"><a href="#获取内容" class="headerlink" title="获取内容"></a>获取内容</h3><ul>
<li>innerHTML<br>获取标签内容，写入时会解析标签</li>
<li>innerText<br>获取标签间纯文本，不会解析标签</li>
<li>outerHTML<br>会替换整个标签</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> odiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(odiv.<span class="property">innerHTML</span>);</span><br><span class="line">odiv.<span class="property">innerHTML</span>=<span class="string">&quot;&lt;h1&gt;jjjjjjjj&lt;/h1&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(odiv.<span class="property">innerText</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(odiv.<span class="property">outerHTML</span>);</span><br></pre></td></tr></table></figure>

<h3 id="获取子节点"><a href="#获取子节点" class="headerlink" title="获取子节点"></a>获取子节点</h3><ul>
<li><p>childNode<br>访问当前节点下所有的子节点</p>
</li>
<li><p>firstChild<br>访问子节点中的首位</p>
</li>
<li><p>lastChild<br>访问子节点中的最后一位</p>
</li>
<li><p>nextSibling 访问当前节点兄弟节点中的下一个节点</p>
</li>
<li><p>previousSibling 访问当前节点兄弟节点中的上一个节点</p>
</li>
</ul>
<blockquote>
<p>上面这些属性都包含文本节点</p>
</blockquote>
<ul>
<li>children</li>
<li>firstElementChild</li>
<li>lastElementChild</li>
<li>nextElementSibling</li>
<li>previousElementSibling</li>
</ul>
<blockquote>
<p>上面这些属性只获取子节点中的元素节点，不包含文本。</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>nodeType</th>
<th>nodeName</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody><tr>
<td>元素节点</td>
<td>1</td>
<td>标签名</td>
<td>null</td>
</tr>
<tr>
<td>属性节点</td>
<td>2</td>
<td>属性名</td>
<td>属性值</td>
</tr>
<tr>
<td>文本节点</td>
<td>3</td>
<td>#text</td>
<td>文本内容</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oDiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">childNodes</span>.<span class="property">length</span>); <span class="comment">//返回数组，里面为全部子元素，包括换行，缩进</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">childNodes</span>[<span class="number">0</span>].<span class="property">nodeName</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> &gt;</span> <span class="tag">&lt;<span class="name">em</span>&gt;</span> text<span class="tag">&lt;/<span class="name">em</span>&gt;</span> divtext <span class="tag">&lt;<span class="name">strong</span>&gt;</span>text<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取当前元素节点上的所有的属性节点"><a href="#获取当前元素节点上的所有的属性节点" class="headerlink" title="获取当前元素节点上的所有的属性节点"></a>获取当前元素节点上的所有的属性节点</h3><ul>
<li>attrbutes</li>
</ul>
<p>获取当前元素节点上的所有的属性节点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oDiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>);</span><br></pre></td></tr></table></figure>

<p>返回的是集合：</p>
<ol>
<li>无序</li>
<li>不重复</li>
</ol>
<h3 id="获取其中的某一个属性节点"><a href="#获取其中的某一个属性节点" class="headerlink" title="获取其中的某一个属性节点"></a>获取其中的某一个属性节点</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//div中title=&quot;hello&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>.<span class="title function_">getNamedItem</span>(<span class="string">&quot;title&quot;</span>).<span class="property">nodeName</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>.<span class="title function_">getNamedItem</span>(<span class="string">&quot;title&quot;</span>).<span class="property">nodeType</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>.<span class="title function_">getNamedItem</span>(<span class="string">&quot;title&quot;</span>).<span class="property">nodeValue</span>);</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>[<span class="string">&quot;title&quot;</span>].<span class="property">nodeName</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(oDiv.<span class="property">attributes</span>[<span class="string">&quot;title&quot;</span>].<span class="property">nodeType</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h3><blockquote>
<p>document.write()会覆盖页面上的所有内容</p>
</blockquote>
<ul>
<li>createElement()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">createElement</span>();</span><br><span class="line">参数：标签名</span><br><span class="line">返回值：创建好的节点</span><br></pre></td></tr></table></figure>

<ul>
<li>appendChild(插入元素)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node1.<span class="title function_">appendChild</span>(node2);</span><br><span class="line">将node2节点插入到node1节点的子节点的末尾</span><br></pre></td></tr></table></figure>

<ul>
<li>createTextNode()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(文本);</span><br><span class="line">创建文本节点（纯文本）</span><br></pre></td></tr></table></figure>

<ul>
<li>insertBefore(插入元素，在哪个元素前)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.<span class="title function_">insertBefore</span>(box2,box1);</span><br><span class="line">将box2添加到box1前面</span><br></pre></td></tr></table></figure>

<ul>
<li>replaceChild()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.<span class="title function_">replaceChild</span>(box2,box1);</span><br><span class="line">用box2替换掉box1</span><br></pre></td></tr></table></figure>

<ul>
<li>cloneNode(是否克隆后代节点)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node.<span class="title function_">cloneNode</span>(); <span class="comment">//克隆自己</span></span><br><span class="line">node.<span class="title function_">cloneNode</span>(<span class="literal">true</span>); <span class="comment">//克隆自己和本身下的所有子节点</span></span><br><span class="line"><span class="comment">//返回克隆的新节点</span></span><br></pre></td></tr></table></figure>

<ul>
<li>removeChild(删除的元素)</li>
</ul>
<blockquote>
<p>删除元素必须通过父元素删除</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">box1的父节点.<span class="title class_">Child</span>(box1);</span><br><span class="line">删掉box1节点</span><br></pre></td></tr></table></figure>

<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">var</span> oDiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>); <span class="comment">//div</span></span><br><span class="line">               <span class="keyword">var</span> newP=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);  <span class="comment">//创建一个新的p标签节点</span></span><br><span class="line">                <span class="keyword">var</span> newText=<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&#x27;jjjj&#x27;</span>); <span class="comment">//创建一个字符节点</span></span><br><span class="line">                newP.<span class="title function_">appendChild</span>(newText);   <span class="comment">//将字符节点插入到p节点中</span></span><br><span class="line">                oDiv.<span class="title function_">appendChild</span>(newP);    <span class="comment">//将p节点插入到div节点中</span></span><br><span class="line">  <span class="keyword">var</span> newb=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;input&#x27;</span>);  <span class="comment">//新建一个input节点</span></span><br><span class="line">                oDiv.<span class="title function_">insertBefore</span>(newb,newP);   <span class="comment">//将input节点添加到p节点前面</span></span><br><span class="line">  <span class="comment">//doument.body.insertBefore(oP,oDiv); //将oP节点插入到oDiv 前面</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h3><ul>
<li><p>offsetWidth</p>
</li>
<li><p>offsetHeight</p>
</li>
<li><p>offsetLeft</p>
</li>
<li><p>offsetTop</p>
<ol>
<li><p>在父元素均不设置position属性时，在Chrome，opera和IE浏览器中offsetLeft是<em>元素边框外侧</em>到<em>浏览器窗口内侧</em>的距离且body.offsetLeft=0,在firefox浏览器中offsetLeft是元素边框外侧到body内侧的距离body.offsetLeft=-边框宽度</p>
</li>
<li><p>如果父元素是body且body设置了position属性，在Chrome和opera浏览器中offsetLeft是元素边框外侧到body边框外侧的距离，在IE和fireForx浏览器中offsetLeft是元素边框外侧到body边框内侧的距离</p>
</li>
<li><p>如果父元素不是body元素且设置了position属性时，offsetLeft为元素边框外侧到父元素边框内侧的距离（各浏览器情况一致）。</p>
</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oDiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="comment">//alert(getStyle(ODiv,&quot;width&quot;));</span></span><br><span class="line"><span class="title function_">alert</span>(oDiv.<span class="property">offsetWidth</span>); <span class="comment">//眼睛能看到的实际宽度（width+border+padding）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oDiv2=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div2&quot;</span>);</span><br><span class="line"><span class="title function_">alert</span>(oDiv2.<span class="property">offsetLeft</span>);<span class="comment">//眼睛能看到实际距离第一个有定位的父节点的距离。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="DOM事件监听器"><a href="#DOM事件监听器" class="headerlink" title="DOM事件监听器"></a>DOM事件监听器</h4><ul>
<li>addEventListerner<br>语法<br><code>element.addEventListener(event, function, useCapture);</code><br>第一个参数是事件的类型（比如 “click” 或 “mousedown”）。第二个参数是当事件发生时我们需要调用的函数。第三个参数是布尔值，指定使用事件冒泡还是事件捕获,默认false事件冒泡,此参数是可选的。</li>
</ul>
<blockquote>
<p>注意：请勿对事件使用 “on” 前缀；请使用 “click” 代替 “onclick”。</p>
</blockquote>
<p>实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加当用户点击按钮时触发的事件监听器：</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, displayDate);</span><br></pre></td></tr></table></figure>

<p>addEventListener() 方法为指定元素指定事件处理程序。addEventListener() 方法为元素附加事件处理程序而不会覆盖已有的事件处理程序。您能够向一个元素添加多个事件处理程序。您能够向一个元素添加多个相同类型的事件处理程序，例如两个 “click” 事件。传统事件绑定重复添加会覆盖。您能够向任何 DOM 对象添加事件处理程序而非仅仅 HTML 元素，例如 window 对象。addEventListener() 方法使我们更容易控制事件如何对冒泡作出反应。当使用 addEventListener() 方法时，JavaScript 与 HTML 标记是分隔的，已达到更佳的可读性；即使在不控制 HTML 标记时也允许您添加事件监听器。</p>
<p>您能够通过使用 <code>removeEventListener()</code> 方法轻松地删除事件监听器。</p>
<p>格式：<code>node.removeEvenetListener()</code><br>参数：第一个为事件类型，第二个为删除函数的名字；</p>
<h4 id="IE事件处理函数"><a href="#IE事件处理函数" class="headerlink" title="IE事件处理函数"></a>IE事件处理函数</h4><ul>
<li><p>attachEvent();<br>参数：事件名称和函数<br>格式：node.attchEvent(onclink,fn);</p>
</li>
<li><p>detachEvent();<br>参数：事件名称和函数<br>格式：node.detachEvent(onclink,fn);</p>
</li>
<li><p>阻止超链接的默认行为</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> a1=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;a1&quot;</span>);</span><br><span class="line">a1.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title function_">confirm</span>(<span class="string">&quot;are you sure?&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">a1.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">evt</span>)&#123;</span><br><span class="line">evt.<span class="title function_">preventDefault</span>();</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">a1.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">evt</span>)&#123;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">returnValue</span>=<span class="literal">false</span>;   <span class="comment">//IE兼容</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;a id=<span class="string">&quot;a1&quot;</span> href=<span class="string">&quot;...&quot;</span>&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h4 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h4><p>事件委托</p>
<ol>
<li>找到当前节点的父节点或者祖先节点</li>
<li>将事件添加到你找到的这个父节点或者祖先节点上</li>
<li>找到触发对象，判断触发对象是否是想要的触发对象，进行后续操作</li>
</ol>
<p>li委托ul将li变成红色：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oUl=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ul1&quot;</span>);</span><br><span class="line">oUl.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> e=ev||winow.<span class="property">event</span>;</span><br><span class="line"><span class="keyword">var</span> target=e.<span class="property">target</span>||winow.<span class="property">event</span>.<span class="property">target</span>;</span><br><span class="line"><span class="keyword">if</span>(target.<span class="property">nodeName</span>.<span class="title function_">toLowerCase</span>()==<span class="string">&quot;li&quot;</span>)&#123;</span><br><span class="line">target.<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&quot;red&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HTML-事件"><a href="#HTML-事件" class="headerlink" title="HTML 事件"></a>HTML 事件</h3><p>HTML 事件可以是浏览器或用户做的某些事情。</p>
<p>写法：</p>
<ol>
<li>内联模式</li>
<li>脚本模式/外联模式</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick()&quot;</span>&gt;</span> 内联模式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>外联模式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> oBtn=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">0Btn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;click button&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定事件格式：<code>元素节点.on+事件类型=匿名函数</code>；</p>
<blockquote>
<p>系统会在事件绑定完成时，生成一个事件对象。触发事件时，系统会自动去调用事件绑定的函数，将事件对象当做第一个参数传入。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(argument.<span class="property">length</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oBtn=<span class="variable language_">document</span>.<span class="title function_">getElement</span>(<span class="string">&quot;btn1&quot;</span>);</span><br><span class="line"><span class="comment">//oBtn.onclick=show;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">button属性：左键0；中键1；右键2；</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">鼠标位置：(原点位置不同）</span></span><br><span class="line"><span class="comment">clientX    clientY  //可视窗口的左上角</span></span><br><span class="line"><span class="comment">pageX    pageY   //整个页面的左上角（滚动也包括）</span></span><br><span class="line"><span class="comment">screenX    screenY  //电脑屏幕的左上角</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">oBtn.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line"><span class="comment">//事件对象获取的方式，固定写法</span></span><br><span class="line"><span class="keyword">var</span> ev=e||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ev);</span><br><span class="line"><span class="comment">//console.log(ev.button);</span></span><br><span class="line"><span class="comment">//console.log(ev.clientX);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>循环添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Oblock</span>=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">   <span class="comment">//console.log(Oblock);</span></span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span> ;i&lt; <span class="title class_">Oblock</span>.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="title class_">Oblock</span>[i].<span class="property">index</span>=i;</span><br><span class="line">    <span class="title class_">Oblock</span>[i].<span class="property">onmousedown</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">index</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>window事件</p>
<ul>
<li>load 当页面加载完后会触发</li>
<li>unload 当页面解析的时候触发（如刷新界面、关闭当前界面）IE浏览器兼容</li>
<li>scroll 页面滚动</li>
<li>resize 窗口大小发生变化的时候触发</li>
</ul>
</li>
<li><p>表单事件</p>
<ul>
<li><p>blur 失去焦点</p>
</li>
<li><p>focus 获取焦点</p>
</li>
<li><p>select  在输入框内选中文本时触发</p>
</li>
<li><p>change 修改输入框内容并失去焦点时触发</p>
</li>
<li><p>sumit 只对sumit按钮有效</p>
</li>
<li><p>reset 只对reset按钮有效</p>
</li>
</ul>
</li>
</ul>
<p>下面是一些常见的 HTML 事件：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>onchange</td>
<td>HTML 元素已被改变</td>
</tr>
<tr>
<td>onclick</td>
<td>用户点击了 HTML 元素</td>
</tr>
<tr>
<td>ondblclick</td>
<td>双击</td>
</tr>
<tr>
<td>onmouseover</td>
<td>用户把鼠标移动到 HTML 元素上(经过子节点会重复触发)</td>
</tr>
<tr>
<td>onmouseout</td>
<td>用户把鼠标移开 HTML 元素(经过子节点会重复触发)</td>
</tr>
<tr>
<td>onmouseenter</td>
<td>用户把鼠标移动到 HTML 元素上(经过子节点不会重复触发,IE8不兼容)</td>
</tr>
<tr>
<td>onmouseleave</td>
<td>用户把鼠标移开 HTML 元素(经过子节点不会重复触发,IE8不兼容)</td>
</tr>
<tr>
<td>onmousedown</td>
<td>鼠标任一按钮被按下</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标被移动,会不停触发</td>
</tr>
<tr>
<td>onmouseup</td>
<td>鼠标按键被松开</td>
</tr>
<tr>
<td>onkeypress</td>
<td>用户按下键盘按键(只支持字符建，shift等没用)</td>
</tr>
<tr>
<td>onkeydown</td>
<td>用户按下键盘按键</td>
</tr>
<tr>
<td>onkeyup</td>
<td>用户抬起键盘按键</td>
</tr>
<tr>
<td>onload</td>
<td>浏览器已经完成页面加载</td>
</tr>
</tbody></table>
<p>键盘事件对象属性：</p>
<ul>
<li>shiftKey //按下shift键为true，默认为false</li>
<li>altKey</li>
<li>ctrlKey</li>
<li>metaKey  //按下win键</li>
<li>keyCode 键码  //不区分大小写，只返回大写ASCII码，支持shift、ctrl等非字符键；只在keydown下支持,可用 which兼容</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onkeydown</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"><span class="keyword">var</span> w=e.<span class="property">which</span>||e.<span class="property">keyCode</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>charCode  键码  //区分大小写，只支持字符键，只在keypress下支持,可用 which兼容</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onkeypress</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"><span class="keyword">var</span> w=e.<span class="property">which</span>||e.<span class="property">keyCode</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>target<br>目标对象/触发对象</li>
</ul>
<p>IE8以下不兼容，可使用window.event.srcElement</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oUl=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ul1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onkeypress</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"><span class="keyword">var</span> target=e.<span class="property">target</span>||<span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">srcElement</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">tagName</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">innerHTML</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>事件冒泡：由里向外逐级触发</li>
</ul>
<blockquote>
<p>事件冒泡：同样的事件会在该元素的所有祖先元素中依次被触发(从里到外)<br>事件捕获：从根元素开始去执行对应事件(从外到里)</p>
</blockquote>
<p>事件对象的属性和方法:<br><code>cancelBubble=true;</code><br><code>stopPropagation();</code>(捕获阶段也有效)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> oDiv=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;aDivs.<span class="property">length</span>;i++)&#123;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onkeypress</span>=<span class="keyword">function</span>(<span class="params">ev</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> e=ev||<span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">tagName</span>);</span><br><span class="line">e.<span class="property">cancelBubble</span>=<span class="literal">true</span>;</span><br><span class="line"><span class="comment">//e.stopProgagation();</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>mouseover和mouseout会有冒泡效果<br>mouseenter和mouseleave没有冒泡效果</p>
</blockquote>
<h2 id="BOM浏览器对象模型"><a href="#BOM浏览器对象模型" class="headerlink" title="BOM浏览器对象模型"></a>BOM浏览器对象模型</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">window</span>:&#123;</span><br><span class="line">    <span class="attr">document</span>:&#123;anchors,forms,images,links,location&#125;,</span><br><span class="line">    <span class="attr">frames</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">history</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">location</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">navigator</span>:&#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="attr">screen</span>:&#123;<span class="comment">/*...*/</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="输入输出语句"><a href="#输入输出语句" class="headerlink" title="输入输出语句"></a>输入输出语句</h3><ul>
<li>alert(msg):浏览器弹窗提示</li>
<li>console.log(msg):控制台打印信息</li>
<li>innerHTML:写入HTML元素</li>
</ul>
<blockquote>
<p>innerHTML 和 outerHTML 的区别：1）innerHTML:从对象的起始位置到终止位置的全部内容, 不包括HTML标签。2）outerHTML:除了包含innerHTML的全部内容外, 还包含对象标签本身。<br>如需访问 HTML 元素，JavaScript 可使用 document.getElementById(id) 方法。如：<code>document.getElementById(&quot;demo&quot;).innerHTML = 5 + 6;</code></p>
</blockquote>
<ul>
<li>document.write()：写入HTML输出</li>
</ul>
<blockquote>
<p>会解析标签<br>注意：在 HTML 文档完全加载后使用 document.write() 将会删除所有的标签 ;</p>
</blockquote>
<ul>
<li>prompt(info):浏览器弹出，用户输入</li>
</ul>
<h3 id="window方法"><a href="#window方法" class="headerlink" title="window方法"></a>window方法</h3><ul>
<li><code>alert();</code>弹出提示框</li>
<li><code>confirm();</code>弹出带确认的提示框，点确认返回true，取消返回false</li>
<li><code>prompt(&quot;tips&quot;,&quot;tips&quot;);</code>弹出带输入框的提示框，第一个参数为面板上的提示的内容，第二个为输入框里提示的内容</li>
<li><code>window.open(url, _blank|_top|_self|_parent, [新窗口的参数])</code>第一个参数的为跳转的url，第二个参数为新窗口的名字，第三个参数为设置打开窗口的属性；如width,height,top,left.</li>
</ul>
<h3 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h3><p> <code>window..history</code>掌管的是当前窗口的历史记录（只要加载的url不一样就会产生不一样的历史记录）</p>
<p>属性：</p>
<ul>
<li><code>history.length</code>返回当前窗口的历史记录条数</li>
</ul>
<p>方法：</p>
<ul>
<li><code>history.back();</code>返回上一条历史记录</li>
<li><code>history.forward()；</code>前进下一条记录</li>
<li><code>history.go();</code>跳转到（0为刷新，正整数为前进，负整数为后退）</li>
</ul>
<h3 id="location地址栏"><a href="#location地址栏" class="headerlink" title="location地址栏"></a>location地址栏</h3><p>方法：</p>
<ul>
<li><p><code>location.assign(url)</code>当前窗口跳转到该url</p>
</li>
<li><p><code>location.replace(url)</code>在当前窗口替换成新的url</p>
</li>
<li><p><code>location.reload()</code>刷新当前窗口</p>
</li>
<li><p><code>location.reload(true)</code>不经过浏览器缓存，强制从服务器重载</p>
</li>
</ul>
<hr>
<p><em>url:统一资源定位符</em><br><em>协议://IP（域名）//:端口号/路径/?查询字符串#锚点</em></p>
<ul>
<li><code>location.protocol</code>查看协议</li>
</ul>
<blockquote>
<p>file:本地磁盘文件访问<br>http:<br>https:</p>
</blockquote>
<ul>
<li><p><code>location.hostname</code>查看主机名 IP</p>
</li>
<li><p><code>location.port</code>查看端口号(默认隐藏，无法查看)</p>
</li>
<li><p><code>location.pathname</code>查看路径</p>
</li>
<li><p><code>location.search</code>查看字符串如<code>?name1=Tom&amp;name2=Tony</code></p>
</li>
<li><p><code>location.hash</code>查看锚点</p>
</li>
<li><p><code>loaction.href</code>查看整个url</p>
</li>
</ul>
<h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>HTML5中年，加入了一个localStorage特性，用来作为本地存储使用的，解决了cookie存储空间不足的问题。localStorage中一般浏览器支持5M大小，cookie中每条cookie的存储空间为4k。</p>
<ul>
<li>本地存储技术：</li>
</ul>
<p><em>localStorage(IE8以下不兼容);</em></p>
<ul>
<li><p>永久存储</p>
</li>
<li><p>最大可存储5M，相当于客户端一个微型数据库</p>
</li>
<li><p>只能存储string</p>
</li>
<li><p>localStorage对象</p>
<ul>
<li>setItem(name,value);</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="variable language_">window</span>.<span class="property">localStorage</span>)&#123;</span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;当前页面不支持localStorage&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="property">b</span>=<span class="string">&quot;2&quot;</span>;</span><br><span class="line"><span class="variable language_">localStorage</span>[<span class="string">&quot;c&quot;</span>]=<span class="string">&quot;3&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;b&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="property">b</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>[<span class="string">&quot;a&quot;</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>getItem(name);</li>
<li>removeItem(name);</li>
</ul>
<p><em>cookie</em></p>
<p>会话跟踪技术,从一次会话开始到结束（浏览器的关闭），会全程跟踪记录客户端的状态，记录相关信息</p>
<ul>
<li>可设置过期时间</li>
<li>最大可存储4KB</li>
<li>每一个域名下最多可存储50条数据</li>
</ul>
<blockquote>
<p>只能存储字符串</p>
</blockquote>
<ul>
<li>cookie的语法</li>
</ul>
<p>name 键；value 值，都可自定义<br><code>name=value;expires=date;path=path;domain=url;secure，其中name=value必选，剩余的可选</code></p>
<ol>
<li>expires/max-age:过期时间，填写日期对象。系统会自动清理过期的cookie</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">funciton <span class="title function_">afterOffDate</span>(<span class="params">n</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> d=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> day=d.<span class="title function_">getDate</span>();</span><br><span class="line">d.<span class="title function_">setDate</span>(n+day);</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span>=<span class="string">&quot;user=&#x27;xxx&#x27;;expires=&quot;</span>+<span class="title function_">afterOffDate</span>(<span class="number">7</span>);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>path 限制访问路径，如果不设置默认加载当前.html文件的路径；</li>
<li>domain 限制访问域名，如果不设置默认加载当前文件.html文件的服务器域名</li>
<li>secure 加入这个字段后只能设置https协议加载cookie；</li>
<li>httpOnly cookie的值不能修改；</li>
</ol>
<blockquote>
<p>火狐浏览器支持本地加载的文件缓存cookie，谷歌只支持服务器加载文件缓存cookie</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//客户</span></span><br><span class="line"><span class="comment">//设置cookie</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span>=<span class="string">&#x27;username=xiaomi&#x27;</span>;</span><br><span class="line"><span class="comment">//读取cookie</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端设置</span></span><br><span class="line"><span class="comment">//在响应头中set-cookie</span></span><br></pre></td></tr></table></figure>

<ul>
<li>cookie编解码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span>=<span class="string">&quot;name1=&quot;</span>+<span class="built_in">encodeURIComponent</span>(<span class="string">&quot;小明&quot;</span>); <span class="comment">//编码写入</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">decodeURIComponent</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>); <span class="comment">//解码读取</span></span><br></pre></td></tr></table></figure>

<p><em>sessionStorage(结合后台使用)</em></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2020/12/22/23-33-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/23-33-33/" class="post-title-link" itemprop="url">ubuntu系统安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-22 23:33:33" itemprop="dateCreated datePublished" datetime="2020-12-22T23:33:33+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h3><h3 id="软碟通写入硬盘镜像"><a href="#软碟通写入硬盘镜像" class="headerlink" title="软碟通写入硬盘镜像"></a>软碟通写入硬盘镜像</h3><h3 id="重启进入安装界面"><a href="#重启进入安装界面" class="headerlink" title="重启进入安装界面"></a>重启进入安装界面</h3><table>
<thead>
<tr>
<th>分区：</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>/boot/efi/</td>
<td>必须，引导分区，256mb-512mb</td>
</tr>
<tr>
<td>/boot</td>
<td>非必须，引导分区，ext4格式，256mb</td>
</tr>
<tr>
<td>swap</td>
<td>非必须，交换分区，虚拟内存，swap格式。内存小于 2g-&gt;2g，内存小于 8g-&gt;4g-8g，内存大于 8g-&gt;8g-16g，内存大于 16-&gt;16g</td>
</tr>
<tr>
<td>/</td>
<td>必须，主分区，用于安装系统和软件，ext4格式 ，30gb</td>
</tr>
<tr>
<td>/home</td>
<td>用户存放文件，ext4格式</td>
</tr>
</tbody></table>
<blockquote>
<p><code>/bin</code> <code>/sbin</code>  <code>/lib</code> <code>/etc</code> <code>/dev</code>这五个目录不要与根目录<code>/</code>所在分区分开。否则系统会不能正常引导</p>
</blockquote>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul>
<li>设置根用户密码：<br><code>sudo passwd</code></li>
<li>换源<br><code>sudo vim /etc/apt/sources.list</code><br>粘贴</li>
</ul>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#添加阿里源</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">#添加清华源,默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse multiverse</span><br></pre></td></tr></table></figure>

<ul>
<li>执行更新命令：<br><code>sudo apt-get update</code><br><code>sudo apt-get upgrade</code></li>
</ul>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><ul>
<li>vim</li>
<li>neofetch</li>
<li>ranger</li>
<li>rar解压软件<ul>
<li>(<a target="_blank" rel="noopener" href="https://www.rarlab.com/download.htm">https://www.rarlab.com/download.htm</a>) 下载最新版本的linux版本rar软件</li>
<li>解压后进入文件夹，执行<code>sudo make</code>命令</li>
<li>解压：<code>rar x test.rar</code></li>
<li>解压到当前目录：<code>rar e test.rar</code></li>
<li>压缩：<code>rar a test.rar /test</code></li>
<li>也可以使用<code>unrar</code>命令提取rar压缩文件</li>
</ul>
</li>
<li>截图工具：<code>flameshot</code><ul>
<li>安装：<code>sudo apt install flameshot</code></li>
<li>使用：<code>flameshot gui</code></li>
<li>添加快捷键：<code>/usr/bin/flameshot gui</code></li>
</ul>
</li>
<li>远程连接windows软件:<code>rdesktop</code><ul>
<li>安装：<code>sudo apt install rdesktop</code></li>
<li>使用：<code>rdesktop xxx.xxx.xxx.xxx -u kk -p 123456</code></li>
<li>参数：<ul>
<li><code>-f</code>：全屏模式ctrl+alt+enter可切换全屏</li>
<li><code>-a 16</code>： 16位色彩</li>
<li><code>-z</code>：启用RDP数据流压缩</li>
<li><code>-x lan</code>：使用局域网级别的图像质量</li>
<li><code>-r clipboard</code>：运行共享剪切板</li>
<li><code>-g 1920x1080+0+0</code>：分辨率,窗口位置</li>
<li><code>-r sound:local</code>：同步声音</li>
<li><code>-r disk:share=/home</code>：win10网上邻居虚拟一个映射盘，ubuntu挂载到远程主机上</li>
</ul>
</li>
</ul>
</li>
<li>nodejs<ul>
<li> 拷贝解压<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">VERSION=v10.15.0</span><br><span class="line">DISTRO=linux-x64</span><br><span class="line">sudo <span class="built_in">mkdir</span> -p /usr/local/lib/nodejs</span><br><span class="line">sudo tar -xJvf node-<span class="variable">$VERSION</span>-<span class="variable">$DISTRO</span>.tar.xz -C /usr/local/lib/nodejs </span><br></pre></td></tr></table></figure></li>
<li>环境变量<code>~/.profile</code>：<code>export PATH=/usr/local/lib/nodejs/node-$VERSION-$DISTRO/bin:$PATH</code></li>
<li>刷新：<code>source ~/.profile</code></li>
</ul>
</li>
<li>google chrome<br><code>https://www.google.cn/intl/zh-CN/chrome/</code></li>
<li>搜狗输入法(ubuntu20移除qt4,会出现死机情况)<br><code>https://shurufa.sogou.com/</code></li>
<li>百度输入法</li>
<li>谷歌输入法(推荐)<br><code>sudo apt install fcitx fcitx-googlepinyin</code></li>
<li>网易云、QQ 音乐</li>
<li>vscode</li>
<li>vitrulbox</li>
<li>unzip</li>
<li>gzip</li>
<li>mpv、vlc</li>
<li>百度网盘</li>
<li>有道翻译</li>
<li>迅雷</li>
<li>wps</li>
<li>wps字体安装<br>windows 的字体一般存放在 c:/windows/fonts 目录下，我拷贝到 linux 下的字体有：<br><code>simfang.ttf</code> 仿宋体<br><code>simhei.ttf </code>黑体<br><code>simkai.ttf </code>楷体</li>
</ul>
<p>宋体：<code>simsunb.ttf </code>和<code>simsun.ttc</code><br><code>simsun.ttf </code>宋体和新宋体，原文件名<code>simsun.ttc</code><br>微软雅黑：<code>msyhbd.ttf</code></p>
<p>下载字体文件，然后复制到 Linux 系统中的/usr/share/fonts/win-font 文件夹中。<br>修改权限，并更新字体缓存<br><code>sudo chmod -R 777  /usr/share/fonts/win-font</code><br><code>cd /usr/share/fonts/win-font</code></p>
<p>执行以下命令,生成字体的索引信息：<br><code>sudo mkfontscale</code><br><code>sudo mkfontdir</code><br>运行 fc-cache 命令更新字体缓存。<br><code>sudo fc-cache -fv</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2020/12/22/20-33-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/20-33-22/" class="post-title-link" itemprop="url">十大排序算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-22 20:33:22" itemprop="dateCreated datePublished" datetime="2020-12-22T20:33:22+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index"><span itemprop="name">study</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="十大排序算法"><a href="#十大排序算法" class="headerlink" title="十大排序算法"></a>十大排序算法</h1><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/2QDphq"><img src="https://z3.ax1x.com/2021/06/02/2QDphq.md.png" alt="2QDphq.md.png"></a><br><a target="_blank" rel="noopener" href="https://imgtu.com/i/2QDC90"><img src="https://z3.ax1x.com/2021/06/02/2QDC90.md.png" alt="2QDC90.md.png"></a></p>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><blockquote>
<p>时间复杂度O(n^2);稳定的排序方法，</p>
</blockquote>
<p>首先在未排序序列中找到最小元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小元素，然后放到已未排序序列的第一个。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">selection_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span> ; i &lt; len - <span class="number">1</span> ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">                <span class="type">int</span> min = i; <span class="comment">//用于记录最小值的下标</span></span><br><span class="line">                <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; len; j++)     <span class="comment">//从后面的元素开始找</span></span><br><span class="line">                        <span class="keyword">if</span> (arr[j] &lt; arr[min])    <span class="comment">//找到比当前元素小的值</span></span><br><span class="line">                                min = j;    <span class="comment">//紀錄最小值的下标</span></span><br><span class="line">                swap(&amp;arr[min], &amp;arr[i]);    <span class="comment">//交换当前值与最小值</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><blockquote>
<p>时间复杂度O(n^2);稳定的排序方法，</p>
</blockquote>
<p>比较相邻的元素。如果第一个比第二个大，就交换它们两个；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">bubble_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i, j, temp;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)</span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)</span><br><span class="line">                        <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                                temp = arr[j];</span><br><span class="line">                                arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                                arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><blockquote>
<p>时间复杂度为O(n^2) ;稳定的排序方法，n值较小时的最佳排序方法；</p>
</blockquote>
<p>取出下一个元素，在已经排序的元素序列中从后向前扫描；如果已排序中的元素大于该元素，则将比它大的那个元素后移到下一位置,重复以上步骤，直到找到已排序的元素<em>小于或者等于新元素</em>的位置；将新元素插入到该位置后；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">insertion_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span>&#123; <span class="comment">//传入数组和数组长度</span></span><br><span class="line">        <span class="type">int</span> i,j,key;</span><br><span class="line">        <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line">                key = arr[i]; <span class="comment">//key等于当前元素</span></span><br><span class="line">                j=i<span class="number">-1</span>;  <span class="comment">//j为前一个元素下标</span></span><br><span class="line">                <span class="keyword">while</span>((j&gt;=<span class="number">0</span>) &amp;&amp; (arr[j]&gt;key)) &#123;  <span class="comment">//如果前面的元素大于当前元素</span></span><br><span class="line">                        arr[j+<span class="number">1</span>] = arr[j];  <span class="comment">//则比它大的那个元素后移一位</span></span><br><span class="line">                        j--;  <span class="comment">//j下标前移</span></span><br><span class="line">                &#125;</span><br><span class="line">                arr[j+<span class="number">1</span>] = key;  <span class="comment">//前面大的元素已经后移一位，现在只需插入当前元素</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="插入排序-希尔排序"><a href="#插入排序-希尔排序" class="headerlink" title="插入排序-希尔排序"></a>插入排序-希尔排序</h2><blockquote>
<p>时间复杂度为O(n^(3/2));不稳定的排序方法，</p>
</blockquote>
<p>将整个待排序的记录序列分割成为若干子序列,分别进行直接插入排序，具体算法描述：</p>
<p>选择一个增量序列t1，t2，…，tk，其中ti&gt;tj，tk=1；(dlta[k]=2^(t-k+1)-1, t为排序趟数，1&lt;=k&lt;=log(2)(n+1)]<br>按增量序列个数k，对序列进行k 趟排序；<br>每趟排序，根据对应的增量ti，将待排序列分割成若干长度为m 的子序列，分别对各子表进行直接插入排序。仅增量因子为1 时，整个序列作为一个表来处理，表长度即为整个序列的长度。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">shell_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">        <span class="type">int</span> gap, i, j;</span><br><span class="line">        <span class="type">int</span> temp;</span><br><span class="line">        <span class="keyword">for</span> (gap = len &gt;&gt; <span class="number">1</span>; gap &gt; <span class="number">0</span>; gap &gt;&gt;= <span class="number">1</span>) <span class="comment">//</span></span><br><span class="line">                <span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</span><br><span class="line">                        temp = arr[i];</span><br><span class="line">                        <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)&#123; <span class="comment">//</span></span><br><span class="line">     arr[j + gap] = arr[j];</span><br><span class="line">   &#125;</span><br><span class="line">                        arr[j + gap] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><blockquote>
<p>时间复杂度O(nlogn);n值较大时，所需时间较堆排序省，但所需的辅助存储量最多。</p>
</blockquote>
<p>把长度为n的输入序列分成两个长度为n/2的子序列；<br>对这两个子序列分别采用归并排序；<br>将两个排序好的子序列合并成一个最终的排序序列。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">min</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x &lt; y ? x : y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">merge_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="type">int</span> *a = arr;</span><br><span class="line">    <span class="type">int</span> *b = (<span class="type">int</span> *) <span class="built_in">malloc</span>(len * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="type">int</span> seg, start;</span><br><span class="line">    <span class="keyword">for</span> (seg = <span class="number">1</span>; seg &lt; len; seg += seg) &#123;</span><br><span class="line">        <span class="keyword">for</span> (start = <span class="number">0</span>; start &lt; len; start += seg * <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="type">int</span> low = start, mid = min(start + seg, len), high = min(start + seg * <span class="number">2</span>, len);</span><br><span class="line">            <span class="type">int</span> k = low;</span><br><span class="line">            <span class="type">int</span> start1 = low, end1 = mid;</span><br><span class="line">            <span class="type">int</span> start2 = mid, end2 = high;</span><br><span class="line">            <span class="keyword">while</span> (start1 &lt; end1 &amp;&amp; start2 &lt; end2)</span><br><span class="line">                b[k++] = a[start1] &lt; a[start2] ? a[start1++] : a[start2++];</span><br><span class="line">            <span class="keyword">while</span> (start1 &lt; end1)</span><br><span class="line">                b[k++] = a[start1++];</span><br><span class="line">            <span class="keyword">while</span> (start2 &lt; end2)</span><br><span class="line">                b[k++] = a[start2++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> *temp = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a != arr) &#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        b = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>递归版：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">merge_sort_recursive</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> reg[], <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt;= end)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> len = end - start, mid = (len &gt;&gt; <span class="number">1</span>) + start;</span><br><span class="line">    <span class="type">int</span> start1 = start, end1 = mid;</span><br><span class="line">    <span class="type">int</span> start2 = mid + <span class="number">1</span>, end2 = end;</span><br><span class="line">    merge_sort_recursive(arr, reg, start1, end1);</span><br><span class="line">    merge_sort_recursive(arr, reg, start2, end2);</span><br><span class="line">    <span class="type">int</span> k = start;</span><br><span class="line">    <span class="keyword">while</span> (start1 &lt;= end1 &amp;&amp; start2 &lt;= end2)</span><br><span class="line">        reg[k++] = arr[start1] &lt; arr[start2] ? arr[start1++] : arr[start2++];</span><br><span class="line">    <span class="keyword">while</span> (start1 &lt;= end1)</span><br><span class="line">        reg[k++] = arr[start1++];</span><br><span class="line">    <span class="keyword">while</span> (start2 &lt;= end2)</span><br><span class="line">        reg[k++] = arr[start2++];</span><br><span class="line">    <span class="keyword">for</span> (k = start; k &lt;= end; k++)</span><br><span class="line">        arr[k] = reg[k];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">merge_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">const</span> <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="type">int</span> reg[len];</span><br><span class="line">    merge_sort_recursive(arr, reg, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><blockquote>
<p>时间复杂度O(nlogn),不稳定的排序方法，最坏情况O(n^2)</p>
</blockquote>
<p>从数列中挑出一个元素，称为 “基准”（pivot）；<br>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区退出之后，该基准就处于数列的中间位置。这个称为分区（partition）操作；<br>递归地（recursive）把小于基准值元素的子数列和大于基准值元素的子数列排序。</p>
<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><blockquote>
<p>时间复杂度O(nlogn);不稳定的排序方法，</p>
</blockquote>
<p>将初始待排序关键字序列(R1,R2….Rn)构建成大顶堆，此堆为初始的无序区；<br>将堆顶元素R[1]与最后一个元素R[n]交换，此时得到新的无序区(R1,R2,……Rn-1)和新的有序区(Rn),且满足R[1,2…n-1]&lt;=R[n]；<br>由于交换后新的堆顶R[1]可能违反堆的性质，因此需要对当前无序区(R1,R2,……Rn-1)调整为新堆，然后再次将R[1]与无序区最后一个元素交换，得到新的无序区(R1,R2….Rn-2)和新的有序区(Rn-1,Rn)。不断重复此过程直到有序区的元素个数为n-1，则整个排序过程完成。</p>
<h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><blockquote>
<p>时间复杂度O(d(n+rd));稳定的排序方法，适用于n值较大而关键词较小的序列</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2020/12/22/20-22-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/22/20-22-11/" class="post-title-link" itemprop="url">计算机网络基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-22 20:22:11" itemprop="dateCreated datePublished" datetime="2020-12-22T20:22:11+08:00">2020-12-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/study/" itemprop="url" rel="index"><span itemprop="name">study</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="计算机网络基础"><a href="#计算机网络基础" class="headerlink" title="计算机网络基础"></a>计算机网络基础</h1><h2 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h2><p>十进制：89D；<br>八进制：89O；<br>十六进制：89H；</p>
<blockquote>
<p>二进制数1101.01转化成十进制<br><code>1101.01（2）=1*2^0+0*2^1+1*2^2+1*2^3 +0*2^(-1)+1*2^(-2)=1+0+4+8+0+0.25=13.25（10）</code></p>
</blockquote>
<ul>
<li><p>十进制整数转换为二进制整数采用”除2取余，逆序排列”法。具体做法是：用2整除十进制整数，可以得到一个商和余数；再用2去除商，又会得到一个商和余数，如此进行，直到商为小于1时为止，然后把先得到的余数作为二进制数的低位有效位，后得到的余数作为二进制数的高位有效位，依次排列起来。</p>
</li>
<li><p>十进制小数转换成二进制小数采用”乘2取整，顺序排列”法。具体做法是：用2乘十进制小数，可以得到积，将积的整数部分取出，再用2乘余下的小数部分，又得到一个积，再将积的整数部分取出，如此进行，直到积中的小数部分为零，此时0或1为二进制的最后一位。或者达到所要求的精度为止。</p>
</li>
<li><p>整数二进制转八进制：从右往左每三位二进制转1位八进制，不足三位在左边补零；反之八进制转二进制，每一位八进制转换为三位二进制</p>
</li>
<li><p>整数二进制转十六进制:从右往左每四位二进制转1位十六进制，不足四位在左边补零；反之十六进制转二进制，每一位十六进制转换为四位二进制</p>
</li>
</ul>
<blockquote>
<p>[0~9,a-f]</p>
</blockquote>
<p>最高位为符号位：1表示负数，0表示正数<br>反码：正数原码反码一样，负数符号位不变，其他取反<br>补码：正数原码补码一样，负数在反码的基础上加1，由补码求原码则是先取反再加1  </p>
<blockquote>
<p>计算机中一般采用补码进行存储，因为补码和移码的0是唯一，补码可以直接带符号运算而不出现错误</p>
</blockquote>
<p>取值范围：<br>原码：-[2^(n-1)-1]~2^(n-1)-1<br>反码：-[2^(n-1)-1]~2^(n-1)-1<br>补码：-2^(n-1)~2^(n-1)-1</p>
<h3 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h3><ul>
<li>或：有1则为1</li>
<li>与：全1才为1</li>
<li>非：取反</li>
<li>异或：不相同才为1</li>
</ul>
<h3 id="计算机结构"><a href="#计算机结构" class="headerlink" title="计算机结构"></a>计算机结构</h3><ul>
<li><p>总线：数据总线，地址总线，控制总线；</p>
</li>
<li><p>主机：</p>
<ol>
<li>主存储器</li>
<li>cpu<ul>
<li>运算器<ol>
<li>算术逻辑单元ALU</li>
<li>累加寄存器AC:暂存计算结果</li>
<li>数据缓冲寄存器</li>
<li>状态条件寄存器</li>
</ol>
</li>
<li>控制器<ol>
<li>程序计数器PC:储存指令地址</li>
<li>指令寄存器IR</li>
<li>指令译码器</li>
<li>时序部件</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p>寻址方式：<br>一条指令包括操作码和地址码</p>
</li>
</ul>
<ol>
<li>立即寻址</li>
<li>内存寻址<ul>
<li>变址寻址</li>
<li>直接寻址</li>
<li>间接寻址</li>
</ul>
</li>
<li>寄存器寻址与寄存器间接寻址</li>
</ol>
<ul>
<li>CISC(复杂)与RISC(精简)</li>
</ul>
<ul>
<li>CISC:</li>
</ul>
<ul>
<li><p>RISC:统一指令编码、泛用的寄存器、单纯的寻址方式、寻址方式少、硬件中支持少数资料类型。指令长度固定、指令种类尽可能少。增加寄存器数目减少访存次数。</p>
</li>
<li><p>流水线：</p>
</li>
</ul>
<p>取址-》分析-》执行<br>流水线执行时间计算公式：<code>(t1+t2+t3)+(n-1)t1</code><br>(t1+t2+t3)为一条指令顺序执行时间即取址、分析、执行的时间之和。t1为三个步骤中执行时间最长的一段<br>吞吐率：指令条数/流水线执行时间<br>加速比：不使用流水线的时间/使用流水线的执行时间</p>
<h3 id="存储容量单位"><a href="#存储容量单位" class="headerlink" title="存储容量单位"></a>存储容量单位</h3><p>主存(内存):RAM随机存储器，掉电丢失；ROM只读存储器，掉电不丢失；<br>缓存cache：缓和寄存器与内存间的速率矛盾；<br>Cache是一个高速小容量的临时储存器，其容量远远小于内存，cpu先访问Cache再访问内存，如果数据在cache中为命中，在内存中为不命中，</p>
<blockquote>
<p>Cache的访问命中率为h，Cache访问周期为t1，主存器访问时间为t2；整个系统的平均访存时间为<code>h* t1+(1-h)*t2</code></p>
</blockquote>
<p>地址范围：末地址-首地址+1</p>
<blockquote>
<p>注意：二进制10-1=1</p>
</blockquote>
<p>位：bit<br>字节：1B=8bit<br>字：通常为字节的整数倍</p>
<p>1K=2^10b<br>1M=2^10K<br>1G=2^10M</p>
<p>磁盘容量/物理块大小=物理块个数<br>物理块个数/字长（一个字需要的物理块=位示图大小需要的字<br>（物理块大小<em>系统字长</em>磁盘容量)/物理块=物理块大小*磁盘容量</p>
<ul>
<li>磁盘：<br>RAID技术:</li>
</ul>
<ol>
<li>RAID0:将所有硬盘构成一个磁盘阵列。写入速度快，不具备备份和容错能力；可靠性最差;利用率为100%</li>
<li>RAID1:磁盘镜像技术，将一个硬盘的内容同步备份到另一个硬盘；具备容错和备份能力；效率不高，可靠性好；利用率为50%</li>
<li>RAID3:奇偶校验盘的分段技术；容错性好，可靠性高；单块硬盘失效时会出现I/O瓶颈。有一块磁盘用于存放校验数据所以利用率=（n-1）/n</li>
<li>RAID5:分布式奇偶校验技术，校验值分布在各盘的不同位置；性能比RAID3好;利用率一样</li>
<li>RAID6:带有两个独立分布式校验方案的独立数据磁盘；能实现两个磁盘掉线容错；磁盘利用率（n-2）/n</li>
</ol>
<p>DMA存取方式是一种完全有硬件执行I/O数据交换的工作方式，它即考虑到中断的响应，又要节约中断开销。此时，DMA控制器代替CPU完全接管对总线的控制，数据交换不经过CPU，直接在内存和外围设备之间进行数据交换</p>
<ul>
<li><p>进程管理<br>等待，就绪，运行</p>
</li>
<li><p>死锁：一个进程在等待一个不可能发生的事就会出现死锁<br>解决死锁：</p>
</li>
</ul>
<ol>
<li>预防死锁</li>
<li>死锁避免<ul>
<li>银行家算法</li>
</ul>
</li>
<li>死锁检测</li>
<li>死锁解除</li>
</ol>
<ul>
<li><p>pv操作：<br>解决进程互斥同步问题<br>P操作：使s=s-1若s&gt;=0则进程继续执行，否则进入等待队列；<br>V操作：使s=s+1若s&lt;=0则唤醒等待队列中的一个进程</p>
</li>
<li><p>软件开发模型：<br>瀑布模型<br>v模型<br>喷泉模型<br>螺旋模型</p>
</li>
</ul>
<h3 id="网络按分布范围分类"><a href="#网络按分布范围分类" class="headerlink" title="网络按分布范围分类"></a>网络按分布范围分类</h3><p>局域网(误码率最小)，城域网，广域网</p>
<h3 id="网络按拓扑结构分类"><a href="#网络按拓扑结构分类" class="headerlink" title="网络按拓扑结构分类"></a>网络按拓扑结构分类</h3><p>总线型、星型、环型、树形、网状型、混合型</p>
<h3 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h3><table>
<thead>
<tr>
<th align="right">osi层次</th>
<th align="center">封装单位</th>
<th align="center">地址标识</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="right">物理层</td>
<td align="center">比特流</td>
<td align="center">Bit</td>
<td align="center">定义物理设备接口链路标准,用于建立、维护、拆除物理链路链接，确保原始数据在物理媒介上的传输</td>
</tr>
<tr>
<td align="right">数据链路层</td>
<td align="center">数据帧</td>
<td align="center">MAC地址</td>
<td align="center">在物理层提供的比特流的服务上，建立相邻结点间的数据链路，通过差错控制提供数据帧在信道上的无差错的传输，功能有物理寻址，比特流封装成帧，帧同步，差错、流量控制</td>
</tr>
<tr>
<td align="right">网络层</td>
<td align="center">数据包，分组</td>
<td align="center">IP地址</td>
<td align="center">基于IP地址进行不同网络间的路径选择，网络寻址</td>
</tr>
<tr>
<td align="right">传输层</td>
<td align="center">数据段</td>
<td align="center">端口号</td>
<td align="center">定义了传输数据的协议与端口，提供端与端可靠的数据传输，分段与重组</td>
</tr>
<tr>
<td align="right">会话层</td>
<td align="center">应用进程</td>
<td align="center">进程号</td>
<td align="center">会话的连接与释放,同步</td>
</tr>
<tr>
<td align="right">表示层</td>
<td align="center">应用进程</td>
<td align="center">进程号</td>
<td align="center">数据解释，数据加密，数据压缩</td>
</tr>
<tr>
<td align="right">应用层</td>
<td align="center">应用进程</td>
<td align="center">进程号</td>
<td align="center">用户应用程序的协议</td>
</tr>
</tbody></table>
<p>OSI网络管理标准中的5大功能：配置管理、故障管理、性能管理、安全管理、计费管理；</p>
<h3 id="tcp-ip四层模型"><a href="#tcp-ip四层模型" class="headerlink" title="tcp/ip四层模型"></a>tcp/ip四层模型</h3><table>
<thead>
<tr>
<th>层</th>
<th>常见协议</th>
</tr>
</thead>
<tbody><tr>
<td>网络接口层(物理层和数据链路层)</td>
<td>以太网、令牌环、帧中继、ATM</td>
</tr>
<tr>
<td>网络层</td>
<td>IP、ICMP、IGMP、ARP、RARP</td>
</tr>
<tr>
<td>传输层</td>
<td>tcp udp</td>
</tr>
<tr>
<td>应用层</td>
<td>tcp:pop3(110)、ftp(20、21)、http(80)、HTTPS(443)、telent(23)、SMTP。udp：DHCP、DNS(53)、SNMP(161、162)、TFTP(69)。共用：NFS、Samba等。</td>
</tr>
</tbody></table>
<p><strong>数据的封装：</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>上层数据</td>
<td>应用层</td>
<td>HTTP FTP TFTP SMTP SNMP DNS</td>
</tr>
<tr>
<td>tcp头部+上层数据</td>
<td>传输层</td>
<td>TPC UDP</td>
</tr>
<tr>
<td>ip头部+tcp头部+上层数据</td>
<td>网络层</td>
<td>ICMP iGMP IP ARP RARP</td>
</tr>
<tr>
<td>MAC头部+ip头部+tcp头部+上层数据</td>
<td>数据链路层</td>
<td>由底层网络定义协议</td>
</tr>
<tr>
<td>二进制数据</td>
<td>物理层</td>
<td>由底层网络定义的协议</td>
</tr>
</tbody></table>
<h4 id="OSI模型服务访问点"><a href="#OSI模型服务访问点" class="headerlink" title="OSI模型服务访问点"></a>OSI模型服务访问点</h4><ul>
<li>垂直方向：</li>
</ul>
<hr>
<blockquote>
<p>服务用户：  第n+1层 实体（n+1）</p>
</blockquote>
<hr>
<blockquote>
<p>服务提供者：第n层  实体（n）</p>
</blockquote>
<hr>
<ul>
<li>常见访问点SAP:</li>
</ul>
<ol>
<li>数据链路层：LLC地址</li>
<li>网络层：IP地址</li>
<li>传输层：端口号</li>
</ol>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><h3 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h3><ol>
<li>发送时延=数据帧长度(bit)/发送速率(bit/s)</li>
<li>传播时延=信道长度(m)/电磁波在信道上的传播速率(m/s)；电磁波的传输速率为光速；铜线为2.3<em>10^8m/s；光纤/电缆为2</em>10^8m/s;卫星信号的传播延迟为270ms。</li>
<li>处理时延</li>
<li>排队时延</li>
</ol>
<h3 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h3><ol>
<li>双绞线：屏蔽双绞线（stp）非屏蔽双绞线（utp）；<br>双绞线线序：T568A,T6568B;<br>双绞线两端使用相同标准称为直通线，否则称为交叉线；</li>
</ol>
<table>
<thead>
<tr>
<th>设备互联</th>
<th>线缆种类</th>
</tr>
</thead>
<tbody><tr>
<td>计算机–计算机</td>
<td>交叉线</td>
</tr>
<tr>
<td>计算机–交换机</td>
<td>直通线</td>
</tr>
<tr>
<td>计算机–路由器</td>
<td>交叉线</td>
</tr>
<tr>
<td>交换机–交换机</td>
<td>交叉线</td>
</tr>
<tr>
<td>交换机–路由器</td>
<td>直通线</td>
</tr>
<tr>
<td>路由器–路由器</td>
<td>交叉线</td>
</tr>
</tbody></table>
<ol start="2">
<li>同轴电缆<br>有很好的抗干扰性，常用于高数据传输；单工通信：无线广播</li>
<li>光纤</li>
</ol>
<p>单模单纤: 激光二极管LED做光源;传播距离远，数据传输速率高，信号衰减小；造价高<br>多模光纤：发光二极管LED做为光源;反之  </p>
<h4 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h4><ul>
<li><p>信道带宽W:模拟信道<code>W=f2-f1</code>（f2、f1分别表示信道能通过的最高|最低频率，单位为hz）</p>
</li>
<li><p>码元：即一个数字脉冲</p>
</li>
<li><p>一个码元携带的信息量n与码元种类N的关系：<code>n=log(2)N</code></p>
</li>
<li><p>码元速率（波特率）B：单位时间内信道传输的码元个数，若码元宽度（脉冲周期）为T，则码元速率<code>B=1/T</code>,单位为波特Baud</p>
</li>
<li><p>无噪声影响：（尼奎斯特定理）信道带宽为W,最大码元速率为<code>B=2W</code>;数据极限传输速率为<code>R=Blog(2)N=2Wlog(2)N</code>其中N为码元种类数</p>
</li>
<li><p>噪声影响：(香农理论)信道的极限传输传输速率为：<code>C=Wlog(2)(1+S/N)</code>;W：带宽；S:信号平均功率；N:噪声平均功率；<br>由于信噪比S/N的比值通常太大，因此通常用分贝db来表示,分贝与信噪比的转换公式：db=10log(s/n);常见的：<code>db=30 =&gt; S/N=1000</code>;<code>log(2)1001=log(2)1024=10</code>;</p>
</li>
<li><p>信道复用：发送端复用器，接收端分用器；频分复用FDM、时分TDN、波分WDM、吗分CDM</p>
</li>
<li><p>调制与解调</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>数据种类</th>
<th>模拟信道</th>
<th>数字信道</th>
</tr>
</thead>
<tbody><tr>
<td>模拟数据</td>
<td>调幅AM、调频FM、调相PM、正交调相QAM</td>
<td><em>PCM脉冲编码调制</em>：采样(奈奎斯特定理)、量化(如：量化128个信道=2^7==7bit)、编码</td>
</tr>
<tr>
<td>数字数据</td>
<td>调制：ASK(码元种类：2),FSK(码元种类：2),PSK(码元种类：2),DPSK(码元种类：2)、4DPSK(码元种类：4)、QPSK(码元种类：4)</td>
<td>基本编码，应用型编码</td>
</tr>
</tbody></table>
<ul>
<li>E1:<br>E1载波有32个信道，30个用来传数据，2个不传，即控制率为<code>2/32*100%</code>,基本帧传送时间为125us;数据速率为2.048Mb/s,每个信道的速率是64Kb/s<br>E2信道由4个E1信道组成，数据速率为8.448Mb/s.</li>
<li>T1：<br>T1载波控制位为24+1位，总帧长为<code>24*（7+1）=193</code>速率为1.544Mb/s<br>T2信道由4个T1信道组成，数据速率为6.312Mb/s</li>
</ul>
<blockquote>
<p>异步通信中，每个字符包含一位起始位、7位数据位、1位奇偶位、一位终止位，每秒传送100个字符，采用DPSK调制，则码元速率位1000波特，有效数据速率为700bps</p>
</blockquote>
<p>采取pcm编码,信道的数据速率为<code>采样率*每次采样所占位数</code></p>
<ul>
<li>编码：</li>
</ul>
<ol>
<li>不归零制：高电平为1，低电平为0；</li>
<li>归零制：正脉冲为1，负脉冲为0；</li>
<li>曼切斯特编码：在中心周期由高电平向低电平跳变为1，反之变为0；</li>
<li>差分曼切斯特编码：边界处有跳变为0，没有为1；</li>
</ol>
<p>应用型编码：</p>
<ol>
<li>曼切斯特编码（常用于10M以太网）和差分曼特斯特编码（常用于令牌环网），编码效率只有50%</li>
<li>8B/6B:100Base-T,</li>
<li>4B/5B编码：常用于100base-x，编码效率为80%</li>
<li>8B/10B编码：千兆以太网，编码效率为80%</li>
</ol>
<blockquote>
<p>在采用曼斯特编码方式的数字通信中，传输一个比特需要发送2个码元，波特率是数据速率的2倍</p>
</blockquote>
<table>
<thead>
<tr>
<th>标准</th>
<th>频段</th>
<th>技术</th>
<th>速率</th>
</tr>
</thead>
<tbody><tr>
<td>802.11</td>
<td>2.4GHz的ISM频段</td>
<td>扩频通信技术</td>
<td>1mbps</td>
</tr>
<tr>
<td>802.11b</td>
<td>2.4GHz的ISM频段</td>
<td>CCK技术</td>
<td>11mbps</td>
</tr>
<tr>
<td>802.11a</td>
<td>5GHz的U-NII频段</td>
<td>OFDM调制技术</td>
<td>54mbps</td>
</tr>
<tr>
<td>802.11g</td>
<td>2.4GHz的ISM频段</td>
<td>OFDM调制技术</td>
<td>54mbps</td>
</tr>
<tr>
<td>802.11n</td>
<td>2.4GHz和5GHz</td>
<td>MIMO,OFDM</td>
<td>600mbps</td>
</tr>
</tbody></table>
<h3 id="接入技术"><a href="#接入技术" class="headerlink" title="接入技术"></a>接入技术</h3><ul>
<li>常见接入网技术:SONET/SDH<br>SONET信号STS-1和OC-1的速率:51.840Mb/s<br>SONET信号STS-3、OC-3与SDH信号STM-1的速率:155.520Mb/s</li>
</ul>
<ol>
<li>窄带（N-ISDN）用户利用2B+D数字用户线拨号上网</li>
<li>xDSL：各种DSL数字用户线的总称，通过频分复用技术，利用电话线传输数字数据。<ul>
<li>IDSL：数字用户线路，128kbps，对称模式</li>
<li>HDSL:对称,上下行1.544Mb/s</li>
<li>SDSL:对称,上下行2.3Mb/s</li>
<li><em>ADSL：非对称用户数字线路，采用频分多路复用技术DMT，非对称模式。下行8Mbps，下640kbps-1Mbps</em></li>
<li>VDSL：超高数据速率数字用户线路，非对称模式,上8Mb/s,下640kbps-1Mbps</li>
</ul>
</li>
<li>局域网接入</li>
<li>HFC光纤同轴混合网：电缆调制解调器:利用有线电视电缆</li>
<li>FTTX:光纤接入技术:为了有效利用光纤资源，会在光纤干线与广大用户之间铺设一段管线转换器，即ODN光配线网，使得十几个用户共同享用一条光纤干线，无源的光配线网称为无源光网络：</li>
</ol>
<ul>
<li>无源光网络PON：<br>ODN光分配网络，没有有源电子设备，避免电磁干扰；下行采用TDM广播方式，上行采用TDMA时分多址接入方式</li>
</ul>
<p>PON三种类型：</p>
<ol>
<li>APON:以53字节固定长度的ATM信元方式传输</li>
<li>EPON：基于以太网的PON技术，可变长度的分组进行</li>
<li>GPON： 上下行传输不对称，兼容上面两种；</li>
</ol>
<h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><p>两种协议：ppp、CSMA/CD协议；<br>三个问题：封装成帧、透明传输、差错控制；<br>以太网MAC层的硬件地址；</p>
<h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><ol>
<li>把网络层交下来的IP数据报添加首部和尾部封装成帧；</li>
<li>把封装好的数据帧发送给结点B的数据链路层；</li>
<li>若结点B的数据链路层收到的帧无差错，则从帧中提取IP数据报交给网络层，否则丢弃该帧；</li>
</ol>
<p>帧的首部和尾部的作用是确定帧的界限即帧定界<br>为了提高帧的传输效率，应使帧的数据长度尽可能大于首部和尾部的长度。而规定数据部分长度的上限称为最大传送单元MTU；<br>帧定界可以使用特殊的帧定界符：帧开始SOH、帧结束EOT；</p>
<ul>
<li>MAC帧组成(最小64字节)：6B<code>目的地址</code>，6B<code>源地址</code>，2B<code>类型(上层协议类型)</code>，网络层的<code>数据</code>46~1500字节(不够时填充0保持最小帧长,46字节是最小帧长64字节减去首尾一共18字节而得的)，4B<code>FCS(CRC校验）</code>;即合法帧长为64~1518字节</li>
</ul>
<blockquote>
<p>规定最小帧长为64位，避免发送过程中检测不到冲突，若帧长不够则填充冗余字节到最小帧长</p>
</blockquote>
<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><p>数据链路层的透明传输指无论什么样的比特组合的数据，都能够按照原来没有差错的通过这个数据链路层；<br>避免非ASCII吗的的文本文件中的某个字节的二进制代码恰好和SOH、EOT这种控制字符一样；发送端会在数据部分的SOH、EOT、ESC等控制字符的前面插入一个转义字符“ESC”,接受端收到后会删除该字符在交给网络层，此方法称为字符填充</p>
<h4 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h4><p>任意两个码字之间最少变化的二进制位数称为该数据编码的最小码距</p>
<p>在一个码组内为了检测e个误码，最小码距应满足：<code>d&gt;=e+1</code>;<br>在一个码组内为了纠正t个误码，则最小码距应满足：<code>d&gt;=2t+1</code></p>
<ul>
<li>奇偶校验：<br>奇偶校验是最简单的错误检测码，是一个给定位数的二进制数中1的个数是奇数或偶数的二进制数。如果传输过程中包括校验位的奇数或者偶数个数据位发生改变，那么奇偶校验位将出错。奇偶检验位是一种检错码，但不能确定具体哪一位出错，所以无法纠正。<br>检错码=信息字段+校检字段；</li>
</ul>
<blockquote>
<p>奇偶校验用的是模二加运算法则</p>
</blockquote>
<ol>
<li>垂直奇偶校验（纵向奇偶校验）</li>
<li>水平奇偶校验（横向奇偶校验）</li>
</ol>
<ul>
<li><p>海明校验：<br>海明码特点：<code>m+k+1&lt;=2^k</code> m为数据位数，k为冗余码个数，海明码存放的位置在2^n上，如：<code>4位冗余码==p1p2c1p3c2c3c4p4c5c6....</code>能纠错一位.</p>
</li>
<li><p>CRC校验<br>生成多项式的最高次幂为冗余码个数<br>如:P(x)=x^4+x^2+1;则冗余码为4个，即在发送的帧后面添加4个0；除数为10011；<br>模二运算法则,相同为0，不同为1</p>
</li>
</ul>
<p>循环冗余检验一般不进行纠错，若数据出错则请求重传。</p>
<h3 id="点对点协议PPP"><a href="#点对点协议PPP" class="headerlink" title="点对点协议PPP"></a>点对点协议PPP</h3><h3 id="CSMA-CD协议-载波监听多点接入-碰撞检测"><a href="#CSMA-CD协议-载波监听多点接入-碰撞检测" class="headerlink" title="CSMA/CD协议:载波监听多点接入/碰撞检测"></a>CSMA/CD协议:载波监听多点接入/碰撞检测</h3><p>使用CSMA/CD协议时，一个站不可能同时进行发送和接受，所以使用该协议的以太网只能进行半双工通信。</p>
<ul>
<li><p>载波监听过程</p>
<ol>
<li>非坚持型监听算法：空余时立即发送，忙时放弃监听，随机后退一段时间再监听(信道利用率低)</li>
<li>1-坚持型监听算法：空时立即发送，忙时继续监听(减少发送延迟，发生冲突的概率大）</li>
<li>P-坚持型监听算法：空时根据概率p决定是否发送，忙时继续监听（算法复杂）</li>
</ol>
</li>
<li><p>冲突检测方法<br>边发边听:碰撞窗口（争用期）=2倍传播时延；<code>发送时延&gt;=2*传播时延</code>所以最短帧长计算：<code>发送时延&gt;=2*传播时延</code>;</p>
</li>
<li><p>发现冲突，停止发送</p>
</li>
<li><p>随机延迟重发<br>采用截断二进制指数退避算法：</p>
<ol>
<li>确定基本退避时间即2倍传播时延</li>
<li>k=Min[重传次数,10],从集合[0,1,3,….,((2^k)-1)]中随机区一个数，乘于2倍传输时延，</li>
<li>当重传16次仍不成功，则丢弃</li>
</ol>
</li>
</ul>
<blockquote>
<p>第n次重传后再发生冲突的概率：<code>1/2^(n+1)</code></p>
</blockquote>
<h4 id="MAC地址-一般采用16进制表示"><a href="#MAC地址-一般采用16进制表示" class="headerlink" title="MAC地址:一般采用16进制表示"></a>MAC地址:一般采用16进制表示</h4><p>（硬件唯一标识地址）MAC地址： 48位；前24位为供应商标志；第8位I/G位为1表示组播地址,用于多播(一对多,广播为一对全体)，为0表示单播地址。后一半为网卡的唯一编码；</p>
<h3 id="局域网"><a href="#局域网" class="headerlink" title="局域网"></a>局域网</h3><p>局域网分类：</p>
<ul>
<li>以太网</li>
<li>令牌环网</li>
<li>ATM网</li>
<li>无线局域网</li>
<li>FDDI网</li>
</ul>
<h3 id="局域网设备"><a href="#局域网设备" class="headerlink" title="局域网设备"></a>局域网设备</h3><ol>
<li>集线器：物理层</li>
<li>网桥：数据链路层；生成树网桥、源路由网桥；</li>
<li>交换机：数据链路层；</li>
<li>路由器：网络层</li>
</ol>
<blockquote>
<p>网桥根据MAC帧的目的地址对帧进行转发和过滤<br>交换机根据以太网帧中的目的地址智能转发数据，只能分割冲突域,交换机分割冲突域，实现全双工通信，不使用CSMA/CD协议。交换机级联可在不同厂家的设备间使用，而堆叠只能在通厂家间的设备进行；路由器能分割冲突域和广播域，集线器啥都不能；</p>
</blockquote>
<p>交换机与路由器相关参数计算：<br>背板带宽=端口数<em>相应端口速率</em>2（全双工模式）<br>包转发率=千兆端口数量<em>1.488Mpps+百兆端口数量</em>0.1488MPPS+其余端口数*相应速率</p>
<h3 id="无线局域网"><a href="#无线局域网" class="headerlink" title="无线局域网"></a>无线局域网</h3><table>
<thead>
<tr>
<th>种类</th>
<th>标准</th>
<th>应用</th>
</tr>
</thead>
<tbody><tr>
<td>无线个人网WPAN</td>
<td>IEEE802.15</td>
<td>蓝牙</td>
</tr>
<tr>
<td>无线局域网WLAN</td>
<td>IEEE802.11</td>
<td>企业</td>
</tr>
<tr>
<td>无线城/广域网WMAN</td>
<td>IEEE802.20&amp;&amp;蜂窝通信</td>
<td>访问internet</td>
</tr>
</tbody></table>
<p>无线局域网中的AP的轮询会锁定异步帧，在IEEE802.11网络中定义了无争用服务机制来解决这问题。</p>
<ul>
<li>加密<br>WEP：对称加密算法；<br>WPA:<br>WPA2:AES加密算法；</li>
</ul>
<h3 id="流量和差错控制"><a href="#流量和差错控制" class="headerlink" title="流量和差错控制"></a>流量和差错控制</h3><p>停等协议<br>滑动窗口协议<br>停等ARQ协议:应答帧大小为64B；<br>选择重发(SR)：其最大值就是最小帧编号总数的一半即<code>W发=W收&lt;=2^(k-1)</code><br>后退N帧(GBN):限制发送窗口的大小为<code>W&lt;=2^k-1</code>; 接收窗口=1</p>
<h3 id="以太网标准"><a href="#以太网标准" class="headerlink" title="以太网标准"></a>以太网标准</h3><ol>
<li><p>以太网：早期的局域网标准802.3，速率10Mbps。最小帧长64B，最大帧长1518B。10Basc-T：无屏蔽双绞线，曼切斯特编码，半双工模式</p>
</li>
<li><p>快速以太网：802.3u标准，速率100Mbps，最小帧长64B，最大帧长1518B。<br>100Base-T4:4对3类非屏蔽双绞线，最大长度100m，三对数据传输，一对冲突检测；8B/6T编码；半双工模式。<br>100Base-T2:2对3类UTP，100m<br>100Base_TX:2对5类非屏蔽双绞线，一对发，一对收，4B/5B与MLT-3编码，全双工模式。<br>100Base-FX:一对光纤，最大长度45m，一发一收，4B/5B编码；全双工</p>
</li>
<li><p>千兆以太网：速率1000Mbps，最小帧长512B,最大帧长1518B。<br>1000 Base-T:(802.3ab标准)非屏蔽双绞线，PAM5编码 100米。<br>1000 Base-X:全双工，半双工，多模光纤；8B/10B编码，</p>
<ul>
<li>1000 Base-CX:屏蔽双绞线，25m；802.3z标准，</li>
<li>1000 Base-LX:单模光纤，3km；802.3z标准，</li>
<li>1000 Base-SX:多模光纤，300m-500m；802.3z标准，</li>
</ul>
</li>
<li><p>万兆以太网:只工作在<em>全双工模式</em>；802.3ae标准，最小帧长64B，最大1518B。64B/66B编码；光纤；</p>
</li>
</ol>
<h3 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h3><p>基于802.1Q标准，每个交换机所有端口都处于广播域，交换机所有端口默认属于VLAN1。VLAN:把同一物理局域网内的不同用户，在逻辑上划分成不同的广播域。VLAN的取值范围为0-4095；</p>
<ul>
<li>access接口为数据打上VLAN id，用于交换机连接终端设备，只允许一个VLAN帧通过。</li>
<li>trunk链路可以放行多个VLAN的流量，用于交换机之间连接。允许多个VLAN通过，除缺省VLAN外其它VLAN都带有标签通过trunk端口。</li>
<li>hybrid端口：允许一个或多个VLAN的帧通过，可以选择是否带标签。</li>
</ul>
<blockquote>
<p>VLAN静态划分的方式是按端口划分的。</p>
</blockquote>
<ul>
<li>GARP通用属性注册协议<br>GVRP协议：VLAN注册协议<br> <em>交换机端口模式：</em><ol>
<li>Normal模式：允许该端口动态注册或注销VLAN，传播动态或静态VLAN信息；</li>
<li>Fixed模式：禁止该端口动态注册或注销VLAN，只传播静态VLAN信息；</li>
<li>Forbidden模式：禁止该端口动态注册或注销VLAN，除VLAN1外，不传播任何VLAN信息；</li>
</ol>
</li>
</ul>
<hr>
<p>VLAN trunk（vlan中继）指在交换机之间或交换机与路由器之间连接的情况下，在互相连接的端口上配置中继模式，使得属于不同vlan的数据帧都可以通过这条中继链路进行传输。</p>
<ul>
<li>VTP指VLAN中继协议,用于交换机设置VLAN。有三种工作模式：</li>
</ul>
<ol>
<li>服务模式：可设置VLAN信息，服务器自动广播所以VLAN信息到其他交换机</li>
<li>客户模式:不能配置VLAN信息，只能接受服务器的VLAN配置。</li>
<li>透明模式：可以配置vlan信息，但不广播自己的vlan信息，接受服务器vlan配置信息后不使用，而是直接转发给其他交换机。</li>
</ol>
<p>交换机初始工作在透明模式下，这个模式下有一个默认的VLAN，所有的端口都属于这个VLAN<br>VTP修剪的作用是减掉不必要的trunk链路上的广播，以提升整个交换网的性能和带宽</p>
<ul>
<li><p>生成树协议：STP<br>删除交换机之间的网络环路，逻辑上断开环路，防止广播风暴的产生,增加了带宽，提高了网络的可靠性。</p>
<ol>
<li>选择根网桥：交换机之间选择网桥ID值最小的。网桥ID组成：网桥优先值2字节（取值范围0~65535，默认32768，越小优先级越高）+网桥mac地址6字节；</li>
<li>选择根端口：从非跟网桥上选择，本端口到根网桥路径成本最低，带宽越小开销越小。网桥ID最小，端口ID最小。端口ID=端口优先级(默认128)+端口编号</li>
<li>选择指定端口：根桥上的端口全是指定端口，所以还需要在非根网桥上选择指定端口，端口所在的网桥路径成本最低，网桥ID较小，端口ID较小。</li>
</ol>
</li>
<li><p>快速生成树协议：RSTP</p>
<ol>
<li>rstp端口角色：根端口，指定端口，替代端口，备份端口；<br>替换端口是对根端口的备份，备份端口是指定端口的备份</li>
<li>rstp端口状态：丢弃，学习，转发。<br>rstp快速收敛机制：</li>
<li>边缘端口机制</li>
<li>根端口快速切换机制</li>
<li>指定端口快速切换机制</li>
</ol>
</li>
<li><p>多生成树协议：MSTP<br>基于实例计算出多棵生成树</p>
</li>
</ul>
<h4 id="以太网通道"><a href="#以太网通道" class="headerlink" title="以太网通道"></a>以太网通道</h4><p>多条链路负载均匀，提高带宽，容错率。<br>LACP链路聚合控制协议<br>PAGP端口聚合协议</p>
<h3 id="广域网"><a href="#广域网" class="headerlink" title="广域网"></a>广域网</h3><ul>
<li><p>交换方式：电路交换，报文交换、分组交换（虚电路、ATM、IP数据报）</p>
</li>
<li><p>广域网技术：</p>
<ol>
<li>HDLC:面向<em>比特</em>的高级数据链路控制协议，是思科私有协议;头尾8bit为01111110;</li>
</ol>
<blockquote>
<p>HDLC中控制字段中第一，二位表示传送帧的类型：第一位为0表示信息帧（I帧），第一，二位为“10”是监控帧（S帧），S帧不带信息字段，“11”为无编号帧（U帧）。第三，四位S帧类型的编码“00”接受就绪（RR）；“01”拒绝（REJ）:用于要求发送方从编号为N开始的帧及其以后的所有的帧进行重传；“10”接收未就绪（RNR）:表示编号小于N的帧已被收到，但目前处于正忙状态，尚未准备好接受第N的帧；“11”选择拒绝（SREJ）:表示其他帧已接收但第N帧需要重发。</p>
</blockquote>
<ol start="2">
<li>PPP协议：点对点协议，面向<em>字符</em>；只检错，不纠错，没有流量控制。提供了一整套协议框架来解决链路建立配置、维护、拆除、上层协议协商和认证等问题；ppp验证方法：密码验证协议PAP、挑战式握手验证协议CHAP。</li>
</ol>
</li>
</ul>
<blockquote>
<p>PPPoE为宽带上网的主机使用的链路层协议</p>
</blockquote>
<ul>
<li><p>常见广域网协议：</p>
<ol>
<li>X.25:使用电话或ISDN设备作为网络硬件设备来构架广域网，建立虚电路，实现可靠交付；</li>
<li>帧中继：第二层建立虚拟电路，只检错，不重传，没有流量控制，但有拥塞控制，把复杂的检错交个高层处理；</li>
<li>ATM异步传输网络：面向连接，将数据分割成固定长度的信元.(采用固定53字节来进行帧分割，称为信元)。采用统计时分复用TDM技术。使用虚电路的虚通路VPI和虚信道VCI作为链路标识.数据速率为155Mb/s</li>
<li>IP数据报</li>
</ol>
</li>
<li><p>流量控制：</p>
<ol>
<li>停等协议：</li>
<li>滑动窗口协议：</li>
<li>停等ARQ协议</li>
<li>选择重发ARQ：其最大值小于帧编号总数的一半，即W发=W收&lt;=2^(k-1)</li>
<li>后退N帧ARQ：限制发送窗口大小为W&lt;=(2^k)-1,(K为帧编号的位数）</li>
</ol>
</li>
</ul>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h4 id="IP网际协议"><a href="#IP网际协议" class="headerlink" title="IP网际协议"></a>IP网际协议</h4><p>IP地址组成：<code>网络号</code>+<code>主机号</code><br>组成：首部+数据部分；</p>
<blockquote>
<p>首部固定20字节,最多60字节，</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>版本4位（ipv4、ipv6）</td>
<td>首部长度4位（二进制5-15）</td>
<td>区分服务8位</td>
<td>总长度16位(首部和数据)</td>
<td></td>
</tr>
<tr>
<td>标识16位(判断是否为同一个数据报)</td>
<td></td>
<td></td>
<td>标志2位(MF=1表示后面还有分片，DF=0表示允许分片)</td>
<td>片偏移14位(字节，从数据部分开始)</td>
</tr>
<tr>
<td>生存时间8位(TTL没经过一个路由器就-1)</td>
<td>协议8位(TCP、UDP)</td>
<td></td>
<td>首部校验和16位(只校验首部)</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>源地址32位</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>目的地址32位</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="ipv4"><a href="#ipv4" class="headerlink" title="ipv4"></a>ipv4</h3><p>ipv4使用32位（四字节）地址。</p>
<table>
<thead>
<tr>
<th></th>
<th>范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>A类地址(0….)</td>
<td>1.0.0.0-127.255.255.255</td>
<td>可用网络号为2^7-1即126个，网络号全0为保留地址，指本网络，网络号127用于环回测试；可用主机号为2^24-2,主机号全0表示该IP地址为本主机所连接到的单个地址，主机号全1表示该网络上的所有主机</td>
</tr>
<tr>
<td>B类(10…)</td>
<td>128.0.0.0-191.255.255.255</td>
<td>可用网络号为2^14-1,因为前两位固定为10，128.0.0.0保留，不可指派；主机号同理</td>
</tr>
<tr>
<td>C类(110..)</td>
<td>192.0.0.0-223.255.255.255</td>
<td>前三位固定110，192.0.0.0不指派，即可用网络号为2^21-1</td>
</tr>
<tr>
<td>D类(1110…)（组播）</td>
<td>224.0.0.1-239.255.255.254</td>
<td></td>
</tr>
<tr>
<td>E类（保留）</td>
<td>240.0.0.0-255.255.255.255</td>
<td></td>
</tr>
<tr>
<td>0.0.0.0-0.255.255.255</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p>私有地址–NAT–公有地址</p>
</blockquote>
<ul>
<li>ipv4私有地址范围：</li>
</ul>
<p>A类中：10.0.0.0-10.255.255.255(网络号：10，网络数：1）</p>
<p>B类：172.16.0.0-172.31.255.255(网络号：172.16~172.31，网络数：16）</p>
<p>C类：192.168.0.0-192.168.255.255(网络号：192.168.0~192.168.255，网络数：256）</p>
<ul>
<li>特殊地址：</li>
</ul>
<p><code>0.0.0.0</code>:在本网络上的本主机，目的地址不可以使用，源地址可以使用</p>
<p><code>127.0.0.1</code>:本地环回地址，用于本地测试</p>
<p><code>255.255.255.255</code>：全网广播地址，源地址不可以使用，目的地址可以；</p>
<p><code>169.254.0.0/16</code>：本地链接地址段</p>
<p><code>169.254.x.x/16</code>:自动专用IP地址（APIPA）</p>
<blockquote>
<p>子网掩码是用来标识两个IP地址是否同属于一个子网。32位长的二进制数值；为1则代表该位是网络位；为0则表示该位是主机位；</p>
</blockquote>
<ul>
<li>单播地址：</li>
<li>组播地址：tcp/ip协议使用的以太网多播地址块范围为224.0.0.0-239.255.255.255；组播地址只能用于目的地址，不能用于源地址</li>
<li>广播地址：</li>
</ul>
<h3 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h3><ul>
<li><p>优点：<br>更大的地址空间:128位地址<br>更灵活的首部格式等</p>
</li>
<li><p>地址表示：16进制</p>
<ul>
<li>删除一个或多个前导零，零连续部分用双冒号表示，但只能使用一次</li>
<li>每个设备在启用ipv6时会自动配置一个链路本地地址：<code>FE80::110</code>,其用于邻居发现，因为ipv6中没有了广播，ARP协议不能用。链路本地地址以<code>FE80</code>开头，路由器不会转发链路本地地址</li>
<li>环路地址：<code>::1</code></li>
<li>多播地址：<code>FF00::</code></li>
</ul>
</li>
<li><p>ipv6地址类型：</p>
<ul>
<li>单播：48位全球路由选择器前缀+16位子网标识符+64位接口标识符（mac地址）</li>
<li>多播：组播地址在ipv6包中不能用作源地址。</li>
<li>任播：用来标识一组网络接口，路由器会将目标地址是任播地址的数据包发给距本路由最近的一个网络接口；</li>
</ul>
</li>
<li><p>ipv6特殊地址</p>
<ol>
<li>与ipv4兼容地址：0:0:0:0:0:0:w.x.y.z</li>
<li>ipv4映射地址：0:0:0:0:0:FFFF:w.x.y.z</li>
</ol>
</li>
<li><p>ipv6协议过渡方案：<br>双协议栈，隧道技术，网络地址转换技术；</p>
</li>
</ul>
<h4 id="子网划分-可变长子网掩码-VLSM"><a href="#子网划分-可变长子网掩码-VLSM" class="headerlink" title="子网划分:可变长子网掩码(VLSM)"></a>子网划分:可变长子网掩码(VLSM)</h4><p><em>子网划分：使两级ip地址变成三级ip地址；只是把主机号这部分进行再划分，增加了灵活性，减少了主机总数</em><br>IP地址={《网络号》，《子网号》，《主机号》}</p>
<blockquote>
<p>进行子网划分后，路由器提取数据报首部提取IP地址与子网掩码相与（一一为一）；</p>
</blockquote>
<ul>
<li>无分类编址CIDR记法：<br>消除了传统A、B、C类网络以及子网划分的概念：IP地址={《网络前缀》，《主机号》}</li>
</ul>
<blockquote>
<p>如192.168.1.0/26，其网络位是26位，主机位为6位，主机全为0是网络ID,不是有效主机地址；主机位全为1为此网络ID的广播地址；有效主机IP数量为2^m-2;</p>
</blockquote>
<ul>
<li>路由汇聚：选择网络地址相同的位进行汇聚，不同的位划分至主机位，从而实现将多个网段汇聚成一个新的超网网段。<br>最佳路由匹配原则：查找路由表时应当选择具有最长前缀的路由，网络的前缀越长，其地址块越小。</li>
</ul>
<blockquote>
<p>使用路由汇聚时，路由表中的每个项目由‘网络前缀’和‘下一条地址’组成，因此查找路由表时可能会得到不止一个匹配结果，此时应当选择具有最长网络前缀的路由，因为网络前缀越长，其地址块越小，因而路由就越具体。</p>
</blockquote>
<p>路由汇聚是把小网段中网络位一模一样的位数全部保留，网络位不一样的全部变成主机位；汇聚后主机位有32-n位；其中有效地址个数为2的n次方减2。</p>
<p>汇聚地址块120.64.4.0/22的ip地址范围为120.64.4.0/22-120.64.7.255/22其中120.64.6.0/22为汇聚网络ID，120.64.7.255/22为广播地址</p>
<h3 id="网际控制报文协议ICMP"><a href="#网际控制报文协议ICMP" class="headerlink" title="网际控制报文协议ICMP"></a>网际控制报文协议ICMP</h3><blockquote>
<p>封装在IP数据报中，作为数据部分</p>
</blockquote>
<ul>
<li>ICMP差错报告报文：<ul>
<li>终点不可达</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由</li>
</ul>
</li>
<li>ICMP询问报文：<ul>
<li>回送请求与问答</li>
<li>时间戳请求与问答</li>
</ul>
</li>
</ul>
<ol>
<li>对ICMP差错报告报文不再发送ICMP差错报告报文</li>
<li>对特殊地址0.0.0.0或127.0.0.0等的数据报不发送ICMP差错报告报文</li>
<li>对具有多播地址的数据报不发送</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送</li>
</ol>
<ul>
<li>应用：<ul>
<li>ping命令</li>
<li>traceroute、tracert命令</li>
</ul>
</li>
</ul>
<h3 id="IGMP-网际组管理协议"><a href="#IGMP-网际组管理协议" class="headerlink" title="IGMP:网际组管理协议"></a>IGMP:网际组管理协议</h3><p>IP多播需要使用网际组管理协议IGMP和多播路由选择协议</p>
<h3 id="ARP地址解析协议"><a href="#ARP地址解析协议" class="headerlink" title="ARP地址解析协议"></a>ARP地址解析协议</h3><p>ARP位于OSI模型的网络层。ARP从已知的IP地址中找到主机的硬件地址。一台设备将数据报发送到另一台设备之前，它会查看其ARP缓存以查看目标设备是否存在MAC地址和相应的IP地址。如果没有，源设备将发送广播地址给网络中的每一台设备，每个设备都将自己的IP地址与其进行比较，只有具有匹配IP地址的设备才会回复包含该设备MAC地址的数据包，然后源设备会添加目标设备MAC地址放入到ARP表以供参考。</p>
<blockquote>
<p>ARP协议数据封装在以太帧中进行传输，ICMP协议数据封装在IP数据包中，RIP封装在UDP报中。</p>
</blockquote>
<h3 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h3><blockquote>
<p>互联网太过于庞大，因此划分为许多较小的自治系统AS。</p>
</blockquote>
<ul>
<li>静态路由协议</li>
</ul>
<p>配置形式：目标网络+对应掩码+下一跳地址（本地出接口）<br>动态路由协议</p>
<ul>
<li><p>RIP路由协议：距离矢量路由协议。基于UDP的520端口发送信息；路由协议优先级为100；经过节点最多不能超过15跳，经16跳的任何分组都将被路由器丢弃；只会和邻居路由器交换路由表信息；路由器更新周期为30s.每次路由更新最多承载25调路由；解决路由环路的方法:水平分割；毒性反转；触发更新；抑制计时器。</p>
</li>
<li><p>距离向量算法：</p>
<ol>
<li>收到邻居路由表时，邻居路由表跳数全部+1，下一跳路由器为它自己。</li>
<li>与自己路由表比较，目的地址下一跳为它的，则更新跳数，不论多少。</li>
<li>目的地址下一跳不是它的，则比较跳数,谁短要谁。</li>
<li>条目没有的则直接添加</li>
</ol>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>RIPv1</th>
<th>RIPv2</th>
</tr>
</thead>
<tbody><tr>
<td>有无路由协议</td>
<td>有</td>
<td>无</td>
</tr>
<tr>
<td>是否支持可变子网掩码VLSM与CIDR</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>是否支持认证</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>更新类型</td>
<td>广播</td>
<td>组网</td>
</tr>
</tbody></table>
<ul>
<li>OSPF路由协议:</li>
</ul>
<p>链路状态路由器协议；OSPF报文封装在IP层，协议号为89作为标识，优先级为10。OSPF路由器所发的信息是与本路由相邻的所有路由器的链路状态。每个路由器都存在有全网的链路状态信息。当链路发生变化时才用泛洪法发送LSU分组更新路由链路信息。通过244.0.0.5与244.0.0.6发送hello报文(LSA分组)确定邻居路由是否连通（默认10s）。OSPF采用Dijkstra算法计算最佳路径.</p>
<p>ospf将自治系统划分为多个区域，每个区域被指定了一个32位的区域标识符，可用点分十进制表示，如0.0.0.0。单域ospf网络只有主干区域网络（配置成区域0）。OSPF的区域分为五种：<br>1.标准区域：可接受任何链路更新信息和路由汇总信息<br>2.主干区域：其他区域都通过主干区域交换路由信息。主干区域拥有标准区域的所有性质<br>3.存根区域：不接受本地自治系统以外的路由信息，对自治系统以外的区域的目标采用默认路由0.0.0.0</p>
<p>OSPF协议相对于RIP的优势：没有跳数的限制，支持可变长子网掩码。支持网络规模大，收敛速度快。不过RIP2也支持可变长子网掩码（VLSM）</p>
<ul>
<li>OSPF定义了4种网络：</li>
</ul>
<ol>
<li><p>广播多址网络：具有共享介质的局域网(以太网Ethernet、 Token Ring、FDDI)</p>
</li>
<li><p>非广播多址网络：通过组播的方式传播信息(X.25、Frame Relay、SMDS；)</p>
</li>
<li><p>点到点网络：点到点可字节交换路由信息(PPP、HDLC、)</p>
</li>
<li><p>点到多网络：把非广播网络当作多条点对点网络来使用，从而把一条路由信息发送到不同目标(RARP)</p>
</li>
<li><p>BGP路由协议；边界网关协议。采用路径向量路由协议，寻找较好的路由。适用于自治域（AS）间的路由。通过TCP，179端口建立关系；封装在tcp报文中。防环机制：EBGP=&gt;通过AS-Path属性防环；IBGP=&gt;;</p>
</li>
</ol>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><h3 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h3><p>特点：无连接，尽最大努力交付，面向报文，首部开销小（8字节），支持1对多,没有拥塞控制，</p>
<p><em>首部（源端口2字节，目的端口2字节，长度2字节(数据长度)，校验和2字节）+数据</em></p>
<p>UDP检验，添加伪首部，变成二进制，相加后取反放入校验和。</p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>特点：面向连接，每一条连接只有两个端点，可靠交付，全双工通信，面向字节流</p>
<ul>
<li><p>TCP连接的端点叫套接字：socket=（IP地址：端口号）<br>TCP连接={socket1，socket2}</p>
</li>
<li><p>可靠传输：</p>
<ul>
<li>停止等待协议：发送一个分组停止发送，等待对方确认后再发送下一个分组。</li>
<li>连续ARQ协议（滑动窗口）(后退N帧)：同时发送多个分组，每收到一个确认就把发送窗口移动一个分组。接收方收到多个分组，会对按序到达的最后一个分组发送确认表示前面的分组已经正确收到。缺点：当中间分组丢失时，会抛弃之后的分组，对前面的分组发送确认。发送方需要把之后的重新发送。</li>
</ul>
</li>
<li><p>首部（最小20字节)+数据</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>源端口16位</td>
<td>目的端口16位</td>
<td></td>
</tr>
<tr>
<td></td>
<td>序号32位(一个字节流中每一个字节都按序编号)</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>确认号32位(期待对方下一个报文段的第一个数据字节的序号)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>数据偏移4位(距离首部开头)</td>
<td>保留4位</td>
<td>2位:ACK（为1时确认号才有效）、URG（为1时，紧急指针才有效）、PSH（尽快交付给上层应用）、RST（TCP连接出现严重错误时重新建立连接）、SYN（建立连接时用来同步序号，置1表示连接请求）、FIN（置1表示释放连接）</td>
<td>窗口16位(自己的窗口)</td>
</tr>
<tr>
<td></td>
<td>校验和16位</td>
<td>紧急指针16位(紧急数据字节数、位置)</td>
<td></td>
</tr>
</tbody></table>
<p>三次握手，四次断开</p>
<blockquote>
<p>客户端收到服务器发送的释放连接报文后，必须对此发送确认。并且经过时间等待计时器（TIME-WAIT)设置的时间2MSL（最长报文段寿命）后，客户端才进入关闭状态。</p>
</blockquote>
<ul>
<li><p>状态：</p>
<ul>
<li><code>LISTEN</code>:服务器等待连接</li>
<li><code>SYN_SENT</code>:客户端发起连接，</li>
<li><code>SYN_RCVD</code>:服务器收到SYN包</li>
<li><code>ESTABLISHED</code>:完成三次握手，可以开始传输数据</li>
</ul>
</li>
<li><p>流量控制：可变窗口(单位位字节）</p>
</li>
<li><p>拥塞和控制：<br>判断网络拥塞的依据就是出现<em>超时</em></p>
<ul>
<li>慢开始，拥塞避免，<ol>
<li>刚开始发送时设置初始拥塞窗口为1到2个发送方最大报文段（SMSS）</li>
<li>慢开始：从0以指数增长</li>
<li>拥塞避免：到达初始拥塞窗口则成线性增长</li>
<li>网络拥塞即遇到超时，初始拥塞窗口设置为出现拥塞时的1/2</li>
<li>从0进行慢开始</li>
</ol>
</li>
<li>快重传，快恢复<ol>
<li>快重传： 执行拥塞避免时一连收到3个同样的ack，则初始拥塞窗口设置为当前的1/2</li>
<li>快恢复：从初始拥塞窗口开始，继续执行拥塞避免</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="传输层端口-16位"><a href="#传输层端口-16位" class="headerlink" title="传输层端口(16位)"></a>传输层端口(16位)</h3><ul>
<li>熟知端口：0~1023<br><code>ftp</code>：数据20，控制21<br><code>tftp</code>:69<br><code>http</code>：80<br><code>https</code>：443<br><code>telnet</code>：23<br><code>SMTP</code>：25<br><code>pop3</code>:110<br><code>DNS</code>:53<br><code>DHCP</code>：服务端67，客户端68<br><code>SNMP</code>：udp协议；轮询161端口,发送请求和应答，陷阱162</li>
<li>登记端口：1024~49151</li>
<li>客户端端口：49152~65535</li>
</ul>
<h3 id="DNS域名系统"><a href="#DNS域名系统" class="headerlink" title="DNS域名系统"></a>DNS域名系统</h3><ul>
<li>名称解析的方法：Host表、DNS系统</li>
</ul>
<p>DNS系统实现将域名和ip地址进行映射，提供解析的分布式数据库服务</p>
<ul>
<li><p>分类：<br>主域名服务器（权威域名服务器）<br>辅助域名服务器（从域名服务器）<br>转发域名服务器</p>
</li>
<li><p>解析过程：<br>本地解析，迭代解析，递归解析</p>
</li>
<li><p>资源记录：<br>SOA:定义该区域中的哪个名称服务器为主域名服务器（权威域名服务器）<br>NS:表示该区域中的所有域名服务器<br>A：列出域名到IP地址的映射<br>PTR：IP地址到域名的映射<br>MX：邮件交换器信息<br>CNAME：别名记录</p>
</li>
</ul>
<h3 id="DHCP服务"><a href="#DHCP服务" class="headerlink" title="DHCP服务"></a>DHCP服务</h3><p>客户端（68）服务端（67）<br><code>Dhcpdiscover</code>：客户端ip租用请求<br><code>Dhcpoffer</code>:服务端分配ip<br><code>Dhcprequest</code>:客户端接受<br><code>Dhcpack</code>:服务端确认<br><code>Dhcpdecline</code>:客户端发现服务端分配的ip无法使用</p>
<h3 id="服务质量QOS"><a href="#服务质量QOS" class="headerlink" title="服务质量QOS"></a>服务质量QOS</h3><p>用来解决网路延迟和阻塞问题的一种技术。用于区分流量，保证重要流量及时被转发</p>
<ol>
<li>尽力而为服务模型：先进先出</li>
<li>综合服务模型：提前申请网络资源</li>
<li>区分服务模型: 不预留资源，通过多种方式之指定报文的QOS</li>
</ol>
<h3 id="电子邮件服务"><a href="#电子邮件服务" class="headerlink" title="电子邮件服务"></a>电子邮件服务</h3><p>客户端：发送STMP-》STMP-》接收POP3<br>网页：http-》STMP-》http</p>
<ul>
<li><p>pops:电子邮件客户端上的操作不反馈到服务器上</p>
</li>
<li><p>IMAP：能同步到服务器上</p>
</li>
<li><p>MIME:多用途互联网邮件扩展，支持图片，视频，声音</p>
</li>
</ul>
<h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p>HTTP的URL的一般协议:<code>http://主机:端口/路径</code></p>
<ol>
<li>浏览器分析超链接指向页面的URL.</li>
<li>浏览器向dns请求解析网址</li>
<li>域名系统dns解析出网址的ip地址</li>
<li>浏览器与服务器建立TCP连接</li>
<li>浏览器发出取文件命令:GET/xx/index.htm</li>
<li>服务器给出响应</li>
<li>TCP连接释放</li>
<li>浏览器显示页面</li>
</ol>
<h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><ol>
<li>系统病毒：传染性，潜伏性，破坏性。前缀：win95</li>
<li>网络蠕虫：不需要用户触发，基本模块：目标搜索模块，攻击模块；前缀worm</li>
<li>木马：隐蔽性，木马本身不带有破坏性，服务端位于被攻击的主机上,用于夺取计算机控制权。前缀：Trojan</li>
<li>后门：一般在黑客初次取得控制权后，留下后门便于下次入侵。前缀：Backdoor</li>
<li>黑客：前缀：Hack</li>
<li>宏病毒：只感染office。前缀：macro</li>
<li>vb脚本病毒：浏览器，前缀：script</li>
</ol>
<h3 id="网络攻击"><a href="#网络攻击" class="headerlink" title="网络攻击"></a>网络攻击</h3><ol>
<li>主动攻击：<ol>
<li>拒绝服务攻击DOS：消耗资源，破坏配置如ping泛洪、缓冲区溢出、<br>ARP欺骗攻击：通过wireshark中的协议这栏，看到有大量ARP报文，说明可能遭遇ARP病毒的攻击。可通过<code>arp -s</code>设置静态储存表解决。</li>
<li>分布式拒绝服务DDOs：控制一些计算机后，向攻击目标统一发起拒绝服务攻击（SYNFlooding)</li>
<li>ping of Death攻击：通过ping发送的ICMP的echo请求消息</li>
</ol>
</li>
<li>被动攻击：</li>
</ol>
<p>收集信息而不进行访问：嗅探、信息收集、端口扫描</p>
<h3 id="网络安全设备"><a href="#网络安全设备" class="headerlink" title="网络安全设备"></a>网络安全设备</h3><ol>
<li>防火墙： 具有访问控制功能，内容控制功能；对内部网络的攻击无能为力。</li>
<li>IDS入侵检测系统：积极主动的安全防护工具，只能发出警告</li>
<li>IPS入侵防护系统：提供实时的防护，自动拦截</li>
</ol>
<h3 id="加密技术"><a href="#加密技术" class="headerlink" title="加密技术"></a>加密技术</h3><ul>
<li>对称加密(加密秘钥与解密秘钥相同,秘钥需要事先约定或通过信使传送或用高度安全的密钥分配中心KDC分配):(数字加密标准)DES(56位）、(三重DES)3DES（第一次和第三次加密秘钥一样,112位）、IDEA、AES</li>
<li>非对称加密(公钥密码体系):RSA、ECC、Rabin、EIGamal、背包加密<ul>
<li>数字签名：基于非对称加密(私钥生成)，主要用于报文鉴定，不可否认、报文完整性<br>报文摘要算法：MD5：128位输出。SHA：160位输出</li>
<li>数字证书(数字标识):由证书鉴证机关（CA）签发的对用户<em>公钥</em>的认证。采用X.509 V3标准，内容包含：公钥、发行者签名、证书序列号等</li>
</ul>
</li>
<li>安全协议SSL：功能有SSL服务器鉴别、加密的SSL会话、SSL客户鉴别</li>
<li>安全协议PGP：对邮件报文摘要加密后组成的报文再次进行加密，然后传输。pgp不是一种完全的非对称加密体系，它是由一个对称加密算法IDEA,一个非对称加密算法RSA，一个单向散列算法MD5组成的混合加密算法。</li>
<li>SNMPv3把对网络协议的安全威胁分为主要和次要两类：<br>主要：<br>修改信息，<br>假冒<br>修改报文流<br>消息泄露<br>次要：<br>拒绝服务<br>通信分析。</li>
</ul>
<h3 id="知识产权"><a href="#知识产权" class="headerlink" title="知识产权"></a>知识产权</h3><ul>
<li><p>产权人的确定：<br>利用单位的物质条件进行创作、或有合同约定、或在本职工作中活动的结果：除署名权外其他著作权归单位。<br>本职工作中作出的发明、离职一年内、履行本职工作之外的任务所作出的发明：单位享有专利</p>
</li>
<li><p>保护期限：<br>公民的署名权、修改权、完整权没有限制,发表权、使用权、获得报酬权为死后50年<br>单位的发表权、使用权、获得报酬权为50年<br>注册商标有效期为10年，发明专利权为20年、实用新型和外观设计专利为10年</p>
</li>
</ul>
<h3 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h3><ul>
<li><p>Pathping :显示通信线路上每个子网的延迟和丢包率</p>
</li>
<li><p>Nslookup:用于查询internet域名信息或诊断dns服务器问题的工具</p>
</li>
<li><p>netstart<br><code>-r命令</code>：显示路由记录<br><code>a</code>:显示所有连接和监听端口<br><code>-e</code>:显示以太网统计信息<br><code>-s</code>:显示按协议统计信息<br><code>-n</code>:以数字形式显示地址和端口号<br><code>-o</code>：显示与每个连接相关的所属进程ID</p>
</li>
<li><p>Tracert：跟踪路由,通过多次向目标发送ICMP回声（echo）请求报文，每一次增加IP头中的TTL字段的值，从而确定到达各个路由器的时间。<br><code>-d</code>不进行名字解析，只显示中间节点的IP地址</p>
</li>
<li><p>route print；查看路由表命令</p>
</li>
<li><p>ping：发生ICMP回声请求报文检验与另一个计算机的连接<br><code>-t</code>:持续发送请求，直到Ctrl+C<br><code>-l</code>:显示目标IP域名：指定数据包大小<br><code>-a</code>:用ip地址表示目标，进行反向主机名字解析<br><code>-n 数字</code>:说明发送回声请求的次数，默认4次</p>
</li>
<li><p>ipconfig<br><code>/all</code>:显示本机TCP/IP配置<br><code>/release</code>:DHCP客户端手动释放IP地址<br><code>/renew</code>:DHCP客户端手动向服务器刷新请求<br><code>/flushdns</code>:清除本地DNS缓存内容<br><code>/displaydns</code>:显示本地DNS缓存内容</p>
</li>
<li><p>route:添加路由</p>
</li>
</ul>
<h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><ul>
<li><p>目录</p>
<ul>
<li>/etc/hosts:配置ip地址和对应主机名的文件</li>
<li>/etc/hostname:系统的主机名称，域名</li>
<li>/etc/resolv.conf:为DNS的配置文件</li>
<li>/etc/gateway:路由表文件</li>
<li>/etc/inetd.conf:是tcp/ip服务配置文件</li>
<li>/etc/lilo.conf:加载配置为你阿基诺</li>
<li>/etc/httpd/conf/httpdxonf:Web服务器主配置文件</li>
</ul>
</li>
<li><p>命令</p>
</li>
</ul>
<p>查看文件内容:</p>
<ul>
<li>cat：一次性全部输出</li>
<li>more：分页</li>
<li>less：可上下移动一行</li>
</ul>
<h3 id="综合布线系统"><a href="#综合布线系统" class="headerlink" title="综合布线系统"></a>综合布线系统</h3><ul>
<li>工作区子系统：连接用户终端设备的子系统，如电脑和网线接口之间的部分</li>
<li>水平子系统：连接工作区与主干的子系统，如楼层弱电井里的配线架到每个房间的网卡接口之间的部分。(插座接口到配线架之间）</li>
<li>管理子系统：对布线电缆进行端接及配置管理的子系统，如配线间中的设备部分(配线架)</li>
<li>干线子系统：连接管理间、设备间的子系统，如将接入层交换机连接到分布层交换机的网络线路(楼层之间）</li>
<li>设备间子系统：核心交换机所在的位置就是设备间(机房）</li>
<li>建筑群主干子系统：地下管道、直埋沟内、架空(建筑之间)</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2020/12/18/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/18/20-00-00/" class="post-title-link" itemprop="url">markdown语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-18 20:00:00" itemprop="dateCreated datePublished" datetime="2020-12-18T20:00:00+08:00">2020-12-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 这是一级标题</span></span><br><span class="line"><span class="section">## 这是二级标题</span></span><br><span class="line"><span class="section">### 这是三级标题</span></span><br><span class="line"><span class="section">#### 这是四级标题</span></span><br><span class="line"><span class="section">##### 这是五级标题</span></span><br><span class="line"><span class="section">###### 这是六级标题</span></span><br><span class="line">井号与标题间有空格</span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong></p>
<h1 id="这是一级标题"><a href="#这是一级标题" class="headerlink" title="这是一级标题"></a>这是一级标题</h1><h2 id="这是二级标题"><a href="#这是二级标题" class="headerlink" title="这是二级标题"></a>这是二级标题</h2><h3 id="这是三级标题"><a href="#这是三级标题" class="headerlink" title="这是三级标题"></a>这是三级标题</h3><h4 id="这是四级标题"><a href="#这是四级标题" class="headerlink" title="这是四级标题"></a>这是四级标题</h4><h5 id="这是五级标题"><a href="#这是五级标题" class="headerlink" title="这是五级标题"></a>这是五级标题</h5><h6 id="这是六级标题"><a href="#这是六级标题" class="headerlink" title="这是六级标题"></a>这是六级标题</h6><hr>
<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**这是加粗的文字**</span></span><br><span class="line"></span><br><span class="line"><span class="emphasis">*这是倾斜的文字*</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*这是斜体加粗的文字*</span>**</span></span><br><span class="line"></span><br><span class="line">~~这是加删除线的文字~~</span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong><br><strong>这是加粗的文字</strong><br><em>这是倾斜的文字</em>`<br><em><strong>这是斜体加粗的文字</strong></em><br><del>这是加删除线的文字</del></p>
<hr>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;这是引用的内容</span><br><span class="line"></span><br><span class="line">&gt;&gt;这是引用的内容</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;这是引用的内容</span><br><span class="line">在被引用的文本前加上&gt;符号，以及一个空格就可以了</span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong></p>
<blockquote>
<p>这是引用的内容</p>
<blockquote>
<p>这是引用的内容</p>
<blockquote>
<p>这是引用的内容</p>
</blockquote>
</blockquote>
</blockquote>
<hr>
<h2 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure>

<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">简书</span>](<span class="link">http://jianshu.com</span>)</span><br><span class="line">[<span class="string">百度</span>](<span class="link">http://baidu.com</span>)</span><br></pre></td></tr></table></figure>

<p><strong>效果:</strong><br><a target="_blank" rel="noopener" href="http://jianshu.com/">简书</a><br><a target="_blank" rel="noopener" href="http://baidu.com/">百度</a></p>
<hr>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 列表内容</span><br><span class="line"><span class="bullet">+</span> 列表内容</span><br><span class="line"><span class="bullet">*</span> 列表内容</span><br><span class="line"><span class="bullet">1.</span> 列表内容 </span><br><span class="line">\+ 列表内容 </span><br><span class="line">前面加反斜线\即可显示符号本身     </span><br><span class="line"><span class="bullet">2.</span> 列表内容</span><br><span class="line">注意：序号跟内容之间要有空格</span><br><span class="line"><span class="bullet">3.</span> 列表内容</span><br><span class="line"><span class="bullet">  4.</span> 列表嵌套</span><br><span class="line">上一级和下一级之间敲三个空格即可</span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong></p>
<ul>
<li><p>列表内容</p>
</li>
<li><p>列表内容</p>
</li>
<li><p>列表内容</p>
</li>
</ul>
<ol>
<li>列表内容<br>+ 列表内容</li>
<li>列表内容</li>
<li>列表内容<ol start="4">
<li>列表嵌套</li>
</ol>
</li>
</ol>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="code">`代码内容`</span></span><br><span class="line"></span><br><span class="line">单行代码：代码之间分别用一个反引号包起来</span><br><span class="line"></span><br><span class="line"> \<span class="code">```</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"> 代码块</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code"> \```</span></span><br><span class="line"></span><br><span class="line">代码块：代码之间分别用三个反引号包起来，且两边的反引号单独占一行或者缩进 4 个空格或是 1 个制表符</span><br></pre></td></tr></table></figure>

<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|商品|数量|单价|</span><br><span class="line">|-|-------:|:------:|</span><br><span class="line">|:苹果:|10|\$1|</span><br><span class="line">|:电脑|1|\$1000|</span><br><span class="line">冒号在左边表示左对齐，右边表示有对齐，两边都有表示居中。</span><br></pre></td></tr></table></figure>

<p><strong>效果：</strong></p>
<table>
<thead>
<tr>
<th>商品</th>
<th align="right">数量</th>
<th align="center">单价</th>
</tr>
</thead>
<tbody><tr>
<td>:苹果:</td>
<td align="right">10</td>
<td align="center">$1</td>
</tr>
<tr>
<td>:电脑</td>
<td align="right">1</td>
<td align="center">$1000</td>
</tr>
</tbody></table>
<hr>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><h2 id="链接写法：-lt-http-baidu-com-gt"><a href="#链接写法：-lt-http-baidu-com-gt" class="headerlink" title="链接写法：&lt;http://baidu.com&gt;"></a><code>链接写法：&lt;http://baidu.com&gt;</code></h2><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">文本</span>](<span class="link">图片地址 &quot;可选标题&quot;</span>) </span><br><span class="line">开头一个感叹号 !</span><br><span class="line">接着一个方括号，里面放上图片的替代文字</span><br><span class="line">接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上选择性的 &#x27;title&#x27; 属性的文字。</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2020/12/12/12-12-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/12/12-12-12/" class="post-title-link" itemprop="url">git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-12 12:12:12" itemprop="dateCreated datePublished" datetime="2020-12-12T12:12:12+08:00">2020-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-26 21:33:51" itemprop="dateModified" datetime="2023-09-26T21:33:51+08:00">2023-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装-git"><a href="#安装-git" class="headerlink" title="安装 git"></a>安装 git</h2><p><code>sudo apt-get install git</code></p>
<h2 id="配置-git"><a href="#配置-git" class="headerlink" title="配置 git"></a>配置 git</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;用户名&quot;</span>               //个人账号</span><br><span class="line">git config --global user.email 123456@qq.com         //个人邮箱地址</span><br><span class="line"><span class="comment"># 上面的--global选项,表示以后管理git库时,默认使用上面的用户信息,也可以通过git config -l 来查看配置信息</span></span><br></pre></td></tr></table></figure>

<h2 id="git-命令"><a href="#git-命令" class="headerlink" title="git 命令"></a>git 命令</h2><p>对当前目录进行 git 管理,该目录便会成为工作区,并在当前目录下会出现个.git 隐藏目录.<br>该.git 里会保存 git 所需要的数据和资源,也就是 git 仓库和暂存区都会保存在.git 里</p>
<ul>
<li><code>git init</code> 本地初始化，建立缓存区</li>
</ul>
<p>由于 git clone 会自动生成.git 隐藏目录,所以上面无需 git init 命令初始化。<br>而且.git 目录里保存了远程仓库地址,所以上面无需 git remote 命令连接远端。</p>
<ul>
<li><p><code>git add filename</code><br>将暂存区里的文件提交到本地仓库,若暂存区某个文件被删除掉,则会删除仓库里的文件。加参数 -a:跳过暂存区,git 自动将工作区里记录的所有文件添加到暂存区并一起提交,从而跳过 git add 步骤<br>将工作区修改的文件添加到暂存区也可以使用<code>git add .</code> 将所有修改的文件进行添加;或<code>git add *</code>提交所有文件。</p>
</li>
<li><p><code>git rm filename</code><br>将暂存区的文件删除掉,若工作区文件存在,则需要使用<code>git rm -f file</code>来强制删除掉,</p>
</li>
<li><p><code>git commit -m &quot;your description&quot;</code><br>为本次操作添加描述</p>
</li>
<li><p><code>git clone https://......</code><br>克隆复制远程仓库到当前目录</p>
</li>
<li><p><code>git status</code><br>查看工作目录下文件的状态</p>
</li>
<li><p><code>git checkout filename</code><br>从暂存区恢复文件到工作区</p>
</li>
<li><p><code>git diff</code><br>查看工作区和暂存区版本区别</p>
</li>
<li><p><code>git log</code><br>查看已提交到暂存区的历史版本</p>
</li>
<li><p><code>git reset --hard 版本号</code><br>恢复文件到指定的版本</p>
</li>
</ul>
<p>-<code>git remote add origin https://.......</code><br>添加远程仓库(origin),也就是关联本地仓库和 github 仓库</p>
<ul>
<li><p><code>git push origin 分支</code><br>推送(同步)数据到远程仓库,若是本地上传,必须先使用上个命令来指定远程仓库地址(origin),<br>若是从远程仓库克隆复制的,则不需要,因为.git 里会自动保存远程仓库地址.</p>
</li>
<li><p><code>git pull</code><br>从远程仓库中同步代码</p>
</li>
</ul>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul>
<li>git 提交=报错 443</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取消代理</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment">#刷新dns</span></span><br><span class="line">ipconfig /flushdns</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
