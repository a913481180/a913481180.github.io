<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.baidu.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="KK">
<meta property="og:url" content="http://www.baidu.com/index.html">
<meta property="og:site_name" content="KK">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="KK">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.baidu.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>KK</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">KK</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2023/02/22/11-12-56/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/22/11-12-56/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-22 11:12:56" itemprop="dateCreated datePublished" datetime="2023-02-22T11:12:56+08:00">2023-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-20 23:13:35" itemprop="dateModified" datetime="2023-02-20T23:13:35+08:00">2023-02-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前端规范2022"><a href="#前端规范2022" class="headerlink" title="前端规范2022"></a>前端规范2022</h1><h2 id="一、命名规范"><a href="#一、命名规范" class="headerlink" title="一、命名规范"></a>一、命名规范</h2><h3 id="1-项目命名"><a href="#1-项目命名" class="headerlink" title="1.项目命名"></a>1.项目命名</h3><p>全部采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</p>
<p>正例： <code>my-project-name</code></p>
<p>反例：<code>my_project_name / myProjectName</code></p>
<h3 id="2-目录命名"><a href="#2-目录命名" class="headerlink" title="2.目录命名"></a>2.目录命名</h3><ul>
<li>全部采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</li>
<li>有复数结构时，要采用复数命名法，缩写不用复数。</li>
</ul>
<p>正例：<code>scripts/styles/components/images/assets/views/utils/custom-themes/layout/img/doc/api/router</code></p>
<p>反例：<code>script / style /util / imgs / docs / apis / routers</code></p>
<h3 id="3-文件命名"><a href="#3-文件命名" class="headerlink" title="3.文件命名"></a>3.文件命名</h3><p>全部采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</p>
<p>正例：<code>render-dom.js / home.css / home-banner.png</code><br>反例：<code>renderDom.js / Home.css / homeBanner.png</code></p>
<h3 id="4-命名严谨性"><a href="#4-命名严谨性" class="headerlink" title="4.命名严谨性"></a>4.命名严谨性</h3><ul>
<li>命名严禁拼音和英文混合方式，更不允许直接使用中文。</li>
<li>地名或者国际通用名称，可以视同英文。</li>
<li>使用有意义且规范的缩写，避免望文不知义。</li>
</ul>
<p>正例：</p>
<p><code>rmb / shenzhen / guangdong / henan / wuhan logout / login / err / res</code><br>反例：</p>
<p><code>daZhePromotion 打折 / getPingFen 获得评分 / let 年龄 = 3 AbstractClass 缩写为 AbsClass / CalculateAmount 缩写为 CaAmount</code></p>
<h2 id="二、HTML规范"><a href="#二、HTML规范" class="headerlink" title="二、HTML规范"></a>二、HTML规范</h2><h3 id="1-声明规范"><a href="#1-声明规范" class="headerlink" title="1.声明规范"></a>1.声明规范</h3><h4 id="1-1声明文档类型"><a href="#1-1声明文档类型" class="headerlink" title="1.1声明文档类型"></a>1.1声明文档类型</h4><p>文档类型声明位于<code>HTML</code>文档的第一行，大小写必须遵守。</p>
<p>正例：<code>&lt;!DOCTYPE html&gt;</code></p>
<p>反例：<code>&lt;!doctype html&gt;</code></p>
<h4 id="1-2声明charset"><a href="#1-2声明charset" class="headerlink" title="1.2声明charset"></a>1.2声明charset</h4><p>必须在文档中声明编码集<code>charset</code> ，且文件本身编码需要保持一致，推荐都使用<code>utf-8</code>。制定字符编码的<code>meta</code>必须是<code>head</code>中的第一个元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3声明meta"><a href="#1-3声明meta" class="headerlink" title="1.3声明meta"></a>1.3声明meta</h4><p>在<code>head</code>中声明，跟随在<code>charset</code>之后，且自闭合标签。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;your keywords&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;this is a description&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4声明title"><a href="#1-4声明title" class="headerlink" title="1.4声明title"></a>1.4声明title</h4><p>必须声明<code>title</code>，且紧随最后一个<code>meta</code>之后。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;your keywords&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;this is a description&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-5声明link"><a href="#1-5声明link" class="headerlink" title="1.5声明link"></a>1.5声明link</h4><p>引入了外部样式，紧随<code>title</code>之后，同时网站的标签也需要设置<code>icon</code>图标。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;your keywords&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;this is a description&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://xxx.com/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;http://xxx.com/index.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-6声明script"><a href="#1-6声明script" class="headerlink" title="1.6声明script"></a>1.6声明script</h4><p>由于 <code>js</code> 加载会阻塞页面渲染，<code>script</code> 元素需要声明在 <code>body</code> 标签的尾部，并且是需要闭合标签的。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://xxx.com/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-7模板示例"><a href="#1-7模板示例" class="headerlink" title="1.7模板示例"></a>1.7模板示例</h4><p>以下是一个整合后 <code>html</code> 代码规范示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;your keywords&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;this is a description&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;http://xxx.com/index.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载脚本 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://xxx.com/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-代码规范"><a href="#2-代码规范" class="headerlink" title="2.代码规范"></a>2.代码规范</h3><h4 id="2-1代码缩进"><a href="#2-1代码缩进" class="headerlink" title="2.1代码缩进"></a>2.1代码缩进</h4><p>缩进使用soft tab（4个空格）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>代码为4个空格缩进<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2标签命名"><a href="#2-2标签命名" class="headerlink" title="2.2标签命名"></a>2.2标签命名</h4><p>标签元素名统一小写，不可大小写混合，必须有结尾标签相呼应。</p>
<p>正例：<code>&lt;div&gt;&lt;/div&gt;</code><br>反例：<code>&lt;DIV&gt;&lt;/DIV&gt;</code></p>
<h4 id="2-3属性命名"><a href="#2-3属性命名" class="headerlink" title="2.3属性命名"></a>2.3属性命名</h4><p>标签属性和自定义属性采用<code>kebab-case</code>命名，字母小写，以短横分隔单词，并且必须是双引号。</p>
<p>正例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-user-name</span>=<span class="string">&quot;xiaoming&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">dataId</span>=<span class="string">&quot;1&quot;</span> <span class="attr">dataUserName</span>=<span class="string">&quot;xiaoming&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-4属性顺序"><a href="#2-4属性顺序" class="headerlink" title="2.4属性顺序"></a>2.4属性顺序</h4><p>标签的属性需要按照顺序来书写，以下规则是极力推荐使用的。</p>
<p>样式名<br><code>class</code></p>
<p>全局唯一标识<br><code>id</code><br><code>name</code></p>
<p>自定义属性（可复用的元素样式排首位）<br><code>data-xx</code></p>
<p>资源地址/类型（可复用的元素样式排首位）<br><code>href</code><br><code>src</code><br><code>for</code><br><code>type</code></p>
<p>提示性的内容<br><code>placeholder</code><br><code>title</code><br><code>alt</code></p>
<p>辅助性的内容<br><code>disabled</code><br><code>readonly</code><br><code>required</code><br><code>checked</code><br><code>selected</code></p>
<h4 id="2-5语义化标签"><a href="#2-5语义化标签" class="headerlink" title="2.5语义化标签"></a>2.5语义化标签</h4><p><code>html</code> 中包含了大量的语义化标签，推荐开发中合理的使用语义化的标签，便于页面结构化，易于阅读，更好的便于网页内容抓取。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主要内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 尾部内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以下列举出常见的语义化标签集合：</p>
<table>
<thead>
<tr>
<th>标签</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>header</td>
<td>头部内容</td>
</tr>
<tr>
<td>nav</td>
<td>导航</td>
</tr>
<tr>
<td>main</td>
<td>主要内容</td>
</tr>
<tr>
<td>footer</td>
<td>底部内容</td>
</tr>
<tr>
<td>aside</td>
<td>侧边栏</td>
</tr>
<tr>
<td>section</td>
<td>文档中的节</td>
</tr>
<tr>
<td>article</td>
<td>文章</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>mark</td>
<td>文本标记</td>
</tr>
</tbody></table>
<h4 id="2-6结构顺序"><a href="#2-6结构顺序" class="headerlink" title="2.6结构顺序"></a>2.6结构顺序</h4><p>除了使用语义化标签，一个网页还需要遵守一定的结构和顺序，自上而下，从左到右，保持一定的顺序。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- header --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- main --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- footer --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-7图片alt不为空"><a href="#2-7图片alt不为空" class="headerlink" title="2.7图片alt不为空"></a>2.7图片alt不为空</h4><p><code>&lt;img&gt;</code>标签的 <code>alt </code>属性指定了替代文本，在图像无法显示时候替代的文案显示。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://www.xxx.com/dd.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;加载中&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-注释规范"><a href="#3-注释规范" class="headerlink" title="3.注释规范"></a>3.注释规范</h3><h4 id="3-1-单行注释"><a href="#3-1-单行注释" class="headerlink" title="3.1 单行注释"></a>3.1 单行注释</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 单行注释 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-多行注释"><a href="#3-2-多行注释" class="headerlink" title="3.2 多行注释"></a>3.2 多行注释</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    多行注释</span></span><br><span class="line"><span class="comment">    多行注释</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-闭合注释"><a href="#3-3-闭合注释" class="headerlink" title="3.3 闭合注释"></a>3.3 闭合注释</h4><p>有时我们需要用注释来标记某段代码的开头和结束，就需要用到闭合注释（本规范中叫做闭合注释）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 注释开头 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /注释结束 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三、CSS规范"><a href="#三、CSS规范" class="headerlink" title="三、CSS规范"></a>三、CSS规范</h2><h3 id="1-声明规范-1"><a href="#1-声明规范-1" class="headerlink" title="1.声明规范"></a>1.声明规范</h3><h4 id="1-1-link-标签-引入-css"><a href="#1-1-link-标签-引入-css" class="headerlink" title="1.1 link 标签 引入 css"></a>1.1 link 标签 引入 css</h4><p>使用 link 标签引入外部css，写在 head 中。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;//xxx.com/index.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-import-导入-css-文件"><a href="#1-2-import-导入-css-文件" class="headerlink" title="1.2 @import 导入 css 文件"></a>1.2 @import 导入 css 文件</h4><p>导入 css 文件使用 @import，忽略使用 url 导入。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 推荐</span><br><span class="line">@import &quot;./styles/index.css&quot;;</span><br><span class="line"></span><br><span class="line">// 不推荐</span><br><span class="line">@import url(&quot;./styles/index.css&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="2-代码规范-1"><a href="#2-代码规范-1" class="headerlink" title="2.代码规范"></a>2.代码规范</h3><h4 id="2-1-代码缩进"><a href="#2-1-代码缩进" class="headerlink" title="2.1 代码缩进"></a>2.1 代码缩进</h4><p>统一使用 4 空格缩进。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-属性简写"><a href="#2-2-属性简写" class="headerlink" title="2.2 属性简写"></a>2.2 属性简写</h4><p>样式中有很多属性是可以简写的，推荐这样的方式，易读且减少了复杂度。</p>
<p>正例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">30px</span> <span class="number">10px</span> <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-省略属性值-0-的单位"><a href="#2-3-省略属性值-0-的单位" class="headerlink" title="2.3 省略属性值 0 的单位"></a>2.3 省略属性值 0 的单位</h4><p>正例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-使用直接子选择器"><a href="#2-4-使用直接子选择器" class="headerlink" title="2.4 使用直接子选择器"></a>2.4 使用直接子选择器</h4><p>在嵌套写选择器链的时候，应该减少后代选择器，改用直接子选择器，也就是多写个 &gt;符号定位到元素，优点是 css 渲染效率更高。</p>
<p>正例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tabs</span> &gt; <span class="selector-class">.tabs-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tabs</span> <span class="selector-class">.tabs-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-5-避免使用-id-和标签选择器"><a href="#2-5-避免使用-id-和标签选择器" class="headerlink" title="2.5 避免使用 id 和标签选择器"></a>2.5 避免使用 id 和标签选择器</h4><p>应该避免使用这两个选择器，以防止污染全局样式。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .page-title &#123;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">    &#125;</span><br><span class="line">    .page-title .user-name &#123;</span><br><span class="line">      color: red;</span><br><span class="line">    &#125;</span><br><span class="line">    .my-demo &#123;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;div class=&quot;page-title&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;user-name&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;p class=&quot;my-demo&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		#page-title &#123;</span><br><span class="line">          font-size: 18px;</span><br><span class="line">        &#125;</span><br><span class="line">        p &#123;</span><br><span class="line">          font-weight: bold;</span><br><span class="line">        &#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;page-title&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;p&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-6-避免使用行内样式"><a href="#2-6-避免使用行内样式" class="headerlink" title="2.6 避免使用行内样式"></a>2.6 避免使用行内样式</h4><p>避免直接在标签写 style 行内样式，这样样式会很分散不易维护，最好是把样式提取到一个 class 中。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.text-red &#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    color: red;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;div class=&quot;text-red&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size:18px; color:red;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-7-避免使用-important-优先级"><a href="#2-7-避免使用-important-优先级" class="headerlink" title="2.7 避免使用 !important 优先级"></a>2.7 避免使用 !important 优先级</h4><p>非必须不要使用 !important 强制设置优先级最高，滥用出现问题会导致代码难以维护。</p>
<h4 id="2-8-避免样式过多层级嵌套"><a href="#2-8-避免样式过多层级嵌套" class="headerlink" title="2.8 避免样式过多层级嵌套"></a>2.8 避免样式过多层级嵌套</h4><p>在使用 less 或者 scss 预编译语言时候，应该避免层级过多嵌套。过多的层级会显得很乱，难以阅读和维护，建议最多层级在 3 层最佳，同样层次多也可以拆分开。<br>正例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 减少层级 */</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="selector-class">.page-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 拆分层级也可以 */</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">  <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="selector-class">.title</span> &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-9-禁止使用“-”选择元素"><a href="#2-9-禁止使用“-”选择元素" class="headerlink" title="2.9 禁止使用“*”选择元素"></a>2.9 禁止使用“*”选择元素</h4><p>不能使用*选择器来给元素设置样式，这样会使所有的元素都起作用。</p>
<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 不能这样写 */</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-10-禁止将样式写为单行"><a href="#2-10-禁止将样式写为单行" class="headerlink" title="2.10 禁止将样式写为单行"></a>2.10 禁止将样式写为单行</h4><p>不要把样式都放同一行，这样是不允许的。</p>
<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 不能这样写 */</span></span><br><span class="line"><span class="selector-class">.text-red</span> &#123; <span class="attribute">font-size</span>:<span class="number">18px</span>;<span class="attribute">color</span>:red; &#125;</span><br></pre></td></tr></table></figure>

<p>非必须避免使用 !important ，因为会强制设置为优先级最高，滥用出现问题导致代码难以维护。</p>
<h4 id="2-11-css-的颜色值规则"><a href="#2-11-css-的颜色值规则" class="headerlink" title="2.11 css 的颜色值规则"></a>2.11 css 的颜色值规则</h4><ul>
<li>颜色值默认使用十六进制表示，字母全部小写。</li>
<li>有透明度的要用 rgba 颜色值，最后一个透明度值需要写完整的小数。</li>
<li>颜色值全部一样，则缩减为 3 位数值。</li>
</ul>
<p>正例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#abcdef</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#abcdef</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333333</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cccccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-12-样式属性书写顺序"><a href="#2-12-样式属性书写顺序" class="headerlink" title="2.12 样式属性书写顺序"></a>2.12 样式属性书写顺序</h4><p>按照一定的顺序书写样式，可以提升浏览器渲染 dom 的性能，本规范中该项非必须。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hotel-content</span> &#123;</span><br><span class="line">  <span class="comment">/* 1. 定位 */</span></span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* 2. 盒子模型 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="comment">/* 3. 文本 */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="comment">/* 4. 背景 */</span></span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="comment">/* 5. 其他 */</span></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-13-样式命名规则"><a href="#2-13-样式命名规则" class="headerlink" title="2.13 样式命名规则"></a>2.13 样式命名规则</h4><p>第一种：</p>
<p>推荐采用 BEM 命名规范，BEM 命名就是通过 块(block)、元素(element)、修饰符(modifier)来连接组合元素之间的关系，例如： type-block__element–modifier。<br>该命名虽然能比较透明的展示出结构，但是也会有缺点，命名过于严格，类名太长，不易维护。</p>
<ul>
<li>单中划线：连接某个块与下面的子模块。</li>
<li>__ 双下划线：连接块和块的子元素。</li>
<li>– 双中划线：描述该块或者子元素的一种状态。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    /* 原生CSS写法 */</span><br><span class="line">    .tabs &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    .tabs .tabs-inner .tabs-inner__button &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    .tabs .tabs-inner .tabs-inner__button .tabs-inner__button--primary &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    /* Less或者Scss写法 */</span><br><span class="line">    .tabs &#123;</span><br><span class="line">      &amp;-inner &#123;</span><br><span class="line">        &amp;__button &#123;</span><br><span class="line">          &amp;--primary &#123;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;tabs&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;tabs-inner&quot;&gt;</span><br><span class="line">      &lt;button class=&quot;tabs-inner__button tabs-inner__button--primary&quot;&gt;</span><br><span class="line">        选项1</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">      &lt;button class=&quot;tabs-inner__button&quot;&gt;选项2&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>第二种（推荐）：</p>
<ul>
<li>使用命名空间的方式来组合元素层级之间的关系，使用语义化的单词来当做命名空间区分不同模块。</li>
<li>该命名是把元素都放到某个块下面单独定义样式，这样不会影响到其它块下面的样式。如下示例：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    /* 原生CSS写法 */</span><br><span class="line">    .message .title &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    .message .content &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    /* Less或者Scss写法 */</span><br><span class="line">    .message &#123;</span><br><span class="line">      .title &#123;</span><br><span class="line">      &#125;</span><br><span class="line">      .content &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;!-- message --&gt;</span><br><span class="line">  &lt;div class=&quot;message&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-注释规范-1"><a href="#3-注释规范-1" class="headerlink" title="3. 注释规范"></a>3. 注释规范</h3><h4 id="3-1-单行注释-1"><a href="#3-1-单行注释-1" class="headerlink" title="3.1 单行注释"></a>3.1 单行注释</h4><p>单行注释以 /* 开头，以 <em>/ 结束，注意前后各空一格。<br>在 less 或者 scss 中也可以使用双斜杠 // 作为单行注释</em></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 单行注释 */</span></span><br><span class="line"><span class="selector-class">.tabs</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-多行注释-1"><a href="#3-2-多行注释-1" class="headerlink" title="3.2 多行注释"></a>3.2 多行注释</h4><p>多行需要换行，每行前面没有 * 号，每行对齐前面空一格。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  多行注释1</span></span><br><span class="line"><span class="comment">  多行注释2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="selector-class">.tabs</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-块注释"><a href="#3-3-块注释" class="headerlink" title="3.3 块注释"></a>3.3 块注释</h4><ul>
<li><p>块注释以 /* 开头，以 */ 结束，前后各空一格。</p>
</li>
<li><p>块注释用于划分某个模块的标记，需要写上块描述。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/* 用户模块样式 */</span><br><span class="line">.user &#123;</span><br><span class="line">&#125;</span><br><span class="line">.user .user-name &#123;</span><br><span class="line">&#125;</span><br><span class="line">/* 弹框模块样式 */</span><br><span class="line">.modal &#123;</span><br><span class="line">&#125;</span><br><span class="line">.modal .modal-title &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-特殊注释"><a href="#3-4-特殊注释" class="headerlink" title="3.4 特殊注释"></a>3.4 特殊注释</h4><p>用于标注修改、待办等信息，需要写上作者和时间等信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* TODO: 标签页样式待补充 by 小红 2022-03-13 18:32 */</span><br><span class="line">/* BUGFIX: 修复标签页的bug by 小红 2022-03-13 18:32 */</span><br><span class="line">.tabs &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.5 文件注释<br>文件注释以 /** 开头，以 */ 结束。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * css文件描述</span><br><span class="line"> * @author: 小红</span><br><span class="line"> * @update: 2021-04-13 18:32</span><br><span class="line">   */</span><br><span class="line"></span><br><span class="line">/* 标签页 */</span><br><span class="line">.tabs &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-样式名参考"><a href="#4-样式名参考" class="headerlink" title="4.样式名参考"></a>4.样式名参考</h3><p>在编写页面时候，class 样式起名是件很痛苦的事，多写几层就没词可用了，以下列举出不同场景常用的名称，帮你找到合适你页面的样式名称。</p>
<p>使用 <code>kebab-case </code>命名，字母一律小写，用短横分隔单词。<br>如果单词过长，需要使用言简意赅的缩写单词表示。</p>
<h4 id="4-1-样式文件命名"><a href="#4-1-样式文件命名" class="headerlink" title="4.1 样式文件命名"></a>4.1 样式文件命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">index.css    // 一般用于首页建立样式</span><br><span class="line">head.css     // 头部样式，当多个页面头部设计风格相同时使用。</span><br><span class="line">base.css     // 共用样式。</span><br><span class="line">style.css    // 独立页面所使用的样式文件。</span><br><span class="line">global.css   // 页面样式基础，全局公用样式，页面中必须包含。</span><br><span class="line">layout.css   // 布局、版面样式，公用类型较多时使用，一般用在首页级页面和产品类页面中</span><br><span class="line">module.css   // 模块，用于产品类页，也可与其它样式配合使用。</span><br><span class="line">master.css   // 主要的样式表</span><br><span class="line">columns.css  // 专栏样式</span><br><span class="line">themes.css   // 主体样式</span><br><span class="line">forms.css    // 表单样式</span><br><span class="line">mend.css     // 补丁，基于以上样式进行的私有化修补。</span><br><span class="line">print.css    // 打印</span><br></pre></td></tr></table></figure>

<h4 id="4-2-页面结构命名"><a href="#4-2-页面结构命名" class="headerlink" title="4.2 页面结构命名"></a>4.2 页面结构命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">page         // 代表整个页面，用于最外层。</span><br><span class="line">wrap         // 外套，将所有元素包在一起的一个外围包，用于最外层</span><br><span class="line">wrapper      // 页面外围控制整体布局宽度，用于最外层</span><br><span class="line">container    // 一个整体容器，用于最外层</span><br><span class="line">head|header  // 页头区域，用于头部</span><br><span class="line">nav          // 导航条</span><br><span class="line">content      // 内容，网站中最重要的内容区域，用于网页中部主体</span><br><span class="line">main         // 网站中的主要区域（表示最重要的一块位置），用于中部主体内容</span><br><span class="line">column       // 栏目</span><br><span class="line">sidebar      // 侧栏</span><br><span class="line">foot|footer  // 页尾、页脚。网站一些附加信息放置区域，（或命名为 copyright）用于底部</span><br><span class="line">left|right|center  // 左右中</span><br></pre></td></tr></table></figure>

<h4 id="4-3-导航命名"><a href="#4-3-导航命名" class="headerlink" title="4.3 导航命名"></a>4.3 导航命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nav|navbar|navigation|nav-wrapper  // 导航条或导航包，代表横向导航</span><br><span class="line">topnav     // 顶部导航</span><br><span class="line">mainbav    // 主导航</span><br><span class="line">subnav     // 子导航</span><br><span class="line">sidebar    // 边导航</span><br><span class="line">left-sidebar|sidebar-l   // 左导航</span><br><span class="line">right-sidebar|sidebar-r  // 右导航</span><br><span class="line">title      // 标题</span><br><span class="line">summary    // 摘要</span><br><span class="line">menu       // 菜单，区域包含一般的链接和菜单</span><br><span class="line">submenu    // 子菜单</span><br><span class="line">drop       // 下拉</span><br><span class="line">dorp-menu  // 下拉菜单</span><br><span class="line">links      // 链接菜单</span><br></pre></td></tr></table></figure>

<h4 id="4-4-功能命名"><a href="#4-4-功能命名" class="headerlink" title="4.4 功能命名"></a>4.4 功能命名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">logo      // 标记网站logo标志</span><br><span class="line">banner    // 标语、广告条、顶部广告条</span><br><span class="line">login     // 登陆，（例如: 登录表单 form-login）</span><br><span class="line">loginbar  // 登录条</span><br><span class="line">register  // 注册</span><br><span class="line">tool|toolbar    // 工具条</span><br><span class="line">search          // 搜索</span><br><span class="line">searchbar       // 搜索条</span><br><span class="line">searchlnput     // 搜索输入框</span><br><span class="line">shop            // 功能区，表示现在的</span><br><span class="line">icon            // 小图标</span><br><span class="line">label           // 商标</span><br><span class="line">homepage        // 首页</span><br><span class="line">subpage         // 二级页面子页面</span><br><span class="line">hot             // 热门热点</span><br><span class="line">list            // 文章列表，（例如: 新闻列表 list-news）</span><br><span class="line">scroll          // 滚动</span><br><span class="line">tab             // 标签</span><br><span class="line">sitemap         // 网站地图</span><br><span class="line">msg|message     // 提示信息</span><br><span class="line">current         // 当前的</span><br><span class="line">joinus          // 加入</span><br><span class="line">status          // 状态</span><br><span class="line">btn             // 按钮，（例如: 搜索按钮可写成  btn-search）</span><br><span class="line">tips            // 小技巧</span><br><span class="line">note            // 注释</span><br><span class="line">guild           // 指南</span><br><span class="line">arr|arrow       // 标记箭头</span><br><span class="line">service         // 服务</span><br><span class="line">breadcrumb      // (即页面所处位置导航提示）</span><br><span class="line">download        // 下载</span><br><span class="line">vote            // 投票</span><br><span class="line">news            // 新闻</span><br><span class="line">siteinfo        // 网站信息</span><br><span class="line">partner         // 合作伙伴</span><br><span class="line">link|friendlink // 友情链接</span><br><span class="line">copyright       // 版权信息</span><br><span class="line">siteinfoCredits // 信誉</span><br><span class="line">siteinfoLegal   // 法律信息</span><br></pre></td></tr></table></figure>



<h2 id="四、JavaScript-规范"><a href="#四、JavaScript-规范" class="headerlink" title="四、JavaScript 规范"></a>四、JavaScript 规范</h2><h3 id="1-命名规范"><a href="#1-命名规范" class="headerlink" title="1. 命名规范"></a>1. 命名规范</h3><h4 id="1-1-引入资源"><a href="#1-1-引入资源" class="headerlink" title="1.1 引入资源"></a>1.1 引入资源</h4><ul>
<li>文件名不得包含空格。</li>
<li>采用<code>kebab-case</code> 命名，字母小写，以短横分隔单词。</li>
<li>引入资源推荐使用相对路径，不指定具体的协议(<code>http:</code>，<code>https:</code>)。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;//cdn.com/render-dom.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="1-2文件命名"><a href="#1-2文件命名" class="headerlink" title="1.2文件命名"></a>1.2文件命名</h4><p>全部采用 <code>kebab-case</code> 命名，字母小写，以短横分隔单词。</p>
<p>正例：<code>render-dom.js / home.js / get-user-info.js</code><br>反例：<code>renderDom.js / Home.js / getUserInfo.js</code></p>
<h4 id="1-3声明变量"><a href="#1-3声明变量" class="headerlink" title="1.3声明变量"></a>1.3声明变量</h4><ul>
<li>变量名使用 <code>camelCase</code> 驼峰命名。</li>
<li>不能以数字，特殊符号开头。</li>
<li>不能使用 JavaScript 关键字和保留字。</li>
<li>避免使用没有意义的命名。</li>
<li>变量名起名以 <code>类型+对象描述</code> 的规则。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let userId = 1;</span><br><span class="line">var userName = &quot;小红&quot;;</span><br><span class="line">let tableTitle = &quot;表格标题&quot;;</span><br></pre></td></tr></table></figure>

<h4 id="1-4声明常量"><a href="#1-4声明常量" class="headerlink" title="1.4声明常量"></a>1.4声明常量</h4><p>常量名使用全部大写命名，多个单词中间用<code>_</code>下划线分隔。</p>
<p>正例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AMOUNT = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> MAX_COUNT = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> APPROVE_TYPE = &#123; <span class="attr">DOING</span>: <span class="number">1</span>, <span class="attr">APPROVED</span>: <span class="number">2</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> amount = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> MAXCOUNT = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> APPROVETYPE = &#123; <span class="attr">DOING</span>: <span class="number">1</span>, <span class="attr">APPROVED</span>: <span class="number">2</span> &#125;;</span><br></pre></td></tr></table></figure>

<h4 id="1-5-形参命名"><a href="#1-5-形参命名" class="headerlink" title="1.5 形参命名"></a>1.5 形参命名</h4><p>形参本身是可以任意定义的，统一是为了更方便地复用/合并代码。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>索引</td>
<td>switchTab(i){}</td>
</tr>
<tr>
<td>i,v</td>
<td>值</td>
<td>list.forEach((i,v) =&gt;{})</td>
</tr>
<tr>
<td>e</td>
<td>事件</td>
<td>onInput(e){}</td>
</tr>
<tr>
<td>obj</td>
<td>对象</td>
<td>for(let obj of userList){}</td>
</tr>
<tr>
<td>arr</td>
<td>数组</td>
<td>let arr = []</td>
</tr>
<tr>
<td>fun</td>
<td>函数</td>
<td>callback(fun){}</td>
</tr>
<tr>
<td>item</td>
<td>列表项</td>
<td>list.map(item =&gt; {})</td>
</tr>
<tr>
<td>item,index</td>
<td>vue遍历数组</td>
<td>v-for=”(item,index) in arr”</td>
</tr>
<tr>
<td>key,value</td>
<td>键值对</td>
<td>for(let [key,value] of arr){}</td>
</tr>
</tbody></table>
<h4 id="1-6-函数命名"><a href="#1-6-函数命名" class="headerlink" title="1.6 函数命名"></a>1.6 函数命名</h4><p>函数名使用 camelCase 驼峰命名，命名为动词形式，或者动词+名词形式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function getName() &#123;&#125;</span><br><span class="line">function setName() &#123;&#125;</span><br><span class="line">function canEdit() &#123;&#125;</span><br><span class="line">function addUser() &#123;&#125;</span><br><span class="line">function hasCode() &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>如果是内部使用的私有函数，需要用 <code>_</code>符号作为前缀，写到文件最下面，并用按照功能进行分组，写上块注释。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* 格式化内容 */</span><br><span class="line">function _formatText() &#123;&#125;</span><br><span class="line">function _formatMoney() &#123;&#125;</span><br><span class="line"></span><br><span class="line">/* 设置日期 */</span><br><span class="line">function _setDate() &#123;&#125;</span><br><span class="line">function _setMonth() &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>增删改查和查看详情，统一使用下面的单词。</p>
<p><code>add /delete / update / get / detail</code></p>
<p>附常用的动词列表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">get 获取 | set 设置</span><br><span class="line">add 增加 | delete 删除</span><br><span class="line">start 启动 | launch 启动 | run 运行 | ready 准备 | stop 停止</span><br><span class="line">open 打开 | close 关闭</span><br><span class="line">read 读取 | write 写入 | save 保存</span><br><span class="line">load 载入 | unload 不加载</span><br><span class="line">create 创建 | destroy 销毁</span><br><span class="line">begin 开始 | start 开始 | end 结束</span><br><span class="line">from 从.. | to 到..</span><br><span class="line">backup 备份 | restore 恢复</span><br><span class="line">import 导入 | export 导出</span><br><span class="line">print 打印 | afterprint 打印机关闭</span><br><span class="line">split 分割 | merge 合并</span><br><span class="line">touch 轻按 | click 点击  | dblclick 双击 | drag 拖拽</span><br><span class="line">inject 注入 | extract 提取</span><br><span class="line">attach 附着 | detach 脱离</span><br><span class="line">bind 绑定 | separate 分离</span><br><span class="line">view 查看 | browse 浏览</span><br><span class="line">edit 编辑 | modify 修改 | update 更新 | upgrade 升级</span><br><span class="line">select 选取 | change 改变 | mark 标记</span><br><span class="line">copy 复制 | paste 粘贴</span><br><span class="line">do 做 | undo 撤销 | redo 重做</span><br><span class="line">insert 插入 | remove 移除 | revoke 撤销 |  revert 复原 | reset 重置</span><br><span class="line">clean 清理 | clear 清除</span><br><span class="line">index 索引 | sort 排序</span><br><span class="line">find 查找 | search 搜索</span><br><span class="line">increase 增加 | decrease 减少</span><br><span class="line">rise 上涨 | fall 下降</span><br><span class="line">play 播放 | pause 暂停</span><br><span class="line">forward 前进 | rewind 后退</span><br><span class="line">compile 编译 | execute 执行</span><br><span class="line">suspend 挂起 | complete 完成</span><br><span class="line">debug 调试 | trace 跟踪</span><br><span class="line">observe 观察 | listen 监听</span><br><span class="line">build 构建 | publish 发布</span><br><span class="line">input 输入 | output 输出</span><br><span class="line">encode 编码 | decode 解码</span><br><span class="line">encrypt 加密 | decrypt 解密</span><br><span class="line">compress 压缩 | decompress 解压缩</span><br><span class="line">pack 打包 | unpack 解包</span><br><span class="line">parse 解析 | emit 生成</span><br><span class="line">connect 连接 | disconnect 断开</span><br><span class="line">send 发送 | receive 接收</span><br><span class="line">upload 上传 | download 下载</span><br><span class="line">refresh 刷新 | synchronize 同步</span><br><span class="line">lock 锁定 | unlock 解锁</span><br><span class="line">check out 签出 | check in 签入</span><br><span class="line">submit 提交 | commit 交付</span><br><span class="line">push 推 | pull 拉</span><br><span class="line">expand 展开 | collapse 折叠</span><br><span class="line">active 激活 | deactive 未激活</span><br><span class="line">wait 等待 | process 进程中 | finish 完成</span><br><span class="line">enter 进入 | exit 退出</span><br><span class="line">abort 中止 | quit 离开</span><br><span class="line">obsolete 废弃 | depreciate 废旧</span><br><span class="line">collect 收集 | aggregate 聚集</span><br></pre></td></tr></table></figure>

<h3 id="2-代码规范-2"><a href="#2-代码规范-2" class="headerlink" title="2.代码规范"></a>2.代码规范</h3><h4 id="2-1代码缩进-1"><a href="#2-1代码缩进-1" class="headerlink" title="2.1代码缩进"></a>2.1代码缩进</h4><p>统一使用 <code>4</code> 个缩进</p>
<h4 id="2-2-代码行最大字符数"><a href="#2-2-代码行最大字符数" class="headerlink" title="2.2 代码行最大字符数"></a>2.2 代码行最大字符数</h4><p>统一每行最大 <code>80</code> 个字符，超出自动换行，<code>VsCode编辑器</code>默认是 <code>80</code> 个字符。</p>
<h4 id="2-3-使用-let-代替-var"><a href="#2-3-使用-let-代替-var" class="headerlink" title="2.3 使用 let 代替 var"></a>2.3 使用 let 代替 var</h4><p>声明变量推荐使用 <code>let</code> 代替 <code>var</code> 声明。<br><code>var</code> 会有变量提升问题，容易造成变量污染。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let userId = 2;</span><br><span class="line">let userName = &quot;小红&quot;;	</span><br></pre></td></tr></table></figure>

<h4 id="2-4-多个变量声明简写"><a href="#2-4-多个变量声明简写" class="headerlink" title="2.4 多个变量声明简写"></a>2.4 多个变量声明简写</h4><p>同时声明多个变量，不需要每个都用 <code>let</code> 起一行声明，可以合并到一起。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let id = 2,</span><br><span class="line">  name = &quot;小红&quot;,</span><br><span class="line">  sex = &quot;女&quot;,</span><br><span class="line">  age = 18;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let id = 2;</span><br><span class="line">let name = &quot;小红&quot;;</span><br><span class="line">let sex = &quot;女&quot;;</span><br><span class="line">let age = 18;</span><br></pre></td></tr></table></figure>

<h4 id="2-5-使用模板字符串代替-“-”-拼接"><a href="#2-5-使用模板字符串代替-“-”-拼接" class="headerlink" title="2.5 使用模板字符串代替 “+” 拼接"></a>2.5 使用模板字符串代替 “+” 拼接</h4><p>在有变量拼接的场景下，尽量使用模板字符串来代替普通的“+”拼接，这样会使得代码结构更清晰。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let id = 2,</span><br><span class="line">  name = &quot;小红&quot;,</span><br><span class="line">  sex = &quot;女&quot;,</span><br><span class="line">  age = 18;</span><br><span class="line">let str = `我叫$&#123;name&#125;，性别$&#123;sex&#125;，我今年$&#123;age&#125;岁了。`;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let id = 2,</span><br><span class="line">  name = &quot;小红&quot;,</span><br><span class="line">  sex = &quot;女&quot;,</span><br><span class="line">  age = 18;</span><br><span class="line">let str = &quot;我叫&quot; + name + &quot;，性别&quot; + sex + &quot;，我今年&quot; + age + &quot;岁了。&quot;;</span><br></pre></td></tr></table></figure>

<h4 id="2-6-this-自身引用的命名"><a href="#2-6-this-自身引用的命名" class="headerlink" title="2.6 this 自身引用的命名"></a>2.6 this 自身引用的命名</h4><p>对上下文this的引用只能使用’_this’, ‘that’, ‘self’其中一个来命名；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let self = this;</span><br><span class="line">setTimeout(function () &#123;</span><br><span class="line">  self.say();</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure>

<h4 id="2-7-避免-console-log-滥用"><a href="#2-7-避免-console-log-滥用" class="headerlink" title="2.7 避免 console.log 滥用"></a>2.7 避免 console.log 滥用</h4><p>避免大量使用 console.log，这样很影响代码执行效率。打印日志只作用看调试内容输出，不能代码里随意到处都写，在代码调试完成之后必须要删除。</p>
<h4 id="2-8-三元条件简单判断"><a href="#2-8-三元条件简单判断" class="headerlink" title="2.8 三元条件简单判断"></a>2.8 三元条件简单判断</h4><p>在简单的判断条件下，使用三元运算符能更加的精简代码，增加可读性。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let flag = 1;</span><br><span class="line">console.log(flag == 1 ? &quot;是&quot; : &quot;否&quot;);</span><br><span class="line">// 甚至再多一层判断也可以</span><br><span class="line">let status = 0;</span><br><span class="line">console.log(status == 0 ? &quot;代办&quot; : status == 1 ? &quot;已办&quot; : &quot;无&quot;);</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 这里 6 行代码，用三元运算符 2 行搞定</span><br><span class="line">let flag = 1;</span><br><span class="line">if (flag == 1) &#123;</span><br><span class="line">  console.log(&quot;是&quot;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  console.log(&quot;否&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-9-使用字面量对象"><a href="#2-9-使用字面量对象" class="headerlink" title="2.9 使用字面量对象"></a>2.9 使用字面量对象</h4><p>使用字面量创建对象，更加简洁。<br>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let user = &#123;</span><br><span class="line">  id: 1,</span><br><span class="line">  name: &quot;小红&quot;,</span><br><span class="line">  sex: &quot;女&quot;,</span><br><span class="line">  age: 18,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let user = new Object();</span><br><span class="line">user.id = 1;</span><br><span class="line">user.name = &quot;小红&quot;;</span><br><span class="line">user.sex = &quot;女&quot;;</span><br><span class="line">user.age = 18;</span><br></pre></td></tr></table></figure>

<h4 id="2-10-对象结构简写"><a href="#2-10-对象结构简写" class="headerlink" title="2.10 对象结构简写"></a>2.10 对象结构简写</h4><p>变量名是对象的属性值，推荐使用简写方式，并且按照归类分组将简写属性统一放到开头，对象的结构更加的清晰明了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let name = &quot;小红&quot;,</span><br><span class="line">  age = 18;</span><br><span class="line"></span><br><span class="line">let user = &#123;</span><br><span class="line">  name,</span><br><span class="line">  age,</span><br><span class="line">  sex: &quot;女&quot;,</span><br><span class="line">  mobile: &quot;1300000000&quot;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-11-使用-“…”-扩展运算符"><a href="#2-11-使用-“…”-扩展运算符" class="headerlink" title="2.11 使用 “…” 扩展运算符"></a>2.11 使用 “…” 扩展运算符</h4><p>浅拷贝对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let age = 18;</span><br><span class="line">let user = &#123;</span><br><span class="line">  id: 1,</span><br><span class="line">  name: &quot;小红&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">let copy = &#123; ...user, age &#125;;</span><br></pre></td></tr></table></figure>


<p>浅拷贝数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr1 = [1, 2];</span><br><span class="line">let arr2 = [3, 4];</span><br><span class="line">let arr3 = [...arr1, ...arr2];</span><br></pre></td></tr></table></figure>

<h4 id="2-12-使用可选链-“-”-操作符"><a href="#2-12-使用可选链-“-”-操作符" class="headerlink" title="2.12 使用可选链 “?.” 操作符"></a>2.12 使用可选链 “?.” 操作符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let user = null;</span><br><span class="line">// 如果直接取 user.sex 是会报错的，用了可选链后可以不用判断直接取了</span><br><span class="line">console.log(user?.sex);</span><br></pre></td></tr></table></figure>

<h4 id="2-13-函数参数设置默认值"><a href="#2-13-函数参数设置默认值" class="headerlink" title="2.13 函数参数设置默认值"></a>2.13 函数参数设置默认值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function getTimestamp(date = new Date()) &#123;</span><br><span class="line">  return date.getTime();</span><br><span class="line">&#125;</span><br><span class="line">console.log(getTimestamp());</span><br></pre></td></tr></table></figure>

<h4 id="2-14-函数参数太多，封装为对象传参"><a href="#2-14-函数参数太多，封装为对象传参" class="headerlink" title="2.14 函数参数太多，封装为对象传参"></a>2.14 函数参数太多，封装为对象传参</h4><p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let user = &#123;</span><br><span class="line">  id: 1,</span><br><span class="line">  name: &quot;小红&quot;,</span><br><span class="line">  sex: &quot;女&quot;,</span><br><span class="line">  age: 18,</span><br><span class="line">&#125;;</span><br><span class="line">function addUser(user) &#123;&#125;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function addUser(id, name, sex, age) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-15-函数内避免过多处理逻辑"><a href="#2-15-函数内避免过多处理逻辑" class="headerlink" title="2.15 函数内避免过多处理逻辑"></a>2.15 函数内避免过多处理逻辑</h4><p>在一个函数中，如果处理逻辑很多，需要拆分多个方法来处理。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function main() &#123;</span><br><span class="line">  // 逻辑拆分为不同的方法来处理</span><br><span class="line">  foo1();</span><br><span class="line">  foo2();</span><br><span class="line">  foo3();</span><br><span class="line">&#125;</span><br><span class="line">// 逻辑1</span><br><span class="line">function foo1() &#123;&#125;</span><br><span class="line">// 逻辑2</span><br><span class="line">function foo2() &#123;&#125;</span><br><span class="line">// 逻辑3</span><br><span class="line">function foo3() &#123;&#125;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function main() &#123;</span><br><span class="line">  // 逻辑1</span><br><span class="line">  // 逻辑2</span><br><span class="line">  // 逻辑3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-16-简单判断并行函数执行"><a href="#2-16-简单判断并行函数执行" class="headerlink" title="2.16 简单判断并行函数执行"></a>2.16 简单判断并行函数执行</h4><p>如果条件比较少，条件通过则执行函数，这种可以在单行用 &amp;&amp; 符号判断并执行代码。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let div = document.getElementById(&quot;div&quot;);</span><br><span class="line">div &amp;&amp; div.append(&quot;child&quot;);</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let div = document.getElementById(&quot;div&quot;);</span><br><span class="line">if (div) &#123;</span><br><span class="line">  div.append(&quot;child&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-17-使用箭头函数"><a href="#2-17-使用箭头函数" class="headerlink" title="2.17 使用箭头函数"></a>2.17 使用箭头函数</h4><p>推荐使用箭头函数，箭头函数能避免 this 作用域不确定的问题，而且使代码更加简洁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const getUserInfo = () =&gt; &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-18-提前-return，使判断逻辑简单化"><a href="#2-18-提前-return，使判断逻辑简单化" class="headerlink" title="2.18 提前 return，使判断逻辑简单化"></a>2.18 提前 return，使判断逻辑简单化</h4><p>当有比较多判断的情况下，把判断前置，使我们的代码结构更加清晰分明。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function submit() &#123;</span><br><span class="line">  // 校验</span><br><span class="line">  if (!this.listQuery.name) return;</span><br><span class="line">  if (!this.listQuery.status) return;</span><br><span class="line">  if (!this.listQuery.type) return;</span><br><span class="line">  // 校验通过，正常执行代码</span><br><span class="line">  addUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function submit() &#123;</span><br><span class="line">  // 校验 name</span><br><span class="line">  if (this.listQuery.name) &#123;</span><br><span class="line">    // 校验 status</span><br><span class="line">    if (this.listQuery.status) &#123;</span><br><span class="line">      // 校验 type</span><br><span class="line">      if (this.listQuery.type) &#123;</span><br><span class="line">        // 校验通过，正常执行代码</span><br><span class="line">        addUser();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-19-使用-Promise，async-await-代替回调函数"><a href="#2-19-使用-Promise，async-await-代替回调函数" class="headerlink" title="2.19 使用 Promise，async/await 代替回调函数"></a>2.19 使用 Promise，async/await 代替回调函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 使用Promise</span><br><span class="line">function getMsg(res) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    if (res.code == 200) &#123;</span><br><span class="line">      resolve(res);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      reject(res);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">getMsg(&#123; code: 200, result: [] &#125;).then((res) =&gt; &#123;&#125;);</span><br><span class="line"></span><br><span class="line">// 使用ssync/await</span><br><span class="line">async function login() &#123;</span><br><span class="line">  // 先执行获取用户信息</span><br><span class="line">  let user = await getUserInfo();</span><br><span class="line">  // 再执行获取菜单，传入用户的id</span><br><span class="line">  let menu = await getMenuList(user.id);</span><br><span class="line">  console.log(user, menu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-20-undefined-判断"><a href="#2-20-undefined-判断" class="headerlink" title="2.20  undefined 判断"></a>2.20  undefined 判断</h4><p>永远不要直接使用 undefined 进行变量判断；使用 typeof 和字符串’undefined’对变量进行判断。<br>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (typeof person === &#x27;undefined&#x27;) &#123;</span><br><span class="line">... &#125;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (person === undefined) &#123;</span><br><span class="line">... &#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-22-null"><a href="#2-22-null" class="headerlink" title="2.22 null"></a>2.22 null</h4><p>适用场景：</p>
<p>初始化一个将来可能被赋值为对象的变量<br>与已经初始化的变量做比较<br>作为一个参数为对象的函数的调用传参<br>作为一个返回对象的函数的返回值<br>不适用场景：</p>
<p>不要用null来判断函数调用时有无传参<br>不要与未初始化的变量做比较</p>
<h4 id="2-21-eslint-和-Prettier-代码格式化"><a href="#2-21-eslint-和-Prettier-代码格式化" class="headerlink" title="2.21 eslint 和 Prettier 代码格式化"></a>2.21 eslint 和 Prettier 代码格式化</h4><p>使用 <code>eslint</code> 做代码检查，格式化统一用<code>Prettier Code</code> 插件。</p>
<h3 id="3-注释规范-2"><a href="#3-注释规范-2" class="headerlink" title="3. 注释规范"></a>3. 注释规范</h3><h4 id="3-1-单行注释-2"><a href="#3-1-单行注释-2" class="headerlink" title="3.1 单行注释"></a>3.1 单行注释</h4><ul>
<li>单行注释以 <code>//</code> 开头，可以在代码末尾，也可以单独一行。</li>
<li>单行注释和后面内容空一格。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function setId(id) &#123;</span><br><span class="line">  // 可以在代码上面注释</span><br><span class="line">  this.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let name = &quot;小红&quot;; // 如果是声明变量的注释，推荐写在行尾</span><br><span class="line">let birthday = &quot;2000-10-02&quot;; // 生日</span><br></pre></td></tr></table></figure>

<h4 id="3-2-多行注释-2"><a href="#3-2-多行注释-2" class="headerlink" title="3.2 多行注释"></a>3.2 多行注释</h4><ul>
<li>多行注释以 <code>/*</code> 开头，以 <code>*/</code> 结束。</li>
<li><code>/*</code> 开头与后面内容空一格。</li>
<li>如果注释内容较多，需要换行注释。</li>
<li>若以 <code>/* xx */</code> 注释内容都在同一行，推荐使用 <code>//</code> 单行注释。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">  注释内容1</span><br><span class="line">  注释内容2</span><br><span class="line"> */</span><br><span class="line">setTitle();</span><br></pre></td></tr></table></figure>

<h4 id="3-3-块注释-1"><a href="#3-3-块注释-1" class="headerlink" title="3.3 块注释"></a>3.3 块注释</h4><ul>
<li>块注释以 <code>/*</code> 开头，以 <code>*/</code> 结束，前后各空一格。</li>
<li>块注释用于划分某个块的标记，需要写上块描述。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/* 获取列表 */</span><br><span class="line">function getList() &#123;&#125;</span><br><span class="line"></span><br><span class="line">/* 新增和修改用户 */</span><br><span class="line">function addUser() &#123;&#125;</span><br><span class="line">function updateUser() &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4方法注释"><a href="#3-4方法注释" class="headerlink" title="3.4方法注释"></a>3.4方法注释</h4><p>方法注释以 <code>/**</code> 开头，以 <code>*/</code> 结束，方法注释要使用<code>注释标签</code>说明方法的参数，返回结果等等内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 获取用户信息</span><br><span class="line"> * @param &#123;Number&#125; id 用户id</span><br><span class="line"> * @returns &#123;Object&#125; 返回用户对象</span><br><span class="line"> */</span><br><span class="line">function getUserInfo(id) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>方法的<code>注释标签</code>必须要写，参考<a target="_blank" rel="noopener" href="https://jsdoc.zcopy.site/">JSDoc 文档</a>，以下是常用的标签说明。</p>
<table>
<thead>
<tr>
<th>标签</th>
<th>语法</th>
</tr>
</thead>
<tbody><tr>
<td>@description</td>
<td>@description描述说明</td>
</tr>
<tr>
<td>@param</td>
<td>@param{参数类型}参数说明</td>
</tr>
<tr>
<td>@returns</td>
<td>@returns{返回类型}返回结果说明</td>
</tr>
<tr>
<td>@author</td>
<td>@author作者</td>
</tr>
<tr>
<td>@version</td>
<td>@version 版本号</td>
</tr>
<tr>
<td>@example</td>
<td>@example 示例代码</td>
</tr>
<tr>
<td>@todo</td>
<td>@todo 待办的内容描述</td>
</tr>
</tbody></table>
<h4 id="3-5文件注释"><a href="#3-5文件注释" class="headerlink" title="3.5文件注释"></a>3.5文件注释</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 文件说明</span><br><span class="line"> * @author 作者名</span><br><span class="line"> * @date 2022-03-23</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<h4 id="3-6版权注释"><a href="#3-6版权注释" class="headerlink" title="3.6版权注释"></a>3.6版权注释</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*!</span><br><span class="line"> * @lime-util/core v3.0.10</span><br><span class="line"> * Copyright 2021-2022, GaoXXXXX &lt;575122332@qq.com&gt;</span><br><span class="line"> * Licensed under the MIT License.</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<h2 id="五、Vue项目规范"><a href="#五、Vue项目规范" class="headerlink" title="五、Vue项目规范"></a>五、Vue项目规范</h2><h3 id="1-项目目录"><a href="#1-项目目录" class="headerlink" title="1.项目目录"></a>1.项目目录</h3><p>项目基于 <code>vue-cli4</code> 开发，项目目录结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">├── .vscode                    # vscode 的项目配置</span><br><span class="line">├── build                      # 构建相关</span><br><span class="line">├── dist                       # 打包文件</span><br><span class="line">├── mock                       # 项目mock 模拟数据</span><br><span class="line">├── public                     # 静态资源</span><br><span class="line">│   │── favicon.ico            # favicon 图标</span><br><span class="line">│   └── index.html             # html模板</span><br><span class="line">├── src                        # 源代码目录</span><br><span class="line">│   ├── api                    # 所有 api接口</span><br><span class="line">│   ├── assets                 # 图片，字体静态资源</span><br><span class="line">│   ├── components             # 全局公用组件</span><br><span class="line">│   ├── constants              # 全局 常量</span><br><span class="line">│   ├── directive              # 全局指令</span><br><span class="line">│   ├── filters                # 全局过滤器</span><br><span class="line">│   ├── mixins                 # 全局混入</span><br><span class="line">│   ├── plugins                # 全局插件</span><br><span class="line">│   ├── icons                  # 全局 svg icons</span><br><span class="line">│   ├── lang                   # 国际化 language</span><br><span class="line">│   ├── layout                 # 全局 layout</span><br><span class="line">│   ├── router                 # 路由</span><br><span class="line">│   ├── store                  # 全局 store管理</span><br><span class="line">│   ├── styles                 # 全局样式</span><br><span class="line">│       │── themes             # 主题</span><br><span class="line">│       └── index.less         # 样式主入口</span><br><span class="line">│   ├── utils                  # 全局公用方法</span><br><span class="line">│   ├── vendor                 # 公用 vendor</span><br><span class="line">│   ├── views                  # views 所有页面</span><br><span class="line">│   ├── App.vue                # 入口页面</span><br><span class="line">│   ├── main.js                # 入口文件 加载组件 初始化等</span><br><span class="line">│   ├── permission.js          # 权限管理</span><br><span class="line">│   └── settings.js            # 项目设置文件</span><br><span class="line">├── test                       # 测试</span><br><span class="line">├── .env.xxx                   # 环境变量配置</span><br><span class="line">├── .eslintignore              # eslint 忽略配置</span><br><span class="line">├── .eslintrc.js               # eslint 配置项</span><br><span class="line">├── .gitignore                 # git 忽略配置</span><br><span class="line">├── .prettierrc                # prettier 配置项</span><br><span class="line">├── .babelrc                   # babel-loader 配置</span><br><span class="line">├── .travis.yml                # 自动化 CI 配置</span><br><span class="line">├── LICENSE                    # license证书</span><br><span class="line">├── postcss.config.js          # postcss 配置</span><br><span class="line">├── vue.config.js              # vue config 配置</span><br><span class="line">├── package.json               # package.json</span><br><span class="line">├── package-lock.json          # package-lock.json</span><br><span class="line">└── README.md                  # README 文件</span><br></pre></td></tr></table></figure>

<h3 id="2-组件规范"><a href="#2-组件规范" class="headerlink" title="2.组件规范"></a>2.组件规范</h3><h4 id="2-1-组件命名"><a href="#2-1-组件命名" class="headerlink" title="2.1 组件命名"></a>2.1 组件命名</h4><h5 id="2-1-1-单文件组件名"><a href="#2-1-1-单文件组件名" class="headerlink" title="2.1.1 单文件组件名"></a>2.1.1 单文件组件名</h5><ul>
<li>在 views 目录下单文件组件统一采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</li>
<li>组件名不能和<code>html</code>标签元素冲突。</li>
<li>组件名应该以描述性单词开头，以修饰性单词结尾。</li>
<li>使用有意义的单词组合，2~3 个单词最佳，单词不能过长。</li>
<li>只有一个单词的组件全部都要小写。</li>
</ul>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">login.vue</span><br><span class="line">home.vue</span><br><span class="line">user-info.vue</span><br><span class="line">base-config.vue</span><br><span class="line">search-button-clear.vue</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<p><strong>以下命名是不规范的，快看有没有中招</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Login.vue</span><br><span class="line">Home.vue</span><br><span class="line">span.vue</span><br><span class="line">userInfo.vue</span><br><span class="line">base_Config.vue</span><br><span class="line">search_button_clear.vue</span><br></pre></td></tr></table></figure>

<h5 id="2-1-2-基础组件名"><a href="#2-1-2-基础组件名" class="headerlink" title="2.1.2 基础组件名"></a>2.1.2 基础组件名</h5><p>基础组件文件名为 base 开头，使用完整单词而不是缩写，表示基础展示类、无逻辑或无状态的组件。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ base-button.vue</span><br><span class="line">└─ base-table.vue</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ my-button.vue</span><br><span class="line">└─ my-table.vue</span><br></pre></td></tr></table></figure>

<h5 id="2-1-3-单例组件名"><a href="#2-1-3-单例组件名" class="headerlink" title="2.1.3 单例组件名"></a>2.1.3 单例组件名</h5><p>单例组件文件名为 the 开头，作用是在每个页面只用一次，比如网页顶部的导航栏，底部的版权地址信息，这些组件不会接受 prop 传参。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ the-header.vue</span><br><span class="line">└─ the-footer.vue</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ header.vue</span><br><span class="line">└─ footer.vue</span><br></pre></td></tr></table></figure>

<h5 id="2-1-4-紧密耦合的组件名"><a href="#2-1-4-紧密耦合的组件名" class="headerlink" title="2.1.4 紧密耦合的组件名"></a>2.1.4 紧密耦合的组件名</h5><p>如果一个组件只在某个父组件的场景下有意义，这层关系应该体现在其名字上，因为编辑器通常会按字母顺序组织文件，所以这样做可以把相关联的文件排在一起。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ todo-list.vue</span><br><span class="line">├─ todo-list-item.vue</span><br><span class="line">└─ todo-list-item-button.vue</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">├─ todo-list.vue</span><br><span class="line">├─ todo-item.vue</span><br><span class="line">└─ todo-button.vue</span><br></pre></td></tr></table></figure>

<h4 id="2-2-公用组件"><a href="#2-2-公用组件" class="headerlink" title="2.2 公用组件"></a>2.2 公用组件</h4><h5 id="2-2-1-局部公用"><a href="#2-2-1-局部公用" class="headerlink" title="2.2.1 局部公用"></a>2.2.1 局部公用</h5><p>在当前功能的目录新建 components 文件夹，所有声明的组件放在里面，采用 PascalCase 帕斯卡命名，并且功能目录需要有 index.vue 入口文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src/views/user-info</span><br><span class="line">├─ index.vue</span><br><span class="line">└─ components/</span><br><span class="line">  ├─ BaseInfo.vue</span><br><span class="line">  └─ UserInfo.vue</span><br></pre></td></tr></table></figure>

<h5 id="2-2-2-全局公用"><a href="#2-2-2-全局公用" class="headerlink" title="2.2.2 全局公用"></a>2.2.2 全局公用</h5><p>统一放到工程目录的 src/components 下面，目录名称采用 PascalCase 帕斯卡命名，并且每个公用组件目录必须有 index.vue 入口文件和 README.md 文件 Api 说明文档。<br>在编写 README.md 文档时也需要注意，Api 文档中Attribute属性 和Event事件的命名都是要用<code>kebab-case</code>命名，不能用驼峰命名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">src/components/</span><br><span class="line">├─ PageHeader</span><br><span class="line">   ├─ index.vue</span><br><span class="line">   └─ README.md</span><br><span class="line">├─ UploadData</span><br><span class="line">   ├─ index.vue</span><br><span class="line">   └─ README.md</span><br></pre></td></tr></table></figure>

<h4 id="2-3-组件使用"><a href="#2-3-组件使用" class="headerlink" title="2.3 组件使用"></a>2.3 组件使用</h4><p>自定义组件的使用按照以下规范，除了在Dom模板中用<code>kebab-case</code>命名，其他都是用PascalCase 帕斯卡命名。</p>
<p>如果是用 viewUI，element-ui，ant-vue等 UI 框架中的组件则按照官方示例的命名规则使用。</p>
<h5 id="2-3-1-单文件组件中使用"><a href="#2-3-1-单文件组件中使用" class="headerlink" title="2.3.1 单文件组件中使用"></a>2.3.1 单文件组件中使用</h5><p>在单文件组件中用 PascalCase 帕斯卡命名，如果组件中没有内容则需要自闭合标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-3-2-字符串模板中使用"><a href="#2-3-2-字符串模板中使用" class="headerlink" title="2.3.2 字符串模板中使用"></a>2.3.2 字符串模板中使用</h5><p>在字符串模板template 中使用组件，采用 PascalCase 帕斯卡命名，如果组件中没有内容则需要自闭合标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue Vue(&#123;</span><br><span class="line">  template:`&lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;`</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="2-3-3-JS-JSX-中使用"><a href="#2-3-3-JS-JSX-中使用" class="headerlink" title="2.3.3 JS/JSX 中使用"></a>2.3.3 JS/JSX 中使用</h5><p>在 JS/JSX 的<code>render</code>函数中使用组件，采用 PascalCase 帕斯卡命名，如果组件中没有内容则需要自闭合标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#x27;#app&#x27;,</span><br><span class="line">  render: function (h) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="2-3-4-DOM-模板中使用"><a href="#2-3-4-DOM-模板中使用" class="headerlink" title="2.3.4 DOM 模板中使用"></a>2.3.4 DOM 模板中使用</h5><p>在 <code>DOM </code>模板中需要用<code>kebab-case</code>命名，因为是直接在 html 页面中使用，html 是会忽略大小写，并且不能自闭合标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  	  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">       &lt;user-info :user-detail=&quot;userDetail&quot;&gt;&lt;/user-info&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-命名规则"><a href="#3-命名规则" class="headerlink" title="3.命名规则"></a>3.命名规则</h3><h4 id="3-1-布尔值命名"><a href="#3-1-布尔值命名" class="headerlink" title="3.1 布尔值命名"></a>3.1 布尔值命名</h4><p>布尔值是两种逻辑状态的变量<code>真</code>和<code>假</code>，对应<code> true</code> 和<code> false</code>，也可以用数字 1 和 0 表示真假。<br>推荐命名方式为 is + 动词（现在进行时）/ 形容词，但是有些场景下也可以不用写 is 开头。</p>
<ul>
<li>场景：可见性 / 进行中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;isShow&quot;: &quot;是否显示&quot;,</span><br><span class="line">  &quot;isVisible&quot;: &quot;是否可见&quot;,</span><br><span class="line">  &quot;isLoading&quot;: &quot;是否处于加载中&quot;,</span><br><span class="line">  &quot;isConnecting&quot;: &quot;是否处于连接中&quot;,</span><br><span class="line">  &quot;isValidating&quot;: &quot;正在验证中&quot;,</span><br><span class="line">  &quot;isDoing&quot;: &quot;正在进行中&quot;,</span><br><span class="line">  &quot;isRunning&quot;: &quot;正在运行中&quot;,</span><br><span class="line">  &quot;isListening&quot;: &quot;正在监听中&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：属性 / 状态</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;isDisabled&quot;: &quot;是否禁用&quot;,</span><br><span class="line">  &quot;isEdit&quot;: &quot;是否可编辑&quot;,</span><br><span class="line">  &quot;isAdd&quot;: &quot;是否可增加&quot;,</span><br><span class="line">  &quot;isUpdate&quot;: &quot;是否可修改&quot;,</span><br><span class="line">  &quot;isRemove&quot;: &quot;是否可删除&quot;,</span><br><span class="line">  &quot;isClearable&quot;: &quot;是否可清空&quot;,</span><br><span class="line">  &quot;isReadonly&quot;: &quot;是否只读&quot;,</span><br><span class="line">  &quot;isExpand&quot;: &quot;是否可展开&quot;,</span><br><span class="line">  &quot;isShrink&quot;: &quot;是否可收缩&quot;,</span><br><span class="line">  &quot;isChecked&quot;: &quot;是否选中&quot;,</span><br><span class="line">  &quot;isClick&quot;: &quot;是否可点击&quot;,</span><br><span class="line">  &quot;isDrag&quot;: &quot;是否可拖拽&quot;,</span><br><span class="line">  &quot;isOpen&quot;: &quot;是否打开&quot;,</span><br><span class="line">  &quot;isClose&quot;: &quot;是否打开&quot;,</span><br><span class="line">  &quot;isChoice&quot;: &quot;是否选择（复选框，单选框）&quot;,</span><br><span class="line">  &quot;isSelect&quot;: &quot;是否选择（下拉框，列表）&quot;,</span><br><span class="line">  &quot;isConfig&quot;: &quot;是否可配置&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：弹框显示 / 隐藏</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 组合1-基础表单</span><br><span class="line">  &quot;addModal&quot;: &quot;新增弹框&quot;,</span><br><span class="line">  &quot;editModal&quot;: &quot;编辑弹框&quot;,</span><br><span class="line">  &quot;detailModal&quot;: &quot;详情弹框&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2-业务相关</span><br><span class="line">  &quot;syncDataModal&quot;: &quot;同步数据弹框&quot;,</span><br><span class="line">  &quot;addUserModal&quot;: &quot;新增用户弹框&quot;,</span><br><span class="line">  &quot;userInfoModal&quot;: &quot;用户信息弹框&quot;,</span><br><span class="line">  &quot;assignPermissionModal&quot;: &quot;分配权限弹框&quot;,</span><br><span class="line">  &quot;departTreeModal&quot;: &quot;部门树弹框&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-时间变量命名"><a href="#3-2-时间变量命名" class="headerlink" title="3.2 时间变量命名"></a>3.2 时间变量命名</h4><p>和时间相关的变量，必须带有<code>date / month / year / time / hour / minutes / seconds</code>等等和时间相关的。</p>
<ul>
<li>场景：快捷日期</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;now&quot;: &quot;此刻&quot;,</span><br><span class="line">  &quot;today&quot;: &quot;今天&quot;,</span><br><span class="line">  &quot;yesterday&quot;: &quot;昨天&quot;,</span><br><span class="line">  &quot;tomorrow&quot;: &quot;明天&quot;,</span><br><span class="line">  &quot;workday&quot;: &quot;工作日&quot;,</span><br><span class="line">  &quot;weekend&quot;: &quot;周末（周六和周日）&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：开始 / 结束</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;startDate&quot;: &quot;是否禁用&quot;,</span><br><span class="line">  &quot;endDate&quot;: &quot;是否可编辑&quot;,</span><br><span class="line">  &quot;startTime&quot;: &quot;是否可增加&quot;,</span><br><span class="line">  &quot;endTime&quot;: &quot;是否可修改&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：上下 / 前后</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;prevMonth&quot;: &quot;上一月&quot;,</span><br><span class="line">  &quot;nextMonth&quot;: &quot;下一月&quot;,</span><br><span class="line">  &quot;prevYear&quot;: &quot;上一年&quot;,</span><br><span class="line">  &quot;nextYear&quot;: &quot;下一年&quot;,</span><br><span class="line">  &quot;beforeCurrentDate&quot;: &quot;当前日期之前&quot;,</span><br><span class="line">  &quot;afterCurrentDate&quot;: &quot;当前日期之后&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-数组变量命名"><a href="#3-3-数组变量命名" class="headerlink" title="3.3 数组变量命名"></a>3.3 数组变量命名</h4><p>数组主要有 复数形式 和 xxxList 形式，简单的区别是 复数形式 的适合前端本身声明的数组，xxxList 形式的适合后台接口返回的数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 前端声明变量</span><br><span class="line">  &quot;users&quot;: &quot;用户列表&quot;,</span><br><span class="line">  &quot;menus&quot;: &quot;菜单列表&quot;,</span><br><span class="line">  &quot;selectNodes&quot;: &quot;选中节点列表&quot;,</span><br><span class="line"></span><br><span class="line">  // 后台返回数据接收变量</span><br><span class="line">  &quot;userList&quot;: &quot;用户列表&quot;,</span><br><span class="line">  &quot;menuList&quot;: &quot;菜单列表&quot;,</span><br><span class="line">  &quot;statusList&quot;: &quot;状态列表&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-选项变量命名"><a href="#3-4-选项变量命名" class="headerlink" title="3.4 选项变量命名"></a>3.4 选项变量命名</h4><p>主要针对的是单选框，复选框，下拉框，选项卡等元素数据。<br>常见的词汇有：title， name，label，field，text，id，key，value，children，index，nodes等。<br>其中 title，name，label，text，field作为选项显示名，id，key，value 用于唯一标识，children，nodes用于包含子节点内容。</p>
<ul>
<li>场景：复选 / 单选 / 下拉</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 常用组合</span><br><span class="line">  &quot;label&quot;: &quot;标题&quot;,</span><br><span class="line">  &quot;value&quot;: &quot;值&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合1</span><br><span class="line">  &quot;title&quot;: &quot;标题&quot;,</span><br><span class="line">  &quot;value&quot;: &quot;值&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;text&quot;: &quot;文本&quot;,</span><br><span class="line">  &quot;value&quot;: &quot;值&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合3</span><br><span class="line">  &quot;id&quot;: &quot;标题&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;值&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合4</span><br><span class="line">  &quot;field&quot;: &quot;标题&quot;,</span><br><span class="line">  &quot;value&quot;: &quot;值&quot;,</span><br><span class="line">  &quot;index&quot;: &quot;标题&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：选择项 / 激活项</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;activeName&quot;: &quot;激活的项名称&quot;,</span><br><span class="line">  &quot;activeTab&quot;: &quot;激活的选项卡&quot;,</span><br><span class="line">  &quot;currentPage&quot;: &quot;当前页&quot;,</span><br><span class="line">  &quot;currentIndex&quot;: &quot;当前选项的下标&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-5-Api-接口命名"><a href="#3-5-Api-接口命名" class="headerlink" title="3.5 Api 接口命名"></a>3.5 Api 接口命名</h4><p>主要用作 axios 请求后台接口封装，接口方法使用 camelCase 驼峰命名，命名为动词+名词形式。<br>后台一般采用 <code>Restful Api</code> 规范，如下示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/api/user/list</span><br><span class="line">/api/user/detail/$&#123;id&#125;</span><br><span class="line">/api/user/add</span><br><span class="line">/api/user/update</span><br><span class="line">/api/user/delete/$&#123;id&#125;</span><br></pre></td></tr></table></figure>


<p>前端对应的接口方法命名用 <code>getXxx，addXxx，updateXxx，deleteXxx </code>这几种命名形式，并且一定要写注释，注释格式为<code>模块名-方法</code>描述，如下示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">用户管理-分页列表</span><br><span class="line">*/</span><br><span class="line">export const getUserList = (params) =&gt; &#123;</span><br><span class="line">  return axios.get(&quot;/api/user/list&quot;, params);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">用户管理-详情</span><br><span class="line">*/</span><br><span class="line">export const getUserDetail = (params) =&gt; &#123;</span><br><span class="line">  return axios.get(`/api/user/detail/$&#123;params.id&#125;`);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">用户管理-新增</span><br><span class="line">*/</span><br><span class="line">export const addUser = (data) =&gt; &#123;</span><br><span class="line">  return axios.post(&quot;/api/user/add&quot;, data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">用户管理-修改</span><br><span class="line">*/</span><br><span class="line">export const updateUser = (params) =&gt; &#123;</span><br><span class="line">  return axios.post(&quot;/api/user/update&quot;, data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">用户管理-删除</span><br><span class="line">*/</span><br><span class="line">export const deleteUser = (params) =&gt; &#123;</span><br><span class="line">  return axios.get(`/api/user/delete/$&#123;params.id&#125;`);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="3-6传参属性命名"><a href="#3-6传参属性命名" class="headerlink" title="3.6传参属性命名"></a>3.6传参属性命名</h4><ul>
<li>场景：普通 attribute<br>属性类型是 String，Number，Boolean，Object，Array，Date 这几种数据类型，采用 <code>名词</code> 或者 <code>名词+修饰词</code> 形式。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;class-name&quot;: &quot;类名&quot;,</span><br><span class="line">  &quot;z-index&quot;: &quot;层级&quot;,</span><br><span class="line">  &quot;fullscreen&quot;: &quot;全屏显示&quot;,</span><br><span class="line">  &quot;show-upload-list&quot;: &quot;是否展示上传文件列表&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：传参 function<br>组件除了能传普通的数据类型，还能传递 <code>function</code>，采用<code>介词+动词/形容词</code>形式，注意这里事件名是允许用 <code>on-xx</code> 形式的，用来区分该 <code>props</code> 传递的是个函数。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;on-success&quot;: &quot;上传成功&quot;,</span><br><span class="line">  &quot;on-progress&quot;: &quot;上传进度&quot;,</span><br><span class="line">  &quot;on-error&quot;: &quot;上传失败&quot;,</span><br><span class="line">  &quot;on-preview&quot;: &quot;预览&quot;,</span><br><span class="line">  &quot;before-upload&quot;: &quot;上传之前&quot;,</span><br><span class="line">  &quot;before-close&quot;: &quot;关闭之前&quot;,</span><br><span class="line">  &quot;after-close&quot;: &quot;关闭之后&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-7-函数命名"><a href="#3-7-函数命名" class="headerlink" title="3.7 函数命名"></a>3.7 函数命名</h4><ul>
<li>场景：绑定事件监听<br>绑定的事件名采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。因为在 <code>Dom 模板</code>中的事件监听，由于 <code>HTML </code>中是不区分大小写的，<code>Vue </code>会自动转换事件监听为全小写，所以推荐 始终使用<code> kebab-case</code> 的命名。<br>事件的命名采用 <code>动词形式</code>，事件绑定本身就是 <code>v-on</code>指令，不能写成<code>v-on:on-close</code>，所以绑定的事件统一都不用<code>on-xx</code>的形式。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 原生事件监听</span><br><span class="line">  &quot;input&quot;: &quot;输入&quot;,</span><br><span class="line">  &quot;change&quot;: &quot;改变&quot;,</span><br><span class="line">  &quot;blur&quot;: &quot;失去焦点&quot;,</span><br><span class="line">  &quot;focus&quot;: &quot;聚焦&quot;,</span><br><span class="line">  &quot;submit&quot;: &quot;提交&quot;,</span><br><span class="line">  &quot;keyup&quot;: &quot;提交&quot;,</span><br><span class="line">  &quot;keydown&quot;: &quot;提交&quot;,</span><br><span class="line">  &quot;enter&quot;: &quot;提交&quot;,</span><br><span class="line">  &quot;submit&quot;: &quot;提交&quot;,</span><br><span class="line"></span><br><span class="line">  // 自定义事件监听</span><br><span class="line">  &quot;preview&quot;: &quot;预览&quot;,</span><br><span class="line">  &quot;clear&quot;: &quot;清空&quot;,</span><br><span class="line">  &quot;cancel&quot;: &quot;关闭&quot;,</span><br><span class="line">  &quot;open&quot;: &quot;打开&quot;,</span><br><span class="line">  &quot;select-change&quot;: &quot;选择&quot;,</span><br><span class="line">  &quot;select-all&quot;: &quot;选择所有&quot;,</span><br><span class="line">  &quot;selection-change&quot;: &quot;选项改变&quot;,</span><br><span class="line">  &quot;sort-change&quot;: &quot;排序&quot;,</span><br><span class="line">  &quot;row-click&quot;: &quot;单击行&quot;,</span><br><span class="line">  &quot;row-dblclick&quot;: &quot;双击行&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在声明 <code>事件监听函数</code> 或者声明 <code>props 绑定函数</code> 的时候有些是需要用 <code>onXxx</code> 的形式，有些则可以不带 <code>on</code>，具体要看当前环境中的作用和语义。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 组合1</span><br><span class="line">function onInput() &#123;&#125;</span><br><span class="line">function onPreview() &#123;&#125;</span><br><span class="line">function onSelectAll() &#123;&#125;</span><br><span class="line">function onRowClick() &#123;&#125;</span><br><span class="line">function onSelectionChange() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合2</span><br><span class="line">function beforeUpload() &#123;&#125;</span><br><span class="line">function beforeOpen() &#123;&#125;</span><br><span class="line">function beforeClose() &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：自定义事件<br>自定义事件名使用 <code>camelCase</code> 驼峰命名，命名为<code>动词+名词</code>形式。<br>名称不能过长，要明确表达此事件处理的作用，避免望文不知义。<br>可以参考 <code>JavaScript 规范</code>中 <code>函数命名</code> 章节，使用常用的动词来命名。</li>
</ul>
<p>一般由页面直接或者间接发起的操作，用 <code>handleXxx</code> 的形式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function handleSearch() &#123;&#125;</span><br><span class="line">function handleReset() &#123;&#125;</span><br><span class="line">function handleResize() &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>由方法发起调用的操作，用<code>动词</code>开头的形式，命名看方法的用途决定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function resetQuery() &#123;&#125;</span><br><span class="line">function resetForm() &#123;&#125;</span><br><span class="line">function resetSelect() &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>改变数据结果，切换状态的显示的操作，也以<code>动词+形容词/名词</code>形式，比如 Modal 的展示隐藏，分页条的改变。</p>
<p>在其他场景下，很多命名方式也都可以用<code>动词+形容词/名词</code>形式，例如<code>select+范围</code>，<code>元素+click</code>，<code>change+元素</code>，<code>clear+元素</code>，这些动词开头，用在改变元素，改变分页，改变业务状态，切换 Modal 弹框显示等等。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 组合1-元素操作</span><br><span class="line">function selectOne() &#123;&#125;</span><br><span class="line">function selectAll() &#123;&#125;</span><br><span class="line">function tabClick() &#123;&#125;</span><br><span class="line">function switchTab() &#123;&#125;</span><br><span class="line">function clearName() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合2-分页</span><br><span class="line">function changePageNum() &#123;&#125;</span><br><span class="line">function changePageSize() &#123;&#125;</span><br><span class="line">function jumpPage() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合3-业务弹框</span><br><span class="line">function showAddModal() &#123;&#125;</span><br><span class="line">function showEditModal() &#123;&#125;</span><br><span class="line">function showDetailModal() &#123;&#125;</span><br><span class="line">function showSyncDataModal() &#123;&#125;</span><br><span class="line">function showUserInfoModal() &#123;&#125;</span><br><span class="line">function showDepartTreeModal() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合4-业务状态</span><br><span class="line">function changeUserStatus() &#123;&#125;</span><br><span class="line">function changeUserStatus() &#123;&#125;</span><br><span class="line">function changeUserPermission() &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：异步处理方法<br>在了解过接口命名规则之后，前端页面中使用 <code>Api 接口</code>的异步事件，这些一般比较固定，以下组合列举出了一些场景。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 组合1</span><br><span class="line">// 查询的是后台返回的列表，推荐是用 queryXxxList 这种形式</span><br><span class="line">function queryList() &#123;&#125;</span><br><span class="line">function queryMenuList() &#123;&#125;</span><br><span class="line">function queryUserList() &#123;&#125;</span><br><span class="line">function queryDetail() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合2</span><br><span class="line">// 查询的是后台返回的数据信息，详情等，推荐用 queryXxx+Data/Info/Detail 这种形式</span><br><span class="line">function queryProcessData() &#123;&#125;</span><br><span class="line">function queryStepInfo() &#123;&#125;</span><br><span class="line">function queryTaskDetail() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// 组合3</span><br><span class="line">// 页面增删查改的操作，用 handleXxx 的形式</span><br><span class="line">function handleAdd() &#123;&#125;</span><br><span class="line">function handleEdit() &#123;&#125;</span><br><span class="line">function handleDelete() &#123;&#125;</span><br><span class="line">function handleSubmit() &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：路由页面跳转<br>路由页面的跳转一般只有 <code>goXxx</code> 和 <code>toXxx</code> 两种，两者使用差别不大，只在少部分页面跳转上有语义的差别。<br>比如 去首页，返回上级 这种表示只跳到这些页面就结束行为的用 <code>goXxx</code> 比较合适。<br>比如 跳转到详情页面，跳转到审批页面 这种表示跳到有数据信息的页面，并且可能带传参的用 <code>toXxx</code> 比较合适。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 组合1</span><br><span class="line">  &quot;goHome&quot;: &quot;去首页&quot;,</span><br><span class="line">  &quot;goBack&quot;: &quot;返回页面&quot;,</span><br><span class="line">  &quot;goMailBox&quot;: &quot;去邮箱&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;toUserDetail&quot;: &quot;跳转到用户详情&quot;,</span><br><span class="line">  &quot;toApprove&quot;: &quot;跳转到审批页面&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合3</span><br><span class="line">  &quot;navigateToHome&quot;: &quot;导航到首页&quot;,</span><br><span class="line">  &quot;redirectToLogin&quot;: &quot;重定向到登录页&quot;,</span><br><span class="line">  &quot;switchHome&quot;: &quot;切换到首页&quot;,</span><br><span class="line">  &quot;switchOrder&quot;: &quot;切换到订单页&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：数据的加工<br>针对数据在不同场景下的转换处理操作，比如格式化，排序，过滤，转换，切换，比较，去除空格，添加，区间，相差等等。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 组合1</span><br><span class="line">  &quot;formatThousand&quot;: &quot;格式化数字千分位&quot;,</span><br><span class="line">  &quot;formatRmbChinese&quot;: &quot;格式化人民币金额大写&quot;,</span><br><span class="line">  &quot;formatStartOfName&quot;: &quot;格式化姓名中间为星号&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;sortUserList&quot;: &quot;用户列表排序&quot;,</span><br><span class="line">  &quot;sortOrder&quot;: &quot;订单排序&quot;,</span><br><span class="line">  &quot;sortByName&quot;: &quot;根据名称排序&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合3</span><br><span class="line">  &quot;filterUser&quot;: &quot;过滤用户&quot;,</span><br><span class="line">  &quot;filterByName&quot;: &quot;通过名称过滤&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合4</span><br><span class="line">  &quot;convertCurrency&quot;: &quot;转换货币单位&quot;,</span><br><span class="line">  &quot;convertAmount&quot;: &quot;转换金额&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合5</span><br><span class="line">  &quot;toggleClass&quot;: &quot;切换演示&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合6</span><br><span class="line">  &quot;compareDate&quot;: &quot;比较日期&quot;,</span><br><span class="line">  &quot;compareAge&quot;: &quot;比较年龄大小&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合7</span><br><span class="line">  &quot;trimStart&quot;: &quot;去除字符串开始位置的空格&quot;,</span><br><span class="line">  &quot;trimEnd&quot;: &quot;去除字符串结束位置的空格&quot;,</span><br><span class="line">  &quot;trimAll&quot;: &quot;去除字符串中全部的空格&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合8</span><br><span class="line">  &quot;addDate&quot;: &quot;日期加天&quot;,</span><br><span class="line">  &quot;addMonth&quot;: &quot;日期加月&quot;,</span><br><span class="line">  &quot;addYear&quot;: &quot;日期加年&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合8</span><br><span class="line">  &quot;diffDay&quot;: &quot;相差的天数&quot;,</span><br><span class="line">  &quot;diffWeek&quot;: &quot;相差的周数&quot;,</span><br><span class="line">  &quot;diffMonth&quot;: &quot;相差的月数&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-方法参数命名"><a href="#3-8-方法参数命名" class="headerlink" title="3.8 方法参数命名"></a>3.8 方法参数命名</h4><p>方法中参数名称和数量是根据具体使用来决定，但是还是有一些固定的模式可以参考。比如监听属性的新值和旧值，reduce 方法的上个值和当前值，回调函数的参数值等等。</p>
<ul>
<li>场景：新值 / 旧值<br>用于 <code>Vue</code> 的 <code>watch</code> 属性监听的回调参数。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;newVal&quot;: &quot;新值&quot;,</span><br><span class="line">  &quot;oldVal&quot;: &quot;旧值&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：上个值 / 下个值 / 当前值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 组合1</span><br><span class="line">  &quot;from&quot;: &quot;从...&quot;,</span><br><span class="line">  &quot;to&quot;: &quot;到...&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;prev&quot;: &quot;上一个...&quot;,</span><br><span class="line">  &quot;next&quot;: &quot;下一个...&quot;,</span><br><span class="line">  &quot;cur&quot;: &quot;当前&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合3</span><br><span class="line">  &quot;source&quot;: &quot;源&quot;,</span><br><span class="line">  &quot;target&quot;: &quot;目标&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合4</span><br><span class="line">  &quot;start&quot;: &quot;开始&quot;,</span><br><span class="line">  &quot;end&quot;: &quot;结束&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合5</span><br><span class="line">  &quot;before&quot;: &quot;在之前&quot;,</span><br><span class="line">  &quot;after&quot;: &quot;在之后&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合6</span><br><span class="line">  &quot;prefix&quot;: &quot;前缀&quot;,</span><br><span class="line">  &quot;suffix&quot;: &quot;后缀&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>异步数据回调<br>用于 <code>Promise</code> 的 <code>then</code> 方法参数，<code>await</code> 返回的值等，可选择的词汇有：<code>res / data / json</code>，推荐使用 <code>response</code> 简写的 <code>res</code>。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 示例1</span><br><span class="line">getUserInfo().then((res) =&gt; &#123;&#125;);</span><br><span class="line">// 示例2</span><br><span class="line">const res = await getUserInfo();</span><br></pre></td></tr></table></figure>

<ul>
<li>场景：其他参数命名<br>除了以上这些，实际中还有其他众多类型的应用场景，以下列举出开发中常用的一些。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 组合1</span><br><span class="line">  &quot;str&quot;: &quot;字符串&quot;,</span><br><span class="line">  &quot;char&quot;: &quot;单个字符&quot;,</span><br><span class="line">  &quot;num&quot;: &quot;数字&quot;,</span><br><span class="line">  &quot;arr&quot;: &quot;数组值&quot;,</span><br><span class="line">  &quot;obj&quot;: &quot;对象值&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;len&quot;: &quot;数组长度&quot;,</span><br><span class="line">  &quot;index&quot;: &quot;下标&quot;,</span><br><span class="line">  &quot;size&quot;: &quot;大小&quot;,</span><br><span class="line">  &quot;unit&quot;: &quot;单位&quot;,</span><br><span class="line">  &quot;count&quot;: &quot;数量&quot;,</span><br><span class="line">  &quot;amount&quot;: &quot;金额&quot;,</span><br><span class="line">  &quot;timer&quot;: &quot;定时器&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合2</span><br><span class="line">  &quot;n&quot;: &quot;次数&quot;,</span><br><span class="line">  &quot;p&quot;: &quot;数值的精度&quot;,</span><br><span class="line">  &quot;x&quot;: &quot;x轴坐标&quot;,</span><br><span class="line">  &quot;y&quot;: &quot;y轴坐标&quot;,</span><br><span class="line">  &quot;radix&quot;: &quot;基数&quot;,</span><br><span class="line">  &quot;decimals&quot;: &quot;小数位数&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合3</span><br><span class="line">  &quot;rate&quot;: &quot;比例&quot;,</span><br><span class="line">  &quot;status&quot;: &quot;状态&quot;,</span><br><span class="line">  &quot;bool&quot;: &quot;布尔值&quot;,</span><br><span class="line">  &quot;asc&quot;: &quot;升序&quot;,</span><br><span class="line">  &quot;desc&quot;: &quot;降序&quot;,</span><br><span class="line">  &quot;pid&quot;: &quot;父id&quot;,</span><br><span class="line">  &quot;cid&quot;: &quot;子id&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合4</span><br><span class="line">  &quot;reg&quot;: &quot;正则&quot;,</span><br><span class="line">  &quot;func&quot;: &quot;函数&quot;,</span><br><span class="line">  &quot;callback&quot;: &quot;回调函数&quot;,</span><br><span class="line"></span><br><span class="line">  // 组合5</span><br><span class="line">  &quot;source&quot;: &quot;数据源&quot;,</span><br><span class="line">  &quot;target&quot;: &quot;目标源&quot;,</span><br><span class="line">  &quot;root&quot;: &quot;根&quot;,</span><br><span class="line">  &quot;elem&quot;: &quot;元素&quot;,</span><br><span class="line">  &quot;children&quot;: &quot;子级&quot;,</span><br><span class="line">  &quot;parent&quot;: &quot;父级&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-9-接口数据响应"><a href="#3-9-接口数据响应" class="headerlink" title="3.9 接口数据响应"></a>3.9 接口数据响应</h4><p>接口一般是后台来给，前端如果用 <code>nodejs</code> 做后台服务器，接口响应报文体也需要制定一套规则。</p>
<ul>
<li>Restful Api 命名<br>在<code>接口命名</code>章节中已经列举了 api 的命名和调用方法规范，前端一般用 <code>nodejs+express/koa2</code> 就可以实现 <code>Restful Api </code>方式。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/api/user/list</span><br><span class="line">/api/user/detail/$&#123;id&#125;</span><br><span class="line">/api/user/add</span><br><span class="line">/api/user/update</span><br><span class="line">/api/user/delete/$&#123;id&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>code 码<br>前端用 <code>nodejs</code> 做后台，业务场景不会太过复杂。 简单的场景可以用以下的定义 <code>code</code>，复杂的业务需要指定单独的<code>业务 code</code>。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">200 # 成功</span><br><span class="line">400 # 请求参数错误</span><br><span class="line">403 # 无权限访问</span><br><span class="line">404 # 请求路径无效</span><br><span class="line">500 # 服务器内部异常</span><br><span class="line">502 # 网关访问错误</span><br><span class="line">504 # 网关访问超时</span><br></pre></td></tr></table></figure>

<ul>
<li>响应数据结构<br>分页列表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;: 200,</span><br><span class="line">  &quot;message&quot;: &quot;查询成功&quot;,</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;result&quot;: [</span><br><span class="line">      &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;小红&quot; &#125;,</span><br><span class="line">      &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;小红&quot; &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;total&quot;: 0,</span><br><span class="line">    &quot;page&quot;: 1,</span><br><span class="line">    &quot;size&quot;: 10</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>增删改，详情等返回非数组结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;code&quot;: 200,</span><br><span class="line">  &quot;message&quot;: &quot;操作成功&quot;,</span><br><span class="line">  &quot;data&quot;: &#123; &quot;id&quot;: 1, &quot;name&quot;: &quot;小红&quot; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.10 模板结构顺序<br>在 <code>HTML 规范</code> 的 <code>结构顺序</code> 这一章节，已经大致描述了编写页面的结构和顺序，在 <code>Vue 模板</code>中也一样，自上而下，从左到右，保持一定的顺序。<br><code>Vue 模板</code>中，采用了<code>容器</code>和 <code>盒子 </code>结合的语义化结构，先划分不同的容器空间，每个容器里再划分具体的盒子内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!-- header --&gt;</span><br><span class="line">    &lt;div class=&quot;header-container&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- main --&gt;</span><br><span class="line">    &lt;div class=&quot;main-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;left-box&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;content-box&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- footer --&gt;</span><br><span class="line">    &lt;div class=&quot;footer-container&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- modal 弹框 --&gt;</span><br><span class="line">    &lt;!-- 新增，编辑，详情等等弹框都放在这里 --&gt;</span><br><span class="line">    &lt;el-modal&gt;&lt;/el-modal&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- components 组件 --&gt;</span><br><span class="line">    &lt;!-- 引入的外部组件放在这里，按照作用顺序排列：自定义组件》第三方的排在最后 --&gt;</span><br><span class="line">    &lt;UserInfo /&gt;</span><br><span class="line">    &lt;BaseTable /&gt;</span><br><span class="line">    &lt;UploadData /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-11-CRUD-模板示例"><a href="#3-11-CRUD-模板示例" class="headerlink" title="3.11 CRUD 模板示例"></a>3.11 CRUD 模板示例</h4><p>通过上面的 vue 项目中的不同种类的命名规则，以下是一段代码示例模板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!-- header --&gt;</span><br><span class="line">    &lt;div class=&quot;header-container&quot;&gt;</span><br><span class="line">      &lt;!-- 查询条件 --&gt;</span><br><span class="line">      &lt;div class=&quot;search-box&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;listQuery.name&quot;</span><br><span class="line">          clearable</span><br><span class="line">          placeholder=&quot;姓名&quot;</span><br><span class="line">          style=&quot;width:300px&quot;</span><br><span class="line">        &gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;handleSearch&quot;&gt;查询&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;handleReset&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 按钮操作 --&gt;</span><br><span class="line">      &lt;div class=&quot;operate-box&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          icon=&quot;el-icon-plus&quot;</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          @click=&quot;handleShowAddModal&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          添加</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- main --&gt;</span><br><span class="line">    &lt;div class=&quot;main-container&quot;&gt;</span><br><span class="line">      &lt;!-- 表格列表 --&gt;</span><br><span class="line">      &lt;div class=&quot;table-box&quot;&gt;</span><br><span class="line">        &lt;el-table v-loading=&quot;listLoading&quot; :data=&quot;list&quot;&gt;</span><br><span class="line">          &lt;el-table-column align=&quot;center&quot; label=&quot;序号&quot; width=&quot;70&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;&#123; row, $index &#125;&quot;&gt;</span><br><span class="line">              &#123;&#123; listQuery.pageSize * (listQuery.pageNo - 1) + ($index + 1) &#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column align=&quot;center&quot; label=&quot;姓名&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;&#123; row, $index &#125;&quot;&gt;</span><br><span class="line">              &lt;el-link :underline=&quot;false&quot; @click=&quot;toUserDetail&quot;&gt;</span><br><span class="line">                &#123;&#123; row.name &#125;&#125;</span><br><span class="line">              &lt;/el-link&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column align=&quot;center&quot; label=&quot;创建时间&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;&#123; row, $index &#125;&quot;&gt;</span><br><span class="line">              &#123;&#123; row.createTime &#125;&#125;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column align=&quot;center&quot; label=&quot;操作&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;&#123; row, $index &#125;&quot;&gt;</span><br><span class="line">              &lt;el-link</span><br><span class="line">                type=&quot;primary&quot;</span><br><span class="line">                :underline=&quot;false&quot;</span><br><span class="line">                @click=&quot;handleShowEditModal(row)&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                编辑</span><br><span class="line">              &lt;/el-link&gt;</span><br><span class="line">              &lt;el-link</span><br><span class="line">                type=&quot;danger&quot;</span><br><span class="line">                :underline=&quot;false&quot;</span><br><span class="line">                @click=&quot;handleDelete(row)&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                删除</span><br><span class="line">              &lt;/el-link&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 分页 --&gt;</span><br><span class="line">      &lt;div class=&quot;pagination-container&quot;&gt;</span><br><span class="line">        &lt;el-pagination</span><br><span class="line">          background</span><br><span class="line">          :current-page.sync=&quot;listQuery.pageNo&quot;</span><br><span class="line">          :page-sizes=&quot;[10, 20, 30, 50]&quot;</span><br><span class="line">          :page-size=&quot;listQuery.pageSize&quot;</span><br><span class="line">          :total=&quot;listTotal&quot;</span><br><span class="line">          layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">          @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">          @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">        &gt;&lt;/el-pagination&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- modal 弹框 --&gt;</span><br><span class="line">    &lt;!-- 新增或编辑 --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      :title=&quot;editForm.id ? &#x27;编辑&#x27; : &#x27;添加&#x27;&quot;</span><br><span class="line">      :visible.sync=&quot;editModal&quot;</span><br><span class="line">      width=&quot;960px&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-form</span><br><span class="line">        :model=&quot;editForm&quot;</span><br><span class="line">        :rules=&quot;editFormRules&quot;</span><br><span class="line">        ref=&quot;editFormRef&quot;</span><br><span class="line">        label-suffix=&quot;：&quot;</span><br><span class="line">        label-width=&quot;100px&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;el-form-item label=&quot;姓名&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;editForm.name&quot;</span><br><span class="line">            placeholder=&quot;请输入姓名&quot;</span><br><span class="line">            style=&quot;width: 600px&quot;</span><br><span class="line">            clearable</span><br><span class="line">          &gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; style=&quot;text-align: center&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;editModal = false&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;handleSubmit&quot;&gt;确定&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 引入公用工具类</span><br><span class="line">import util from &quot;@/utils&quot;;</span><br><span class="line">// 引入api</span><br><span class="line">import &#123; getUserList, addUser, updateUser, deleteUser &#125; from &quot;@/api/user&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 分页查询</span><br><span class="line">      list: [],</span><br><span class="line">      listTotal: 0,</span><br><span class="line">      listLoading: false,</span><br><span class="line">      listQuery: &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        pageNo: 1,</span><br><span class="line">        pageSize: 10,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 新增或编辑</span><br><span class="line">      editModal: false,</span><br><span class="line">      editForm: &#123;</span><br><span class="line">        id: &quot;&quot;,</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      editFormRules: &#123;</span><br><span class="line">        name: [</span><br><span class="line">          &#123;</span><br><span class="line">            required: true,</span><br><span class="line">            message: &quot;请输入姓名&quot;,</span><br><span class="line">            trigger: &quot;blur&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      // 当前行数据</span><br><span class="line">      selectRow: &#123;&#125;,</span><br><span class="line">      // 当前多选行数据</span><br><span class="line">      selectRows: [],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.queryList();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 查询分页列表</span><br><span class="line">     */</span><br><span class="line">    queryList() &#123;</span><br><span class="line">      this.listLoading = true;</span><br><span class="line">      getUserList(&#123; name: this.listQuery.name &#125;)</span><br><span class="line">        .then((res) =&gt; &#123;</span><br><span class="line">          this.listLoading = false;</span><br><span class="line">          if (res.code == &quot;200&quot;) &#123;</span><br><span class="line">            this.list = res.data.result;</span><br><span class="line">            this.listTotal = res.data.total;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.$message.error(res.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((err) =&gt; &#123;</span><br><span class="line">          this.listLoading = false;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 分页</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">      this.listQuery.pageSize = val;</span><br><span class="line">      this.listQuery();</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">      this.listQuery.pageNo = val;</span><br><span class="line">      this.listQuery();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 重置分页</span><br><span class="line">     */</span><br><span class="line">    handleReset() &#123;</span><br><span class="line">      this.listQuery = &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        pageNo: &quot;&quot;,</span><br><span class="line">        pageSize: 10,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加操作</span><br><span class="line">     */</span><br><span class="line">    handleShowAddModal() &#123;</span><br><span class="line">      this.editForm = &#123; id: &quot;&quot;, name: &quot;&quot; &#125;;</span><br><span class="line">      if (this.$refs.editFormRef) &#123;</span><br><span class="line">        this.$refs.editFormRef.resetFields();</span><br><span class="line">      &#125;</span><br><span class="line">      this.editModal = true;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 修改操作</span><br><span class="line">     * @param &#123;Object&#125; row 选择当前行数据</span><br><span class="line">     */</span><br><span class="line">    handleShowEditModal(row) &#123;</span><br><span class="line">      this.selectRow = row;</span><br><span class="line">      this.editForm = &#123;</span><br><span class="line">        id: row.id,</span><br><span class="line">        name: row.name,</span><br><span class="line">      &#125;;</span><br><span class="line">      this.editModal = true;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 提交操作</span><br><span class="line">     */</span><br><span class="line">    handleSubmit() &#123;</span><br><span class="line">      this.$refs.editFormRef.validate((valid) =&gt; &#123;</span><br><span class="line">        if (valid) &#123;</span><br><span class="line">          // id不为空，则是修改</span><br><span class="line">          if (this.editForm.id) &#123;</span><br><span class="line">            this.handleUpdate();</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.handleAdd();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;submit fail&quot;);</span><br><span class="line">          return false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 添加</span><br><span class="line">    handleAdd() &#123;</span><br><span class="line">      addUser(&#123;</span><br><span class="line">        name: this.editForm.name,</span><br><span class="line">      &#125;).then((res) =&gt; &#123;</span><br><span class="line">        if ((res.code = &quot;200&quot;)) &#123;</span><br><span class="line">          this.$message.success(&quot;添加成功&quot;);</span><br><span class="line">          this.editModal = false;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.$message.error(res.message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 修改</span><br><span class="line">    handleUpdate() &#123;</span><br><span class="line">      updateUser(&#123;</span><br><span class="line">        id: this.editForm.id,</span><br><span class="line">        name: this.editForm.name,</span><br><span class="line">      &#125;).then((res) =&gt; &#123;</span><br><span class="line">        if ((res.code = &quot;200&quot;)) &#123;</span><br><span class="line">          this.$message.success(&quot;修改成功&quot;);</span><br><span class="line">          this.editModal = false;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.$message.error(res.message);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 删除操作</span><br><span class="line">     * @param &#123;Object&#125; row 选择当前行数据</span><br><span class="line">     */</span><br><span class="line">    handleDelete(row) &#123;</span><br><span class="line">      this.$confirm(&quot;确定删除该条记录吗？&quot;, &quot;提示&quot;, &#123;</span><br><span class="line">        confirmButtonText: &quot;确定&quot;,</span><br><span class="line">        cancelButtonText: &quot;取消&quot;,</span><br><span class="line">        type: &quot;warning&quot;,</span><br><span class="line">      &#125;).then(() =&gt; &#123;</span><br><span class="line">        deleteUser(&#123;</span><br><span class="line">          id: row.id,</span><br><span class="line">        &#125;).then((res) =&gt; &#123;</span><br><span class="line">          if ((res.code = &quot;200&quot;)) &#123;</span><br><span class="line">            this.$message.success(&quot;删除成功&quot;);</span><br><span class="line">            this.queryList();</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.$message.error(res.message);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 跳转详情操作</span><br><span class="line">     * @param &#123;Object&#125; row 选择当前行数据</span><br><span class="line">     */</span><br><span class="line">    toUserDetail(row) &#123;</span><br><span class="line">      this.$router.push(&#123;</span><br><span class="line">        path: &quot;/user/detail&quot;,</span><br><span class="line">        query: &#123; id: row.id &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="4-代码规范"><a href="#4-代码规范" class="headerlink" title="4.代码规范"></a>4.代码规范</h3><h5 id="4-1-代码缩进"><a href="#4-1-代码缩进" class="headerlink" title="4.1 代码缩进"></a>4.1 代码缩进</h5><p>统一使用 2 个缩进，不允许使用 Tab 制表符，全部替换为空格缩进。</p>
<h5 id="4-2-bind-on-v-slot-指令缩写"><a href="#4-2-bind-on-v-slot-指令缩写" class="headerlink" title="4.2 bind/on/v-slot 指令缩写"></a>4.2 bind/on/v-slot 指令缩写</h5><p>指令推荐都是用缩写形式</p>
<ul>
<li><code>:</code> 表示 <code>v-bind</code></li>
<li><code>@</code> 表示 <code>v-on</code></li>
<li><code>#</code>表示 <code>v-slot</code></li>
</ul>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-input :maxlength=&quot;20&quot; @input=&quot;onInput&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;div #header&gt;</span><br><span class="line">    &lt;p&gt;this is header!&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-input v-bind:maxlength=&quot;20&quot; v-on:input=&quot;onInput&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;div v-slot:header&gt;</span><br><span class="line">    &lt;p&gt;this is header!&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-3-data-必须是函数"><a href="#4-3-data-必须是函数" class="headerlink" title="4.3 data 必须是函数"></a>4.3 data 必须是函数</h5><p>当在组件中使用 data 属性的时候，它的值必须是返回一个对象的函数，因为如果直接是一个对象的话，子组件之间的属性值会互相影响。<br>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      age: 20</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">   data: &#123;</span><br><span class="line">    age: 20</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-4-v-for-设置-key"><a href="#4-4-v-for-设置-key" class="headerlink" title="4.4 v-for 设置 key"></a>4.4 v-for 设置 key</h5><p>在组件上总是必须用 key 配合 v-for，以便维护内部组件及其子树的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-for=&quot;(item, index) in list&quot; :key=&quot;index&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-5-v-if-和-v-show-选择"><a href="#4-5-v-if-和-v-show-选择" class="headerlink" title="4.5 v-if 和 v-show 选择"></a>4.5 v-if 和 v-show 选择</h5><p><code>v-if </code>和<code>v-show</code>都可以用于显示隐藏效果，但是本质上还是有区别的。<br><code>v-if</code> 是惰性的，只有条件成立时候才渲染，比较适合根据条件显示隐藏的；<br><code>v-show</code> 是不管条件真假，直接就会被渲染上，比较适合频繁切换的场景。</p>
<h5 id="4-6避免-v-if-和-v-for-一起使用"><a href="#4-6避免-v-if-和-v-for-一起使用" class="headerlink" title="4.6避免 v-if 和 v-for 一起使用"></a>4.6避免<code> v-if</code> 和 <code>v-for</code> 一起使用</h5><p>永远不要把 <code>v-if </code>和 <code>v-for</code> 同时用在同一个元素上，<code>v-for</code> 的优先级比 <code>v-if</code> 高，所以会导致先循环遍历，然后依次根据<code>v-if</code>的判断显示隐藏，会比较浪费性能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 可以列表提前通过计算属性过滤一遍 --&gt;</span><br><span class="line">  &lt;div v-for=&quot;item in userListComputed&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 也可以在最外层先包括一层，再判断 --&gt;</span><br><span class="line">  &lt;template v-if=&quot;showUser&quot;&gt;</span><br><span class="line">    &lt;div v-for=&quot;item in userList&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-7-组件-attribute-传参"><a href="#4-7-组件-attribute-传参" class="headerlink" title="4.7 组件 attribute 传参"></a>4.7 组件 attribute 传参</h5><p>在组件中属性传参使用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;UserInfo :userDetail=&quot;userDetail&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-8-多个-attribute-封装对象"><a href="#4-8-多个-attribute-封装对象" class="headerlink" title="4.8 多个 attribute 封装对象"></a>4.8 多个 attribute 封装对象</h5><p>多个 attribute 的元素应该分多行，如果属性比较多，推荐封装个到对象中传参。<br>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-if=&quot;showUser&quot;&gt;</span><br><span class="line">  &lt;!-- 多个元素分行 --&gt;</span><br><span class="line">  &lt;UserInfo</span><br><span class="line">    :id=&quot;1&quot;</span><br><span class="line">    :name=&quot;name&quot;</span><br><span class="line">    :sex=&quot;sex&quot;</span><br><span class="line">    :age=&quot;10&quot;</span><br><span class="line">    :birthday=&quot;birthday&quot;</span><br><span class="line">  &gt;&lt;/UserInfo&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 元素太多，推荐封装对象 --&gt;</span><br><span class="line">  &lt;UserInfo :user-info=&quot;user&quot;&gt;&lt;/UserInfo&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-9-带引号的-attribute-值"><a href="#4-9-带引号的-attribute-值" class="headerlink" title="4.9 带引号的 attribute 值"></a>4.9 带引号的 attribute 值</h5><p>模板中 attribute 的值需要带引号，并且需要与前面空一格，另外模板中也是可以使用模板字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-input :style=&quot;&#123; width: myWidth + &#x27;px&#x27; &#125;&quot; /&gt;</span><br><span class="line">    &lt;el-input :style=&quot;`width: $&#123;myWidth&#125;px`&quot; /&gt;</span><br><span class="line">    &lt;el-select&gt;</span><br><span class="line">      &lt;el-option</span><br><span class="line">        v-for=&quot;item in userList&quot;</span><br><span class="line">        :key=&quot;item.id&quot;</span><br><span class="line">        :label=&quot;`$&#123;item.name&#125;（$&#123;item.age&#125;岁）`&quot;</span><br><span class="line">        :value=&quot;item.id&quot;</span><br><span class="line">      &gt;&lt;/el-option&gt;</span><br><span class="line">    &lt;/el-select&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-10-组件-attribute-值的简单逻辑"><a href="#4-10-组件-attribute-值的简单逻辑" class="headerlink" title="4.10 组件 attribute 值的简单逻辑"></a>4.10 组件 attribute 值的简单逻辑</h5><p>模板中 <code>attribute</code> 的值是需要逻辑判断结果的时候，只允许用 <code>等于</code>，<code>大于</code>，<code>小于</code>这些<code>一元运算</code>，或者简单的<code>三元运算</code>判断，复杂的需要拆分为单独的计算属性或者方法。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 简单的 一元运算 --&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;name&quot; :disabled=&quot;editForm.id&quot; /&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;age&quot; :disabled=&quot;editForm.age &gt; 20&quot; /&gt;</span><br><span class="line">    &lt;!-- 简单的 三元运算 --&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;departName&quot;</span><br><span class="line">      :disabled=&quot;editForm.status == 1 ? true : false&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 需要判断多种状态的逻辑，把同类的抽取出来放到数组中也可以 --&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;departName&quot;</span><br><span class="line">      :disabled=&quot;[1,2,3].includes(editForm.status])&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 更多一点的逻辑判断，需要封装为计算属性，或者方法 --&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;departName&quot; :disabled=&quot;canEditDepartName()&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    canEditDepartName() &#123;</span><br><span class="line">      return this.editForm.age &gt; 20 || [1, 2, 3].includes(editForm.status);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 过于复杂 三元运算 --&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;departName&quot;</span><br><span class="line">      :disabled=&quot;</span><br><span class="line">        editForm.status == 1</span><br><span class="line">          ? true</span><br><span class="line">          : editForm.status == 2</span><br><span class="line">          ? true</span><br><span class="line">          : editForm.status == 3</span><br><span class="line">          ? true</span><br><span class="line">          : false</span><br><span class="line">      &quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 以下这种判断很长的也禁止这样写 --&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;departName&quot;</span><br><span class="line">      :disabled=&quot;</span><br><span class="line">        editForm.status == 1 ||</span><br><span class="line">        editForm.status == 2 ||</span><br><span class="line">        editForm.status == 3 ||</span><br><span class="line">        editForm.status == 4 ||</span><br><span class="line">        (editForm.status == 5 &amp;&amp; editForm.age &gt; 20)</span><br><span class="line">      &quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 更不能图省事直接在模板中写实际的操作代码 --&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;departName&quot;</span><br><span class="line">      :disabled=&quot;</span><br><span class="line">        findStatus.some((item) =&gt; &#123;</span><br><span class="line">          return item.status == editForm.status;</span><br><span class="line">        &#125;)</span><br><span class="line">      &quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-11-组件-attribute-属性顺序"><a href="#4-11-组件-attribute-属性顺序" class="headerlink" title="4.11 组件 attribute 属性顺序"></a>4.11 组件 attribute 属性顺序</h5><p>元素的 <code>attribute</code> 应该有统一的顺序，如果有使用 eslint 时候也会按照一定规则校验。</p>
<ul>
<li><p>样式名（可复用的元素样式排首位）<br><code>class</code></p>
</li>
<li><p>列表渲染 (创建多个变化的相同元素)<br><code>v-for</code></p>
</li>
<li><p>条件渲染 (元素是否渲染/显示)<br><code>v-if</code><br><code>v-else-if</code><br><code>v-else</code><br><code>v-show</code><br><code>v-cloak</code></p>
</li>
<li><p>渲染方式 (改变元素的渲染方式)<br><code>v-pre</code><br><code>v-once</code></p>
</li>
<li><p>自定义指令 (改变元素的属性和效果)<br><code>v-loading</code><br><code>v-input-number</code></p>
</li>
<li><p>全局唯一 (唯一性的标识)<br><code>id</code></p>
</li>
<li><p>唯一的 attribute (需要唯一值的 attribute)<br><code>ref</code><br><code>key</code></p>
</li>
<li><p>双向绑定 (把绑定和事件结合起来)<br><code>v-model</code></p>
</li>
<li><p>自定义属性 (所有自定义绑定的 attribute)<br><code>:user-name</code><br><code>user-age</code></p>
</li>
<li><p>事件 (组件事件监听器)<br><code>v-on</code></p>
</li>
<li><p>自定义事件 (所有自定义绑定的 event)<br><code>@row-click</code><br><code>@row-dblclick</code></p>
</li>
<li><p>元素内容 (覆写元素的内容)<br><code>v-html</code><br><code>v-text</code></p>
</li>
</ul>
<h5 id="4-12-组件-prop-定义"><a href="#4-12-组件-prop-定义" class="headerlink" title="4.12 组件 prop 定义"></a>4.12 组件 prop 定义</h5><ul>
<li>必须使用 <code>camelCase </code>驼峰命名。</li>
<li>必须指定参数类型。</li>
<li>必须加上注释，表明参数的含义。</li>
<li>必须加上 <code>default</code> 默认值。</li>
<li>推荐加上 <code>required</code>，如果有业务校验也需要加上 <code>validator</code>。</li>
</ul>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 简洁的</span><br><span class="line">export default&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    userDetail: Object,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 符合eslint推荐的</span><br><span class="line">export default&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    userDetail: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 更加详情，带业务校验的</span><br><span class="line">export default&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    userDetail: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      required: true,</span><br><span class="line">      validator: function (value) &#123;</span><br><span class="line">        // 校验</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props: [&quot;userDetail&quot;];</span><br></pre></td></tr></table></figure>

<h5 id="4-13-模板中简单的表达式"><a href="#4-13-模板中简单的表达式" class="headerlink" title="4.13 模板中简单的表达式"></a>4.13 模板中简单的表达式</h5><p>组件模板中应该只包含简单的表达式，比较复杂的处理需要用计算属性或者方法。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; normalizedFullName &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  // 复杂表达式已经移入一个计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    normalizedFullName() &#123;</span><br><span class="line">      return this.fullName</span><br><span class="line">        .split(&quot; &quot;)</span><br><span class="line">        .map(function (word) &#123;</span><br><span class="line">          return word[0].toUpperCase() + word.slice(1);</span><br><span class="line">        &#125;)</span><br><span class="line">        .join(&quot; &quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      fullName</span><br><span class="line">        .split(&quot; &quot;)</span><br><span class="line">        .map(function (word) &#123;</span><br><span class="line">          return word[0].toUpperCase() + word.slice(1);</span><br><span class="line">        &#125;)</span><br><span class="line">        .join(&quot; &quot;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-14-简单的计算属性"><a href="#4-14-简单的计算属性" class="headerlink" title="4.14 简单的计算属性"></a>4.14 简单的计算属性</h5><p>计算属性应该保持单一性，处理多个逻辑的需要拆分为多个计算属性。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    basePrice: function () &#123;</span><br><span class="line">      return this.manufactureCost / (1 - this.profitMargin);</span><br><span class="line">    &#125;,</span><br><span class="line">    discount: function () &#123;</span><br><span class="line">      return this.basePrice * (this.discountPercent || 0);</span><br><span class="line">    &#125;,</span><br><span class="line">    finalPrice: function () &#123;</span><br><span class="line">      return this.basePrice - this.discount;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    price: function () &#123;</span><br><span class="line">      var basePrice = this.manufactureCost / (1 - this.profitMargin);</span><br><span class="line">      return basePrice - basePrice * (this.discountPercent || 0);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="4-15-组件-实例的选项顺序"><a href="#4-15-组件-实例的选项顺序" class="headerlink" title="4.15 组件/实例的选项顺序"></a>4.15 组件/实例的选项顺序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header-container&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;main-container&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;footer-container&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;MyVue&quot;,</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  directives: &#123;&#125;,</span><br><span class="line">  filters: &#123;&#125;,</span><br><span class="line">  extends: &#123;&#125;,</span><br><span class="line">  mixins: &#123;&#125;,</span><br><span class="line">  props: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  watch: &#123;&#125;,</span><br><span class="line">  beforeCreate() &#123;&#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    // 请求数据的方法放这里</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount() &#123;&#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    // 更改页面结构的方法放这里</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate() &#123;&#125;,</span><br><span class="line">  updated() &#123;&#125;,</span><br><span class="line">  activated() &#123;&#125;,</span><br><span class="line">  deactivated() &#123;&#125;,</span><br><span class="line">  beforeDestroy() &#123;&#125;,</span><br><span class="line">  destroyed() &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-16-模板中引入资源和组件的顺序"><a href="#4-16-模板中引入资源和组件的顺序" class="headerlink" title="4.16 模板中引入资源和组件的顺序"></a>4.16 模板中引入资源和组件的顺序</h5><p>在模板中引入资源是有顺序的，一般是先<code>公用</code>后<code>局部</code>，资源引入顺序为<code>js资源 &gt; 组件 &gt; css资源</code>，如果引入资源比较多，需要合理的分组并写上注释。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 引入第三方工具类</span><br><span class="line">import util from &quot;@lime-util/util&quot;;</span><br><span class="line">// 引入第三方组件</span><br><span class="line">import VueScroll from &quot;vuescroll&quot;;</span><br><span class="line"></span><br><span class="line">// 引入公用方法</span><br><span class="line">import &#123; uploadFile &#125; from &quot;@/common&quot;;</span><br><span class="line">// 引入公用组件</span><br><span class="line">import PageHeader from &quot;@/components/PageHeader&quot;;</span><br><span class="line"></span><br><span class="line">// 引入api</span><br><span class="line">import &#123;</span><br><span class="line">  getUserList,</span><br><span class="line">  getUserDetail,</span><br><span class="line">  addUser,</span><br><span class="line">  updateUser,</span><br><span class="line">  deleteUser,</span><br><span class="line">&#125; from &quot;@/api/user&quot;;</span><br><span class="line">// 引入局部组件</span><br><span class="line">import UserInfo from &quot;./components/UserInfo&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="4-17-组件的-name-必须大写"><a href="#4-17-组件的-name-必须大写" class="headerlink" title="4.17 组件的 name 必须大写"></a>4.17 组件的 name 必须大写</h5><p>声明组件的 <code>name</code>使用PascalCase 帕斯卡命名，尽量每个组件页面都写，方便 <code>vue</code> 识别，或者在使用<code> keep-alive</code> 时候做缓存。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &quot;UserInfo&quot;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &quot;userInfo&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;user-info&quot;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="4-18自闭合组件"><a href="#4-18自闭合组件" class="headerlink" title="4.18自闭合组件"></a>4.18自闭合组件</h5><p>在<code>单文件组件</code>、<code>字符串模板</code>和 <code>JSX </code>中没有内容的组件应该是自闭合的，但在<code> DOM 模板</code>里不要这样做。</p>
<p>在单文件组件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-if=&quot;showUser&quot;&gt;</span><br><span class="line">  &lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在字符串模板中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue Vue(&#123;</span><br><span class="line">  template:`&lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;`</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>在 JS/JSX 中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#x27;#app&#x27;,</span><br><span class="line">  render: function (h) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;UserInfo :user-detail=&quot;userDetail&quot; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 <code>Dom 模板</code>中，需要有结束标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;user-info :user-detail=&quot;userDetail&quot;&gt;&lt;/user-info&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-19组件选项中的空行"><a href="#4-19组件选项中的空行" class="headerlink" title="4.19组件选项中的空行"></a>4.19组件选项中的空行</h5><p>有时候 props 或者 computed 中有很多选项，中间间隔挨着就会不容易区分，这时候就需要添加空行来让代码更加可观一些。添加合理的空行也适用于在 filters，data，methods 中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  filters: &#123;</span><br><span class="line">    // 格式化数字</span><br><span class="line">    formatAmount(val) &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    // 格式化文字</span><br><span class="line">    formatText(val) &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    // 格式件时间</span><br><span class="line">    formatTime(val) &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    // id</span><br><span class="line">    id: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      required: true,</span><br><span class="line">      default: undefined,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 名称</span><br><span class="line">    name: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">      default: &quot;&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 性别</span><br><span class="line">    sex: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">      default: &quot;未知&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 年龄</span><br><span class="line">    age: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      required: true,</span><br><span class="line">      default: undefined,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 生日</span><br><span class="line">    birthday: String,</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 计算总数</span><br><span class="line">    totalAmount() &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    // 求和</span><br><span class="line">    sumAmount() &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 获得用户列表</span><br><span class="line">     */</span><br><span class="line">    getList() &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 新增用户</span><br><span class="line">     */</span><br><span class="line">    addUser() &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 修改用户</span><br><span class="line">     */</span><br><span class="line">    updateUser() &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-20-组件标签的顺序"><a href="#4-20-组件标签的顺序" class="headerlink" title="4.20 组件标签的顺序"></a>4.20 组件标签的顺序</h5><p>单文件组件应该使<code>&lt;template&gt;</code>，<code>&lt;script&gt;</code>和<code>&lt;style&gt;</code>标签保持顺序，并且<code>&lt;style&gt;</code>标签要放在最后，因为另外两个标签至少都是有的。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;&lt;/style&gt;</span><br><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-21-组件样式的-scoped-作用域"><a href="#4-21-组件样式的-scoped-作用域" class="headerlink" title="4.21 组件样式的 scoped 作用域"></a>4.21 组件样式的 scoped 作用域</h5><p>编写组件页面的样式，一定要加上 <code>scoped</code>，使用独立的作用域，避免污染全局样式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-22-避免使用-parent-操作父组件"><a href="#4-22-避免使用-parent-操作父组件" class="headerlink" title="4.22 避免使用 $parent 操作父组件"></a>4.22 避免使用 $parent 操作父组件</h5><p>不能直接使用$parent 访问父组件的上下文，这种做法是不被允许的。可以改为 $emit ，.sync同步 ，props 传参，vue bus` 方式操作父组件的属性和方法。</p>
<h5 id="4-23-尽量不要手动操作-Dom"><a href="#4-23-尽量不要手动操作-Dom" class="headerlink" title="4.23 尽量不要手动操作 Dom"></a>4.23 尽量不要手动操作 Dom</h5><p>在项目开发中尽量使用 Vue 的数据驱动更新 Dom，尽量不要手动操作 DOM，包括：增删改 Dom 元素，更改样式，添加事件等等。</p>
<h5 id="4-24-模板中监听事件的简写"><a href="#4-24-模板中监听事件的简写" class="headerlink" title="4.24 模板中监听事件的简写"></a>4.24 模板中监听事件的简写</h5><p>在模板中，如果事件监听的方法不需要传参，则需要省略括号。</p>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;handleAdd&quot; /&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;handleDelete(1)&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;handleAdd()&quot; /&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;handleOpen()&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-25-模板中-Modal-弹框的规范"><a href="#4-25-模板中-Modal-弹框的规范" class="headerlink" title="4.25 模板中 Modal 弹框的规范"></a>4.25 模板中 Modal 弹框的规范</h5><p>Modal 弹框组件是特别常见的，为了规范开发和方便阅读，使用时候不能随意写在模板的任意位置，必须统一声明放在模板结尾标签位置，并加上注释区分弹框模块的用途。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!-- 表格列表 --&gt;</span><br><span class="line">    &lt;div class=&quot;table-box&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Modal 弹框 --&gt;</span><br><span class="line">    &lt;!-- 新增和编辑 --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title=&quot;新增/编辑&quot;</span><br><span class="line">      :visible.sync=&quot;editModal&quot;</span><br><span class="line">      width=&quot;900px&quot;</span><br><span class="line">    &gt;&lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- 详情 --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title=&quot;详情&quot;</span><br><span class="line">      :visible.sync=&quot;detailModal&quot;</span><br><span class="line">      width=&quot;900px&quot;</span><br><span class="line">    &gt;&lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-26-less-和-sass-样式穿透"><a href="#4-26-less-和-sass-样式穿透" class="headerlink" title="4.26 less 和 sass 样式穿透"></a>4.26 less 和 sass 样式穿透</h5><p>在某些场景下，需要修改第三方组件样式，由于 scoped 属性的样式隔离，需要用到样式穿透，统一使用 ::v-deep。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">::v-deep .el-button &#123;</span><br><span class="line">  height: 60px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-27-vue-router-路由懒加载"><a href="#4-27-vue-router-路由懒加载" class="headerlink" title="4.27 vue-router 路由懒加载"></a>4.27 vue-router 路由懒加载</h5><ul>
<li>路由的组件推荐使用懒加载方式。</li>
<li>推荐页面都有一个 <code>index.vue</code>入口文件。</li>
<li>省略掉所有文件后缀名，<code>vue-cli</code> 会自动识别。</li>
</ul>
<p>正例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/home&quot;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &quot;首页&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    component: () =&gt; import(&quot;@/views/home&quot;),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/user-info&quot;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &quot;用户信息&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    component: () =&gt; import(&quot;@/views/user-info&quot;),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>反例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/home&quot;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &quot;首页&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    component: () =&gt; import(&quot;@/views/home.vue&quot;),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/user-info&quot;,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &quot;用户信息&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    component: () =&gt; import(&quot;@/views/user-info/index.vue&quot;),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h5 id="4-28-vue-router-路由传参"><a href="#4-28-vue-router-路由传参" class="headerlink" title="4.28 vue-router 路由传参"></a>4.28 vue-router 路由传参</h5><p>使用 <code>$router</code> 的 <code>query </code>传参，不使用 <code>params</code>，这样参数会在地址栏中不会刷新消失。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 跳转路由</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">  path: &quot;home&quot;,</span><br><span class="line">  query: &#123;</span><br><span class="line">    id: 1,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 在 home/index.vue 中接收参数</span><br><span class="line">let id = this.$route.query.id;</span><br></pre></td></tr></table></figure>

<h5 id="4-29-vue-router-路由规则"><a href="#4-29-vue-router-路由规则" class="headerlink" title="4.29 vue-router 路由规则"></a>4.29 vue-router 路由规则</h5><ul>
<li><code>path</code> 路径采用<code>kebab-case</code>命名，字母小写，以短横分隔单词。</li>
<li>路由 <code>name</code> 采用 <code>PascalCase 帕斯卡</code>命名。</li>
<li>子路由 <code>path</code> 可以不用拼父路由的地址，<code>vue-router</code> 会自动识别。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &quot;/base&quot;,</span><br><span class="line">  name: &quot;Base&quot;,</span><br><span class="line">  component: () =&gt; import(&quot;@/layout&quot;),</span><br><span class="line">  meta: &#123;</span><br><span class="line">    title: &quot;基础管理&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &quot;user-manage&quot;,</span><br><span class="line">      name: &quot;UserManage&quot;,</span><br><span class="line">      component: () =&gt; import(&quot;@/views/base/user-manage&quot;),</span><br><span class="line">      meta: &#123;</span><br><span class="line">        title: &quot;用户列表&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-30-vuex-书写和命名规范"><a href="#4-30-vuex-书写和命名规范" class="headerlink" title="4.30 vuex 书写和命名规范"></a>4.30 vuex 书写和命名规范</h5><ul>
<li>mutations 中的方法必须全部大写，并且用 <code>SET / ADD / DEL / UPDATE / CHANGE / RESET</code> 动词开头。</li>
<li>接收和处理 <code>state</code> 必须在 <code>actions</code> 的方法中完成。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/* index.js store模板 */</span><br><span class="line">// state</span><br><span class="line">const state = &#123;</span><br><span class="line">  token: &quot;&quot;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// mutations</span><br><span class="line">const mutations = &#123;</span><br><span class="line">  SET_TOKEN: (state, token) =&gt; &#123;</span><br><span class="line">    state.token = token;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// actions</span><br><span class="line">const actions = &#123;</span><br><span class="line">  saveToken(&#123; commit &#125;, token) &#123;</span><br><span class="line">    commit(&quot;SET_TOKEN&quot;, token);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// export</span><br><span class="line">export default &#123;</span><br><span class="line">  namespaced: true,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h4 id="5-注释说明"><a href="#5-注释说明" class="headerlink" title="5. 注释说明"></a>5. 注释说明</h4><p>整理必须加注释的地方</p>
<ul>
<li>公共组件使用说明</li>
<li>api 目录的接口 js 文件必须加注释</li>
<li>store 中的 state, mutation, action 等必须加注释</li>
<li>vue 文件中的 template 必须加注释，若文件较大添加 start end 注释</li>
<li>vue 文件的 methods，每个 method 必须添加注释</li>
<li>vue 文件的 data, 非常见单词要加注释</li>
</ul>
<h4 id="6-其他"><a href="#6-其他" class="headerlink" title="6 其他"></a>6 其他</h4><ol>
<li>尽量不要手动操作 DOM<br>因使用 vue 框架，所以在项目开发中尽量使用 vue 的数据驱动更新 DOM，尽量（不到万不得<br>已）不要手动操作 DOM，包括：增删改 dom 元素、以及更改样式、添加事件等。</li>
<li>删除无用代码<br>因使用了 git/svn 等代码版本工具，对于无用代码必须及时删除，例如：一些调试的 console 语<br>句、无用的弃用功能代码。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2023/01/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/11/20-22-22/" class="post-title-link" itemprop="url">PM2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-11 20:22:22" itemprop="dateCreated datePublished" datetime="2023-01-11T20:22:22+08:00">2023-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-15 20:53:15" itemprop="dateModified" datetime="2023-02-15T20:53:15+08:00">2023-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="pm2"><a href="#pm2" class="headerlink" title="pm2"></a>pm2</h1><p>PM2 是常用的 node 进程管理工具，它可以提供 node.js 应用管理，如自动重载、性能监控、负载均衡等。同类工具有 Supervisor、Forever 等。</p>
<p>pm2 是一个进程管理工具,可以用它来管理你的 node 进程，并查看 node 进程的状态，当然也支持性能监控，进程守护，负载均衡等功能。pm2 基本是 Nodejs 应用程序不二的守护进程选择，事实上它并不仅仅可以启动 Nodejs 的程序，只要是一般的脚本的程序它同样可以胜任。</p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li><p>内建负载均衡（使用 node cluster 集群模块，可以使用服务器上的所有 cpu）</p>
</li>
<li><p>后台运行（node app.js 这种命令是直接在前台运行的，不稳定，很容易断）</p>
</li>
<li><p>0 秒停机重载（应该是上线升级的时候 不需要停机）</p>
</li>
<li><p>停止不稳定的进程（避免无限循环）</p>
</li>
<li><p>控制台检测</p>
</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>npm install -g pm2</code></p>
<h2 id="启动-PM2-项目"><a href="#启动-PM2-项目" class="headerlink" title="启动 PM2 项目"></a>启动 PM2 项目</h2><p>pm2 支持直接运行 server.js 启动项目，如下：<code>pm2 start server.js</code></p>
<ul>
<li><code>--watch</code>：监听应用目录的变化，一旦发生变化，自动重启。如果要精确监听、不见听的目录，最好通过配置文件。</li>
<li><code>-i --instances</code>：启用多少个实例，可用于负载均衡。如果-i 0 或者-i max，则根据当前机器核数确定实例数目。</li>
<li><code>--ignore-watch</code>：排除监听的目录/文件，可以是特定的文件名，也可以是正则。比如<code>--ignore-watch=&quot;test node_modules &quot;some scripts&quot;&quot;</code></li>
<li><code>-n --name</code>：应用的名称。查看应用信息的时候可以用到。</li>
<li><code>-o --output &lt;path&gt;</code>：标准输出日志文件的路径。</li>
<li><code>-e --error &lt;path&gt;</code>：错误输出日志文件的路径。</li>
<li><code>--interpreter &lt;interpreter&gt;</code>：the interpreter pm2 should use for executing app (bash, python…)。比如你用的 coffee script 来编写应用。</li>
</ul>
<h2 id="文件夹结构"><a href="#文件夹结构" class="headerlink" title="文件夹结构"></a>文件夹结构</h2><p>PM2 启动后，它将自动创建这些文件夹：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$HOME/.pm2：将包含所有PM2相关文件</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/logs：将包含所有应用程序日志</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/pids：将包含所有应用程序pids</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/pm2.log：PM2 日志</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/pm2.pid：PM2 pid</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/rpc.sock：远程命令的套接字文件</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/pub.sock：可发布事件的套接字文件</span><br><span class="line"></span><br><span class="line">$HOME/.pm2/conf.js：PM2配置</span><br></pre></td></tr></table></figure>

<p>在 Windows 中，$ HOME 环境变量可以是$ HOMEDRIVE + $ HOMEPATH</p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul>
<li>查看应用列表（查看当前机器执行的所有进程）<br><code>pm2 list/ls/l</code></li>
<li>查看某个应用详情（查看某个进程信息）<br><code>pm2 show app_name|app_id</code>或者<code>pm2 describe app_name|app_id</code></li>
<li>重启<br><code>pm2 restart app.js</code>或<code>pm2 restart app_name|app_name</code></li>
<li>停止<br><code>pm2 stop app_name|app_id</code>或停止全部<code>pm2 stop all</code></li>
<li>删除<br>类似 pm2 stop，如下<br><code>pm2 delete app_name|app_id</code><br><code>pm2 delete all</code></li>
<li>日志查看<br>除了可以打开日志文件查看日志外，还可以通过<code>pm2 logs</code>来查看实时日志。这点对于线上问题排查非常重要。比如某个 node 服务突然异常重启了，那么可以通过 pm2 提供的日志工具来查看实时日志，看是不是脚本出错之类导致的异常重启。查看指定应用程序日志：<code>pm2 logs app_name|app_id</code>显示所有应用程序的日志：<code>pm2 logs</code></li>
</ul>
<h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>命令如下，表示开启三个进程。如果<code>-i 0</code>，则会根据机器当前核数自动开启尽可能多的进程。</p>
<p><code>pm2 start app.js -i 3</code> # 开启三个进程<br><code>pm2 start app.js -i max </code># 根据机器 CPU 核数，开启对应数目的进程</p>
<h2 id="开机自动启动"><a href="#开机自动启动" class="headerlink" title="开机自动启动"></a>开机自动启动</h2><p>可以通过<code>pm2 startup</code>来实现开机自启动。细节可参考。大致流程如下</p>
<p>通过<code>pm2 save</code>保存当前进程状态。</p>
<p>通过<code>pm2 startup [platform]</code>生成开机自启动的命令。（记得查看控制台输出）</p>
<p>将步骤 2 生成的命令，粘贴到控制台进行，搞定。</p>
<h2 id="监控-CPU-内存"><a href="#监控-CPU-内存" class="headerlink" title="监控 CPU/内存"></a>监控 CPU/内存</h2><p>运行如下命令，查看当前通过 pm2 运行的进程的状态。即可监控 CPU 和内存的使用情况，同时应用的报错信息也会打印在 Global Logs 窗口中，如下：</p>
<p><code>pm2 monit</code></p>
<h2 id="内存使用超过上限自动重启"><a href="#内存使用超过上限自动重启" class="headerlink" title="内存使用超过上限自动重启"></a>内存使用超过上限自动重启</h2><p>如果想要你的应用，在超过使用内存上限后自动重启，那么可以加上–max-memory-restart 参数。（有对应的配置项）</p>
<p><code>pm2 start big-array.js --max-memory-restart 20M</code></p>
<h2 id="pm2-编程接口"><a href="#pm2-编程接口" class="headerlink" title="pm2 编程接口"></a>pm2 编程接口</h2><p>如果想把 pm2 的进程监控，跟其他自动化流程整合起来，pm2 的编程接口就很有用了。细节可参考官方文档：<br><code>http://pm2.keymetrics.io/docs/usage/pm2-api/</code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/12/12/12-34-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/12/12-34-21/" class="post-title-link" itemprop="url">Java</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-12 12:34:21" itemprop="dateCreated datePublished" datetime="2022-12-12T12:34:21+08:00">2022-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-26 16:02:54" itemprop="dateModified" datetime="2023-02-26T16:02:54+08:00">2023-02-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="编写-Java-程序时，应注意以下几点："><a href="#编写-Java-程序时，应注意以下几点：" class="headerlink" title="编写 Java 程序时，应注意以下几点："></a>编写 Java 程序时，应注意以下几点：</h2><ul>
<li>大小写敏感：Java 是大小写敏感的，这就意味着标识符 Hello 与 hello 是不同的。</li>
<li>类名：对于所有的类来说，类名的首字母应该大写。如果类名由若干单词组成，那么每个单词的首字母应该大写，例如 MyFirstJavaClass 。</li>
<li>方法名：所有的方法名都应该以小写字母开头。如果方法名含有若干单词，则后面的每个单词首字母大写。</li>
<li>源文件名：源文件名必须和类名相同。当保存文件的时候，你应该使用类名作为文件名保存（切记 Java 是大小写敏感的），文件名的后缀为 .java。（如果文件名和类名不相同则会导致编译错误）。</li>
<li>主方法入口：所有的 Java 程序由 public static void main(String[] args) 方法开始执行。</li>
</ul>
<h2 id="Java-标识符"><a href="#Java-标识符" class="headerlink" title="Java 标识符"></a>Java 标识符</h2><p>Java 所有的组成部分都需要名字。类名、变量名以及方法名都被称为标识符。</p>
<p>关于 Java 标识符，有以下几点需要注意：</p>
<ul>
<li>所有的标识符都应该以字母（A-Z 或者 a-z）,美元符（$）、或者下划线（_）开始</li>
<li>首字符之后可以是字母（A-Z 或者 a-z）,美元符（$）、下划线（_）或数字的任何字符组合</li>
<li>关键字不能用作标识符</li>
<li>标识符是大小写敏感的</li>
<li>合法标识符举例：age、$salary、_value、__1_value</li>
<li>非法标识符举例：123abc、-salary</li>
</ul>
<h2 id="Java-修饰符"><a href="#Java-修饰符" class="headerlink" title="Java 修饰符"></a>Java 修饰符</h2><p>像其他语言一样，Java 可以使用修饰符来修饰类中方法和属性。主要有两类修饰符：</p>
<ul>
<li>访问控制修饰符 : default, public , protected, private</li>
<li>非访问控制修饰符 : final, abstract, static, synchronized</li>
</ul>
<h2 id="Java-变量"><a href="#Java-变量" class="headerlink" title="Java 变量"></a>Java 变量</h2><p>Java 中主要有如下几种类型的变量</p>
<ul>
<li>局部变量</li>
<li>类变量（静态变量）</li>
<li>成员变量（非静态变量）</li>
</ul>
<h2 id="Java-关键字"><a href="#Java-关键字" class="headerlink" title="Java 关键字"></a>Java 关键字</h2><p>下面列出了 Java 关键字。这些保留字不能用于常量、变量、和任何标识符的名称。</p>
<ul>
<li>访问控制</li>
</ul>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">private</td>
<td align="center">私有的</td>
</tr>
<tr>
<td align="center">protected</td>
<td align="center">受保护的</td>
</tr>
<tr>
<td align="center">public</td>
<td align="center">公共的</td>
</tr>
<tr>
<td align="center">default</td>
<td align="center">默认</td>
</tr>
</tbody></table>
<ul>
<li>类、方法和变量修饰符</li>
</ul>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">abstract</td>
<td align="center">声明抽象</td>
</tr>
<tr>
<td align="center">class</td>
<td align="center">类</td>
</tr>
<tr>
<td align="center">extends</td>
<td align="center">扩充,继承</td>
</tr>
<tr>
<td align="center">final</td>
<td align="center">最终值,不可改变的</td>
</tr>
<tr>
<td align="center">implements</td>
<td align="center">实现（接口）</td>
</tr>
<tr>
<td align="center">interface</td>
<td align="center">接口</td>
</tr>
<tr>
<td align="center">native</td>
<td align="center">本地，原生方法（非 Java 实现）</td>
</tr>
<tr>
<td align="center">new</td>
<td align="center">新,创建</td>
</tr>
<tr>
<td align="center">static</td>
<td align="center">静态</td>
</tr>
<tr>
<td align="center">strictfp</td>
<td align="center">严格,精准</td>
</tr>
<tr>
<td align="center">synchronized</td>
<td align="center">线程,同步</td>
</tr>
<tr>
<td align="center">transient</td>
<td align="center">短暂</td>
</tr>
<tr>
<td align="center">volatile</td>
<td align="center">易失</td>
</tr>
</tbody></table>
<ul>
<li><p>程序控制语句</p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">break</td>
<td align="center">跳出循环</td>
</tr>
<tr>
<td align="center">case</td>
<td align="center">定义一个值以供 switch 选择</td>
</tr>
<tr>
<td align="center">continue</td>
<td align="center">继续</td>
</tr>
<tr>
<td align="center">do</td>
<td align="center">运行</td>
</tr>
<tr>
<td align="center">else</td>
<td align="center">否则</td>
</tr>
<tr>
<td align="center">for</td>
<td align="center">循环</td>
</tr>
<tr>
<td align="center">if</td>
<td align="center">如果</td>
</tr>
<tr>
<td align="center">instanceof</td>
<td align="center">实例</td>
</tr>
<tr>
<td align="center">return</td>
<td align="center">返回</td>
</tr>
<tr>
<td align="center">switch</td>
<td align="center">根据值选择执行</td>
</tr>
<tr>
<td align="center">while</td>
<td align="center">循环</td>
</tr>
</tbody></table>
</li>
<li><p>错误处理</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">assert</td>
<td align="center">断言表达式是否为真</td>
</tr>
<tr>
<td align="center">catch</td>
<td align="center">捕捉异常</td>
</tr>
<tr>
<td align="center">finally</td>
<td align="center">有没有异常都执行</td>
</tr>
<tr>
<td align="center">throw</td>
<td align="center">抛出一个异常对象</td>
</tr>
<tr>
<td align="center">throws</td>
<td align="center">声明一个异常可能被抛出</td>
</tr>
<tr>
<td align="center">try</td>
<td align="center">捕获异常</td>
</tr>
</tbody></table>
<ul>
<li><p>包相关</p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">import</td>
<td align="center">引入</td>
</tr>
<tr>
<td align="center">package</td>
<td align="center">包</td>
</tr>
</tbody></table>
</li>
<li><p>基本类型</p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">boolean</td>
<td align="center">布尔型</td>
</tr>
<tr>
<td align="center">byte</td>
<td align="center">字节型</td>
</tr>
<tr>
<td align="center">char</td>
<td align="center">字符型</td>
</tr>
<tr>
<td align="center">double</td>
<td align="center">双精度浮点</td>
</tr>
<tr>
<td align="center">float</td>
<td align="center">单精度浮点</td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">整型</td>
</tr>
<tr>
<td align="center">long</td>
<td align="center">长整型</td>
</tr>
<tr>
<td align="center">short</td>
<td align="center">短整型</td>
</tr>
</tbody></table>
</li>
<li><p>变量引用</p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">super</td>
<td align="center">父类,超类</td>
</tr>
<tr>
<td align="center">this</td>
<td align="center">本类</td>
</tr>
<tr>
<td align="center">void</td>
<td align="center">无返回值</td>
</tr>
</tbody></table>
</li>
<li><p>保留关键字</p>
<table>
<thead>
<tr>
<th align="center">关键字</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">goto</td>
<td align="center">是关键字，但不能使用</td>
</tr>
<tr>
<td align="center">const</td>
<td align="center">是关键字，但不能使用</td>
</tr>
</tbody></table>
</li>
</ul>
<p>注意：Java 的 null 不是关键字，类似于 true 和 false，它是一个字面常量，不允许作为标识符使用。</p>
<h2 id="Java-对象和类"><a href="#Java-对象和类" class="headerlink" title="Java 对象和类"></a>Java 对象和类</h2><ul>
<li>对象：对象是类的一个实例（对象不是找个女朋友），有状态和行为。例如，一条狗是一个对象，它的状态有：颜色、名字、品种；行为有：摇尾巴、叫、吃等。</li>
<li>类：类是一个模板，它描述一类对象的行为和状态。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class Dog &#123;</span><br><span class="line">    String breed;</span><br><span class="line">    int size;</span><br><span class="line">    String colour;</span><br><span class="line">    int age;</span><br><span class="line"> </span><br><span class="line">    void eat() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    void run() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    void sleep()&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    void name()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一个类可以包含以下类型变量：</p>
<ul>
<li>局部变量：在方法、构造方法或者语句块中定义的变量被称为局部变量。变量声明和初始化都是在方法中，方法结束后，变量就会自动销毁。</li>
<li>成员变量：成员变量是定义在类中，方法体之外的变量。这种变量在创建对象的时候实例化。成员变量可以被类中方法、构造方法和特定类的语句块访问。</li>
<li>类变量：类变量也声明在类中，方法体之外，但必须声明为 static 类型。<br>一个类可以拥有多个方法</li>
</ul>
<p>构造方法<br>每个类都有构造方法。如果没有显式地为类定义构造方法，Java 编译器将会为该类提供一个默认构造方法。</p>
<p>在创建一个对象的时候，至少要调用一个构造方法。构造方法的名称必须与类同名，一个类可以有多个构造方法。</p>
<p>下面是一个构造方法示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Puppy&#123;</span><br><span class="line">    public Puppy()&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public Puppy(String name)&#123;</span><br><span class="line">        // 这个构造器仅有一个参数：name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建对象<br>对象是根据类创建的。在Java中，使用关键字 new 来创建一个新的对象。创建对象需要以下三步：</p>
<p>声明：声明一个对象，包括对象名称和对象类型。<br>实例化：使用关键字 new 来创建一个对象。<br>初始化：使用 new 创建对象时，会调用构造方法初始化对象。<br>下面是一个创建对象的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Puppy&#123;</span><br><span class="line">   public Puppy(String name)&#123;</span><br><span class="line">      //这个构造器仅有一个参数：name</span><br><span class="line">      System.out.println(&quot;小狗的名字是 : &quot; + name ); </span><br><span class="line">   &#125;</span><br><span class="line">   public static void main(String[] args)&#123;</span><br><span class="line">      // 下面的语句将创建一个Puppy对象</span><br><span class="line">      Puppy myPuppy = new Puppy( &quot;tommy&quot; );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/12/09/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/09/20-00-00/" class="post-title-link" itemprop="url">react Native</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-09 20:00:00" itemprop="dateCreated datePublished" datetime="2022-12-09T20:00:00+08:00">2022-12-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-25 23:33:01" itemprop="dateModified" datetime="2022-12-25T23:33:01+08:00">2022-12-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul>
<li>node.js python2(不能python3) jdk android_studio</li>
<li>配置环境变量</li>
</ul>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><ul>
<li>使用React Native内建的命令工具进行创建，也可以使用node自带的npx命令来安装<br><code>npx react-native init test_project</code></li>
<li>准备 Android 设备<br>你需要准备一台 Android 设备来运行 React Native Android 应用。这里所指的设备既可以是真机，也可以是模拟器。后面我们所有的文档除非特别说明，并不区分真机或者模拟器。Android 官方提供了名为 Android Virtual Device（简称 AVD）的模拟器。此外还有很多第三方提供的模拟器如Genymotion、BlueStack 等。一般来说官方模拟器免费、功能完整，但性能较差。第三方模拟器性能较好，但可能需要付费，或带有广告。</li>
</ul>
<p>使用 Android 真机<br>你也可以使用 Android 真机来代替模拟器进行开发，只需用 usb 数据线连接到电脑，然后遵照在设备上运行这篇文档的说明操作即可。</p>
<p>使用 Android 模拟器<br>你可以使用 Android Studio 打开项目下的”android”目录，然后可以使用”AVD Manager”来查看可用的虚拟设备,如果你刚刚才安装 Android Studio，那么可能需要先创建一个虚拟设备。点击”Create Virtual Device…”，然后选择所需的设备类型并点击”Next”，然后选择S API Level 31 image.</p>
<ul>
<li>编译并运行 React Native 应用<br>确保你先运行了模拟器或者连接了真机，然后在你的项目目录中运行<code>yarn android</code>或者<code>yarn react-native run-android</code>。此命令会对项目的原生部分进行编译，同时在另外一个命令行中启动Metro服务对 js 代码进行实时打包处理（类似 webpack）。Metro服务也可以使用yarn start命令单独启动。</li>
</ul>
<p>如果配置没有问题，你应该可以看到应用自动安装到设备上并开始运行。注意第一次运行时需要下载大量编译依赖，耗时可能数十分钟。此过程严重依赖稳定的代理软件，否则将频繁遭遇链接超时和断开，导致无法运行。</p>
<p>也可以尝试阿里云提供的maven 镜像，将android/build.gradle中的jcenter()和google()分别替换为maven { url ‘<a target="_blank" rel="noopener" href="https://maven.aliyun.com/repository/jcenter&#39;">https://maven.aliyun.com/repository/jcenter&#39;</a> }和maven { url ‘<a target="_blank" rel="noopener" href="https://maven.aliyun.com/repository/google&#39;">https://maven.aliyun.com/repository/google&#39;</a> }（注意有多处需要替换）。</p>
<h3 id="jsx语法规则"><a href="#jsx语法规则" class="headerlink" title="jsx语法规则"></a>jsx语法规则</h3><ul>
<li>定义虚拟dom，不要写引号</li>
<li>标签中混入js表达式要用｛｝，js表达式会产生一个值(返回值)，可以放在任何需要值的地方，如<code>a</code>、<code>a+b</code>、<code>demo(1)</code>、<code>arr.map()</code>、<code>function test()&#123;&#125;</code>。js语句：<code>if()&#123;&#125;</code>,<code>for()&#123;&#125;</code>,<code>switch()&#123;&#125;</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const a=1;</span><br><span class="line">const Vdom=(</span><br><span class="line">&lt;span id=&#123;a&#125;&gt;&#123;a.toString()&#125;&lt;/span&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>样式的类型指定不要用class，要用className</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const Vdom=(</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>内联样式<br>要用<code>style=&#123;&#123;fontSize:"20px"&#125;&#125;</code>的写法</p>
</li>
<li><p>虚拟dom只有一个根标签</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Vdom=(</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>标签首字符为小写则直接转为html中同名元素，若为大写则去渲染对应组件</li>
</ul>
<h2 id="组件和模块"><a href="#组件和模块" class="headerlink" title="组件和模块"></a>组件和模块</h2><p>模块：提供特定功能的js程序<br>组件：实现局部功能效果的代码和资源集合（html、js、css、img等）</p>
<h3 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Demo()&#123;  //组件必须首字母大写</span><br><span class="line">//this 为undefind,经过babel编译后开启严格模式，this便指向undefind，不开启严格模式则是window</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是函数定义的，便调用该函数，将虚拟dom渲染成真实dom</span><br></pre></td></tr></table></figure>

<h3 id="类式组件"><a href="#类式组件" class="headerlink" title="类式组件"></a>类式组件</h3><h4 id="简单组件"><a href="#简单组件" class="headerlink" title="简单组件"></a>简单组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;//在Demo的原型对象上</span><br><span class="line">//this指向Demo的实例对象</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是类定义的，便new 出该类实例，通过该实例调用原型对象上的render方法。将虚拟dom渲染成真实dom</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="复杂组件"><a href="#复杂组件" class="headerlink" title="复杂组件"></a>复杂组件</h4><h5 id="state"><a href="#state" class="headerlink" title="state"></a>state</h5><blockquote>
<p>state为组件的重要属性，值是对象，通过更新组件的state来更新对应的页面显示（重新渲染组件）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变t</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;test&#125;&gt;test&#123;this.state.a&#125;&lt;/h1&gt; </span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">	//类中的方法默认开启局部严格模式</span><br><span class="line">	//所以this为undefind</span><br><span class="line">	//只有通过Demo实例调用此实例，this才为Demo的实例</span><br><span class="line">	//changeValue作为onClick的回调，不是实例调用</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>解决 this指向</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)//构造器是否接受props，是否传给super取决于是否希望在构造器中通过this访问props</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变this指向</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">//state不能直接更改</span><br><span class="line">this.state.a=1</span><br><span class="line">//必须通过api</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure></li>
<li><p>简写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">state=&#123;//等于号，代表给该类的实例追加属性</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">changValue=()=&gt;&#123;//必须用箭头函数</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="props"><a href="#props" class="headerlink" title="props"></a>props</h5><blockquote>
<p>组件的所有属性都保存在props中，props是只读的，不能修改</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>props规则限制</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//限制类型</span><br><span class="line">Demo.propTypes=&#123;</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">//默认值</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>简写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static propTypes=&#123;	//加上static代表给类本身添加属性</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">static defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>


<ul>
<li>函数式组件使用props</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function Demo(props)&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;props.b&#125;&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> Demo.propTypes=&#123;	</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br></pre></td></tr></table></figure>

<h5 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h5><blockquote>
<p>组件内的标签可使用ref属性标识自己类似id=’test’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 ref=&#x27;title1&#x27; &gt;官方不推荐String类型的ref写法，效率不高&lt;/h1&gt; </span><br><span class="line">&lt;h1 ref=&#123;(node)=&gt;&#123;this.title2=node&#125;&#125; &gt;ref的回调写法，内联写法在每次更新时会调用两次，第一次时为了清空旧的ref，所以为null，第二次才为DOM，可用类绑定函数替换&lt;/h1&gt; </span><br><span class="line">&lt;h1 ref=&#123;title3&#125; &gt;使用createRef&lt;/h1&gt; </span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">title3=createRef()//调用后返回一个容器，用于存储ref标识的节点，只能存一个</span><br><span class="line">test=()=&gt;&#123;</span><br><span class="line">console.log(this.refs.title1)</span><br><span class="line">console.log(this.title2)</span><br><span class="line">console.log(this.title3.current)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h5><ol>
<li>通过onXxx属性指定事件处理函数（注意大小写）<ul>
<li>react使用的自定义事件（原生小写-&gt;大写，原生大写-&gt;小写），而不是原生DOM事件</li>
<li>react中的事件是通过事件委托方式处理的（委托给组件最外层的元素,事件冒泡）</li>
</ul>
</li>
<li>可通过event.target得到的发生事件的DOM元素对象</li>
</ol>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><h5 id="旧"><a href="#旧" class="headerlink" title="旧"></a>旧</h5><ul>
<li><p>初始化阶段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">componentWillMount()//组件将要挂载</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure></li>
<li><p>更新数据时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setState()</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure></li>
<li><p>强制更新时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">forceUpdate()//不想更改状态中的数据，更新页面</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure></li>
<li><p>父组件渲染</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(props)//第一次不调用，接受新的props才调用</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>卸载组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure>
<h5 id="新"><a href="#新" class="headerlink" title="新"></a>新</h5><blockquote>
<p>因为新版本的异步渲染，因此componentWillUpdate，componentWillReceive，componentWillMount即将废弃，所以要加上UNSAFE_防止误解和滥用</p>
</blockquote>
</li>
<li><p>初始化阶段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">//UNSAFE_componentWillMount()</span><br><span class="line">static getDerivedStateFromProps(props,state)&#123;//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">//必须返回状态对象，若包含state中的数据，将覆盖它。用于state的值任何时候取决于props</span><br><span class="line">return &#123;a:1&#125;</span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure></li>
<li><p>更新数据时，调用setState()、forceUpdate()或父组件新Props</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">static getDerivedStateFromProps(props,state)//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">static getSnapshotBeforeUpdate(preProps,preState)&#123;//更新前</span><br><span class="line"></span><br><span class="line">return &#x27;xxx&#x27;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate(preProps,preState,snapshotValue)//之前的prop时和状态</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>卸载组件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="react-中的key作用"><a href="#react-中的key作用" class="headerlink" title="react 中的key作用"></a>react 中的key作用</h4><p>key是虚拟Dom对象的标识，当状态中的数据变化时，react会根据新数据形成新的虚拟DOM，<br>随后将新的虚拟DOM与旧的虚拟DOM进行diff比较。<br>若旧虚拟dom中到了与新虚拟dom中相同的key：</p>
<ul>
<li>虚拟dom中内容没有变化，使用之前的真实dom</li>
<li>虚拟dom中内容变化了，则生成新的真实dom，随后替换掉页面中的真实dom</li>
</ul>
<p>若旧虚拟dom未找到与新虚拟dom相同的key，则创建新的真实dom渲染到页面中</p>
<p>用index做key引发的问题</p>
<ol>
<li>若对数据进行逆序添加，逆序删除等破坏顺序操作时，产生没必要的真实dom更新，虽然界面没有问题</li>
<li>若结构中包含输入类的DOM，会产生错误DOM更新，界面会出现异常</li>
<li>若仅用于渲染列表展示，没有逆序添加，逆序删除等破坏顺序操作，则用index做key没有任何问题</li>
</ol>
<h4 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h4><p>安装：<code>npm i create-react-app -g</code></p>
<p>创建文件夹：<code>create-ract app test</code></p>
<p>进入创建的文件夹：<code>npm start</code></p>
<ul>
<li><p>入口文件index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//核心库</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">//渲染</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br><span class="line">import App from &#x27;./App&#x27;</span><br><span class="line">ReactDOM.render(&lt;App/&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure></li>
<li><p>App.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">Class App extends React.Component&#123;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;xx&lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">export default App</span><br></pre></td></tr></table></figure></li>
<li><p>样式模块化</p>
</li>
</ul>
<p>index.module.css</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.title&#123;color:red&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import hello form &#x27;./index.module.css&#x27;</span><br><span class="line"></span><br><span class="line">export default calss Test extends Compont&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div className=&#123;hello.title&#125;&gt;xx&lt;/div&gt;</span><br><span class="line">&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>代理</li>
</ul>
<p>setupProxy.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const proxy=require(&#x27;http-proxy-middleware&#x27;);</span><br><span class="line">module.exports=function (app) &#123;</span><br><span class="line">app.use(</span><br><span class="line">proxy.createProxyMiddleware(&#x27;/apis&#x27;,&#123;</span><br><span class="line">target:&#x27;http://xxx:xxx&#x27;,</span><br><span class="line">changeOrigin:true,//控制服务器收到的响应头中的Host字段值</span><br><span class="line">pathRewrite:&#123;&#x27;^/apis&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">proxy.createProxyMiddleware(&#x27;/api2&#x27;,&#123;</span><br><span class="line">target:&#x27;http://xxx:xxx&#x27;,</span><br><span class="line">changeOrigin:true,//控制服务器收到的响应头中的Host字段值,true时为代理服务ip,false为当前ip，默认为false</span><br><span class="line">pathRewrite:&#123;&#x27;^/api2&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信"><a href="#组件间通信" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li><p>子-&gt;父<br>父给子组件间传入回调函数，子组件调用回调函数把数据传给父组件</p>
</li>
<li><p>消息订阅与发布<br>第三方库pubsub.js</p>
</li>
</ul>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><blockquote>
<p>依赖H5 BOM浏览器对象上的history或hash锚点，监听路由变化，匹配对应的组件<br>BrowserRouter使用的h5的histrory API,不兼容IE9以下版本<br>HashRouter使用的URL的哈希值</p>
</blockquote>
<ul>
<li><p>react-router-dom</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//要统一由一个router管理，可包围在App外侧</span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">&lt;Link to=&#x27;/test&#x27;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/BrowserRouter&gt;</span><br><span class="line"></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=&#x27;/test&#x27;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>路由组件</p>
<blockquote>
<p>接受的props默认有history，location，match</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>一般组件<br>props传什么有什么</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Test/&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>NavLink</p>
<blockquote>
<p>可以通过activeClassName指定样式名,标签体内容是个特殊属性，通过this.props.children获取</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink activeClassName=&quot;active_color&quot;&gt;test</span><br><span class="line">&lt;/NavLink&gt;</span><br><span class="line">&lt;NavLink activeClassName=&quot;active_color&quot; children=&#x27;test&#x27;&gt;</span><br><span class="line">&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Switch</p>
<blockquote>
<p>路由默认会全部匹配完，加上switch可实现单一匹配，提高效率</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">//默认模糊匹配,exact严格匹配，开启后无法匹配二级路由</span><br><span class="line">&lt;Route exact path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Redirect</p>
<blockquote>
<p>重定向，写在路由最下方，当路由都不匹配时，跳转到redirect指定的路由</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Redirect to=&quot;/test&quot; &gt;</span><br></pre></td></tr></table></figure></li>
<li><p>二级路由</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test/a&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Redirect to=&quot;/test&quot; &gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>路由参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//params参数，this.props.match.params</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=`/test/$&#123;123&#125;/$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test/:id/:count&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//search参数(为urlencoded编码字符串，需借助querystring解析)，this.location.match.search</span><br><span class="line">import qs from &#x27;querystring&#x27;</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=`/test?a=$&#123;123&#125;&amp;b=$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">//qs.parse(this.props.location.search)</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//state参数(不在地址栏显示，browser刷新页面不丢失，hashRouter刷新丢失)，this.props.location.state</span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line">&lt;Link to=&#123;&#123;pathname:&#x27;/test&#x27;state:&#123;a=123,b=123&#125;&#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/HashRouter&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">goto()&#123;</span><br><span class="line">this.props.history.push(&#x27;/test&#x27;,&#123;</span><br><span class="line">xx:&#x27;xx&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">this.props.history.replace(&#x27;/test&#x27;,&#123;</span><br><span class="line">xx:&#x27;xx&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>withRouter<blockquote>
<p>加工一般组件，让一般组件用上路由api</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123;withRouter&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">class Test extends Component &#123;&#125;</span><br><span class="line"></span><br><span class="line">export default withRouter(Test)//返回的是全新的组件</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="React-Router-6"><a href="#React-Router-6" class="headerlink" title="React Router 6"></a>React Router 6</h4><blockquote>
<p>移除<Switch/> ，新增<Routers/><br>移除<Redirect/> ，新增<Navigate/><br>component={About}变为element={<About/>}<br>增加hooks</p>
</blockquote>
<ul>
<li><p>Routers</p>
<blockquote>
<p>必须用Routers包裹，不会匹配多个</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Routers,Route&#125; form &#x27;react-router-dom&#x27;</span><br><span class="line">&lt;Routers&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; element=&#123;&lt;Test/&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/TEST&quot; caseSensitive element=&#123;&lt;Test2/&gt;&#125;&gt;//区分大小写</span><br><span class="line">&lt;/Routers&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Navigate</p>
<blockquote>
<p>重定向,只要被渲染，就会切换路由</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Routers,Route,Navigate&#125; form &#x27;react-router-dom&#x27;</span><br><span class="line">&lt;Routers&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; element=&#123;&lt;Test/&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot;  /&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot; replace /&gt;&#125;&gt;</span><br><span class="line">&lt;/Routers&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>NavLink</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NaviLink className=&#123;()=&gt;return &#x27;activeColor&#x27;&#125;&gt;&lt;/NaviLink&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>路由表</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#123;lazy&#125; from &#x27;react&#x27;</span><br><span class="line">import &#123;useRoutes,Navigate&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">//生成路由</span><br><span class="line">cosnt About=lazy(()=&gt;import(&#x27;../pages/About&#x27;))</span><br><span class="line">const element=useRoutes([</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/test&#x27;,</span><br><span class="line">element:&lt;Test/&gt;</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;new&#x27;,</span><br><span class="line">element:&lt;New/&gt;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;, </span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/about&#x27;,</span><br><span class="line">element:&lt;About/&gt;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        path:&#x27;/&#x27;,</span><br><span class="line">        //实现路由重定向</span><br><span class="line">        element:&lt;Navigate to=&#x27;/main&#x27;/&gt;</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;/*引用路由表*/&#125;</span><br><span class="line">&#123;element&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 若要显示子路由，需在父级路由组件中引入Outlet！！！</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;NavLink end to=&quot;new&quot;&gt;&lt;/NavLink&gt;//end代表匹配子路由时，自己失去高亮</span><br><span class="line">&#123;/*指定路由组件呈现的位置*/&#125;</span><br><span class="line">&lt;Outlet /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>路由参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//params参数，this.props.match.params</span><br><span class="line">&lt;Link to=`/test/$&#123;123&#125;/$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">import &#123;useParams,useMath&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const &#123;a,b&#125;=userParams()</span><br><span class="line">const &#123;a,b&#125;=userParams(/test/:a/:b&#125;)</span><br><span class="line">return (&#123;a+b&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=`/test?a=$&#123;123&#125;&amp;b=$&#123;123&#125;`&gt;&lt;/Link&gt;</span><br><span class="line">import &#123;useSearchParams,useLocation&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const [search,setSearch]=userSearchParams()</span><br><span class="line">const a=search.get(&#x27;a&#x27;)</span><br><span class="line">let setData=()=&gt;&#123;setSearch(1234)&#125;//更新a</span><br><span class="line">const a1=useLocation()</span><br><span class="line">return (&#123;a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=&#x27;/test&#x27; state=&#123;&#123;a=123,b=123&#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line">import &#123;useLocation&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">export default function Demo()&#123;</span><br><span class="line">const obj=useLocation()</span><br><span class="line">return (&#123;obj.a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123;useNavigate&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">const navigate=userNavigate()</span><br><span class="line">goto()&#123;</span><br><span class="line">navigate(&#x27;/test&#x27;,&#123;</span><br><span class="line">replace:false,</span><br><span class="line">state:&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line">navigate(1)//前进</span><br><span class="line">navigate(-1)//后退</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h4><blockquote>
<p>状态管理js库，集中式管理react应用中多个组件共享的状态</p>
</blockquote>
<h5 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h5><ul>
<li><p>store.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer from &#x27;./countReducer&#x27;</span><br><span class="line">const store=createStore(countReducer)</span><br><span class="line">export default store</span><br></pre></td></tr></table></figure></li>
<li><p>countReducer.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的reducer，reducer本质是一个函数</span><br><span class="line">第一次调用时是store自动触发的，传递的preState是undefin</span><br><span class="line">export default function (preState,action)&#123;</span><br><span class="line">const &#123;type,data&#125;=action</span><br><span class="line">return preState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>test.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;../store/store.js&#x27;</span><br><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line">store.subscribe(()=&gt;&#123;</span><br><span class="line">this.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">increment()&#123;</span><br><span class="line">store.dispatch(&#123;type:&#x27;xx&quot;,data:123&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="完整"><a href="#完整" class="headerlink" title="完整"></a>完整</h5></li>
<li>countAction.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的action，</span><br><span class="line">export  function test(data)&#123;</span><br><span class="line">return &#123;type:&#x27;xxxx&#x27;,data&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>countReducer.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//创建一个为count组件服务的reducer，reducer本质是一个函数</span><br><span class="line">//第一次调用时是store自动触发的，传递的preState是undefin</span><br><span class="line">//必须是纯函数（同样输入必定得到同样输出）不要在reducer中发起网络请求、改写prestate、使用Date.now() , Math.random()</span><br><span class="line">export default function (preState,action)&#123;</span><br><span class="line">const &#123;type,data&#125;=action</span><br><span class="line">switch(type)&#123;</span><br><span class="line">case 0:</span><br><span class="line">return preState//当preState没有变化时，不会引起页面刷新（浅比较）</span><br><span class="line">case 1:</span><br><span class="line">return preState+1</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>constants.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const ADD=&#x27;add&#x27;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>test.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;../store/store.js&#x27;</span><br><span class="line">import &#123;test&#125; from &#x27;../store/countAction.js&#x27;</span><br><span class="line"></span><br><span class="line">componentDidMount()&#123;</span><br><span class="line">store.subscribe(()=&gt;&#123;</span><br><span class="line">this.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">increment()&#123;</span><br><span class="line">store.dispatch(test(123))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="异步action"><a href="#异步action" class="headerlink" title="异步action"></a>异步action</h5><blockquote>
<p>异步action指action返回值为函数，同步action指action返回值为对象</p>
</blockquote>
<ul>
<li>store.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore,applyMiddleware&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer from &#x27;./countReducer&#x27;</span><br><span class="line">//引入异步action中间件</span><br><span class="line">//yarn add redux-thunk</span><br><span class="line">import thunk  from &#x27;redux-thunk&#x27;</span><br><span class="line">const store=createStore(countReducer,applyMiddleware(thunk))</span><br><span class="line">export default store</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>action.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">export const add=data=(&#123;type:&#x27;add&#x27;,data&#125;)//同步action</span><br><span class="line">export const addAsync=(data,a,b,c)=&gt;&#123;</span><br><span class="line">return (dispatch)=&gt;&#123;</span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">dispatch(add(data)&#125;)</span><br><span class="line">&#125;,50000)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h5><blockquote>
<p>UI组件应该包裹一个容器组件，它们为父子关系<br>UI组件不能使用任何redux api，容器组件可以<br>容器给UI组件通过props传递状态、操作方法<br>不用在写store.subscribe()</p>
</blockquote>
<ul>
<li>容器组件<br>/containers/test/index.jsx<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//yran add react-redux</span><br><span class="line">import testUI from &#x27;../../components/test.jsx&#x27;</span><br><span class="line">//引入connect用于连接UI组件与redux</span><br><span class="line">import &#123;connect&#125; from &#x27;react-redux&#x27;</span><br><span class="line"></span><br><span class="line">let mapStateToProps=(state)=&gt;&#123;</span><br><span class="line">//通过props传给UI组件状态</span><br><span class="line">return &#123;</span><br><span class="line">a:1,b:state</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line">let mapDisoatchToProps=(dispatch)=&gt;&#123;</span><br><span class="line">//通过props传给UI操作方法</span><br><span class="line">return &#123;</span><br><span class="line">d:(data)=&gt;&#123;</span><br><span class="line">dispatch(&#123;type:&#x27;xxx&#x27;,data&#125;)</span><br><span class="line">&#125;,</span><br><span class="line">c:()=&gt;&#123;&#125;</span><br><span class="line">&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const testContainer=connect(mapStateToProps,mapDisoatchToProps)(testUI)</span><br><span class="line"></span><br><span class="line">export default testContainer</span><br></pre></td></tr></table></figure></li>
</ul>
<p>App.jsx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import store form &#x27;../../redux/store.js&#x27;</span><br><span class="line">import Test from &#x27;../../containers/test&#x27;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;Test store=&#123;store&#125;/&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>简写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createIncreamentAction&#125; from &#x27;../store/action.js&#x27;</span><br><span class="line">const testContainer=connect(</span><br><span class="line">state=&gt;&#123;a:state&#125;,</span><br><span class="line">&#123;</span><br><span class="line">add:createIncreamentAction</span><br><span class="line">&#125;</span><br><span class="line">)(testUI)</span><br></pre></td></tr></table></figure>

<h5 id="provide"><a href="#provide" class="headerlink" title="provide"></a>provide</h5><p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">import &#123;Provider&#125; from &#x27;react-redux&#x27;</span><br><span class="line">//自动匹配容器组件，添加上store</span><br><span class="line">ReactDOM.render(&lt;ProVider store=&#123;store&#125;&gt;&lt;App/&gt;&lt;/ProVider&gt;,document)</span><br></pre></td></tr></table></figure>

<h5 id="整合容器和UI组件"><a href="#整合容器和UI组件" class="headerlink" title="整合容器和UI组件"></a>整合容器和UI组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createIncreamentAction&#125; from &#x27;../store/action.js&#x27;</span><br><span class="line"></span><br><span class="line">class Test extend Componet&#123;&#125;</span><br><span class="line">export default connect(</span><br><span class="line">state=&gt;&#123;a:state&#125;,</span><br><span class="line">&#123;</span><br><span class="line">add:createIncreamentAction</span><br><span class="line">&#125;</span><br><span class="line">)(Test)</span><br></pre></td></tr></table></figure>

<h5 id="多个reducer"><a href="#多个reducer" class="headerlink" title="多个reducer"></a>多个reducer</h5><ul>
<li>store.js<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore，applyMiddleware,combineReducers&#125;form &#x27;redux&#x27;</span><br><span class="line">import countReducer1 from &#x27;./reducer/count1&#x27;</span><br><span class="line">import countReducer2 from &#x27;./reducer/count2&#x27;</span><br><span class="line">let allReducer=combineReducers(&#123;</span><br><span class="line">count1:countReducer1</span><br><span class="line">count2:countReducer2</span><br><span class="line">&#125;)</span><br><span class="line">export default createStore(allReducer)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let obj=&#123;a:&#123;b:1&#125;&#125;</span><br><span class="line">const &#123;a&#125;=obj;</span><br><span class="line">const &#123;a:&#123;b&#125;&#125;=obj;//连续解构赋值</span><br><span class="line">const &#123;a:&#123;b:value&#125;&#125;=obj;//连续解构赋值+重命名 </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h5><ul>
<li>若a函数，接收的参数是一个函数，那么a就可以称为高阶函数</li>
<li>若a函数，调用的返回值依然是一个函数，那么a就可以称为高阶函数<br>如promise setTimeOut arr.map()</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line">return (e)=&gt;&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;input onChange=&quot;&#123;test(&#x27;1&#x27;)&#125;&quot;/&gt;</span><br><span class="line">&lt;input onChange=&quot;&#123;test(&#x27;2&#x27;)&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="函数的柯里化"><a href="#函数的柯里化" class="headerlink" title="函数的柯里化"></a>函数的柯里化</h5><p>通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line">return (e)=&gt;&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function sum(a,b,c)&#123;return a+b+c&#125;</span><br><span class="line"></span><br><span class="line">function sum2(a)&#123;</span><br><span class="line">return (b)=&gt;&#123;</span><br><span class="line">return (c)=&gt;&#123;</span><br><span class="line">return a+b+c</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sum(1)(2)(3)</span><br></pre></td></tr></table></figure>

<h4 id="前端发请求"><a href="#前端发请求" class="headerlink" title="前端发请求"></a>前端发请求</h4><h5 id="xhr"><a href="#xhr" class="headerlink" title="xhr"></a>xhr</h5><ul>
<li>jquery</li>
<li>axios（node使用axios是封装http协议）<h5 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h5><blockquote>
<p>原生函数,老版本兼容性差</p>
</blockquote>
</li>
</ul>
<p>fetch(‘xxx’).then(res=&gt;{<br>//联系服务器成功<br>return res.json()<br>},err=&gt;{return new Promis(()=&gt;{})}).then(res=&gt;{},err=&gt;{})</p>
<h5 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h5><p>写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;a:1&#125;</span><br><span class="line"></span><br><span class="line">对象式setState</span><br><span class="line">this.setState(&#123;a:2&#125;)</span><br><span class="line">this.setState(&#123;a:2&#125;,()=&gt;&#123;</span><br><span class="line">//状态更新以及页面也更新后，才调用</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">函数式setState</span><br><span class="line">this.setState((state,props)=&gt;&#123;</span><br><span class="line">return &#123;a:1&#125;&#125;,()=&gt;&#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h4><blockquote>
<p>路由组件懒加载</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123;lazy,COmponent,Suspense&#125; form &#x27;react&#x27;</span><br><span class="line">const Home=lazy(()=&gt;&#123;import (&#x27;./Home&#x27;)&#125;)</span><br><span class="line">export default class Demo extend Component&#123;</span><br><span class="line"></span><br><span class="line">&lt;Suspense fallback=&#123;&lt;Loading/&gt;&#125;&gt;</span><br><span class="line">&lt;Route  path=&quot;/home&quot; component=&#123;Home&#125;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/Route&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><blockquote>
<p>hook是16.8的新特性，可以让你在函数组件中使用state以及其他react特性</p>
</blockquote>
<h5 id="state-1"><a href="#state-1" class="headerlink" title="state"></a>state</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const [a,set]=React.useState(123) //初始化会调用一次，下次调用时，会缓存数据，不会覆盖</span><br><span class="line">let add1=()=&gt;&#123;set(456)&#125;</span><br><span class="line">let add2=()=&gt;&#123;set((a)=&gt;&#123;return a+1&#125;)&#125;</span><br><span class="line">return (&lt;div&gt;a&lt;/div&gt;)&#125;</span><br></pre></td></tr></table></figure>

<h5 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h5><blockquote>
<p>函数组件里使用生命周期</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const [count,setCount]=React.useState(123) </span><br><span class="line"></span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;,[a])//检测a,改变时调用------</span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;,[])//谁也不监测,只调用一次---- componentDidMount</span><br><span class="line">React.userEffect(()=&gt;&#123;&#125;)//检测所有,改变时调用----componentDidUpdate</span><br><span class="line">React.userEffect(()=&gt;&#123;return ()=&gt;&#123;组件卸载前执行&#125;&#125;,[])//componentWillUnmount</span><br><span class="line"></span><br><span class="line">return (&lt;div&gt;a&lt;/div&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React form &#x27;react&#x27;</span><br><span class="line">function Test()&#123;</span><br><span class="line">const myRef=React.useRef() </span><br><span class="line">function show()&#123;myRef.style.color=&#x27;red&#x27;&#125;</span><br><span class="line">return (&lt;div ref=&#123;myRef&#125;&gt;a&lt;/div&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><blockquote>
<p>可以不用必须有一个真实DOM根标签，编译后会移除</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render()&#123;</span><br><span class="line"></span><br><span class="line">return (</span><br><span class="line">&lt;Fragment key=&#123;&#125;&gt;//只能有一个属性：key</span><br><span class="line">&lt;&gt;//简写，但不能写任何属性</span><br><span class="line">&lt;/&gt;</span><br><span class="line">&lt;/Fragment&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><blockquote>
<p>常用与祖组件和后代组件通信<br>一般不用Context,而是它的封装react-redux</p>
</blockquote>
<p>类式组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const CountContext=React.createContext()//创建一个上下文,必须所有组件都访问得到</span><br><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;CountContext.Provider value=&#123;this.state.a&#125;&gt;&lt;B/&gt;&lt;/CountContext.Provider&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;C/&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class C extends Component&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (this.context)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>所有组件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const CountContext=React.createContext()//创建一个上下文,必须所有组件都访问得到</span><br><span class="line">const &#123;Consumer,Provider&#125;=CountContext</span><br><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;Provider value=&#123;this.state.a&#125;&gt;&lt;B/&gt;&lt;/Provider&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;C/&gt;)&#125;</span><br><span class="line">&#125;</span><br><span class="line">function C()&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;&lt;Consumer&gt;&#123;value=&gt;&#123;return (&lt;span&gt;value&lt;/span&gt;)&#125;&lt;/Consumer&gt;&lt;/div&gt;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h4><blockquote>
<p>只要执行setState即使不更新数据，组件也会重新render9)<br>只要render()调用，其子组件也会更新<br>原因：shouldComponentUpdate()默认总是为true</p>
</blockquote>
<h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><ul>
<li>手动比较新旧值,不一样更新，否则禁止更新<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps,nextState)&#123;//新的</span><br><span class="line">console.log(this.props,this.state)//旧的</span><br><span class="line">return true</span><br><span class="line">return false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123;PureComponent&#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class Test extends PureComponent &#123;</span><br><span class="line">//依赖的数据不更新时，不重新render</span><br><span class="line"></span><br><span class="line">const obj=this.state</span><br><span class="line">obj.name=&#x27;xx&#x27;</span><br><span class="line">this.setState(obj)//浅比较，数据不会更新</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="render-Props"><a href="#render-Props" class="headerlink" title="render Props"></a>render Props</h4><blockquote>
<p>vue中的插槽</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class A extends Component&#123;</span><br><span class="line">state=&#123;a:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;B&gt;aaa&lt;/B&gt;</span><br><span class="line"> &lt;B render=&#123;(val)=&gt;&#123;&lt;C b=&#123;val&#125; /&gt;&#125;/&gt;</span><br><span class="line">)&#125;</span><br><span class="line">&#125;</span><br><span class="line">class B extends Component&#123;</span><br><span class="line">state=&#123;b:1&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;span&gt;&#123;this.props.children&#125;&lt;/span&gt;</span><br><span class="line">this.props.render(this.state.b)</span><br><span class="line">)&#125;//aaa</span><br><span class="line">&#125;</span><br><span class="line">function C()&#123;</span><br><span class="line">static contextType=CountContext//声明接收context</span><br><span class="line">render()&#123;</span><br><span class="line">return (&lt;div&gt;&lt;Consumer&gt;&#123;value=&gt;&#123;return (&lt;span&gt;value&lt;/span&gt;)&#125;&lt;/Consumer&gt;&lt;/div&gt;)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="ErrorBoundary错误边界"><a href="#ErrorBoundary错误边界" class="headerlink" title="ErrorBoundary错误边界"></a>ErrorBoundary错误边界</h4><blockquote>
<p>防止子组件出错导致整个页面出错,只能在生产环境使用<br>只能捕获后代组件生命周期产生的错误，不能捕获自己的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;error:&#x27;&#x27;&#125;</span><br><span class="line">//生命周期函数</span><br><span class="line">static getDerivedStateFromError(err)&#123;//它的子组件出现报错时会调用</span><br><span class="line">componentDidCath(err,info)&#123;&#125;//发生错误时调用</span><br><span class="line">return &#123;error:err&#125;//返回新的state，在render前触发</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&#123;error?error:&#x27;&#x27;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信-1"><a href="#组件间通信-1" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li>props<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">children props</span><br><span class="line">render props</span><br></pre></td></tr></table></figure></li>
<li>消息订阅-发布<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubs-sub event</span><br></pre></td></tr></table></figure></li>
<li>集中式管理<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redux、dva</span><br></pre></td></tr></table></figure></li>
<li>conText<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">生产者-消费者模式</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">- 搭配</span><br><span class="line">父子：props</span><br><span class="line">兄弟: 集中式管理、消息订阅发布</span><br><span class="line">祖孙: 集中式管理、消息订阅发布、context（开发用的少，封装插件用得多）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 关闭eslint</span><br><span class="line">第一步：执行以下命令：</span><br><span class="line">`npm run eject`</span><br><span class="line">第二步：在package.json 中修改代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>
“eslintConfig”: {<br>  “extends”: [<pre><code>&quot;react-app&quot;,
&quot;react-app/jest&quot;
</code></pre>
  ],<br>  “rules”:{<pre><code>&quot;no-undef&quot;:&quot;off&quot;, 
</code></pre>
  “no-restricted-globals”: “off”,<pre><code>&quot;no-unused-vars&quot;: &quot;off&quot;
</code></pre>
  }<br>},<br>```<br>第三步：重启项目</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/12/09/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/09/20-00-00/" class="post-title-link" itemprop="url">react</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-09 20:00:00" itemprop="dateCreated datePublished" datetime="2022-12-09T20:00:00+08:00">2022-12-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-26 16:15:18" itemprop="dateModified" datetime="2023-02-26T16:15:18+08:00">2023-02-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h2 id="浏览器中编写"><a href="#浏览器中编写" class="headerlink" title="浏览器中编写"></a>浏览器中编写</h2><ul>
<li>准备容器</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;test&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>引入库</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--react核心库--&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!--react-dom，用于支持react操纵dom--&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!--babel，用于将jsx转化为js--&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>JSX</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&gt;/*此处要写babel*/</span></span><br><span class="line"><span class="string">//创建虚拟dom</span></span><br><span class="line"><span class="string">const Vdom=(&lt;h1&gt;hello&lt;/h1&gt;)/*不用引号*/</span></span><br><span class="line"><span class="string">//渲染虚拟DOM到页面</span></span><br><span class="line"><span class="string">ReactDOM.render(Vdom,document.getElementById(&#x27;test&#x27;));</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>js<blockquote>
<p>jsx 最终会翻译成 js 写法</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="comment">//创建虚拟dom</span></span><br><span class="line"><span class="keyword">const</span> Vdom=React.createElement(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;title&#x27;</span>&#125;,React.createElement(<span class="string">&#x27;span&#x27;</span>,&#123;&#125;,<span class="string">&#x27;hello&#x27;</span>))</span><br><span class="line"><span class="comment">//渲染虚拟DOM到页面</span></span><br><span class="line">ReactDOM.render(Vdom,<span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>虚拟 DOM 本质是一个对象，虚拟 dom 比较轻量，真实 DOM 比较完整，虚拟 DOM 是 react 内部用，因此无需真实 DOM 那么多的属性。最终虚拟 DOM 会被 react 转化为真实 DOM 呈现在页面上。</p>
</blockquote>
<h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><blockquote>
<p>javascript XML,react 定义的类似与 XML 的 js 扩展语法</p>
</blockquote>
<p>xml：早期用于存储和传输数据的格式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>XIAOMI<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">age</span>&gt;</span>19<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="jsx-语法规则"><a href="#jsx-语法规则" class="headerlink" title="jsx 语法规则"></a>jsx 语法规则</h3><ul>
<li>定义虚拟 dom，不要写引号</li>
<li>标签中混入 js 表达式要用｛｝，js 表达式会产生一个值(返回值)，可以放在任何需要值的地方，如<code>a</code>、<code>a+b</code>、<code>demo(1)</code>、<code>arr.map()</code>、<code>function test()&#123;&#125;</code>。js 语句：<code>if()&#123;&#125;</code>,<code>for()&#123;&#125;</code>,<code>switch()&#123;&#125;</code></li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> Vdom = <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&#123;a&#125;</span>&gt;</span>&#123;a.toString()&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>样式的类型指定不要用 class，要用 className</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Vdom = <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;test&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>内联样式<br>要用<code>style=&#123;&#123;fontSize:"20px"&#125;&#125;</code>的写法</p>
</li>
<li><p>虚拟 dom 只有一个根标签</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Vdom=(</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;span className=&quot;test&quot; &gt;xxx&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>标签首字符为小写则直接转为 html 中同名元素，若为大写则去渲染对应组件</li>
</ul>
<h2 id="组件和模块"><a href="#组件和模块" class="headerlink" title="组件和模块"></a>组件和模块</h2><p>模块：提供特定功能的 js 程序<br>组件：实现局部功能效果的代码和资源集合（html、js、css、img 等）</p>
<h3 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Demo()&#123;  //组件必须首字母大写</span><br><span class="line">//this 为undefind,经过babel编译后开启严格模式，this便指向undefind，不开启严格模式则是window</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是函数定义的，便调用该函数，将虚拟dom渲染成真实dom</span><br></pre></td></tr></table></figure>

<h3 id="类式组件"><a href="#类式组件" class="headerlink" title="类式组件"></a>类式组件</h3><h4 id="简单组件"><a href="#简单组件" class="headerlink" title="简单组件"></a>简单组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;//在Demo的原型对象上</span><br><span class="line">//this指向Demo的实例对象</span><br><span class="line">return &lt;h1&gt;test&lt;/h1&gt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line">//react解析组件标签,找到Demo组件，发现此组件是类定义的，便new 出该类实例，通过该实例调用原型对象上的render方法。将虚拟dom渲染成真实dom</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="复杂组件"><a href="#复杂组件" class="headerlink" title="复杂组件"></a>复杂组件</h4><h5 id="state"><a href="#state" class="headerlink" title="state"></a>state</h5><blockquote>
<p>state 为组件的重要属性，值是对象，通过更新组件的 state 来更新对应的页面显示（重新渲染组件）</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变t</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;test&#125;&gt;test&#123;this.state.a&#125;&lt;/h1&gt;</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">	//类中的方法默认开启局部严格模式</span><br><span class="line">	//所以this为undefind</span><br><span class="line">	//只有通过Demo实例调用此实例，this才为Demo的实例</span><br><span class="line">	//changeValue作为onClick的回调，不是实例调用</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>解决 this 指向</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">constructor(prop)&#123;</span><br><span class="line">super(prop)//构造器是否接受props，是否传给super取决于是否希望在构造器中通过this访问props</span><br><span class="line">this.state=&#123;</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line">&#125;</span><br><span class="line">//改变this指向</span><br><span class="line">this.changValue=this.changValue.bind(this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">changValue()&#123;</span><br><span class="line">//state不能直接更改</span><br><span class="line">this.state.a=1</span><br><span class="line">//必须通过api</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure>

<ul>
<li>简写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">state=&#123;//等于号，代表给该类的实例追加属性</span><br><span class="line">a:1,</span><br><span class="line">b:2</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 onClick=&#123;this.changeValue&#125;&gt;test&#123;this.state.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">changValue=()=&gt;&#123;//必须用箭头函数</span><br><span class="line">this.setState(&#123;a:2&#125;)//更新为合并，不是替换</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo/&gt;,document.getElementById(&#x27;test&#x27;))</span><br></pre></td></tr></table></figure>

<h5 id="props"><a href="#props" class="headerlink" title="props"></a>props</h5><blockquote>
<p>组件的所有属性都保存在 props 中，props 是只读的，不能修改</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>props 规则限制</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//限制类型</span><br><span class="line">Demo.propTypes=&#123;</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">//默认值</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>简写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;this.props.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static propTypes=&#123;	//加上static代表给类本身添加属性</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">static defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br><span class="line">const obj=&#123;a:1,b:2&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo &#123;...obj&#125;/&gt;,document.getElementById(&#x27;test2&#x27;))//批量传属性</span><br></pre></td></tr></table></figure>

<ul>
<li>函数式组件使用 props</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function Demo(props)&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 &gt;test&#123;props.b&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> Demo.propTypes=&#123;</span><br><span class="line">//react16.x以上需引入prop-types.js</span><br><span class="line">a:PropTypes.number.isRequied</span><br><span class="line">test:PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line">Demo.defaultProps=&#123;</span><br><span class="line">b:&#x27;xx&#x27;</span><br><span class="line">&#125;&#125;</span><br><span class="line">function test()&#123;&#125;</span><br><span class="line">ReactDOM.render(&lt;Demo a=&#123;1&#125; b=&#x27;ss&#x27; handle=&quot;test&quot;/&gt;,document.getElementById(&#x27;test1&#x27;))//数据类型要用｛｝</span><br></pre></td></tr></table></figure>

<h5 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h5><blockquote>
<p>组件内的标签可使用 ref 属性标识自己类似 id=’test’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Demo extends React.Component&#123;</span><br><span class="line">render()&#123;</span><br><span class="line">return (</span><br><span class="line">&lt;h1 ref=&#x27;title1&#x27; &gt;官方不推荐String类型的ref写法，效率不高&lt;/h1&gt;</span><br><span class="line">&lt;h1 ref=&#123;(node)=&gt;&#123;this.title2=node&#125;&#125; &gt;ref的回调写法，内联写法在每次更新时会调用两次，第一次时为了清空旧的ref，所以为null，第二次才为DOM，可用类绑定函数替换&lt;/h1&gt;</span><br><span class="line">&lt;h1 ref=&#123;title3&#125; &gt;使用createRef&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">title3=createRef()//调用后返回一个容器，用于存储ref标识的节点，只能存一个</span><br><span class="line">test=()=&gt;&#123;</span><br><span class="line">console.log(this.refs.title1)</span><br><span class="line">console.log(this.title2)</span><br><span class="line">console.log(this.title3.current)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h5><ol>
<li>通过 onXxx 属性指定事件处理函数（注意大小写）<ul>
<li>react 使用的自定义事件（原生小写-&gt;大写，原生大写-&gt;小写），而不是原生 DOM 事件</li>
<li>react 中的事件是通过事件委托方式处理的（委托给组件最外层的元素,事件冒泡）</li>
</ul>
</li>
<li>可通过 event.target 得到的发生事件的 DOM 元素对象</li>
</ol>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><h5 id="旧"><a href="#旧" class="headerlink" title="旧"></a>旧</h5><ul>
<li>初始化阶段</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">componentWillMount()//组件将要挂载</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure>

<ul>
<li>更新数据时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setState()</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure>

<ul>
<li>强制更新时</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">forceUpdate()//不想更改状态中的数据，更新页面</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br></pre></td></tr></table></figure>

<ul>
<li>父组件渲染</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(props)//第一次不调用，接受新的props才调用</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">componentWillUpdate()//组件将要更新</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate()//组件更新更新完毕</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>卸载组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure>

<h5 id="新"><a href="#新" class="headerlink" title="新"></a>新</h5><blockquote>
<p>因为新版本的异步渲染，因此 componentWillUpdate，componentWillReceive，componentWillMount 即将废弃，所以要加上 UNSAFE_防止误解和滥用</p>
</blockquote>
<ul>
<li>初始化阶段</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">constructor()//构造器</span><br><span class="line">//UNSAFE_componentWillMount()</span><br><span class="line">static getDerivedStateFromProps(props,state)&#123;//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">//必须返回状态对象，若包含state中的数据，将覆盖它。用于state的值任何时候取决于props</span><br><span class="line">return &#123;a:1&#125;</span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidMount()//组件挂载完毕</span><br></pre></td></tr></table></figure>

<ul>
<li>更新数据时，调用 setState()、forceUpdate()或父组件新 Props</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">static getDerivedStateFromProps(props,state)//组件将要挂载，不能加到实例上，要加上static。</span><br><span class="line">shouldComponentUpdate()//默认返回true，返回false时不执行更新</span><br><span class="line">static getSnapshotBeforeUpdate(preProps,preState)&#123;//更新前</span><br><span class="line"></span><br><span class="line">return &#x27;xxx&#x27;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">render()</span><br><span class="line">componentDidUpdate(preProps,preState,snapshotValue)//之前的prop时和状态</span><br></pre></td></tr></table></figure>

<ul>
<li>卸载组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">由React.unmountComponentAtNode()触发</span><br><span class="line">componentWillUnmount()</span><br></pre></td></tr></table></figure>

<h4 id="react-中的-key-作用"><a href="#react-中的-key-作用" class="headerlink" title="react 中的 key 作用"></a>react 中的 key 作用</h4><p>key 是虚拟 Dom 对象的标识，当状态中的数据变化时，react 会根据新数据形成新的虚拟 DOM，<br>随后将新的虚拟 DOM 与旧的虚拟 DOM 进行 diff 比较。<br>若旧虚拟 dom 中到了与新虚拟 dom 中相同的 key：</p>
<ul>
<li>虚拟 dom 中内容没有变化，使用之前的真实 dom</li>
<li>虚拟 dom 中内容变化了，则生成新的真实 dom，随后替换掉页面中的真实 dom</li>
</ul>
<p>若旧虚拟 dom 未找到与新虚拟 dom 相同的 key，则创建新的真实 dom 渲染到页面中</p>
<p>用 index 做 key 引发的问题</p>
<ol>
<li>若对数据进行逆序添加，逆序删除等破坏顺序操作时，产生没必要的真实 dom 更新，虽然界面没有问题</li>
<li>若结构中包含输入类的 DOM，会产生错误 DOM 更新，界面会出现异常</li>
<li>若仅用于渲染列表展示，没有逆序添加，逆序删除等破坏顺序操作，则用 index 做 key 没有任何问题</li>
</ol>
<h4 id="脚手架"><a href="#脚手架" class="headerlink" title="脚手架"></a>脚手架</h4><p>安装：<code>npm i create-react-app -g</code></p>
<p>创建文件夹：<code>create-ract app test</code></p>
<p>进入创建的文件夹：<code>npm start</code></p>
<ul>
<li>入口文件 index.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//核心库</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//渲染</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>App.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line">Class App <span class="keyword">extends</span> React.Component&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br></pre></td></tr></table></figure>

<ul>
<li>样式模块化</li>
</ul>
<p>index.module.css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hello form <span class="string">&#x27;./index.module.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> calss Test <span class="keyword">extends</span> Compont&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;hello.title&#125;</span>&gt;</span>xx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>代理</li>
</ul>
<p>setupProxy.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy=<span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports=<span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">app.use(</span><br><span class="line">proxy.createProxyMiddleware(<span class="string">&#x27;/apis&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">target</span>:<span class="string">&#x27;http://xxx:xxx&#x27;</span>,</span><br><span class="line"><span class="attr">changeOrigin</span>:<span class="literal">true</span>,<span class="comment">//控制服务器收到的响应头中的Host字段值</span></span><br><span class="line"><span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/apis&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">proxy.createProxyMiddleware(<span class="string">&#x27;/api2&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">target</span>:<span class="string">&#x27;http://xxx:xxx&#x27;</span>,</span><br><span class="line"><span class="attr">changeOrigin</span>:<span class="literal">true</span>,<span class="comment">//控制服务器收到的响应头中的Host字段值,true时为代理服务ip,false为当前ip，默认为false</span></span><br><span class="line"><span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/api2&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">&#125;)，</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信"><a href="#组件间通信" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li><p>子-&gt;父<br>父给子组件间传入回调函数，子组件调用回调函数把数据传给父组件</p>
</li>
<li><p>消息订阅与发布<br>第三方库 pubsub.js</p>
</li>
</ul>
<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><blockquote>
<p>依赖 H5 BOM 浏览器对象上的 history 或 hash 锚点，监听路由变化，匹配对应的组件<br>BrowserRouter 使用的 h5 的 histrory API,不兼容 IE9 以下版本<br>HashRouter 使用的 URL 的哈希值</p>
</blockquote>
<ul>
<li>react-router-dom</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要统一由一个router管理，可包围在App外侧</span></span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/test&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#x27;/test&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>路由组件<blockquote>
<p>接受的 props 默认有 history，location，match</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">&quot;/test&quot;</span> component=&#123;Test&#125;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>一般组件<br>props 传什么有什么</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Test /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>NavLink<blockquote>
<p>可以通过 activeClassName 指定样式名,标签体内容是个特殊属性，通过 this.props.children 获取</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink activeClassName=<span class="string">&quot;active_color&quot;</span>&gt;test</span><br><span class="line">&lt;/NavLink&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">activeClassName</span>=<span class="string">&quot;active_color&quot;</span> <span class="attr">children</span>=<span class="string">&#x27;test&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Switch<blockquote>
<p>路由默认会全部匹配完，加上 switch 可实现单一匹配，提高效率</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">//默认模糊匹配,exact严格匹配，开启后无法匹配二级路由</span><br><span class="line">&lt;Route exact path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>Redirect<blockquote>
<p>重定向，写在路由最下方，当路由都不匹配时，跳转到 redirect 指定的路由</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Redirect to=<span class="string">&quot;/test&quot;</span> &gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>二级路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/test/a&quot; component=&#123;Test&#125;&gt;</span><br><span class="line">&lt;Redirect to=&quot;/test&quot; &gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>路由参数</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//params参数，this.props.match.params</span></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=`/<span class="attr">test</span>/$&#123;<span class="attr">123</span>&#125;/$&#123;<span class="attr">123</span>&#125;`&gt;</span><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test/:id/:count&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//search参数(为urlencoded编码字符串，需借助querystring解析)，this.location.match.search</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;querystring&#x27;</span></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=`/<span class="attr">test</span>?<span class="attr">a</span>=<span class="string">$&#123;123&#125;&amp;b</span>=<span class="string">$&#123;123&#125;</span>`&gt;</span><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">//qs.parse(this.props.location.search)</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//state参数(不在地址栏显示，browser刷新页面不丢失，hashRouter刷新丢失)，this.props.location.state</span></span><br><span class="line">&lt;HashRouter&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;&#123;pathname:</span>&#x27;/<span class="attr">test</span>&#x27;<span class="attr">state:</span>&#123;<span class="attr">a</span>=<span class="string">123,b</span>=<span class="string">123&#125;&#125;&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Test&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">goto</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.props.history.push(<span class="string">&#x27;/test&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">xx</span>:<span class="string">&#x27;xx&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">this</span>.props.history.replace(<span class="string">&#x27;/test&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">xx</span>:<span class="string">&#x27;xx&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>withRouter<blockquote>
<p>加工一般组件，让一般组件用上路由 api</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; withRouter &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withRouter(Test); <span class="comment">//返回的是全新的组件</span></span><br></pre></td></tr></table></figure>

<h4 id="React-Router-6"><a href="#React-Router-6" class="headerlink" title="React Router 6"></a>React Router 6</h4><blockquote>
<p>移除<code>&lt;Switch/&gt;</code> ，新增<code>&lt;Routers/&gt;</code><br>移除<code>&lt;Redirect/&gt; </code>，新增<code>&lt;Navigate/&gt;</code> &gt; <code>component=&#123;About&#125;</code>变为 <code>element=&#123;&lt;About/&gt;&#125;</code><br>增加 hooks</p>
</blockquote>
<ul>
<li>Routers<blockquote>
<p>必须用 Routers 包裹，不会匹配多个</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Routers,Route&#125; form <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line">&lt;Routers&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Test</span>/&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/TEST&quot;</span> <span class="attr">caseSensitive</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Test2</span>/&gt;</span>&#125;&gt;//区分大小写</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Routers</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>Navigate<blockquote>
<p>重定向,只要被渲染，就会切换路由</p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Routers,Route,Navigate&#125; form <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line">&lt;Routers&gt;</span><br><span class="line">&lt;Route path=&quot;/test&quot; element=&#123;&lt;Test/&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot;  /&gt;&#125;&gt;</span><br><span class="line">&lt;Route path=&quot;/&quot; element=&#123;&lt;Navigate to=&quot;/test&quot; replace /&gt;&#125;&gt;</span><br><span class="line">&lt;/Routers&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>NavLink</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NaviLink className=&#123;<span class="function">()=&gt;</span><span class="keyword">return</span> <span class="string">&#x27;activeColor&#x27;</span>&#125;&gt;&lt;/NaviLink&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>路由表</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;lazy&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useRoutes,Navigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="comment">//生成路由</span></span><br><span class="line">cosnt About=lazy(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/About&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> element=useRoutes([</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line"><span class="attr">element</span>:<span class="xml"><span class="tag">&lt;<span class="name">Test</span>/&gt;</span></span></span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;new&#x27;</span>,</span><br><span class="line"><span class="attr">element</span>:<span class="xml"><span class="tag">&lt;<span class="name">New</span>/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">element</span>:<span class="xml"><span class="tag">&lt;<span class="name">About</span>/&gt;</span></span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="comment">//实现路由重定向</span></span><br><span class="line">        <span class="attr">element</span>:<span class="xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&#x27;/main&#x27;</span>/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#123;/*引用路由表*/&#125;</span></span><br><span class="line"><span class="xml">&#123;element&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Outlet</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 若要显示子路由，需在父级路由组件中引入Outlet！！！</span></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">end</span> <span class="attr">to</span>=<span class="string">&quot;new&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span>//end代表匹配子路由时，自己失去高亮</span></span><br><span class="line"><span class="xml">&#123;/*指定路由组件呈现的位置*/&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Outlet</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>路由参数</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//params参数，this.props.match.params</span></span><br><span class="line">&lt;Link to=<span class="string">`/test/<span class="subst">$&#123;<span class="number">123</span>&#125;</span>/<span class="subst">$&#123;<span class="number">123</span>&#125;</span>`</span>&gt;&lt;/Link&gt;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;useParams,useMath&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;a,b&#125;=userParams()</span><br><span class="line"><span class="keyword">const</span> &#123;a,b&#125;=userParams(<span class="regexp">/test/</span>:a/:b&#125;)</span><br><span class="line"><span class="keyword">return</span> (&#123;a+b&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=<span class="string">`/test?a=<span class="subst">$&#123;<span class="number">123</span>&#125;</span>&amp;b=<span class="subst">$&#123;<span class="number">123</span>&#125;</span>`</span>&gt;&lt;/Link&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;useSearchParams,useLocation&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> [search,setSearch]=userSearchParams()</span><br><span class="line"><span class="keyword">const</span> a=search.get(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> setData=<span class="function">()=&gt;</span>&#123;setSearch(<span class="number">1234</span>)&#125;<span class="comment">//更新a</span></span><br><span class="line"><span class="keyword">const</span> a1=useLocation()</span><br><span class="line"><span class="keyword">return</span> (&#123;a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=<span class="string">&#x27;/test&#x27;</span> state=&#123;&#123;a=<span class="number">123</span>,b=<span class="number">123</span>&#125;&#125;&gt;&lt;/Link&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;useLocation&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> obj=useLocation()</span><br><span class="line"><span class="keyword">return</span> (&#123;obj.a&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编程式路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useNavigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">const</span> navigate=userNavigate()</span><br><span class="line"><span class="function"><span class="title">goto</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">navigate(<span class="string">&#x27;/test&#x27;</span>,&#123;</span><br><span class="line"><span class="attr">replace</span>:<span class="literal">false</span>,</span><br><span class="line"><span class="attr">state</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line">navigate(<span class="number">1</span>)<span class="comment">//前进</span></span><br><span class="line">navigate(-<span class="number">1</span>)<span class="comment">//后退</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h4><blockquote>
<p>状态管理 js 库，集中式管理 react 应用中多个组件共享的状态</p>
</blockquote>
<h5 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h5><ul>
<li>store.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125;form <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./countReducer&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store=createStore(countReducer)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<ul>
<li>countReducer.js</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个为count组件服务的reducer，reducer本质是一个函数</span></span><br><span class="line">第一次调用时是store自动触发的，传递的preState是undefin</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">preState,action</span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;type,data&#125;=action</span><br><span class="line"><span class="keyword">return</span> preState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>test.jsx</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/store.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">store.subscribe(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">increment</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">store.dispatch(&#123;<span class="attr">type</span>:<span class="string">&#x27;xx&quot;,data:123&#125;)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">render()&#123;</span></span><br><span class="line"><span class="string">return （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="完整"><a href="#完整" class="headerlink" title="完整"></a>完整</h5><ul>
<li>countAction.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个为count组件服务的action，</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">type</span>: <span class="string">&quot;xxxx&quot;</span>, data &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>countReducer.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个为count组件服务的reducer，reducer本质是一个函数</span></span><br><span class="line"><span class="comment">//第一次调用时是store自动触发的，传递的preState是undefin</span></span><br><span class="line"><span class="comment">//必须是纯函数（同样输入必定得到同样输出）不要在reducer中发起网络请求、改写prestate、使用Date.now() , Math.random()</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">preState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action;</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">return</span> preState; <span class="comment">//当preState没有变化时，不会引起页面刷新（浅比较）</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">return</span> preState + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>constants.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD = <span class="string">&quot;add&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>test.jsx</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/store.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;test&#125; <span class="keyword">from</span> <span class="string">&#x27;../store/countAction.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">store.subscribe(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.setState(&#123;&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">increment</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">store.dispatch(test(<span class="number">123</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> （&lt;div&gt;&#123;&#123;store.getState()&#125;&#125;&lt;/div&gt;）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="异步-action"><a href="#异步-action" class="headerlink" title="异步 action"></a>异步 action</h5><blockquote>
<p>异步 action 指 action 返回值为函数，同步 action 指 action 返回值为对象</p>
</blockquote>
<ul>
<li>store.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore,applyMiddleware&#125;form <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./countReducer&#x27;</span></span><br><span class="line"><span class="comment">//引入异步action中间件</span></span><br><span class="line"><span class="comment">//yarn add redux-thunk</span></span><br><span class="line"><span class="keyword">import</span> thunk  <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store=createStore(countReducer,applyMiddleware(thunk))</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<ul>
<li>action.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> add=data=(&#123;<span class="attr">type</span>:<span class="string">&#x27;add&#x27;</span>,data&#125;)<span class="comment">//同步action</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addAsync=<span class="function">(<span class="params">data,a,b,c</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">dispatch(add(data)&#125;)</span><br><span class="line">&#125;,<span class="number">50000</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h5><blockquote>
<p>UI 组件应该包裹一个容器组件，它们为父子关系<br>UI 组件不能使用任何 redux api，容器组件可以<br>容器给 UI 组件通过 props 传递状态、操作方法<br>不用在写 store.subscribe()</p>
</blockquote>
<ul>
<li>容器组件<br>/containers/test/index.jsx</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//yran add react-redux</span></span><br><span class="line"><span class="keyword">import</span> testUI <span class="keyword">from</span> <span class="string">&quot;../../components/test.jsx&quot;</span>;</span><br><span class="line"><span class="comment">//引入connect用于连接UI组件与redux</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//通过props传给UI组件状态</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: state,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapDisoatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//通过props传给UI操作方法</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">d</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      dispatch(&#123; <span class="attr">type</span>: <span class="string">&quot;xxx&quot;</span>, data &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">c</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testContainer = connect(mapStateToProps, mapDisoatchToProps)(testUI);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> testContainer;</span><br></pre></td></tr></table></figure>

<p>App.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store form <span class="string">&#x27;../../redux/store.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Test <span class="keyword">from</span> <span class="string">&#x27;../../containers/test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Test</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;/</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简写</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createIncreamentAction &#125; <span class="keyword">from</span> <span class="string">&quot;../store/action.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> testContainer = connect(</span><br><span class="line">  <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: state;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">add</span>: createIncreamentAction,</span><br><span class="line">  &#125;</span><br><span class="line">)(testUI);</span><br></pre></td></tr></table></figure>

<h5 id="provide"><a href="#provide" class="headerlink" title="provide"></a>provide</h5><p>index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="comment">//自动匹配容器组件，添加上store</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">ProVider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">ProVider</span>&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="整合容器和-UI-组件"><a href="#整合容器和-UI-组件" class="headerlink" title="整合容器和 UI 组件"></a>整合容器和 UI 组件</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createIncreamentAction&#125; <span class="keyword">from</span> <span class="string">&#x27;../store/action.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="title">extend</span> <span class="title">Componet</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line"><span class="function"><span class="params">state</span>=&gt;</span>&#123;<span class="attr">a</span>:state&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">add</span>:createIncreamentAction</span><br><span class="line">&#125;</span><br><span class="line">)(Test)</span><br></pre></td></tr></table></figure>

<h5 id="多个-reducer"><a href="#多个-reducer" class="headerlink" title="多个 reducer"></a>多个 reducer</h5><ul>
<li>store.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore，applyMiddleware,combineReducers&#125;form <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer1 <span class="keyword">from</span> <span class="string">&#x27;./reducer/count1&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer2 <span class="keyword">from</span> <span class="string">&#x27;./reducer/count2&#x27;</span></span><br><span class="line"><span class="keyword">let</span> allReducer=combineReducers(&#123;</span><br><span class="line"><span class="attr">count1</span>:countReducer1</span><br><span class="line"><span class="attr">count2</span>:countReducer2</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(allReducer)</span><br></pre></td></tr></table></figure>

<h5 id="使用-Redux-Toolkit-简化-Redux"><a href="#使用-Redux-Toolkit-简化-Redux" class="headerlink" title="使用 Redux Toolkit 简化 Redux"></a>使用 Redux Toolkit 简化 Redux</h5><p><code>npm install @reduxjs/toolkit react-redux</code><br>react-redux 也需要单独安装</p>
<ul>
<li>configureStore<br>configureStore 替代 createStore<br>配置简单,设置默认值也方便<br>src/store/index.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> counterSlice <span class="keyword">from</span> <span class="string">&quot;../pages/basic/counterSlice&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> mySlice <span class="keyword">from</span> <span class="string">&quot;../pages/mySlice&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> configureStore(&#123;</span><br><span class="line">  <span class="attr">reducer</span>: &#123;</span><br><span class="line">    <span class="attr">rootCounter</span>: counterSlice,</span><br><span class="line">    <span class="attr">rootMy</span>: mySlice,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这里 reduer 直接合并成一个唯一的 根 root 了<br>原有的 combineReducers 这个合并函数就用不到了<br>注意自己配置的 reducer 的 key 值 和 对应的 value 值<br>我这里把单独的 reducer 放到和页面同级了,这个根据自己的习惯,放到 store 下面新建目录存放所有的 reducer 也行</p>
<ul>
<li>根组件配置 store</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">入口index.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = ReactDOM.createRoot(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">root.render(</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>createAction<br>创建一个 action，传入动作类型字符串，返回动作函数。<br>createAction 语法： function createAction(type, prepareAction?)<br>1，type：Redux 中的 actionTypes<br>2，prepareAction：Redux 中的 actions</p>
</li>
<li><p>createReducer<br>创建一个 reducer，action type 映射到 case reducer 函数中，不用写 switch-case，并集成 immer。<br>Builder 提供了三个方法：<br>1，addCase： 根据 action 添加一个 reducer case 的操作。<br>2，addMatcher： 在调用 actions 前，使用 matcher function 过滤<br>3，addDefaultCase： 默认值，等价于 switch 的 default case;</p>
</li>
<li><p>createSlice reducer 编写</p>
<blockquote>
<p>createSlice 对 actions、Reducer 的一个封装。</p>
</blockquote>
<ol>
<li><p>创建 slice<br>使用 createSlice 方法创建一个 slice。每一个 slice 里面包含了 reducer 和 actions，可以实现模块化的封装。<br>所有的相关操作都独立在一个文件中完成。</p>
</li>
<li><p>关键属性:<br>name<br>命名空间，可以自动的把每一个 action 进行独立，解决了 action 的 type 出现同名的文件。在使用的时候默认会把使用 name/actionName<br>initialState<br>state 数据的初始值</p>
</li>
<li><p>reducers<br>定义的 action。由于内置了 immutable 插件，可以直接使用赋值的方式进行数据的改变，不需要每一次都返回一个新的 state 数据。</p>
</li>
<li><p>导出<br>counterSlice.actions 导出所有的修改函数方便页面使用<br>counterSlice.reducer 导出 reducer 在 store 里面使用<br>具体 reducer 函数的参数<br>参数 1: 当前 slice 的 state 数据<br>参数 2: 对象{type:””,payload:传参}</p>
</li>
</ol>
</li>
</ul>
<p>type:counterSpace/decrement<br>type 就是之前的 actions 用 switc/case 来匹配很麻烦,现在简洁了<br>type 构成 slice 的 name 命名空间/具体的修改函数</p>
<p>payload 要和传的时候保持一致</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  <span class="attr">counter</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">user</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;yzs&quot;</span>,</span><br><span class="line">    <span class="attr">job</span>: <span class="string">&quot;全栈&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">reducer切片</span></span><br><span class="line"><span class="comment">createSlice函数的作用：生成分片的reducer</span></span><br><span class="line"><span class="comment">内部调用的市createAction和createReducer</span></span><br><span class="line"><span class="comment">creatSlice可以帮助我们用更少的代码去生成配套的reducer和action,而且有很好的维护性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> counterSlice = createSlice(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;counterSpace&quot;</span>, <span class="comment">// 命名空间，在调用action的时候会默认的设置为action的前缀,保证唯一.不重名</span></span><br><span class="line">  initialState,</span><br><span class="line">  <span class="attr">reducers</span>: &#123;</span><br><span class="line"><span class="comment">// reducer函数 state当前组件的数据</span></span><br><span class="line"><span class="comment">//第二个参数为&#123;payload:&#123;&#125;,type:&quot;&quot;&quot;&#125; 想想就写法或者vuex</span></span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter += <span class="number">100</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">decrement</span>(<span class="params">state, actions</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// actions == &#123;payload:&#123;&#125;,type:&quot;&quot;&quot;&#125;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;decrement---actions&quot;</span>, actions);</span><br><span class="line">      state.counter -= actions.payload;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">updateUser</span>(<span class="params">state, &#123; payload &#125;</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;updateUser-------payload&quot;</span>, payload);</span><br><span class="line"><span class="comment">// 引用类型 注意 赋值的写法</span></span><br><span class="line">      state.user = &#123;</span><br><span class="line">        ...state.user,</span><br><span class="line">        ...payload,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">切片对象会自动地帮助我们生成action</span></span><br><span class="line"><span class="comment">切片对象会根据我们地reducers方法来自动地创建action对象，这些action对象会保存到切片对象的actions中</span></span><br><span class="line"><span class="comment">&#123;type:name/函数名，payload:函数的参数&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; increment, decrement, updateUser &#125; = counterSlice.actions;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> selectCount = <span class="function">(<span class="params">state</span>) =&gt;</span> state.rootCounter.counter;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> selectUser = <span class="function">(<span class="params">state</span>) =&gt;</span> state.rootCounter.user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterSlice.reducer;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>页面使用<ol>
<li>useSelector()<br>返回指定的 state</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这样写太长了 麻烦</span></span><br><span class="line"> <span class="keyword">const</span> counter = useSelector(<span class="function"><span class="params">state</span>=&gt;</span>state.rootCouter.counter);</span><br></pre></td></tr></table></figure>

<p>rootCouter 这个 key 来源于 根 store 里面配置的 reducer，这样写太长了，麻烦。在这个 slice 里面我做了统一处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> selectCount = <span class="function">(<span class="params">state</span>) =&gt;</span> state.rootCounter.counter;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> selectUser = <span class="function">(<span class="params">state</span>) =&gt;</span> state.rootCounter.user;</span><br></pre></td></tr></table></figure>

<p>页面使用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  increment,</span><br><span class="line">  decrement,</span><br><span class="line">  updateUser,</span><br><span class="line">  selectCount,</span><br><span class="line">  selectUser,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;./normalSlice&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// let counter = useSelector(state=&gt;state.rootCouter.counter)</span></span><br><span class="line">  <span class="keyword">const</span> counter = useSelector(selectCount);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;页面---counter:&quot;</span>, counter);</span><br><span class="line">  <span class="keyword">const</span> user = useSelector(selectUser);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这样可以直接解构出当前 slice所有的 state</span></span><br><span class="line"><span class="comment">// 具体用哪种 看自己心情</span></span><br><span class="line"> <span class="keyword">const</span> &#123; counter &#125; = useSelector(<span class="function">(<span class="params">state</span>) =&gt;</span> state.rootCouter);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ( <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span> 布局看下面 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>useDispatch()<br>payload 传参和 reducer 保持一致<br>引用类型的 修改注意</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dispatch = useDispatch(); 修改函数</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>reduxjs/toolkit 基础用法<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(increment())&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;counter&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(decrement(666))&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>姓名:&#123;user.name&#125; ---职业:&#123;user.job&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;dispatch(updateUser(&#123;name:&#x27;Michael&#x27;&#125;))&#125;&#125;&gt;改名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="xml">        dispatch(updateUser(&#123;job:&#x27;自由职业者&#x27;&#125;))&#125;</span></span><br><span class="line"><span class="xml">        &#125;&gt;转行<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>异步 createAsyncThunk()<br>内置了 redux-thunk 处理异步 , 足够解决绝大部分的问题. 还有其他中间件比如:redux-saga 、redux-observable。<br>异步请求处理三种状态的 action :pending\fulfilled\rejected；<br>这三种状态的 action 自动触发, 防止外部手动调用,则使用属性 extraReducers , 则不会生成对外的的 action creator .</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">接受一个动作类型字符串和一个返回<span class="built_in">Promise</span>函数，并生成一个pending/fulfilled/rejected基于该<span class="built_in">Promise</span>分派动作类型的 thunk</span><br><span class="line">用 fetch请求模拟一个异步</span><br><span class="line"><span class="number">3.</span>createAsyncThunk(<span class="string">&quot;counterSpace/getList&quot;</span>,<span class="function">()=&gt;</span>&#123;&#125;)</span><br><span class="line">参数<span class="number">1</span>: slice的name/命名空间/函数名</span><br><span class="line"></span><br><span class="line"><span class="comment">// return 不要忘记</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getList = <span class="function">( ) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fetch(<span class="string">&quot;https://.XX.cn/api/news&quot;</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>res.json());</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span>  getListAsync =  createAsyncThunk(<span class="string">&quot;counterSpace/getList&quot;</span>,<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> getList()</span><br><span class="line">  <span class="keyword">return</span> res<span class="comment">// 此处的返回结果会在 .fulfilled中作为payload的值</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>extraReducers<br>异步函数配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">createSlice(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;counterSpace&quot;</span>,</span><br><span class="line">    initialState,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;&#125;,</span><br><span class="line">    <span class="attr">extraReducers</span>: <span class="function">(<span class="params">builder</span>) =&gt;</span> &#123;</span><br><span class="line">    builder</span><br><span class="line">      .addCase(getListAsync.pending, <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&quot;pending&quot;</span>,state);</span><br><span class="line">      &#125;)</span><br><span class="line">      .addCase(getListAsync.rejected, <span class="function">(<span class="params">state, err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;rejected 失败&quot;</span>,err);</span><br><span class="line"></span><br><span class="line">      &#125;)</span><br><span class="line">      .addCase(getListAsync.fulfilled, <span class="function">(<span class="params">state, action</span>) =&gt;</span> &#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">&quot;fulfilled 成功&quot;</span>,state);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;fulfilled action&quot;</span>,action);</span><br><span class="line"></span><br><span class="line">        state.list = action.payload</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">这个配置基本就是套路</span><br><span class="line">只需要把函数名字改为通过createAsyncThunk()创建的函数名</span><br><span class="line">根据自己的业务场景 写赋值逻辑就行</span><br></pre></td></tr></table></figure>

<p>页面使用异步函数</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">()=&gt;</span>dispatch(getListAsync(<span class="string">&#x27;异步模拟&#x27;</span>))&#125;&gt;异步&lt;/button&gt;</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;</span></span><br><span class="line"><span class="xml">          listData.map((news)=&gt;&#123;</span></span><br><span class="line"><span class="xml">            return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;news.id&#125;</span>&gt;</span>&#123;news.title&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">          &#125;)</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="number">1</span>&#125;&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;a&#125;=obj;</span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;b&#125;&#125;=obj;<span class="comment">//连续解构赋值</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:value&#125;&#125;=obj;<span class="comment">//连续解构赋值+重命名</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h5><ul>
<li>若 a 函数，接收的参数是一个函数，那么 a 就可以称为高阶函数</li>
<li>若 a 函数，调用的返回值依然是一个函数，那么 a 就可以称为高阶函数<br>如 promise setTimeOut arr.map()</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;input onChange=<span class="string">&quot;&#123;test(&#x27;1&#x27;)&#125;&quot;</span>/&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&quot;&#123;test(&#x27;2&#x27;)&#125;&quot;</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="函数的柯里化"><a href="#函数的柯里化" class="headerlink" title="函数的柯里化"></a>函数的柯里化</h5><p>通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test=(type)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">arr.push( &#123;[type]:e.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a,b,c</span>)</span>&#123;<span class="keyword">return</span> a+b+c&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum2</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">b</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">c</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> a+b+c</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h4 id="前端发请求"><a href="#前端发请求" class="headerlink" title="前端发请求"></a>前端发请求</h4><h5 id="xhr"><a href="#xhr" class="headerlink" title="xhr"></a>xhr</h5><ul>
<li>jquery</li>
<li>axios（node 使用 axios 是封装 http 协议）</li>
</ul>
<h5 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h5><blockquote>
<p>原生函数,老版本兼容性差</p>
</blockquote>
<p>fetch(‘xxx’).then(res=&gt;{<br>//联系服务器成功<br>return res.json()<br>},err=&gt;{return new Promis(()=&gt;{})}).then(res=&gt;{},err=&gt;{})</p>
<h5 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h5><p>写法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">对象式setState</span><br><span class="line"><span class="built_in">this</span>.setState(&#123;<span class="attr">a</span>:<span class="number">2</span>&#125;)</span><br><span class="line"><span class="built_in">this</span>.setState(&#123;<span class="attr">a</span>:<span class="number">2</span>&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//状态更新以及页面也更新后，才调用</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">函数式setState</span><br><span class="line"><span class="built_in">this</span>.setState(<span class="function">(<span class="params">state,props</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;&#125;,<span class="function">()=&gt;</span>&#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h4><blockquote>
<p>路由组件懒加载</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;lazy,COmponent,Suspense&#125; form <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> Home=lazy(<span class="function">()=&gt;</span>&#123;<span class="keyword">import</span> (<span class="string">&#x27;./Home&#x27;</span>)&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> <span class="title">extend</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&lt;Suspense fallback=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Loading</span>/&gt;</span></span>&#125;&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Route</span>  <span class="attr">path</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Home&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">&lt;/Suspense&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><blockquote>
<p>hook 是 16.8 的新特性，可以让你在函数组件中使用 state 以及其他 react 特性</p>
</blockquote>
<h5 id="state-1"><a href="#state-1" class="headerlink" title="state"></a>state</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React form <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> [a,set]=React.useState(<span class="number">123</span>) <span class="comment">//初始化会调用一次，下次调用时，会缓存数据，不会覆盖</span></span><br><span class="line"><span class="keyword">let</span> add1=<span class="function">()=&gt;</span>&#123;set(<span class="number">456</span>)&#125;</span><br><span class="line"><span class="keyword">let</span> add2=<span class="function">()=&gt;</span>&#123;set(<span class="function">(<span class="params">a</span>)=&gt;</span>&#123;<span class="keyword">return</span> a+<span class="number">1</span>&#125;)&#125;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)&#125;</span><br></pre></td></tr></table></figure>

<h5 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h5><blockquote>
<p>函数组件里使用生命周期</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React form <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> [count,setCount]=React.useState(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line">React.userEffect(<span class="function">()=&gt;</span>&#123;&#125;,[a])<span class="comment">//检测a,改变时调用------</span></span><br><span class="line">React.userEffect(<span class="function">()=&gt;</span>&#123;&#125;,[])<span class="comment">//谁也不监测,仅在挂载和卸载的时候执行----</span></span><br><span class="line">React.userEffect(<span class="function">()=&gt;</span>&#123;&#125;)<span class="comment">//检测所有,改变时调用----componentDidUpdate</span></span><br><span class="line">React.userEffect(<span class="function">()=&gt;</span>&#123;<span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;组件卸载前执行&#125;&#125;,[])<span class="comment">//componentWillUnmount</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在React通知到Renderer渲染器后，渲染器又分了三个子阶段来处理：</span><br><span class="line"></span><br><span class="line">beforeMutation阶段（渲染视图前）</span><br><span class="line">mutation阶段（渲染试图）</span><br><span class="line">layout阶段（渲染视图后）</span><br><span class="line">渲染器会在mutation阶段完成后， 在layout阶段同步的调用useLayoutEffect，在子组件嵌套中于是如此。在类组件中，调用的是componentDidMount生命周期函数。也就是说，在useLayoutEffect中，无论是否有重新触发setState，也不会在当前渲染里，重新更新界面。</span><br><span class="line">而在整个渲染器渲染阶段（其实也叫commit）渲染完成后，react才会异步的执行useEffect。当在useEffect中如果有setState，则会重新触发渲染器，更新界面。</span><br><span class="line"></span><br><span class="line">结论：</span><br><span class="line"></span><br><span class="line">useLayoutEffect的是在渲染器执行当前渲染界面任务时，同步执行。</span><br><span class="line">在当前一轮的Reconciler任务调度过程中，在渲染器执行完当前任务后，才会异步调用useEffect。</span><br><span class="line">useLayoutEffect先于useEffect执行，并且子组件优先执行。</span><br><span class="line">componentDidMount()完全等价于useLayoutEffect( fn , [ ] )，但是不等价于useEffect( fn , [ ] )。</span><br></pre></td></tr></table></figure>

<h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React form <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">const</span> myRef=React.useRef()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span>&#123;myRef.style.color=<span class="string">&#x27;red&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;myRef&#125;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><blockquote>
<p>可以不用必须有一个真实 DOM 根标签，编译后会移除</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Fragment</span> <span class="attr">key</span>=<span class="string">&#123;&#125;</span>&gt;</span>//只能有一个属性：key</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;&gt;</span>//简写，但不能写任何属性</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&lt;/Fragment&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><blockquote>
<p>常用与祖组件和后代组件通信<br>一般不用 Context,而是它的封装 react-redux</p>
</blockquote>
<p>类式组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CountContext=React.createContext()<span class="comment">//创建一个上下文,必须所有组件都访问得到</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">state=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">CountContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;this.state.a&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">B</span>/&gt;</span><span class="tag">&lt;/<span class="name">CountContext.Provider</span>&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">C</span>/&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"><span class="keyword">static</span> contextType=CountContext<span class="comment">//声明接收context</span></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="built_in">this</span>.context)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>所有组件</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CountContext=React.createContext()<span class="comment">//创建一个上下文,必须所有组件都访问得到</span></span><br><span class="line"><span class="keyword">const</span> &#123;Consumer,Provider&#125;=CountContext</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">state=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">value</span>=<span class="string">&#123;this.state.a&#125;</span>&gt;</span><span class="tag">&lt;<span class="name">B</span>/&gt;</span><span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">C</span>/&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">static</span> contextType=CountContext<span class="comment">//声明接收context</span></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">Consumer</span>&gt;</span>&#123;value=&gt;&#123;return (<span class="tag">&lt;<span class="name">span</span>&gt;</span>value<span class="tag">&lt;/<span class="name">span</span>&gt;</span>)&#125;<span class="tag">&lt;/<span class="name">Consumer</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="PureComponent"><a href="#PureComponent" class="headerlink" title="PureComponent"></a>PureComponent</h4><blockquote>
<p>只要执行 setState 即使不更新数据，组件也会重新 render9)<br>只要 render()调用，其子组件也会更新<br>原因：shouldComponentUpdate()默认总是为 true</p>
</blockquote>
<h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><ul>
<li>手动比较新旧值,不一样更新，否则禁止更新</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps,nextState</span>)</span>&#123;<span class="comment">//新的</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.props,<span class="built_in">this</span>.state)<span class="comment">//旧的</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;PureComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line"><span class="comment">//依赖的数据不更新时，不重新render</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj=<span class="built_in">this</span>.state</span><br><span class="line">obj.name=<span class="string">&#x27;xx&#x27;</span></span><br><span class="line"><span class="built_in">this</span>.setState(obj)<span class="comment">//浅比较，数据不会更新</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="render-Props"><a href="#render-Props" class="headerlink" title="render Props"></a>render Props</h4><blockquote>
<p>vue 中的插槽</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">state=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">B</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">B</span>&gt;</span></span></span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">B</span> <span class="attr">render</span>=<span class="string">&#123;(val)</span>=&gt;</span>&#123;<span class="tag">&lt;<span class="name">C</span> <span class="attr">b</span>=<span class="string">&#123;val&#125;</span> /&gt;</span>&#125;/&gt;</span></span><br><span class="line">)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">state=&#123;<span class="attr">b</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="built_in">this</span>.props.render(<span class="built_in">this</span>.state.b)</span><br><span class="line">)&#125;<span class="comment">//aaa</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">static</span> contextType=CountContext<span class="comment">//声明接收context</span></span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">Consumer</span>&gt;</span>&#123;value=&gt;&#123;return (<span class="tag">&lt;<span class="name">span</span>&gt;</span>value<span class="tag">&lt;/<span class="name">span</span>&gt;</span>)&#125;<span class="tag">&lt;/<span class="name">Consumer</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ErrorBoundary-错误边界"><a href="#ErrorBoundary-错误边界" class="headerlink" title="ErrorBoundary 错误边界"></a>ErrorBoundary 错误边界</h4><blockquote>
<p>防止子组件出错导致整个页面出错,只能在生产环境使用<br>只能捕获后代组件生命周期产生的错误，不能捕获自己的</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">state=&#123;<span class="attr">error</span>:<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"><span class="comment">//生命周期函数</span></span><br><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">getDerivedStateFromError</span>(<span class="params">err</span>)</span>&#123;<span class="comment">//它的子组件出现报错时会调用</span></span><br><span class="line"><span class="function"><span class="title">componentDidCath</span>(<span class="params">err,info</span>)</span>&#123;&#125;<span class="comment">//发生错误时调用</span></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">error</span>:err&#125;<span class="comment">//返回新的state，在render前触发</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#123;error?error:&#x27;&#x27;&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件间通信-1"><a href="#组件间通信-1" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul>
<li>props</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">children props</span><br><span class="line">render props</span><br></pre></td></tr></table></figure>

<ul>
<li>消息订阅-发布</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubs-sub event</span><br></pre></td></tr></table></figure>

<ul>
<li>集中式管理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redux、dva</span><br></pre></td></tr></table></figure>

<ul>
<li>conText</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生产者-消费者模式</span><br></pre></td></tr></table></figure>

<ul>
<li>搭配<br>父子：props<br>兄弟: 集中式管理、消息订阅发布<br>祖孙: 集中式管理、消息订阅发布、context（开发用的少，封装插件用得多）</li>
</ul>
<h3 id="关闭eslint"><a href="#关闭eslint" class="headerlink" title="关闭eslint"></a>关闭eslint</h3><p>第一步：执行以下命令：</p>
<p><code>npm run eject</code></p>
<p>第二步：在package.json 中修改代码</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;extends&quot;</span>: [</span><br><span class="line"><span class="string">&quot;react-app&quot;</span>,</span><br><span class="line"><span class="string">&quot;react-app/jest&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="attr">&quot;rules&quot;</span>:&#123;</span><br><span class="line"><span class="attr">&quot;no-undef&quot;</span>:<span class="string">&quot;off&quot;</span>,</span><br><span class="line"><span class="attr">&quot;no-restricted-globals&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line"><span class="attr">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;off&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第三步：重启项目</p>
<h3 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h3><h4 id="并发模式下在-dev-时-render-phase-会执行两次"><a href="#并发模式下在-dev-时-render-phase-会执行两次" class="headerlink" title="并发模式下在 dev 时 render-phase 会执行两次"></a>并发模式下在 dev 时 render-phase 会执行两次</h4><p>这个是 react 的一个用来突出显示应用程序中潜在问题的工具（严格模式）</p>
<p>有一项检测意外的副作用，严格模式不能自动检测到你的副作用，但它可以帮助你发现它们，使它们更具确定性。通过故意重复调用以下函数来实现的该操作。</p>
<p>注意：这仅适用于开发模式。生产模式下生命周期不会被调用两次。strictMode，故意在开发环境中执行多次，暴雷出代码隐藏的 bug,把标签去掉即可</p>
<h4 id="antd-form，initialValue-值变化后不更新"><a href="#antd-form，initialValue-值变化后不更新" class="headerlink" title="antd+form，initialValue 值变化后不更新"></a>antd+form，initialValue 值变化后不更新</h4><p>当我们第一次点开 Modal 的时候， 会得到一个 initialValue,但是这个值只在组件挂载的时候执行了一次，后续数据的更新并不会造成重新渲染，所以当我们再次打开 Modal 窗口的时候并不会更新。</p>
<p>解决方案：<br>方法一：使用 form.resetFields()<br>使用 resetFields 方法会直接重置为 initialValue 的值，这样再次打开编辑表单就是我们想要的数据啦。</p>
<p>方法二：使用 form.setFieldsValue<br>对于 initialValue 不更新问题官方文档已经给出了解决方法</p>
<h4 id="react-获取上一轮的-props-和-state（接用-useEffect-useRef-实现）"><a href="#react-获取上一轮的-props-和-state（接用-useEffect-useRef-实现）" class="headerlink" title="react 获取上一轮的 props 和 state（接用 useEffect, useRef 实现）"></a>react 获取上一轮的 props 和 state（接用 useEffect, useRef 实现）</h4><p>如果只是 想实现 这个效果 下面的代码 也行 。就不用借助其它的了。 这个思路就是，在 改变 state 之前 就 备份一下 值 。</p>
<p>effect 的执行时机</p>
<p>与 componentDidMount、componentDidUpdate 不同的是，传给 useEffect 的函数会在浏览器完成布局与绘制之后，在一个延迟事件中被调用。这使得它适用于许多常见的副作用场景，比如设置订阅和事件处理等情况，因为绝大多数操作不应阻塞浏览器对屏幕的更新。</p>
<p>然而，并非所有 effect 都可以被延迟执行。例如，一个对用户可见的 DOM 变更就必须在浏览器执行下一次绘制前被同步执行，这样用户才不会感觉到视觉上的不一致。（概念上类似于被动监听事件和主动监听事件的区别。）React 为此提供了一个额外的 useLayoutEffect Hook 来处理这类 effect。它和 useEffect 的结构相同，区别只是调用时机不同。</p>
<p>此外，从 React 18 开始，当它是离散的用户输入（如点击）的结果时，或者当它是由 flushSync 包装的更新结果时，传递给 useEffect 的函数将在屏幕布局和绘制之前同步执行。这种行为便于事件系统或 flushSync 的调用者观察该效果的结果。</p>
<p>注意</p>
<p>这只影响传递给 useEffect 的函数被调用时 — 在这些 effect 中执行的更新仍会被推迟。这与 useLayoutEffect 不同，后者会立即启动该函数并处理其中的更新。</p>
<p>即使在 useEffect 被推迟到浏览器绘制之后的情况下，它也能保证在任何新的渲染前启动。React 在开始新的更新前，总会先刷新之前的渲染的 effect。<br>useRef</p>
<p>useRef 返回一个可变的 ref 对象，其 .current 属性被初始化为传入的参数（initialValue）。返回的 ref 对象在组件的整个生命周期内持续存在。<br>本质上，useRef 就像是可以在其 .current 属性中保存一个可变值的“盒子”。</p>
<p>你应该熟悉 ref 这一种访问 DOM 的主要方式。如果你将 ref 对象以 <div ref={myRef} /> 形式传入组件，则无论该节点如何改变，React 都会将 ref 对象的 .current 属性设置为相应的 DOM 节点。</p>
<p>然而，useRef() 比 ref 属性更有用。它可以很方便地保存任何可变值，其类似于在 class 中使用实例字段的方式。</p>
<p>这是因为它创建的是一个普通 Javascript 对象。而 useRef() 和自建一个 {current: …} 对象的唯一区别是，useRef 会在每次渲染时返回同一个 ref 对象。</p>
<p>请记住，当 ref 对象内容发生变化时，useRef 并不会通知你。变更 .current 属性不会引发组件重新渲染。如果想要在 React 绑定或解绑 DOM 节点的 ref 时运行某些代码，则需要使用回调 ref 来实现。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> prevCountRef = useRef();</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    prevCountRef.current = count;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> prevCount = prevCountRef.current;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Now: &#123;count&#125;, before: &#123;prevCount&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/11/12/20-23-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/12/20-23-33/" class="post-title-link" itemprop="url">selenium</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-12 20:23:33" itemprop="dateCreated datePublished" datetime="2022-11-12T20:23:33+08:00">2022-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-14 11:09:18" itemprop="dateModified" datetime="2022-11-14T11:09:18+08:00">2022-11-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="selenium"><a href="#selenium" class="headerlink" title="selenium"></a>selenium</h1><h2 id="在使用selenium对当前窗口操作，报错no-such-window-target-window-already-closed"><a href="#在使用selenium对当前窗口操作，报错no-such-window-target-window-already-closed" class="headerlink" title="在使用selenium对当前窗口操作，报错no such window: target window already closed"></a>在使用selenium对当前窗口操作，报错no such window: target window already closed</h2><ul>
<li><p><code>:model=&quot;ruleForm&quot;</code> 绑定的<code>ruleForm</code>值是否挂载成功并且操作的是否是这个表单。</p>
</li>
<li><p><code>:rules=&quot;rules&quot;</code> 校验的规则格式绑定的<code>rules</code>是否定义并且格式正确为对象数组。</p>
</li>
<li><p><code>el-form-item中的</code>prop=”name”<code>是否和rules中的</code>name: [ { required: true, message: ‘请输入活动名称’, trigger: ‘blur’ }, ], <code>的名称一致，两个</code>name`相同的，element的校验就是根据这个prop找对应的输入框的。</p>
</li>
<li><p><code>&lt;el-input v-model=&quot;ruleForm.name&quot;&gt;&lt;/el-input&gt;</code> 的<code>v-model=&quot;ruleForm.name&quot;</code>确保对象<code>ruleForm</code>中有<code>name</code>这个属性！</p>
</li>
</ul>
<h2 id="selenium-中执行使用js脚本"><a href="#selenium-中执行使用js脚本" class="headerlink" title="selenium 中执行使用js脚本"></a>selenium 中执行使用js脚本</h2><ul>
<li>使用JS参数传参方式<br>在使用Javascript语句时，还可以动态传入参数或元素对象，Js 语句中使用占位符“argument[n]”来表示取第几个参数，如</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">js = &quot;arguments[0].setAttribute(&#x27;style&#x27;, arguments[1]);</span><br><span class="line">element = driver.find_element_by_id(&quot;kw&quot;)</span><br><span class="line">style = &quot;background: red; border: 2px solid yellow;&quot;</span><br><span class="line">driver.execute_script(js, element, style)</span><br></pre></td></tr></table></figure>
<p>这里埋设了两个参数，一个是元素对象，另一个是样式字符串。</p>
<ul>
<li>获取js返回值<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let a=driver.execute_script(&#x27;return arguments[0].value&#x27;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="selenium-运行报错：element-not-interactable"><a href="#selenium-运行报错：element-not-interactable" class="headerlink" title="selenium 运行报错：element not interactable"></a>selenium 运行报错：element not interactable</h2><ul>
<li>解决一：<br>写自动化时，没有考虑到等待时间，有时候代码运行过快，web界面反应不过来，在这个报错的元素前添加一个等待时间，根据个人时间定等待时间<br>这个元素被隐藏了</li>
<li>解决二:</li>
</ul>
<p>1.打个比方，有一个退出按钮，你找到元素了，也定位了，但无法click（），这个可能是被隐藏了，要将鼠标显示放在这个界面的位置，元素才能被找到click（）<br>2.元素被隐藏了，web界面css元素被隐藏</p>
<h2 id="Selenium如何使用句柄方式切换窗口"><a href="#Selenium如何使用句柄方式切换窗口" class="headerlink" title="Selenium如何使用句柄方式切换窗口"></a>Selenium如何使用句柄方式切换窗口</h2><p>获取当前页面句柄：driver.current_window_handle</p>
<p>　　· 获取所有页面句柄：driver.window_handles</p>
<p>　　通过句柄，我们可以进行窗口的切换。</p>
<p>　　· 切换窗口：<br>  driver.switch_to.window(handle)</p>
<h2 id="element获取table表格行数据，可通过template设置slot-scope-“scope”属性，在传参时使用scope-row-xxxx拿到当前行的数据"><a href="#element获取table表格行数据，可通过template设置slot-scope-“scope”属性，在传参时使用scope-row-xxxx拿到当前行的数据" class="headerlink" title="element获取table表格行数据，可通过template设置slot-scope=“scope”属性，在传参时使用scope.row.xxxx拿到当前行的数据"></a>element获取table表格行数据，可通过template设置slot-scope=“scope”属性，在传参时使用scope.row.xxxx拿到当前行的数据</h2><h2 id="当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加-submit-native-prevent来解决"><a href="#当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加-submit-native-prevent来解决" class="headerlink" title="当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加@submit.native.prevent来解决"></a>当只有⼀个el-input的时候，可以⽤elementUI的⾃带的回车键触发提交事件但是有时候会同时触发刷新页⾯，这样可以在el-form上添加@submit.native.prevent来解决</h2><h2 id="element-el-input的autofocus失效问题解决"><a href="#element-el-input的autofocus失效问题解决" class="headerlink" title="element el-input的autofocus失效问题解决"></a>element el-input的autofocus失效问题解决</h2><blockquote>
<p>autofocus是input的原生属性,饿了么组件也支持这种方法, 但是input外面还有其他组件, 导致autofocus失效, 只能手动调用focus方法:组件上绑定ref，手动调用focus()</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/08/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/11/20-22-22/" class="post-title-link" itemprop="url">nginx</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-11 20:22:22" itemprop="dateCreated datePublished" datetime="2022-08-11T20:22:22+08:00">2022-08-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-06 11:30:12" itemprop="dateModified" datetime="2023-02-06T11:30:12+08:00">2023-02-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><blockquote>
<p>负载均衡、反向代理、动静结合</p>
</blockquote>
<h2 id="配置文件匹配顺序"><a href="#配置文件匹配顺序" class="headerlink" title="配置文件匹配顺序"></a>配置文件匹配顺序</h2><p>/etc/nginx/conf.d/多个配置文件时，会优先匹配配置了server_name且值不是localhost，接着是localhost，再接着是没有配置的。若端口号和server_name都一样则优先选择该目录下的第一个配置文件。</p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br><span class="line">nginx -V</span><br><span class="line">nginx -t //查看配置是否有问题</span><br><span class="line">nginx -s reload //重新加载配置</span><br><span class="line">nginx -s stop //强行停止</span><br><span class="line">nginx -s quit //安全退出</span><br><span class="line">ps -ef|grep nginx //查看进程</span><br><span class="line">systemctl enable nginx //开机自动启动</span><br><span class="line">//防火墙</span><br><span class="line">systemctl status firewalld.service</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl disable firewalld.service</span><br><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure>

<h2 id="开启GZIP压缩"><a href="#开启GZIP压缩" class="headerlink" title="开启GZIP压缩"></a>开启GZIP压缩</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_type application/javascript;#压缩类型，文本文件压缩效果最好,图片视频资源压缩作用不大，大文件资源会消耗大量cpu资源不推荐</span><br><span class="line">    gzip_min_length 1k;#最小压缩单位，小于1k压缩意义不大</span><br><span class="line">    gzip_comp_level 5;#压缩级别，1-9，数字越大压缩效果越好，但会加大cpu压力，高并发场景不建议调太高,建议5左右</span><br><span class="line">    gzip_very on;#在响应头添加very:accept-encoding,让代理服务器根据请求头识别是否启用了gzip压缩</span><br><span class="line">    gzip_http_version 1.1;#启用gzip压缩的最低http版本，默认1.1</span><br><span class="line">    gzip_buffers 4 4k;#设置压缩所需的缓冲区大小和申请内存的倍率，如4 4k代表以4k为单位，按照原始数据大小以4k为单位的4倍申请内存。默认是申请跟原始数据相同大小的内存空间。</span><br><span class="line">    gzip_static on;#静态压缩，若提前已准备好了压缩文件.gz的压缩包或者提供静态文件服务，可以启用。它可避免动态压缩，提高性能</span><br><span class="line">    gzip_proxied off;#nginx作为反向代理时，开启或关闭后端服务器返回的结果（前提是后端必须返回包含Via的请求头）。off-关闭所有代理结果数据的压缩。expired-若请求头包含‘Expires’信息，则启用。no-cache-若请求头包含‘Cache-Control:no-cache’信息，则启用。no-store-若请求头包含‘Cache-Control:no-store’信息，则启用。private-&gt;若请求头包含‘Cache-Control:private’信息，则启用。no_last_modified-&gt;若请求头不包含‘Last-Modified’信息，则启用。no_etag-&gt;若请求头不包含‘Etag’信息，则启用。auth-&gt;若请求头包含“Authorization&quot;信息，则启用。any-&gt;无条件启用压缩</span><br><span class="line">    gzip_disable MSIE[1-6]\.;#设置禁用浏览器进行Gzip压缩，ie6对gzip压缩支持不好，会造成假死。</span><br><span class="line">    listen 8080;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root /opt/test/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="开启Brotli"><a href="#开启Brotli" class="headerlink" title="开启Brotli"></a>开启Brotli</h2><blockquote>
<p>比gzip性能高，ie浏览器不支持，仅支持https，无法使用时，会降级为gzip</p>
</blockquote>
<ul>
<li>下载源码</li>
<li>下载算法</li>
<li>重新编译，<code>./configure --prefix=安装目录 --with-http_ssl_module --add-module=brotli的安装目录</code></li>
<li>安装好后，将 objs文件夹中nginx执行文件替换掉sbin中的执行文件</li>
<li>编辑文件<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    ...</span><br><span class="line">brotli on；</span><br><span class="line">brotli_type application/javascript;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="请求限流"><a href="#请求限流" class="headerlink" title="请求限流"></a>请求限流</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：limit_req zone=name [burst=number][nodelay|delay=number];</span><br><span class="line">上下文：http,server,location</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">示例：</span><br></pre></td></tr></table></figure>
<p>http:{<br>limit_req_zone $binary_remote_addr zone=ip_limit:10m rate=1r/s;<br>…<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">`$binary_remote_addr`-&gt;通过remote_addr这个标识来做限制，限制的是同一客户端的ip地址，在这里，客户端ip地址作为关键。注意，不是`$ remote_addr`,`$ remote_addr`变量的大小可以从7到15个字节不等，存储状态在32位平台上占用32或64字节，在64位平台上总是64字节。对于ipv4地址，`$binary_remote_addr`变量始终是4个字节，对于ipv6地址则为16个字节，</span><br><span class="line">`zone=ip_limit:10m`-&gt;生成一个10MB大小，名字为ip_limitd的内存区域，主要用来存储访问频次信息。</span><br><span class="line">`rate=1r/s`-&gt;标识允许相同标识客户端的一个访问频次，1r即1次</span><br></pre></td></tr></table></figure>
<p>server{<br>    …<br>location / {<br>limit_req zone=ip_limit burst=5 nodelay;<br>…<br>}}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`zone`-&gt;表示使用哪个区域来做限制</span><br><span class="line">`burst`-&gt;设置了一个大小为5的缓存区，当有大量请求即burst时，超过访问频次限制的请求可以先放到此缓存区。</span><br><span class="line">`nodelay`-&gt;超过访问频次且缓存区也满了的时候，直接返回503，若无设置，则请求会等待排队。</span><br><span class="line"></span><br><span class="line">## 连接限流</span><br></pre></td></tr></table></figure>
<p>语法：limit_conn zone number;<br>上下文：http,server,location</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">示例：</span><br></pre></td></tr></table></figure>
<p>http:{<br>limit_conn_zone $binary_remote_addr zone=addr:10m;<br>…<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">`$binary_remote_addr`-&gt;通过remote_addr这个标识来做限制，限制的是同一客户端的ip地址.</span><br><span class="line">`zone=addr:10m`-&gt;生成一个10MB大小，名字为addr的内存区域，主要用来存储访问频次信息。</span><br><span class="line">`server&#123;</span><br><span class="line">    ...</span><br><span class="line">location / &#123;``</span><br><span class="line">limit_conn addr 1;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>zone</code>-&gt;表示使用哪个区域来做限制<br><code>1</code>-&gt;允许相同标识客户端的一个访问频次，1代表只允许每个ip地址1个连接。</p>
<h2 id="防盗链"><a href="#防盗链" class="headerlink" title="防盗链"></a>防盗链</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen 8080;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root /opt/test/;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~* .*\.(gif|jpg|png)$&#123;</span><br><span class="line">        root /opt/test/img/;</span><br><span class="line">        valid_referers none blocked xxx.com;</span><br><span class="line">        if($invalid_referer)&#123;</span><br><span class="line">            #return 403;返回错误页面</span><br><span class="line">            rewrite ^/ http://xxxx/error;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>破解方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;header&gt;</span><br><span class="line">&lt;meta name=&quot;referrer&quot; content=&#x27;no-referrer&#x27; /&gt;</span><br><span class="line">&lt;/header&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="如何利用Nginx代理获取真实IP"><a href="#如何利用Nginx代理获取真实IP" class="headerlink" title="如何利用Nginx代理获取真实IP"></a>如何利用Nginx代理获取真实IP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">   listen 80;</span><br><span class="line">   server_name xxx.xxxx.com;</span><br><span class="line">  </span><br><span class="line">   location / &#123;</span><br><span class="line">       #保留代理之前的host 包含客户端真实的域名和端口号</span><br><span class="line">       proxy_set_header    Host  $host; </span><br><span class="line">       #保留代理之前的真实客户端ip</span><br><span class="line">       proxy_set_header    X-Real-IP  $remote_addr;  </span><br><span class="line">       #这个Header和X-Real-IP类似，但它在多级代理时会包含真实客户端及中间每个代理服务器的IP</span><br><span class="line">       proxy_set_header    X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">       #表示客户端真实的协议（http还是https）</span><br><span class="line">       proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">       #指定修改被代理服务器返回的响应头中的location头域跟refresh头域数值</span><br><span class="line">       #如果使用&quot;default&quot;参数，将根据location和proxy_pass参数的设置来决定。</span><br><span class="line">       #proxy_redirect [ default|off|redirect replacement ];</span><br><span class="line">       proxy_redirect off;</span><br><span class="line">       proxy_pass http://IP:PORT;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>经过反向代理后，由于在客户端和web服务器之间增加了中间层，因此web服务器无法直接拿到客户端的ip，通过<code>$remote_addr</code>变量拿到的将是反向代理服务器的ip地址。<br>这句话的意思是说，当你使用了nginx反向服务器后，在web端使用request.getRemoteAddr()（本质上就是获取<code>$remote_addr</code>），取得的是nginx的地址，即<code>$remote_addr</code>变量中封装的是nginx的地址，当然是没法获得用户的真实ip的。但是，nginx是可以获得用户的真实ip的，也就是说nginx使用<code>$remote_addr</code>变量时获得的是用户的真实ip，如果我们想要在web端获得用户的真实ip，就必须在nginx里作一个赋值操作，即我在上面的配置：<br><code>proxy_set_header X-Real-IP $remote_addr;</code><br>$remote_addr 只能获取到与服务器本身直连的上层请求ip，所以设置<code>$remote_addr</code> 一般都是设置第一个代理上面;但是问题是，有时候是通过cdn访问过来的，那么后面web服务器获取到的，永远都是cdn 的ip 而非真是用户ip,那么这个时候就要用到<code>X-Forwarded-For</code> 了，这个变量的意思，其实就像是链路反追踪，从客户的真实ip为起点，穿过多层级的proxy ，最终到达web 服务器，都会记录下来，所以在获取用户真实ip的时候，一般就可以设置成 下面的配置<br><code>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </code><br><code>X-Forwarded-For</code>变量，这是一个squid开发的，用于识别通过HTTP代理或负载平衡器原始IP一个连接到Web服务器的客户机地址的非rfc标准，如果有做<code>X-Forwarded-For</code>设置的话,每次经过proxy转发都会有记录,格式就是client1,proxy1,proxy2以逗号隔开各个地址，由于它是非rfc标准，所以默认是没有的，需要强制添加。在默认情况下经过proxy转发的请求，在后端看来远程地址都是proxy端的ip 。也就是说在默认情况下我们使用request.getAttribute(“X-Forwarded-For”)获取不到用户的ip，如果我们想要通过这个变量获得用户的ip，我们需要自己在nginx添加配置：<code>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</code><br>意思是增加一个<code>$proxy_add_x_forwarded_for</code>到<code>X-Forwarded-For</code>里去，注意是增加，而不是覆盖，当然由于默认的<code>X-Forwarded-For</code>值是空的，所以我们总感觉<code>X-Forwarded-For</code>的值就等于<code>$proxy_add_x_forwarded_for</code>的值，实际上当你搭建两台nginx在不同的ip上，并且都使用了这段配置，那你会发现在web服务器端通过request.getAttribute(“X-Forwarded-For”)获得的将会是客户端ip和第一台nginx的ip。</p>
<p>那么<code>$proxy_add_x_forwarded_for</code>又是什么？<br><code>$proxy_add_x_forwarded_for</code>变量包含客户端请求头中的<code>X-Forwarded-For</code>与<code>$remote_addr</code>两部分，他们之间用逗号分开。</p>
<p>举个例子，有一个web应用，在它之前通过了两个nginx转发，<a target="_blank" rel="noopener" href="http://www.linuxidc.com即用户访问该web通过两台nginx./">www.linuxidc.com即用户访问该web通过两台nginx。</a></p>
<p>在第一台nginx中,使用：<br><code>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</code><br>现在的<code>$proxy_add_x_forwarded_for</code>变量的<code>X-Forwarded-For</code>部分是空的，所以只有<code>$remote_addr</code>，而<code>$remote_addr</code>的值是用户的ip，于是赋值以后，<code>X-Forwarded-For</code>变量的值就是用户的真实的ip地址了。</p>
<p>到了第二台nginx，使用：</p>
<p><code>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</code></p>
<p>现在的<code>$proxy_add_x_forwarded_for</code>变量，<code>X-Forwarded-For</code>部分包含的是用户的真实ip，<code>$remote_addr</code>部分的值是上一台nginx的ip地址，于是通过这个赋值以后现在的<code>X-Forwarded-For</code>的值就变成了“用户的真实ip，第一台nginx的ip”，这样就清楚了吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/06/11/20-22-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/11/20-22-22/" class="post-title-link" itemprop="url">npm仓库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-11 20:22:22" itemprop="dateCreated datePublished" datetime="2022-06-11T20:22:22+08:00">2022-06-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-14 11:09:18" itemprop="dateModified" datetime="2022-11-14T11:09:18+08:00">2022-11-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>一，包的安装/更新/卸载<br>npm i 或者 npm install<br>装包,默认安装最新版本，直接npm i 会安装package.json中dependencies的所有包</p>
<p>npm i <a href="mailto:&#120;&#x78;&#x40;&#49;&#46;&#x30;">&#120;&#x78;&#x40;&#49;&#46;&#x30;</a><br>安装指定版本</p>
<p>npm i -S 或者 npm i –save<br>装包到生产环境（也就是上线后需要的依赖），在package.json的dependencies中生成版本信息</p>
<p>npm i -D 或者 npm i –save-dev<br>装包到开发环境（也就是开发时需要的依赖），在package.json的devDependencies中生成版本信息</p>
<p>npm i <a href="mailto:&#120;&#x78;&#x40;&#49;&#46;&#x30;">&#120;&#x78;&#x40;&#49;&#46;&#x30;</a> –save-exact<br>精确安装指定版本的包到生产环境。精确的意思就是，什么版本就是什么版本，版本号前面的^ 会消失掉。有^ 代表是补丁版本</p>
<p>npm uninstall xx<br>卸载包</p>
<p>npm update <a href="mailto:&#120;&#120;&#64;&#x31;&#46;&#48;">&#120;&#120;&#64;&#x31;&#46;&#48;</a><br>更新包，默认更新到最新</p>
<p>npm outdated<br>检查包是否过时，默认列出所有过时的包</p>
<p>npm i xx1@npm:xx@1<br>npm i xx2@npm:xx@2<br>安装同一个包的不同版本，如要引入1版本，则import ‘xx1’。npm 6.9及以后的版本可用</p>
<p>二，信息查看<br>npm ls<br>查看安装过的包，加-g就是查看全局安装过的包， –depth 0就是查看第一层，不再深入递归查询出子文件夹</p>
<p>npm ls 包名 -g<br>查看某个包，有则显示版本，没有则是empty</p>
<p>npm root xx<br>查看包的安装路径</p>
<p>npm view xx versions<br>查看某个包在线上的所有版本</p>
<p>三，配置向<br>npm config set proxy=”<a href="http://xx.com:8080&quot;">http://xx.com:8080&quot;</a><br>因为公司的防火墙原因，无法完成任何模块的安装，这个时候设置代理可以解决</p>
<p>npm config set registry=”<a target="_blank" rel="noopener" href="https://registry.npm.taobao.org&quot;/">https://registry.npm.taobao.org&quot;</a><br>设置安装源，如上就是设置源为国内的淘宝镜像</p>
<p>npm config list -l<br>查看所有配置</p>
<h3 id="发布自己的包"><a href="#发布自己的包" class="headerlink" title="发布自己的包"></a>发布自己的包</h3><p>第一步：进入要发布的项目根目录，初始化为npm包：</p>
<p>npm init</p>
<p>依次按提示填入包名、版本、描述、github地址、关键字、license等<br>这步完成之后会生成一个package.json文件，上面输入的这些信息可以在该文件中修改<br>name是名字，不能和别人的一样，否则发布失败<br>version是版本号，每次发布自己手动修改，版本号需递增，否则发布失败<br>main设置入口文件，入口文件需和package同级，如不同级，则应该写/xx/yy这样的相对路径，</p>
<p>注意：如果你的包引用了第三方包，则需要在package.json文件种增加dependencies节点，写入依赖的包及版本<br>“dependencies”: {<br>    “colors”: “^1.3.2”,<br>    “on-finished”: “^2.3.0”<br>  }</p>
<p>第二步、注册npm用户，有两种方法  注册npm用户，有两种方法</p>
<p>方法一、npm官网注册：npm</p>
<p>方法二、使用npm 命令注册：npm adduser</p>
<p>第三步、账号登录</p>
<p>npm login</p>
<p>依次输入第二步中第一种方法注册的用户名、密码和邮箱<br>第四步、发布包，上传到npm包服务器</p>
<p>npm publish</p>
<p>注意：如果报错：’You do not have permission to publish “mypackage1”. Are you logged in as the correct user?’</p>
<p>表示包’mypackage1‘已经在包管理器已经存在被别人用了，需要更该包名称<br> 更新一个已经发布的包<br>第一步、修改包的版本</p>
<p>：这次我在包根目录下新加了一个index.js文件</p>
<p>npm version patch  该命令在原来的版本上自动加1,实际上是将package.json文件中的version值修改了。<br>第二步、重新发布包</p>
<p>npm publish</p>
<p>三、删除包<br>1、删除指定的版本</p>
<p>npm unpublish 包名@版本号</p>
<p>2、删除整个包</p>
<p>npm unpublish 包名 –force</p>
<h3 id="五，其它"><a href="#五，其它" class="headerlink" title="五，其它"></a>五，其它</h3><p>npm cache clean<br>清除npm本地缓存<br>npm init<br>初始化package.json<br>npm start<br>“scripts”: {<br>    “start”: “xxx”<br>}<br>启动指令,npm start指令会匹配到package的scripts里的配置，然后启动对应脚本。start此类的支持自定义，常见的自定义为dev</p>
<h3 id="yarn："><a href="#yarn：" class="headerlink" title="yarn："></a>yarn：</h3><blockquote>
<p>Yarn 是由 Facebook、Google、Exponent 和 Tilde 联合推出了一个新的 JS 包管理工具 。<br>《淘宝 NPM 镜像站喊你切换新域名啦》 <a target="_blank" rel="noopener" href="https://npm.taobao.org/">https://npm.taobao.org</a> 和 <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a> 将在 2022.06.30 号正式下线和停止 DNS 解析。<br>域名切换规则：<br><a target="_blank" rel="noopener" href="https://npm.taobao.org/">https://npm.taobao.org</a> =&gt; <a target="_blank" rel="noopener" href="https://npmmirror.com/">https://npmmirror.com</a><br><a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a> =&gt; <a target="_blank" rel="noopener" href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p>
</blockquote>
<p>安装：<br>npm install -g yarn</p>
<p>执行 yarn xxx 命令报以下错误时：</p>
<p>操作以下步骤进行策略更改：</p>
<p>使用管理员身份运行 cmd 或 Power shell<br>输入：set-executionpolicy remotesigned<br>输入”Y“，回车保存<br>yarn 配置源：<br>// 查询源<br>yarn config get registry</p>
<p>// 更换国内源<br>yarn config set registry <a target="_blank" rel="noopener" href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p>
<p>// 恢复官方源<br>yarn config set registry <a target="_blank" rel="noopener" href="https://registry.yarnpkg.com/">https://registry.yarnpkg.com</a></p>
<p>// 删除注册表<br>yarn config delete registry</p>
<p>npm 配置源：<br>注意 npm 更换国内镜像源之后，将无法再使用 npm search 命令，需要恢复为官方源才可以使用，如果恢复官方源后还不可使用，运行删除注册表命令后重试即可。</p>
<p>// 查询源<br>npm config get registry</p>
<p>// 更换国内源<br>npm config set registry <a target="_blank" rel="noopener" href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p>
<p>// 恢复官方源<br>npm config set registry <a target="_blank" rel="noopener" href="https://registry.npmjs.org/">https://registry.npmjs.org</a></p>
<p>// 删除注册表<br>npm config delete registry</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/06/01/20-00-00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/01/20-00-00/" class="post-title-link" itemprop="url">TypeScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-01 20:00:00" itemprop="dateCreated datePublished" datetime="2022-06-01T20:00:00+08:00">2022-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-26 16:02:54" itemprop="dateModified" datetime="2023-02-26T16:02:54+08:00">2023-02-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><blockquote>
<p>TypeScript 是一种由微软开发的开源、跨平台的编程语言。它是 JavaScript 的超集，主要提供了类型系统和对 ES6+ 的支持,最终会被编译为 JavaScript 代码。</p>
</blockquote>
<h2 id="安装-TypeScript-npm-包"><a href="#安装-TypeScript-npm-包" class="headerlink" title="安装 TypeScript npm 包"></a>安装 TypeScript npm 包</h2><ul>
<li>安装<br><code> npm install -g typescript</code><br>安装完成后我们就可以使用 TypeScript 编译器，名称叫 tsc，可将编译结果生成 js 文件。</li>
<li>使用<br><code>tsc hello.ts</code></li>
</ul>
<h2 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a>基础类型</h2><ul>
<li>布尔值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let isDone: boolean = false;</span><br></pre></td></tr></table></figure>

<ul>
<li>数字<blockquote>
<p>和 JavaScript 一样，TypeScript 里的所有数字都是浮点数。 这些浮点数的类型是 number。 除了支持十进制和十六进制字面量，TypeScript 还支持 ECMAScript 2015 中引入的二进制和八进制字面量。</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let decLiteral: number = 6;</span><br><span class="line">let hexLiteral: number = 0xf00d;</span><br><span class="line">let binaryLiteral: number = 0b1010;</span><br><span class="line">let octalLiteral: number = 0o744;</span><br></pre></td></tr></table></figure>

<ul>
<li>字符串</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let name: string = &quot;bob&quot;;</span><br><span class="line">let name: string = &#x27;bob&#x27;;</span><br><span class="line">let name: string = `bob`;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let list: number[] = [1, 2, 3];</span><br><span class="line">let list: Array&lt;number&gt; = [1, 2, 3];//使用数组泛型Array&lt;元素类型&gt;</span><br></pre></td></tr></table></figure>

<p>-元组 Tuple</p>
<blockquote>
<p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为 string 和 number 类型的元组。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let x: [string, number];</span><br><span class="line">x = [&#x27;hello&#x27;, 10]; // OK</span><br><span class="line">x = [10, &#x27;hello&#x27;]; // Error</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当访问一个越界的元素，会使用联合类型替代：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x[3] = &#x27;world&#x27;; // OK, 字符串可以赋值给(string | number)类型</span><br><span class="line">console.log(x[5].toString()); // OK, &#x27;string&#x27; 和 &#x27;number&#x27; 都有 toString</span><br><span class="line">x[6] = true; // Error, 布尔不是(string | number)类型</span><br></pre></td></tr></table></figure>

<ul>
<li>枚举<blockquote>
<p>enum 类型是对 JavaScript 标准数据类型的一个补充。 像 C#等其它语言一样，使用枚举类型可以为一组数值赋予友好的名字。</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">enum Color &#123;Red, Green, Blue&#125;</span><br><span class="line">let c: Color = Color.Green;</span><br><span class="line">//默认情况下，从0开始为元素编号。 你也可以手动的指定成员的数值。 例如，我们将上面的例子改成从 1开始编号：</span><br><span class="line">enum Color &#123;Red = 1, Green, Blue&#125;</span><br><span class="line">let c: Color = Color.Green;</span><br><span class="line">//或者，全部都采用手动赋值：</span><br><span class="line">enum Color &#123;Red = 1, Green = 2, Blue = 4&#125;</span><br><span class="line">let c: Color = Color.Green;</span><br><span class="line">//枚举类型提供的一个便利是你可以由枚举的值得到它的名字。 例如，我们知道数值为2，但是不确定它映射到Color里的哪个名字，我们可以查找相应的名字：</span><br><span class="line">enum Color &#123;Red = 1, Green, Blue&#125;</span><br><span class="line">let colorName: string = Color[2];</span><br><span class="line">console.log(colorName);  // 显示&#x27;Green&#x27;因为上面代码里它的值是2</span><br></pre></td></tr></table></figure>

<ul>
<li>Any<br>不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。 那么我们可以使用 any 类型来标记这些变量：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let notSure: any = 4;</span><br><span class="line">notSure = &quot;maybe a string instead&quot;;</span><br><span class="line">notSure = false;</span><br><span class="line"></span><br><span class="line">let list: any[] = [1, true, &quot;free&quot;];</span><br><span class="line">list[1] = 100;</span><br></pre></td></tr></table></figure>

<ul>
<li>Void<br>某种程度上来说，void 类型像是与 any 类型相反，它表示没有任何类型。 当一个函数没有返回值时，你通常会见到其返回值类型是 void：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function warnUser(): void &#123;</span><br><span class="line">    console.log(&quot;This is my warning message&quot;);</span><br><span class="line">&#125;</span><br><span class="line">//声明一个void类型的变量没有什么大用，因为你只能为它赋予undefined和null：</span><br><span class="line">let unusable: void = undefined;</span><br></pre></td></tr></table></figure>

<ul>
<li>Null 和 Undefined<blockquote>
<p>TypeScript 里，undefined 和 null 两者各自有自己的类型分别叫做 undefined 和 null。 和 void 相似，它们的本身的类型用处不是很大：</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let u: undefined = undefined;</span><br><span class="line">let n: null = null;</span><br></pre></td></tr></table></figure>

<p>默认情况下 null 和 undefined 是所有类型的子类型。 就是说你可以把 null 和 undefined 赋值给 number 类型的变量。然而，当你指定了–strictNullChecks 标记，null 和 undefined 只能赋值给 void 和它们各自。 这能避免 很多常见的问题。 也许在某处你想传入一个 string 或 null 或 undefined，你可以使用联合类型 string | null | undefined。</p>
<ul>
<li>Never<br>never 类型表示的是那些永不存在的值的类型。 例如， never 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型； 变量也可能是 never 类型，当它们被永不为真的类型保护所约束时。never 类型是任何类型的子类型，也可以赋值给任何类型；然而，没有类型是 never 的子类型或可以赋值给 never 类型（除了 never 本身之外）。 即使 any 也不可以赋值给 never。</li>
</ul>
<p>下面是一些返回 never 类型的函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 返回never的函数必须存在无法达到的终点</span><br><span class="line">function error(message: string): never &#123;</span><br><span class="line">    throw new Error(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 推断的返回值类型为never</span><br><span class="line">function fail() &#123;</span><br><span class="line">    return error(&quot;Something failed&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回never的函数必须存在无法达到的终点</span><br><span class="line">function infiniteLoop(): never &#123;</span><br><span class="line">    while (true) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Object<br>object 表示非原始类型，也就是除 number，string，boolean，symbol，null 或 undefined 之外的类型。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">declare function create(o: object | null): void;</span><br><span class="line">create(&#123; prop: 0 &#125;); // OK</span><br><span class="line">create(null); // OK</span><br><span class="line">create(42); // Error</span><br><span class="line">create(&quot;string&quot;); // Error</span><br><span class="line">create(false); // Error</span><br><span class="line">create(undefined); // Error</span><br></pre></td></tr></table></figure>

<ul>
<li>类型断言<br>类型断言好比其它语言里的类型转换，但是不进行特殊的数据检查和解构。 它没有运行时的影响，只是在编译阶段起作用。 TypeScript 会假设你，程序员，已经进行了必须的检查。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//类型断言有两种形式。 其一是“尖括号”语法：</span><br><span class="line">let someValue: any = &quot;this is a string&quot;;</span><br><span class="line">let strLength: number = (&lt;string&gt;someValue).length;</span><br><span class="line">//另一个为as语法：</span><br><span class="line">let someValue: any = &quot;this is a string&quot;;</span><br><span class="line">let strLength: number = (someValue as string).length;</span><br><span class="line">//两种形式是等价的。 至于使用哪个大多数情况下是凭个人喜好；然而，当你在TypeScript里使用JSX时，只有 as语法断言是被允许的。</span><br></pre></td></tr></table></figure>

<ul>
<li>解构<br>解构数组</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let input = [1, 2];</span><br><span class="line">let [first, second] = input;</span><br><span class="line">[first, second] = [second, first];</span><br><span class="line">function f([first, second]: [number, number]) &#123;</span><br><span class="line">    console.log(first);</span><br><span class="line">    console.log(second);</span><br><span class="line">&#125;</span><br><span class="line">//你可以在数组里使用...语法创建剩余变量</span><br><span class="line">let [first, ...rest] = [1, 2, 3, 4];</span><br><span class="line">console.log(first); // outputs 1</span><br><span class="line">console.log(rest); // outputs [ 2, 3, 4 ]</span><br><span class="line"></span><br><span class="line">let [first] = [1, 2, 3, 4];</span><br><span class="line">console.log(first); // outputs 1</span><br><span class="line">let [, second, , fourth] = [1, 2, 3, 4];</span><br></pre></td></tr></table></figure>

<p>对象解构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let o = &#123;</span><br><span class="line">    a: &quot;foo&quot;,</span><br><span class="line">    b: 12,</span><br><span class="line">    c: &quot;bar&quot;</span><br><span class="line">&#125;;</span><br><span class="line">let &#123; a, b &#125; = o;</span><br><span class="line">//可以用没有声明的赋值,注意，我们需要用括号将它括起来，因为Javascript通常会将以 &#123; 起始的语句解析为一个块。</span><br><span class="line">(&#123; a, b &#125; = &#123; a: &quot;baz&quot;, b: 101 &#125;);</span><br><span class="line"></span><br><span class="line">//可以在对象里使用...语法创建剩余变量：</span><br><span class="line">let &#123; a, ...passthrough &#125; = o;</span><br><span class="line">let total = passthrough.b + passthrough.c.length;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>属性重命名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let &#123; a: newName1, b: newName2 &#125; = o;</span><br><span class="line">//好像你写成了以下样子：</span><br><span class="line">let newName1 = o.a;</span><br><span class="line">let newName2 = o.b;</span><br><span class="line">//这里的冒号不是指示类型的。 如果你想指定它的类型， 仍然需要在其后写上完整的模式。</span><br><span class="line">let &#123;a, b&#125;: &#123;a: string, b: number&#125; = o;</span><br></pre></td></tr></table></figure>

<p>默认值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">默认值可以让你在属性为 undefined 时使用缺省值：</span><br><span class="line">function keepWholeObject(wholeObject: &#123; a: string, b?: number &#125;) &#123;</span><br><span class="line">    let &#123; a, b = 1001 &#125; = wholeObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数声明<br>解构也能用于函数声明。 看以下简单的情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">type C = &#123; a: string, b?: number &#125;</span><br><span class="line">function f(&#123; a, b &#125;: C): void &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line">但是，通常情况下更多的是指定默认值，解构默认值有些棘手。 首先，你需要在默认值之前设置其格式。</span><br><span class="line"></span><br><span class="line">function f(&#123; a=&quot;&quot;, b=0 &#125; = &#123;&#125;): void &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line">f();</span><br><span class="line">上面的代码是一个类型推断的例子，将在本手册后文介绍。</span><br><span class="line"></span><br><span class="line">其次，你需要知道在解构属性上给予一个默认或可选的属性用来替换主初始化列表。 要知道 C 的定义有一个 b 可选属性：</span><br><span class="line"></span><br><span class="line">function f(&#123; a, b = 0 &#125; = &#123; a: &quot;&quot; &#125;): void &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line">f(&#123; a: &quot;yes&quot; &#125;); // ok, default b = 0</span><br><span class="line">f(); // ok, default to &#123;a: &quot;&quot;&#125;, which then defaults b = 0</span><br><span class="line">f(&#123;&#125;); // error, &#x27;a&#x27; is required if you supply an argument</span><br><span class="line">要小心使用解构。 从前面的例子可以看出，就算是最简单的解构表达式也是难以理解的。</span><br></pre></td></tr></table></figure>

<ul>
<li>展开<blockquote>
<p>展开操作符正与解构相反。 它允许你将一个数组展开为另一个数组，或将一个对象展开为另一个对象。 例如：</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let first = [1, 2];</span><br><span class="line">let second = [3, 4];</span><br><span class="line">let bothPlus = [0, ...first, ...second, 5];//[0, 1, 2, 3, 4, 5]</span><br><span class="line">//展开操作创建了 first和second的一份浅拷贝。 它们不会被展开操作所改变。</span><br><span class="line"></span><br><span class="line">//你还可以展开对象：</span><br><span class="line">let defaults = &#123; food: &quot;spicy&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125;;</span><br><span class="line">let search = &#123; ...defaults, food: &quot;rich&quot; &#125;;</span><br><span class="line">search的值为&#123; food: &quot;rich&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125;。</span><br><span class="line">// 对象的展开比数组的展开要复杂的多。 像数组展开一样，它是从左至右进行处理，但结果仍为对象。 这就意味着出现在展开对象后面的属性会覆盖前面的属性。 因此，如果我们修改上面的例子，在结尾处进行展开的话：</span><br><span class="line">let defaults = &#123; food: &quot;spicy&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125;;</span><br><span class="line">let search = &#123; food: &quot;rich&quot;, ...defaults &#125;;</span><br><span class="line">//那么，defaults里的food属性会重写food: &quot;rich&quot;</span><br></pre></td></tr></table></figure>

<p>对象展开还有其它一些意想不到的限制。 首先，它仅包含对象 自身的可枚举属性。 大体上是说当你展开一个对象实例时，你会丢失其方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class C &#123;</span><br><span class="line">  p = 12;</span><br><span class="line">  m() &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let c = new C();</span><br><span class="line">let clone = &#123; ...c &#125;;</span><br><span class="line">clone.p; // ok</span><br><span class="line">clone.m(); // error!</span><br></pre></td></tr></table></figure>

<p>其次，TypeScript 编译器不允许展开泛型函数上的类型参数。 这个特性会在 TypeScript 的未来版本中考虑实现。</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><h2 id="react-ts"><a href="#react-ts" class="headerlink" title="react+ts"></a>react+ts</h2><p>新建项目使用typescript<br>如果你是要新建一个使用typescript的react项目，并且你用脚手架Create React App去创建，那没就非常的容易，你只需要在创建的时候将命令改为<br><code>yarn create react-app xxx --template typescript</code></p>
<p>已有react项目<br>1、安装ts<br>npm i typescript -g 全局安装<br>npm i typescript -D 当前项目安装</p>
<p>tsc –init<br>修改tsconfig配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">     &quot;target&quot;: &quot;es5&quot;, /**指定ECMAScript目标版本**/                   </span><br><span class="line">     &quot;module&quot;: &quot;commonjs&quot;, /**指定生成哪个模块系统代码**/ </span><br><span class="line">     &quot;allowJs&quot;: true,  /**允许编译js文件**/                     </span><br><span class="line">     &quot;jsx&quot;: &quot;preserve&quot;,  /**支持JSX**/                  </span><br><span class="line">     &quot;outDir&quot;: &quot;build&quot;,  /**编译输出目录**/    </span><br><span class="line">     &quot;strict&quot;: true, /**启用所有严格类型检查选项**/ </span><br><span class="line">     &quot;noImplicitAny&quot;: false, /**在表达式和声明上有隐含的any类型时报错**/          </span><br><span class="line">     &quot;skipLibCheck&quot;: true,  /**忽略所有的声明文件的类型检查**/                   </span><br><span class="line">     &quot;forceConsistentCasingInFileNames&quot;: true   /**禁止对同一个文件的不一致的引用**/   </span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;include&quot;: [&quot;src&quot;] /**指定编译目录**/ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>安装react的声明文件<br><code>npm install --save typescript @types/node @types/react @types/react-dom @types/jest</code></p>
<h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><ul>
<li><p>Cannot use JSX unless the ‘–jsx’ flag is provided 报错或React‘ refers to a UMD global 或者 Cannot use JSX unless the ‘–jsx‘ flag is provided.<br>在tsconfig.json中加入：<br>“jsx”: “react-jsx”,</p>
</li>
<li><p>Cannot find module ‘./index.module.less’ or its corresponding type declarations</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">给ts的CSS文件加上类型的声明</span><br><span class="line">*.d.ts文件：ts专用的类型声明文件，只包含类型的声明，不包含逻辑，不会被编译，也不会被webpack打包</span><br><span class="line"></span><br><span class="line">declare module &quot;*.css&quot; &#123;</span><br><span class="line">  const css: &#123;[key: string]: string&#125;</span><br><span class="line">  export default css</span><br><span class="line">  &#125;</span><br><span class="line">  declare module &#x27;*.scss&#x27; &#123; </span><br><span class="line">  const content: &#123; [className: string]: string&#125;;</span><br><span class="line">  export = content;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><code>“AsyncThunkAction&lt;any，void，&#123;&#125;&gt;”</code>类型的参数不能分配给“AnyAction”类型的参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// app/store.ts</span><br><span class="line"></span><br><span class="line">import &#123; configureStore &#125; from &#x27;@reduxjs/toolkit&#x27;</span><br><span class="line">// ...</span><br><span class="line"></span><br><span class="line">export const store = configureStore(&#123;</span><br><span class="line">  reducer: &#123;</span><br><span class="line">    posts: postsReducer,</span><br><span class="line">    comments: commentsReducer,</span><br><span class="line">    users: usersReducer,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// Infer the `RootState` and `AppDispatch` types from the store itself</span><br><span class="line">export type RootState = ReturnType&lt;typeof store.getState&gt;</span><br><span class="line">// Inferred type: &#123;posts: PostsState, comments: CommentsState, users: UsersState&#125;</span><br><span class="line">export type AppDispatch = typeof store.dispatch</span><br><span class="line"></span><br><span class="line">// app/hooks.ts</span><br><span class="line"></span><br><span class="line">import &#123; TypedUseSelectorHook, useDispatch, useSelector &#125; from &#x27;react-redux&#x27;</span><br><span class="line">import type &#123; RootState, AppDispatch &#125; from &#x27;./store&#x27;</span><br><span class="line"></span><br><span class="line">// Use throughout your app instead of plain `useDispatch` and `useSelector`</span><br><span class="line">export const useAppDispatch = () =&gt; useDispatch&lt;AppDispatch&gt;()</span><br><span class="line">export const useAppSelector: TypedUseSelectorHook&lt;RootState&gt; = useSelector</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.baidu.com/2022/01/12/20-11-33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KK">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="KK">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/12/20-11-33/" class="post-title-link" itemprop="url">全栈项目</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-12 20:11:33" itemprop="dateCreated datePublished" datetime="2022-01-12T20:11:33+08:00">2022-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-15 20:53:15" itemprop="dateModified" datetime="2023-02-15T20:53:15+08:00">2023-02-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="全栈"><a href="#全栈" class="headerlink" title="全栈"></a>全栈</h1><h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><h3 id="创建前端项目"><a href="#创建前端项目" class="headerlink" title="创建前端项目"></a>创建前端项目</h3><h4 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h4><h5 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h5><p><code>vue create 项目名称</code></p>
<h5 id="使用-Vue-Styleguidist-编写组件文档"><a href="#使用-Vue-Styleguidist-编写组件文档" class="headerlink" title="使用 Vue Styleguidist 编写组件文档"></a>使用 Vue Styleguidist 编写组件文档</h5><p><a target="_blank" rel="noopener" href="https://vue-styleguidist.github.io/">Vue Styleguidist官网</a></p>
<p>首先，Vue Styleguidist 只能适用于 Webpack 打包的项目，在此基础上，我们需要安装 vue-styleguidist 这个包</p>
<p><code>npm install vue-styleguidist --save-dev</code><br>然后在 package.json 配置下面两行命令，分别用于开发预览和部署打包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;styleguide&quot;: &quot;vue-styleguidist server&quot;,</span><br><span class="line">    &quot;styleguide:build&quot;: &quot;vue-styleguidist build&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是使用 @vue/cli 3 生成的项目，可以直接使用 <code>vue-cli-plugin-styleguidist</code> 这个插件进行更快捷的安装和配置</p>
<ul>
<li><p>Props<br>Props 是组件最基本的 API，用于为组件传递数据,实际上，在配置好 Vue Styleguidist 之后，如果有写 prop，就已经能生成一个这样的文档</p>
</li>
<li><p>Events<br>除了 Props，Event 事件也是 Vue 的一个重要的 API 之一，可以通过 v-on 为组件绑定事件。Vue 的事件使用 vm.$(‘event’, …params) 的方法进行定义，我们只需要在这个方法之前，加上必要的注释就可以了。如果事件名不是字符串，可以使用 @event 进行标注，事件的参数使用 @type 进行标注</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">methods: &#123;</span><br><span class="line">  handleClick(e) &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 单击事件</span><br><span class="line">     * @type &#123;Event&#125;</span><br><span class="line">     */</span><br><span class="line">    this.$emit(&#x27;click&#x27;, e);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>Slots<br>Slot 插槽是 Vue 的自定义元素之一，Slot 向一个组件传递内容，也是封装公共组件常见的 API 之一,与 Props 和 Events 不同的是，Slots 通常是定义在<code>&lt;template&gt;</code>部分，不能使用 JS 注释进行标注，需要使用 HTML 注释，并且在注释里使用 @slot 进行标注</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  &lt;button</span><br><span class="line">class=&quot;btn&quot;</span><br><span class="line">:type=&quot;htmlType&quot;</span><br><span class="line">:class=&quot;btnClass&quot;</span><br><span class="line">:disabled=&quot;disabled&quot;</span><br><span class="line">@click=&quot;handleClick&quot;</span><br><span class="line">  &gt;</span><br><span class="line">&lt;!-- @slot 按钮的内容 --&gt;</span><br><span class="line">&lt;slot /&gt;</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>Methods<br>看到这里可能各位会有个疑问，Methods 和 Events 有什么区别？区别主要有以下两个：定义方式不同：Methods 只要在 methods 里定义函数即可，Events 则需要使用 <code>vm.$(&#39;event&#39;, ...params)</code> 进行定义,调用方式不同：Methods 使用<code>vm.$refs.ref.method()</code>这样的方式进行调用，Events 使用 v-on 指令或者 <code>vm.$on(&#39;event&#39;)</code> 进行监听。实际上，使用 Methods 方法封装组件 API 的情况是比较少的，但是依然不能排除这种情况。对于 Methods 方法，我们只需要像使用 JSDoc 一样为函数进行注释就可以了，最后再附上 @public 进行标识</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">methods: &#123;</span><br><span class="line">  /**</span><br><span class="line">   * 单击事件</span><br><span class="line">   * @param &#123;Event&#125; e</span><br><span class="line">   * @public</span><br><span class="line">   */</span><br><span class="line">  click(e) &#123;</span><br><span class="line">    // some code</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>组件样例<br>README 方式,在组件的同个目录下，新建一个文件 <code>README.md</code>，比如 <code>src/components/AppButton/README.md</code>然后直接调用组件代码<br>可以直接在组件下方增加一个组件 <code>&lt;docs&gt;&lt;/docs&gt;</code>，并在里面直接使用 Markdown 编写样例，这种方式适用于项目结构比较简单的项目，但是我认为会使组件的代码变得很冗长，在此不再赘述</p>
</li>
<li><p>配置<br>Vue Styleguidist 支持自定义配置，只需要在项目根目录下，创建 styleguide.config.js，就可以参照官方文档进行配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// styleguide.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">title: &#x27;Default Style Guide&#x27;,          // 文档的标题</span><br><span class="line">components: &#x27;src/components/**/*.vue&#x27;, // 组件的目录</span><br><span class="line">defaultExample: false,                 // 是否使用默认样例</span><br><span class="line">usageMode: &#x27;expand&#x27;,                   // 是否展开用法</span><br><span class="line">exampleMode: &#x27;expand&#x27;,                 // 是否展开示例代码</span><br><span class="line">styleguideDir: &#x27;styleguide&#x27;,           // 打包的目录</span><br><span class="line">codeSplit: true,                       // 打包时是否进行分片</span><br><span class="line">skipComponentsWithoutExample: true,    // 是否跳过没有样例的组件</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>注意<br>JSDoc 的标签仍然有效。TypeScript、Flow 和 Class 组件同样可以使用，只是使用方法稍有不同。JSX 也可以使用。实际上 Vue Styleguidist 来源于 React Styleguidist（也依赖于这个项目），使用方法大同小异，不同于 Vue 组件的是，React 组件的 API 只有 Props 一项</p>
</li>
</ul>
<h4 id="react"><a href="#react" class="headerlink" title="react"></a>react</h4><h5 id="安装脚手架"><a href="#安装脚手架" class="headerlink" title="安装脚手架"></a>安装脚手架</h5><p><code>npm i create-react-app -g</code></p>
<h5 id="创建文件夹并初始化"><a href="#创建文件夹并初始化" class="headerlink" title="创建文件夹并初始化"></a>创建文件夹并初始化</h5><p><code>create-react-app test_project</code><br><code>cd test_project</code><br><code>npm run start</code></p>
<h5 id="安装路由"><a href="#安装路由" class="headerlink" title="安装路由"></a>安装路由</h5><p><code>npm i react-router-dom</code><br>创建 router/index.js 文件,写入路由表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123; lazy, Suspense,  &#125; from &quot;react&quot;;</span><br><span class="line">import &#123; Navigate &#125; from &quot;react-router-dom&quot;;</span><br><span class="line">import LoadingPage from &quot;../pages/LoadingPage&quot;;</span><br><span class="line">const Home = lazy(() =&gt; import(&quot;../pages/Home&quot;));</span><br><span class="line">const ErrorBlock = lazy(() =&gt; import(&quot;../pages/ErrorBlock&quot;));</span><br><span class="line">let route = [</span><br><span class="line">	&#123;</span><br><span class="line">		path: &quot;/Home&quot;,</span><br><span class="line">		element: (</span><br><span class="line">			&lt;Suspense fallback=&#123;&lt;LoadingPage /&gt;&#125;&gt;</span><br><span class="line">				&lt;Home /&gt;</span><br><span class="line">			&lt;/Suspense&gt;</span><br><span class="line">		),</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		path: &quot;/ErrorBlock&quot;,</span><br><span class="line">		element: (</span><br><span class="line">			&lt;Suspense fallback=&#123;&lt;LoadingPage /&gt;&#125;&gt;</span><br><span class="line">				&lt;ErrorBlock /&gt;</span><br><span class="line">			&lt;/Suspense&gt;</span><br><span class="line">		),</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		path: &quot;/&quot;,</span><br><span class="line">		element: &lt;Navigate to=&quot;/Home&quot;&gt;&lt;/Navigate&gt;,</span><br><span class="line">	&#125;,</span><br><span class="line">];</span><br><span class="line">export default route;</span><br></pre></td></tr></table></figure>

<p>入口文件 index.js 中加入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123;BrowserRouter&#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">&lt;App/&gt;</span><br><span class="line">&lt;/BrowserRouter&gt;</span><br></pre></td></tr></table></figure>

<pre><code>App.js 中引入路由表
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./App.scss&#x27;;</span><br><span class="line">import route from &#x27;./route/&#x27;</span><br><span class="line">import &#123; useRoutes &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">function App() &#123;</span><br><span class="line">const element = useRoutes(route)</span><br><span class="line">return (</span><br><span class="line">&lt;div className=&quot;App&quot;&gt;</span><br><span class="line">&#123;element&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<h5 id="安装-redux"><a href="#安装-redux" class="headerlink" title="安装 redux"></a>安装 redux</h5><p><code>npm i redux react-redux</code><br>新建 store/index.js、store/actions/test/index.js、store/reducers/test/index.js,<br>在 store/index.js 中写入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123;createStore&#125; from &#x27;redux&#x27;</span><br><span class="line">import test from &#x27;./reducers/test/index.js&#x27;</span><br><span class="line">export default createStore(test)</span><br></pre></td></tr></table></figure>

<p>在 store/actions/test/index.js 中写入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import store from &#x27;../../index.js&#x27;</span><br><span class="line">export const test1=(data)=&gt;&#123;</span><br><span class="line">return store.dispatch( &#123;type:&#x27;test1&#x27;,data&#125; )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 store/reducers/test/index.js 中写入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const initState=&#123;&#125;</span><br><span class="line">export default function userInfo(preState=initState,action)&#123;</span><br><span class="line">const &#123;type,data&#125;=action</span><br><span class="line">console.log(&#x27;xxxinfo&#x27;,preState,action)</span><br><span class="line">return preState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 入口文件 src/index.js 中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; BrowserRouter &#125; from &#x27;react-router-dom&#x27;;</span><br><span class="line">import &#123; Provider &#125; from &#x27;react-redux&#x27;;</span><br><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line">const root = ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;));</span><br><span class="line">root.render(</span><br><span class="line">&lt;React.StrictMode&gt;</span><br><span class="line">&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">&lt;BrowserRouter&gt;</span><br><span class="line">&lt;App /&gt;&lt;/BrowserRouter&gt;</span><br><span class="line">&lt;/Provider&gt;</span><br><span class="line">&lt;/React.StrictMode&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h5><p>在 src 中创建 setupProxy.js,在 react18 中使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const proxy = require(&quot;http-proxy-middleware&quot;).createProxyMiddleware;</span><br><span class="line">module.exports = function (app) &#123;</span><br><span class="line">app.use(</span><br><span class="line">proxy(&quot;/apis&quot;, &#123;</span><br><span class="line">target: &quot;http://xxx:xxx&quot;,</span><br><span class="line">changeOrigin: true, //控制服务器收到的响应头中的 Host 字段值</span><br><span class="line">//apis 前缀置空</span><br><span class="line">pathRewrite: &#123; &quot;^/apis&quot;: &quot;&quot; &#125;,</span><br><span class="line">&#125;),</span><br><span class="line">proxy(&quot;/api2&quot;, &#123;</span><br><span class="line">target: &quot;http://xxx:xxx&quot;,</span><br><span class="line">changeOrigin: true, //控制服务器收到的响应头中的 Host 字段值,true 时为代理服务 ip,false 为当前 ip，默认为 false</span><br><span class="line">pathRewrite: &#123; &quot;^/api2&quot;: &quot;&quot; &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="使用-sass"><a href="#使用-sass" class="headerlink" title="使用 sass"></a>使用 sass</h5><p>安装：<code>npm install node-sass --save</code></p>
<h5 id="修改本地调试启动端口"><a href="#修改本地调试启动端口" class="headerlink" title="修改本地调试启动端口"></a>修改本地调试启动端口</h5><ol>
<li> 依次打开“node_modules”- “react-scripts”-“scripts”文件夹，找到并打开 start.js 文件；在 start.js 文件中查找并修改“DEFAULT_PORT”项的值即可</li>
<li> 修改 package.json 文件中</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">&quot;start&quot;: &quot;set PORT=9000 &amp;&amp; react-scripts start&quot;,</span><br><span class="line">&quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line">&quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,</span><br><span class="line">&quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改-elint-语法检测"><a href="#修改-elint-语法检测" class="headerlink" title="修改 elint 语法检测"></a>修改 elint 语法检测</h5><p>修改 package.json 文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&quot;eslintConfig&quot;: &#123;</span><br><span class="line">&quot;extends&quot;: [</span><br><span class="line">&quot;react-app&quot;,</span><br><span class="line">&quot;react-app/jest&quot;</span><br><span class="line">],</span><br><span class="line">&quot;rules&quot;: &#123;</span><br><span class="line">&quot;no-unused-vars&quot;: &quot;off&quot;,</span><br><span class="line">&quot;no-undef&quot;: &quot;off&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="安装-antd"><a href="#安装-antd" class="headerlink" title="安装 antd"></a>安装 antd</h5><p><code>npm i antd --save</code><br>/src/index.js 入口文件中引入样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;antd/dist/antd.min.css&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="创建后端项目"><a href="#创建后端项目" class="headerlink" title="创建后端项目"></a>创建后端项目</h3><p><code>npm install express-generator -g</code><br><code>express --view=ejs 项目名称</code></p>
<ul>
<li>启动项目</li>
</ul>
<p>`<a target="_blank" rel="noopener" href="http://dd/">http://dd</a></p>
<h4 id="node-实例"><a href="#node-实例" class="headerlink" title="node 实例"></a>node 实例</h4><p><strong>使用 nodejs 将 base64 文件转成图片和将图片转成 base64</strong></p>
<ul>
<li>将 base64 转成 png 图片格式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line">const path = &#x27;你想要填写的路径/&#x27;+ Date.now() +&#x27;.png&#x27;;</span><br><span class="line">const base64 = data.replace(/^data:image\/\w+;base64,/, &quot;&quot;);//去掉图片base64码前面部分data:image/png;base64</span><br><span class="line">const dataBuffer = new Buffer(base64, &#x27;base64&#x27;); //把base64码转成buffer对象，</span><br><span class="line">fs.writeFile(path, dataBuffer, function(err)&#123;//用fs写入文件</span><br><span class="line">    if(err)&#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(&#x27;写入成功！&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>将图片转成 base64</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">const util = require(&quot;util&quot;);</span><br><span class="line">const imageData = await util.promisify(fs.readFileSync(fileUrl)); // 例：xxx/xx/xx.png</span><br><span class="line">const imageBase64 = imageData.toString(&quot;base64&quot;);</span><br><span class="line">const imagePrefix = &quot;data:image/png;base64,&quot;;</span><br><span class="line">console.log(imagePrefix + imageBase64);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h3><ul>
<li>引入 antd 样式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Failed to parse source map: &#x27;webpack://antd/./components/icon/style/index.less&#x27; URL is not supported</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解决方法: antd-mobile 导入组件样式时加这个 min<br><code>import &#39;antd/dist/antd.min.css&#39;; </code></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">60</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a913481180" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a913481180" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kangkanghuang@foxmail.com" title="E-Mail → mailto:kangkanghuang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.baidu.com/" title="http:&#x2F;&#x2F;www.baidu.com">百度</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KK</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
